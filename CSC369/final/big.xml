<x>bar</x><html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Basics</title>
  <script type="text/javascript"> <![CDATA[
    function doTest() {
      var iterator = document.createNodeIterator(document, NodeFilter.SHOW_ALL, null, false);
      var expected = new Array(9, // document
                               1, // html
                               3, 1, // head
                               3, 1, 3, // title
                               3, 1, 3, 4, // script and CDATA block
                               3, 3, 1, // body
                               3, 1, 3, // pre
                               3, // </body>
                               3, 8, // <!-- -->
                               3, 7, // <? ?>,
                               3, 4, 3); // CDATA
      var found = new Array();

      // walk document
      var node;
      while (node = iterator.nextNode())
        found.push(node.nodeType);

      // check results
      var errors = 0;
      var s = '';
      var length = (found.length > expected.length) ? found.length : expected.length;
      s += 'EXPECTED  FOUND\n';
      for (var i = 0; i < length; i += 1) {
        s += '  ' + (expected[i] ? expected[i] : '-') +
      '         ' + (found[i] ? found[i] : '-');
        if (found[i] != expected[i]) {
          s += '      MISMATCH';
          errors += 1;
        }
        s += '\n';
      }
      var p = document.getElementsByTagNameNS('http://www.w3.org/1999/xhtml', 'pre')[0];
      if (errors)
        p.firstChild.data = 'FAIL: ' + errors + ' errors found:\n\n' + s;
      else
        p.firstChild.data = 'PASS';
    }
  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script failed to run.</pre>
 </body>
 <!-- some more nodes to test this: -->
 <?test node?>
 <![CDATA[]]>
</html><html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Basics Backwards</title>
  <script type="text/javascript"> <![CDATA[
    function doTest() {
      var iterator = document.createNodeIterator(document, NodeFilter.SHOW_ALL, null, false);
      var expected = new Array(9, // document
                               1, // html
                               3, 1, // head
                               3, 1, 3, // title
                               3, 1, 3, 4, // script and CDATA block
                               3, 3, 1, // body
                               3, 1, 3, // pre
                               3, // </body>
                               3, 8, // <!-- -->
                               3, 7, // <? ?>,
                               3, 4, 3); // CDATA
      var found = new Array();

      // walk document
      var node;
      while (node = iterator.nextNode());
      while (node = iterator.previousNode())
        found.unshift(node.nodeType);

      // check results
      var errors = 0;
      var s = '';
      var length = (found.length > expected.length) ? found.length : expected.length;
      s += 'EXPECTED  FOUND\n';
      for (var i = 0; i < length; i += 1) {
        s += '  ' + (expected[i] ? expected[i] : '-') +
      '         ' + (found[i] ? found[i] : '-');
        if (found[i] != expected[i]) {
          s += '      MISMATCH';
          errors += 1;
        }
        s += '\n';
      }
      var p = document.getElementsByTagNameNS('http://www.w3.org/1999/xhtml', 'pre')[0];
      if (errors)
        p.firstChild.data = 'FAIL: ' + errors + ' errors found:\n\n' + s;
      else
        p.firstChild.data = 'PASS';
    }
  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script failed to run.</pre>
 </body>
 <!-- some more nodes to test this: -->
 <?test node?>
 <![CDATA[]]>
</html><html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Removal of nodes that should have no effect</title>
  <!--
   This tests these cases that should have no effect:
    1. Remove a node unrelated to the reference node
    2. Remove an ancestor of the root node
    3. Remove the root node itself
    4. Remove descendant of reference node
  -->
  <script type="text/javascript"> <![CDATA[
    var errors = 0;
    var log = '';
    function doTest() {
      var iterator = document.createNodeIterator(document.getElementById('root'), NodeFilter.SHOW_ALL, null, false);
      var root = document.getElementById('root');
      var A = document.getElementById('A');
      var B = document.getElementById('B');
      var C = document.getElementById('C');
      var D = document.getElementById('D');
      var E = document.getElementById('E');
      check(iterator.nextNode(), root);
      remove(document.getElementById('X'));
      check(iterator.nextNode(), A);
      remove(document.getElementById('Y'));
      check(iterator.nextNode(), B);
      remove(root);
      check(iterator.nextNode(), C);
      remove(E);
      check(iterator.nextNode(), D);
      if (errors)
        document.getElementById('result').firstChild.data = 'FAIL: ' + errors + ' errors:\n' + log;
      else
        document.getElementById('result').firstChild.data = 'PASS';
    }
    function check(a, b) {
      if (!a) {
        errors += 1;
        log += 'Found null but expected ' + b + ' (' + b.id + ').\n';
      } else if (a != b) {
        errors += 1;
        log += 'Found ' + a + ' (' + a.id + ') but expected ' + b + ' (' + b.id + ').\n';
      }
    }
    function remove(a) {
      if (!a) {
        errors += 1;
        log += 'Tried removing null node.\n';
      } else
      a.parentNode.removeChild(a);
    }
  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script did not complete.</pre>
  <p><span id="X"></span><span id="Y"><span id="root"><span id="A"><span id="B"><span id="C"><span id="D"><span id="E"></span></span></span></span></span></span></span></p>
 </body>
</html><html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Removal of the Reference Node</title>
  <script type="text/javascript"> <![CDATA[
    var errors = 0;
    var log = '';
    function doTest() {
      var iterator = document.createNodeIterator(document.getElementById('root'), NodeFilter.SHOW_ALL, null, false);
      var root = document.getElementById('root');
      var A = document.getElementById('A');
      var AA = document.getElementById('AA');
      var B = document.getElementById('B');
      var C = document.getElementById('C');
      check(iterator.nextNode(), root);
      check(iterator.nextNode(), A);
      check(iterator.nextNode(), AA);
      check(iterator.nextNode(), B);
      remove(B);
      check(iterator.previousNode(), AA);
      remove(AA);
      check(iterator.nextNode(), C);
      if (errors)
        document.getElementById('result').firstChild.data = 'FAIL: ' + errors + ' errors:\n' + log;
      else
        document.getElementById('result').firstChild.data = 'PASS';
    }
    function check(a, b) {
      if (!a) {
        errors += 1;
        log += 'Found null but expected ' + b + ' (' + b.id + ').\n';
      } else if (a != b) {
        errors += 1;
        log += 'Found ' + a + ' (' + a.id + ') but expected ' + b + ' (' + b.id + ').\n';
      }
    }
    function remove(a) {
      if (!a) {
        errors += 1;
        log += 'Tried removing null node.\n';
      } else
      a.parentNode.removeChild(a);
    }
  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script did not complete.</pre>
  <p><span id="root"><span id="A"><span id="AA"></span></span><span id="B"></span><span id="C"><span id="CC"></span></span></span></p>
 </body>
</html><html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Removal of the Reference Node (deep check)</title>
  <script type="text/javascript"> <![CDATA[
    var errors = 0;
    var log = '';
    function doTest() {
      var iterator = document.createNodeIterator(document.getElementById('root'), NodeFilter.SHOW_ALL, null, false);
      var root = document.getElementById('root');
      var A = document.getElementById('A');
      var AA = document.getElementById('AA');
      var B = document.getElementById('B');
      var C = document.getElementById('C');
      check(iterator.nextNode(), root);
      check(iterator.nextNode(), A);
      check(iterator.nextNode(), AA);
      check(iterator.nextNode(), B);
      remove(B);
      var X = addChildTo(AA);
      check(iterator.nextNode(), X);
      check(iterator.previousNode(), X);
      remove(X);
      var Y = addChildTo(AA);
      check(iterator.previousNode(), Y);
      if (errors)
        document.getElementById('result').firstChild.data = 'FAIL: ' + errors + ' errors:\n' + log;
      else
        document.getElementById('result').firstChild.data = 'PASS';
    }
    function check(a, b) {
      if (!a) {
        errors += 1;
        log += 'Found null but expected ' + b + ' (' + b.id + ').\n';
      } else if (a != b) {
        errors += 1;
        log += 'Found ' + a + ' (' + a.id + ') but expected ' + b + ' (' + b.id + ').\n';
      }
    }
    function remove(a) {
      if (!a) {
        errors += 1;
        log += 'Tried removing null node.\n';
      } else
      a.parentNode.removeChild(a);
    }
    function addChildTo(a) {
      var x = document.createElementNS('http://www.w3.org/1999/xhtml', 'span');
      a.appendChild(x);
      return x;
    }
  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script did not complete.</pre>
  <p><span id="root"><span id="A"><span id="AA"></span></span><span id="B"></span><span id="C"><span id="CC"></span></span></span></p>
 </body>
</html><html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Removal of an ancestor of the Reference Node (forwards)</title>
  <script type="text/javascript"> <![CDATA[
    var errors = 0;
    var log = '';
    function doTest() {
      var iterator = document.createNodeIterator(document.getElementById('root'), NodeFilter.SHOW_ALL, null, false);
      var root = document.getElementById('root');
      var A = document.getElementById('A');
      var B = document.getElementById('B');
      var BB = document.getElementById('BB');
      var C = document.getElementById('C');
      check(iterator.nextNode(), root);
      check(iterator.nextNode(), A);
      check(iterator.nextNode(), B);
      check(iterator.nextNode(), BB);
      remove(B);
      check(iterator.previousNode(), A);
      if (errors)
        document.getElementById('result').firstChild.data = 'FAIL: ' + errors + ' errors:\n' + log;
      else
        document.getElementById('result').firstChild.data = 'PASS';
    }
    function check(a, b) {
      if (!a) {
        errors += 1;
        log += 'Found null but expected ' + b + ' (' + b.id + ').\n';
      } else if (a != b) {
        errors += 1;
        log += 'Found ' + a + ' (' + a.id + ') but expected ' + b + ' (' + b.id + ').\n';
      }
    }
    function remove(a) {
      if (!a) {
        errors += 1;
        log += 'Tried removing null node.\n';
      } else
      a.parentNode.removeChild(a);
    }
  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script did not complete.</pre>
  <p><span id="root"><span id="A"></span><span id="B"><span id="BB"></span></span><span id="C"></span></span></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Removal of an ancestor of the Reference Node (forwards) (deep check)</title>
  <script type="text/javascript"> <![CDATA[
    var errors = 0;
    var log = '';
    function doTest() {
      var iterator = document.createNodeIterator(document.getElementById('root'), NodeFilter.SHOW_ALL, null, false);
      var root = document.getElementById('root');
      var A = document.getElementById('A');
      var B = document.getElementById('B');
      var BB = document.getElementById('BB');
      var C = document.getElementById('C');
      check(iterator.nextNode(), root);
      check(iterator.nextNode(), A);
      check(iterator.nextNode(), B);
      check(iterator.nextNode(), BB);
      remove(B);
      var X = addChildTo(A);
      check(iterator.nextNode(), X);
      if (errors)
        document.getElementById('result').firstChild.data = 'FAIL: ' + errors + ' errors:\n' + log;
      else
        document.getElementById('result').firstChild.data = 'PASS';
    }
    function check(a, b) {
      if (!a) {
        errors += 1;
        log += 'Found null but expected ' + b + ' (' + b.id + ').\n';
      } else if (a != b) {
        errors += 1;
        log += 'Found ' + a + ' (' + a.id + ') but expected ' + b + ' (' + b.id + ').\n';
      }
    }
    function remove(a) {
      if (!a) {
        errors += 1;
        log += 'Tried removing null node.\n';
      } else
      a.parentNode.removeChild(a);
    }
    function addChildTo(a) {
      var x = document.createElementNS('http://www.w3.org/1999/xhtml', 'span');
      x.id = 'X';
      a.appendChild(x);
      return x;
    }
  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script did not complete.</pre>
  <p><span id="root"><span id="A"></span><span id="B"><span id="BB"></span></span><span id="C"></span></span></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Removal of an ancestor of the Reference Node (backwards)</title>
  <script type="text/javascript"> <![CDATA[
    var errors = 0;
    var log = '';
    function doTest() {
      var iterator = document.createNodeIterator(document.getElementById('root'), NodeFilter.SHOW_ALL, null, false);
      var root = document.getElementById('root');
      var A = document.getElementById('A');
      var B = document.getElementById('B');
      var BB = document.getElementById('BB');
      var C = document.getElementById('C');
      check(iterator.nextNode(), root);
      check(iterator.nextNode(), A);
      check(iterator.nextNode(), B);
      check(iterator.nextNode(), BB);
      check(iterator.previousNode(), BB);
      remove(B);
      check(iterator.nextNode(), C);
      if (errors)
        document.getElementById('result').firstChild.data = 'FAIL: ' + errors + ' errors:\n' + log;
      else
        document.getElementById('result').firstChild.data = 'PASS';
    }
    function check(a, b) {
      if (!a) {
        errors += 1;
        log += 'Found null but expected ' + b + ' (' + b.id + ').\n';
      } else if (a != b) {
        errors += 1;
        log += 'Found ' + a + ' (' + a.id + ') but expected ' + b + ' (' + b.id + ').\n';
      }
    }
    function remove(a) {
      if (!a) {
        errors += 1;
        log += 'Tried removing null node.\n';
      } else
      a.parentNode.removeChild(a);
    }
  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script did not complete.</pre>
  <p><span id="root"><span id="A"></span><span id="B"><span id="BB"></span></span><span id="C"></span></span></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Removal of an ancestor of the Reference Node (backwards) (deep check)</title>
  <script type="text/javascript"> <![CDATA[
    var errors = 0;
    var log = '';
    function doTest() {
      var iterator = document.createNodeIterator(document.getElementById('root'), NodeFilter.SHOW_ALL, null, false);
      var root = document.getElementById('root');
      var A = document.getElementById('A');
      var B = document.getElementById('B');
      var BB = document.getElementById('BB');
      var C = document.getElementById('C');
      check(iterator.nextNode(), root);
      check(iterator.nextNode(), A);
      check(iterator.nextNode(), B);
      check(iterator.nextNode(), BB);
      check(iterator.previousNode(), BB);
      remove(B);
      var X = addChildTo(A);
      check(iterator.previousNode(), X);
      if (errors)
        document.getElementById('result').firstChild.data = 'FAIL: ' + errors + ' errors:\n' + log;
      else
        document.getElementById('result').firstChild.data = 'PASS';
    }
    function check(a, b) {
      if (!a) {
        errors += 1;
        log += 'Found null but expected ' + b + ' (' + b.id + ').\n';
      } else if (a != b) {
        errors += 1;
        log += 'Found ' + a + ' (' + a.id + ') but expected ' + b + ' (' + b.id + ').\n';
      }
    }
    function remove(a) {
      if (!a) {
        errors += 1;
        log += 'Tried removing null node.\n';
      } else
      a.parentNode.removeChild(a);
    }
    function addChildTo(a) {
      var x = document.createElementNS('http://www.w3.org/1999/xhtml', 'span');
      x.id = 'X';
      a.appendChild(x);
      return x;
    }
  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script did not complete.</pre>
  <p><span id="root"><span id="A"></span><span id="B"><span id="BB"></span></span><span id="C"></span></span></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>DOM Traversal: NodeIterator: Filters</title>
  <script type="text/javascript"> <![CDATA[
    function doTest() {
      var iterator = document.createNodeIterator(document, NodeFilter.SHOW_ALL, testFilter, false);
      // skips text nodes and body element
      var expected = new Array(9, // document
                               1, // html
                               1, // head
                               1, // title
                               1, 4, // script and CDATA block
                               // body (skipped)
                               1, // pre
                               // </body>
                               8, // <!-- -->
                               // PI skipped
                               4); // CDATA
      var found = new Array();

      // walk document
      var node;
      while (node = iterator.nextNode())
        found.push(node.nodeType);

      // check results
      var errors = 0;
      var s = '';
      var length = (found.length > expected.length) ? found.length : expected.length;
      s += 'EXPECTED  FOUND\n';
      for (var i = 0; i < length; i += 1) {
        s += '  ' + (expected[i] ? expected[i] : '-') +
      '         ' + (found[i] ? found[i] : '-');
        if (found[i] != expected[i]) {
          s += '      MISMATCH';
          errors += 1;
        }
        s += '\n';
      }
      var p = document.getElementsByTagNameNS('http://www.w3.org/1999/xhtml', 'pre')[0];
      if (errors)
        p.firstChild.data = 'FAIL: ' + errors + ' errors found:\n\n' + s;
      else
        p.firstChild.data = 'PASS';
    }

    function testFilter(n) {
      if (n.nodeType == 3) {
        return NodeFilter.FILTER_SKIP;
      } else if (n.nodeName == 'body') {
        return NodeFilter.FILTER_REJECT; // same as _SKIP
      }
      return 1; // FILTER_ACCEPT
    }

  ]]></script>
 </head>
 <body onload="doTest()">
  <pre id="result">FAIL: Script failed to run.</pre>
 </body>
 <!-- some more nodes to test this: -->
 <?body test?>
 <![CDATA[]]>
</html><?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?> 
<!DOCTYPE window>

<window
   id         = "xulnote-main-window"
   xmlns      = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:html = "http://www.w3.org/1999/xhtml" 
   onload     = "init();"
>
  <scrollbox>
   <vbox style="background-color:white;">
      <text value="hahaha  0"/>
      <text value="hahaha  1"/>
      <text value="hahaha  2"/>
      <text value="hahaha  3"/>
      <text value="hahaha  4"/>
      <text value="hahaha  5"/>
      <text value="hahaha  6"/>
      <text value="hahaha  7"/>
      <text value="hahaha  8"/>
      <text value="hahaha  9"/>
      <text value="hahaha 10"/>
      <text value="hahaha 11"/>
      <text value="hahaha 12"/>
      <text value="hahaha 13"/>
      <text value="hahaha 14"/>
      <text value="hahaha 15"/>
      <text value="hahaha 16"/>
      <text value="hahaha 17"/>
      <text value="hahaha 18"/>
      <text value="hahaha 19"/>
   </vbox>
<scrollbar
    id="identifier"
    align="horizontal"
    curpos="20"
    maxpos="100"
    increment="1"
    pageincrement="10"/>

  </scrollbox>

 <script type="application/x-javascript">
  <![CDATA[
   function init()
   {
   }
 ]]>
 </script>

</window>
<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="111994.xsl" ?>
<root>
  <item id="1001" name="name" />
</root>
<?xml version="1.0" standalone="yes"?>
<!DOCTYPE SITES
[
    <!ELEMENT SITES (VERSION, SITE+)>
    <!ELEMENT VERSION (#PCDATA)>
    <!ELEMENT SITE (ID, NAME, MAXADDR, MAXALIASES, MAXQUOTA, TYPE, DOMAINS?, USERS?, ALIASES?)>
    <!ELEMENT DOMAINS (DOMAIN*)>
    <!ELEMENT DOMAIN (#PCDATA)>

    <!ELEMENT USERS (USER*)>
    <!ELEMENT USER (ID, NAME, ROA, ROC, QUOTA, TYPE)>

    <!ELEMENT ALIASES (ALIAS*)>
    <!ELEMENT ALIAS (LEFTPART, RIGHTPART)>
    
    <!ELEMENT ID (#PCDATA)>
    <!ELEMENT NAME (#PCDATA)>
    <!ELEMENT MAXADDR (#PCDATA)>
    <!ELEMENT MAXALIASES (#PCDATA)>
    <!ELEMENT MAXQUOTA (#PCDATA)>
    <!ELEMENT TYPE (#PCDATA)>

    <!ELEMENT ROA (#PCDATA)>
    <!ELEMENT ROC (#PCDATA)>
    <!ELEMENT QUOTA (#PCDATA)>

    <!ELEMENT LEFTPART (#PCDATA)>
    <!ELEMENT RIGHTPART (#PCDATA)>
]
>
<SITES>
<VERSION>1</VERSION>
<SITE>
	<ID>60</ID>
	<NAME>abtauchen</NAME>
	<MAXADDR>1</MAXADDR>
	<MAXALIASES>1</MAXALIASES>
	<MAXQUOTA>10240</MAXQUOTA>
	<TYPE>p</TYPE>
	<DOMAINS>
		<DOMAIN>abtauchen.at</DOMAIN>
		<DOMAIN>abtauchen.com</DOMAIN>
		<DOMAIN>abtauchen.net</DOMAIN>
	</DOMAINS>
	<USERS>
		<USER>
			<ID>83</ID>
			<NAME>info</NAME>
			<ROA>y</ROA>
			<ROC>n</ROC>
			<QUOTA>10240</QUOTA>
			<TYPE>p</TYPE>
		</USER>
	</USERS>
	<ALIASES>
		<ALIAS>
			<LEFTPART>*</LEFTPART>
			<RIGHTPART>info</RIGHTPART>
		</ALIAS>
	</ALIASES>
</SITE>
</SITES><?xml version="1.0"?>
<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
      <treechildren style = " display: block; " />
</window><?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html" />
  <title>Math with position: absolute</title>
  <style>
   math { position: absolute; }
  </style>
</head>
<body>
 <math xmlns="http://www.w3.org/1998/Math/MathML">
  <infinity/>
 </math>
</body>
</html>
<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="182460-selects.xsl"?>
<fud/><link xmlns="http://www.w3.org/1999/xhtml" href="some.css" rel="stylesheet" />
<x /><?xml version="1.0"?>

<foo /> <!-- é --><?xml version="1.0" encoding="UTF-8"?>
<foo/>
<!-- é --><?xml version="1.0" encoding="iso-8859-1"?>
<?xml-stylesheet type="text/xsl" href="226425.xsl" ?>

<text></text>


    <math xmlns="http://www.w3.org/1998/Math/MathML" mode="inline">
      <mfrac>
        <mi>x</mi>
        <mi>y</mi>
      </mfrac>
    </math>
    <math xmlns="http://www.w3.org/1998/Math/MathML" mode="display">
      <mfrac>

        <mi>x</mi>
        <mi>y</mi>
      </mfrac>
    </math>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE whatever PUBLIC
          "-//MOZ//WHATEVER//EN"
          "http://mozilla.org/ns/foo">
<foo xmlns="htp://mozilla.org/ns">
    <baz /><!-- a comment --> <bar> &lt;robots&gt; &amp; &lt;aliens&gt;
<mozilla> a a a a a éèàùûî</mozilla>
        <firefox>Lorem ip<!-- aaa -->sum dolor sit amet, consectetuer adipiscing elit. Nam eu sapien. Sed viverra lacus. Donec quis ipsum. Nunc cursus aliquet lectus. Nunc vitae eros. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Nam tellus massa, fringilla aliquam, fermentum sit amet, posuere ac, est. Duis tristique egestas ligula. Mauris quis felis. Fusce a ipsum non lacus posuere aliquet. Sed fermentum posuere nulla. Donec tempor. Donec sollicitudin tortor lacinia libero ullamcorper laoreet. Cras quis nisi at odio consectetuer molestie.</firefox>
        <?xml-foo "hey" ?>
</bar>
              <!-- a comment 
         on several lines-->
 <?xml-foo "another pi on two lines"  
              example="hello"?>
</foo><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE whatever PUBLIC "-//MOZ//WHATEVER//EN" "http://mozilla.org/ns/foo">
<foo xmlns="htp://mozilla.org/ns">
    <baz/><!-- a comment --> <bar> &lt;robots&gt; &amp; &lt;aliens&gt;
<mozilla> a a a a a éèàùûî</mozilla>
        <firefox>Lorem ip<!-- aaa -->sum dolor sit amet, consectetuer adipiscing elit. Nam eu sapien. Sed viverra lacus. Donec quis ipsum. Nunc cursus aliquet lectus. Nunc vitae eros. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Nam tellus massa, fringilla aliquam, fermentum sit amet, posuere ac, est. Duis tristique egestas ligula. Mauris quis felis. Fusce a ipsum non lacus posuere aliquet. Sed fermentum posuere nulla. Donec tempor. Donec sollicitudin tortor lacinia libero ullamcorper laoreet. Cras quis nisi at odio consectetuer molestie.</firefox>
        <?xml-foo "hey" ?>
</bar>
              <!-- a comment 
         on several lines-->
 <?xml-foo "another pi on two lines"  
              example="hello"?>
</foo><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE whatever PUBLIC "-//MOZ//WHATEVER//EN" "http://mozilla.org/ns/foo">
<foo xmlns="htp://mozilla.org/ns">
  <baz/><!-- a comment -->
  <bar> &lt;robots&gt; &amp; &lt;aliens&gt;
    <mozilla> a a a a a éèàùûî</mozilla>
    <firefox>Lorem ip<!-- aaa -->sum dolor sit amet, consectetuer adipiscing elit. Nam eu sapien. Sed viverra lacus. Donec quis ipsum. Nunc cursus aliquet lectus. Nunc vitae eros. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Nam tellus massa, fringilla aliquam, fermentum sit amet, posuere ac, est. Duis tristique egestas ligula. Mauris quis felis. Fusce a ipsum non lacus posuere aliquet. Sed fermentum posuere nulla. Donec tempor. Donec sollicitudin tortor lacinia libero ullamcorper laoreet. Cras quis nisi at odio consectetuer molestie.</firefox>
    <?xml-foo "hey" ?>
  </bar>
  <!-- a comment 
         on several lines-->
  <?xml-foo "another pi on two lines"  
              example="hello"?>
</foo><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE whatever PUBLIC "-//MOZ//WHATEVER//EN" "http://mozilla.org/ns/foo">
<foo xmlns="htp://mozilla.org/ns">
  <baz/><!-- a comment -->
  <bar> &lt;robots&gt; &amp; &lt;aliens&gt;
    <mozilla> a a a a a éèàùûî</mozilla>
    <firefox>Lorem ip<!-- aaa -->sum dolor sit amet, consectetuer
      adipiscing elit. Nam eu sapien. Sed viverra lacus. Donec quis
      ipsum. Nunc cursus aliquet lectus. Nunc vitae eros. Class aptent
      taciti sociosqu ad litora torquent per conubia nostra, per
      inceptos hymenaeos. Nam tellus massa, fringilla aliquam, fermentum
      sit amet, posuere ac, est. Duis tristique egestas ligula. Mauris
      quis felis. Fusce a ipsum non lacus posuere aliquet. Sed fermentum
      posuere nulla. Donec tempor. Donec sollicitudin tortor lacinia
      libero ullamcorper laoreet. Cras quis nisi at odio consectetuer
      molestie.</firefox>
    <?xml-foo "hey" ?>
  </bar>
  <!-- a comment 
         on several lines-->
  <?xml-foo "another pi on two lines"  
              example="hello"?>
</foo><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE whatever PUBLIC "-//MOZ//WHATEVER//EN" "http://mozilla.org/ns/foo">
<foo xmlns="htp://mozilla.org/ns">
    <baz/><!-- a comment --> <bar> &lt;robots&gt; &amp; &lt;aliens&gt;
<mozilla> a a a a a éèàùûî</mozilla>
        <firefox>Lorem ip<!-- aaa -->sum dolor sit amet, consectetuer 
adipiscing elit. Nam eu sapien. Sed viverra lacus. Donec quis ipsum. 
Nunc cursus aliquet lectus. Nunc vitae eros. Class aptent taciti 
sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. 
Nam tellus massa, fringilla aliquam, fermentum sit amet, posuere ac, 
est. Duis tristique egestas ligula. Mauris quis felis. Fusce a ipsum non
 lacus posuere aliquet. Sed fermentum posuere nulla. Donec tempor. Donec
 sollicitudin tortor lacinia libero ullamcorper laoreet. Cras quis nisi 
at odio consectetuer molestie.</firefox>
        <?xml-foo "hey" ?>
</bar>
              <!-- a comment 
         on several lines-->
 <?xml-foo "another pi on two lines"  
              example="hello"?>
</foo><?xml version="1.0"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"         "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg">    <g transform="scale(1e10)">        <rect x="0" y="0" width="400" height="200" rx="50" ry="50"            fill="none" stroke="purple" stroke-width="30"/>    </g></svg><?xml version='1.0'?>

<html xmlns="http://www.w3.org/1999/xhtml">

<body>

<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'><msup>

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

</msup></math>

</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" style="white-space: pre;" class="reftest-wait"><script><![CDATA[

function init() { 
  var docElt = document.documentElement;
  var firstText = docElt.childNodes[1];
  var div = docElt.childNodes[2];
  var bidiText = div.childNodes[0];

  function first() 
  {
    docElt.insertBefore(div, firstText);
    docElt.insertBefore(bidiText, div);
  }
  
  function second()
  {
    docElt.insertBefore(div, firstText);
    docElt.appendChild(bidiText);
    document.documentElement.removeAttribute("class");
  }
  
  first();
  setTimeout(second, 100);

}

window.addEventListener("load", init, false);

]]></script>

A<div>׳
Z</div></html><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml' id="root" class="reftest-wait">

<div id="D1"><div id="D2"/></div>

<script>
<![CDATA[

function gE(id) { return document.getElementById(id); }

function init()
{
  gE("root").style.display = "table";

  gE("D1").style.position = "absolute";

  setTimeout(function() {gE("D2").style.position = "fixed";}, 100);
  setTimeout(function() {gE("D1").style.overflow = "hidden";}, 200);
  setTimeout(function() {gE("root").style.width = "200%"; document.documentElement.removeAttribute("class"); }, 300);
}

window.addEventListener("load", init, false);

]]>
</script>

</html>
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE xhtml PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN" "http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg.dtd" [ 
]>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:xlink="http://www.w3.org/1999/xlink">
  <head>
  <title>bug 313737</title>
  </head>
  <body>

     <svg:svg style="position:fixed;">
        <input type="text" style="position:absolute;"  />
     </svg:svg>

  </body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="#"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="html" encoding="utf-8" doctype-public="-//W3C//DTD HTML 4.01//EN"/>

<xsl:template match="/">
<html>
<head>
<title>This is a test</title>
<style type="text/css">
  * {color:red} 
  div#first, DIV#second {color:green}
</style>
</head>
<body>
<div id="first">This text should be green. CSS selector is in lowercase.</div>
<div id="second">This text should be green. CSS selector is in uppercase.</div>
</body>
</html>
</xsl:template>

</xsl:stylesheet>
<html xmlns="http://www.w3.org/1999/xhtml">
  <div>
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline">
      <ms />
    </math>
  </div>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <div>
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline">
      <mtable>
        <mroot />
      </mtable>
    </math>
  </div>
</html><html xmlns="http://www.w3.org/1999/xhtml">
  <div>
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline">
          <msub>
            <mo>
              <factorial />
            </mo>
          </msub>
    </math>
  </div>
</html><html xmlns="http://www.w3.org/1999/xhtml">
  <div>
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline">
      <notin>
        <mspace>
          <mfenced />
        </mspace>

        f
      </notin>
    </math>
  </div>
</html><html xmlns="http://www.w3.org/1999/xhtml">
  <div>
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline">

      <eulergamma>
        <arcsech>
          <mrow>
            <mtable>
              <maction/>
            </mtable>
          </mrow>
        </arcsech>
      </eulergamma>
    </math>
  </div>
</html><html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      >

<body>

  <xul:hbox>
    <select/>
    <select/>
  </xul:hbox>

</body>

</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>pseudo double SetInitialChildlist</title>
  <style>
   .cat::-moz-table-row-group { overflow: scroll;}
   tr { position: absolute;}
  </style>
 </head>

 <body>

  <table class="cat">
   <tr>
    <td>Cell</td>
   </tr>
  </table>

 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>pseudo double SetInitialChildlist</title>
  <style>
   .cat::-moz-table-row-group { overflow: scroll;}
   tr { position: absolute;}
  </style>
 </head>

 <body>

  <div class="cat" style="display:table">
   <div style="display:block">
    <div style="display:table-cell">Cell</div>
   </div>
  </div>

 </body>
</html>
<?xml version="1.0"?>
<!DOCTYPE foo [
<!ENTITY  editAwayMessageSpecial3.label " %%d = Current date">
<!ELEMENT foo EMPTY>
]>
<foo/>
<?xml version="1.0"?>

<bindings id="marqueeBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="marquee-horizontal-10">

    <content>
      <html:div>
        <children/>
      </html:div>
    </content>

  </binding>

</bindings>
<?xml version='1.0'?>
<?xml-stylesheet type="text/xsl" href="347174transform.xsl"?>
<doc>This is a sample document.</doc>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>
<p><m:math>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:18px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:18px;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:96px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:192px;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:96px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:192px;">Id</m:mi></m:mstyle>
</m:math></p>
<p><m:math>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:96px;">Id</m:mi></m:mstyle>
</m:math></p>
<p><m:math>
  <m:mstyle><m:mi style="font-size:18px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
</m:math></p>
<p><m:math>
  <m:mstyle><m:mi style="font-size:18px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:18px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
</m:math></p>
</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>
<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mi>Id</m:mi>
  <m:mstyle scriptlevel="+1"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle scriptlevel="+2"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle scriptlevel="+3"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle scriptlevel="-2"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
    <m:mstyle scriptlevel="+1"><m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
    <m:mstyle scriptlevel="+1"><m:mstyle scriptlevel="-2"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
    <m:mstyle scriptlevel="+1"><m:mstyle scriptlevel="-3"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>
<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
    <m:mstyle scriptlevel="+2"><m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
    <m:mstyle scriptlevel="+2"><m:mstyle scriptlevel="-2"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
    <m:mstyle scriptlevel="+2"><m:mstyle scriptlevel="-3"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>
<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
    <m:mstyle scriptlevel="+3"><m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
    <m:mstyle scriptlevel="+3"><m:mstyle scriptlevel="-2"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
    <m:mstyle scriptlevel="+3"><m:mstyle scriptlevel="-3"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>
<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
    <m:mstyle scriptlevel="+4"><m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
    <m:mstyle scriptlevel="+4"><m:mstyle scriptlevel="-2"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
    <m:mstyle scriptlevel="+4"><m:mstyle scriptlevel="-3"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>
</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>
<p><m:math>
  <m:mstyle><m:mi style="font-size:18px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:10px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:10px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:20px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:40px;">Id</m:mi></m:mstyle>
</m:math></p>
<p><m:math>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:18px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:12px;">Id</m:mi></m:mstyle>
</m:math></p>
</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>
<!-- Test interactions between CSS font-size and scriptlevel changes -->
<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle scriptlevel="+5"><m:mi>Id</m:mi></m:mstyle>
  <!-- Test that we can explicitly go below scriptminsize -->
  <m:mi style="font-size:10px;">Id</m:mi>
  <!-- Test that a relative font-size ignores the scriptlevel change in the same element -->
  <m:mstyle scriptlevel="+5" style="font-size:100%;"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <!-- Test that scriptlevel changes are incremental (this should be 24px) -->
  <m:mstyle scriptlevel="+1" style="font-size:48px;"><m:mstyle scriptlevel="+1"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <!-- Decreasing the font size due to a scriptlevel change should do nothing when we're below minscriptsize -->
  <m:mstyle style="font-size:10px;"><m:mstyle scriptlevel="+1"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
  <!-- but we can increase -->
  <m:mstyle style="font-size:10px;"><m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
  <m:mstyle style="font-size:10px;"><m:mstyle scriptlevel="-2"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <!-- An absolute font-size value resets the unconstrained size to that value, so we
       can increase above that value with a negative scriptlevel change -->
  <m:mstyle scriptlevel="+5"><m:mstyle style="font-size:24px;"><m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle></m:mstyle></m:mstyle>
  <!-- An relative font-size value is applied to the unconstrained size -->
  <m:mstyle scriptlevel="+2"><m:mstyle style="font-size:200%;"><m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle></m:mstyle></m:mstyle>
  <!-- The unconstrained size does not cap the font size to below scriptminsize (so this is 18px) -->
  <m:mstyle scriptlevel="+2"><m:mstyle style="font-size:50%;"><m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle></m:mstyle></m:mstyle>
  <!-- The unconstrained size cap the font size otherwise (so this is 12px) -->
  <m:mstyle scriptlevel="+2"><m:mstyle style="font-size:50%;" scriptminsize="0"><m:mstyle scriptlevel="-1"><m:mi>Id</m:mi></m:mstyle></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>

</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>
<p><m:math>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:30px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:30px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:30px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:30px;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:small;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:medium;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:large;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-family:Verdana; font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-family:monospace; font-size:48px;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:48px; background:green;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px; background:green;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px; background:green;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px; background:green;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:48px; background:rgb(0,255,0);">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px; background:rgb(0,255,0);">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:48px; color:green;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px; color:green;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px; color:green;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px; color:green;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:48px;">Id</m:mi></m:mstyle>
</m:math></p>

<p><m:math>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:24px;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:0;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:0;">Id</m:mi></m:mstyle>
  <m:mstyle><m:mi style="font-size:0;">Id</m:mi></m:mstyle>
</m:math></p>

</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>
<!-- Test attribute parsing -->
<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <!-- MathML number attributes cannot start with '+' -->
  <m:mstyle scriptsizemultiplier="+1"><m:mstyle scriptlevel="+1"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle mathsize="30px"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle fontsize="30px"><m:mi>Id</m:mi></m:mstyle>
  <!-- mathsize takes priority over fontsize -->
  <m:mstyle mathsize="30px" fontsize="20px"><m:mi>Id</m:mi></m:mstyle>
  <!-- CSS takes priority over mathsize and fontsize -->
  <m:mstyle mathsize="24px" fontsize="20px" style="font-size:30px;"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle mathsize="small"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="normal"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="big"><m:mi>Id</m:mi></m:mstyle>
  <!-- check that fontsize doesn't accept those values -->
  <m:mstyle fontsize="small"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle fontsize="normal"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle fontsize="big"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle fontfamily="Verdana"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle fontfamily="Verdana" style="font-family:monospace;"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle mathbackground="green"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle background="green"><m:mi>Id</m:mi></m:mstyle>
  <!-- mathsize takes priority over fontsize -->
  <m:mstyle mathbackground="green" background="red"><m:mi>Id</m:mi></m:mstyle>
  <!-- CSS takes priority over mathsize and fontsize -->
  <m:mstyle mathbackground="red" background="yellow" style="background:green;"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle mathbackground="#0F0"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathbackground="#00FF00"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle mathcolor="green"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle color="green"><m:mi>Id</m:mi></m:mstyle>
  <!-- mathsize takes priority over fontsize -->
  <m:mstyle mathcolor="green" color="red"><m:mi>Id</m:mi></m:mstyle>
  <!-- CSS takes priority over mathsize and fontsize -->
  <m:mstyle mathcolor="red" color="yellow" style="color:green;"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <!-- test invalid values for MathML length attributes -->
  <m:mstyle mathsize="20 px"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="20PX"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize=".px"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="..px"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="+20px"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <!-- test valid values for MathML length attributes -->
  <m:mstyle mathsize=" 24px "><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="24.0px"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="24.px"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="0.5"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="50%"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize=".0px"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="-0px"><m:mi>Id</m:mi></m:mstyle>
  <m:mstyle mathsize="0"><m:mi>Id</m:mi></m:mstyle>
</m:mstyle></m:math></p>

</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<head>
<style>
.v { font: 48px "Verdana"; }
</style>
</head>
<body>
<p><span class="v">Hello</span></p>
<m:math><m:mstyle><m:mi style="font-size:24px; font-family:Verdana">Id</m:mi></m:mstyle></m:math> 
</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
<head>
<style>
/* test the situation where an nsStyleFont is cached in the rule tree but we have to blow it
   away because MathML is suddenly introduced */
.v { font: 48px "Verdana"; }
</style>
<script>
function addMathML() {
  function createMathMLElement(tag) {
    return document.createElementNS("http://www.w3.org/1998/Math/MathML", tag);
  }
  
  var body = document.getElementById("body");
  body.offsetTop;

  // if we don't blow away the rule tree correctly, then we will cache an nsStyleFont with
  // a scriptsizemultiplier of 0.71 (the default) and use it to style mstyle2, so the
  // scriptlevel change will not scale the text by 0.5
  var math = createMathMLElement("math");
  var mstyle = createMathMLElement("mstyle");
  mstyle.setAttribute("scriptsizemultiplier", "0.5");
  var mstyle2 = createMathMLElement("mstyle");
  mstyle2.setAttribute("class", "v");
  var mstyle3 = createMathMLElement("mstyle");
  mstyle3.setAttribute("scriptlevel", "+1");
  var mi = createMathMLElement("mi");
  mi.textContent = "Id";
  mstyle3.appendChild(mi);
  mstyle2.appendChild(mstyle3);
  mstyle.appendChild(mstyle2);
  math.appendChild(mstyle);
  body.appendChild(math);
  document.documentElement.className = '';
}
</script>
</head>
<body id="body" onload="addMathML()">
<p><span class="v">Hello</span></p>
</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>
<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle scriptlevel="+1"><m:mstyle style="font-family:serif;"><m:mi>Id</m:mi></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>
</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>
<p><m:math><m:mstyle scriptlevel="0" scriptsizemultiplier="0.5" scriptminsize="18px" style="font-size:48px;">
  <m:mstyle style="font-family:sans-serif;"><m:mstyle scriptlevel="+1"><m:mstyle style="font-family:serif;"><m:mi>Id</m:mi></m:mstyle></m:mstyle></m:mstyle>
</m:mstyle></m:math></p>
</body>
</html>
<bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content>
<a xmlns="http://www.w3.org/1999/xhtml" href="http://www.mozilla.org/" id="mlink">Foo<children xmlns="http://www.mozilla.org/xbl"/></a>
</content></binding></bindings>
<bindings xmlns="http://www.mozilla.org/xbl">
  <binding id="test">
    <content>
      <children includes="span"/>
      <html:div xmlns:html="http://www.w3.org/1999/xhtml" style="color: red">
        <children/>
      </html:div>
    </content>
  </binding>

</bindings>
<bindings xmlns="http://www.mozilla.org/xbl">
<binding id="a">
<implementation>
<constructor>
  this.style.position='fixed';
</constructor>
</implementation>
<content><children/></content>
</binding>
</bindings>
<?xml version="1.0"?>

<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml">

  <binding id="gridlike">
    <content>
      <xul:scrollbox allowevents="true" orient="vertical" anonid="main-box"
                     flex="1" style="overflow: auto;">
        <children includes="gridlikecols">
          <xul:gridlikecols>
            <xul:gridlikecol flex="1"/>
          </xul:gridlikecols>
        </children>
        <xul:gridlikerows>
          <children includes="gridlikehead"/>
          <xul:gridlikeboxbody xbl:inherits="rows,size,minheight">
            <children includes="gridlikeitem"/>
          </xul:gridlikeboxbody>
        </xul:gridlikerows>
      </xul:scrollbox>
    </content>
  </binding>

  <binding id="gridlikehead">
    <content>
      <xul:gridlikeheaditem>
        <children includes="gridlikeheader"/>
      </xul:gridlikeheaditem>
    </content>
  </binding>
</bindings>
<bindings xmlns="http://www.mozilla.org/xbl">
<binding id="a">
<content><children/></content>
</binding></bindings><html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body onload="document.cloneNode(true);">

<img src="tree.gif" />

</body>
</html><bindings xmlns="http://www.mozilla.org/xbl">
<binding id="randomxbl" inheritstyle="false">
<content><children><style xmlns="http://www.w3.org/1999/xhtml">*::before { content:"before text"; }\</style></children></content></binding></bindings><?xml version="1.0"?>
<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml">

  <binding id="prepend">
    <content>
      <span/>
      <children/>
    </content>
  </binding>

  <binding id="append">
    <content>
      <children/>
      <span/>
    </content>
  </binding>

  <binding id="prepend-with-comment-fix" extends="#prepend">
    <implementation>
      <constructor>
	var span = document.createComment("xbl generated comment to prevent bug #36");
	this.insertBefore(span, this.firstChild);
      </constructor>
    </implementation>
  </binding>
</bindings>
<bindings xmlns="http://www.mozilla.org/xbl">
<binding id="a">
<content><children/></content>
</binding></bindings><html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>

<!-- ... assuming that color inherits -->
<p>
  <span style="color: green"><m:math><m:mstyle><m:mi>X</m:mi></m:mstyle></m:math></span>
  <span style="color: green"><m:math><m:mstyle><m:mi>X</m:mi></m:mstyle></m:math></span>
  <span style="color: green"><m:math><m:mstyle><m:mi>X</m:mi></m:mstyle></m:math></span>
</p>

<!-- ... assuming that color inherits -->
<p>
  <span style="color: green"><m:math><m:mstyle><m:mi>X</m:mi></m:mstyle></m:math></span>
  <span style="color: green"><m:math><m:mstyle><m:mi>X</m:mi></m:mstyle></m:math></span>
  <span style="color: green"><m:math><m:mstyle><m:mi>X</m:mi></m:mstyle></m:math></span>
</p>

<!-- ... assuming that mathbackground works on m:mstyle -->
<p><m:math><m:mstyle mathbackground="lightgreen"><m:mi>Y</m:mi></m:mstyle></m:math></p>
<p><m:math><m:mstyle mathbackground="lightgreen"><m:mi>Y</m:mi></m:mstyle></m:math></p>

<!-- ... assuming that mathbackground works on m:mstyle -->
<p><m:math><m:mstyle mathbackground="lightgreen"><m:mfenced><m:mi>x</m:mi></m:mfenced></m:mstyle></m:math></p>
<p><m:math><m:mstyle mathbackground="lightgreen"><m:mfenced><m:mi>x</m:mi></m:mfenced></m:mstyle></m:math></p>

</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>

<!-- Test that CSS color works on m:math and m:mstyle -->
<p>
  <span><m:math style="color: green;"><m:mstyle><m:mi>X</m:mi></m:mstyle></m:math></span>
  <span><m:math><m:mstyle style="color: green;"><m:mi>X</m:mi></m:mstyle></m:math></span>
  <span><m:math><m:mstyle><m:mi style="color: green;">X</m:mi></m:mstyle></m:math></span>
</p>

<!-- Test that mathcolor works on m:mi, m:mstyle and m:math -->
<p>
  <span><m:math mathcolor="green"><m:mstyle><m:mi>X</m:mi></m:mstyle></m:math></span>
  <span><m:math><m:mstyle mathcolor="green"><m:mi>X</m:mi></m:mstyle></m:math></span>
  <span><m:math><m:mstyle><m:mi mathcolor="green">X</m:mi></m:mstyle></m:math></span>
</p>

<!-- Test that mathbackground and CSS background work on m:mi -->
<p><m:math><m:mi mathbackground="lightgreen">Y</m:mi></m:math></p>
<p><m:math><m:mi style="background: lightgreen">Y</m:mi></m:math></p>

<!-- Test that mathbackground and CSS background work on m:mfenced -->
<p><m:math><m:mfenced mathbackground="lightgreen"><m:mi>x</m:mi></m:mfenced></m:math></p>
<p><m:math><m:mfenced style="background: lightgreen;"><m:mi>x</m:mi></m:mfenced></m:math></p>

</body>
</html>
<html style="background: #88F; color: #88F;" xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>

</body>
</html>
<html style="background: #88F; color: #88F;" xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<body>

<!-- Test that text that should be invisible is invisible (assuming text is drawn at all) -->
<p>This should be invisible.</p>

<!-- Test that color inherits into MathML (assuming MathML text is drawn at all) -->
<p><m:math><m:mi>x</m:mi></m:math></p>

</body>
</html>
<bindings xmlns="http://www.mozilla.org/xbl" xmlns:xlink="http://www.w3.org/1999/xlink">
<binding id="c" inheritstyle="false">
<content><children/></content>
<implementation><constructor>
</constructor></implementation>
</binding></bindings><bindings xmlns="http://www.mozilla.org/xbl">
<binding id="a">
<implementation>
<destructor>
  window.frameElement.parentNode.removeChild(window.frameElement);
</destructor>
</implementation>
<content>
<children/>
</content>
</binding>
</bindings><bindings xmlns="http://www.mozilla.org/xbl">
<binding id="a">
<implementation>
<constructor>
  window.frameElement.parentNode.removeChild(window.frameElement);
</constructor>
</implementation>
<content><children/></content>
</binding>
</bindings><html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<body>
Kitty
</body>
</html> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<head>
<style>
.base { -moz-binding: url("395331-xbl.xml#base"); }
.inner { -moz-binding: url("395331-xbl.xml#inner"); }
</style>
<script>
function boom()
{
  var x = document.getElementById("x");
  x.removeChild(x.firstChild);
}
</script>
</head>
<body onload="boom();">
<xul:box class="base" id="x" style="height:2em;">Hello</xul:box>Kitty
</body>
</html> 
<?xml version="1.0"?>

<!DOCTYPE bindings>

<bindings id="testBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="base">
    <content>
      <xul:box flex="1">
        <xul:box class="inner" flex="1">
          <children/>
        </xul:box>
      </xul:box>
    </content>
  </binding>

  <binding id="inner">
    <content>
      <xul:box flex="1">
        <xul:box flex="1">
          <children/>
        </xul:box>
      </xul:box>
    </content>
  </binding>

</bindings>
<bindings xmlns="http://www.mozilla.org/xbl">

<binding id="a">
<implementation>
<constructor>
  this.style.position='fixed';
</constructor>
</implementation>
<content>
<children/>
</content>
</binding>

<binding id="b">
<content>
<children/>
</content>
</binding>

</bindings>
<?xml version="1.0" encoding="UTF-8"?>
<foo>
Lorem ip<!-- aaa -->sum dolorsitamet, consectetuer adipiscing elit. Nameusapien. Sed viverralacus. this_is_a_very_long_long_word_which_has_a_length_higher_than_the_max_column Donecquisipsum. Nunc cursus aliquet lectus. Nunc vitae eros.
</foo><?xml version="1.0" encoding="UTF-8"?>
<foo>
Lorem ip<!-- aaa -->sum dolorsitamet, consectetuer adipiscing elit. 
Nameusapien. Sed viverralacus. 
this_is_a_very_long_long_word_which_has_a_length_higher_than_the_max_column
 Donecquisipsum. Nunc cursus aliquet lectus. Nunc vitae eros.
</foo><?xml version="1.0" encoding="UTF-8"?>
<foo>
  Lorem ip<!-- aaa -->sum dolorsitamet, consectetuer adipiscing elit.
  Nameusapien. Sed viverralacus.
  this_is_a_very_long_long_word_which_has_a_length_higher_than_the_max_column
  Donecquisipsum. Nunc cursus aliquet lectus. Nunc vitae eros.
</foo><bindings xmlns="http://www.mozilla.org/xbl"><binding id="foo"><content><span xmlns="http://www.w3.org/1999/xhtml"><children xmlns="http://www.mozilla.org/xbl"/></span></content></binding></bindings><?xml version="1.0"?>
<svg xmlns:html="http://www.w3.org/1999/xhtml"
      xmlns="http://www.w3.org/2000/svg">
  <foreignObject transform="scale(2.5)" width="100%" height="100%">
    <html:p style="width:36px; height:24px; background:white;">
    </html:p>
    <html:p style="width:12px; height:12px; background:black;">
    </html:p>
  </foreignObject>
</svg>
<?xml version="1.0"?>
<svg xmlns:html="http://www.w3.org/1999/xhtml"
      xmlns="http://www.w3.org/2000/svg">
  <foreignObject transform="scale(2.5)" width="100%" height="100%">
    <html:p style="width:36px; height:24px; background-image: url(289480-ref.png);">
    </html:p>
    <!-- this one can be hard to see, but we should get a black rectangle with none of
         the yellow face blended in at the edges -->
    <html:p style="width:12px; height:12px; background-image: url(289480-ref.png); background-position:-120px -108px;">
    </html:p>
  </foreignObject>
</svg>
<?xml version="1.0"?>
<!--
  Intentionally testing XUL loaded through the XML content sink rather
  than the XUL content sink.
  -->
<!DOCTYPE window>
<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  <hbox>
    <label value="test" flex="3" />
    <label value="test2" />
    <label value="test3" flex="1" />
  </hbox>
</window>
<bindings xmlns="http://www.mozilla.org/xbl">
  <binding id="test">
    <content>
      <html:div xmlns:html="http://www.w3.org/1999/xhtml"
                style="color: red; -moz-binding: url(403962-1xbl.xml#test-base)">
        <children/>
      </html:div>
    </content>
  </binding>

  <binding id="test-base">
    <content>
      <html:div xmlns:html="http://www.w3.org/1999/xhtml" style="color: green">
        <children includes="span"/>
      </html:div>
      <html:div xmlns:html="http://www.w3.org/1999/xhtml" style="color: red">
        <children/>
      </html:div>

    </content>
  </binding>
</bindings>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<head>

<style type="text/css">
#q { width: 16px; height: 16px; }
#a, #b { counter-increment: chicken; }
</style>

<style id="s" type="text/css">
#a { content: 'x'; }
</style>

<script type="text/javascript">

function boom()
{
  remove(document.getElementById("s"));
  remove(document.getElementById("b"));
}

function remove(n)
{ 
  n.parentNode.removeChild(n);
}

</script>

</head>

<body onload="boom();">

<m:mrow id="a"/><m:mo id="q"><m:malignmark><m:msubsup/><m:munderover/><m:munder id="b"/></m:malignmark></m:mo>

</body>

</html>
<?xml version="1.0"?>
<!DOCTYPE html PUBLIC
  "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd"
[
  <!ENTITY mathml "http://www.w3.org/1998/Math/MathML">
]>
<math display="block" xmlns="&mathml;">
  <mi>f &#x0332;</mi>
  <mi>-</mi>
  <mo>+</mo>
  <mo> -</mo>
  <mo>&#x0332;</mo>
</math>
<svg xmlns="http://www.w3.org/2000/svg" 
     xmlns:xlink="http://www.w3.org/1999/xlink" 
     onload="document.getElementById('x').getBoundingClientRect();">

<rect id="x"/>

</svg>

<html xmlns="http://www.w3.org/1999/xhtml" style="direction: rtl;">
<body onload="document.getElementById('i').style.fontSize = '10em';">

<div style="-moz-column-width: 60px;"><div id="i" style="overflow: -moz-hidden-unscrollable; white-space: pre;">
 b</div></div>

</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
<div style="font-family: serif; font-size: 100px; padding-left:10px;">
  W<img style="width:0px; height:200px;" src="mozilla-banner.gif"/>
</div>
</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
<svg xmlns="http://www.w3.org/2000/svg" style="font-family: serif; font-size: 100px;" height="500" width="500">
  <text x="10" y="200">W</text>
</svg>
</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>

<math xmlns="http://www.w3.org/1998/Math/MathML">
  <ms fontsize="-2%"><mfrac><mi>x</mi><mi>y</mi></mfrac></ms>
</math>

</body>
</html>
<?xml version="1.0"?>
<svg xmlns:html="http://www.w3.org/1999/xhtml"
      xmlns="http://www.w3.org/2000/svg">
  <foreignObject transform="scale(2)" width="100%" height="100%">
    <!-- test the two-span case, subimage covers two tiles -->
    <html:div style="width:2px; height:64px; background:black;
                   margin-bottom:5px;">
    </html:div>
    <html:div style="width:64px; height:2px; background:black;
                   margin-bottom:5px;">
    </html:div>
    <!-- test the one-span case, subimage covers one tile at the end of the tile -->
    <html:div style="width:1px; height:64px; background:black;
                   margin-bottom:5px;">
    </html:div>
    <html:div style="width:64px; height:1px; background:black;
                   margin-bottom:5px;">
    </html:div>
    <!-- test the one-span case, subimage covers one tile at the start of the tile -->
    <html:div style="width:1px; height:64px; background:black;
                   margin-bottom:5px;">
    </html:div>
    <html:div style="width:64px; height:1px; background:black;
                   margin-bottom:5px;">
    </html:div>
  </foreignObject>
</svg>
<?xml version="1.0"?>
<svg xmlns:html="http://www.w3.org/1999/xhtml"
      xmlns="http://www.w3.org/2000/svg">
  <foreignObject transform="scale(2)" width="100%" height="100%">
    <!-- test the two-span case, subimage covers two tiles -->
    <html:div style="width:2px; height:64px; background-position:-31px 0;
                   background-image: url(square-left-right-32x32.png);
                   margin-bottom:5px;">
    </html:div>
    <html:div style="width:64px; height:2px; background-position:0 -31px;
                   background-image: url(square-top-bottom-32x32.png);
                   margin-bottom:5px;">
    </html:div>
    <!-- test the one-span case, subimage covers one tile at the end of the tile -->
    <html:div style="width:1px; height:64px; background-position:-31px 0;
                   background-image: url(square-left-right-32x32.png);
                   margin-bottom:5px;">
    </html:div>
    <html:div style="width:64px; height:1px; background-position:0 -31px;
                   background-image: url(square-top-bottom-32x32.png);
                   margin-bottom:5px;">
    </html:div>
    <!-- test the one-span case, subimage covers one tile at the start of the tile -->
    <html:div style="width:1px; height:64px; background-position:0 0;
                   background-image: url(square-left-right-32x32.png);
                   margin-bottom:5px;">
    </html:div>
    <html:div style="width:64px; height:1px; background-position:0 0;
                   background-image: url(square-top-bottom-32x32.png);
                   margin-bottom:5px;">
    </html:div>
  </foreignObject>
</svg>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/"
                       xmlns:moz="http://www.mozilla.org/2006/browser/search/">
  <ShortName>Bug 426329</ShortName>
  <Description>426329 Search</Description>
  <InputEncoding>utf-8</InputEncoding>
  <Image width="16" height="16">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAABGklEQVQoz2NgGB6AnZ1dUlJSXl4eSDIyMhLW4Ovr%2B%2Fr168uXL69Zs4YoG%2BLi4i5dusTExMTGxsbNzd3f37937976%2BnpmZmagbHR09J49e5YvX66kpATVEBYW9ubNm2nTphkbG7e2tp44cQLIuHfvXm5urpaWFlDKysqqu7v73LlzECMYIiIiHj58mJCQoKKicvXq1bS0NKBgW1vbjh074uPjgeqAXE1NzSdPnvDz84M0AEUvXLgAsW379u1z5swBen3jxo2zZ892cHB4%2BvQp0KlAfwI1cHJyghQFBwfv2rULokFXV%2FfixYu7d%2B8GGqGgoMDKyrpu3br9%2B%2FcDuXl5eVA%2FAEWBfoWHAdAYoNuAYQ0XAeoUERFhGDYAAPoUaT2dfWJuAAAAAElFTkSuQmCC</Image>
  <Url type="text/html" method="GET" template="http://mochi.test:8888/browser/browser/components/search/test/test.html">
    <Param name="test" value="{searchTerms}"/>
  </Url>
  <moz:SearchForm>http://mochi.test:8888/browser/browser/components/search/test/test.html</moz:SearchForm>
</OpenSearchDescription>
<bindings xmlns="http://www.mozilla.org/xbl">
<binding id="a">
<content>
<div xmlns="http://www.w3.org/1999/xhtml" style="-moz-binding: inherit;"/>
</content>
</binding>
</bindings>
<bindings xmlns="http://www.mozilla.org/xbl" xmlns:xlink="http://www.w3.org/1999/xlink">
<binding id="a">
<content><tbody xmlns="http://www.w3.org/1999/xhtml"><style>*::before { content:"b"; }</style></tbody></content>

</binding></bindings><xml xmlns:xlink="http://www.w3.org/1999/xlink">
<xml xlink:href="#"  xlink:actuate="onLoad" xlink:type="simple"/>
</xml>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML">
<head>
<style type="text/css">

[class~='t'] { display: table; }

</style>
</head>
<body>

<m:math><m:math class="t"/></m:math>

</body>
</html>
<bindings xmlns="http://www.mozilla.org/xbl">

<binding id="xbl">

<content>
<mrow xmlns="http://www.w3.org/1998/Math/MathML" id="f">
<box observes="f" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"/>
</mrow>
</content>

</binding>
</bindings><?xml version="1.0"?>
<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="outer">
    <content>
      <xul:inner>
	<xul:label value="Before"/>
        <children/>
        <xul:label value="After"/>
      </xul:inner>
    </content>
  </binding>

  <binding id="inner">
    <content>
      <children/>
    </content>
  </binding>

</bindings>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/"
                       xmlns:moz="http://www.mozilla.org/2006/browser/search/">
  <ShortName>483086a</ShortName>
  <Description>Bug 483086 Test 1</Description>
  <Image width="16" height="16">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAABGklEQVQoz2NgGB6AnZ1dUlJSXl4eSDIyMhLW4Ovr%2B%2Fr168uXL69Zs4YoG%2BLi4i5dusTExMTGxsbNzd3f37937976%2BnpmZmagbHR09J49e5YvX66kpATVEBYW9ubNm2nTphkbG7e2tp44cQLIuHfvXm5urpaWFlDKysqqu7v73LlzECMYIiIiHj58mJCQoKKicvXq1bS0NKBgW1vbjh074uPjgeqAXE1NzSdPnvDz84M0AEUvXLgAsW379u1z5swBen3jxo2zZ892cHB4%2BvQp0KlAfwI1cHJyghQFBwfv2rULokFXV%2FfixYu7d%2B8GGqGgoMDKyrpu3br9%2B%2FcDuXl5eVA%2FAEWBfoWHAdAYoNuAYQ0XAeoUERFhGDYAAPoUaT2dfWJuAAAAAElFTkSuQmCC</Image>
  <Url type="text/html" method="GET" template="http://mochi.test:8888/browser/browser/components/search/test/?search">
    <Param name="test" value="{searchTerms}"/>
  </Url>
  <moz:SearchForm>foo://example.com</moz:SearchForm>
</OpenSearchDescription>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/"
                       xmlns:moz="http://www.mozilla.org/2006/browser/search/">
  <ShortName>483086b</ShortName>
  <Description>Bug 483086 Test 2</Description>
  <Image width="16" height="16">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAABGklEQVQoz2NgGB6AnZ1dUlJSXl4eSDIyMhLW4Ovr%2B%2Fr168uXL69Zs4YoG%2BLi4i5dusTExMTGxsbNzd3f37937976%2BnpmZmagbHR09J49e5YvX66kpATVEBYW9ubNm2nTphkbG7e2tp44cQLIuHfvXm5urpaWFlDKysqqu7v73LlzECMYIiIiHj58mJCQoKKicvXq1bS0NKBgW1vbjh074uPjgeqAXE1NzSdPnvDz84M0AEUvXLgAsW379u1z5swBen3jxo2zZ892cHB4%2BvQp0KlAfwI1cHJyghQFBwfv2rULokFXV%2FfixYu7d%2B8GGqGgoMDKyrpu3br9%2B%2FcDuXl5eVA%2FAEWBfoWHAdAYoNuAYQ0XAeoUERFhGDYAAPoUaT2dfWJuAAAAAElFTkSuQmCC</Image>
  <Url type="text/html" method="GET" template="http://mochi.test:8888/browser/browser/components/search/test/?search">
    <Param name="test" value="{searchTerms}"/>
  </Url>
  <moz:SearchForm>http://example.com</moz:SearchForm>
</OpenSearchDescription>
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="#stylesheet"?>
<!DOCTYPE root [
  <!ATTLIST xsl:stylesheet id ID #IMPLIED>
]>
<root>
<xsl:stylesheet id="stylesheet" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:attribute-set name="a">
	<xsl:attribute name="b">c</xsl:attribute>
  </xsl:attribute-set>
  <xsl:template match="/">
    <b>Please output something!</b>
  </xsl:template>
  <xsl:attribute-set name="a">
	<xsl:attribute name="b">c</xsl:attribute>
  </xsl:attribute-set>
</xsl:stylesheet>
<doc id="foo">this</doc>
</root>
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="485217.xsl"?>


<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <item1 id="AAAAAAA" />
    <item2 id="AAAAAAAAA" label="AAAAAAAAAAAA"/>
</root>
<?xml-stylesheet type="application/xml" href="485286.xml"?>
<transform xmlns="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <variable name="v">
    <for-each select="/">
      <value-of select="count(1)"/>
    </for-each>
  </variable>
  <key name="k" match="/" use="$v"/>
  <template match="/">
    <value-of select="key('k', /..)"/>
  </template>
</transform>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE whatever PUBLIC "-//MOZ//WHATEVER//EN" "http://mozilla.org/ns/foo">
<foo xmlns="http://mozilla.org/ns" xmlns:falsexul="http://mozilla.org/ns3">
    <!-- document to test namespaces-->
    <baz /> 
    <bar> &lt;robots&gt; &amp; &lt;aliens&gt;
        <mozilla xmlns="http://mozilla.org/ns2"> a a a <moz>a a</moz> éèàùûî</mozilla>
        <firefox>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</firefox>
    </bar>
    
    <xul xmlns="http://mozilla.org/ns3" xmlns:other="http://mozilla.org/ns/other">
      <box>
        <other:what>lorem ipsum</other:what>
        <description other:yes="no">xul fake</description>
      </box>
    </xul>

    <falsexul:xul xmlns:other="http://mozilla.org/ns/other">
      <box>
        <other:what>lorem ipsum</other:what>
        <description>xul fake</description>
        <what xmlns="http://mozilla.org/ns/other">lorem ipsum <falsexul:label value="hello" /> the return</what>
      </box>
    </falsexul:xul>

    <ho:xul xmlns="http://mozilla.org/ns4" xmlns:ho="http://mozilla.org/ns4" xmlns:other="http://mozilla.org/ns/other">
      <box>
        <other:what>lorem ipsum</other:what>
        <description ho:foo="bar" bla="hello" other:yes="no" ho:foo2="bar2">xul fake</description>
      </box>
    </ho:xul>
</foo><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE whatever PUBLIC "-//MOZ//WHATEVER//EN" "http://mozilla.org/ns/foo">
<foo xmlns="http://mozilla.org/ns" xmlns:falsexul="http://mozilla.org/ns3">
    <!-- document to test namespaces-->
    <baz/> 
    <bar> &lt;robots&gt; &amp; &lt;aliens&gt;
        <mozilla xmlns="http://mozilla.org/ns2"> a a a <moz>a a</moz> éèàùûî</mozilla>
        <firefox>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</firefox>
    </bar>
    
    <xul xmlns="http://mozilla.org/ns3" xmlns:other="http://mozilla.org/ns/other">
      <box>
        <other:what>lorem ipsum</other:what>
        <description other:yes="no">xul fake</description>
      </box>
    </xul>

    <falsexul:xul xmlns:other="http://mozilla.org/ns/other">
      <box>
        <other:what>lorem ipsum</other:what>
        <description>xul fake</description>
        <what xmlns="http://mozilla.org/ns/other">lorem ipsum <falsexul:label value="hello"/> the return</what>
      </box>
    </falsexul:xul>

    <ho:xul xmlns="http://mozilla.org/ns4" xmlns:ho="http://mozilla.org/ns4" xmlns:other="http://mozilla.org/ns/other">
      <box>
        <other:what>lorem ipsum</other:what>
        <description ho:foo="bar" bla="hello" other:yes="no" ho:foo2="bar2">xul fake</description>
      </box>
    </ho:xul>
</foo><falsexul:xul xmlns:falsexul="http://mozilla.org/ns3" xmlns:other="http://mozilla.org/ns/other">
      <box xmlns="http://mozilla.org/ns">
        <other:what>lorem ipsum</other:what>
        <description>xul fake</description>
        <what xmlns="http://mozilla.org/ns/other">lorem ipsum <falsexul:label value="hello"/> the return</what>
      </box>
    </falsexul:xul><box xmlns="http://mozilla.org/ns3">
        <other:what xmlns:other="http://mozilla.org/ns/other">lorem ipsum</other:what>
        <description other:yes="no" xmlns:other="http://mozilla.org/ns/other">xul fake</description>
      </box><box xmlns="http://mozilla.org/ns4">
        <other:what xmlns:other="http://mozilla.org/ns/other">lorem ipsum</other:what>
        <description ho:foo="bar" xmlns:ho="http://mozilla.org/ns4" bla="hello" other:yes="no" xmlns:other="http://mozilla.org/ns/other" ho:foo2="bar2">xul fake</description>
      </box><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE whatever PUBLIC "-//MOZ//WHATEVER//EN" "http://mozilla.org/ns/foo">
<foo xmlns="http://mozilla.org/ns"
  xmlns:falsexul="http://mozilla.org/ns3">
  <!-- document to test namespaces-->
  <baz/>
  <bar> &lt;robots&gt; &amp;
    &lt;aliens&gt;
    <mozilla
      xmlns="http://mozilla.org/ns2"> a
      a a
      <moz>a a</moz> éèàùûî</mozilla>
    <firefox>Lorem ipsum dolor sit amet,
      consectetuer adipiscing elit.</firefox>
  </bar>
  <xul xmlns="http://mozilla.org/ns3"
xmlns:other="http://mozilla.org/ns/other">
    <box>
      <other:what>lorem ipsum</other:what>
      <description other:yes="no">xul
        fake</description>
    </box>
  </xul>
  <falsexul:xul
xmlns:other="http://mozilla.org/ns/other">
    <box>
      <other:what>lorem ipsum</other:what>
      <description>xul fake</description>
      <what
        xmlns="http://mozilla.org/ns/other">lorem
        ipsum
        <falsexul:label value="hello"/>
        the return</what>
    </box>
  </falsexul:xul>
  <ho:xul xmlns="http://mozilla.org/ns4"
    xmlns:ho="http://mozilla.org/ns4"
xmlns:other="http://mozilla.org/ns/other">
    <box>
      <other:what>lorem ipsum</other:what>
      <description ho:foo="bar"
        bla="hello" other:yes="no"
        ho:foo2="bar2">xul fake</description>
    </box>
  </ho:xul>
</foo><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE whatever PUBLIC "-//MOZ//WHATEVER//EN" "http://mozilla.org/ns/foo">
<foo xmlns="http://mozilla.org/ns" 
xmlns:falsexul="http://mozilla.org/ns3">
    <!-- document to test namespaces-->
    <baz/> 
    <bar> &lt;robots&gt; &amp; 
&lt;aliens&gt;
        <mozilla 
xmlns="http://mozilla.org/ns2"> a a a <moz>a
 a</moz> éèàùûî</mozilla>
        <firefox>Lorem ipsum dolor sit 
amet, consectetuer adipiscing elit.</firefox>
    </bar>
    
    <xul xmlns="http://mozilla.org/ns3" 
xmlns:other="http://mozilla.org/ns/other">
      <box>
        <other:what>lorem ipsum</other:what>
        <description other:yes="no">xul 
fake</description>
      </box>
    </xul>

    <falsexul:xul 
xmlns:other="http://mozilla.org/ns/other">
      <box>
        <other:what>lorem ipsum</other:what>
        <description>xul fake</description>
        <what 
xmlns="http://mozilla.org/ns/other">lorem
 ipsum <falsexul:label value="hello"/> 
the return</what>
      </box>
    </falsexul:xul>

    <ho:xul 
xmlns="http://mozilla.org/ns4" 
xmlns:ho="http://mozilla.org/ns4" 
xmlns:other="http://mozilla.org/ns/other">
      <box>
        <other:what>lorem ipsum</other:what>
        <description ho:foo="bar" 
bla="hello" other:yes="no" 
ho:foo2="bar2">xul fake</description>
      </box>
    </ho:xul>
</foo><?xml version="1.0"?>
<?xml-stylesheet type="text/xml" href="#bug"?>
<!DOCTYPE doc [
<!ATTLIST xsl:transform
  id	ID	#REQUIRED>
]>
<doc>
<xsl:transform
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0"
  id="bug">
  <xsl:variable name="v0">
    <xsl:for-each select="$v0" />
  </xsl:variable>
  <xsl:template name="t2" match="/">
    <xsl:copy-of select="number($v0)" />
  </xsl:template>
</xsl:transform>

<e1 />

</doc>
<?xml version="1.0"?>
<?xml-stylesheet type="text/xml" href="#bug"?>
<!DOCTYPE doc [
<!ATTLIST xsl:transform
  id	ID	#REQUIRED>
]>
<doc>
  <xsl:transform 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:exslstrings="http://exslt.org/strings"
    version="2.0"
    id="bug">
    <xsl:variable name="v0" select="$v0" /> 
    <xsl:template name="t2" match="/">
      <xsl:param name="p0" select="exslstrings:tokenize('1234','foobar')" />
      <xsl:copy-of select="round($v0)" /> 
    </xsl:template>
  </xsl:transform>
</doc>
<?xml version="1.0"?>
<?xml-stylesheet type="text/xml" href="#bug"?>
<!DOCTYPE doc [
<!ATTLIST xsl:transform
  id	ID	#REQUIRED>
]>
<doc>
  <xsl:transform 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="2.0"
    id="bug">
    <xsl:key name="k0" match="e2" use="name('foo')" /> 

    <xsl:template name="t1" match="/">
      <xsl:element name="e2" namespace="{//doc}" />
    </xsl:template>
    <xsl:template name="t2" match="key('k0', 'bar')" />
  </xsl:transform>
  
  <e2/>
  
</doc>
<!-- This has to be a separate file to trigger the bug -->
<bindings xmlns="http://www.mozilla.org/xbl"><binding id="mo"><content><mrow xmlns="http://www.w3.org/1998/Math/MathML"><children xmlns="http://www.mozilla.org/xbl"/></mrow></content></binding></bindings>
<foo>test</foo>

<ther:window xmlns:ther="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" a="" e=""><HTML><ther:statusbar l="" c=""><ther:menulist d=""><ther:menu t="" i="" l=""><mat:h xmlns:mat="http://www.w3.org/1998/Math/MathML" w=""/></ther:menu><ther:menupopup p=""/><ther:menu a="" t="" l=""><ther:menuseparator u="" x=""><xht:html xmlns:xht="http://www.w3.org/1999/xhtml" x=""><xht:body d=""><xht:abbr d=""><xht:abbr p=""><xht:small s=""><xht:a s=""><xht:var e=""><xht:samp e=""><xht:code p=""><xht:b e=""><xht:b d=""><xht:del t=""><xht:h4 r=""><xht:var l=""><xht:i r=""><xht:em r=""><xht:em n=""><xht:map g=""><xht:isindex d=""/></xht:map></xht:em></xht:em></xht:i></xht:var></xht:h4></xht:del></xht:b></xht:b></xht:code></xht:samp></xht:var></xht:a></xht:small></xht:abbr></xht:abbr></xht:body></xht:html></ther:menuseparator></ther:menu></ther:menulist></ther:statusbar></HTML></ther:window><?xml-stylesheet type="text/xsl" href="582176_xslt.xsl"?>
<out/>
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="#stylesheet"?>
<!DOCTYPE root [
  <!ATTLIST xsl:stylesheet id ID #IMPLIED>
]>
<root>
<xsl:stylesheet id="stylesheet" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:variable name="var"><p>a</p></xsl:variable>
  <xsl:template match="/"><xsl:copy-of select="$var" /></xsl:template>
</xsl:stylesheet>
</root>
<html xmlns="http://www.w3.org/1999/xhtml">
<body bgcolor="#FFFFFF">

<table border="1" bgcolor="green">
<tbody>
<tr>
<td>Some text</td>
<td>Some text</td>
<td>Some text</td>
</tr>
</tbody>
</table>

</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
<body bgcolor="#FFFFFF">

<table border="1" bgcolor="green">
<tr>
<td>Some text</td>
<td>Some text</td>
<td>Some text</td>
</tr>
</table>

</body>
</html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <body>
    <table border="1">
      <tbody>
        <tr>
          <th>Division</th><th>Revenue</th><th>Growth</th><th>Bonus</th>
        </tr>
        <tr>
          <td><em>North</em></td><td>10</td><td>9</td><td>7</td>
        </tr>
        <tr>
          <td><em>West</em></td><td>6</td><td>-1.5</td><td>2</td>
        </tr>
        <tr>
          <td><em>South</em></td><td>4</td><td>3</td><td>4</td>
        </tr>
      </tbody>
    </table>
  </body>
</html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <body>
    <table border="1">
      <tr>
        <th>Division</th><th>Revenue</th><th>Growth</th><th>Bonus</th>
      </tr>
      <tr>
        <td><em>North</em></td><td>10</td><td>9</td><td>7</td>
      </tr>
      <tr>
        <td><em>West</em></td><td>6</td><td>-1.5</td><td>2</td>
      </tr>
      <tr>
        <td><em>South</em></td><td>4</td><td>3</td><td>4</td>
      </tr>
    </table>
  </body>
</html>

<bindings xmlns="http://www.mozilla.org/xbl" xmlns:html="http://www.w3.org/1999/xhtml">
<binding id="xbl" inheritstyle="false">
<content>
<html:form id="g" observes="b"/>
</content>
</binding>
</bindings>
<html xmlns="http://www.w3.org/1999/xhtml">
<style>html::before { content:"b"; }</style>
<input contenteditable="true" spellcheck="true"/>
</html><?xml version="1.0"?><root/>
<?xml-stylesheet href="data:text/css,div {}"?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <script>
    document.styleSheets[0].cssRules[0].style.foo = document;
  </script>
</html>
<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet type="text/xsl" href="91332.xsl" ?>
<root>
  <category name="Rectangles">
    <list item="square" />
  </category>
  <quad id="square">
    <desc>A square is ...</desc>
  </quad>
</root>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.15 $"/>
		<generation date="$Date: 2008/05/25 01:05:49 $"/>
		<language type="aa"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings>
<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">
  <binding id="site" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <content>
      <xul:hbox class="site-container" align="center" flex="1">
        <xul:image xbl:inherits="src=favicon" class="site-favicon"/>
        <xul:label xbl:inherits="value,selected" class="site-domain" crop="end" flex="1"/>
      </xul:hbox>
    </content>
  </binding>
</bindings>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="tabBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="tab-listing" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="start">
          <xul:image class="tabIcon"
                     xbl:inherits="src=icon"/>
        </xul:vbox>
        <xul:vbox pack="start" flex="1">
            <xul:label xbl:inherits="value=title,selected"
                       crop="end" flex="1" class="title"/>
            <xul:label xbl:inherits="value=url,selected"
                       crop="end" flex="1" class="url"/>
        </xul:vbox>
      </xul:hbox>
    </content>
    <handlers>
      <handler event="dblclick" button="0">
        <![CDATA[
          RemoteTabViewer.openSelected();
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="client-listing" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <content>
      <xul:hbox pack="start" align="center" onfocus="event.target.blur()" onselect="return false;">
        <xul:image/>
        <xul:label xbl:inherits="value=clientName"
                   class="clientName"
                   crop="center" flex="1"/>
      </xul:hbox>
    </content>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true">
        <shape>
            <solid android:color="@color/highlight_dark" />
        </shape>
    </item>

    <item android:state_focused="true"
          android:state_pressed="false">
        <shape>
            <solid android:color="@color/highlight_dark_focused" />
        </shape>
    </item>

    <item android:drawable="@android:color/transparent"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"
          android:state_enabled="true">
        <shape>
            <solid android:color="@color/highlight" />
        </shape>
    </item>

    <item android:state_focused="true"
          android:state_pressed="false">
        <shape>
            <solid android:color="@color/highlight_focused" />
        </shape>
    </item>

    <item android:drawable="@android:color/transparent"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <Button android:id="@+id/actionmode_title"
            android:layout_height="match_parent"
            android:layout_width="wrap_content"
            style="@style/GeckoActionBar.Title"/>

    <!-- Draw a separator to the left of the title -->
    <View android:layout_height="match_parent"
          android:layout_width="1dp"
          android:layout_marginTop="10dp"
          android:layout_marginBottom="10dp"
          android:background="@color/text_color_secondary_inverse"/>

    <LinearLayout android:id="@+id/actionbar_buttons"
                  android:layout_height="match_parent"
                  android:layout_width="0dip"
                  android:layout_weight="1"
                  style="@style/GeckoActionBar.Buttons"/>

    <ImageButton android:id="@+id/actionbar_menu"
                 android:layout_height="match_parent"
                 android:layout_width="@dimen/browser_toolbar_icon_width"
                 style="@style/GeckoActionBar.Button.MenuButton"/>

</merge>
<?xml version="1.0" encoding="UTF-8"?>
<searchresults total_results="1">
  <addon id="5617">
  <name>Non-Restartless Test Extension</name>
  <type id="1">Extension</type>
  <guid>addon1@tests.mozilla.org</guid>
  <slug>addon11</slug>
  <version>1.0</version>

  <compatible_applications><application>
      <name>Firefox</name>
      <application_id>1</application_id>
      <min_version>3.6</min_version>
      <max_version>*</max_version>
      <appID>xpcshell@tests.mozilla.org</appID>
    </application></compatible_applications>
  <all_compatible_os><os>ALL</os></all_compatible_os>

  <install os="ALL" size="485">http://127.0.0.1:8888/addon1.xpi</install>
    <created epoch="1252903662">
      2009-09-14T04:47:42Z
    </created>
    <last_updated epoch="1315255329">
      2011-09-05T20:42:09Z
    </last_updated>
    </addon>
</searchresults>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="softblock1@tests.mozilla.org">
      <versionRange severity="1" minVersion="2" maxVersion="3"/>
    </emItem>
    <emItem id="softblock2@tests.mozilla.org">
      <versionRange severity="1" minVersion="2" maxVersion="3"/>
    </emItem>
    <emItem id="softblock3@tests.mozilla.org">
      <versionRange severity="1" minVersion="2" maxVersion="3"/>
    </emItem>
    <emItem id="softblock4@tests.mozilla.org">
      <versionRange severity="1" minVersion="2" maxVersion="3"/>
    </emItem>
    <emItem id="softblock5@tests.mozilla.org">
      <versionRange severity="1" minVersion="2" maxVersion="3"/>
    </emItem>
    <emItem id="hardblock@tests.mozilla.org">
      <versionRange minVersion="2" maxVersion="3"/>
    </emItem>
    <!-- Two RegExp matches, so test flags work - first shouldn't match. -->
    <emItem id="/^RegExp/">
      <versionRange severity="1" minVersion="2" maxVersion="3"/>
    </emItem>
    <emItem id="/^RegExp/i">
      <versionRange severity="2" minVersion="2" maxVersion="3"/>
    </emItem>
  </emItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:13 $"/>
        <language type="af"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="agq"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="ak"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
                android:oneshot="false">

    <item android:drawable="@drawable/alert_app_animation_1" android:duration="150" />
    <item android:drawable="@drawable/alert_app_animation_2" android:duration="150" />
    <item android:drawable="@drawable/alert_app_animation_3" android:duration="150" />
    <item android:drawable="@drawable/alert_app_animation_4" android:duration="150" />
    <item android:drawable="@drawable/alert_app_animation_5" android:duration="150" />
    <item android:drawable="@drawable/alert_app_animation_6" android:duration="150" />
    <item android:drawable="@drawable/alert_app_animation_7" android:duration="150" />

</animation-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
                android:oneshot="false">

    <item android:drawable="@drawable/alert_download_animation_1" android:duration="150" />
    <item android:drawable="@drawable/alert_download_animation_2" android:duration="150" />
    <item android:drawable="@drawable/alert_download_animation_3" android:duration="150" />
    <item android:drawable="@drawable/alert_download_animation_4" android:duration="150" />
    <item android:drawable="@drawable/alert_download_animation_5" android:duration="150" />
    <item android:drawable="@drawable/alert_download_animation_6" android:duration="150" />

</animation-list>
<myRes xmlns:its="http://www.w3.org/2005/11/its">
  <head>
    <its:rules version="2.0">
      <its:allowedCharactersRule allowedCharacters="[^*+]" selector="//content"/>
    </its:rules>
  </head>
  <body>
    <content>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
      nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed
      diam voluptua.</content>
  </body>
</myRes>
  <its:rules  xmlns:its="http://www.w3.org/2005/11/its"  xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
      <its:allowedCharactersRule allowedCharacters="[a-zA-Z_\-]" selector="//h:p/h:code"/>
    </its:rules>
<res xmlns:its="http://www.w3.org/2005/11/its">
  <head>
    <its:rules version="2.0">
      <its:allowedCharactersRule selector="//record" allowedCharactersPointer="@set"/>
    </its:rules>
  </head>
  <record id="a1" set="[ &#xFF01;–&#xFF5E;]">ＦＵＬＬ ＷＩＤＴＨ ＯＮＬＹ</record>
</res>

  <its:rules  xmlns:its="http://www.w3.org/2005/11/its"  xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
      <its:param name="allowedcharsParam">name</its:param>
      <its:allowedCharactersRule allowedCharacters="[a-zA-Z_\-]" selector="//h:p/h:code[@id=$allowedcharsParam]"/>
    </its:rules>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
	<its:allowedCharactersRule allowedCharacters="[^*+]" selector="//content"/>
</its:rules>
<myRes xmlns:its="http://www.w3.org/2005/11/its">
  <head>
      <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="allowedcharacters3xmlrules.xml"/>
  </head>
  <body>
    <content>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
      nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed
      diam voluptua.</content>
  </body>
</myRes>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
      <its:allowedCharactersRule selector="//record" allowedCharactersPointer="@set"/>
</its:rules>
<res xmlns:its="http://www.w3.org/2005/11/its">
  <head>
    <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="allowedcharacters4xmlrules.xml"/>
  </head>
  <record id="a1" set="[ &#xFF01;–&#xFF5E;]">ＦＵＬＬ ＷＩＤＴＨ ＯＮＬＹ</record>
</res>

<messages xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <msg num="123">Click the <panelmsg its:allowedCharacters="[&#x0020;-&#x00FE;]"
      >CONTINUE</panelmsg> Button on the printer panel</msg>
</messages>
<messages xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <msg num="123">Click the <its:span allowedCharacters="[&#x0020;-&#x00FE;]">CONTINUE</its:span> Button on the printer panel</msg>
</messages>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
        <its:param name="allowedcharParam">allowedchar</its:param>
	<its:allowedCharactersRule allowedCharacters="[^*+]" selector="//content[@id=$allowedcharParam]"/>
</its:rules>
<myRes xmlns:its="http://www.w3.org/2005/11/its">
  <head>
      <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="allowedcharacters7xmlrules.xml"/>
  </head>
  <body>
    <content id="allowedchar">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
      nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed
      diam voluptua.</content>
  </body>
</myRes>
<myRes xmlns:its="http://www.w3.org/2005/11/its">
  <head>
      <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
        <its:param name="allowedcharParam">allowedchar</its:param>
	<its:allowedCharactersRule allowedCharacters="[^*+]" selector="//content[@id=$allowedcharParam]"/>
</its:rules>
  </head>
  <body>
    <content id="allowedchar">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
      nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed
      diam voluptua.</content>
  </body>
</myRes>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Amazon.com</ShortName>
<Description>Amazon.com Search</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAAAAAC0AQAAJgAAACAgAAAAAAAA6QIAANoBAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIBgAAAB/z/2EAAAF7SURBVDjLlZPLasJAFIaFRF+iVV+h6hO0GF+gVB9AaHwDt64qCG03tQgtdCFIuyhUelmGli66MXThSt24kNiFBUlAYi6ezjnNxSuawB/ITP7v/HNmJgQAEaZzpgHs/gwcTyTEXuXl2U6nA8ViEbK5HKler28CVRAwnB9ptVrAh8MrQuCaZ4iA8fzIqSgCxwzpTIaSuN/RWGwdYLwCUBQFZFkGSZLgqdmEE7YEN8VOAKyaSKUW4nNBAFmnYiKZpDRX1WqwBBzP089n5f/NEQsFL4WqqtsBWJlzDAJr5PwSMM1awEzzdxIbGI3Hvc6jCZeVFgRQRwpY7Qcw3ktgfpR8wLRxCPaot/X4GS95MppfF6DX9n2A3f+kAZycaT8bAZjU6r6B/duD6d3BYg9wQq/tkYzHY1blEiz5lmQyGc95mrO6r2CxgpjCBXgNsJVviolpXJiraeOIjJRE10juUa4sR8V+mO17VvmGqtuOcdNlwut8zTQJcJ0njifyB2bgTdKh6w4BAAAAAElFTkSuQmCCiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACsElEQVRYw71XQWsTURBe2LQgeNKLB+tVemt6txcteNSD/QGC6VEIGDx5s+eKPQqFgJhLNdFLBWMP7cU0oSAWjB70koC9WHbVQ5SO8+XtS14mr7svyaYDH9m87Jv55puZt1nPi4yIzjMeMj7T9OwjI88455nGC1cZX+nsDESumJmPFDwIAqrX6z00Gg1qt9vjkJgFgUeuO16Vy3RjeZkyMzM9+MY1fsM9I9h9zyV7ZAznZrA4FAoFVwJ1z+WuOysrg1lnMolkHJX4k0igzI5sARYWF7vEZEk0rvO6iyUSuJfLJUqM7zYSqRDIra4OOUZPmNZsNrsl8UVTpkJAjh1GzmaSpJ8mAWmYeZB5urHRhW5SNOfUCCDo47W1bvPZsp2qAhipy3Nz1kaLG8dUCEBqM5AvpgElqFar01NgIZsdco7Zb7VasU2YigIYL5tjqCL7Q5YkFQXKlcqQ7DbHthIALk/IWAKor82xPIhshxWABCYioDMz51sexcVi0XoG4DPLIyvJjkTArK3scDQnRvO0MdTrUHGiKZCP4tNgO6BAEI08EQH9Z2Qow0hyPypJGIa9p6JWKCn4SA8jSKmJIDgyRvPJkcRxjfUwNGr/i8+Mo32iHzWiThBD4NM60bet9P77/ubA728RlTjMiwiH6zEEfvIrwdZFtQmMJ7W/ofIDBZD5m3mVZGwJcOP2kmILIlCkE45HoPWurwCSg0+UQRD4ZyXxId+T7gQb9+4q9sioY5ltrOG3L5vqXiiJffDx/aUi83ZJ7jr2ohcEu8Hh6/m+I7OWGiVxbWKHsz+O3vSOakqFQdsFgQeJUiKD7Wv9YKXBgCeSUC3v2kM5EJhlHDh3NcgcPlG1BXZu98sDmTuBa4fsMnz9fniJUaGzs+eMC540XuR0aDO2L8Y3qPyMcdOM+R/8XcqRA3qp9gAAAABJRU5ErkJggg==</Image>
<Image width="65" height="26">data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAYAAADovjFxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk1RjU4MDYwQkU0RDExRTNBNkI0RTM0MDNENDQ0Q0QxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk1RjU4MDYxQkU0RDExRTNBNkI0RTM0MDNENDQ0Q0QxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTVGNTgwNUVCRTREMTFFM0E2QjRFMzQwM0Q0NDRDRDEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTVGNTgwNUZCRTREMTFFM0E2QjRFMzQwM0Q0NDRDRDEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4FxGXPAAAGU0lEQVR42uyYe2xURRSHZ+7dF7tCW6q8WhTCM1TkIUgsBUFErUZ5qFExGkKiwahEwSBEA4oviAkCEg1GMQoVUFFACa9gJEil8tSyFYqIlFrElkcjULa7946/2Z67Hi53UUvgHzvJtzP33DMzZ86cedyVSinxf0+GaEpNTmhyAiVfwOdzytPBg6AzqAe7wTtgEdN/A/QGi8EKyvuDKBhGOq+Ah0EdeBMscPV5B3gW5NMkHAKrwdNM50bwHLAB37S0safB46CWZIPBZGqvGiwDL1JdnTLIhkwwA1jgXZJvAM8Iv2n6wHqg0lAIBBEnWSWocOktBjM96o9m9cddoJ+lTG/GBfQ0uaT3WJr3P4BWpNORyXd46K7WSh8wwULQy2VEKTPuJ1cDGz0aLQFV7HkL1e3GZDUgHxSAo0zel3TzwGwwB0wAu1zta51sJisHg8EkJvuI9HJAgsn1GNay55igTjawSg5OxYNpnJBPss+Y7HOS9WayzSTrClaBL0EH1uY8pjvKZYPDAabTmWTjmewRpltLsmP0HGZjOcb0ikl2Wq+xeYRen2PAINAPmLSmYh57SQ0opvIWcA+VF1N+gNaeyeqXg7uprPt4lPaT611rnicJjoEsep4CfqbyMKZXzco/ggLQEnQiW5y0k5X30N5jOZ3qjWQSuIKeFRuE123qDCu3YOXmrtydbgOvgb5MVs/Klkt/LXPASjCLvWvNytzGU6x8tcsJNiuH+RE5h04G7YBVIAeEmEGWx2BMFinSJXfLnHI3GpR2wElQSO/mpzFyJLiVRdtIlw3xNEe9SqPD7TvHRl15PAv7EaAK+AnB8sYmx4lPMtkUcogzW076k/Ku4EMmPwxGg5uZLJpmGV3j0pH/5rIUZOVsKr/OKut1dd1FOMGZmRwma88Gey+Tj6J+Z7uW2QNgOdgItpHNPIJGUN4K9KDyfnCC9oZ/dMJuNuO7wHrwVCp+DMOMW2pywrJ12Qm7AGvD71E2WOiFKP+U6T0P1oB9LnueABFDykzdH/oVCUucilsSiOQz3vWjDa2c2T6O7C5mbU2lPMJsCXhEj9+gmTjMZmg4mKs700fJ2bgqw9RMRPco25lWgzMybFsbaAsppeGxpvk+EqF8iev2eTs4TifEkoDP1O2NxoBPxxKyEv0tCAf9mdd2at18UK/c5q1bRiTsGBJLiBLoRWwr2dVA8DW1N5yi9izdKJd77DMhD7tCUg+UXupGmoEjYDMGqgfdvaBn+0PTR4brvtsvxfSlZXkwrg0mGmtXfS8R6Yj1Nn5D5WmnSEPuhG0IQWUE/b6Blm1rz/8Ox0X1mvCZhmN4Lp0wX2FAyu8zM+oTSk/AnoeGdhaRkCn65hhiSJfYnR2y6gZIU9g1pwL791UHi6atrBPfllb60HdCjw/9CPQzjPYC3eYmGgOf8QKKBi0vI3l3WqL1jhPOSzr8wkGfOP7WVcIIqfdUXJ45WhuYsG5vWBQftESHbAODkuKFoigcYbqCQdKKUKltQaZ+vbaMBv2X7u8ipt51QihLjheWnIWmWqjk1wPeS9T2YxCWaLdsd6aogqunFJUJPRHk3EanCzqhT5e2Yis+TZQSNwlbvi1NlQm/LoRBL6Pvem17tCIiSiqC4mRdMipEfkdL7Dliiu2HEmLvkToRwoob0TsiItjKNpXHxcHqs0JHcouwT+S1C4o+uYY4UKNwg8NX0C21cID2o9RLpJI+ktrSRhhNzqSh2smAjjp8Oc0yxdZoFfqQOhoujRN6dGwldk6l93ZyFj8B95HKXPC+9KlSz0DAzGE2/w4K/j41+So1y1qgYudEylCwFCykTU7RsTk2aXjIFsu3Z4kx8/cJn0zAKcZlc4JOPUER5TpVgB16fdPxFU1tRtLj+iI9rzXZtOMPoQ0zj+SL6DNZO+RjWvcVDedPQ+V+MxF5v/yRjKRG/5/QiDqldG/QN7iZdBO8ms54QWFcmjz+VPLi9Rtdgs7QwPX5fyVoQ/cEzQ2uPvTmNRGsY/9RrEk5gCZFNrNFYa8sOKHGdQhceic4aQXRny4rY2m3zSUK/2N7eynCvnDdBnNoSbx6Xg27IWK9P28ujxOctI2YRtdafVwNoNnOoA8gH1sIMbrJ6e+HX8FW8A0oSdN+lacDKCXsix+AbPrLvemP1iYnOOkvAQYAhXFLHTlsPyYAAAAASUVORK5CYII=</Image>
<Image width="130" height="52">data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAYAAABGkOCVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk1RjU4MDVDQkU0RDExRTNBNkI0RTM0MDNENDQ0Q0QxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk1RjU4MDVEQkU0RDExRTNBNkI0RTM0MDNENDQ0Q0QxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTVGNTgwNUFCRTREMTFFM0E2QjRFMzQwM0Q0NDRDRDEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTVGNTgwNUJCRTREMTFFM0E2QjRFMzQwM0Q0NDRDRDEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5AOR4OAAAOI0lEQVR42uxcC3BU1Rn+7+4mJCSECEgAEwKI8kgNikqtGtCOgkVtRSogamGUSrVoUUF0bKso1qlF6vtRmdGiUlSoQpX6qgqodBwURd4BiYTXggjkAUk2u7f/v/tdvLk55+7dZE1i3X/mm7Dnnvs65/uf51wM0zQpJSkxUkRISYoIKUkRISUpIqQkRYSUpIiQEncipPn9zraujF8yzmecxDjWduwA43PGW4z5+K2TkYyBjHqGD39fYZQzOjAm4R59GIcZXzCeY7zjuM4JjKsZpzN6MvYwPmXMw18vIs9xKeMcxgBGtu3YbsbHjCWMxYyQy3V+zjgR7+JVAoxtjEUuffIZYxhnM3ox2jOCjM2MpYzX4jxXf4y3Ccg9VzI+xPGfMcYyfoSx38r4gDGXsTfaQ4hgwxTGLobpAWWMMY7zLbRjbFScM5VRwFijuWaEcavtOpMY32j6HmFM09zfQjbjYUaNx3daySjSXKsjY4fH6zixj5GjuKaPcTtjb5zzVzFKXN7zfsU5r+PYLJfrbmOcIf0ClmVg3M+YlgDTCxkLGGEF2w2N1uQwnoWlUVooxp8Zn+D8p13un8H4C2MXrJNTOjJeZ5yVwDudAQ38KbTGLmmMSBMtbwjn20VM8fOMcR7OP5XxJvouURwPK9q+gZW5w+W6Yn1elOv70DAxQRLYJ242zI1TVMHHBAxyPHmI8bDHZ5AXbadofyBBElgi7meWi5lvivgV4zHLIwksyQThT/PYv4Bxj8f3vdIHf6RjzUKQ5ArGP1xYNdTjw/Xx2K+IUeyxr8QQ/RxtxSCdU44wHoW//A3jvy7xTb6jrZpRxqhl1DhwGNCJxD8Hbb8l3pmh6CfXegrH/q04nsV4TGFdVHI24hkvMlwYPoxxvOKgsOmPtt/zMQgTFX1Pghn2InWYjLWMMxEI+jR9j8A9SLBVgoCPFCa7q6PtCoX21iEIXmprE9P8kYJ0OdCoHY5nuYDRXaHdMi5P4rhTKhg3OdzKbbCmTgsq5H0Jv8VVP864ztFvCOMiBN7xrBBhnB/E/W+BkjmlXwARtET/x9gOHMKDOGWBhgh5CZi4W0AEkWfwd5LGr45BxEx4maWIgL24oSpHdrDMQQJLy1/TWJ8szaRWKNpHMc7TvO/tsAh2q6h6h/dtJCDbO1/DSFe42Fc8jHU5niuI35IprALR7dJFiPAy0qcujE4IAoMYSNVAkMeJUElQEdjN1xBhpY0ElizRDKJTfo/UqDPSX9HuFZq+ezTtXsldCHOtih9ehVbbZRj8vVPeVbRJwLpJEVwPxfMF4zzbU44+pbCATstlWg//FUCaSL8HiHJuM+sWexDNepmINYq2vQlE6aWAymR2hjvp6hJ8GR6DwEfhLpwi9Ykpinbd/Uo12UCpggjHwMTHI4KK/Nu8RsES/I1AKnUySNBBw+JEZZeLL3OKKvjyNfG+p0ALhqCo0gmmv10z32cK/LVKrmfsVLT3drGWpCGULkiPpwzbPKaaDYggWnI341cO35pMSaQiZyThfifjnS5sBol0cpJLmvkE3IJKumvaKxNQCJHj4jxfBEGsp3EN2AKYJZqI0pJ9iNBzm1PSppaTi1GG1j2vaMbXsAyJEj8TMYjqvHWM6S7ntte0+xIcMyOZ4+2zFSqKNH7rJuS9pyD3/j7IQLyTigQfIPMZjHd6qAnXvxNuRpUaT0I24mayEyECJam/qwSQx/9Yk85cSg0XloLfEyLcqdFWie5vdOT03yR47XOQAqvkbpcild3nq5Tu2ASf41AyB0xYNU7D2tuo8eqiv5npY0tInibFlKxoGjVeL0gkCBYL8zeXVPFeD9fYpmnvkmAauy3ZFmGgol1852pFe584Vay2INZSq1PWU6yE65Qil2CLFAWeEzT9pejzCALirRi/tQrN/Uxzvq4crLpfjSa9bhYRAhpLofJBv9BcZ1AbIkKXBMgqGl6i6d/X8VvWHya43HekRmsXo6hk1QmWgywBRaHJKT1BbKfInpAvk+0aDM1gOotH40lf1TtDE2e0hhx2IaszdZtJjReXLJngCDbHNOFZpGYwlWJVUmtCxUp8pBlD5/hO18Q685I9aEKEco32PIWawlDky8+6RKqyN+DJZqaWyZKNmphFfO1CaK7U319A4KgTcYNzbJakOQU1qdHYV0gf0MyF7ND6HcXWLiSw/a2i3xY8e1JFzNObmjhB6vN/T7B4UwzT15oiQaFsbFGVcmW18/UErjUaGcIBavqmFEvsxTSp2byksDKdEYe4ydRkZwwWEYR5V7n4VmfKch9MVmdHYDUdOXprSx0s2Kse+3+CmoNTS4MYlwOKGCMMy7M6Eo58ESbjEKo3RsBvFKA+IUpxnEvefx2U7ScJvNv0BImcEBG2gvmy8aSHS1/ZKDqZYsuYsk7/PNqleDKxPmwuFHvs59Hw+aJhh6qClplA9SvgsU0VCC6GJt9HjZdw7SJb7GRNQBazejFusPlxiYnsy8dSWd1VH44sMMmYzw+9mt83kpudSf0LYzoUqjfp0007Lb+Uw31K0gO+qyOmOUyhxVK/kNL30xh/N5Es7ma4Dl3G4pR2mrFVra9k23cx9wBLxX92gp8NwdQuBlHsS9OTDMMYG6oPzzTJ98G4YX1pcM80uv25dWweDF9awDfDNE2nef4XYo0GD0GxfYrdHO3inz9URPL3OghRg5qHKtaRiug1cBMd8E7Wjml5nzcchJRtd7JJRyqoe2Srf/1Rh2DIil+gsFvuvuLeneiqIenkZx3vlh2mUwswLKZBb2/OiZqLzXsNembFftpQFqQ0H2u+Yewm/VqLLFxNhCXJx8TuRzwgO5WknL3ThSiySHitwkXOoMaVzOFQaLtsV21ntybHhAms0Tq9cIQ6dcyiy0t60uyLK+UrCVpVnk03vlTFmrE7egkjClZZv6/BeVH19vtayl0EENCacB2huA6dn1Ge+5KzT6CMgEGhiEn5uQGaUlLHf2uIOZKPuKiAIkZ3TF4N+UxZVt9gGLRqf3Va9ei5EVq5tjw6DnbG+dXvngMllDWdSrinFinW6YjgSUJMk5lj+9Ntww+RGTIKMRDBnQcz6MHl6bSnop5WrAtSZdURqq79dvUz75gsSk8P0I7gwegA+VuOEJ4kzCQQ+s4cN4BmnHfo6FTw5Gez1l/Jv6UaO1hTuLKklC8xMmwaW+Ys60CPvlEefWeRyuqa6Jj42tB7N5kIojH9CvPo/ZszKTejXgbrNeTCd/EAPGP4zGr5iKqyNkCrd7SnD8sMase3CnPb6OI6OjY7RDcsbEcLl5dSvY3zAR4bdjm4R+yAGdUik9IDfoq4fJll9Q/4vS26yX1C9RGyxzbiDsKs/bPGF9G0cw+SGT56rYtRGMpPYJgm8IPPE0tZXQtv5jNp9rvZdN+ijZTWhuqxTSaCWIMbLuxHsy+psAZLCjYvIl+WiPpP+F0nL99AzNjgMlnon2s60px3KqOTZ/IEfLy+nCKIcfr36kpDjs+lkr4Bumfxbtq+5yDcTWyyZdLk36FIzNyeNiA2R6s27DhKHr+vMSnqbYngwN551DErnVZv2kU18lJ81gWn96LF19baSUAIPiXC3wx/LS6g1pFuX+XIAi6n2D7P2APGHoq+PpxG586poi3l+1rSPX53RLh+5In011GV9gHLQ+1hBH5/hsKUDMZBdUmrIUmWbc2h2nqZZKJhfaooI52TM0OCr/b00HIffbU/RPsr63jidkQnWbR3yMACmjw0h8YPjt1i/qe59PSKCvq6ooa28mD7HGQoGVQYPbekbyZNPvMw5WaGaOVXHWjpOh9tDNbSE5dFqEtWqCneuQeysAz8Pg3pacNB95v06wXZNO8/pW3GKiSbCFZgJjugb7K1laEs+hwiYZdap230I0bDmJ5NrJCiptZHa4PtWZvY1bB2Dz6uOnrsaH+5BludYGU67a5MI8NhFAb1qIq2Rb2MWCfTcV+rzV0yUBLuAMsn1kH2QG5HiiYp3wD8bfSOy7bk0EUPbIpZNcP4vySCvSr3iKO+fwTpkKRubze5QgZSKAnj1i9ef28iW9Quo9hHMtaK4TBUVKUcvwxtbyNV0xJ+xGMBWvb5drYKrU+E79JBLUJJ9xVHQUk2u7yMos1cBGGJbcowMZkWvPaL118vUoK/FZMsy8t/sJFASsXWkrD9E7u4lc3hRdnUVuS7jlTKMPETFAWffBR7liCWWIiiyKA41cCWkO4orEmhS3YcfY5/D7VVMfejADfWFv+MsB1b5E5mg87vV0/tOaWMRFp/X0+ghe4zDzVyKZPKilpHRZA1GggjjlgPc7ueYmv520mzFbuZko2KpfwfA8XQ6v7U+DO6o44Fsc5dILolYiGspfi5FG9bH899cfcqGnVWb3rhvVLy/UCIYGnJHSDFVKRaqs/K/EhBBaPQVoHzJSL/EuXTIFK4QzgmJDngqIRmoVonlTrrS65uQC/cQzZ/dPZohd6AZXhfcWwMAsgylKo9yYVFASYC/WAsgl02waTKZ++y4/dKF+2zl14Fuo9D6qCpIYfVCIAERjPczWFYs8c1BLAyCGv30mRlpqCRI6HWDxRbiwiWbECRRjRMvlIej8pkU9KYdNuEJEs2Iqidj3+7ifyfD8cjxnmLvocSaAPPsBfaJjgFWYSsxp1M3v4fgGTKGsQlEuh9BEvjRSSTGEz6jakpIiQoq4G74b9lY+k5FNvv15+a/61ig1IIglBZkpY9he/BSoWacK3dpP9GMUWEJMQSmxCBCwHyEJnL9nPZT1iAts4IBNM0Ef4+BJESWMqGGtlZvA7ZyF4UuX7wkvp/FlOSIkJKUkRISYoIKUkRISUpIqTEXf4nwABZ4DL1UAe0XwAAAABJRU5ErkJggg==</Image>
<Url type="application/x-suggestions+json" method="GET" template="https://completion.amazon.com/search/complete?q={searchTerms}&amp;search-alias=aps&amp;mkt=1"/>
<Url type="text/html" method="GET" template="http://www.amazon.com/exec/obidos/external-search/" rel="searchform">
  <Param name="field-keywords" value="{searchTerms}"/>
  <Param name="mode" value="blended"/>
  <Param name="tag" value="mozilla-20"/>
  <Param name="sourceid" value="Mozilla-search"/>
</Url>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:14 $"/>
        <language type="am"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - Anchor</title>
</head>
<body onload="parent.loadComplete()">
<p>
<a href="./pix/submit.gif" target="dynamic">View Submit Button</a>
</p>
</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - Anchor</title>
</head>
<body onload="parent.loadComplete()">
<p>
<a id="Anchor" dir="ltr" href="./pix/submit.gif" accesskey="g" type="image/gif" coords="0,0,100,100" shape="rect" rel="GLOSSARY" rev="STYLESHEET" hreflang="en" charset="US-ASCII" tabindex="22" name="Anchor">View Submit Button</a>
</p>
</body>
</html>
<?xml version="1.0"?>
<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem  blockID="i454" id="ancient@tests.mozilla.org">
      <versionRange  minVersion="0" maxVersion="*" severity="3"/>
    </emItem>
  </emItems>
</blocklist>
<!-- Placeholder. -->
<?xml version="1.0"?>

<!DOCTYPE zoo [
    <!ATTLIST species id ID #REQUIRED>
]>

<zoo>
  <class>
    <name>Reptiles</name>
    <species id="Chamaeleo-chamaelon" name="Chameleon" specimens="2"/>
  </class>
  <class>
    <name>Birds</name>
    <species id="Dromaius-novaehollandiae" name="Emu" specimens="12"/>
    <species id="Tyto-alba" name="Barn Owl" specimens="4"/>
    <species id="Corvus-corax" name="Raven" specimens="0"/>
    <location>Aviary</location>
  </class>
</zoo>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Answers.com</ShortName>
<Description>Dictionary Search on Answers.com</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////K////4f////E////5f///+n////P////mv///0EAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8E////fv///+//////////////////////7NnP/+LFtv/////+////of///xYAAAAAAAAAAAAAAAD///8D////lf////////////j0//bi1v/OlXf/tGU9/6FCEv/OmH3////////////////D////FgAAAAAAAAAA////avPm4P/evaz/8NbI//7r3//23M3/xYRi/5kzAP/Df1z//u/l//749P/v4dn/+PPw/////6j///8B////GP///+W/f1//smM7//bczf/+69///uvf/9ytlP+ZMwD/5se3/+/f1//AgmP/nj0N/927qv/////+////QP///2z/////8NvQ/8WCYP/+69///uvf//7r3/+7ckz/pUkb/9m1ov+ePQ3/okUW/8+fh//38O3//////////5r///+t//////7y6v/Cflv/58Cr//DRwP/mwKv/okQU/8ODYv/cuqj/yZN4//Tq5f/+9e///vDn///////////Q////yf/////+7+b/05yA/65ZLv+9dVD/sF40/5kzAP/kvKb//vTu//Tr5v/7+Pb//vfz//707f//////////6f///8X//////vDm/+K4ov/KjGz//ure/8uNbf+jRBX/+OTX/+3b0v+jSBr/pk0h/717Wv/Wrpr//Pn4/////+b///+i//////7z7f/02Mj/wn5b//vl2P+uWS7/vXhU//v49//48u//1q6a/717Wv+oUSb/tWxH//jz8P/////K////V///////+/j//ure/8aFZP/fs5v/oEAQ/9q1o/+zaEL/1ayX//718P/+9/P/+PHu//jz8P//////////h////wr////O///////38v/YpYr/tGQ7/6ZLHf/06eX/s2dB/549Df/x49z//vDn//7x6f//////////8////yoAAAAA////R/////v/////7dXI/5kzAP+7cUv//vHp/+vYzv+bNwX/vHlY//38/P///////////////30AAAAAAAAAAAAAAAD///9n////+/z5+P++e1n/3LGc//7w5//++PT/0KKL/8OIa//9/Pv//////////5X///8GAAAAAAAAAAAAAAAAAAAAAP///0n////K///////////////////////////+/v7/////5v///2z///8CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Cv///1f///+g////xP///8n///+r////bP///xoAAAAAAAAAAAAAAAAAAAAA+B////AH///AA///wAH//4AB//+AAP//AAD//wAA//8AAP//AAD//4AA//+AAf//wAP//+AD///wD////D///w==</Image>
<Url type="text/html" method="GET" template="http://www.answers.com/main/ntquery">
  <Param name="s" value="{searchTerms}"/>
  <Param name="gwp" value="13"/>
</Url>
<Url type="application/x-suggestions+json" method="GET"
     template="http://www.answers.com/main/startswith?output=json&amp;client=firefox&amp;s={searchTerms}"/>
<SearchForm>http://www.answers.com/</SearchForm>
</SearchPlugin>
<?xml version="1.0"?>

<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  <binding id="appbarBinding">
    <content>
      <xul:toolbar anonid="toolbar"><children/></xul:toolbar>
    </content>

    <implementation implements="nsIDOMEventListener">
      <field name="sticky">false</field>
      <field name="_toolbar" readonly="true">document.getAnonymousElementByAttribute(this, "anonid", "toolbar");</field>

      <property name="isShowing" readonly="true">
        <getter>
          <![CDATA[
            return this.getAttribute("visible") == "true";
          ]]>
        </getter>
      </property>

      <method name="_fire">
        <parameter name="aName"/>
        <body>
          <![CDATA[
            let event = document.createEvent("Events");
            event.initEvent(aName, true, false);
            this.dispatchEvent(event);
          ]]>
        </body>
      </method>

      <method name="dismiss">
        <body>
          <![CDATA[
            if (!this.isShowing)
              return;

            let self = this;
            this.setAttribute("hiding", "true");
            this.addEventListener("transitionend", function appbar_transitionend() {
              self.removeEventListener("transitionend", appbar_transitionend, false);
              self.removeAttribute("hiding");
            }, false);

            this._fire("MozAppbarDismissing");
            this.removeAttribute("visible");
          ]]>
        </body>
      </method>

      <method name="show">
        <body>
          <![CDATA[
            if (this.isShowing)
              return;

            this._fire("MozAppbarShowing");
            this.setAttribute("visible", "true");
          ]]>
        </body>
      </method>

      <method name="toggle">
        <body>
          <![CDATA[
            if (this.getAttribute("visible") === "true") {
              this.dismiss();
            } else {
              this.show();
            }
          ]]>
        </body>
      </method>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - Applet</title>
</head>
<body onload="parent.loadComplete()">
<p>
<applet align="bottom" alt="Applet Number 1" archive="" object="DOMTSApplet.dat" codebase="applets" height="306" hspace="0" name="applet1" vspace="0" width="301"></applet>
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - Applet</title>
</head>
<body onload="parent.loadComplete()">
<p>
<applet align="bottom" alt="Applet Number 1" archive="" code="org/w3c/domts/DOMTSApplet.class" codebase="applets" height="306" hspace="0" name="applet1" vspace="0" width="301"></applet>
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="softblock1@tests.mozilla.org">
      <versionRange severity="1">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="softblock2@tests.mozilla.org">
      <versionRange severity="1">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="softblock3@tests.mozilla.org">
      <versionRange severity="1">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="softblock4@tests.mozilla.org">
      <versionRange severity="1">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="softblock5@tests.mozilla.org">
      <versionRange severity="1">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="hardblock@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="/^RegExp/">
      <versionRange severity="1">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="/^RegExp/i">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
  </emItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - Area</title>
</head>
<body onload="parent.loadComplete()">
<p>
<map name="mapid" id="mapid">
<area href="./files/dletter.html" alt="Domain" target="dynamic"/>
</map>
</p>
</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - Area</title>
</head>
<body onload="parent.loadComplete()">
<p>
<map name="mapid" id="mapid">
<area tabindex="10" accesskey="a" shape="rect" alt="Domain" coords="0,2,45,45" href="./files/dletter.html" title="Domain"/>
</map>
</p>
</body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<resources>
    <string-array name="pref_home_updates_entries">
        <item>@string/pref_home_updates_enabled</item>
        <item>@string/pref_home_updates_wifi</item>
    </string-array>
    <string-array name="pref_home_updates_values">
        <item>0</item>
        <item>1</item>
    </string-array>
    <string-array name="pref_plugins_entries">
        <item>@string/pref_plugins_enabled</item>
        <item>@string/pref_plugins_tap_to_play</item>
        <item>@string/pref_plugins_disabled</item>
    </string-array>
    <string-array name="pref_plugins_values">
        <item>1</item>
        <item>2</item>
        <item>0</item>
    </string-array>
    <string-array name="pref_font_size_entries">
        <item>@string/pref_font_size_tiny</item>
        <item>@string/pref_font_size_small</item>
        <item>@string/pref_font_size_medium</item>
        <item>@string/pref_font_size_large</item>
        <item>@string/pref_font_size_xlarge</item>
    </string-array>
    <string-array name="pref_font_size_values">
        <item>0</item>
        <item>80</item>
        <item>120</item>
        <item>160</item>
        <item>240</item>
    </string-array>
    <string-array name="pref_char_encoding_entries">
        <item>@string/pref_char_encoding_on</item>
        <item>@string/pref_char_encoding_off</item>
    </string-array>
    <string-array name="pref_char_encoding_values">
        <item>true</item>
        <item>false</item>
    </string-array>
    <string-array name="pref_cookies_entries">
        <item>@string/pref_cookies_accept_all</item>
        <item>@string/pref_cookies_not_accept_foreign</item>
        <item>@string/pref_cookies_disabled</item>
    </string-array>
    <string-array name="pref_cookies_values">
        <item>0</item>
        <item>1</item>
        <item>2</item>
    </string-array>
    <string-array name="pref_import_android_entries">
        <item>@string/bookmarks_title</item>
        <item>@string/history_title</item>
    </string-array>
    <string-array name="pref_import_android_defaults">
        <item>true</item>
        <item>true</item>
    </string-array>
    <string-array name="pref_import_android_values">
        <item>android_import.data.bookmarks</item>
        <item>android_import.data.history</item>
    </string-array>
    <string-array name="pref_import_android_keys">
        <item>android_import.data.bookmarks</item>
        <item>android_import.data.history</item>
    </string-array>
    <string-array name="pref_private_data_entries">
        <item>@string/pref_private_data_history2</item>
        <item>@string/pref_private_data_downloadFiles2</item>
        <item>@string/pref_private_data_formdata</item>
        <item>@string/pref_private_data_cookies2</item>
        <item>@string/pref_private_data_passwords</item>
        <item>@string/pref_private_data_cache</item>
        <item>@string/pref_private_data_offlineApps</item>
        <item>@string/pref_private_data_siteSettings</item>
    </string-array>
    <string-array name="pref_private_data_defaults">
        <item>true</item>
        <item>true</item>
        <item>true</item>
        <item>true</item>
        <item>true</item>
        <item>true</item>
        <item>true</item>
        <item>true</item>
    </string-array>
    <string-array name="pref_private_data_values">
        <item>private.data.history</item>
        <item>private.data.downloadFiles</item>
        <item>private.data.formdata</item>
        <item>private.data.cookies_sessions</item>
        <item>private.data.passwords</item>
        <item>private.data.cache</item>
        <item>private.data.offlineApps</item>
        <item>private.data.siteSettings</item>
    </string-array>
    <string-array name="pref_private_data_keys">
        <item>private.data.history</item>
        <item>private.data.downloadFiles</item>
        <item>private.data.formdata</item>
        <item>private.data.cookies_sessions</item>
        <item>private.data.passwords</item>
        <item>private.data.cache</item>
        <item>private.data.offlineApps</item>
        <item>private.data.siteSettings</item>
    </string-array>
    <string-array name="pref_clear_on_exit_defaults">
        <item>false</item>
        <item>false</item>
        <item>false</item>
        <item>false</item>
        <item>false</item>
        <item>false</item>
        <item>false</item>
        <item>false</item>
    </string-array>
    <string-array name="pref_restore_entries">
        <item>@string/pref_restore_always</item>
        <item>@string/pref_restore_quit</item>
    </string-array>
    <string-array name="pref_restore_values">
        <item>always</item>
        <item>quit</item>
    </string-array>
    <string-array name="pref_update_autodownload_entries">
        <item>@string/pref_update_autodownload_enabled</item>
        <item>@string/pref_update_autodownload_wifi</item>
        <item>@string/pref_update_autodownload_disabled</item>
    </string-array>
    <string-array name="pref_update_autodownload_values">
        <item>enabled</item>
        <item>wifi</item>
        <item>disabled</item>
     </string-array>
    <!-- This value is similar to config_longPressVibePattern in android frameworks/base/core/res/res/values/config.xml-->
    <integer-array name="long_press_vibrate_msec">
        <item>0</item>
        <item>1</item>
        <item>20</item>
        <item>21</item>
    </integer-array>
</resources>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<view class="org.mozilla.gecko.widget.ArrowPopup$ArrowPopupLayout"
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content">

    <ScrollView android:layout_width="?attr/arrowPopupWidth"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:background="@drawable/arrow_popup_bg">

        <LinearLayout android:id="@+id/content"
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:orientation="vertical"/>

    </ScrollView>

    <ImageView android:id="@+id/arrow"
               android:layout_width="@dimen/arrow_popup_arrow_width"
               android:layout_height="12dip"
               android:layout_marginLeft="20dip"
               android:layout_alignParentTop="true"
               android:src="@drawable/menu_popup_arrow_top"
               android:scaleType="fitXY"/>

</view>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:15 $"/>
        <language type="ar"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="asa"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2008/05/25 01:05:50 $"/>
		<language type="as"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Beng</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Theme level attributes -->
    <declare-styleable name="GeckoTheme">

        <!-- Style for GeckoMenu ListView -->
        <attr name="geckoMenuListViewStyle" format="reference"/>

        <!-- Style for MenuItemActionBar -->
        <attr name="menuItemActionBarStyle" format="reference"/>

        <!-- Style for MenuItemActionBar -->
        <attr name="menuItemActionBarStyleNewTablet" format="reference"/>

        <!-- Style for MenuItemActionBar -->
        <attr name="menuItemActionModeStyle" format="reference"/>

        <!-- Style for MenuItemActionView -->
        <attr name="menuItemActionViewStyle" format="reference"/>

        <!-- Style for MenuItemDefault -->
        <attr name="menuItemDefaultStyle" format="reference"/>

        <!-- Style for MenuItemActionBar when shown in SecondaryActionBar -->
        <attr name="menuItemSecondaryActionBarStyle" format="reference"/>

        <!-- Style for MenuItemActionView's ShareActionButton -->
        <attr name="menuItemShareActionButtonStyle" format="reference"/>

        <!-- Default style for the BookmarksListView -->
        <attr name="bookmarksListViewStyle" format="reference" />

        <!-- Default style for the TopSitesGridItemView -->
        <attr name="topSitesGridItemViewStyle" format="reference" />

        <!-- Style for the PanelGridView -->
        <attr name="panelGridViewStyle" format="reference" />

        <!-- Style for the TabsGridLayout -->
        <attr name="tabGridLayoutViewStyle" format="reference" />

        <!-- Default style for the TopSitesGridView -->
        <attr name="topSitesGridViewStyle" format="reference" />

        <!-- Default style for the TopSitesThumbnailView -->
        <attr name="topSitesThumbnailViewStyle" format="reference" />

        <!-- Default style for the HomeListView -->
        <attr name="homeListViewStyle" format="reference" />

    </declare-styleable>

    <!-- DoorHangers -->
    <declare-styleable name="DoorHanger">
        <attr name="arrowPopupWidth" format="dimension">
             <enum name="fill_parent" value="-1" />
             <enum name="match_parent" value="-1" />
             <enum name="wrap_content" value="-2" />
        </attr>
    </declare-styleable>

    <declare-styleable name="MenuItem">
        <attr name="android:id"/>
        <attr name="android:orderInCategory"/>
        <attr name="android:title"/>
        <attr name="android:icon"/>
        <attr name="android:checkable"/>
        <attr name="android:checked"/>
        <attr name="android:visible"/>
        <attr name="android:enabled"/>
        <attr name="android:showAsAction"/>
    </declare-styleable>

    <declare-styleable name="MenuItemDefault">
        <attr name="state_more" format="boolean"/>
    </declare-styleable>

    <declare-styleable name="TabThumbnailWrapper">
        <attr name="state_recording" format="boolean"/>
    </declare-styleable>

    <declare-styleable name="FlowLayout">
        <attr name="spacing" format="dimension"/>
    </declare-styleable>

    <declare-styleable name="MultiChoicePreference">
        <attr name="entries" format="string"/>
        <attr name="entryValues" format="string"/>
        <attr name="initialValues" format="string"/>
    </declare-styleable>

    <declare-styleable name="MultiPrefMultiChoicePreference">
        <attr name="entryKeys" format="string"/>
    </declare-styleable>

    <declare-styleable name="TabsLayout">
        <attr name="tabs">
            <flag name="tabs_normal" value="0x00" />
            <flag name="tabs_private" value ="0x01" />
        </attr>
    </declare-styleable>

    <declare-styleable name="TabCounter">
        <attr name="android:layout"/>
    </declare-styleable>

    <declare-styleable name="TextSelectionHandle">
        <attr name="handleType">
            <flag name="start" value="0x01" />
            <flag name="middle" value="0x02" />
            <flag name="end" value="0x03" />
        </attr>
    </declare-styleable>

    <declare-styleable name="PrivateBrowsing">
        <attr name="state_private" format="boolean"/>
    </declare-styleable>

    <declare-styleable name="LightweightTheme">
        <attr name="state_light" format="boolean"/>
        <attr name="state_dark" format="boolean"/>
        <attr name="autoUpdateTheme" format="boolean"/>
    </declare-styleable>

    <declare-styleable name="TwoWayView">
        <attr name="android:orientation"/>
        <attr name="android:choiceMode"/>
        <attr name="android:listSelector"/>
        <attr name="android:drawSelectorOnTop"/>
    </declare-styleable>

    <declare-styleable name="HomeListView">
        <!-- Draws a divider on top of the list, if true. Defaults to false. -->
        <attr name="topDivider" format="boolean"/>
    </declare-styleable>

    <declare-styleable name="HomePagerTabStrip">
        <attr name="tabIndicatorColor" format="color"/>
    </declare-styleable>

    <declare-styleable name="FadedTextView">
        <attr name="fadeWidth" format="dimension"/>
    </declare-styleable>

    <declare-styleable name="FadedMultiColorTextView">
        <!-- The background color we should be fading over. Useful because the
             background is full alpha and we need to copy the background underneath. -->
        <attr name="fadeBackgroundColor" format="dimension"/>
    </declare-styleable>

    <declare-styleable name="BookmarkFolderView">
        <attr name="state_open" format="boolean"/>
    </declare-styleable>

    <declare-styleable name="GeckoView">
        <attr name="url" format="string"/>
        <attr name="doinit" format="boolean"/>
    </declare-styleable>

    <declare-styleable name="IconTabWidget">
        <attr name="android:layout"/>

        <!-- Sets the tab's content type. Defaults to icon. -->
        <attr name="display">
            <enum name="icon" value="0x00" />
            <enum name="text" value="0x01" />
        </attr>
    </declare-styleable>

    <declare-styleable name="TopSitesGridView">
        <attr name="android:horizontalSpacing"/>
        <attr name="android:verticalSpacing"/>
    </declare-styleable>

    <declare-styleable name="TabMenuStrip">
        <attr name="strip" format="reference"/>
    </declare-styleable>

    <declare-styleable name="EllipsisTextView">
        <attr name="ellipsizeAtLine" format="integer"/>
    </declare-styleable>

    <declare-styleable name="FloatingHintEditText">
        <attr name="floatingHintEditTextStyle" format="reference" />
    </declare-styleable>

    <declare-styleable name="FaviconView">
        <attr name="dominantBorderEnabled" format="boolean" />
        <attr name="overrideScaleType" format="boolean" />
    </declare-styleable>

</resources>

<?xml version="1.0" encoding="utf-8"?>
<!--
Description: Ensure unknown NS element in atom:author doesn't cause exception
Expect: var mCService = Components.classes['@mozilla.org/consoleservice;1'].getService(Components.interfaces.nsIConsoleService); var msg = mCService.getMessageArray()[0]; if(msg){msg = msg.message}; ((msg + "").indexOf("prefix has no properties") == -1);
-->
<feed xmlns="http://www.w3.org/2005/Atom">

  <author>
    <name>Sam Ruby</name>
    <method xmlns="http://www.intertwingly.net/blog/">excerpt</method>
    <email>rubys@intertwingly.net</email>
    <uri>.</uri>
  </author>

</feed>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="32dip"
          android:textAppearance="@style/TextAppearance.Medium"
          android:layout_gravity="center_vertical"
          android:paddingLeft="10dp"
          android:paddingRight="10dp"
          android:paddingTop="3dp"
          android:paddingBottom="3dp"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<ListView xmlns:android="http://schemas.android.com/apk/res/android"
          style="@android:style/Widget.Holo.ListView"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:background="@drawable/autocomplete_list_bg"
          android:cacheColorHint="#ffffff"/>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="autocompleteBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="autocomplete" role="xul:combobox"
           extends="chrome://global/content/bindings/textbox.xml#textbox">
    <resources>
      <stylesheet src="chrome://communicator/content/autocomplete.css"/>
      <stylesheet src="chrome://global/skin/autocomplete.css"/>
    </resources>

    <content>
      <children includes="menupopup"/>

      <xul:hbox class="autocomplete-textbox-container" flex="1" align="center">
        <children includes="image|deck|stack|box">
          <xul:image class="autocomplete-icon" allowevents="true"/>
        </children>

        <xul:hbox class="textbox-input-box" flex="1" xbl:inherits="context,tooltiptext=inputtooltiptext">
          <children/>
          <html:input anonid="input" class="autocomplete-textbox textbox-input"
                      allowevents="true"
                      xbl:inherits="tooltiptext=inputtooltiptext,value,type,maxlength,disabled,size,readonly,placeholder,tabindex,accesskey,mozactionhint,userAction"/>
        </xul:hbox>
        <children includes="hbox"/>
      </xul:hbox>

      <xul:dropmarker class="autocomplete-history-dropmarker" allowevents="true"
                      xbl:inherits="open,enablehistory" anonid="historydropmarker"/>

      <xul:popupset>
        <xul:panel type="autocomplete" anonid="popup"
                   ignorekeys="true" noautofocus="true" level="top"
                   xbl:inherits="for=id,nomatch"/>
      </xul:popupset>
    </content>

    <implementation implements="nsIDOMXULMenuListElement">

      <constructor><![CDATA[
        // XXX bug 90337 band-aid until we figure out what's going on here
        if (this.value != this.mInputElt.value)
          this.mInputElt.value = this.value;
        delete this.value;

        // listen for pastes
        this.mInputElt.controllers.insertControllerAt(0, this.mPasteController);

        // listen for menubar activation
        window.top.addEventListener("DOMMenuBarActive", this.mMenuBarListener, true);

        // set default property values
        this.ifSetAttribute("timeout", 50);
        this.ifSetAttribute("pastetimeout", 1000);
        this.ifSetAttribute("maxrows", 5);
        this.ifSetAttribute("showpopup", true);
        this.ifSetAttribute("disableKeyNavigation", true);

        // initialize the search sessions
        if (this.hasAttribute("autocompletesearch"))
          this.initAutoCompleteSearch();

        // hack to work around lack of bottom-up constructor calling
        if ("initialize" in this.popup)
          this.popup.initialize();
      ]]></constructor>

      <destructor><![CDATA[
        this.clearResults(false);
        window.top.removeEventListener("DOMMenuBarActive", this.mMenuBarListener, true);
        this.mInputElt.controllers.removeController(this.mPasteController);
      ]]></destructor>

      <!-- =================== nsIAutoCompleteInput =================== -->
      <!-- XXX: This implementation is currently incomplete. -->

      <!-- reference to the results popup element -->
      <field name="popup"><![CDATA[
        document.getAnonymousElementByAttribute(this, "anonid", "popup");
      ]]></field>

      <property name="popupOpen"
                onget="return this.mMenuOpen;"
                onset="if (val) this.openPopup(); else this.closePopup(); return val;"/>

      <!-- option to turn off autocomplete -->
      <property name="disableAutoComplete"
                onset="this.setAttribute('disableautocomplete', val); return val;"
                onget="return this.getAttribute('disableautocomplete') == 'true';"/>

      <!-- if the resulting match string is not at the beginning of the typed string,
           this will optionally autofill like this "bar |>> foobar|" -->
      <property name="completeDefaultIndex"
                onset="this.setAttribute('completedefaultindex', val); return val;"
                onget="return this.getAttribute('completedefaultindex') == 'true';"/>

      <!-- option for completing to the default result whenever the user hits
           enter or the textbox loses focus -->
      <property name="forceComplete"
                onset="this.setAttribute('forcecomplete', val); return val;"
                onget="return this.getAttribute('forcecomplete') == 'true';"/>

      <property name="minResultsForPopup"
                onset="this.setAttribute('minresultsforpopup', val); return val;"
                onget="var t = this.getAttribute('minresultsforpopup'); return t ? parseInt(t) : 1;"/>

      <!-- maximum number of rows to display -->
      <property name="maxRows"
                onset="this.setAttribute('maxrows', val); return val;"
                onget="return parseInt(this.getAttribute('maxrows')) || 0;"/>

      <!-- toggles a second column in the results list which contains
           the string in the comment field of each autocomplete result -->
      <property name="showCommentColumn"
                onget="return this.getAttribute('showcommentcolumn') == 'true';">
        <setter><![CDATA[
          this.popup.showCommentColumn = val;
          this.setAttribute('showcommentcolumn', val);
          return val;
        ]]></setter>
      </property>

      <!-- number of milliseconds after a keystroke before a search begins -->
      <property name="timeout"
                onset="this.setAttribute('timeout', val); return val;"
                onget="return parseInt(this.getAttribute('timeout')) || 0;"/>

      <property name="searchParam"
                onget="return this.getAttribute('autocompletesearchparam') || '';"
                onset="this.setAttribute('autocompletesearchparam', val); return val;"/>

      <property name="searchCount" readonly="true"
                onget="return this.sessionCount;"/>

      <method name="getSearchAt">
        <parameter name="aIndex"/>
        <body><![CDATA[
          var idx = -1;
          for (var name in this.mSessions)
            if (++idx == aIndex)
              return name;

          return null;
        ]]></body>
      </method>

      <property name="textValue"
                onget="return this.value;"
                onset="this.setTextValue(val); return val;"/>

      <method name="onSearchBegin">
        <body><![CDATA[
          this._fireEvent("searchbegin");
        ]]></body>
      </method>

      <method name="onSearchComplete">
        <body><![CDATA[
          if (this.noMatch)
            this.setAttribute("nomatch", "true");
          else
            this.removeAttribute("nomatch");

          this._fireEvent("searchcomplete");
        ]]></body>
      </method>

      <method name="onTextReverted">
        <body><![CDATA[
          return this._fireEvent("textreverted");
        ]]></body>
      </method>

      <!-- =================== nsIDOMXULMenuListElement =================== -->

      <property name="editable" readonly="true"
                onget="return true;" />

      <property name="crop"
                onset="this.setAttribute('crop', val); return val;"
                onget="return this.getAttribute('crop');"/>

      <property name="label" readonly="true"
                onget="return this.mInputElt.value;"/>

      <property name="open"
                onget="return this.getAttribute('open') == 'true';">
        <setter>
          <![CDATA[
            var historyPopup = document.getAnonymousElementByAttribute(this, "anonid", "historydropmarker");
            if (val) {
              this.setAttribute('open', true);
              historyPopup.showPopup();
            } else {
              this.removeAttribute('open');
              historyPopup.hidePopup();
            }
          ]]>
        </setter>
      </property>

      <!-- =================== PUBLIC PROPERTIES =================== -->

      <property name="value"
                onget="return this.mInputElt.value;">
        <setter><![CDATA[
          this.ignoreInputEvent = true;
          this.mInputElt.value = val;
          this.ignoreInputEvent = false;
          var event = document.createEvent('Events');
          event.initEvent('ValueChange', true, true);
          this.mInputElt.dispatchEvent(event);
          return val;
        ]]></setter>
      </property>

      <property name="focused"
                onget="return this.getAttribute('focused') == 'true';"/>

      <method name="initAutoCompleteSearch">
        <body><![CDATA[
          var list = this.getAttribute("autocompletesearch").split(" ");
          for (var i = 0; i < list.length; i++) {
            var name = list[i];
            var contractid = "@mozilla.org/autocomplete/search;1?name=" + name;
            if (contractid in Components.classes) {
              try {
                this.mSessions[name] =
                  Components.classes[contractid].getService(Components.interfaces.nsIAutoCompleteSearch);
                this.mLastResults[name] = null;
                this.mLastRows[name] = 0;
                ++this.sessionCount;
              } catch (e) {
                dump("### ERROR - unable to create search \"" + name + "\".\n");
              }
            } else {
              dump("search \"" + name + "\" not found - skipping.\n");
            }
          }
        ]]></body>
      </method>

      <!-- the number of sessions currently in use -->
      <field name="sessionCount">0</field>

      <!-- number of milliseconds after a paste before a search begins -->
      <property name="pasteTimeout"
                onset="this.setAttribute('pastetimeout', val); return val;"
                onget="var t = parseInt(this.getAttribute('pastetimeout')); return t ? t : 0;"/>

      <!-- option for filling the textbox with the best match while typing
           and selecting the difference -->
      <property name="autoFill"
                onset="this.setAttribute('autofill', val); return val;"
                onget="return this.getAttribute('autofill') == 'true';"/>

      <!--  if this attribute is set, allow different style for
            non auto-completed lines -->
      <property name="highlightNonMatches"
                onset="this.setAttribute('highlightnonmatches', val); return val;"
                onget="return this.getAttribute('highlightnonmatches') == 'true';"/>

      <!-- option to show the popup containing the results -->
      <property name="showPopup"
                onset="this.setAttribute('showpopup', val); return val;"
                onget="return this.getAttribute('showpopup') == 'true';"/>

      <!-- option to allow scrolling through the list via the tab key, rather than
           tab moving focus out of the textbox -->
      <property name="tabScrolling"
                onset="return this.setAttribute('tabscrolling', val); return val;"
                onget="return this.getAttribute('tabscrolling') == 'true';"/>

      <!-- option to completely ignore any blur events while
           searches are still going on.  This is useful so that nothing
           gets autopicked if the window is required to lose focus for
           some reason (eg in LDAP autocomplete, another window may be
           brought up so that the user can enter a password to authenticate
           to an LDAP server).  -->
      <property name="ignoreBlurWhileSearching"
                onset="this.setAttribute('ignoreblurwhilesearching', val); return val;"
                onget="return this.getAttribute('ignoreblurwhilesearching') == 'true';"/>

      <!-- state which indicates the current action being performed by the user.
           Possible values are : none, typing, scrolling -->
      <property name="userAction"
                onset="this.setAttribute('userAction', val); return val;"
                onget="return this.getAttribute('userAction');"/>

      <!-- state which indicates if the last search had no matches -->
      <field name="noMatch">true</field>

      <!-- state which indicates a search is currently happening -->
      <field name="isSearching">false</field>

      <!-- state which indicates a search timeout is current waiting -->
      <property name="isWaiting" 
                onget="return this.mAutoCompleteTimer != 0;"/>

      <!-- =================== PRIVATE PROPERTIES =================== -->

      <field name="mSessions">({})</field>
      <field name="mLastResults">({})</field>
      <field name="mLastRows">({})</field>
      <field name="mLastKeyCode">null</field>
      <field name="mAutoCompleteTimer">0</field>
      <field name="mMenuOpen">false</field>
      <field name="mFireAfterSearch">false</field>
      <field name="mFinishAfterSearch">false</field>
      <field name="mNeedToFinish">false</field>
      <field name="mNeedToComplete">false</field>
      <field name="mTransientValue">false</field>
      <field name="mView">null</field>
      <field name="currentSearchString">""</field>
      <field name="ignoreInputEvent">false</field>
      <field name="oninit">null</field>
      <field name="mDefaultMatchFilled">false</field>
      <field name="mFirstReturn">true</field>
      <field name="mIsPasting">false</field>

      <field name="mPasteController"><![CDATA[
        ({
          self: this,
          kGlobalClipboard: Components.interfaces.nsIClipboard.kGlobalClipboard,
          supportsCommand: function(aCommand) {
            return aCommand == "cmd_paste";
          },
          isCommandEnabled: function(aCommand) {
            return aCommand == "cmd_paste" &&
                   this.self.editor.isSelectionEditable &&
                   this.self.editor.canPaste(this.kGlobalClipboard);
          },
          doCommand: function(aCommand) {
            if (aCommand == "cmd_paste") {
              this.self.mIsPasting = true;
              this.self.editor.paste(this.kGlobalClipboard);
              this.self.mIsPasting = false;
            }
          },
          onEvent: function() {}
        })
      ]]></field>

      <field name="mMenuBarListener"><![CDATA[
        ({
          self: this,
          handleEvent: function(aEvent) {
            try {
              this.self.finishAutoComplete(false, false, aEvent);
              this.self.clearTimer();
              this.self.closePopup();
            } catch (e) {
              window.top.removeEventListener("DOMMenuBarActive", this, true);
            }
          }
        })
      ]]></field>

      <field name="mAutoCompleteObserver"><![CDATA[
        ({
          self: this,
          onSearchResult: function(aSearch, aResult) {
            for (var name in this.self.mSessions)
              if (this.self.mSessions[name] == aSearch)
                this.self.processResults(name, aResult);
          }
        })
      ]]></field>

      <field name="mInputElt"><![CDATA[
        document.getAnonymousElementByAttribute(this, "anonid", "input");
      ]]></field>

      <field name="mMenuAccessKey"><![CDATA[
        Components.classes["@mozilla.org/preferences-service;1"]
                 .getService(Components.interfaces.nsIPrefBranch)
                 .getIntPref("ui.key.menuAccessKey");
      ]]></field>

      <!-- =================== PUBLIC METHODS =================== -->

      <method name="getErrorAt">
        <parameter name="aIndex"/>
        <body><![CDATA[
          var obj = aIndex < 0 ? null : this.convertIndexToSession(aIndex);
          return obj && this.mLastResults[obj.session] &&
                        this.mLastResults[obj.session].errorDescription;
        ]]></body>
      </method>

      <!-- get a value from the autocomplete results as a string via an absolute index-->
      <method name="getResultValueAt">
        <parameter name="aIndex"/>
        <body><![CDATA[
          var obj = this.convertIndexToSession(aIndex);
          return obj ? this.getSessionValueAt(obj.session, obj.index) : null;
        ]]></body>
      </method>

      <!-- get a value from the autocomplete results as a string from a specific session -->
      <method name="getSessionValueAt">
        <parameter name="aSession"/>
        <parameter name="aIndex"/>
        <body><![CDATA[
          var result = this.mLastResults[aSession];
          return result.errorDescription || result.getValueAt(aIndex);
        ]]></body>
      </method>

      <!-- get the total number of results overall -->
      <method name="getResultCount">
        <body><![CDATA[
          return this.view.rowCount;
        ]]></body>
      </method>

      <!-- get the first session that has results -->
      <method name="getDefaultSession">
        <body><![CDATA[
          for (var name in this.mLastResults) {
            var results = this.mLastResults[name];
            if (results && results.matchCount > 0 && !results.errorDescription)
              return name;
          }
          return null;
        ]]></body>
      </method>

      <!-- empty the cached result data and empty the results popup -->
      <method name="clearResults">
        <parameter name="aInvalidate"/>
        <body><![CDATA[
          this.clearResultData();
          this.clearResultElements(aInvalidate);
        ]]></body>
      </method>

      <!-- =================== PRIVATE METHODS =================== -->

      <!-- ::::::::::::: session searching ::::::::::::: -->

      <!--  -->
      <method name="callListener">
        <parameter name="me"/>
        <parameter name="aAction"/>
        <body><![CDATA[
          // bail if the binding was detached or the element removed from
          // document during the timeout
          if (!("startLookup" in me) || !me.ownerDocument || !me.parentNode)
            return;

          me.clearTimer();

          if (me.disableAutoComplete)
            return;

          switch (aAction) {
            case "startLookup":
              me.startLookup();
              break;

            case "stopLookup":
              me.stopLookup();
              break;
          }
        ]]></body>
      </method>

      <!--  -->
      <method name="startLookup">
        <body><![CDATA[
          var str = this.currentSearchString;
          if (!str) {
            this.clearResults(false);
            this.closePopup();
            return;
          }

          this.isSearching = true;
          this.mFirstReturn = true;
          this.mSessionReturns = this.sessionCount;
          this.mFailureItems = 0;
          this.mDefaultMatchFilled = false; // clear out our prefill state.

          // Notify the input that the search is beginning.
          this.onSearchBegin();

          // tell each session to start searching...
          for (var name in this.mSessions)
            try {
              this.mSessions[name].startSearch(str, this.searchParam, this.mLastResults[name], this.mAutoCompleteObserver);
            } catch (e) {
              --this.mSessionReturns;
              this.searchFailed();
            }
        ]]></body>
      </method>

      <!--  -->
      <method name="stopLookup">
        <body><![CDATA[
          for (var name in this.mSessions)
            this.mSessions[name].stopSearch();
        ]]></body>
      </method>

      <!--  -->
      <method name="processResults">
        <parameter name="aSessionName"/>
        <parameter name="aResults"/>
        <body><![CDATA[
          if (this.disableAutoComplete)
            return;

          const ACR = Components.interfaces.nsIAutoCompleteResult;
          var status = aResults.searchResult;
          if (status != ACR.RESULT_NOMATCH_ONGOING &&
              status != ACR.RESULT_SUCCESS_ONGOING)
            --this.mSessionReturns;

          // check the many criteria for failure
          if (aResults.errorDescription)
            ++this.mFailureItems;
          else if (status == ACR.RESULT_IGNORED ||
                   status == ACR.RESULT_FAILURE ||
                   status == ACR.RESULT_NOMATCH ||
                   status == ACR.RESULT_NOMATCH_ONGOING ||
                   aResults.matchCount == 0 ||
                   aResults.searchString != this.currentSearchString)
          {
            this.mLastResults[aSessionName] = null;
            if (this.mFirstReturn)
              this.clearResultElements(false);
            this.mFirstReturn = false;
            this.searchFailed();
            return;
          }

          if (this.mFirstReturn) {
            if (this.view.mTree)
              this.view.mTree.beginUpdateBatch();
            this.clearResultElements(false); // clear results, but don't repaint yet
          }

          // always call openPopup...we may not have opened it
          // if a previous search session didn't return enough search results.
          // it's smart and doesn't try to open itself multiple times...
          // be sure to add our result elements before calling openPopup as we need
          // to know the total # of results found so far.
          this.addResultElements(aSessionName, aResults);

          this.autoFillInput(aSessionName, aResults, false);
          if (this.mFirstReturn && this.view.mTree)
            this.view.mTree.endUpdateBatch();
          this.openPopup();
          this.mFirstReturn = false;

          // if this is the last session to return...
          if (this.mSessionReturns == 0) 
            this.postSearchCleanup();

          if (this.mFinishAfterSearch)
            this.finishAutoComplete(false, this.mFireAfterSearch, null);
        ]]></body>
      </method>

      <!-- called each time a search fails, except when failure items need
           to be displayed. If all searches have failed, clear the list
           and close the popup -->
      <method name="searchFailed">
        <body><![CDATA[
          // if all searches are done and they all failed...
          if (this.mSessionReturns == 0 && this.getResultCount() == 0) {
            if (this.minResultsForPopup == 0) {
              this.clearResults(true); // clear data and repaint empty
              this.openPopup();
            } else {
              this.closePopup(); 
            }
          }

          // if it's the last session to return, time to clean up...
          if (this.mSessionReturns == 0)
            this.postSearchCleanup();
        ]]></body>
      </method>

      <!-- does some stuff after a search is done (success or failure) -->
      <method name="postSearchCleanup">
        <body><![CDATA[
          this.isSearching = false;

          // figure out if there are no matches in all search sessions
          var failed = true;
          for (var name in this.mSessions) {
            if (this.mLastResults[name])
              failed = this.mLastResults[name].errorDescription ||
                       this.mLastResults[name].matchCount == 0;
            if (!failed)
              break;
          }
          this.noMatch = failed;

          // if we have processed all of our searches, and none of them gave us a default index,
          // then we should try to auto fill the input field with the first match.
          // note: autoFillInput is smart enough to kick out if we've already prefilled something...
          if (!this.noMatch) {
             var defaultSession = this.getDefaultSession();
             if (defaultSession)
                this.autoFillInput(defaultSession, this.mLastResults[defaultSession], true);         
          }

          // Notify the input that the search is complete.
          this.onSearchComplete();
        ]]></body>
      </method>

      <!-- when the focus exits the widget or user hits return,
           determine what value to leave in the textbox -->
      <method name="finishAutoComplete">
        <parameter name="aForceComplete"/>
        <parameter name="aFireTextCommand"/>
        <parameter name="aTriggeringEvent"/>
        <body><![CDATA[
          this.mFinishAfterSearch = false;
          this.mFireAfterSearch = false;
          if (this.mNeedToFinish && !this.disableAutoComplete) {
            // set textbox value to either override value, or default search result
            var val = this.popup.overrideValue;
            if (val) {
              this.setTextValue(val);
              this.mNeedToFinish = false;
            } else if (this.mTransientValue || 
                       !(this.forceComplete ||
                        (aForceComplete &&
                         this.mDefaultMatchFilled &&
                         this.mNeedToComplete))) {
              this.mNeedToFinish = false;
            } else if (this.isWaiting) {
              // if the user typed, the search results are out of date, so let
              // the search finish, and tell it to come back here when it's done
              this.mFinishAfterSearch = true;
              this.mFireAfterSearch = aFireTextCommand;
              return;
            } else {
              // we want to use the default item index for the first session which gave us a valid
              // default item index...
              for (var name in this.mLastResults) {
                var results = this.mLastResults[name];
                if (results && results.matchCount > 0 &&
                    !results.errorDescription && results.defaultIndex != -1)
                {
                  val = results.getValueAt(results.defaultIndex);
                  this.setTextValue(val);
                  this.mDefaultMatchFilled = true;
                  this.mNeedToFinish = false;
                  break;
                }
              }

              if (this.mNeedToFinish) {
                // if a search is happening at this juncture, bail out of this function
                // and let the search finish, and tell it to come back here when it's done
                if (this.isSearching) {
                  this.mFinishAfterSearch = true;
                  this.mFireAfterSearch = aFireTextCommand;
                  return;
                }

                this.mNeedToFinish = false;
                var defaultSession = this.getDefaultSession();
                if (defaultSession)
                {
                    // preselect the first one
                    var first = this.getSessionValueAt(defaultSession, 0);
                    this.setTextValue(first);
                    this.mDefaultMatchFilled = true;
                }
              }
            }

            this.stopLookup();

            this.closePopup();
          }

          this.mNeedToComplete = false;
          this.clearTimer();

          if (aFireTextCommand)
            this._fireEvent("textentered", this.userAction, aTriggeringEvent);
        ]]></body>
      </method>

      <!--  when the user clicks an entry in the autocomplete popup -->
      <method name="onResultClick">
        <body><![CDATA[
         // set textbox value to either override value, or the clicked result
          var errItem = this.getErrorAt(this.popup.selectedIndex);
          var val = this.popup.overrideValue;
            if (val)
              this.setTextValue(val);
          else if (this.popup.selectedIndex != -1) {
            if (errItem) {
              this.setTextValue(this.currentSearchString);
              this.mTransientValue = true;
            } else { 
              this.setTextValue(this.getResultValueAt(
                                             this.popup.selectedIndex));
            }
          }

          this.mNeedToFinish = false;
          this.mNeedToComplete = false;

          this.closePopup();

          this.currentSearchString = "";

          if (errItem)
            this._fireEvent("errorcommand", errItem);
          this._fireEvent("textentered", "clicking");
        ]]></body>
      </method>

      <!-- when the user hits escape, revert the previously typed value in the textbox -->
      <method name="undoAutoComplete">
        <body><![CDATA[
          var val = this.currentSearchString;

          var ok = this.onTextReverted();
          if ((ok || ok == undefined) && val)
            this.setTextValue(val);

          this.userAction = "typing";

          this.currentSearchString = this.value;
          this.mNeedToComplete = false;
        ]]></body>
      </method>

      <!-- convert an absolute result index into a session name/index pair -->
      <method name="convertIndexToSession">
        <parameter name="aIndex"/>
        <body><![CDATA[
          for (var name in this.mLastRows) {
            if (aIndex < this.mLastRows[name])
              return { session: name, index: aIndex };
            aIndex -= this.mLastRows[name];
          }
          return null;
        ]]></body>
      </method>

      <!-- ::::::::::::: user input handling ::::::::::::: -->

      <!--  -->
      <method name="processInput">
        <body><![CDATA[
          // stop current lookup in case it's async.
          this.stopLookup();
          // stop the queued up lookup on a timer
          this.clearTimer();

          if (this.disableAutoComplete)
            return;

          this.userAction = "typing";
          this.mFinishAfterSearch = false;
          this.mNeedToFinish = true;
          this.mTransientValue = false;
          this.mNeedToComplete = true;
          var str = this.value;
          this.currentSearchString = str;
          this.popup.clearSelection();

          var timeout = this.mIsPasting ? this.pasteTimeout : this.timeout;
          this.mAutoCompleteTimer = setTimeout(this.callListener, timeout, this, "startLookup");
        ]]></body>
      </method>

      <!--  -->
      <method name="processKeyPress">
        <parameter name="aEvent"/>
        <body><![CDATA[
          this.mLastKeyCode = aEvent.keyCode;

          var killEvent = false;

          switch (aEvent.keyCode) {
            case KeyEvent.DOM_VK_TAB:
              if (this.tabScrolling) {
                // don't kill this event if alt-tab or ctrl-tab is hit
                if (!aEvent.altKey && !aEvent.ctrlKey) {
                  killEvent = this.mMenuOpen;
                  if (killEvent)
                    this.keyNavigation(aEvent);
                }
              } 
              break;              

            case KeyEvent.DOM_VK_RETURN:

              // if this is a failure item, save it for fireErrorCommand
              var errItem = this.getErrorAt(this.popup.selectedIndex);

              killEvent = this.mMenuOpen;
              this.finishAutoComplete(true, true, aEvent);
              this.closePopup();
              if (errItem) {
                  this._fireEvent("errorcommand", errItem);
              }
              break;

            case KeyEvent.DOM_VK_ESCAPE:
              this.clearTimer();
              killEvent = this.mMenuOpen;
              this.undoAutoComplete();
              this.closePopup();
              break;

            case KeyEvent.DOM_VK_LEFT:
            case KeyEvent.DOM_VK_RIGHT:
            case KeyEvent.DOM_VK_HOME:
            case KeyEvent.DOM_VK_END:
              this.finishAutoComplete(true, false, aEvent);
              this.clearTimer();
              this.closePopup();
              break;

            case KeyEvent.DOM_VK_DOWN:
              if (!aEvent.altKey) {
                this.clearTimer();
                killEvent = this.keyNavigation(aEvent);
                break;
              }
            // Alt+Down falls through to history popup toggling code

            case KeyEvent.DOM_VK_F4:
              if (!aEvent.ctrlKey && !aEvent.shiftKey && this.getAttribute("enablehistory") == "true") {
                var historyPopup = document.getAnonymousElementByAttribute(this, "anonid", "historydropmarker");
                if (historyPopup)
                  historyPopup.showPopup();
                else
                  historyPopup.hidePopup();
              }
              break;
            case KeyEvent.DOM_VK_PAGE_UP:
            case KeyEvent.DOM_VK_PAGE_DOWN:
            case KeyEvent.DOM_VK_UP:
              if (!aEvent.ctrlKey && !aEvent.metaKey) {
                this.clearTimer();
                killEvent = this.keyNavigation(aEvent);
              }
              break;

            case KeyEvent.DOM_VK_BACK_SPACE:
              if (!aEvent.ctrlKey && !aEvent.altKey && !aEvent.shiftKey &&
                  this.selectionStart == this.currentSearchString.length &&
                  this.selectionEnd == this.value.length &&
                  this.mDefaultMatchFilled) {
                this.mDefaultMatchFilled = false;
                this.value = this.currentSearchString;
              }

              if (!/Mac/.test(navigator.platform))
                break;
            case KeyEvent.DOM_VK_DELETE:
              if (/Mac/.test(navigator.platform) && !aEvent.shiftKey)
                break;

              if (this.mMenuOpen && this.popup.selectedIndex != -1) {
                var obj = this.convertIndexToSession(this.popup.selectedIndex);
                if (obj) {
                  var result = this.mLastResults[obj.session];
                  if (!result.errorDescription) {
                    var count = result.matchCount;
                    result.removeValueAt(obj.index, true);
                    this.view.updateResults(this.popup.selectedIndex, result.matchCount - count);
                    killEvent = true;
                  }
                }
              }
              break;
          }

          if (killEvent) {
            aEvent.preventDefault();
            aEvent.stopPropagation();
          }

          return true;
        ]]></body>
      </method>

      <!--  -->
      <method name="processStartComposition">
        <body><![CDATA[
          this.finishAutoComplete(false, false, null);
          this.clearTimer();
          this.closePopup();
        ]]></body>
      </method>

      <!--  -->
      <method name="keyNavigation">
        <parameter name="aEvent"/>
        <body><![CDATA[
          var k = aEvent.keyCode;
          if (k == KeyEvent.DOM_VK_TAB ||
              k == KeyEvent.DOM_VK_UP || k == KeyEvent.DOM_VK_DOWN ||
              k == KeyEvent.DOM_VK_PAGE_UP || k == KeyEvent.DOM_VK_PAGE_DOWN)
          {
            if (!this.mMenuOpen) {
              // Original xpfe style was to allow the up and down keys to have
              // their default Mac action if the popup could not be opened.
              // For compatibility for toolkit we now have to predict which
              // keys have a default action that we can always allow to fire.
              if (/Mac/.test(navigator.platform) &&
                  ((k == KeyEvent.DOM_VK_UP &&
                   (this.selectionStart != 0 ||
                    this.selectionEnd != 0)) ||
                  (k == KeyEvent.DOM_VK_DOWN &&
                   (this.selectionStart != this.value.length ||
                    this.selectionEnd != this.value.length))))
                return false;
              if (this.currentSearchString != this.value) {
                 this.processInput();
                 return true;
              }
              if (this.view.rowCount < this.minResultsForPopup)
                return true; // used to be false, see above

              this.mNeedToFinish = true;
              this.openPopup();
              return true;
            }

            this.userAction = "scrolling";
            this.mNeedToComplete = false;

            var reverse = k == KeyEvent.DOM_VK_TAB && aEvent.shiftKey ||
                          k == KeyEvent.DOM_VK_UP ||
                          k == KeyEvent.DOM_VK_PAGE_UP;
            var page = k == KeyEvent.DOM_VK_PAGE_UP ||
                       k == KeyEvent.DOM_VK_PAGE_DOWN;
            var selected = this.popup.selectBy(reverse, page);

            // determine which value to place in the textbox
            this.ignoreInputEvent = true;
            if (selected != -1) {
              if (this.getErrorAt(selected)) {
                if (this.currentSearchString)
                  this.setTextValue(this.currentSearchString);
              } else {
                this.setTextValue(this.getResultValueAt(selected));
              }
              this.mTransientValue = true;
            } else {
              if (this.currentSearchString)
                this.setTextValue(this.currentSearchString);
              this.mTransientValue = false;
            }

            // move cursor to the end
            this.mInputElt.setSelectionRange(this.value.length, this.value.length);
            this.ignoreInputEvent = false;
          }
          return true;
        ]]></body>
      </method>

      <!-- while the user is typing, fill the textbox with the "default" value
           if one can be assumed, and select the end of the text -->
      <method name="autoFillInput">
        <parameter name="aSessionName"/>
        <parameter name="aResults"/>
        <parameter name="aUseFirstMatchIfNoDefault"/>
        <body><![CDATA[
          if (this.mInputElt.selectionEnd < this.currentSearchString.length ||
              this.mDefaultMatchFilled)
            return;

          if (!this.mFinishAfterSearch &&
              (this.autoFill || this.completeDefaultIndex) && 
              this.mLastKeyCode != KeyEvent.DOM_VK_BACK_SPACE &&
              this.mLastKeyCode != KeyEvent.DOM_VK_DELETE) {
            var indexToUse = aResults.defaultIndex;
            if (aUseFirstMatchIfNoDefault && indexToUse == -1)
              indexToUse = 0; 

            if (indexToUse != -1) {
              var resultValue = this.getSessionValueAt(aSessionName, indexToUse);
              var match = resultValue.toLowerCase();
              var entry = this.currentSearchString.toLowerCase();
              this.ignoreInputEvent = true;
              if (match.indexOf(entry) == 0) {
                var endPoint = this.value.length;
                this.setTextValue(this.value + resultValue.substr(endPoint));
                this.mInputElt.setSelectionRange(endPoint, this.value.length);
              } else {
                if (this.completeDefaultIndex) {
                  this.setTextValue(this.value + " >> " + resultValue);
                  this.mInputElt.setSelectionRange(entry.length, this.value.length);
                } else {
                  var postIndex = resultValue.indexOf(this.value);
                  if (postIndex >= 0) {
                    var startPt = this.value.length;
                    this.setTextValue(this.value + 
                                      resultValue.substr(startPt+postIndex));
                    this.mInputElt.setSelectionRange(startPt, this.value.length);
                  }
                }
              }
              this.mNeedToComplete = true;
              this.ignoreInputEvent = false;
              this.mDefaultMatchFilled = true;
            }
          } 
        ]]></body>
      </method>

      <!-- ::::::::::::: popup and tree ::::::::::::: -->

      <!--  -->
      <method name="openPopup">
        <body><![CDATA[
          if (!this.mMenuOpen && this.focused &&
              (this.getResultCount() >= this.minResultsForPopup ||
               this.mFailureItems)) {
            var w = this.boxObject.width;
            if (w != this.popup.boxObject.width)
              this.popup.setAttribute("width", w);
            this.popup.showPopup(this, -1, -1, "popup", "bottomleft", "topleft");
            this.mMenuOpen = true;
          }
        ]]></body>
      </method>

      <!--  -->
      <method name="closePopup">
        <body><![CDATA[
          if (this.popup && this.mMenuOpen) {
            this.popup.hidePopup();
            this.mMenuOpen = false;
          }
        ]]></body>
      </method>

      <!--  -->
      <method name="addResultElements">
        <parameter name="aSession"/>
        <parameter name="aResults"/>
        <body><![CDATA[
          var count = aResults.errorDescription ? 1 : aResults.matchCount;
          if (this.focused && this.showPopup) {
            var row = 0;
            for (var name in this.mSessions) {
              row += this.mLastRows[name];
              if (name == aSession)
                break;
            }
            this.view.updateResults(row, count - this.mLastRows[name]);
            this.popup.adjustHeight();
          }
          this.mLastResults[aSession] = aResults;
          this.mLastRows[aSession] = count;
        ]]></body>
      </method>

      <!--  -->
      <method name="clearResultElements">
        <parameter name="aInvalidate"/>
        <body><![CDATA[
          for (var name in this.mSessions)
            this.mLastRows[name] = 0;
          this.view.clearResults();
          if (aInvalidate)
            this.popup.adjustHeight();

          this.noMatch = true;
        ]]></body>
      </method>

      <!--  -->
      <method name="setTextValue">
        <parameter name="aValue"/>
        <body><![CDATA[
          this.value = aValue;

          // Completing a result should simulate the user typing the result,
          // so fire an input event.
          var evt = document.createEvent("UIEvents");
          evt.initUIEvent("input", true, false, window, 0);
          var oldIgnoreInput = this.ignoreInputEvent;
          this.ignoreInputEvent = true;
          this.dispatchEvent(evt);
          this.ignoreInputEvent = oldIgnoreInput;
        ]]></body>
      </method>

      <!--  -->
      <method name="clearResultData">
        <body><![CDATA[
          for (var name in this.mSessions)
            this.mLastResults[name] = null;
        ]]></body>
      </method>

      <!-- ::::::::::::: miscellaneous ::::::::::::: -->

      <!--  -->
      <method name="ifSetAttribute">
        <parameter name="aAttr"/>
        <parameter name="aVal"/>
        <body><![CDATA[
          if (!this.hasAttribute(aAttr))
            this.setAttribute(aAttr, aVal);
        ]]></body>
      </method>

      <!--  -->
      <method name="clearTimer">
        <body><![CDATA[
          if (this.mAutoCompleteTimer) {
            clearTimeout(this.mAutoCompleteTimer);
            this.mAutoCompleteTimer = 0;
          }
        ]]></body>
      </method>

      <!-- ::::::::::::: event dispatching ::::::::::::: -->

      <method name="_fireEvent">
        <parameter name="aEventType"/>
        <parameter name="aEventParam"/>
        <parameter name="aTriggeringEvent"/>
        <body>
        <![CDATA[
          var noCancel = true;
          // handle any xml attribute event handlers
          var handler = this.getAttribute("on"+aEventType);
          if (handler) {
            var fn = new Function("eventParam", "domEvent", handler);
            var returned = fn.apply(this, [aEventParam, aTriggeringEvent]);
            if (returned == false)
              noCancel = false;
          }

          return noCancel;
        ]]>
        </body>
      </method>

      <!-- =================== TREE VIEW =================== -->

      <field name="view"><![CDATA[
        ({
          mTextbox: this,
          mTree: null,
          mSelection: null,
          mRowCount: 0,

          clearResults: function()
          {
            var oldCount = this.mRowCount;
            this.mRowCount = 0;  

            if (this.mTree) {
              this.mTree.rowCountChanged(0, -oldCount);
              this.mTree.scrollToRow(0);
            }
          },

          updateResults: function(aRow, aCount)
          {
            this.mRowCount += aCount;

            if (this.mTree)
              this.mTree.rowCountChanged(aRow, aCount);
          },

          //////////////////////////////////////////////////////////
          // nsIAutoCompleteController interface

          // this is the only method required by the treebody mouseup handler
          handleEnter: function(aIsPopupSelection) {
            this.mTextbox.onResultClick();
          },

          //////////////////////////////////////////////////////////
          // nsITreeView interface

          get rowCount() {
            return this.mRowCount;
          },

          get selection() {
            return this.mSelection;
          },

          set selection(aVal) {
            return this.mSelection = aVal;
          },

          setTree: function(aTree)
          {
            this.mTree = aTree;
          },

          getCellText: function(aRow, aCol)
          {
            for (var name in this.mTextbox.mSessions) {
              if (aRow < this.mTextbox.mLastRows[name]) {
                var result = this.mTextbox.mLastResults[name];
                switch (aCol.id) {
                  case "treecolAutoCompleteValue":
                    return result.errorDescription || result.getLabelAt(aRow);
                  case "treecolAutoCompleteComment":
                    if (!result.errorDescription)
                      return result.getCommentAt(aRow);
                  default:
                    return "";
                }
              }
              aRow -= this.mTextbox.mLastRows[name];
            }
            return "";
          },

          getRowProperties: function(aIndex)
          {
            return "";
          },

          getCellProperties: function(aIndex, aCol)
          {
            // for the value column, append nsIAutoCompleteItem::className
            // to the property list so that we can style this column
            // using that property
            if (aCol.id == "treecolAutoCompleteValue") {
              for (var name in this.mTextbox.mSessions) {
                if (aIndex < this.mTextbox.mLastRows[name]) {
                  var result = this.mTextbox.mLastResults[name];
                  if (result.errorDescription)
                    return "";
                  return result.getStyleAt(aIndex);
                }
                aIndex -= this.mTextbox.mLastRows[name];
              }
            }
            return "";
          },

          getColumnProperties: function(aCol)
          {
            return "";
          },

          getImageSrc: function(aRow, aCol)
          {
            if (aCol.id == "treecolAutoCompleteValue") {
              for (var name in this.mTextbox.mSessions) {
                if (aRow < this.mTextbox.mLastRows[name]) {
                  var result = this.mTextbox.mLastResults[name];
                  if (result.errorDescription)
                    return "";
                  return result.getImageAt(aRow);
                }
                aRow -= this.mTextbox.mLastRows[name];
              }
            }
            return "";
          },

          getParentIndex: function(aRowIndex) { },
          hasNextSibling: function(aRowIndex, aAfterIndex) { },
          getLevel: function(aIndex) {},
          getProgressMode: function(aRow, aCol) {},
          getCellValue: function(aRow, aCol) {},
          isContainer: function(aIndex) {},
          isContainerOpen: function(aIndex) {},
          isContainerEmpty: function(aIndex) {},
          isSeparator: function(aIndex) {},
          isSorted: function() {},
          toggleOpenState: function(aIndex) {},
          selectionChanged: function() {},
          cycleHeader: function(aCol) {},
          cycleCell: function(aRow, aCol) {},
          isEditable: function(aRow, aCol) {},
          isSelectable: function(aRow, aCol) {},
          setCellValue: function(aRow, aCol, aValue) {},
          setCellText: function(aRow, aCol, aValue) {},
          performAction: function(aAction) {},
          performActionOnRow: function(aAction, aRow) {},
          performActionOnCell: function(aAction, aRow, aCol) {}
        });
      ]]></field>

    </implementation>

    <handlers>
      <handler event="input"
               action="if (!this.ignoreInputEvent) this.processInput();"/>

      <handler event="keypress" phase="capturing"
                action="return this.processKeyPress(event);"/>

      <handler event="compositionstart" phase="capturing"
                action="this.processStartComposition();"/>

      <handler event="focus" phase="capturing"
               action="this.userAction = 'typing';"/>

      <handler event="blur" phase="capturing"
               action="if ( !(this.ignoreBlurWhileSearching &amp;&amp; this.isSearching) ) {this.userAction = 'none'; this.finishAutoComplete(false, false, event);}"/>

      <handler event="mousedown" phase="capturing"
               action="if ( !this.mMenuOpen ) this.finishAutoComplete(false, false, event);"/>
    </handlers>
  </binding>

  <binding id="autocomplete-result-popup" extends="chrome://global/content/bindings/popup.xml#popup">
    <resources>
      <stylesheet src="chrome://communicator/content/autocomplete.css"/>
      <stylesheet src="chrome://global/skin/autocomplete.css"/>
    </resources>

    <content ignorekeys="true" level="top">
      <xul:tree anonid="tree" class="autocomplete-tree plain" flex="1">
        <xul:treecols anonid="treecols">
          <xul:treecol class="autocomplete-treecol" id="treecolAutoCompleteValue" flex="2"/>
          <xul:treecol class="autocomplete-treecol" id="treecolAutoCompleteComment" flex="1" hidden="true"/>
        </xul:treecols>
        <xul:treechildren anonid="treebody" class="autocomplete-treebody"/>
      </xul:tree>
    </content>

    <implementation implements="nsIAutoCompletePopup">
      <constructor><![CDATA[
        if (this.textbox && this.textbox.view)
          this.initialize();
      ]]></constructor>

      <destructor><![CDATA[
        if (this.view)
          this.tree.view = null;
      ]]></destructor>

      <field name="textbox">
        document.getBindingParent(this);
      </field>

      <field name="tree">
        document.getAnonymousElementByAttribute(this, "anonid", "tree");
      </field>

      <field name="treecols">
        document.getAnonymousElementByAttribute(this, "anonid", "treecols");
      </field>

      <field name="treebody">
        document.getAnonymousElementByAttribute(this, "anonid", "treebody");
      </field>

      <field name="view">
        null
      </field>

      <!-- Setting tree.view doesn't always immediately create a selection,
           so we ensure the selection by asking the tree for the view. Note:
           this.view.selection is quicker if we know the selection exists. -->
      <property name="selection" onget="return this.tree.view.selection;"/>

     <property name="pageCount"
               onget="return this.tree.treeBoxObject.getPageLength();"/>

     <field name="maxRows">0</field>
     <field name="mLastRows">0</field>

      <method name="initialize">
        <body><![CDATA[
        this.showCommentColumn = this.textbox.showCommentColumn;
        this.tree.view = this.textbox.view;
        this.view = this.textbox.view;
        this.maxRows = this.textbox.maxRows;
        ]]></body>
      </method>

      <property name="showCommentColumn"
                onget="return !this.treecols.lastChild.hidden;"
                onset="this.treecols.lastChild.hidden = !val; return val;"/>

      <method name="adjustHeight">
        <body><![CDATA[
          // detect the desired height of the tree
          var bx = this.tree.treeBoxObject;
          var view = this.view;
          var rows = this.maxRows || 6;
          if (!view.rowCount || (rows && view.rowCount < rows))
            rows = view.rowCount;

          var height = rows * bx.rowHeight;

          if (height == 0)
            this.tree.setAttribute("collapsed", "true");
          else {
            if (this.tree.hasAttribute("collapsed"))
              this.tree.removeAttribute("collapsed");
            this.tree.setAttribute("height", height);
          }
        ]]></body>
      </method>

      <method name="clearSelection">
        <body>
          this.selection.clearSelection();
        </body>
      </method>

      <method name="getNextIndex">
        <parameter name="aReverse"/>
        <parameter name="aPage"/>
        <parameter name="aIndex"/>
        <parameter name="aMaxRow"/>
        <body><![CDATA[
          if (aMaxRow < 0)
            return -1;

          if (aIndex == -1)
            return aReverse ? aMaxRow : 0;
          if (aIndex == (aReverse ? 0 : aMaxRow))
            return -1;

          var amount = aPage ? this.pageCount - 1 : 1;
          aIndex = aReverse ? aIndex - amount : aIndex + amount;
          if (aIndex > aMaxRow)
            return aMaxRow;
          if (aIndex < 0)
            return 0;
          return aIndex;
        ]]></body>
      </method>

      <!-- =================== nsIAutoCompletePopup =================== -->

      <field name="input">
        null
      </field>

      <!-- This property is meant to be overriden by bindings extending
           this one.  When the user selects an item from the list by
           hitting enter or clicking, this method can set the value
           of the textbox to a different value if it wants to. -->
      <property name="overrideValue" readonly="true" onget="return null;"/>

      <property name="selectedIndex">
        <getter>
          if (!this.view || !this.selection.count)
            return -1;
          var start = {}, end = {};
          this.view.selection.getRangeAt(0, start, end);
          return start.value;
        </getter>
        <setter>
          if (this.view) {
            this.selection.select(val);
            if (val >= 0) {
              this.view.selection.currentIndex = -1;
              this.tree.treeBoxObject.ensureRowIsVisible(val);
            }
          }
          return val;
        </setter>
      </property>

      <property name="popupOpen" onget="return !!this.input;" readonly="true"/>

      <method name="openAutocompletePopup">
        <parameter name="aInput"/>
        <parameter name="aElement"/>
        <body><![CDATA[
          if (!this.input) {
            this.tree.view = aInput.controller;
            this.view = this.tree.view;
            this.showCommentColumn = aInput.showCommentColumn;
            this.maxRows = aInput.maxRows;
            this.invalidate();

            var viewer = aElement
                .ownerDocument
                .defaultView
                .QueryInterface(Components.interfaces.nsIInterfaceRequestor)
                .getInterface(Components.interfaces.nsIWebNavigation)
                .QueryInterface(Components.interfaces.nsIDocShell)
                .contentViewer;
            var rect = aElement.getBoundingClientRect();
            var width = Math.round((rect.right - rect.left) * viewer.fullZoom);
            this.setAttribute("width", width > 100 ? width : 100);
            // Adjust the direction (which is not inherited) of the autocomplete
            // popup list, based on the textbox direction. (Bug 707039)
            this.style.direction = aElement.ownerDocument.defaultView
                                           .getComputedStyle(aElement)
                                           .direction;
            this.popupBoxObject.setConsumeRollupEvent(aInput.consumeRollupEvent
              ? PopupBoxObject.ROLLUP_CONSUME
              : PopupBoxObject.ROLLUP_NO_CONSUME);
            this.openPopup(aElement, "after_start", 0, 0, false, false);
            if (this.state != "closed")
              this.input = aInput;
          }
        ]]></body>
      </method>

      <method name="closePopup">
        <body>
          this.hidePopup();
        </body>
      </method>

      <method name="invalidate">
        <body>
          if (this.view)
            this.adjustHeight();
          this.tree.treeBoxObject.invalidate();
        </body>
      </method>

      <method name="selectBy">
        <parameter name="aReverse"/>
        <parameter name="aPage"/>
        <body><![CDATA[
          try {
            return this.selectedIndex = this.getNextIndex(aReverse, aPage, this.selectedIndex, this.view.rowCount - 1);
          } catch (ex) {
            // do nothing - occasionally timer-related js errors happen here
            // e.g. "this.selectedIndex has no properties", when you type fast and hit a
            // navigation key before this popup has opened
            return -1;
          }
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="popupshowing">
        if (this.textbox)
          this.textbox.mMenuOpen = true;
      </handler>

      <handler event="popuphiding">
        if (this.textbox)
          this.textbox.mMenuOpen = false;
        this.clearSelection();
        this.input = null;
      </handler>
    </handlers>
  </binding>

  <binding id="autocomplete-treebody">
    <implementation>
      <field name="popup">document.getBindingParent(this);</field>

      <field name="mLastMoveTime">Date.now()</field>
    </implementation>

    <handlers>
      <handler event="mouseout" action="this.popup.selectedIndex = -1;"/>

      <handler event="mouseup"><![CDATA[
        var rc = this.parentNode.treeBoxObject.getRowAt(event.clientX, event.clientY);
        if (rc != -1) {
          this.popup.selectedIndex = rc;
          this.popup.view.handleEnter(true);
        }
      ]]></handler>

      <handler event="mousemove"><![CDATA[
        if (Date.now() - this.mLastMoveTime > 30) {
          var rc = this.parentNode.treeBoxObject.getRowAt(event.clientX, event.clientY);
          if (rc != -1 && rc != this.popup.selectedIndex) 
            this.popup.selectedIndex = rc;
          this.mLastMoveTime = Date.now();
        }
      ]]></handler>
    </handlers>
  </binding>

  <binding id="autocomplete-history-popup"
           extends="chrome://global/content/bindings/popup.xml#popup-scrollbars">
    <resources>
      <stylesheet src="chrome://communicator/content/autocomplete.css"/>
      <stylesheet src="chrome://global/skin/autocomplete.css"/>
    </resources>

    <implementation>
      <method name="removeOpenAttribute">
        <parameter name="parentNode"/>
        <body><![CDATA[
          parentNode.removeAttribute("open");
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="popuphiding"><![CDATA[
        setTimeout(this.removeOpenAttribute, 0, this.parentNode);
      ]]></handler>
    </handlers>
  </binding>

  <binding id="history-dropmarker" extends="chrome://global/content/bindings/general.xml#dropmarker">

    <implementation>
      <method name="showPopup">
        <body><![CDATA[
          var textbox = document.getBindingParent(this);
          var kids = textbox.getElementsByClassName("autocomplete-history-popup");
          if (kids.item(0) && textbox.getAttribute("open") != "true") { // Open history popup
            var w = textbox.boxObject.width;
            if (w != kids[0].boxObject.width)
              kids[0].width = w;
            kids[0].showPopup(textbox, -1, -1, "popup", "bottomleft", "topleft");
            textbox.setAttribute("open", "true");
          }
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="mousedown"><![CDATA[
        this.showPopup();
      ]]></handler>
    </handlers>
  </binding>

</bindings>
<?xml version="1.0"?>
<?xml-stylesheet href="link.css" type="text/css"?>
<root xmlns:xlink="http://www.w3.org/1999/xlink">
  <p>Testing simple XLinks that must fire immediately on load.</p>
  <mylink xlink:type="simple" xlink:actuate="onLoad" xlink:show="new" xlink:href="resource:/res/samples/test0.html">
Must not open automatically, illegal</mylink>
  <mylink xlink:type="simple" xlink:actuate="onLoad" xlink:show="new" xlink:href="http://www.mozilla.org">
Must open automatically in new window (www.mozilla.org)</mylink>
  <mylink xlink:type="simple" xlink:actuate="onLoad" xlink:show="new" xlink:href="http://www.mozillazine.org">
Must open automatically in new window (www.mozillazine.org)</mylink>
  <mylink xlink:type="simple" xlink:actuate="onLoad" xlink:show="replace" xlink:href="http://www.mozilla.org/mozorg.html">
Must load automatically in same window - "Refresh" (At a glance)</mylink>
  <mylink xlink:type="simple" xlink:actuate="onLoad" xlink:show="replace" xlink:href="http://www.netscape.com">
Must not load automatically, one refresh link fired already (www.netscape.com)</mylink>
</root>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.19 $"/>
		<generation date="$Date: 2008/05/25 01:05:50 $"/>
		<language type="az"/> 
		<territory type="AZ"/> 
	</identity>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2008/05/25 01:05:50 $"/>
		<language type="az"/> 
		<script type="Cyrl"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cyrl</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.2 $"/>
		<generation date="$Date: 2008/05/25 01:05:50 $"/>
		<language type="az"/> 
        <script type="Latn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:17 $"/>
        <language type="az"/>
    </identity>
</ldml>
<updates
<math></math><svg></svg><html></html><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"
   "xhtml1-frameset.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<base href="about:blank" target="Frame1"/>
<title>NIST DOM HTML Test - Base2</title>
</head>
<frameset cols="20, 80"  onload="parent.loadComplete()">
<frameset rows="100, 200">
<frame marginheight="10" marginwidth="5" noresize="noresize" name="Frame1" frameborder="1" scrolling="yes" src="right.png" />
</frameset>
<frame src="w3c_main.png" />
</frameset>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<base href="about:blank"/>
<title>NIST DOM HTML Test - Base</title>
</head>
<body onload="parent.loadComplete()">
<p>Some Text</p>
</body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_height="wrap_content"
              android:layout_width="match_parent"
              android:orientation="vertical">

  <org.mozilla.gecko.widget.BasicColorPicker android:id="@+id/colorpicker"
                                             android:layout_height="0dip"
                                             android:layout_weight="1"
                                             android:drawSelectorOnTop="true"
                                             android:choiceMode="singleChoice"
                                             android:divider="@android:color/transparent"
                                             android:dividerHeight="0dip"
                                             android:listSelector="#22FFFFFF"
                                             android:layout_width="match_parent"/>

</LinearLayout>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="bas"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="bem"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:18 $"/>
        <language type="be"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="bez"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:19 $"/>
        <language type="bg"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings [
<!ENTITY % browserDTD SYSTEM "chrome://browser/locale/browser.dtd">
%browserDTD;
]>

<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="richlistbox-batch" extends="chrome://global/content/bindings/richlistbox.xml#richlistbox">
    <handlers>
      <handler event="scroll">
        <![CDATA[
          // if there no more items to insert, just return early
          if (this._items.length == 0)
            return;

          if (this._contentScrollHeight == -1) {
            this._contentScrollHeight = this.scrollBoxObject.scrolledHeight;
          }

          let y = this.scrollBoxObject.positionY;
          let scrollRatio = (y + this._childrenHeight) / this._contentScrollHeight;

          // If we're scrolled 80% to the bottom of the list, append the next
          // set of items
          if (scrollRatio > 0.8)
            this._insertItems();
        ]]>
      </handler>
    </handlers>
    <implementation>
      <!-- Number of elements to add to the list initially. If there are more
           than this many elements to display, only add them to the list once
           the user has scrolled towards them. This is a performance
           optimization to avoid locking up while attempting to append hundreds
           of nodes to our richlistbox.
      -->
      <property name="batchSize" readonly="true" onget="return this.getAttribute('batch')"/>

      <field name="_childrenHeight">this.scrollBoxObject.height;</field>
      <field name="_items">[]</field>

      <method name="setItems">
        <parameter name="aItems"/>
        <body><![CDATA[
          this._items = aItems;
          this._insertItems();
        ]]></body>
      </method>

      <method name="_insertItems">
        <body><![CDATA[
          let items = this._items.splice(0, this.batchSize);
          if (!items.length)
            return; // no items to insert

          let count = items.length;
          for (let i = 0; i<count; i++)
            this.appendChild(items[i]);


          // make sure we recalculate the scrollHeight of the content
          this._contentScrollHeight = -1;
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="richlistbox-contextmenu" extends="chrome://global/content/bindings/richlistbox.xml#richlistbox">
    <handlers>
      <handler event="click" phase="bubble">
        <![CDATA[
          ContextMenuUI.hide();
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="richlistitem" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <handlers>
      <handler event="mousedown" phase="capturing">
        <![CDATA[
          // We'll get this if the user is interacting via the mouse
          let domUtils = Components.classes["@mozilla.org/inspector/dom-utils;1"].
                                           getService(Ci.inIDOMUtils);
          domUtils.setContentState(this, 0x00000001);
        ]]>
      </handler>
      <handler event="click" phase="capturing">
        <![CDATA[
          // allow normal mouse event processing
          if (!InputSourceHelper || InputSourceHelper.isPrecise)
            return;
          // trap this here, we'll rely on tap events
          // event.stopPropagation();
        ]]>
      </handler>
      <handler event="touchstart" phase="capturing">
        <![CDATA[
          // touch input event
          let domUtils = Components.classes["@mozilla.org/inspector/dom-utils;1"].
                                           getService(Ci.inIDOMUtils);
          domUtils.setContentState(this, 0x00000001);
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="menulist" display="xul:box" extends="chrome://global/content/bindings/menulist.xml#menulist">
    <handlers>
      <handler event="mousedown" phase="capturing">
        <![CDATA[
          // Stop the normal menupopup from appearing
          event.stopPropagation();
        ]]>
      </handler>

      <handler event="click" button="0">
        <![CDATA[
          if (this.disabled || this.itemCount == 0)
            return;

          this.focus();
          MenuControlUI.show(this);
        ]]>
      </handler>

      <handler event="command" phase="capturing">
        <![CDATA[
          // The dropmark (button) fires a command event too. Don't forward that.
          // Just forward the menuitem command events, which the toolkit version does.
          if (event.target.parentNode.parentNode != this)
            event.stopPropagation();
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="chrome-select-option">
    <content orient="horizontal" flex="1">
      <xul:image class="chrome-select-option-image" anonid="check"/>
      <xul:label anonid="label" xbl:inherits="value=label"/>
    </content>

    <implementation>
      <property name="selected">
        <getter>
          <![CDATA[
            return this.hasAttribute("selected");
          ]]>
        </getter>
        <setter>
          <![CDATA[
            if (val)
              this.setAttribute("selected", "true");
            else
              this.removeAttribute("selected");
            return val;
          ]]>
        </setter>
      </property>
    </implementation>
  </binding>

  <binding id="select-button" extends="xul:box">
    <content>
      <svg:svg width="11px" version="1.1" xmlns="http://www.w3.org/2000/svg" style="position: absolute; top: -moz-calc(50% - 2px); left: 4px;">
        <svg:polyline points="1 1 5 6 9 1" stroke="#414141" stroke-width="2" stroke-linecap="round" fill="transparent" stroke-linejoin="round"/>
      </svg:svg>
    </content>
  </binding>

  <binding id="textbox" extends="chrome://global/content/bindings/textbox.xml#textbox">
    <handlers>
      <handler event="contextmenu" phase="capturing">
        <![CDATA[
          let box = this.inputField.parentNode;
          box.showContextMenu(this, event, false);
        ]]>
      </handler>
      <handler event="click" phase="capturing">
        <![CDATA[
        if (event.mozInputSource == Ci.nsIDOMMouseEvent.MOZ_SOURCE_TOUCH) {
          if (typeof SelectionHelperUI != 'undefined') {
            SelectionHelperUI.attachEditSession(ChromeSelectionHandler,
                event.clientX, event.clientY, this);
          } else {
            // If we don't have access to SelectionHelperUI then we are using this
            // binding for browser content (e.g. about:config)
            Services.obs.notifyObservers(event, "attach_edit_session_to_content", "");
          }
        }
      ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="search-textbox" extends="chrome://global/content/bindings/textbox.xml#search-textbox">
    <implementation>
      <field name="_searchClear">
        <![CDATA[
          document.getAnonymousElementByAttribute(this, "class", "textbox-search-clear");
        ]]>
      </field>
    </implementation>

    <handlers>
      <handler event="contextmenu" phase="capturing">
        <![CDATA[
          let box = this.inputField.parentNode;
          box.showContextMenu(this, event, false);
        ]]>
      </handler>

      <handler event="text" phase="bubbling"><![CDATA[
        // Listen for composition update, some VKB that does suggestions does not
        // update directly the content of the field but in this case we want to
        // search as soon as something is entered in the field
        let evt = document.createEvent("Event");
        evt.initEvent("input", true, false);
        this.dispatchEvent(evt);
      ]]></handler>

      <handler event="click" phase="bubbling"><![CDATA[
        // bug 629661. To reset the autosuggestions mechanism of Android, the
        // textfield need to reset the IME state
        if (event.originalTarget == this._searchClear) {
          setTimeout(function(self) {
            try {
              let imeEditor = self.inputField.QueryInterface(Ci.nsIDOMNSEditableElement)
                                             .editor
                                             .QueryInterface(Ci.nsIEditorIMESupport);
              if (imeEditor.composing)
                imeEditor.forceCompositionEnd();
            } catch(e) {}
          }, 0, this);
        }
      ]]></handler>
    </handlers>
  </binding>

  <binding id="input-box" extends="xul:box">
    <implementation>
      <method name="showContextMenu">
        <parameter name="aTextbox"/>
        <parameter name="aEvent"/>
        <parameter name="aIgnoreReadOnly"/>
        <body><![CDATA[
          let selectionStart = aTextbox.selectionStart;
          let selectionEnd = aTextbox.selectionEnd;

          let json = { types: ["input-text"], string: "" };
          if (selectionStart != selectionEnd) {
            json.types.push("cut");
            json.types.push("copy");
          }

          if (selectionStart > 0 || selectionEnd < aTextbox.textLength)
            json.types.push("select-all");

          let clipboard = Components.classes["@mozilla.org/widget/clipboard;1"].
                                            getService(Ci.nsIClipboard);
          let flavors = ["text/unicode"];
          let hasData = clipboard.hasDataMatchingFlavors(flavors, flavors.length, Ci.nsIClipboard.kGlobalClipboard);

          if (hasData && (!aTextbox.readOnly || aIgnoreReadOnly)) {
            json.types.push("paste");
            if (aTextbox.type == "url") {
              json.types.push("paste-url");
            }
          }
          json.xPos = aEvent.clientX;
          json.yPos = aEvent.clientY;
          json.source = aEvent.mozInputSource;
          ContextMenuUI.showContextMenu({ target: aTextbox, json: json });
        ]]></body>
      </method>
    </implementation>
    <handlers>
      <handler event="click" phase="capturing">
        <![CDATA[
          if (event.mozInputSource == Ci.nsIDOMMouseEvent.MOZ_SOURCE_TOUCH) {
            if (typeof SelectionHelperUI != 'undefined') {
              SelectionHelperUI.attachEditSession(ChromeSelectionHandler,
                  event.clientX, event.clientY, event.target);
            } else {
              // If we don't have access to SelectionHelperUI then we are using this
              // binding for browser content (e.g. about:config)
              Services.obs.notifyObservers(event, "attach_edit_session_to_content", "");
            }
          }
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="line-wrap-label" extends="chrome://global/content/bindings/text.xml#text-label">
    <implementation>
      <constructor>
        <![CDATA[
          if (this.hasAttribute("value")) {
            this.textContent = this.getAttribute("value");
            this.removeAttribute("value");
          }
        ]]>
      </constructor>
      <property name="value">
        <getter>
          <![CDATA[
            return this.textContent;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            return (this.textContent = val);
          ]]>
        </setter>
      </property>
    </implementation>
  </binding>
  <binding id="line-wrap-text-link" extends="chrome://global/content/bindings/text.xml#text-link">
    <implementation>
      <constructor>
        <![CDATA[
          if (this.hasAttribute("value")) {
            this.textContent = this.getAttribute("value");
            this.removeAttribute("value");
          }
        ]]>
      </constructor>
      <property name="value">
        <getter>
          <![CDATA[
            return this.textContent;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            return (this.textContent = val);
          ]]>
        </setter>
      </property>
    </implementation>
  </binding>

</bindings>
<?xml version="1.0"?>
<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xbl="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  <binding id="custom"
           extends="chrome://mozapps/content/extensions/setting.xml#setting-base">
    <content>
      <xul:vbox>
        <xul:hbox class="preferences-alignment">
          <xul:label anonid="label" class="preferences-title" flex="1" xbl:inherits="xbl:text=title"/>
        </xul:hbox>
        <xul:description class="preferences-description" flex="1" xbl:inherits="xbl:text=desc"/>
      </xul:vbox>
      <xul:hbox class="preferences-alignment">
        <xul:label anonid="input" value="Woah!"/>
      </xul:hbox>
    </content>
  </binding>
</bindings>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
    <ShortName>Bing</ShortName>
    <Description>Bing. Search by Microsoft.</Description>
    <InputEncoding>UTF-8</InputEncoding>
    <Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAEACADaCwAAJgAAACAgAAABAAgAlAIAAAAMAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIAgAAAJCRaDYAAAAJcEhZcwAACxMAAAsTAQCanBgAAApPaUNDUFBob3Rvc2hvcCBJQ0MgcHJvZmlsZQAAeNqdU2dUU+kWPffe9EJLiICUS29SFQggUkKLgBSRJiohCRBKiCGh2RVRwRFFRQQbyKCIA46OgIwVUSwMigrYB+Qhoo6Do4iKyvvhe6Nr1rz35s3+tdc+56zznbPPB8AIDJZIM1E1gAypQh4R4IPHxMbh5C5AgQokcAAQCLNkIXP9IwEA+H48PCsiwAe+AAF40wsIAMBNm8AwHIf/D+pCmVwBgIQBwHSROEsIgBQAQHqOQqYAQEYBgJ2YJlMAoAQAYMtjYuMAUC0AYCd/5tMAgJ34mXsBAFuUIRUBoJEAIBNliEQAaDsArM9WikUAWDAAFGZLxDkA2C0AMElXZkgAsLcAwM4QC7IACAwAMFGIhSkABHsAYMgjI3gAhJkAFEbyVzzxK64Q5yoAAHiZsjy5JDlFgVsILXEHV1cuHijOSRcrFDZhAmGaQC7CeZkZMoE0D+DzzAAAoJEVEeCD8/14zg6uzs42jrYOXy3qvwb/ImJi4/7lz6twQAAA4XR+0f4sL7MagDsGgG3+oiXuBGheC6B194tmsg9AtQCg6dpX83D4fjw8RaGQudnZ5eTk2ErEQlthyld9/mfCX8BX/Wz5fjz89/XgvuIkgTJdgUcE+ODCzPRMpRzPkgmEYtzmj0f8twv//B3TIsRJYrlYKhTjURJxjkSajPMypSKJQpIpxSXS/2Ti3yz7Az7fNQCwaj4Be5EtqF1jA/ZLJxBYdMDi9wAA8rtvwdQoCAOAaIPhz3f/7z/9R6AlAIBmSZJxAABeRCQuVMqzP8cIAABEoIEqsEEb9MEYLMAGHMEF3MEL/GA2hEIkxMJCEEIKZIAccmAprIJCKIbNsB0qYC/UQB00wFFohpNwDi7CVbgOPXAP+mEInsEovIEJBEHICBNhIdqIAWKKWCOOCBeZhfghwUgEEoskIMmIFFEiS5E1SDFSilQgVUgd8j1yAjmHXEa6kTvIADKC/Ia8RzGUgbJRPdQMtUO5qDcahEaiC9BkdDGajxagm9BytBo9jDah59CraA/ajz5DxzDA6BgHM8RsMC7Gw0KxOCwJk2PLsSKsDKvGGrBWrAO7ifVjz7F3BBKBRcAJNgR3QiBhHkFIWExYTthIqCAcJDQR2gk3CQOEUcInIpOoS7QmuhH5xBhiMjGHWEgsI9YSjxMvEHuIQ8Q3JBKJQzInuZACSbGkVNIS0kbSblIj6SypmzRIGiOTydpka7IHOZQsICvIheSd5MPkM+Qb5CHyWwqdYkBxpPhT4ihSympKGeUQ5TTlBmWYMkFVo5pS3aihVBE1j1pCraG2Uq9Rh6gTNHWaOc2DFklLpa2ildMaaBdo92mv6HS6Ed2VHk6X0FfSy+lH6JfoA/R3DA2GFYPHiGcoGZsYBxhnGXcYr5hMphnTixnHVDA3MeuY55kPmW9VWCq2KnwVkcoKlUqVJpUbKi9Uqaqmqt6qC1XzVctUj6leU32uRlUzU+OpCdSWq1WqnVDrUxtTZ6k7qIeqZ6hvVD+kfln9iQZZw0zDT0OkUaCxX+O8xiALYxmzeCwhaw2rhnWBNcQmsc3ZfHYqu5j9HbuLPaqpoTlDM0ozV7NS85RmPwfjmHH4nHROCecop5fzforeFO8p4ikbpjRMuTFlXGuqlpeWWKtIq1GrR+u9Nq7tp52mvUW7WfuBDkHHSidcJ0dnj84FnedT2VPdpwqnFk09OvWuLqprpRuhu0R3v26n7pievl6Ankxvp955vef6HH0v/VT9bfqn9UcMWAazDCQG2wzOGDzFNXFvPB0vx9vxUUNdw0BDpWGVYZfhhJG50Tyj1UaNRg+MacZc4yTjbcZtxqMmBiYhJktN6k3umlJNuaYppjtMO0zHzczNos3WmTWbPTHXMueb55vXm9+3YFp4Wiy2qLa4ZUmy5FqmWe62vG6FWjlZpVhVWl2zRq2drSXWu627pxGnuU6TTque1mfDsPG2ybaptxmw5dgG2662bbZ9YWdiF2e3xa7D7pO9k326fY39PQcNh9kOqx1aHX5ztHIUOlY63prOnO4/fcX0lukvZ1jPEM/YM+O2E8spxGmdU5vTR2cXZ7lzg/OIi4lLgssulz4umxvG3ci95Ep09XFd4XrS9Z2bs5vC7ajbr+427mnuh9yfzDSfKZ5ZM3PQw8hD4FHl0T8Ln5Uwa9+sfk9DT4FntecjL2MvkVet17C3pXeq92HvFz72PnKf4z7jPDfeMt5ZX8w3wLfIt8tPw2+eX4XfQ38j/2T/ev/RAKeAJQFnA4mBQYFbAvv4enwhv44/Ottl9rLZ7UGMoLlBFUGPgq2C5cGtIWjI7JCtIffnmM6RzmkOhVB+6NbQB2HmYYvDfgwnhYeFV4Y/jnCIWBrRMZc1d9HcQ3PfRPpElkTem2cxTzmvLUo1Kj6qLmo82je6NLo/xi5mWczVWJ1YSWxLHDkuKq42bmy+3/zt84fineIL43sXmC/IXXB5oc7C9IWnFqkuEiw6lkBMiE44lPBBECqoFowl8hN3JY4KecIdwmciL9E20YjYQ1wqHk7ySCpNepLskbw1eSTFM6Us5bmEJ6mQvEwNTN2bOp4WmnYgbTI9Or0xg5KRkHFCqiFNk7Zn6mfmZnbLrGWFsv7Fbou3Lx6VB8lrs5CsBVktCrZCpuhUWijXKgeyZ2VXZr/Nico5lqueK83tzLPK25A3nO+f/+0SwhLhkralhktXLR1Y5r2sajmyPHF52wrjFQUrhlYGrDy4irYqbdVPq+1Xl65+vSZ6TWuBXsHKgsG1AWvrC1UK5YV969zX7V1PWC9Z37Vh+oadGz4ViYquFNsXlxV/2CjceOUbh2/Kv5nclLSpq8S5ZM9m0mbp5t4tnlsOlqqX5pcObg3Z2rQN31a07fX2Rdsvl80o27uDtkO5o788uLxlp8nOzTs/VKRU9FT6VDbu0t21Ydf4btHuG3u89jTs1dtbvPf9Psm+21UBVU3VZtVl+0n7s/c/romq6fiW+21drU5tce3HA9ID/QcjDrbXudTVHdI9VFKP1ivrRw7HH77+ne93LQ02DVWNnMbiI3BEeeTp9wnf9x4NOtp2jHus4QfTH3YdZx0vakKa8ppGm1Oa+1tiW7pPzD7R1ureevxH2x8PnDQ8WXlK81TJadrpgtOTZ/LPjJ2VnX1+LvncYNuitnvnY87fag9v77oQdOHSRf+L5zu8O85c8rh08rLb5RNXuFearzpfbep06jz+k9NPx7ucu5quuVxrue56vbV7ZvfpG543zt30vXnxFv/W1Z45Pd2983pv98X39d8W3X5yJ/3Oy7vZdyfurbxPvF/0QO1B2UPdh9U/W/7c2O/cf2rAd6Dz0dxH9waFg8/+kfWPD0MFj5mPy4YNhuueOD45OeI/cv3p/KdDz2TPJp4X/qL+y64XFi9++NXr187RmNGhl/KXk79tfKX96sDrGa/bxsLGHr7JeDMxXvRW++3Bd9x3He+j3w9P5Hwgfyj/aPmx9VPQp/uTGZOT/wQDmPP8YzMt2wAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAABBUlEQVR42mL8v4OBJMAEZ/0nTgMLnLXtitKRO9JmCi9cNR/wsP8mrOHfP8YbL4RvvBBWFXuvI/WGsJMYSHUSMujbY8LN/ttM4bmO1BtW5n+ENdipPmndbrHjqiIn6x9DuZc2yk8tlZ7hc5Kx/AtzxecMDAzff7Mcuys9/7gOAT8wMjAUOZ9x0XhI2A98HL+Eub/vuSG/8ozGmy+cEEF+zp/YNYjxfvPTv9O63fLpBx6ICCvz32DD24EGt7Fo4Gb/zcX2Z84RPbiIqfyLZJtL4rzfsDvJUf3R91+sC09o//7LJMn/NdXmkqHsSyzeQ0t8j9/znn8s7ql9Dy34cWogIbUSCQADAJ+jWQrH9LCsAAAAAElFTkSuQmCCiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAACW0lEQVR4nGP8v5OBpoCJtsbTwQIWTKGUxe5mCi9M5V/oSL9mZf5HoQWMmHEQOD0AwuBg/WMo+8pB/ZGZwguyLcDiAzj48Zvl+D2pTz/YKLGAcBxcfSZCtulEWUAhGDQW3HstcOOF8P//jKRagC+SkQE/58/0pa7c7L9N5V+aKTw3kH3FxvKXmhYI83y3VXl64Jbs3htye2/IsbH8NZB9Zabw3FT+JR/nTypYwMDAEGBw+8AtWQj71x/mU/clT92XZGT8ry7+zlzxhbnic0n+LxRZIC/8yUju5blH4siC//8z3nghfOOF8MLj2jKCnydH7EXTRVoqCjC4g0f2yXteTEHSLNCVft0WcNhM4QXxiYmEIIIATcm3mpJvn37gmX7Q8OozYYLqycloTz/wLDulRYzpDMT4QFf6NZz95gvnyjMa+27I/SM6xxGwQJj7R6rtJQYGhk8/2NaeU9t+RfH3X2ZcihWEP5Fmgazg53qfY9zsv1ed0dh4UeXbL5yKudl/R5tdd9O6T4IFGhJvyz1OHbkts/qc2qfv7LiUMTIwOGk8irW4yo8jP2O3wEzxubHcy7I1Dq+/cOIymoGBQVn0Q5rtRTXx93jUYLFAX+b1sw88p+5L4tHGy/Er2uy6m9YDRsb/eJRht8BS+emCY7q4NDAyMLhpPYixuMbD/gu/0VD1WBtezz7w9O81vvNKEE1cTfxdmu0lZdEPxBiNzwIGBoa//xhXndFYfU4NUsnwcf6Ms7jmpPGQ1BoHpwUQcOOF0OT9RoayryJNr3Oz/ybRcCIsoBwMmkp/8FoAADmgy6ulKggYAAAAAElFTkSuQmCC</Image>
    <Image width="74" height="74">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABKCAYAAAAc0MJxAAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAABh1JREFUeAHtm1tMXEUYx//Lci13uS63Xa6lgoBQDNACkaQJNWmtDxpE+2AaEzW13h580sSmLzVqjMbEW2zQNsbaxNq+SGmsaJXSWgQboFxaLoFlodx22eW6C86cdpuFLDLdc9mzyUwyOWfP+c7MfL/zzew338zROH4MWQNPWxLw21KCCwgEOChGQ+CgOChGAoxi3KI4KEYCjGLcojgoRgKMYtyilAQ1MaeFeVHLWKVvivlL0eyW4TB88lsOtieYUW6YQlWmBfroFSmKVk0ZkoCi2qytaXDTFCXkE1cAXaQVjxmmUZVhRmHSIvw0vj2llAzUxlc/Zg7Dzx00A2FByyjRT2F3+gzK9TZsC/Q9aLKBcgVnXQpEc69OyP7aVXx04AbydUuuIqo/V/xfz+7ww4Jd8WpFvwjfa7FolT0rgINi5MZBcVCMBBjFuEVxUIwEGMW4RfkKKIdDg1Uy/VF7UsQz3wrCi6dzkBY9f3eKYyBTnAD1TXG8DkqrXcOenDv48s+se1McB/KTZwg0OqGeQ2yoYyvOitz3Oiiq5YH8GZz6exk2Mie0O7RoH44V8mfNQGb8rBC6qSbQMmKXFYHirhJVgAomXW1vnhFn2gzr2kg7YP9ElJC/uwokRNhQlk7iXSR0U6RbhMZPuS6qClCUzrOFUzjbkSpY1DpaLj/GLaEkbEMzCd0EL6P0XuimgoRugmQe11QDKpqMRY/nmNDUneyCZvNT62IgLvXohOyvdaAwZQa7iLVVp1tBy5I6qQYUVay+eAIXCagH7VB0XLs+FCvkT5vXkBVvRgUJSVdnWWCQKCStKlA0zl5qmMDVwXiPDYKGpPvGo4Tc0Ho3JE3HtWcKJ5EQ7rmlqc4zry82eQzJ3YM0JP1Tux6dphB3t5mvqQ5UAVmIyEmYZVZAKUHVgaKK1xWPKqU/cz2qBFWdacN7T3Ti4aRpZkXkFlTVYO5Ulk6RKzNsJPejezwI3/+TiL9uxXt18qxKUE5g9LgjYQlHa4dgtIzidHssLnQlYdGufLNV2fVcQTnPkyLseL3KhG+f/xcp0VbnZcWOyr8aD1Wjcatz3ZE4dS0N07ZgD0vx/DHVg6JeelNvOBpa0zBmDvVcU5FPqhpUy2AIvr6ix8BkhEg1xT+uSlA3xoLwRUsquowPiddQohIUB1WdbUIR8b7dpVtTgfiqJZnM9eLc3fbqNUVBPVk4jCOVJmxcSjBa/EkX0+H3vkRZfKWy9AkUJC2IAq0YqEPl/XiuZL2nPbOgxTet8filKxmOVek9FV2kDYcrB0goeV4UJPqw7KD8/FbxVk0v9uZa7jfWtqzByetxONueiiUSS5I6BfnbUVcyROJb0wggixdSJFlBBZMGv1N78/4bXbZrcLojGj+0pQkLCVIosLGMioxxvFo5Iir2tLFM+ls2UDSmfXxftzAFoc7ieeIsnpTRWaTe+pGqAexMFTcWuYMkG6j48Hkc399DFjVXcJE4iydaU4mzGLZZG0RdDwmwo37nIOqKZkDXCOVKkluUPsaCD/f3oedOII42ZsrqLFYRV+Pw7lFFFkklBZWfPI2DJaN4tzFdVmcxLWYOr5Fu9miye39MDquSDFRR6iQCyILk2+cekaOdQpnbAldwsHQIT5NupvS+dUlAbY9dIAN1KKas4gL4mxGmDmpNrhGv7BpDdIjnKymblc9yXSPVV+r0W5j3f01By+0ElnqZZdLjzKSbDaLAy/vSJQPl1Px8VwQ+/yMLCyvijDWUfO3wQtkgnsozK7rHwKnHxqPkoGgFo2Z/HGvKQA/5NuZBk4Z8M7NnhxEvV5gQGeydbuauzbKAohXRXXQN12LIdh4DVhnncXSLz5vVg8RJ9d72HneQ6DXZQDkrpKsoxy5k/q/DGU68+EPlA9hHu5nzQZUdZQdF9V1a0eDjyzo0dqasU5/+xdfmjeCl8nHyBdbquntq+6EIKKfSl2+H4oNLWbAsBCE3cRZvkG6WHae+buZsr+tRUVC0YhqDahsJQU22VbXdzBWQ81xxUM6Kfe0ofVjR1wgwtpeD4qAYCTCKcYvioBgJMIpxi+KgGAkwinGL4qAYCTCKcYvioBgJMIr9BxXt0eTNXoXQAAAAAElFTkSuQmCC</Image>
    <Url type="application/x-suggestions+json" template="http://api.bing.com/osjson.aspx">
        <Param name="query" value="{searchTerms}"/>
        <Param name="form" value="OSDJAS"/>
        <Param name="language" value="{moz:locale}"/>
    </Url>
    <Url type="text/html" method="GET" template="http://www.bing.com/search">
        <Param name="q" value="{searchTerms}"/>
        <MozParam name="pc" condition="pref" pref="ms-pc-metro"/>
        <Param name="form" value="MOZWSB"/>
    </Url>
    <SearchForm>http://www.bing.com/search</SearchForm>
</SearchPlugin>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
    <ShortName>Bing</ShortName>
    <Description>Bing. Search by Microsoft.</Description>
    <InputEncoding>UTF-8</InputEncoding>
    <Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAEACADaCwAAJgAAACAgAAABAAgAlAIAAAAMAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIAgAAAJCRaDYAAAAJcEhZcwAACxMAAAsTAQCanBgAAApPaUNDUFBob3Rvc2hvcCBJQ0MgcHJvZmlsZQAAeNqdU2dUU+kWPffe9EJLiICUS29SFQggUkKLgBSRJiohCRBKiCGh2RVRwRFFRQQbyKCIA46OgIwVUSwMigrYB+Qhoo6Do4iKyvvhe6Nr1rz35s3+tdc+56zznbPPB8AIDJZIM1E1gAypQh4R4IPHxMbh5C5AgQokcAAQCLNkIXP9IwEA+H48PCsiwAe+AAF40wsIAMBNm8AwHIf/D+pCmVwBgIQBwHSROEsIgBQAQHqOQqYAQEYBgJ2YJlMAoAQAYMtjYuMAUC0AYCd/5tMAgJ34mXsBAFuUIRUBoJEAIBNliEQAaDsArM9WikUAWDAAFGZLxDkA2C0AMElXZkgAsLcAwM4QC7IACAwAMFGIhSkABHsAYMgjI3gAhJkAFEbyVzzxK64Q5yoAAHiZsjy5JDlFgVsILXEHV1cuHijOSRcrFDZhAmGaQC7CeZkZMoE0D+DzzAAAoJEVEeCD8/14zg6uzs42jrYOXy3qvwb/ImJi4/7lz6twQAAA4XR+0f4sL7MagDsGgG3+oiXuBGheC6B194tmsg9AtQCg6dpX83D4fjw8RaGQudnZ5eTk2ErEQlthyld9/mfCX8BX/Wz5fjz89/XgvuIkgTJdgUcE+ODCzPRMpRzPkgmEYtzmj0f8twv//B3TIsRJYrlYKhTjURJxjkSajPMypSKJQpIpxSXS/2Ti3yz7Az7fNQCwaj4Be5EtqF1jA/ZLJxBYdMDi9wAA8rtvwdQoCAOAaIPhz3f/7z/9R6AlAIBmSZJxAABeRCQuVMqzP8cIAABEoIEqsEEb9MEYLMAGHMEF3MEL/GA2hEIkxMJCEEIKZIAccmAprIJCKIbNsB0qYC/UQB00wFFohpNwDi7CVbgOPXAP+mEInsEovIEJBEHICBNhIdqIAWKKWCOOCBeZhfghwUgEEoskIMmIFFEiS5E1SDFSilQgVUgd8j1yAjmHXEa6kTvIADKC/Ia8RzGUgbJRPdQMtUO5qDcahEaiC9BkdDGajxagm9BytBo9jDah59CraA/ajz5DxzDA6BgHM8RsMC7Gw0KxOCwJk2PLsSKsDKvGGrBWrAO7ifVjz7F3BBKBRcAJNgR3QiBhHkFIWExYTthIqCAcJDQR2gk3CQOEUcInIpOoS7QmuhH5xBhiMjGHWEgsI9YSjxMvEHuIQ8Q3JBKJQzInuZACSbGkVNIS0kbSblIj6SypmzRIGiOTydpka7IHOZQsICvIheSd5MPkM+Qb5CHyWwqdYkBxpPhT4ihSympKGeUQ5TTlBmWYMkFVo5pS3aihVBE1j1pCraG2Uq9Rh6gTNHWaOc2DFklLpa2ildMaaBdo92mv6HS6Ed2VHk6X0FfSy+lH6JfoA/R3DA2GFYPHiGcoGZsYBxhnGXcYr5hMphnTixnHVDA3MeuY55kPmW9VWCq2KnwVkcoKlUqVJpUbKi9Uqaqmqt6qC1XzVctUj6leU32uRlUzU+OpCdSWq1WqnVDrUxtTZ6k7qIeqZ6hvVD+kfln9iQZZw0zDT0OkUaCxX+O8xiALYxmzeCwhaw2rhnWBNcQmsc3ZfHYqu5j9HbuLPaqpoTlDM0ozV7NS85RmPwfjmHH4nHROCecop5fzforeFO8p4ikbpjRMuTFlXGuqlpeWWKtIq1GrR+u9Nq7tp52mvUW7WfuBDkHHSidcJ0dnj84FnedT2VPdpwqnFk09OvWuLqprpRuhu0R3v26n7pievl6Ankxvp955vef6HH0v/VT9bfqn9UcMWAazDCQG2wzOGDzFNXFvPB0vx9vxUUNdw0BDpWGVYZfhhJG50Tyj1UaNRg+MacZc4yTjbcZtxqMmBiYhJktN6k3umlJNuaYppjtMO0zHzczNos3WmTWbPTHXMueb55vXm9+3YFp4Wiy2qLa4ZUmy5FqmWe62vG6FWjlZpVhVWl2zRq2drSXWu627pxGnuU6TTque1mfDsPG2ybaptxmw5dgG2662bbZ9YWdiF2e3xa7D7pO9k326fY39PQcNh9kOqx1aHX5ztHIUOlY63prOnO4/fcX0lukvZ1jPEM/YM+O2E8spxGmdU5vTR2cXZ7lzg/OIi4lLgssulz4umxvG3ci95Ep09XFd4XrS9Z2bs5vC7ajbr+427mnuh9yfzDSfKZ5ZM3PQw8hD4FHl0T8Ln5Uwa9+sfk9DT4FntecjL2MvkVet17C3pXeq92HvFz72PnKf4z7jPDfeMt5ZX8w3wLfIt8tPw2+eX4XfQ38j/2T/ev/RAKeAJQFnA4mBQYFbAvv4enwhv44/Ottl9rLZ7UGMoLlBFUGPgq2C5cGtIWjI7JCtIffnmM6RzmkOhVB+6NbQB2HmYYvDfgwnhYeFV4Y/jnCIWBrRMZc1d9HcQ3PfRPpElkTem2cxTzmvLUo1Kj6qLmo82je6NLo/xi5mWczVWJ1YSWxLHDkuKq42bmy+3/zt84fineIL43sXmC/IXXB5oc7C9IWnFqkuEiw6lkBMiE44lPBBECqoFowl8hN3JY4KecIdwmciL9E20YjYQ1wqHk7ySCpNepLskbw1eSTFM6Us5bmEJ6mQvEwNTN2bOp4WmnYgbTI9Or0xg5KRkHFCqiFNk7Zn6mfmZnbLrGWFsv7Fbou3Lx6VB8lrs5CsBVktCrZCpuhUWijXKgeyZ2VXZr/Nico5lqueK83tzLPK25A3nO+f/+0SwhLhkralhktXLR1Y5r2sajmyPHF52wrjFQUrhlYGrDy4irYqbdVPq+1Xl65+vSZ6TWuBXsHKgsG1AWvrC1UK5YV969zX7V1PWC9Z37Vh+oadGz4ViYquFNsXlxV/2CjceOUbh2/Kv5nclLSpq8S5ZM9m0mbp5t4tnlsOlqqX5pcObg3Z2rQN31a07fX2Rdsvl80o27uDtkO5o788uLxlp8nOzTs/VKRU9FT6VDbu0t21Ydf4btHuG3u89jTs1dtbvPf9Psm+21UBVU3VZtVl+0n7s/c/romq6fiW+21drU5tce3HA9ID/QcjDrbXudTVHdI9VFKP1ivrRw7HH77+ne93LQ02DVWNnMbiI3BEeeTp9wnf9x4NOtp2jHus4QfTH3YdZx0vakKa8ppGm1Oa+1tiW7pPzD7R1ureevxH2x8PnDQ8WXlK81TJadrpgtOTZ/LPjJ2VnX1+LvncYNuitnvnY87fag9v77oQdOHSRf+L5zu8O85c8rh08rLb5RNXuFearzpfbep06jz+k9NPx7ucu5quuVxrue56vbV7ZvfpG543zt30vXnxFv/W1Z45Pd2983pv98X39d8W3X5yJ/3Oy7vZdyfurbxPvF/0QO1B2UPdh9U/W/7c2O/cf2rAd6Dz0dxH9waFg8/+kfWPD0MFj5mPy4YNhuueOD45OeI/cv3p/KdDz2TPJp4X/qL+y64XFi9++NXr187RmNGhl/KXk79tfKX96sDrGa/bxsLGHr7JeDMxXvRW++3Bd9x3He+j3w9P5Hwgfyj/aPmx9VPQp/uTGZOT/wQDmPP8YzMt2wAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAABBUlEQVR42mL8v4OBJMAEZ/0nTgMLnLXtitKRO9JmCi9cNR/wsP8mrOHfP8YbL4RvvBBWFXuvI/WGsJMYSHUSMujbY8LN/ttM4bmO1BtW5n+ENdipPmndbrHjqiIn6x9DuZc2yk8tlZ7hc5Kx/AtzxecMDAzff7Mcuys9/7gOAT8wMjAUOZ9x0XhI2A98HL+Eub/vuSG/8ozGmy+cEEF+zp/YNYjxfvPTv9O63fLpBx6ICCvz32DD24EGt7Fo4Gb/zcX2Z84RPbiIqfyLZJtL4rzfsDvJUf3R91+sC09o//7LJMn/NdXmkqHsSyzeQ0t8j9/znn8s7ql9Dy34cWogIbUSCQADAJ+jWQrH9LCsAAAAAElFTkSuQmCCiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAACW0lEQVR4nGP8v5OBpoCJtsbTwQIWTKGUxe5mCi9M5V/oSL9mZf5HoQWMmHEQOD0AwuBg/WMo+8pB/ZGZwguyLcDiAzj48Zvl+D2pTz/YKLGAcBxcfSZCtulEWUAhGDQW3HstcOOF8P//jKRagC+SkQE/58/0pa7c7L9N5V+aKTw3kH3FxvKXmhYI83y3VXl64Jbs3htye2/IsbH8NZB9Zabw3FT+JR/nTypYwMDAEGBw+8AtWQj71x/mU/clT92XZGT8ry7+zlzxhbnic0n+LxRZIC/8yUju5blH4siC//8z3nghfOOF8MLj2jKCnydH7EXTRVoqCjC4g0f2yXteTEHSLNCVft0WcNhM4QXxiYmEIIIATcm3mpJvn37gmX7Q8OozYYLqycloTz/wLDulRYzpDMT4QFf6NZz95gvnyjMa+27I/SM6xxGwQJj7R6rtJQYGhk8/2NaeU9t+RfH3X2ZcihWEP5Fmgazg53qfY9zsv1ed0dh4UeXbL5yKudl/R5tdd9O6T4IFGhJvyz1OHbkts/qc2qfv7LiUMTIwOGk8irW4yo8jP2O3wEzxubHcy7I1Dq+/cOIymoGBQVn0Q5rtRTXx93jUYLFAX+b1sw88p+5L4tHGy/Er2uy6m9YDRsb/eJRht8BS+emCY7q4NDAyMLhpPYixuMbD/gu/0VD1WBtezz7w9O81vvNKEE1cTfxdmu0lZdEPxBiNzwIGBoa//xhXndFYfU4NUsnwcf6Ms7jmpPGQ1BoHpwUQcOOF0OT9RoayryJNr3Oz/ybRcCIsoBwMmkp/8FoAADmgy6ulKggYAAAAAElFTkSuQmCC</Image>
    <Image width="65" height="26">data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAYAAADovjFxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVBOTQzNENBQzQxNDExRTM5RURBRUU5NUU4QkU3NjA4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVBOTQzNENCQzQxNDExRTM5RURBRUU5NUU4QkU3NjA4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzU2RTRERkZDMzc1MTFFMzlFREFFRTk1RThCRTc2MDgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzU2RTRFMDBDMzc1MTFFMzlFREFFRTk1RThCRTc2MDgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz76XOiPAAAD1ElEQVR42uyYeUgVQRzH9+nLNE07kMKIiqAkSaUIMgUpyu6eHdBhVBSBZQf1R4XkP0WHFUURWBlRmGGHdkI3nWIXVHZIaNkhFXmWYni+vhPfhWHZfbvvqVjZDz7Mzs6w8+Y3v2ue3eFwPFUU5R64CG6BRqWDiReIBCvBNfAeHAXjOpoSqqV+H7AQbO1oStCTz/+VoCjONlpvDdgPelqc3x8kgMD2UEJbSTRIAkMszhfB+jhIbU8lxIIZrbjeV7b1FudngefgansqoQ5kg3cgDUwBXVthXavutoXZ61x7KuEBOAkGgESap0ijGWAeCPZwXZv0bNf0PZFObuzX7klM2Kjp9wDzQSYVcgWsAqFubD4fjAIloAE0g0sgXDN/Li1xBPt+IAcks3+KViXc6xmYbrDuGBaETVzvFegHloKzVpRQBK4bjHUB48FeUADyQDcX32pmuxPkgkr6vahaJ9P/Q3Vi0mD2fbjRdeAln4VSboIIPkdp1lzA8RjuQ1h2CA9wH4i3mh2SLc4bCQJMYozCDDEbDOVpDwPLOHZGml/KtlpSongOArV0g5lgLFguxRFVxGaP0VrCQByYA7pT+b7ie1aV8ASMBhdM5jWY3D3UgLiLpizLAfCGP3agi2/4s43RvE+jucdKbpfEdjV4reNqVSLQu1Mn3AYOxoTcFgawHIPxbLZhJsHtg0Ga/cJxVdkTdKxLlnxFL1JKvqcn4oQWMai0RAk/DcarpFjjSmpN3E2uOOX6RCuNrpTQWdPvC9ZL5uVqk3YL7mBUJ4SwLTdZx2gNb4P1vA3c1McoRZaBxXwWAWgbM0SShZN+KJ2mnqgm3MtgXE1xL1qpDiowca8IReM/ClNUMH1OpKG3YIML91DlB1jL7FDjYp56Grt1xmbRzfJcmK9VUS0ik+0OnTmbWf3WeEkbPMQSdRqVkGrxtncYDAJ7LMwNlE6mhEXXRLAdnOZYgjTfTxNLbJrvaCVI009nPRDH+0c8mMrALIrAQuFaduZeUUAcAZeliGom92kl7mSKeqbRSSyYMqSxYiqgWHpXw/l1ko+LfoXB98s1dUoTrfMEFREnjQ1nbbHE5nA4vvOCFGlxI2UsntI9MNNARn7V3KNobd/AI535AaSSirAxnjTyd2glmK6g507hDPBCsXf47qN4J5SQyELDihykAir+gT+U/KmQIi9WasKn75qYfjRvkn+bAoINAud5Pqeo+baQ5WYK2KT5EySFwe9vFF+6Win/kxAn35sls3oLzbLrpI0b3PRjsMIk5f3pYmPsSuC1WZVPrH9+hwGb0+lUOrr8EmAAiqTecoRlgJMAAAAASUVORK5CYII=</Image>
    <Image width="130" height="52">data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAYAAABGkOCVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1NkU0REZEQzM3NTExRTM5RURBRUU5NUU4QkU3NjA4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjc1NkU0REZFQzM3NTExRTM5RURBRUU5NUU4QkU3NjA4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzU2RTRERkJDMzc1MTFFMzlFREFFRTk1RThCRTc2MDgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzU2RTRERkNDMzc1MTFFMzlFREFFRTk1RThCRTc2MDgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5lzzn9AAAIPUlEQVR42uxdCWwVRRie0gqtFwTQGIyAXJYABry4VLwPQFsFAcUjeKAGotEoAQ8UFC80EhVUFBUUFCogGApFVMIRzqgIaGlEKArKoaBSrkLr/2W/l0wn+97bbXfbpW++5Evf7pvdtzvzz3/NP5BWXl6uLCzScnJyNsnf5cLPhN8KS223pB4yhG3IQcLtwhXCucJ5wr9tF6UG6gj/047PFPYVThEWCxcLHxOeY7uq9gtCPJws7CEcKywUrhNea7ss9QTBxLnCi2yXWUFQ1mewgmBhBcHCCsLxjRbCkcIr7DCntiCcKhwl/Fq4WXh5CL9xt3CRcIaw7fHcWRm1WBAOGdqhk3Iyp0EhVzhJO4agnS3cbzVCtLEv4PvlGseNhc1S0TRkCuulsFmdaRwX0wSlnCBk0D5OoFo8McUE4UvhffRBIBSXGuYoZXwE2MJlwuHCB4V7lLNQhQUrrGbuTAFheJ9M+ahhhDbgsJF3cXYUUyjuUc7KpkUKOIsvu5yD79CTswX1DqupOdrZLq+9goAQ6liSNhcKXxRuEP4oHEebmmaHoPbkEf4VviF8xGP7DuTDwm30M2YLF/JeYcEUuoHCfsKWyllyR83ebuH3wg+Eq5Lc7wRhf2FdHv+snKKeRG1+ES7Rvr9X2EfYXJjFCbVDmC98S1WsFfGK3nyv9sKGmj/3k/BjOrmK2rkzPx9BqRo6/xSPPzJUON7lPApafg8gzocJ+YL+xbYq3i+bg6N3+iS+/CQPZmo6hSWetqtv5CbyOACJ2iwQXi/sIpycxH/aQyH6xuP7XiB8m38TYT7N9k3CWUGaBgAlbtOqeI8GwmsYjm7hjBzJ2RoEMNPPEK706KtgEH5I8H2ZsEQ73u2hTYGwCTVHMie6MUPTVh6e9UbhGg9CoCiInxoasiTIzOILAfsuKIIZxcGrKjAgF9P8KJqBV4Q5ylkjgKlCid6HxnXtqaES3Vdp90zWprv2DJjxw5iDacu/T7lcPyPJu3UUzjHObaDpvZL37iYcQv8MGCB8T3u2siDXGjZSjQW92hdEVXU5HVTMApTd5TKaMTtvJjtVH/wczqL5ATxHX/5dyvvu1b7Dcy2moKzSZizWSM4TfhfnnqYQjKcJN7GC2naichJhDYOOGnQ8E1GnOJ0du4+aZlOCtnOYD9ExJsBn2cWIaW+c79cw1NbRL07bB4RNteP8OEKgYzD9GRWmICyjI5IXUYEY4NETn0INobRZGVQl92APbVAwfFA7jlcr+pD2eT/fz2s/HAlTEGJeaT96xh+p6GyY2UpnzSsmGsfdA3iGP1xUeTxTVqgdN3Fp01pVrIGY5SPcLDN9jzCXoWHnBvGBkX1cKzxag4Kw0Gf7AsMBbBLAM6z30XZnknEytxbM8/ksS6tLEGIops2DPavJKugin+23GaFfEILgJ9fyp/bZLZfRwpjhK30+y4HqFoSmDC0RE59eg4LgVwjTjdCvfkDRi1ckS9vrXv9BhqN+UFc/CLNUDR2H5enRykm1Hm84agxcELUGdQJsqyfaSjwITkKh9CsImR7aYNCRzn1O2ChiA+sH6Ogsw9GLEvSBTKuEIJRWxTQkK8y8nbZ4QoBCEJT5yvLZPttQn3siJgj6WCA9f6rP60+rbCdPY3ztBmTqYqtbzWt4JsdDK5/tLzOOo1aPuMvQwl18Xt+tMoKAGT7QSHLEOgve6mwVfF3/TiY+tgd0P7/7Gu4wHLclEROE1cbxzT6v7+1XELDwM8Q4h1UuJI6wT6BzCC/5KmfwdMNzrwrwzF53c/dSFTOJnwv/iZgg5BsOLCaq13KCJ0x/L5kgYHHiWcNuolOQD78uhJdDEgeraY+rcDaKzPPguzSiAJqCGTVAO88yHPm5Hq7DiuQYP44Y1rhjFbpnKWeJFoUefUJ4Kaj//hSudSF62Fjjx1JsjzjtevD7k7RzSDWvjWiIO8LFVC/geMWb2Iv4+YAeabiFj1DFKNwopKpBMmiwmYAIECg+GavC3RNQzlkOYUOGcLFylmWXMwbHwGMtoatxHZbW749wrgPZT2Rs39HOIfWMkrivlFNYA2e7KZ3DmLmDWZ+stGKiDCMexY1bUFJgEoaGmAvA4svTyl/+vbJhJz6PY1QTy8l3dRl4HRCUngm+TzOSOvU8tMn08fx620Sbh95VTvGObsLr0s/p5dIeKX+UqXXS+6iOphVm0EFDwcRW5dQWhCEERZyZuSEKgZlwiYWP+YxEEtVD7qYzhRm0L8n9S43IojJt4uGYjxB6FM1qooLbMk4GVGMdpiDEkJ5BYSig6syjIIQFmIHnlb+ce2Wx2QhpYzWFeM+Z9IHa0G84xoTRZvZFiYf7l7BTY7Nqr4c2fiKPYZpTd8Sjo11AP6cjtQQ0w1/KWexawgnullA6hCrmcnZAyxAHZTpVV6GyiAow6WOlc0WQ1EdDFIKNNAMDrBBEDno9wxYIwuvK+afzVgb4I6X0Mdqr5FW4FtWPW4zkU17Mdq2nB/1SAD8yjYmn0ba/I4lMI9wEPqnjkqC4inGoXyARdINyUp2/2v6uNpyv4ifITMB5Rla4oRFxHE7Pzs42G2OXEbZOtabHmwxIBKH24FblvxzMoup4jezAELGU4eZhRg2NGEWg4nmqqlglVhRzGBE1JPqRO4Vvqvhr3dg6NVxVfZ+iReXVPApmGhjnUc2M0rwsfueWFUbZwCVsl3TRaQrVyXwXM3C18DYrBDUKqPgDLufhCDbj7DeFANoCu6HaKa2O00upGrZpI9X6JDXERKoii5rHDg54b44RtsZhLUVPayNZhmTab8pZf5jKzxWQZv8rHwvgfwEGAFtXxJ2uv6OVAAAAAElFTkSuQmCC</Image>
    <Url type="application/x-suggestions+json" template="http://api.bing.com/osjson.aspx">
        <Param name="query" value="{searchTerms}"/>
        <Param name="form" value="OSDJAS"/>
        <Param name="language" value="{moz:locale}"/>
    </Url>
    <Url type="text/html" method="GET" template="http://www.bing.com/search" rel="searchform">
        <Param name="q" value="{searchTerms}"/>
        <Param name="pc" value="MOZI"/>
        <MozParam name="form" condition="purpose" purpose="contextmenu" value="MOZCON"/>
        <MozParam name="form" condition="purpose" purpose="searchbar" value="MOZSBR"/>
        <MozParam name="form" condition="purpose" purpose="homepage" value="MOZSPG"/>
        <MozParam name="form" condition="purpose" purpose="keyword" value="MOZLBR"/>
        <MozParam name="form" condition="purpose" purpose="newtab" value="MOZTSB"/>
    </Url>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8" ?>
<blob>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</blob><?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist"/>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="softblock1@tests.mozilla.org">
      <versionRange severity="1"/>
    </emItem>
    <emItem id="softblock2@tests.mozilla.org">
      <versionRange severity="1"/>
    </emItem>
    <emItem id="softblock3@tests.mozilla.org">
      <versionRange severity="1"/>
    </emItem>
    <emItem id="softblock4@tests.mozilla.org">
      <versionRange severity="1"/>
    </emItem>
    <emItem id="softblock5@tests.mozilla.org">
      <versionRange severity="1"/>
    </emItem>
    <emItem id="hardblock@tests.mozilla.org"/>
    <emItem id="/^RegExp/">
      <versionRange severity="1"/>
    </emItem>
    <emItem id="/^RegExp/i"/>
  </emItems>
</blocklist>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
  <!ENTITY % blocklistDTD SYSTEM "chrome://mozapps/locale/extensions/blocklist.dtd" >
  %blocklistDTD;
]>

<bindings id="blocklistBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="hardblockedaddon">
    <content align="start">
      <xul:image xbl:inherits="src=icon"/>
      <xul:vbox flex="1">
        <xul:hbox class="addon-name-version">
          <xul:label class="addonName" crop="end" xbl:inherits="value=name"/>
          <xul:label class="addonVersion" xbl:inherits="value=version"/>
        </xul:hbox>
        <xul:hbox>
          <xul:spacer flex="1"/>
          <xul:label class="blockedLabel" value="&blocklist.blocked.label;"/>
        </xul:hbox>
      </xul:vbox>
    </content>
  </binding>

  <binding id="softblockedaddon">
    <content align="start">
      <xul:image xbl:inherits="src=icon"/>
      <xul:vbox flex="1">
        <xul:hbox class="addon-name-version">
          <xul:label class="addonName" crop="end" xbl:inherits="value=name"/>
          <xul:label class="addonVersion" xbl:inherits="value=version"/>
        </xul:hbox>
        <xul:hbox>
          <xul:spacer flex="1"/>
          <xul:checkbox class="disableCheckbox" checked="true" label="&blocklist.checkbox.label;"/>
        </xul:hbox>
      </xul:vbox>
    </content>
    <implementation>
      <field name="_checkbox">
        document.getAnonymousElementByAttribute(this, "class", "disableCheckbox")
      </field>
      <property name="checked" readonly="true">
        <getter>
          return this._checkbox.checked;
        </getter>
      </property>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0"?>
<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist" lastupdate="1336406310001">
  <emItems>
  </emItems>
  <pluginItems>
  </pluginItems>
</blocklist>
<?xml version="1.0"?>
<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist" lastupdate="1336406310000">
  <emItems>
  </emItems>
  <pluginItems>
    <pluginItem blockID="p9999">
      <match name="filename" exp="libnptest\.so|nptest\.dll|Test\.plugin" />
      <versionRange severity="2"></versionRange>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0"?>
<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist" lastupdate="1336406310000">
  <emItems>
  </emItems>
  <pluginItems>
    <pluginItem blockID="p9999">
      <match name="filename" exp="libnptest\.so|nptest\.dll|Test\.plugin" />
      <versionRange severity="2"></versionRange>
      <infoURL>http://test.url.com/</infoURL>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0"?>
<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist" lastupdate="1336406310000">
  <emItems>
  </emItems>
  <pluginItems>
    <pluginItem blockID="p9999">
      <match name="filename" exp="libnptest\.so|nptest\.dll|Test\.plugin" />
      <versionRange severity="0" vulnerabilitystatus="2"></versionRange>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0"?>
<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist" lastupdate="1336406310000">
  <emItems>
  </emItems>
  <pluginItems>
    <pluginItem blockID="p9999">
      <match name="filename" exp="libnptest\.so|nptest\.dll|Test\.plugin" />
      <versionRange severity="0" vulnerabilitystatus="1"></versionRange>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml-stylesheet href="block-xml-root-1-ref.css" ?>
<root><leaf/></root>
<?xml-stylesheet href="block-xml-root-1.css" ?>
<root><leaf/></root>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="bm"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2007/06/04 01:05:45 $"/>
		<language type="bn"/> 
		<territory type="IN"/> 
	</identity>
	
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.22 $"/>
		<generation date="$Date: 2008/05/25 01:05:50 $"/>
		<language type="bn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Beng</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<base href="http://xw2k.sdct.itl.nist.gov/brady/dom/"/>
<title>NIST DOM HTML Test - Body</title>
</head>
<body onload="parent.loadComplete()" alink="#0000ff" background="./pix/back1.gif" bgcolor="#ffff00" link="#ff0000" text="#000000" vlink="#00ffff"> 
<p>Hello, World.</p>
</body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:orientation="vertical"
              android:layout_height="match_parent">

    <org.mozilla.gecko.widget.FloatingHintEditText
              android:id="@+id/edit_bookmark_name"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:singleLine="true"
              android:hint="@string/bookmark_edit_name"/>

    <org.mozilla.gecko.widget.FloatingHintEditText
              android:id="@+id/edit_bookmark_location"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:singleLine="true"
              android:hint="@string/bookmark_edit_location"
              android:inputType="textNoSuggestions"/>

    <org.mozilla.gecko.widget.FloatingHintEditText
              android:id="@+id/edit_bookmark_keyword"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:singleLine="true"
              android:hint="@string/bookmark_edit_keyword"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.home.BookmarkFolderView xmlns:android="http://schemas.android.com/apk/res/android"
                                           style="@style/Widget.BookmarkFolderView"
                                           android:layout_width="match_parent"
                                           android:layout_height="@dimen/page_row_height"
                                           android:minHeight="@dimen/page_row_height"
                                           android:gravity="center_vertical"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <!-- state open -->
    <item gecko:state_open="true"
          android:drawable="@drawable/folder_up"/>

    <!-- state close -->
    <item android:drawable="@drawable/bookmark_folder_closed"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.home.TwoLinePageRow xmlns:android="http://schemas.android.com/apk/res/android"
                                       style="@style/Widget.BookmarkItemView"
                                       android:layout_width="match_parent"
                                       android:layout_height="@dimen/page_row_height"
                                       android:minHeight="@dimen/page_row_height"/>
<?xml version="1.0"?>
<?xml-stylesheet href="common.css" type="text/css"?>
<?xml-stylesheet href="classic.css" type="text/css"?>
<?xml-stylesheet href="list.css" type="text/css"?>

<!DOCTYPE SearchResult>

<SearchResult xmlns:html="http://www.w3.org/1999/xhtml"
              xmlns:xlink="http://www.w3.org/1999/xlink">

<Header>
  <Toolbar>
    <html:form>
      <Label>Sort by:</Label>
      <html:input type="button" id="Author" onclick="sort(books,this.id)" value="Author"/>
      <html:input type="button" id="Title" onclick="sort(books,this.id)" value="Title"/>
      <html:input type="button" id="ISBN" onclick="sort(books,this.id)" value="ISBN #"/>
      <html:input type="button" id="toggle" value="Toggle Style" onclick="initiateToggle(); return false;"/>
    </html:form>
  </Toolbar>

  <SearchTitle>Amazon.com Search Results for: the keywords include "Road"</SearchTitle>
</Header>

<BookSet>

  <Book>
    <BookCover><html:img src="kerouac.gif" width="100" height="140"/></BookCover>
    <Title xlink:type="simple" xlink:show="replace" xlink:href="http://www.amazon.com/exec/obidos/ASIN/0140042598/002-5969498-2733628">On the Road</Title>
    <Author>Kerouac, Jack</Author>
    <ISBN>0140042598</ISBN>
    <Synopsis>
On The Road, the most famous of Jack Kerouac's works, is not only the soul of the Beat movement and literature, but one of the most important novels of the century. Like nearly all of Kerouac's writing, On The Road is thinly fictionalized autobiography, filled with a cast made of Kerouac's real life friends, lovers, and fellow travelers. Narrated by Sal Paradise, one of Kerouac's alter-egos, On the Road is a cross-country bohemian odyssey that not only influenced writing in the years since its 1957 publication but penetrated into the deepest levels of American thought and culture. 
    </Synopsis>
    <ListPrice>$12.95</ListPrice>
    <Price>$10.36</Price>
  </Book>

  <Book>
    <BookCover><html:img src="bill.gif" width="100" height="140" /></BookCover>
    <Title xlink:type="simple" xlink:show="replace" xlink:href="http://www.amazon.com/exec/obidos/ASIN/0140260404/002-5969498-2733628">The Road Ahead</Title>
    <Author>Gates, Bill</Author>
    <ISBN>666666666</ISBN>
    <Synopsis>
In a study, the founder of Microsoft presents his vision for the future in which he sees the digital technologies of the coming years changing the way we buy, work, learn, and communicate. But he doesn't mention XML!
    </Synopsis>
    <ListPrice>$15.95</ListPrice>
    <Price>$12.76</Price>
  </Book>

  <Book>
    <BookCover><html:img src="welville.gif" width="100" height="140" /></BookCover>
    <Title xlink:type="simple" xlink:show="replace" xlink:href="http://www.amazon.com/exec/obidos/ASIN/0140167188/002-5969498-2733628">The Road to Wellville</Title>
    <Author>Boyle, T. Coraghessan</Author>
    <ISBN>0140167188</ISBN>
    <Synopsis>
A snobbish wife and her henpecked husband travel to Dr. Kellogg's spa in turn-of-the-century Battle Creek, where the youth-crazed affluent succumb to quackery. By the author of East is East.
    </Synopsis>
    <ListPrice>$12.95</ListPrice>
    <Price>$10.36</Price>
  </Book>

  <Book>
    <BookCover><html:img src="road.gif" width="100" height="140" /></BookCover>
    <Title xlink:type="simple" xlink:show="replace" xlink:href="http://www.amazon.com/exec/obidos/ASIN/1562512625/002-5969498-2733628">AAA Road Atlas 1999</Title>
    <Author>A. A. A.</Author>
    <ISBN>1562512625</ISBN>
    <Synopsis>
The definitive road atlas to the United States, Canada and Mexico.
    </Synopsis>
    <ListPrice>$9.95</ListPrice>
    <Price>$9.95</Price>
  </Book>

  <Book>
    <BookCover><html:img src="bethlehem.gif" width="100" height="140" /></BookCover>
    <Title xlink:type="simple" xlink:show="replace" xlink:href="http://www.amazon.com/exec/obidos/ASIN/0449219143/002-5969498-2733628">Bethlehem Road</Title>
    <Author>Perry, Anne</Author>
    <ISBN>0449219143</ISBN>
    <Synopsis>
He might be elegant, but there's no mistaking it--the gentleman tied to the lamppost on Westminster Bridge is definitely dead. Before Inspector Thomas Pitt can even speculate on why anyone should want to kill the eminent M.P., Sir Lockwood, a colleague of his, meets the same fate at the same spot. The public is outraged, and clever Charlotte Pitt, Thomas's well-born wife, helps her hard-pressed husband by scouting society's drawing rooms for clues to these appalling crimes. Meanwhile, another victim is being stalked....
    </Synopsis>
    <ListPrice>$6.99</ListPrice>
    <Price>$5.59</Price>
  </Book>

  <Book>
    <BookCover><html:img src="charing.gif" width="100" height="140" /></BookCover>
    <Title xlink:type="simple" xlink:show="replace" xlink:href="http://www.amazon.com/exec/obidos/ASIN/0140143505/002-5969498-2733628">84 Charing Cross Road</Title>
    <Author>Hanff, Helene</Author>
    <ISBN>0140143505</ISBN>
    <Synopsis>
84, Charing Cross Road is a charming record of bibliophilia, cultural difference, and imaginative sympathy. For 20 years, an outspoken New York writer and a rather more restrained London bookseller carried on an increasingly touching correspondence... 
    </Synopsis>
    <ListPrice>$9.95</ListPrice>
    <Price>$7.96</Price>
  </Book>

</BookSet>

<html:script src="books.js" />

</SearchResult>
<?xml version="1.0" encoding="UTF-8"?>
<searchresults total_results="1">
  <addon id="5617">
  <name>Restartless Test Extension</name>
  <type id="1">Extension</type>
  <guid>bootstrap1@tests.mozilla.org</guid>
  <slug>bootstrap1</slug>
  <version>1.0</version>

  <compatible_applications><application>
      <name>Firefox</name>
      <application_id>1</application_id>
      <min_version>3.6</min_version>
      <max_version>*</max_version>
      <appID>xpcshell@tests.mozilla.org</appID>
    </application></compatible_applications>
  <all_compatible_os><os>ALL</os></all_compatible_os>

  <install os="ALL" size="485">http://127.0.0.1:8888/bootstrap1.xpi</install>
    <created epoch="1252903662">
      2009-09-14T04:47:42Z
    </created>
    <last_updated epoch="1315255329">
      2011-09-05T20:42:09Z
    </last_updated>
    </addon>
</searchresults>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.1 $"/>
		<generation date="$Date: 2009/04/22 15:55:50 $"/>
		<language type="bo"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Tibt</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/reload"
          android:icon="@drawable/ic_menu_reload"
          android:title="@string/reload"
          android:showAsAction="always"/>

    <item android:id="@+id/back"
          android:icon="@drawable/ic_menu_back"
          android:title="@string/back"
          android:visible="false"/>

    <item android:id="@+id/forward"
          android:icon="@drawable/ic_menu_forward"
          android:title="@string/forward"
          android:visible="false"/>

    <item android:id="@+id/bookmark"
          android:icon="@drawable/ic_menu_bookmark_add"
          android:title="@string/bookmark"
          android:showAsAction="always"/>

    <item android:id="@+id/share"
          android:icon="@drawable/ic_menu_share"
          android:title="@string/share"
          android:showAsAction="ifRoom"/>

    <item android:id="@+id/new_tab"
          android:icon="@drawable/ic_menu_new_tab"
          android:title="@string/new_tab"/>

    <item android:id="@+id/new_private_tab"
          android:icon="@drawable/ic_menu_new_private_tab"
          android:title="@string/new_private_tab"/>

    <item android:id="@+id/find_in_page"
          android:icon="@drawable/ic_menu_find_in_page"
          android:title="@string/find_in_page" />

    <item android:id="@+id/desktop_mode"
          android:icon="@drawable/ic_menu_desktop_mode_off"
          android:title="@string/desktop_mode"
          android:checkable="true" />


    <item android:id="@+id/page"
          android:title="@string/page"
          android:icon="@drawable/ic_menu_tools">

        <menu>

            <item android:id="@+id/subscribe"
                  android:title="@string/contextmenu_subscribe"/>

            <item android:id="@+id/save_as_pdf"
                  android:title="@string/save_as_pdf"/>

            <item android:id="@+id/add_search_engine"
                  android:title="@string/contextmenu_add_search_engine"/>

            <item android:id="@+id/site_settings"
                  android:title="@string/contextmenu_site_settings" />

            <item android:id="@+id/add_to_launcher"
                  android:title="@string/contextmenu_add_to_launcher"/>

        </menu>

    </item>

    <item android:id="@+id/tools"
          android:title="@string/tools"
          android:icon="@drawable/ic_menu_tools">

        <menu>

            <item android:id="@+id/downloads"
                  android:icon="@drawable/ic_menu_downloads"
                  android:title="@string/downloads"/>

            <item android:id="@+id/addons"
                  android:icon="@drawable/ic_menu_addons"
                  android:title="@string/addons"/>

            <item android:id="@+id/apps"
                  android:icon="@drawable/ic_menu_apps"
                  android:title="@string/apps"/>

            <item android:id="@+id/new_guest_session"
                  android:icon="@drawable/ic_menu_guest"
                  android:visible="false"
                  android:title="@string/new_guest_session"/>

            <item android:id="@+id/exit_guest_session"
                  android:icon="@drawable/ic_menu_guest"
                  android:visible="false"
                  android:title="@string/exit_guest_session"/>

        </menu>

    </item>

    <item android:id="@+id/char_encoding"
          android:icon="@drawable/ic_menu_character_encoding"
          android:visible="false"
          android:title="@string/char_encoding"/>

    <item android:id="@+id/settings"
          android:icon="@drawable/ic_menu_settings"
          android:title="@string/settings" />

    <item android:id="@+id/help"
          android:title="@string/help_menu" />

</menu>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="1">
  <addon_compatibility hosted="false">
    <guid>addon10@tests.mozilla.org</guid>
    <name>Addon10</name>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>1.0</min_version>
        <max_version>2.0</max_version>
        <compatible_applications>
          <application>
            <min_version>0.1</min_version>
            <max_version>999.0</max_version>
            <appID>toolkit@mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>
</searchresults>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="100">
  <addon>
    <name>MAGICAL SEARCH RESULT</name>
    <type id='1'>Extension</type>
    <guid>remote1@tests.mozilla.org</guid>
    <version>3.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary - SEARCH SEARCH</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="2">http://example.com/browser/toolkit/mozapps/extensions/test/browser/addons/browser_searching.xpi</install>
  </addon>
</searchresults>

<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="100">
  <addon>
    <name>NOTFOUND</name>
    <type id='1'>Extension</type>
    <guid>notfound1@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Install file not found - NOTFOUND</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="1">http://example.com/file_not_found.xpi</install>
  </addon>
</searchresults>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="1">
  <addon>
    <name>Install Tests</name>
    <type id='1'>Extension</type>
    <guid>addon1@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test add-on</summary>
    <description>Test add-on</description>
    <eula>This is the EULA for this add-on</eula>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="2">http://example.com/browser/toolkit/mozapps/extensions/test/browser/addons/browser_install1_2.xpi</install>
  </addon>
</searchresults>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="1">
  <addon>
    <name>Install Tests</name>
    <type id='1'>Extension</type>
    <guid>addon1@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test add-on</summary>
    <description>Test add-on</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="2">http://example.com/browser/toolkit/mozapps/extensions/test/browser/addons/browser_install1_2.xpi</install>
  </addon>
</searchresults>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="100">
  <addon>
    <name>Ludicrously Expensive Add-on</name>
    <type id='1'>Extension</type>
    <guid>addon5@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <all_compatible_os>
      <os>ALL</os>
    </all_compatible_os>
    <payment_data>
      <link>http://example.com/browser/toolkit/mozapps/extensions/test/browser/releaseNotes.xhtml?addon5</link>
      <amount amount="101">$101</amount>
    </payment_data>
  </addon>
  <addon>
    <name>Cheap Add-on</name>
    <type id='1'>Extension</type>
    <guid>addon2@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <all_compatible_os>
      <os>ALL</os>
    </all_compatible_os>
    <payment_data>
      <link>http://example.com/browser/toolkit/mozapps/extensions/test/browser/releaseNotes.xhtml?addon2</link>
      <amount amount="0.99">$0.99</amount>
    </payment_data>
  </addon>
  <addon>
    <name>Reasonable Add-on</name>
    <type id='1'>Extension</type>
    <guid>addon3@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <all_compatible_os>
      <os>ALL</os>
    </all_compatible_os>
    <payment_data>
      <link>http://example.com/browser/toolkit/mozapps/extensions/test/browser/releaseNotes.xhtml?addon3</link>
      <amount amount="1">$1</amount>
    </payment_data>
  </addon>
  <addon>
    <name>Free Add-on</name>
    <type id='1'>Extension</type>
    <guid>addon1@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <all_compatible_os>
      <os>ALL</os>
    </all_compatible_os>
    <install size="1">http://example.com/addon1.xpi</install>
  </addon>
  <addon>
    <name>More Expensive Add-on</name>
    <type id='1'>Extension</type>
    <guid>addon4@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <all_compatible_os>
      <os>ALL</os>
    </all_compatible_os>
    <payment_data>
      <link>http://example.com/browser/toolkit/mozapps/extensions/test/browser/releaseNotes.xhtml?addon4</link>
      <amount amount="1.01">$1.01</amount>
    </payment_data>
  </addon>
</searchresults>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="100" />

<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="100">
  <addon>
    <name>FAIL</name>
    <type id='1'>Extension</type>
    <guid>addon1@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Addon already installed - SEARCH</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="1">http://example.com/addon1.xpi</install>
  </addon>
  <addon>
    <name>FAIL</name>
    <type id='9'>lightweight theme</type>
    <guid>addon12345@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Addon with uninstallable type shouldn't be visible in search</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="1">http://example.com/addon1.xpi</install>
  </addon>
  <addon>
    <name>FAIL</name>
    <type id='1'>Extension</type>
    <guid>install1@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Install already exists - SEARCH</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="1">http://example.com/install1.xpi</install>
  </addon>
  <addon>
    <name>PASS - b</name>
    <type id='1'>Extension</type>
    <guid>remote1@tests.mozilla.org</guid>
    <version>3.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary - SEARCH SEARCH</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="2">http://example.com/browser/toolkit/mozapps/extensions/test/browser/addons/browser_searching.xpi</install>
  </addon>
  <addon>
    <name>PASS - d</name>
    <type id='1'>Extension</type>
    <guid>remote2@tests.mozilla.org</guid>
    <version>4.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary - SEARCHing SEARCH</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="5">http://example.com/remote2.xpi</install>
  </addon>
  <addon>
    <name>PASS - e</name>
    <type id='1'>Extension</type>
    <guid>remote3@tests.mozilla.org</guid>
    <version>5.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary - Does not match query</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="1">http://example.com/remote3.xpi</install>
  </addon>
  <addon>
    <name>PASS - h</name>
    <type id='1'>Extension</type>
    <guid>remote4@tests.mozilla.org</guid>
    <version>6.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Test summary - SEARCHing SEARCH SEARCH</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="4">http://example.com/remote4.xpi</install>
  </addon>
  <addon>
    <name>PASS - i</name>
    <type id='1'>Extension</type>
    <guid>remote5@tests.mozilla.org</guid>
    <version>6.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Incompatible test</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>1</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="1">http://example.com/addon1.xpi</install>
  </addon>
  <addon>
    <name>FAIL - j</name>
    <type id='1'>Extension</type>
    <guid>remote6@tests.mozilla.org</guid>
    <version>6.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Incompatible test</summary>
    <description>Test description</description>
    <compatible_applications>
      <application>
        <name>Fake Product</name>
        <appID>fakeproduct@mozilla.org</appID>
        <min_version>0</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="1">http://example.com/addon1.xpi</install>
  </addon>
</searchresults>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <ViewStub android:id="@+id/suggestions_opt_in_prompt"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:layout="@layout/home_suggestion_prompt" />

    <view class="org.mozilla.gecko.home.BrowserSearch$HomeSearchListView"
            android:id="@+id/home_list_view"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />

</LinearLayout>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="1">
  <addon_compatibility hosted="false">
    <guid>addon1@tests.mozilla.org</guid>
    <name>Addon1</name>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>1.0</min_version>
        <max_version>2.0</max_version>
        <compatible_applications>
          <application>
            <min_version>0.1</min_version>
            <max_version>999.0</max_version>
            <appID>toolkit@mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>
</searchresults>
<?xml version="1.0"?>


<bindings id="tabPreviews"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">
  <binding id="ctrlTab-preview" extends="chrome://global/content/bindings/button.xml#button-base">
    <content pack="center">
      <xul:stack>
        <xul:vbox class="ctrlTab-preview-inner" align="center" pack="center"
                  xbl:inherits="width=canvaswidth">
          <xul:hbox class="tabPreview-canvas" xbl:inherits="style=canvasstyle">
            <children/>
          </xul:hbox>
          <xul:label xbl:inherits="value=label,crop" class="plain"/>
        </xul:vbox>
        <xul:hbox class="ctrlTab-favicon-container" xbl:inherits="hidden=noicon">
          <xul:image class="ctrlTab-favicon" xbl:inherits="src=image"/>
        </xul:hbox>
      </xul:stack>
    </content>
    <handlers>
      <handler event="mouseover" action="ctrlTab._mouseOverFocus(this);"/>
      <handler event="command" action="ctrlTab.pick(this);"/>
      <handler event="click" button="1" action="ctrlTab.remove(this);"/>
      <handler event="click" button="2" action="ctrlTab.pick(this);"/>
    </handlers>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <org.mozilla.gecko.toolbar.TabletTabsButton android:id="@+id/tabs"
                                                style="@style/UrlBar.ImageButton"
                                                android:layout_width="84dip"
                                                android:layout_alignParentLeft="true"
                                                android:background="@drawable/shaped_button"
                                                android:gravity="center_vertical"
                                                android:paddingLeft="6dip"
                                                android:paddingRight="38dip"/>

    <!-- The TextSwitcher should be shifted 28dp on the right, to avoid
         the curve. On a 56dp space, centering 24dp image will leave
         16dp on all sides. However this image has a perception of
         2 layers. Hence to center this, an additional 4dp is added to the right.
         The margins will be 12dp on left, 48dp on right, instead of ideal 16dp
         and 44dp. -->
    <org.mozilla.gecko.toolbar.TabCounter android:id="@+id/tabs_counter"
                        style="@style/UrlBar.ImageButton.TabCount"
                        android:layout_width="24dip"
                        android:layout_height="24dip"
                        android:layout_marginLeft="12dip"
                        android:layout_marginRight="48dip"
                        android:layout_marginTop="16dp"
                        android:layout_alignLeft="@id/tabs"/>

    <!-- In editing mode, the toolbar shrinks by changing to
         dynamically constructed LayoutParams. -->
    <ImageView android:id="@+id/url_bar_entry"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:layout_toRightOf="@id/tabs"
               android:layout_toLeftOf="@+id/menu_items"
               android:layout_marginLeft="-18dp"
               android:layout_marginTop="8dp"
               android:layout_marginBottom="8dp"
               android:duplicateParentState="true"
               android:clickable="false"
               android:focusable="false"
               android:background="@drawable/url_bar_entry"/>

    <org.mozilla.gecko.toolbar.ForwardButton style="@style/UrlBar.ImageButton.Forward"
                                             android:id="@+id/forward"
                                             android:layout_toRightOf="@+id/tabs"/>

    <org.mozilla.gecko.toolbar.BackButton android:id="@+id/back"
                                          style="@style/UrlBar.ImageButton"
                                          android:layout_width="50dip"
                                          android:layout_height="50dip"
                                          android:layout_toRightOf="@id/tabs"
                                          android:layout_marginLeft="-28dp"
                                          android:layout_centerVertical="true"
                                          android:padding="13dp"
                                          android:src="@drawable/ic_menu_back"
                                          android:contentDescription="@string/back"
                                          android:background="@drawable/url_bar_nav_button"/>

    <org.mozilla.gecko.toolbar.ToolbarEditLayout android:id="@+id/edit_layout"
                  style="@style/UrlBar.Button"
                  android:paddingLeft="12dp"
                  android:paddingRight="12dp"
                  android:visibility="gone"
                  android:orientation="horizontal"
                  android:layout_toRightOf="@id/back"
                  android:layout_toLeftOf="@id/menu_items"/>

    <org.mozilla.gecko.toolbar.ToolbarDisplayLayout android:id="@+id/display_layout"
                  style="@style/UrlBar.Button.Container"
                  android:layout_toRightOf="@id/back"
                  android:layout_toLeftOf="@id/menu_items"
                  android:paddingLeft="12dip"
                  android:paddingRight="8dip"/>

    <LinearLayout android:id="@id/menu_items"
                  android:layout_width="wrap_content"
                  android:layout_height="match_parent"
                  android:layout_marginLeft="3dp"
                  android:orientation="horizontal"
                  android:layout_toLeftOf="@id/menu"
                  android:layout_alignWithParentIfMissing="true"/>

    <org.mozilla.gecko.widget.ThemedImageButton android:id="@+id/menu"
                                                style="@style/UrlBar.ImageButton"
                                                android:layout_alignParentRight="true"
                                                android:contentDescription="@string/menu"
                                                android:background="@drawable/action_bar_button"
                                                android:visibility="gone"/>

    <org.mozilla.gecko.widget.ThemedImageView android:id="@+id/menu_icon"
                                              style="@style/UrlBar.ImageButton"
                                              android:layout_alignLeft="@id/menu"
                                              android:layout_alignRight="@id/menu"
                                              android:gravity="center_vertical"
                                              android:src="@drawable/menu_level"
                                              android:visibility="gone"/>

    <!-- We draw after the menu items so when they are hidden, the cancel button,
         which is thus drawn on top, may be pressed. -->
    <org.mozilla.gecko.widget.ThemedImageView
            android:id="@+id/edit_cancel"
            style="@style/UrlBar.ImageButton"
            android:layout_alignParentRight="true"
            android:src="@drawable/close_edit_mode_selector"
            android:background="@drawable/action_bar_button"
            android:paddingLeft="2dp"
            android:paddingRight="2dp"
            android:contentDescription="@string/edit_mode_cancel"
            android:visibility="gone"/>

</merge>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
  <!ENTITY % findBarDTD SYSTEM "chrome://global/locale/findbar.dtd" >
  %findBarDTD;
]>

<bindings id="browserBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="browser" extends="xul:browser" role="outerdoc">
    <content clickthrough="never">
      <children/>
    </content>
    <implementation type="application/javascript" implements="nsIObserver, nsIDOMEventListener, nsIFrameRequestCallback, nsIMessageListener">
      <property name="autoscrollEnabled">
        <getter>
          <![CDATA[
            if (this.getAttribute("autoscroll") == "false")
              return false;

            var enabled = true;
            try {
              enabled = this.mPrefs.getBoolPref("general.autoScroll");
            }
            catch(ex) {
            }

            return enabled;
          ]]>
        </getter>
      </property>

      <property name="canGoBack"
                onget="return this.webNavigation.canGoBack;"
                readonly="true"/>

      <property name="canGoForward"
                onget="return this.webNavigation.canGoForward;"
                readonly="true"/>

      <method name="goBack">
        <body>
          <![CDATA[
            var webNavigation = this.webNavigation;
            if (webNavigation.canGoBack) {
              try {
                this.userTypedClear++;
                webNavigation.goBack();
              } finally {
                if (this.userTypedClear)
                  this.userTypedClear--;
              }
            }
          ]]>
        </body>
      </method>

      <method name="goForward">
        <body>
          <![CDATA[
            var webNavigation = this.webNavigation;
            if (webNavigation.canGoForward) {
              try {
                this.userTypedClear++;
                webNavigation.goForward();
              } finally {
                if (this.userTypedClear)
                  this.userTypedClear--;
              }
            }
          ]]>
        </body>
      </method>

      <method name="reload">
        <body>
          <![CDATA[
            const nsIWebNavigation = Components.interfaces.nsIWebNavigation;
            const flags = nsIWebNavigation.LOAD_FLAGS_NONE;
            this.reloadWithFlags(flags);
          ]]>
        </body>
      </method>

      <method name="reloadWithFlags">
        <parameter name="aFlags"/>
        <body>
          <![CDATA[
            this.webNavigation.reload(aFlags);
          ]]>
        </body>
      </method>

      <method name="stop">
        <body>
          <![CDATA[
            const nsIWebNavigation = Components.interfaces.nsIWebNavigation;
            const flags = nsIWebNavigation.STOP_ALL;
            this.webNavigation.stop(flags);
          ]]>
        </body>
      </method>

      <!-- throws exception for unknown schemes -->
      <method name="loadURI">
        <parameter name="aURI"/>
        <parameter name="aReferrerURI"/>
        <parameter name="aCharset"/>
        <body>
          <![CDATA[
            const nsIWebNavigation = Components.interfaces.nsIWebNavigation;
            const flags = nsIWebNavigation.LOAD_FLAGS_NONE;
            this.loadURIWithFlags(aURI, flags, aReferrerURI, aCharset);
          ]]>
        </body>
      </method>

      <!-- throws exception for unknown schemes -->
      <method name="loadURIWithFlags">
        <parameter name="aURI"/>
        <parameter name="aFlags"/>
        <parameter name="aReferrerURI"/>
        <parameter name="aCharset"/>
        <parameter name="aPostData"/>
        <body>
          <![CDATA[
            if (!aURI)
              aURI = "about:blank";

            if (!(aFlags & this.webNavigation.LOAD_FLAGS_FROM_EXTERNAL))
              this.userTypedClear++;

            try {
              this.webNavigation.loadURI(aURI, aFlags, aReferrerURI, aPostData, null);
            } finally {
              if (this.userTypedClear)
                this.userTypedClear--;
            }
          ]]>
        </body>
      </method>

      <method name="goHome">
        <body>
          <![CDATA[
            try {
              this.loadURI(this.homePage);
            }
            catch (e) {
            }
          ]]>
        </body>
      </method>

      <property name="homePage">
        <getter>
          <![CDATA[
            var uri;

            if (this.hasAttribute("homepage"))
              uri = this.getAttribute("homepage");
            else
              uri = "http://www.mozilla.org/"; // widget pride

            return uri;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            this.setAttribute("homepage", val);
            return val;
          ]]>
        </setter>
      </property>

      <method name="gotoIndex">
        <parameter name="aIndex"/>
        <body>
          <![CDATA[
            try {
              this.userTypedClear++;
              this.webNavigation.gotoIndex(aIndex);
            } finally {
              if (this.userTypedClear)
                this.userTypedClear--;
            }
          ]]>
        </body>
      </method>

      <property name="currentURI" readonly="true">
       <getter><![CDATA[
          if (this.webNavigation) {
            return this.webNavigation.currentURI;
          }
          return null;
       ]]>
       </getter>
      </property>

      <!--
        Used by session restore to ensure that currentURI is set so
        that switch-to-tab works before the tab is fully
        restored. This function also invokes onLocationChanged
        listeners in tabbrowser.xml.
      -->
      <method name="_setCurrentURI">
        <parameter name="aURI"/>
        <body><![CDATA[
          this.docShell.setCurrentURI(aURI);
        ]]></body>
      </method>

      <property name="documentURI"
                onget="return this.contentDocument.documentURIObject;"
                readonly="true"/>

      <property name="documentContentType"
                onget="return this.contentDocument ? this.contentDocument.contentType : null;"
                readonly="true"/>

      <property name="preferences"
                onget="return this.mPrefs.QueryInterface(Components.interfaces.nsIPrefService);"
                readonly="true"/>

      <field name="_docShell">null</field>

      <property name="docShell" readonly="true">
        <getter><![CDATA[
          if (this._docShell)
            return this._docShell;

          let frameLoader = this.QueryInterface(Components.interfaces.nsIFrameLoaderOwner).frameLoader;
          if (!frameLoader)
            return null;
          this._docShell = frameLoader.docShell;
          return this._docShell;
        ]]></getter>
      </property>

      <field name="_loadContext">null</field>

      <property name="loadContext" readonly="true">
        <getter><![CDATA[
          if (this._loadContext)
            return this._loadContext;

          let frameLoader = this.QueryInterface(Components.interfaces.nsIFrameLoaderOwner).frameLoader;
          if (!frameLoader)
            return null;
          this._loadContext = frameLoader.loadContext;
          return this._loadContext;
        ]]></getter>
      </property>

      <property name="docShellIsActive">
        <getter>
          <![CDATA[
            return this.docShell && this.docShell.isActive;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            if (this.docShell)
              return this.docShell.isActive = val;
            return false;
          ]]>
        </setter>
      </property>

      <property name="imageDocument"
                readonly="true">
        <getter>
          <![CDATA[
            var document = this.contentDocument;
            if (!document || !(document instanceof Ci.nsIImageDocument))
              return null;

            try {
                return {width: document.imageRequest.image.width, height: document.imageRequest.image.height };
            } catch (e) {}
            return null;
          ]]>
        </getter>
      </property>

      <property name="isRemoteBrowser"
                onget="return (this.getAttribute('remote') == 'true');"
                readonly="true"/>

      <property name="messageManager"
                readonly="true">
        <getter>
          <![CDATA[
            var owner = this.QueryInterface(Components.interfaces.nsIFrameLoaderOwner);
            if (!owner.frameLoader) {
              return null;
            }
            return owner.frameLoader.messageManager;
          ]]>
        </getter>

      </property>

      <field name="_webNavigation">null</field>

      <property name="webNavigation"
                readonly="true">
        <getter>
        <![CDATA[
          if (!this._webNavigation) {
            if (!this.docShell) {
              return null;
            }
            this._webNavigation = this.docShell.QueryInterface(Components.interfaces.nsIWebNavigation);
          }
          return this._webNavigation;
        ]]>
        </getter>
      </property>

      <field name="_webBrowserFind">null</field>

      <property name="webBrowserFind"
                readonly="true">
        <getter>
        <![CDATA[
          if (!this._webBrowserFind)
            this._webBrowserFind = this.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIWebBrowserFind);
          return this._webBrowserFind;
        ]]>
        </getter>
      </property>

      <method name="getTabBrowser">
        <body>
          <![CDATA[
            var tabBrowser = this.parentNode;
            while (tabBrowser && tabBrowser.localName != "tabbrowser")
              tabBrowser = tabBrowser.parentNode;
            return tabBrowser;
          ]]>
        </body>
      </method>

      <field name="_finder">null</field>

      <property name="finder" readonly="true">
        <getter><![CDATA[
          if (!this._finder) {
            if (!this.docShell)
              return null;

            let Finder = Components.utils.import("resource://gre/modules/Finder.jsm", {}).Finder;
            this._finder = new Finder(this.docShell);
          }
          return this._finder;
        ]]></getter>
      </property>

      <field name="_fastFind">null</field>
      <property name="fastFind" readonly="true">
        <getter><![CDATA[
          if (!this._fastFind) {
            if (!("@mozilla.org/typeaheadfind;1" in Components.classes))
              return null;

            var tabBrowser = this.getTabBrowser();
            if (tabBrowser && "fastFind" in tabBrowser)
              return this._fastFind = tabBrowser.fastFind;

            if (!this.docShell)
              return null;

            this._fastFind = Components.classes["@mozilla.org/typeaheadfind;1"]
                                       .createInstance(Components.interfaces.nsITypeAheadFind);
            this._fastFind.init(this.docShell);
          }
          return this._fastFind;
        ]]></getter>
      </property>

      <field name="_permanentKey">({})</field>

      <property name="permanentKey"
                onget="return this._permanentKey;"
                onset="this._permanentKey = val;"/>

      <field name="_lastSearchString">null</field>
      <field name="_lastSearchHighlight">false</field>

      <property name="webProgress"
                readonly="true"
                onget="return this.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIWebProgress);"/>

      <field name="_contentWindow">null</field>

      <property name="contentWindow"
                readonly="true"
                onget="return this._contentWindow || (this._contentWindow = this.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIDOMWindow));"/>

      <property name="contentWindowAsCPOW"
                readonly="true"
                onget="return this.contentWindow;"/>

      <property name="sessionHistory"
                onget="return this.webNavigation.sessionHistory;"
                readonly="true"/>

      <property name="markupDocumentViewer"
                onget="return this.docShell.contentViewer;"
                readonly="true"/>

      <property name="contentViewerEdit"
                onget="return this.docShell.contentViewer.QueryInterface(Components.interfaces.nsIContentViewerEdit);"
                readonly="true"/>

      <property name="contentViewerFile"
                onget="return this.docShell.contentViewer.QueryInterface(Components.interfaces.nsIContentViewerFile);"
                readonly="true"/>

      <property name="contentDocument"
                onget="return this.webNavigation.document;"
                readonly="true"/>

      <property name="contentDocumentAsCPOW"
                onget="return this.contentDocument;"
                readonly="true"/>

      <property name="contentTitle"
                onget="return this.contentDocument.title;"
                readonly="true"/>

      <property name="characterSet"
                onget="return this.docShell.charset;">
        <setter><![CDATA[
          this.docShell.charset = val;
          this.docShell.gatherCharsetMenuTelemetry();
        ]]></setter>
      </property>

      <property name="mayEnableCharacterEncodingMenu"
                onget="return this.docShell.mayEnableCharacterEncodingMenu;"
                readonly="true"/>

      <property name="contentPrincipal"
                onget="return this.contentDocument.nodePrincipal;"
                readonly="true"/>

      <property name="showWindowResizer"
                onset="if (val) this.setAttribute('showresizer', 'true');
                       else this.removeAttribute('showresizer');
                       return val;"
                onget="return this.getAttribute('showresizer') == 'true';"/>


      <property name="fullZoom">
        <getter><![CDATA[
          return this.markupDocumentViewer.fullZoom;
        ]]></getter>
        <setter><![CDATA[
          this.markupDocumentViewer.fullZoom = val;
        ]]></setter>
      </property>

      <property name="textZoom">
        <getter><![CDATA[
          return this.markupDocumentViewer.textZoom;
        ]]></getter>
        <setter><![CDATA[
          this.markupDocumentViewer.textZoom = val;
        ]]></setter>
      </property>

      <property name="isSyntheticDocument">
        <getter><![CDATA[
          return this.contentDocument.mozSyntheticDocument;
        ]]></getter>
      </property>

      <field name="mPrefs" readonly="true">
        Components.classes['@mozilla.org/preferences-service;1']
                  .getService(Components.interfaces.nsIPrefBranch);
      </field>

      <field name="mAtomService" readonly="true">
        Components.classes['@mozilla.org/atom-service;1']
                  .getService(Components.interfaces.nsIAtomService);
      </field>

      <field name="_mStrBundle">null</field>

      <property name="mStrBundle">
        <getter>
        <![CDATA[
          if (!this._mStrBundle) {
            // need to create string bundle manually instead of using <xul:stringbundle/>
            // see bug 63370 for details
            this._mStrBundle = Components.classes["@mozilla.org/intl/stringbundle;1"]
                                         .getService(Components.interfaces.nsIStringBundleService)
                                         .createBundle("chrome://global/locale/browser.properties");
          }
          return this._mStrBundle;
        ]]></getter>
      </property>

      <method name="addProgressListener">
        <parameter name="aListener"/>
        <parameter name="aNotifyMask"/>
        <body>
          <![CDATA[
            if (!aNotifyMask) {
              aNotifyMask = Components.interfaces.nsIWebProgress.NOTIFY_ALL;
            }
            this.webProgress.addProgressListener(aListener, aNotifyMask);
          ]]>
        </body>
      </method>

      <method name="removeProgressListener">
        <parameter name="aListener"/>
        <body>
          <![CDATA[
            this.webProgress.removeProgressListener(aListener);
         ]]>
        </body>
      </method>

      <method name="attachFormFill">
        <body>
          <![CDATA[
          if (!this.mFormFillAttached && this.hasAttribute("autocompletepopup")) {
            // hoop up the form fill autocomplete controller
            var controller = Components.classes["@mozilla.org/satchel/form-fill-controller;1"].
                               getService(Components.interfaces.nsIFormFillController);

            var popup = document.getElementById(this.getAttribute("autocompletepopup"));
            if (popup) {
              controller.attachToBrowser(this.docShell, popup.QueryInterface(Components.interfaces.nsIAutoCompletePopup));
              this.mFormFillAttached = true;
            }
          }
          ]]>
        </body>
      </method>

      <method name="detachFormFill">
        <body>
          <![CDATA[
          if (this.mFormFillAttached) {
            // hoop up the form fill autocomplete controller
            var controller = Components.classes["@mozilla.org/satchel/form-fill-controller;1"].
                               getService(Components.interfaces.nsIFormFillController);
            controller.detachFromBrowser(this.docShell);

            this.mFormFillAttached = false;
          }
          ]]>
        </body>
      </method>

      <method name="findChildShell">
        <parameter name="aDocShell"/>
        <parameter name="aSoughtURI"/>
        <body>
          <![CDATA[
            if (aDocShell.QueryInterface(Components.interfaces.nsIWebNavigation)
                         .currentURI.spec == aSoughtURI.spec)
              return aDocShell;
            var node = aDocShell.QueryInterface(
                                   Components.interfaces.nsIDocShellTreeItem);
            for (var i = 0; i < node.childCount; ++i) {
              var docShell = node.getChildAt(i);
              docShell = this.findChildShell(docShell, aSoughtURI);
              if (docShell)
                return docShell;
            }
            return null;
          ]]>
        </body>
      </method>

      <method name="onPageShow">
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            this.attachFormFill();
         ]]>
        </body>
      </method>

      <method name="onPageHide">
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            // Delete the feeds cache if we're hiding the topmost page
            // (as opposed to one of its iframes).
            if (this.feeds && aEvent.target == this.contentDocument)
              this.feeds = null;
            if (!this.docShell || !this.fastFind)
              return;
            var tabBrowser = this.getTabBrowser();
            if (!tabBrowser || !("fastFind" in tabBrowser) ||
                tabBrowser.selectedBrowser == this)
              this.fastFind.setDocShell(this.docShell);
         ]]>
        </body>
      </method>

      <method name="updateBlockedPopups">
        <body>
          <![CDATA[
            var event = document.createEvent("Events");
            event.initEvent("DOMUpdatePageReport", true, true);
            this.dispatchEvent(event);
          ]]>
        </body>
      </method>

      <method name="unblockPopup">
        <parameter name="aPopupIndex"/>
        <body><![CDATA[
          this.messageManager.sendAsyncMessage("PopupBlocking:UnblockPopup",
                                               {index: aPopupIndex});
        ]]></body>
      </method>

      <field name="blockedPopups">null</field>

      <!-- Obsolete name for blockedPopups. Used by metro and android. -->
      <property name="pageReport"
         onget="return this.blockedPopups;"
         readonly="true"/>

      <property name="securityUI">
        <getter>
          <![CDATA[
            // Bug 666809 - SecurityUI support for e10s
            if (!this.docShell)
              return null;

            if (!this.docShell.securityUI) {
              const SECUREBROWSERUI_CONTRACTID = "@mozilla.org/secure_browser_ui;1";
              if (!this.hasAttribute("disablesecurity") &&
                  SECUREBROWSERUI_CONTRACTID in Components.classes) {
                var securityUI = Components.classes[SECUREBROWSERUI_CONTRACTID]
                                           .createInstance(Components.interfaces.nsISecureBrowserUI);
                securityUI.init(this.contentWindow);
              }
            }

            return this.docShell.securityUI;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            this.docShell.securityUI = val;
          ]]>
        </setter>
      </property>

      <method name="adjustPriority">
        <parameter name="adjustment"/>
        <body><![CDATA[
          let loadGroup = this.webNavigation.QueryInterface(Ci.nsIDocumentLoader)
                              .loadGroup.QueryInterface(Ci.nsISupportsPriority);
          loadGroup.adjustPriority(adjustment);
        ]]></body>
      </method>

      <!--
        This field tracks the location bar state. The value that the user typed
        in to the location bar may not be changed while this field is zero.
        However invoking a load will temporarily increase this field to allow
        the location bar to be updated to the new URL.

        Case 1: Anchor scroll
          The user appends the anchor to the URL. This sets the location bar
          into typed state, and disables changes to the location bar. The user
          then requests the scroll. loadURIWithFlags temporarily increases the
          flag by 1 so that the anchor scroll's location change resets the
          location bar state.

        Case 2: Interrupted load
          The user types in and submits the URL. This triggers an asynchronous
          network load which increases the flag by 2. (The temporary increase
          from loadURIWithFlags is not noticeable in this case.) When the load
          is interrupted the flag returns to zero, and the location bar stays
          in typed state.

        Case 3: New load
          This works like case 2, but as the load is not interrupted the
          location changes while the flag is still 2 thus resetting the
          location bar state.

        Case 4: Corrected load
          This is a combination of case 2 and case 3, except that the original
          load is interrupted by the new load. Normally cancelling and starting
          a new load would reset the flag to 0 and then increase it to 2 again.
          However both actions occur as a consequence of the loadURIWithFlags
          invocation, which adds its temporary increase in to the mix. Since
          the new URL would have been typed in the flag would have been reset
          before loadURIWithFlags incremented it. The interruption resets the
          flag to 0 and increases it to 2. Although loadURIWithFlags will
          decrement the flag it remains at 1 thus allowing the location bar
          state to be reset when the new load changes the location.
          This case also applies when loading into a new browser, as this
          interrupts the default load of about:blank.
      -->
      <field name="userTypedClear">
        1
      </field>

      <field name="_userTypedValue">
        null
      </field>

      <property name="userTypedValue"
                onget="return this._userTypedValue;">
        <setter><![CDATA[
          this.userTypedClear = 0;
          this._userTypedValue = val;
          return val;
        ]]></setter>
      </property>

      <field name="mFormFillAttached">
        false
      </field>

      <field name="isShowingMessage">
        false
      </field>

      <field name="droppedLinkHandler">
        null
      </field>

      <field name="mIconURL">null</field>

      <!-- This is managed by the tabbrowser -->
      <field name="lastURI">null</field>

      <field name="mDestroyed">false</field>

      <constructor>
        <![CDATA[
          try {
            // |webNavigation.sessionHistory| will have been set by the frame
            // loader when creating the docShell as long as this xul:browser
            // doesn't have the 'disablehistory' attribute set.
            if (this.docShell && this.webNavigation.sessionHistory) {
              var os = Components.classes["@mozilla.org/observer-service;1"]
                                 .getService(Components.interfaces.nsIObserverService);
              os.addObserver(this, "browser:purge-session-history", false);

              // enable global history if we weren't told otherwise
              if (!this.hasAttribute("disableglobalhistory") && !this.isRemoteBrowser) {
                try {
                  this.docShell.useGlobalHistory = true;
                } catch(ex) {
                  // This can occur if the Places database is locked
                  Components.utils.reportError("Error enabling browser global history: " + ex);
                }
              }
            }
          }
          catch (e) {
            Components.utils.reportError(e);
          }
          try {
            var securityUI = this.securityUI;
          }
          catch (e) {
          }

          // Listen for first load for lazy attachment to form fill controller
          // (But we don't want to do this for remote browsers - the test infra
          // might fire these events when they normally wouldn't.)
          if (!this.isRemoteBrowser) {
            this.addEventListener("pageshow", this.onPageShow, true);
            this.addEventListener("pagehide", this.onPageHide, true);
          }

          if (this.messageManager) {
            this.messageManager.addMessageListener("PopupBlocking:UpdateBlockedPopups", this);
            this.messageManager.addMessageListener("Autoscroll:Start", this);
            this.messageManager.addMessageListener("Autoscroll:Cancel", this);
          }
        ]]>
      </constructor>

      <destructor>
        <![CDATA[
          this.destroy();
        ]]>
      </destructor>

      <!-- This is necessary because the destructor doesn't always get called when
           we are removed from a tabbrowser. This will be explicitly called by tabbrowser -->
      <method name="destroy">
        <body>
          <![CDATA[
          if (this.mDestroyed)
            return;
          this.mDestroyed = true;

          if (this.docShell && this.webNavigation.sessionHistory) {
            var os = Components.classes["@mozilla.org/observer-service;1"]
                               .getService(Components.interfaces.nsIObserverService);
            try {
              os.removeObserver(this, "browser:purge-session-history");
            } catch (ex) {
              // It's not clear why this sometimes throws an exception.
            }
          }

          this.detachFormFill();

          this._fastFind = null;
          this._webBrowserFind = null;

          // The feeds cache can keep the document inside this browser alive.
          this.feeds = null;

          this.lastURI = null;

          if (!this.isRemoteBrowser) {
            this.removeEventListener("pageshow", this.onPageShow, true);
            this.removeEventListener("pagehide", this.onPageHide, true);
          }

          if (this._autoScrollNeedsCleanup) {
            // we polluted the global scope, so clean it up
            this._autoScrollPopup.parentNode.removeChild(this._autoScrollPopup);
          }
          ]]>
        </body>
      </method>

      <!--
        We call this _receiveMessage (and alias receiveMessage to it) so that
        bindings that inherit from this one can delegate to it.
      -->
      <method name="_receiveMessage">
        <parameter name="aMessage"/>
        <body><![CDATA[
          let data = aMessage.data;
          switch (aMessage.name) {
            case "PopupBlocking:UpdateBlockedPopups": {
              this.blockedPopups = data.blockedPopups;
              if (this.blockedPopups) {
                for (let i = 0; i < this.blockedPopups.length; i++) {
                  let scope = Components.utils.import("resource://gre/modules/BrowserUtils.jsm", {});
                  let uri = scope.BrowserUtils.makeURI(this.blockedPopups[i].popupWindowURI);
                  this.blockedPopups[i].popupWindowURI = uri;
                }
                if (data.freshPopup) {
                  this.blockedPopups.reported = false;
                }
              }
              this.updateBlockedPopups();
              break;
            }
            case "Autoscroll:Start": {
              if (!this.autoscrollEnabled) {
                return false;
              }
              let pos = this.mapScreenCoordinatesFromContent(data.screenX, data.screenY);
              this.startScroll(data.scrolldir, pos.x, pos.y);
              return true;
            }
            case "Autoscroll:Cancel":
              this._autoScrollPopup.hidePopup();
              break;
          }
        ]]></body>
      </method>

      <method name="receiveMessage">
        <parameter name="aMessage"/>
        <body><![CDATA[
          return this._receiveMessage(aMessage);
        ]]></body>
      </method>

      <method name="observe">
        <parameter name="aSubject"/>
        <parameter name="aTopic"/>
        <parameter name="aState"/>
        <body>
          <![CDATA[
            if (aTopic != "browser:purge-session-history" || !this.sessionHistory)
              return;

            // place the entry at current index at the end of the history list, so it won't get removed
            if (this.sessionHistory.index < this.sessionHistory.count - 1) {
              var indexEntry = this.sessionHistory.getEntryAtIndex(this.sessionHistory.index, false);
              this.sessionHistory.QueryInterface(Components.interfaces.nsISHistoryInternal);
              indexEntry.QueryInterface(Components.interfaces.nsISHEntry);
              this.sessionHistory.addEntry(indexEntry, true);
            }

            var purge = this.sessionHistory.count;
            if (this.currentURI != "about:blank")
              --purge; // Don't remove the page the user's staring at from shistory

            if (purge > 0)
              this.sessionHistory.PurgeHistory(purge);
          ]]>
        </body>
      </method>

      <field name="_AUTOSCROLL_SNAP">10</field>
      <field name="_scrolling">false</field>
      <field name="_startX">null</field>
      <field name="_startY">null</field>
      <field name="_autoScrollPopup">null</field>
      <field name="_autoScrollNeedsCleanup">false</field>

      <method name="stopScroll">
        <body>
          <![CDATA[
            if (this._scrolling) {
              this._scrolling = false;
              window.removeEventListener("mousemove", this, true);
              window.removeEventListener("mousedown", this, true);
              window.removeEventListener("mouseup", this, true);
              window.removeEventListener("contextmenu", this, true);
              window.removeEventListener("keydown", this, true);
              window.removeEventListener("keypress", this, true);
              window.removeEventListener("keyup", this, true);
              this.messageManager.sendAsyncMessage("Autoscroll:Stop");
            }
         ]]>
       </body>
     </method>

      <method name="_createAutoScrollPopup">
        <body>
          <![CDATA[
            const XUL_NS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
            var popup = document.createElementNS(XUL_NS, "panel");
            popup.className = "autoscroller";
            // We set this attribute on the element so that mousemove
            // events can be handled by browser-content.js.
            popup.setAttribute("mousethrough", "always");
            return popup;
          ]]>
        </body>
      </method>

      <method name="startScroll">
        <parameter name="scrolldir"/>
        <parameter name="screenX"/>
        <parameter name="screenY"/>
        <body><![CDATA[
            if (!this._autoScrollPopup) {
              if (this.hasAttribute("autoscrollpopup")) {
                // our creator provided a popup to share
                this._autoScrollPopup = document.getElementById(this.getAttribute("autoscrollpopup"));
              }
              else {
                // we weren't provided a popup; we have to use the global scope
                this._autoScrollPopup = this._createAutoScrollPopup();
                document.documentElement.appendChild(this._autoScrollPopup);
                this._autoScrollNeedsCleanup = true;
              }
            }

            // we need these attributes so themers don't need to create per-platform packages
            if (screen.colorDepth > 8) { // need high color for transparency
              // Exclude second-rate platforms
              this._autoScrollPopup.setAttribute("transparent", !/BeOS|OS\/2/.test(navigator.appVersion));
              // Enable translucency on Windows and Mac
              this._autoScrollPopup.setAttribute("translucent", /Win|Mac/.test(navigator.platform));
            }

            this._autoScrollPopup.setAttribute("scrolldir", scrolldir);
            this._autoScrollPopup.addEventListener("popuphidden", this, true);
            this._autoScrollPopup.showPopup(document.documentElement,
                                            screenX,
                                            screenY,
                                            "popup", null, null);
            this._ignoreMouseEvents = true;
            this._scrolling = true;
            this._startX = screenX;
            this._startY = screenY;

            window.addEventListener("mousemove", this, true);
            window.addEventListener("mousedown", this, true);
            window.addEventListener("mouseup", this, true);
            window.addEventListener("contextmenu", this, true);
            window.addEventListener("keydown", this, true);
            window.addEventListener("keypress", this, true);
            window.addEventListener("keyup", this, true);
         ]]>
       </body>
     </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body>
        <![CDATA[
          if (this._scrolling) {
            switch(aEvent.type) {
              case "mousemove": {
                var x = aEvent.screenX - this._startX;
                var y = aEvent.screenY - this._startY;

                if ((x > this._AUTOSCROLL_SNAP || x < -this._AUTOSCROLL_SNAP) ||
                    (y > this._AUTOSCROLL_SNAP || y < -this._AUTOSCROLL_SNAP))
                  this._ignoreMouseEvents = false;
                break;
              }
              case "mouseup":
              case "mousedown":
              case "contextmenu": {
                if (!this._ignoreMouseEvents)
                  this._autoScrollPopup.hidePopup();
                this._ignoreMouseEvents = false;
                break;
              }
              case "popuphidden": {
                this._autoScrollPopup.removeEventListener("popuphidden", this, true);
                this.stopScroll();
                break;
              }
              case "keydown": {
                if (aEvent.keyCode == aEvent.DOM_VK_ESCAPE) {
                  // the escape key will be processed by
                  // nsXULPopupManager::KeyDown and the panel will be closed.
                  // So, don't consume the key event here.
                  break;
                }
                // don't break here. we need to eat keydown events.
              }
              case "keypress":
              case "keyup": {
                // All keyevents should be eaten here during autoscrolling.
                aEvent.stopPropagation();
                aEvent.preventDefault();
                break;
              }
            }
          }
        ]]>
        </body>
      </method>

      <!--
        For out-of-process code, event.screen[XY] is relative to the
        left/top of the content view. For in-process code,
        event.screen[XY] is relative to the left/top of the screen. We
        use this method to map screen coordinates received from a
        (possibly out-of-process) <browser> element to coordinates
        that are relative to the screen. This code handles the
        in-process case, where we return the coordinates unchanged.
      -->
      <method name="mapScreenCoordinatesFromContent">
        <parameter name="aScreenX"/>
        <parameter name="aScreenY"/>
        <body>
        <![CDATA[
          return { x: aScreenX, y: aScreenY };
        ]]>
        </body>
      </method>

      <method name="swapDocShells">
        <parameter name="aOtherBrowser"/>
        <body>
        <![CDATA[
          // We need to swap fields that are tied to our docshell or related to
          // the loaded page
          // Fields which are built as a result of notifactions (pageshow/hide,
          // DOMLinkAdded/Removed, onStateChange) should not be swapped here,
          // because these notifications are dispatched again once the docshells
          // are swapped.
          var fieldsToSwap = [
            "_docShell",
            "_webBrowserFind",
            "_contentWindow",
            "_webNavigation",
            "_permanentKey"
          ];

          var ourFieldValues = {};
          var otherFieldValues = {};
          for each (var field in fieldsToSwap) {
            ourFieldValues[field] = this[field];
            otherFieldValues[field] = aOtherBrowser[field];
          }

          if (window.PopupNotifications)
            PopupNotifications._swapBrowserNotifications(aOtherBrowser, this);

          this.QueryInterface(Components.interfaces.nsIFrameLoaderOwner)
              .swapFrameLoaders(aOtherBrowser);

          // Before we swap the actual docShell property we need to detach the
          // form fill controller from those docShells.
          this.detachFormFill();
          aOtherBrowser.detachFormFill();

          for each (var field in fieldsToSwap) {
            this[field] = otherFieldValues[field];
            aOtherBrowser[field] = ourFieldValues[field];
          }

          // Re-attach the docShells to the form fill controller.
          if (!this.isRemoteBrowser) {
            this.attachFormFill();
          }
          if (!aOtherBrowser.isRemoteBrowser) {
            aOtherBrowser.attachFormFill();
          }

          // Null the current nsITypeAheadFind instances so that they're
          // lazily re-created on access. We need to do this because they
          // might have attached the wrong docShell.
          this._fastFind = aOtherBrowser._fastFind = null;
        ]]>
        </body>
      </method>
    </implementation>

    <handlers>
      <handler event="keypress" keycode="VK_F7" group="system">
        <![CDATA[
          if (event.defaultPrevented || !event.isTrusted)
            return;

          const kPrefShortcutEnabled = "accessibility.browsewithcaret_shortcut.enabled";
          const kPrefWarnOnEnable    = "accessibility.warn_on_browsewithcaret";
          const kPrefCaretBrowsingOn = "accessibility.browsewithcaret";

          var isEnabled = this.mPrefs.getBoolPref(kPrefShortcutEnabled);
          if (!isEnabled)
            return;

          // Toggle browse with caret mode
          var browseWithCaretOn = false;
          var warn = true;

          try {
            warn = this.mPrefs.getBoolPref(kPrefWarnOnEnable);
          } catch (ex) {
          }

          try {
            browseWithCaretOn = this.mPrefs.getBoolPref(kPrefCaretBrowsingOn);
          } catch (ex) {
          }
          if (warn && !browseWithCaretOn) {
            var checkValue = {value:false};
            var promptService = Components.classes["@mozilla.org/embedcomp/prompt-service;1"]
                                          .getService(Components.interfaces.nsIPromptService);

            var buttonPressed = promptService.confirmEx(window,
              this.mStrBundle.GetStringFromName('browsewithcaret.checkWindowTitle'),
              this.mStrBundle.GetStringFromName('browsewithcaret.checkLabel'),
              // Make "No" the default:
              promptService.STD_YES_NO_BUTTONS | promptService.BUTTON_POS_1_DEFAULT,
              null, null, null, this.mStrBundle.GetStringFromName('browsewithcaret.checkMsg'),
              checkValue);
            if (buttonPressed != 0) {
              if (checkValue.value) {
                try {
                  this.mPrefs.setBoolPref(kPrefShortcutEnabled, false);
                } catch (ex) {
                }
              }
              return;
            }
            if (checkValue.value) {
              try {
                this.mPrefs.setBoolPref(kPrefWarnOnEnable, false);
              }
              catch (ex) {
              }
            }
          }

          // Toggle the pref
          try {
            this.mPrefs.setBoolPref(kPrefCaretBrowsingOn, !browseWithCaretOn);
          } catch (ex) {
          }
        ]]>
      </handler>
      <handler event="dragover" group="system">
      <![CDATA[
        if (!this.droppedLinkHandler || event.defaultPrevented)
          return;

        // For drags that appear to be internal text (for example, tab drags),
        // set the dropEffect to 'none'. This prevents the drop even if some
        // other listener cancelled the event.
        var types = event.dataTransfer.types;
        if (types.contains("text/x-moz-text-internal") && !types.contains("text/plain")) {
          event.dataTransfer.dropEffect = "none";
          event.stopPropagation();
          event.preventDefault();
        }

        let linkHandler = Components.classes["@mozilla.org/content/dropped-link-handler;1"].
                            getService(Components.interfaces.nsIDroppedLinkHandler);
        if (linkHandler.canDropLink(event, false))
          event.preventDefault();
      ]]>
      </handler>
      <handler event="drop" group="system">
      <![CDATA[
        if (!this.droppedLinkHandler || event.defaultPrevented)
          return;

        let name = { };
        let linkHandler = Components.classes["@mozilla.org/content/dropped-link-handler;1"].
                            getService(Components.interfaces.nsIDroppedLinkHandler);
        try {
          // Pass true to prevent the dropping of javascript:/data: URIs
          var uri = linkHandler.dropLink(event, name, true);
        } catch (ex) {
          return;
        }

        if (uri) {
          this.droppedLinkHandler(event, uri, name.value);
        }
      ]]>
      </handler>
    </handlers>

  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="br"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="brx"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Deva</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2012 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 32275 $"/>
		<generation date="$Date: 2012-08-28 14:56:06 -0700 (Tue, 28 Aug 2012) $"/>
		<language type="bs"/> 
		<script type="Cyrl"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cyrl</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:21 $"/>
        <language type="bs"/>
    </identity>
</ldml>
<rss version="2.0">
  <channel>
    <title>t</title>
  </channel>
</rss>
<?xml version="1.0"?>
                 <rdf:RDF 
               xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
               xmlns="http://my.netscape.com/rdf/simple/0.9/">
               <channel>
               <title>Tinderbox - Firefox</title>
               <description>Build bustages for Firefox</description>
               <link>http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox</link>
               </channel>
               <image>
               <title>Bad</title>
               <url>http://tinderbox.mozilla.org/channelflames.gif</url>
               <link>http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox</link>
               </image>
           <item><title>The tree is currently closed</title><link>http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox</link></item>

<item><title>MacOSX Darwin 8.8.4 qm-xserve01 dep unit test is in flames</title><link>http://tinderbox.mozilla.org/showbuilds.cgi?tree=Firefox</link></item>
</rdf:RDF>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
</head>

<body>

<p>foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo foo <x></y></p>

</body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title> 
  <link href="http://example.org/"/>
  <updated>2003-12-13T18:30:02Z</updated>

  <author> 
    <name>John Doe</name>
  </author> 
  <id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>

  <entry>

    <title>Good item</title>
    <link href="http://example.org/first"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>

    <summary>Some text.</summary>
  </entry>

  <entry>

    <title>data: link</title>
    <link href="data:text/plain,Hi"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6b</id>
    <updated>2003-12-13T18:30:03Z</updated>

    <summary>Some text.</summary>
  </entry>
  
  <entry>

    <title>javascript: link</title>
    <link href="javascript:alert('Hi')"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6c</id>
    <updated>2003-12-13T18:30:04Z</updated>

    <summary>Some text.</summary>
  </entry>
  
  <entry>

    <title>file: link</title>
    <link href="file:///var/"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6d</id>
    <updated>2003-12-13T18:30:05Z</updated>

    <summary>Some text.</summary>
  </entry>

  <entry>

    <title>chrome: link</title>
    <link href="chrome://browser/content/browser.js"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6e</id>
    <updated>2003-12-13T18:30:06Z</updated>

    <summary>Some text.</summary>
  </entry>

</feed>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>This is a test</body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head><base href="." /></head>
<body>This is a test</body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:base="http://www.example.com/">

  <title type="xhtml" xml:base="/foo/bar/">
    <div xmlns="http://www.w3.org/1999/xhtml">Example of a <em>special</em> feed (<img height="20px" src="baz.png" alt="base test sprite"/>)</div>
  </title>

  <subtitle type="html" xml:base="/foo/bar/">
    <![CDATA[
      With a <em>special</em> subtitle (<img height="20px" src="baz.png" alt="base test sprite"/>)
    ]]>
  </subtitle>

  <link href="http://example.org/"/>

  <updated>2010-09-02T18:30:02Z</updated>

  <author>
    <name>John Doe</name>
  </author>

  <id>urn:uuid:22906062-ecbd-46e2-b6a7-3039506a398f</id>

  <entry>
    <title type="xhtml" xml:base="/foo/bar/">
      <div xmlns="http://www.w3.org/1999/xhtml">Some <abbr title="Extensible Hyper-text Mark-up Language">XHTML</abbr> examples (<img height="20px" src="baz.png" alt="base test sprite"/>)</div>
    </title>
    <id>urn:uuid:b48083a7-71a7-4c9c-8515-b7c0d22955e7</id>
    <updated>2010-09-02T18:30:02Z</updated>
    <summary>Some text.</summary>
  </entry>

  <entry>
    <title type="html" xml:base="/foo/bar/">
      <![CDATA[
        Some <abbr title="Hyper-text Mark-up Language">HTML</abbr> examples (<img height="20px" src="baz.png" alt="base test sprite"/>)
      ]]>
    </title>
    <id>urn:uuid:1424967a-280a-414d-b0ab-8b11c4ac1bb7</id>
    <updated>2010-09-02T18:30:02Z</updated>
    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="test_bug455906_1@tests.mozilla.org" blockID="test_bug455906_1@tests.mozilla.org"/>
    <emItem id="test_bug455906_2@tests.mozilla.org" blockID="test_bug455906_2@tests.mozilla.org"/>
    <emItem id="test_bug455906_3@tests.mozilla.org" blockID="test_bug455906_3@tests.mozilla.org"/>
    <emItem id="test_bug455906_4@tests.mozilla.org" blockID="test_bug455906_4@tests.mozilla.org"/>
    <emItem id="test_bug455906_5@tests.mozilla.org" blockID="test_bug455906_5@tests.mozilla.org"/>
    <emItem id="test_bug455906_6@tests.mozilla.org" blockID="test_bug455906_6@tests.mozilla.org"/>
    <emItem id="test_bug455906_7@tests.mozilla.org" blockID="test_bug455906_7@tests.mozilla.org"/>
  </emItems>
  <pluginItems>
    <pluginItem blockID="test_bug455906_plugin">
      <match name="name" exp="^test_bug455906"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="dummy_bug455906_2@tests.mozilla.org"/>
  </emItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="test_bug455906_4@tests.mozilla.org">
      <versionRange severity="-1"/>
    </emItem>
    <emItem id="test_bug455906_5@tests.mozilla.org">
      <versionRange severity="1"/>
    </emItem>
    <emItem id="test_bug455906_6@tests.mozilla.org">
      <versionRange severity="2"/>
    </emItem>
    <emItem id="dummy_bug455906_1@tests.mozilla.org"/>
  </emItems>
  <pluginItems>
    <pluginItem>
      <match name="name" exp="^test_bug455906_4$"/>
      <versionRange severity="0"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug455906_5$"/>
      <versionRange severity="1"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug455906_6$"/>
      <versionRange severity="2"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="test_bug455906_1@tests.mozilla.org">
      <versionRange severity="-1"/>
    </emItem>
    <emItem id="test_bug455906_2@tests.mozilla.org">
      <versionRange severity="-1"/>
    </emItem>
    <emItem id="test_bug455906_3@tests.mozilla.org">
      <versionRange severity="-1"/>
    </emItem>
    <emItem id="test_bug455906_4@tests.mozilla.org">
      <versionRange severity="-1"/>
    </emItem>
    <emItem id="test_bug455906_5@tests.mozilla.org">
      <versionRange severity="-1"/>
    </emItem>
    <emItem id="test_bug455906_6@tests.mozilla.org">
      <versionRange severity="-1"/>
    </emItem>
    <emItem id="test_bug455906_7@tests.mozilla.org">
      <versionRange severity="-1"/>
    </emItem>
  </emItems>
  <pluginItems>
    <pluginItem>
      <match name="name" exp="^test_bug455906"/>
      <versionRange severity="-1"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
  <channel>
    <title>Channel title</title>
    <description>Channel description</description>
    <link>Channel link</link>
    <item>
      <title>Episode 1</title>
      <enclosure url="http://www.example.com/podcasts/Episode%201" length="0" type="audio/x-m4a" />
    </item>
    <item>
      <title>Episode 2</title>
      <enclosure url="http://www.example.com/podcasts/Episode%20%232" length="0" type="audio/x-m4a" />
    </item>
    <item>
      <title>Episode 3</title>
      <enclosure url="http://www.example.com/podcasts/Episode%20%233/" length="0" type="audio/x-m4a" />
    </item>
    <item>
      <title>Episode 4</title>
      <enclosure url="http://www.example.com/podcasts/Is%20This%20Episode%20%234%3F" length="0" type="audio/x-m4a" />
    </item>
  </channel>
</rss>
<?xml version="1.0"?>
<doc xmlns:aa="http://www.w3.org/1999/xhtml">
<aa:title>XML OK</aa:title>
</doc>
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2010-08-22T18:30:02Z</updated>

  <author>
    <name>John Doe</name>
  </author>
  <id>urn:uuid:e2df8375-99be-4848-b05e-b9d407555267</id>

  <entry>

    <title>Item</title>
    <link href="http://example.org/first"/>
    <id>urn:uuid:9e0f4bed-33d3-4a9d-97ab-ecaa31b3f14a</id>
    <updated>2010-08-22T18:30:02Z</updated>

    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="UTF-8"?>
<project name="GeckoView" default="help">

    <!-- The local.properties file is created and updated by the 'android' tool.
         It contains the path to the SDK. It should *NOT* be checked into
         Version Control Systems. -->
    <property file="local.properties" />

    <!-- The ant.properties file can be created by you. It is only edited by the
         'android' tool to add properties to it.
         This is the place to change some Ant specific build properties.
         Here are some properties you may want to change/update:

         source.dir
             The name of the source directory. Default is 'src'.
         out.dir
             The name of the output directory. Default is 'bin'.

         For other overridable properties, look at the beginning of the rules
         files in the SDK, at tools/ant/build.xml

         Properties related to the SDK location or the project target should
         be updated using the 'android' tool with the 'update' action.

         This file is an integral part of the build system for your
         application and should be checked into Version Control Systems.

         -->
    <!--<property file="ant.properties" />-->

    <!-- if sdk.dir was not set from one of the property file, then
         get it from the ANDROID_HOME env var.
         This must be done before we load project.properties since
         the proguard config can use sdk.dir -->
    <property environment="env" />
    <condition property="sdk.dir" value="${env.ANDROID_HOME}">
        <isset property="env.ANDROID_HOME" />
    </condition>

    <!-- The project.properties file is created and updated by the 'android'
         tool, as well as ADT.

         This contains project specific properties such as project target, and library
         dependencies. Lower level build properties are stored in ant.properties
         (or in .classpath for Eclipse projects).

         This file is an integral part of the build system for your
         application and should be checked into Version Control Systems. -->
    <loadproperties srcFile="project.properties" />

    <!-- quick check on sdk.dir -->
    <fail
            message="sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through the ANDROID_HOME environment variable."
            unless="sdk.dir"
    />

    <!--
        Import per project custom build rules if present at the root of the project.
        This is the place to put custom intermediary targets such as:
            -pre-build
            -pre-compile
            -post-compile (This is typically used for code obfuscation.
                           Compiled code location: ${out.classes.absolute.dir}
                           If this is not done in place, override ${out.dex.input.absolute.dir})
            -post-package
            -post-build
            -pre-clean
    -->
    <import file="custom_rules.xml" optional="true" />

    <!-- Import the actual build file.

         To customize existing targets, there are two options:
         - Customize only one target:
             - copy/paste the target into this file, *before* the
               <import> task.
             - customize it to your needs.
         - Customize the whole content of build.xml
             - copy/paste the content of the rules files (minus the top node)
               into this file, replacing the <import> task.
             - customize to your needs.

         ***********************
         ****** IMPORTANT ******
         ***********************
         In all cases you must update the value of version-tag below to read 'custom' instead of an integer,
         in order to avoid having your file be overridden by tools such as "android update project"
    -->
    <!-- version-tag: 1 -->
    <import file="${sdk.dir}/tools/ant/build.xml" />

</project>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/toast"
              style="@style/Toast">

    <TextView android:id="@+id/toast_message"
              style="@style/ToastMessage" />

    <View android:id="@+id/toast_divider"
          style="@style/ToastDivider" />

    <Button android:id="@+id/toast_button"
            style="@style/ToastButton" />

</LinearLayout>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="buttonBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="button-base" extends="chrome://global/content/bindings/general.xml#basetext" role="xul:button">
    <implementation implements="nsIDOMXULButtonElement">
      <property name="type"
                onget="return this.getAttribute('type');"
                onset="this.setAttribute('type', val); return val;"/>

      <property name="dlgType"
                onget="return this.getAttribute('dlgtype');"
                onset="this.setAttribute('dlgtype', val); return val;"/>

      <property name="group"
                onget="return this.getAttribute('group');"
                onset="this.setAttribute('group', val); return val;"/>

      <property name="open" onget="return this.hasAttribute('open');">
        <setter><![CDATA[
          if (this.boxObject instanceof MenuBoxObject) {
            this.boxObject.openMenu(val);
          } else {
            // Fall back to just setting the attribute
            if (val) {
              this.setAttribute('open', 'true');
            } else {
              this.removeAttribute('open');
            }
          }
          return val;
        ]]></setter>
      </property>

      <property name="checked" onget="return this.hasAttribute('checked');">
        <setter><![CDATA[
          if (this.type == "checkbox") {
            this.checkState = val ? 1 : 0;
          } else if (this.type == "radio" && val) {
            var sibs = this.parentNode.getElementsByAttribute("group", this.group);
            for (var i = 0; i < sibs.length; ++i)
              sibs[i].removeAttribute("checked");
          }

          if (val)
            this.setAttribute("checked", "true");
          else
            this.removeAttribute("checked");
          
          return val;
        ]]></setter>
      </property>
      
      <property name="checkState">
        <getter><![CDATA[
          var state = this.getAttribute("checkState");
          if (state == "")
            return this.checked ? 1 : 0;
          else
            return state == "0" ? 0 : (state == "2" ? 2 : 1);
        ]]></getter>
        <setter><![CDATA[
          this.setAttribute("checkState", val);
          return val;
        ]]></setter>
      </property>
      
      <property name="autoCheck"
                onget="return this.getAttribute('autoCheck') == 'true';"
                onset="this.setAttribute('autoCheck', val); return val;"/>

      <method name ="filterButtons">
        <parameter name="node"/>
        <body>
        <![CDATA[
          // if the node isn't visible, don't descend into it.
          var cs = node.ownerDocument.defaultView.getComputedStyle(node, null);
          if (cs.visibility != "visible" || cs.display == "none") {
            return NodeFilter.FILTER_REJECT;
          }
          // but it may be a popup element, in which case we look at "state"...
          if (cs.display == "-moz-popup" && node.state != "open") {
            return NodeFilter.FILTER_REJECT;
          }
          // OK - the node seems visible, so it is a candidate.
          if (node.localName == "button" && node.accessKey && !node.disabled)
            return NodeFilter.FILTER_ACCEPT;
          return NodeFilter.FILTER_SKIP;
        ]]>
        </body>
      </method>

      <method name="fireAccessKeyButton">
        <parameter name="aSubtree"/>
        <parameter name="aAccessKeyLower"/>
        <body>
        <![CDATA[
          var iterator = aSubtree.ownerDocument.createTreeWalker(aSubtree, 
                                                                 NodeFilter.SHOW_ELEMENT, 
                                                                 this.filterButtons);
          while (iterator.nextNode()) {
            var test = iterator.currentNode;
            if (test.accessKey.toLowerCase() == aAccessKeyLower && 
                !test.disabled && !test.collapsed && !test.hidden) {
              test.focus();
              test.click();
              return true;
            }
          }
          return false;
        ]]>
        </body>
      </method>

      <method name="_handleClick">
        <body>
        <![CDATA[
          if (!this.disabled &&
              (this.autoCheck || !this.hasAttribute("autoCheck"))) {

            if (this.type == "checkbox") {
              this.checked = !this.checked;
            } else if (this.type == "radio") {
              this.checked = true;
            }
          }
        ]]>
        </body>
      </method>
    </implementation>

    <handlers>
      <!-- While it would seem we could do this by handling oncommand, we can't
           because any external oncommand handlers might get called before ours,
           and then they would see the incorrect value of checked. Additionally
           a command attribute would redirect the command events anyway.-->
      <handler event="click" button="0" action="this._handleClick();"/>
      <handler event="keypress" key=" " action="this._handleClick();"/>

      <handler event="keypress">
      <![CDATA[
        if (this.boxObject instanceof MenuBoxObject) {
          if (this.open)
            return;
        } else {
          if (event.keyCode == KeyEvent.DOM_VK_UP ||
              (event.keyCode == KeyEvent.DOM_VK_LEFT &&
                document.defaultView.getComputedStyle(this.parentNode, "")
                        .direction == "ltr") ||
              (event.keyCode == KeyEvent.DOM_VK_RIGHT &&
                document.defaultView.getComputedStyle(this.parentNode, "")
                        .direction == "rtl")) {
            event.preventDefault();
            window.document.commandDispatcher.rewindFocus();
            return;
          }

          if (event.keyCode == KeyEvent.DOM_VK_DOWN ||
              (event.keyCode == KeyEvent.DOM_VK_RIGHT &&
                document.defaultView.getComputedStyle(this.parentNode, "")
                        .direction == "ltr") ||
              (event.keyCode == KeyEvent.DOM_VK_LEFT &&
                document.defaultView.getComputedStyle(this.parentNode, "")
                        .direction == "rtl")) {
            event.preventDefault();
            window.document.commandDispatcher.advanceFocus();
            return;
          }
        }

        if (event.keyCode || event.charCode <= 32 || event.altKey || 
            event.ctrlKey || event.metaKey)
          return;  // No printable char pressed, not a potential accesskey

        // Possible accesskey pressed
        var charPressedLower = String.fromCharCode(event.charCode).toLowerCase();

        // If the accesskey of the current button is pressed, just activate it
        if (this.accessKey.toLowerCase() == charPressedLower) {
          this.click();
          return;
        }

        // Search for accesskey in the list of buttons for this doc and each subdoc
        // Get the buttons for the main document and all sub-frames
        for (var frameCount = -1; frameCount < window.top.frames.length; frameCount++) {
          var doc = (frameCount == -1)? window.top.document: 
            window.top.frames[frameCount].document
          if (this.fireAccessKeyButton(doc.documentElement, charPressedLower))
            return;
        }

        // Test anonymous buttons
        var dlg = window.top.document;
        var buttonBox = dlg.getAnonymousElementByAttribute(dlg.documentElement,
                                                         "anonid", "buttons");
        if (buttonBox)
          this.fireAccessKeyButton(buttonBox, charPressedLower);
      ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="button" display="xul:button"
           extends="chrome://global/content/bindings/button.xml#button-base">
    <resources>
      <stylesheet src="chrome://global/skin/button.css"/>
    </resources>

    <content>
      <children includes="observes|template|menupopup|panel|tooltip"/>
      <xul:hbox class="box-inherit button-box" xbl:inherits="align,dir,pack,orient"
                align="center" pack="center" flex="1" anonid="button-box">
        <children>
          <xul:image class="button-icon" xbl:inherits="src=image"/>
          <xul:label class="button-text" xbl:inherits="value=label,accesskey,crop"/>
        </children>
      </xul:hbox>
    </content>
  </binding>

  <binding id="menu" display="xul:menu"
           extends="chrome://global/content/bindings/button.xml#button">
    <content>
      <children includes="observes|template|menupopup|panel|tooltip"/>
      <xul:hbox class="box-inherit button-box" xbl:inherits="align,dir,pack,orient"
                align="center" pack="center" flex="1">
        <children>
          <xul:hbox class="box-inherit" xbl:inherits="align,dir,pack,orient"
                    align="center" pack="center" flex="1">
            <xul:image class="button-icon" xbl:inherits="src=image"/>
            <xul:label class="button-text" xbl:inherits="value=label,accesskey,crop"/>
          </xul:hbox>
          <xul:dropmarker class="button-menu-dropmarker" xbl:inherits="open,disabled,label"/>
        </children>
      </xul:hbox>
    </content>

    <handlers>
      <handler event="keypress" keycode="VK_RETURN" action="this.open = true;"/>
      <handler event="keypress" key=" " action="this.open = true;"/>
    </handlers>
  </binding>

  <binding id="menu-button-base"
           extends="chrome://global/content/bindings/button.xml#button-base">
    <implementation implements="nsIDOMEventListener">
      <constructor>
        this.init();
      </constructor>
      
      <method name="init">
        <body>
        <![CDATA[
          var btn = document.getAnonymousElementByAttribute(this, "anonid", "button");
          if (!btn)
            throw "XBL binding for <button type=\"menu-button\"/> binding must contain an element with anonid=\"button\"";
          
          var menubuttonParent = this;
          btn.addEventListener("mouseover", function() { 
            if (!this.disabled)
              menubuttonParent.buttonover = true;
          }, true);
          btn.addEventListener("mouseout", function() {
            menubuttonParent.buttonover = false;
          }, true);
          btn.addEventListener("mousedown", function() {
            if (!this.disabled) {
              menubuttonParent.buttondown = true;
              document.addEventListener("mouseup", menubuttonParent, true);
            }
          }, true);
        ]]>
        </body>
      </method>
      
      <property name="buttonover" onget="return this.getAttribute('buttonover');">
        <setter>
        <![CDATA[
          var v = val || val == "true";
          if (!v && this.buttondown) { 
            this.buttondown = false;
            this._pendingActive = true;
          } 
          else {
            if (this._pendingActive) {
              this.buttondown = true;
              this._pendingActive = false;
            }
          }

          if (v)
            this.setAttribute("buttonover", "true");
          else
            this.removeAttribute("buttonover");
          return val;
        ]]>
        </setter>
      </property>
      
      <property name="buttondown" onget="return this.getAttribute('buttondown') == 'true';">
        <setter>
        <![CDATA[
          if (val || val == "true")
            this.setAttribute("buttondown", "true");
          else
            this.removeAttribute("buttondown");
          return val;
        ]]>
        </setter>
      </property>
      
      <field name="_pendingActive">false</field>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body>
        <![CDATA[
          this._pendingActive = false;
          this.buttondown = false;
          document.removeEventListener("mouseup", this, true);
        ]]>
        </body>
      </method>

    </implementation>

    <handlers>
      <handler event="keypress" keycode="VK_RETURN">
        if (event.originalTarget == this)
          this.open = true;
      </handler>
      <handler event="keypress" key=" ">
        if (event.originalTarget == this)
          this.open = true;
      </handler>
    </handlers>
  </binding>

  <binding id="menu-button" display="xul:menu"
           extends="chrome://global/content/bindings/button.xml#menu-button-base">
    <resources>
      <stylesheet src="chrome://global/skin/button.css"/>
    </resources>

    <content>
      <children includes="observes|template|menupopup|panel|tooltip"/>
      <xul:button class="box-inherit button-menubutton-button"
                  anonid="button" flex="1" allowevents="true"
                  xbl:inherits="disabled,crop,image,label,accesskey,command,
                                buttonover,buttondown,align,dir,pack,orient">
        <children/>
      </xul:button>
      <xul:dropmarker class="button-menubutton-dropmarker" xbl:inherits="open,disabled,label"/>
    </content>
  </binding>
  
  <binding id="button-image" display="xul:button"
           extends="chrome://global/content/bindings/button.xml#button">
    <content>
      <xul:image class="button-image-icon" xbl:inherits="src=image"/>
    </content>
  </binding>

  <binding id="button-repeat" display="xul:autorepeatbutton"
           extends="chrome://global/content/bindings/button.xml#button"/>
  
</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:22 $"/>
        <language type="ca"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="certutil">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>CERTUTIL</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>certutil</refname>
    <refpurpose>Manage keys and certificate in both NSS databases and other NSS tokens</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>certutil</command>
      <arg><replaceable>options</replaceable></arg>
      <arg>[<replaceable>arguments</replaceable>]</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

<refsection id="description">
    <title>Description</title>

    <para>The Certificate Database Tool, <command>certutil</command>, is a command-line utility that can create and modify certificate and key databases. It can specifically list, generate, modify, or delete certificates, create or change the password, generate new public and private key pairs, display the contents of the key database, or delete key pairs within the key database.</para>
    <para>Certificate issuance, part of the key and certificate management process, requires that keys and certificates be created in the key database. This document discusses certificate and key database management. For information on the security module database management, see the <command>modutil</command> manpage.</para>

  </refsection>
  
  <refsection id="options">
    <title>Command Options and Arguments</title>
	<para>Running <command>certutil</command> always requires one and only one command option to specify the type of certificate operation. Each command option may take zero or more arguments. The command option <option>-H</option> will list all the command options and their relevant arguments.</para>
   	<para><command>Command Options</command></para> 
    <variablelist>

      <varlistentry>
        <term>-A </term>
        <listitem><para>Add an existing certificate to a certificate database. The certificate database should already exist; if one is not present, this command option will initialize one by default.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-B</term>
        <listitem><para>Run a series of commands from the specified batch file. This requires the <option>-i</option> argument.</para></listitem>
      </varlistentry>
    
      <varlistentry>
        <term>-C </term>
        <listitem><para>Create a new binary certificate file from a binary certificate request file. Use the <option>-i</option> argument to specify the certificate request file. If this argument is not used, <command>certutil</command> prompts for a filename. </para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-D </term>
        <listitem><para>Delete a certificate from the certificate database.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-E </term>
        <listitem><para>Add an email certificate to the certificate database.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-F</term>
        <listitem><para>Delete a private key from a key database. Specify the key to delete with the -n argument. Specify the database from which to delete the key with the 
<option>-d</option> argument. Use the <option>-k</option> argument to specify explicitly whether to delete a DSA, RSA, or ECC key. If you don't use the <option>-k</option> argument, the option looks for an RSA key matching the specified nickname. 
</para>
<para>
When you delete keys, be sure to also remove any certificates associated with those keys from the certificate database, by using -D. Some smart cards do not let you remove a public key you have generated. In such a case, only the private key is deleted from the key pair. You can display the public key with the command certutil -K -h tokenname. </para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-G </term>
        <listitem><para>Generate a new public and private key pair within a key database. The key database should already exist; if one is not present, this command option will initialize one by default. Some smart cards can store only one key pair. If you create a new key pair for such a card, the previous pair is overwritten.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-H </term>
        <listitem><para>Display a list of the command options and arguments.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-K </term>
        <listitem><para>List the key ID of keys in the key database. A key ID is the modulus of the RSA key or the publicValue of the DSA key. IDs are displayed in hexadecimal ("0x" is not shown).</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-L </term>
        <listitem><para>List all the certificates, or display information about a named certificate, in a certificate database.
Use the -h tokenname argument to specify the certificate database on a particular hardware or software token.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-M </term>
        <listitem><para>Modify a certificate's trust attributes using the values of the -t argument.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-N</term>
        <listitem><para>Create new certificate and key databases.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-O </term>
        <listitem><para>Print the certificate chain.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-R</term>
        <listitem><para>Create a certificate request file that can be submitted to a Certificate Authority (CA) for processing into a finished certificate. Output defaults to standard out unless you use -o output-file argument.

Use the -a argument to specify ASCII output.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-S </term>
        <listitem><para>Create an individual certificate and add it to a certificate database.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-T </term>
        <listitem><para>Reset the key database or token.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-U </term>
        <listitem><para>List all available modules or print a single named module.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-V </term>
        <listitem><para>Check the validity of a certificate and its attributes.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-W </term>
        <listitem><para>Change the password to a key database.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--merge</term>
        <listitem><para>Merge two databases into one.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--upgrade-merge</term>
        <listitem><para>Upgrade an old database and merge it into a new database. This is used to migrate legacy NSS databases (<filename>cert8.db</filename> and <filename>key3.db</filename>) into the newer SQLite databases (<filename>cert9.db</filename> and <filename>key4.db</filename>).</para></listitem>
      </varlistentry>
	</variablelist>

	<para><command>Arguments</command></para>
	<para>Arguments modify a command option and are usually lower case, numbers, or symbols.</para>
	<variablelist>
      <varlistentry>
        <term>-a</term>
        <listitem><para>Use ASCII format or allow the use of ASCII format for input or output. This formatting follows RFC 1113. 
For certificate requests, ASCII output defaults to standard output unless redirected.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-b validity-time</term>
        <listitem><para>Specify a time at which a certificate is required to be valid. Use when checking certificate validity with the <option>-V</option> option. The format of the <emphasis>validity-time</emphasis> argument is <emphasis>YYMMDDHHMMSS[+HHMM|-HHMM|Z]</emphasis>, which allows offsets to be set relative to the validity end time. Specifying seconds (<emphasis>SS</emphasis>) is optional. When specifying an explicit time, use a Z at the end of the term, <emphasis>YYMMDDHHMMSSZ</emphasis>, to close it. When specifying an offset time, use <emphasis>YYMMDDHHMMSS+HHMM</emphasis> or <emphasis>YYMMDDHHMMSS-HHMM</emphasis> for adding or subtracting time, respectively.
</para>
<para>
If this option is not used, the validity check defaults to the current system time.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-c issuer</term>
        <listitem><para>Identify the certificate of the CA from which a new certificate will derive its authenticity. 
 Use the exact nickname or alias of the CA certificate, or use the CA's email address. Bracket the issuer string 
 with quotation marks if it contains spaces. </para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-d [prefix]directory</term>
        <listitem>
          <para>Specify the database directory containing the certificate and key database files.</para>
          <para><command>certutil</command> supports two types of databases: the legacy security databases (<filename>cert8.db</filename>, <filename>key3.db</filename>, and <filename>secmod.db</filename>) and new SQLite databases (<filename>cert9.db</filename>, <filename>key4.db</filename>, and <filename>pkcs11.txt</filename>). </para>
          <para>NSS recognizes the following prefixes:</para>
          <itemizedlist>
            <listitem><para><command>sql:</command> requests the newer database</para></listitem>
	    <listitem><para><command>dbm:</command> requests the legacy database</para></listitem>
          </itemizedlist>
          <para>If no prefix is specified the default type is retrieved from NSS_DEFAULT_DB_TYPE. If NSS_DEFAULT_DB_TYPE is not set then <command>dbm:</command> is the default.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>--dump-ext-val OID </term>
        <listitem><para>For single cert, print binary DER encoding of extension OID.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-e </term>
        <listitem><para>Check a certificate's signature during the process of validating a certificate.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--email email-address</term>
        <listitem><para>Specify the email address of a certificate to list. Used with the -L command option.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extGeneric OID:critical-flag:filename[,OID:critical-flag:filename]... </term>
        <listitem>
          <para>
Add one or multiple extensions that certutil cannot encode yet, by loading their encodings from external files.
           </para>
	<itemizedlist>
	<listitem>
<para>OID (example): 1.2.3.4</para>
	</listitem>
	<listitem>
<para>critical-flag: critical or not-critical</para>
	</listitem>
	<listitem>
<para>filename: full path to a file containing an encoded extension</para>
	</listitem>
	</itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-f password-file</term>
        <listitem><para>Specify a file that will automatically supply the password to include in a certificate 
 or to access a certificate database. This is a plain-text file containing one password. Be sure to prevent 
 unauthorized access to this file.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-g keysize</term>
        <listitem><para>Set a key size to use when generating new public and private key pairs. The minimum is 512 bits and the maximum is 16384 bits. The default is 1024 bits. Any size between the minimum and maximum is allowed.</para></listitem>
      </varlistentry>


      <varlistentry>
        <term>-h tokenname</term>
        <listitem><para>Specify the name of a token to use or act on. If not specified the default token is the internal database slot.</para></listitem>
      </varlistentry>

     <varlistentry>
        <term>-i input_file</term>
        <listitem><para>Pass an input file to the command. Depending on the command option, an input file can be a specific certificate, a certificate request file, or a batch file of commands.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-k key-type-or-id</term>
        <listitem>
          <para>Specify the type or specific ID of a key.</para>
          <para>
           The valid key type options are rsa, dsa, ec, or all. The default 
           value is rsa. Specifying the type of key can avoid mistakes caused by
           duplicate nicknames. Giving a key type generates a new key pair; 
           giving the ID of an existing key reuses that key pair (which is 
           required to renew certificates).
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-l </term>
        <listitem><para>Display detailed information when validating a certificate with the -V option.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-m serial-number</term>
        <listitem><para>Assign a unique serial number to a certificate being created. This operation should be performed by a CA. If no serial number is provided a default serial number is made from the current time. Serial numbers are limited to integers </para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-n nickname</term>
        <listitem><para>Specify the nickname of a certificate or key to list, create, add to a database, modify, or validate. Bracket the nickname string with quotation marks if it contains spaces.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-o output-file</term>
        <listitem><para>Specify the output file name for new certificates or binary certificate requests. Bracket the output-file string with quotation marks if it contains spaces. If this argument is not used the output destination defaults to standard output.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-P dbPrefix</term>
        <listitem><para>Specify the prefix used on the certificate and key database file. This argument is provided to support legacy servers. Most applications do not use a database prefix.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-p phone</term>
        <listitem><para>Specify a contact telephone number to include in new certificates or certificate requests. Bracket this string with quotation marks if it contains spaces.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-q pqgfile or curve-name</term>
        <listitem>
        <para>Read an alternate PQG value from the specified file when generating DSA key pairs. If this argument is not used, <command>certutil</command> generates its own PQG value. PQG files are created with a separate DSA utility.</para>
        <para>Elliptic curve name is one of the ones from SUITE B: nistp256, nistp384, nistp521</para>
        <para>
           If NSS has been compiled with support curves outside of SUITE B:
              sect163k1, nistk163, sect163r1, sect163r2,            
              nistb163,  sect193r1, sect193r2, sect233k1, nistk233,            
              sect233r1, nistb233, sect239k1, sect283k1, nistk283,            
              sect283r1, nistb283, sect409k1, nistk409, sect409r1,            
              nistb409,  sect571k1, nistk571, sect571r1, nistb571,            
              secp160k1, secp160r1, secp160r2, secp192k1, secp192r1,            
              nistp192,  secp224k1, secp224r1, nistp224, secp256k1,            
              secp256r1, secp384r1, secp521r1,       
              prime192v1, prime192v2, prime192v3,          
              prime239v1, prime239v2, prime239v3, c2pnb163v1,             
              c2pnb163v2, c2pnb163v3, c2pnb176v1, c2tnb191v1,             
              c2tnb191v2, c2tnb191v3,              
              c2pnb208w1, c2tnb239v1, c2tnb239v2, c2tnb239v3,             
              c2pnb272w1, c2pnb304w1,             
              c2tnb359w1, c2pnb368w1, c2tnb431r1, secp112r1,             
              secp112r2, secp128r1, secp128r2, sect113r1, sect113r2            
              sect131r1, sect131r2    
        </para>

        </listitem>
        
      </varlistentry>

      <varlistentry>
        <term>-r </term>
        <listitem><para>Display a certificate's binary DER encoding when listing information about that certificate with the -L option.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-s subject</term>
        <listitem><para>Identify a particular certificate owner for new certificates or certificate requests. Bracket this string with quotation marks if it contains spaces. The subject identification format follows RFC #1485.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-t trustargs</term>
        <listitem><para>Specify the trust attributes to modify in an existing certificate or to apply to a certificate when creating it or adding it to a database. There are three available trust categories for each certificate, expressed in the order <emphasis>SSL, email, object signing</emphasis> for each trust setting. In each category position, use none, any, or all
of the attribute codes: 
	</para>
	<itemizedlist>
	<listitem>
	<para>
		<command>p</command> - Valid peer
	</para>
	</listitem>
	<listitem>
	<para>
		<command>P</command> - Trusted peer (implies p)
	</para>
	</listitem>
	<listitem>
	<para>
		<command>c</command> - Valid CA
	</para>
	</listitem>
	<listitem>
	<para>
		<command>T</command> - Trusted CA (implies c)
	</para>
	</listitem>
	<listitem>
	<para>
		<command>C</command> - trusted CA for client authentication (ssl server only)
	</para>
	</listitem>
	<listitem>
	<para>
		<command>u</command> - user
	</para>
	</listitem>
	</itemizedlist>
	<para>
		The attribute codes for the categories are separated by commas, and the entire set of attributes enclosed by quotation marks. For example:
	</para>
<para><command>-t "TCu,Cu,Tu"</command></para>
	<para>
	Use the -L option to see a list of the current certificates and trust attributes in a certificate database. </para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-u certusage</term>
        <listitem><para>Specify a usage context to apply when validating a certificate with the -V option.</para><para>The contexts are the following:</para>
	<itemizedlist>
	<listitem>
<para><command>C</command> (as an SSL client)</para>
	</listitem>
	<listitem>
<para><command>V</command> (as an SSL server)</para>
	</listitem>
	<listitem>
<para><command>L</command> (as an SSL CA)</para>
	</listitem>
	<listitem>
<para><command>A</command> (as Any CA)</para>
	</listitem>
	<listitem>
<para><command>Y</command> (Verify CA)</para>
	</listitem>
	<listitem>
<para><command>S</command> (as an email signer)</para>
	</listitem>
	<listitem>
<para><command>R</command> (as an email recipient)</para>
	</listitem>
	<listitem>
<para><command>O</command> (as an OCSP status responder)</para>
	</listitem>
	<listitem>
<para><command>J</command> (as an object signer)</para>
	</listitem>
	</itemizedlist></listitem>
      </varlistentry>

      <varlistentry>
        <term>-v valid-months</term>
        <listitem><para>Set the number of months a new certificate will be valid. The validity period begins at the current system time unless an offset is added or subtracted with the <option>-w</option> option. If this argument is not used, the default validity period is three months. </para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-w offset-months</term>
        <listitem><para>Set an offset from the current system time, in months, 
 for the beginning of a certificate's validity period. Use when creating 
 the certificate or adding it to a database. Express the offset in integers, 
 using a minus sign (-) to indicate a negative offset. If this argument is 
 not used, the validity period begins at the current system time. The length 
 of the validity period is set with the -v argument. </para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-X </term>
        <listitem><para>Force the key and certificate database to open in read-write mode. This is used with the <option>-U</option> and <option>-L</option> command options.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-x </term>
        <listitem><para>Use <command>certutil</command> to generate the signature for a certificate being created or added to a database, rather than obtaining a signature from a separate CA.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-y exp</term>
        <listitem><para>Set an alternate exponent value to use in generating a new RSA public key for the database, instead of the default value of 65537. The available alternate values are 3 and 17.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-z noise-file</term>
        <listitem><para>Read a seed value from the specified file to generate a new private and public key pair. This argument makes it possible to use hardware-generated seed values or manually create a value from the keyboard. The minimum file size is 20 bytes.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-0 SSO_password</term>
        <listitem><para>Set a site security officer password on a token.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-1 | --keyUsage keyword,keyword</term>
        <listitem><para>Set an X.509 V3 Certificate Type Extension in the certificate. There are several available keywords:</para>
	<itemizedlist>
	<listitem>
	<para>
		digitalSignature
	</para>
	</listitem>
	<listitem>
	<para>
		nonRepudiation
	</para>
	</listitem>
	<listitem>
	<para>
		keyEncipherment
	</para>
	</listitem>
	<listitem>
	<para>
		dataEncipherment
	</para>
	</listitem>
	<listitem>
	<para>
		keyAgreement
	</para>
	</listitem>
	<listitem>
	<para>
		certSigning
	</para>
	</listitem>
	<listitem>
	<para>
		crlSigning
	</para>
	</listitem>
	<listitem>
	<para>
		critical
	</para>
	</listitem>
	</itemizedlist>
</listitem>
      </varlistentry>

      <varlistentry>
        <term>-2 </term>
        <listitem><para>Add a basic constraint extension to a certificate that is being created or added to a database. This extension supports the certificate chain verification process. <command>certutil</command> prompts for the certificate constraint extension to select.</para>
<para>X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-3 </term>
        <listitem><para>Add an authority key ID extension to a certificate that is being created or added to a database. This extension supports the identification of a particular certificate, from among multiple certificates associated with one subject name, as the correct issuer of a certificate. The Certificate Database Tool will prompt you to select the authority key ID extension.</para>
<para>X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-4 </term>
        <listitem><para>Add a CRL distribution point extension to a certificate that is being created or added to a database. This extension identifies the URL of a certificate's associated certificate revocation list (CRL). <command>certutil</command> prompts for the URL.</para>
<para>X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-5 | --nsCertType keyword,keyword</term>
        <listitem><para>Add an X.509 V3 certificate type extension to a certificate that is being created or added to the database. There are several available keywords:</para>
	<itemizedlist>
	<listitem>
	<para>
		sslClient
	</para>
	</listitem>
	<listitem>
	<para>
		sslServer
	</para>
	</listitem>
	<listitem>
	<para>
		smime
	</para>
	</listitem>
	<listitem>
	<para>
		objectSigning
	</para>
	</listitem>
	<listitem>
	<para>
		sslCA
	</para>
	</listitem>
	<listitem>
	<para>
		smimeCA
	</para>
	</listitem>
	<listitem>
	<para>
		objectSigningCA
	</para>
	</listitem>
	<listitem>
	<para>
		critical
	</para>
	</listitem>
	</itemizedlist>

<para>X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-6 | --extKeyUsage keyword,keyword</term>
        <listitem><para>Add an extended key usage extension to a certificate that is being created or added to the database. Several keywords are available:</para>
	<itemizedlist>
	<listitem>
	<para>
		serverAuth
	</para>
	</listitem>
	<listitem>
	<para>
		clientAuth
	</para>
	</listitem>
	<listitem>
	<para>
		codeSigning
	</para>
	</listitem>
	<listitem>
	<para>
		emailProtection
	</para>
	</listitem>
	<listitem>
	<para>
		timeStamp
	</para>
	</listitem>
	<listitem>
	<para>
		ocspResponder
	</para>
	</listitem>
	<listitem>
	<para>
		stepUp
	</para>
	</listitem>
	<listitem>
	<para>
		msTrustListSign
	</para>
	</listitem>
	<listitem>
	<para>
		critical
	</para>
	</listitem>
	</itemizedlist>
<para>X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-7 emailAddrs</term>
        <listitem><para>Add a comma-separated list of email addresses to the subject alternative name extension of a certificate or certificate request that is being created or added to the database. Subject alternative name extensions are described in Section 4.2.1.7 of RFC 3280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-8 dns-names</term>
        <listitem><para>Add a comma-separated list of DNS names to the subject alternative name extension of a certificate or certificate request that is being created or added to the database. Subject alternative name extensions are described in Section 4.2.1.7 of RFC 3280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extAIA</term>
        <listitem><para>Add the Authority Information Access extension to the certificate. X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extSIA</term>
        <listitem><para>Add the Subject Information Access extension to the certificate. X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extCP</term>
        <listitem><para>Add the Certificate Policies extension to the certificate. X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extPM</term>
        <listitem><para>Add the Policy Mappings extension to the certificate. X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extPC</term>
        <listitem><para>Add the Policy Constraints extension to the certificate. X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extIA</term>
        <listitem><para>Add the Inhibit Any Policy Access extension to the certificate. X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extSKID</term>
        <listitem><para>Add the Subject Key ID extension to the certificate. X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extNC</term>
        <listitem><para>Add a Name Constraint extension to the certificate. X.509 certificate extensions are described in RFC 5280.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--extSAN type:name[,type:name]...</term>
        <listitem><para>
Create a Subject Alt Name extension with one or multiple names.
          </para>
          <para>
-type: directory, dn, dns, edi, ediparty, email, ip, ipaddr, other, registerid, rfc822, uri, x400, x400addr
        </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>--empty-password</term>
        <listitem><para>Use empty password when creating new certificate database with -N.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--keyAttrFlags attrflags</term>
        <listitem><para>
PKCS #11 key Attributes. Comma separated list of key attribute flags, selected from the following list of choices: {token | session} {public | private} {sensitive | insensitive} {modifiable | unmodifiable} {extractable | unextractable}</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--keyOpFlagsOn opflags</term>
        <term>--keyOpFlagsOff opflags</term>
        <listitem><para>
PKCS #11 key Operation Flags.
Comma separated list of one or more of the following:
{token | session} {public | private} {sensitive | insensitive} {modifiable | unmodifiable} {extractable | unextractable}
          </para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--source-dir certdir</term>
        <listitem><para>Identify the certificate database directory to upgrade.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--source-prefix certdir</term>
        <listitem><para>Give the prefix of the certificate and key databases to upgrade.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--upgrade-id uniqueID</term>
        <listitem><para>Give the unique ID of the database to upgrade.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--upgrade-token-name name</term>
        <listitem><para>Set the name of the token to use while it is being upgraded.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-@ pwfile</term>
        <listitem><para>Give the name of a password file to use for the database being upgraded.</para></listitem>
      </varlistentry>

    </variablelist>
  </refsection>

  <refsection id="basic-usage">
    <title>Usage and Examples</title>
	<para>
		Most of the command options in the examples listed here have more arguments available. The arguments included in these examples are the most common ones or are used to illustrate a specific scenario. Use the <option>-H</option> option to show the complete list of arguments for each command option.
	</para>
	<para><command>Creating New Security Databases</command></para>
	<para>
		Certificates, keys, and security modules related to managing certificates are stored in three related databases:
	</para>
	<itemizedlist>
	<listitem>
	<para>
		cert8.db or cert9.db
	</para>
	</listitem>
	<listitem>
	<para>
		key3.db or key4.db
	</para>
	</listitem>
	<listitem>
	<para>
		secmod.db or pkcs11.txt
	</para>
	</listitem>
	</itemizedlist>
	<para>
		These databases must be created before certificates or keys can be generated.
	</para>
<programlisting>certutil -N -d [sql:]directory</programlisting>

	<para><command>Creating a Certificate Request</command></para>
	<para>
		A certificate request contains most or all of the information that is used to generate the final certificate. This request is submitted separately to a certificate authority and is then approved by some mechanism (automatically or by human review). Once the request is approved, then the certificate is generated.
	</para>
<programlisting>$ certutil -R -k key-type-or-id [-q pqgfile|curve-name] -g key-size -s subject [-h tokenname] -d [sql:]directory [-p phone] [-o output-file] [-a]</programlisting>
	<para>
		The <option>-R</option> command options requires four arguments:
	</para>
	<itemizedlist>
	<listitem>
	<para>
		<option>-k</option> to specify either the key type to generate or, when renewing a certificate, the existing key pair to use
	</para>
	</listitem>
	<listitem>
	<para>
		<option>-g</option> to set the keysize of the key to generate
	</para>
	</listitem>
	<listitem>
	<para>
		<option>-s</option> to set the subject name of the certificate
	</para>
	</listitem>
	<listitem>
	<para>
		<option>-d</option> to give the security database directory
	</para>
	</listitem>
	</itemizedlist>
	<para>
		The new certificate request can be output in ASCII format (<option>-a</option>) or can be written to a specified file (<option>-o</option>).
	</para>
	<para>
		For example:
	</para>
<programlisting>$ certutil -R -k rsa -g 1024 -s "CN=John Smith,O=Example Corp,L=Mountain View,ST=California,C=US" -d sql:$HOME/nssdb -p 650-555-0123 -a -o cert.cer

Generating key.  This may take a few moments...

</programlisting>

	<para><command>Creating a Certificate</command></para>
	<para>
		A valid certificate must be issued by a trusted CA. This can be done by specifying a CA certificate (<option>-c</option>) that is stored in the certificate database. If a CA key pair is not available, you can create a self-signed certificate using the <option>-x</option> argument with the <option>-S</option> command option.
	</para>
<programlisting>$ certutil -S -k rsa|dsa|ec -n certname -s subject [-c issuer |-x] -t trustargs -d [sql:]directory [-m serial-number] [-v valid-months] [-w offset-months] [-p phone] [-1] [-2] [-3] [-4] [-5 keyword] [-6 keyword] [-7 emailAddress] [-8 dns-names] [--extAIA] [--extSIA] [--extCP] [--extPM] [--extPC] [--extIA] [--extSKID]</programlisting>
	<para>
		The series of numbers and <option>--ext*</option> options set certificate extensions that can be added to the certificate when it is generated by the CA. Interactive prompts will result.
	</para>
	<para>
		For example, this creates a self-signed certificate:
	</para>
<programlisting>$ certutil -S -s "CN=Example CA" -n my-ca-cert -x -t "C,C,C" -1 -2 -5 -m 3650</programlisting>
	<para>
The interative prompts for key usage and whether any extensions are critical and responses have been ommitted for brevity.
	</para>
	<para>
		From there, new certificates can reference the self-signed certificate:
	</para>
<programlisting>$ certutil -S -s "CN=My Server Cert" -n my-server-cert -c "my-ca-cert" -t "u,u,u" -1 -5 -6 -8 -m 730</programlisting>

	<para><command>Generating a Certificate from a Certificate Request</command></para>
	<para>
		When a certificate request is created, a certificate can be generated by using the request and then referencing a certificate authority signing certificate (the <emphasis>issuer</emphasis> specified in the <option>-c</option> argument). The issuing certificate must be in the certificate database in the specified directory.
	</para>
<programlisting>certutil -C -c issuer -i cert-request-file -o output-file [-m serial-number] [-v valid-months] [-w offset-months] -d [sql:]directory [-1] [-2] [-3] [-4] [-5 keyword] [-6 keyword] [-7 emailAddress] [-8 dns-names]</programlisting>
	<para>
		For example:
	</para>
<programlisting>$ certutil -C -c "my-ca-cert" -i /home/certs/cert.req -o cert.cer -m 010 -v 12 -w 1 -d sql:$HOME/nssdb -1 nonRepudiation,dataEncipherment -5 sslClient -6 clientAuth -7 jsmith@example.com</programlisting>

	<para><command>Listing Certificates</command></para>
	<para>
		The <option>-L</option> command option lists all of the certificates listed in the certificate database. The path to the directory (<option>-d</option>) is required.
	</para>
<programlisting>$ certutil -L -d sql:/home/my/sharednssdb

Certificate Nickname                                         Trust Attributes
                                                             SSL,S/MIME,JAR/XPI

CA Administrator of Instance pki-ca1's Example Domain ID     u,u,u
TPS Administrator's Example Domain ID                        u,u,u
Google Internet Authority                                    ,,   
Certificate Authority - Example Domain                       CT,C,C</programlisting>
	<para>
		Using additional arguments with <option>-L</option> can return and print the information for a single, specific certificate. For example, the <option>-n</option> argument passes the certificate name, while the <option>-a</option> argument prints the certificate in ASCII format:
	</para>
<programlisting>
$ certutil -L -d sql:$HOME/nssdb -a -n my-ca-cert
-----BEGIN CERTIFICATE-----
MIIB1DCCAT2gAwIBAgICDkIwDQYJKoZIhvcNAQEFBQAwFTETMBEGA1UEAxMKRXhh
bXBsZSBDQTAeFw0xMzAzMTMxOTEwMjlaFw0xMzA2MTMxOTEwMjlaMBUxEzARBgNV
BAMTCkV4YW1wbGUgQ0EwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAJ4Kzqvz
JyBVgFqDXRYSyTBNw1DrxUU/3GvWA/ngjAwHEv0Cul/6sO/gsCvnABHiH6unns6x
XRzPORlC2WY3gkk7vmlsLvYpyecNazAi/NAwVnU/66HOsaoVFWE+gBQo99UrN2yk
0BiK/GMFlLm5dXQROgA9ZKKyFdI0LIXtf6SbAgMBAAGjMzAxMBEGCWCGSAGG+EIB
AQQEAwIHADAMBgNVHRMEBTADAQH/MA4GA1UdDwEB/wQEAwICBDANBgkqhkiG9w0B
AQUFAAOBgQA6chkzkACN281d1jKMrc+RHG2UMaQyxiteaLVZO+Ro1nnRUvseDf09
XKYFwPMJjWCihVku6bw/ihZfuMHhxK22Nue6inNQ6eDu7WmrqL8z3iUrQwxs+WiF
ob2rb8XRVVJkzXdXxlk4uo3UtNvw8sAz7sWD71qxKaIHU5q49zijfg==
-----END CERTIFICATE-----
</programlisting>
<para>For a human-readable display</para>
<programlisting>$ certutil -L -d sql:$HOME/nssdb -n my-ca-cert
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 3650 (0xe42)
        Signature Algorithm: PKCS #1 SHA-1 With RSA Encryption
        Issuer: "CN=Example CA"
        Validity:
            Not Before: Wed Mar 13 19:10:29 2013
            Not After : Thu Jun 13 19:10:29 2013
        Subject: "CN=Example CA"
        Subject Public Key Info:
            Public Key Algorithm: PKCS #1 RSA Encryption
            RSA Public Key:
                Modulus:
                    9e:0a:ce:ab:f3:27:20:55:80:5a:83:5d:16:12:c9:30:
                    4d:c3:50:eb:c5:45:3f:dc:6b:d6:03:f9:e0:8c:0c:07:
                    12:fd:02:ba:5f:fa:b0:ef:e0:b0:2b:e7:00:11:e2:1f:
                    ab:a7:9e:ce:b1:5d:1c:cf:39:19:42:d9:66:37:82:49:
                    3b:be:69:6c:2e:f6:29:c9:e7:0d:6b:30:22:fc:d0:30:
                    56:75:3f:eb:a1:ce:b1:aa:15:15:61:3e:80:14:28:f7:
                    d5:2b:37:6c:a4:d0:18:8a:fc:63:05:94:b9:b9:75:74:
                    11:3a:00:3d:64:a2:b2:15:d2:34:2c:85:ed:7f:a4:9b
                Exponent: 65537 (0x10001)
        Signed Extensions:
            Name: Certificate Type
            Data: none

            Name: Certificate Basic Constraints
            Data: Is a CA with no maximum path length.

            Name: Certificate Key Usage
            Critical: True
            Usages: Certificate Signing

    Signature Algorithm: PKCS #1 SHA-1 With RSA Encryption
    Signature:
        3a:72:19:33:90:00:8d:db:cd:5d:d6:32:8c:ad:cf:91:
        1c:6d:94:31:a4:32:c6:2b:5e:68:b5:59:3b:e4:68:d6:
        79:d1:52:fb:1e:0d:fd:3d:5c:a6:05:c0:f3:09:8d:60:
        a2:85:59:2e:e9:bc:3f:8a:16:5f:b8:c1:e1:c4:ad:b6:
        36:e7:ba:8a:73:50:e9:e0:ee:ed:69:ab:a8:bf:33:de:
        25:2b:43:0c:6c:f9:68:85:a1:bd:ab:6f:c5:d1:55:52:
        64:cd:77:57:c6:59:38:ba:8d:d4:b4:db:f0:f2:c0:33:
        ee:c5:83:ef:5a:b1:29:a2:07:53:9a:b8:f7:38:a3:7e
    Fingerprint (MD5):
        86:D8:A5:8B:8A:26:BE:9E:17:A8:7B:66:10:6B:27:80
    Fingerprint (SHA1):
        48:78:09:EF:C5:D4:0C:BD:D2:64:45:59:EB:03:13:15:F7:A9:D6:F7

    Certificate Trust Flags:
        SSL Flags:
            Valid CA
            Trusted CA
            User
        Email Flags:
            Valid CA
            Trusted CA
            User
        Object Signing Flags:
            Valid CA
            Trusted CA
            User

</programlisting>

	<para><command>Listing Keys</command></para>
	<para>
		Keys are the original material used to encrypt certificate data. The keys generated for certificates are stored separately, in the key database. 
	</para>
	<para>
		To list all keys in the database, use the <option>-K</option> command option and the (required) <option>-d</option> argument to give the path to the directory.
	</para>
<programlisting>$ certutil -K -d sql:$HOME/nssdb
certutil: Checking token "NSS Certificate DB" in slot "NSS User Private Key and Certificate Services                  "
&lt; 0> rsa      455a6673bde9375c2887ec8bf8016b3f9f35861d   Thawte Freemail Member's Thawte Consulting (Pty) Ltd. ID
&lt; 1> rsa      40defeeb522ade11090eacebaaf1196a172127df   Example Domain Administrator Cert
&lt; 2> rsa      1d0b06f44f6c03842f7d4f4a1dc78b3bcd1b85a5   John Smith user cert</programlisting>
	<para>
		There are ways to narrow the keys listed in the search results:
	</para>
	<itemizedlist>
	<listitem>
	<para>
		To return a specific key, use the <option>-n</option> <emphasis>name</emphasis> argument with the name of the key.
	</para>
	</listitem>
	<listitem>
	<para>
		If there are multiple security devices loaded, then the <option>-h</option> <emphasis>tokenname</emphasis> argument can search a specific token or all tokens.
	</para>
	</listitem>
	<listitem>
	<para>
		If there are multiple key types available, then the <option>-k</option> <emphasis>key-type</emphasis> argument can search a specific type of key, like RSA, DSA, or ECC. 
	</para>
	</listitem>
	</itemizedlist>

	<para><command>Listing Security Modules</command></para>
	<para>
		The devices that can be used to store certificates -- both internal databases and external devices like smart cards -- are recognized and used by loading security modules. The <option>-U</option> command option lists all of the security modules listed in the <filename>secmod.db</filename> database. The path to the directory (<option>-d</option>) is required.
	</para>
<programlisting>$ certutil -U -d sql:/home/my/sharednssdb

    slot: NSS User Private Key and Certificate Services                  
   token: NSS Certificate DB

    slot: NSS Internal Cryptographic Services                            
   token: NSS Generic Crypto Services</programlisting>

	<para><command>Adding Certificates to the Database</command></para>
	<para>
		Existing certificates or certificate requests can be added manually to the certificate database, even if they were generated elsewhere. This uses the <option>-A</option> command option.
	</para>
<programlisting>certutil -A -n certname -t trustargs -d [sql:]directory [-a] [-i input-file]</programlisting>
	<para>
		For example:
	</para>
<programlisting>$ certutil -A -n "CN=My SSL Certificate" -t "u,u,u" -d sql:/home/my/sharednssdb -i /home/example-certs/cert.cer</programlisting>
	<para>
		A related command option, <option>-E</option>, is used specifically to add email certificates to the certificate database. The <option>-E</option> command has the same arguments as the <option>-A</option> command. The trust arguments for certificates have the format <emphasis>SSL,S/MIME,Code-signing</emphasis>, so the middle trust settings relate most to email certificates (though the others can be set). For example:
	</para>
<programlisting>$ certutil -E -n "CN=John Smith Email Cert" -t ",Pu," -d sql:/home/my/sharednssdb -i /home/example-certs/email.cer</programlisting>

	<para><command>Deleting Certificates to the Database</command></para>
	<para>
		Certificates can be deleted from a database using the <option>-D</option> option. The only required options are to give the security database directory and to identify the certificate nickname.
	</para>
<programlisting>certutil -D -d [sql:]directory -n "nickname"</programlisting>
	<para>
		For example:
	</para>
<programlisting>$ certutil -D -d sql:/home/my/sharednssdb -n "my-ssl-cert"</programlisting>

	<para><command>Validating Certificates</command></para>
	<para>
		A certificate contains an expiration date in itself, and expired certificates are easily rejected. However, certificates can also be revoked before they hit their expiration date. Checking whether a certificate has been revoked requires validating the certificate. Validation can also be used to ensure that the certificate is only used for the purposes it was initially issued for. Validation is carried out by the <option>-V</option> command option.
	</para>
<programlisting>certutil -V -n certificate-name [-b time] [-e] [-u cert-usage] -d [sql:]directory</programlisting>
	<para>
		For example, to validate an email certificate:
	</para>
<programlisting>$ certutil -V -n "John Smith's Email Cert" -e -u S,R -d sql:/home/my/sharednssdb</programlisting>

	<para><command>Modifying Certificate Trust Settings</command></para>
	<para>
		The trust settings (which relate to the operations that a certificate is allowed to be used for) can be changed after a certificate is created or added to the database. This is especially useful for CA certificates, but it can be performed for any type of certificate.
	</para>
<programlisting>certutil -M -n certificate-name -t trust-args -d [sql:]directory</programlisting>
	<para>
		For example:
	</para>
<programlisting>$ certutil -M -n "My CA Certificate" -d sql:/home/my/sharednssdb -t "CTu,CTu,CTu"</programlisting>

	<para><command>Printing the Certificate Chain</command></para>
	<para>
		Certificates can be issued in <emphasis>chains</emphasis> because every certificate authority itself has a certificate; when a CA issues a certificate, it essentially stamps that certificate with its own fingerprint. The <option>-O</option> prints the full chain of a certificate, going from the initial CA (the root CA) through ever intermediary CA to the actual certificate. For example, for an email certificate with two CAs in the chain:
	</para>
<programlisting>$ certutil -d sql:/home/my/sharednssdb -O -n "jsmith@example.com"
"Builtin Object Token:Thawte Personal Freemail CA" [E=personal-freemail@thawte.com,CN=Thawte Personal Freemail CA,OU=Certification Services Division,O=Thawte Consulting,L=Cape Town,ST=Western Cape,C=ZA]

  "Thawte Personal Freemail Issuing CA - Thawte Consulting" [CN=Thawte Personal Freemail Issuing CA,O=Thawte Consulting (Pty) Ltd.,C=ZA]

    "(null)" [E=jsmith@example.com,CN=Thawte Freemail Member]</programlisting>

	<para><command>Resetting a Token</command></para>
	<para>
		The device which stores certificates -- both external hardware devices and internal software databases -- can be blanked and reused. This operation is performed on the device which stores the data, not directly on the security databases, so the location must be referenced through the token name (<option>-h</option>) as well as any directory path. If there is no external token used, the default value is internal.
	</para>
<programlisting>certutil -T -d [sql:]directory -h token-name -0 security-officer-password</programlisting>
	<para>
		Many networks have dedicated personnel who handle changes to security tokens (the security officer). This person must supply the password to access the specified token. For example:
	</para>
<programlisting>$ certutil -T -d sql:/home/my/sharednssdb -h nethsm -0 secret</programlisting>

	<para><command>Upgrading or Merging the Security Databases</command></para>
	<para>
		Many networks or applications may be using older BerkeleyDB versions of the certificate database (<filename>cert8.db</filename>). Databases can be upgraded to the new SQLite version of the database (<filename>cert9.db</filename>) using the <option>--upgrade-merge</option> command option or existing databases can be merged with the new <filename>cert9.db</filename> databases using the <option>---merge</option> command.
	</para>
	<para>
		The <option>--upgrade-merge</option> command must give information about the original database and then use the standard arguments (like <option>-d</option>) to give the information about the new databases. The command also requires information that the tool uses for the process to upgrade and write over the original database.
	</para>
<programlisting>certutil --upgrade-merge -d [sql:]directory [-P dbprefix] --source-dir directory --source-prefix dbprefix --upgrade-id id --upgrade-token-name name [-@ password-file]</programlisting>
	<para>
		For example:
	</para>
<programlisting>$ certutil --upgrade-merge -d sql:/home/my/sharednssdb --source-dir /opt/my-app/alias/ --source-prefix serverapp- --upgrade-id 1 --upgrade-token-name internal</programlisting>
	<para>
		The <option>--merge</option> command only requires information about the location of the original database; since it doesn't change the format of the database, it can write over information without performing interim step.
	</para>
<programlisting>certutil --merge -d [sql:]directory [-P dbprefix] --source-dir directory --source-prefix dbprefix [-@ password-file]</programlisting>
	<para>
		For example:
	</para>
<programlisting>$ certutil --merge -d sql:/home/my/sharednssdb --source-dir /opt/my-app/alias/ --source-prefix serverapp-</programlisting>

	<para><command>Running certutil Commands from a Batch File</command></para>
	<para>
		A series of commands can be run sequentially from a text file with the <option>-B</option> command option. The only argument for this specifies the input file.
	</para>
<programlisting>$ certutil -B -i /path/to/batch-file</programlisting>
  </refsection>

<refsection id="databases"><title>NSS Database Types</title>
<para>NSS originally used BerkeleyDB databases to store security information. 
The last versions of these <emphasis>legacy</emphasis> databases are:</para>
<itemizedlist>
	<listitem>
		<para>
			cert8.db for certificates
		</para>
	</listitem>
	<listitem>
		<para>
			key3.db for keys
		</para>
	</listitem>
	<listitem>
		<para>
			secmod.db for PKCS #11 module information
		</para>
	</listitem>
</itemizedlist>

<para>BerkeleyDB has performance limitations, though, which prevent it from being easily used by multiple applications simultaneously. NSS has 
some flexibility that allows applications to use their own, independent database engine while keeping a shared database and working around the access issues. Still, NSS
requires more flexibility to provide a truly shared security database.</para>

<para>In 2009, NSS introduced a new set of databases that are SQLite databases rather than 
BerkeleyDB. These new databases provide more accessibility and performance:</para>
<itemizedlist>
	<listitem>
		<para>
			cert9.db for certificates
		</para>
	</listitem>
	<listitem>
		<para>
			key4.db for keys
		</para>
	</listitem>
	<listitem>
		<para>
			pkcs11.txt, a listing of all of the PKCS #11 modules, contained in a new subdirectory in the security databases directory
		</para>
	</listitem>
</itemizedlist>

<para>Because the SQLite databases are designed to be shared, these are the <emphasis>shared</emphasis> database type. The shared database type is preferred; the legacy format is included for backward compatibility.</para>

<para>By default, the tools (<command>certutil</command>, <command>pk12util</command>, <command>modutil</command>) assume that the given security databases follow the more common legacy type. 
Using the SQLite databases must be manually specified by using the <command>sql:</command> prefix with the given security directory. For example:</para>

<programlisting>$ certutil -L -d sql:/home/my/sharednssdb</programlisting>

<para>To set the shared database type as the default type for the tools, set the <envar>NSS_DEFAULT_DB_TYPE</envar> environment variable to <envar>sql</envar>:</para>
<programlisting>export NSS_DEFAULT_DB_TYPE="sql"</programlisting>

<para>This line can be set added to the <filename>~/.bashrc</filename> file to make the change permanent.</para>

<para>Most applications do not use the shared database by default, but they can be configured to use them. For example, this how-to article covers how to configure Firefox and Thunderbird to use the new shared NSS databases:</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB_Howto</para>
	</listitem>
</itemizedlist>
<para>For an engineering draft on the changes in the shared NSS databases, see the NSS project wiki:</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB
		</para>
	</listitem>
</itemizedlist>
</refsection>


  <refsection id="seealso">
    <title>See Also</title>
    <para>pk12util (1)</para>
    <para>modutil (1)</para>
    <para><command>certutil</command> has arguments or operations that use features defined in several IETF RFCs.</para>
	<itemizedlist>
	<listitem>
	<para>
		http://tools.ietf.org/html/rfc5280
	</para>
	</listitem>
	<listitem>
	<para>
		http://tools.ietf.org/html/rfc1113
	</para>
	</listitem>
	<listitem>
	<para>
		http://tools.ietf.org/html/rfc1485
	</para>
	</listitem>
	</itemizedlist>

	<para>The NSS wiki has information on the new database design and how to configure applications to use it.</para>
        <itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB_Howto</para>
	</listitem>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB
		</para>
	</listitem>
        </itemizedlist>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="cgg"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="checkboxBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="checkbox" extends="chrome://global/content/bindings/checkbox.xml#checkbox-baseline">
    <resources>
      <stylesheet src="chrome://global/skin/checkbox.css"/>
    </resources>
  </binding>

  <binding id="checkbox-baseline" role="xul:checkbox"
    extends="chrome://global/content/bindings/general.xml#basetext">
    <content>
      <xul:image class="checkbox-check" xbl:inherits="checked,disabled"/>
      <xul:hbox class="checkbox-label-box" flex="1">
        <xul:image class="checkbox-icon" xbl:inherits="src"/>
        <xul:label class="checkbox-label" xbl:inherits="xbl:text=label,accesskey,crop" flex="1"/>
      </xul:hbox>
    </content>
    
    <implementation implements="nsIDOMXULCheckboxElement">
      <method name="setChecked">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          var change = (aValue != (this.getAttribute('checked') == 'true'));
          if (aValue)
            this.setAttribute('checked', 'true');
          else
            this.removeAttribute('checked');
          if (change) {
            var event = document.createEvent('Events');
            event.initEvent('CheckboxStateChange', true, true);
            this.dispatchEvent(event);
          }
          return aValue;
        ]]>
        </body>
      </method>
      
      <!-- public implementation -->
      <property name="checked"    onset="return this.setChecked(val);"
                                  onget="return this.getAttribute('checked') == 'true';"/>
    </implementation>
    
    <handlers>
      <!-- While it would seem we could do this by handling oncommand, we need can't
           because any external oncommand handlers might get called before ours, and
           then they would see the incorrect value of checked. -->           
      <handler event="click" button="0" action="if (!this.disabled) this.checked = !this.checked;"/>
      <handler event="keypress" key=" ">
        <![CDATA[
          this.checked = !this.checked;
        ]]>
      </handler>
    </handlers>
  </binding> 

  <binding id="checkbox-with-spacing"
           extends="chrome://global/content/bindings/checkbox.xml#checkbox">

    <content>
      <xul:hbox class="checkbox-spacer-box">
        <xul:image class="checkbox-check" xbl:inherits="checked,disabled"/>
      </xul:hbox>
      <xul:hbox class="checkbox-label-center-box" flex="1">
        <xul:hbox class="checkbox-label-box" flex="1">
          <xul:image class="checkbox-icon" xbl:inherits="src"/>
          <xul:label class="checkbox-label" xbl:inherits="xbl:text=label,accesskey,crop" flex="1"/>
        </xul:hbox>
      </xul:hbox>
    </content>
  </binding>

</bindings>
<!--
  Copyright (c) 2012 The Chromium Authors. All rights reserved.
  Use of this source code is governed by a BSD-style license that can be
  found in the LICENSE file.
-->
<project name="chromium-jars" default="dist">
  <!--
    Common ant build file for for chromium_*.jars.
    For creating a new chromium_*.jar :
    1. Use build/java.gypi action.
    The jar will be created as chromium_${PACKAGE_NAME} in
    ${PRODUCT_DIR}/lib.java.
  -->
  <description>
    Building ${PROJECT_NAME}/ java source code with ant.
  </description>

  <import file="common.xml"/>

  <path id="javac.custom.classpath">
    <filelist files="${INPUT_JARS_PATHS}"/>
    <pathelement location="${ANDROID_SDK}/android.jar"/>
  </path>

  <path id="javac.srcdirs.additional">
    <filelist files="${ADDITIONAL_SRC_DIRS}"/>
    <filelist files="${GENERATED_SRC_DIRS}"/>
  </path>

  <property-value
    name="javac.srcdir"
    value="src:${toString:javac.srcdirs.additional}"
  />

  <property-location
    name="dest.dir"
    location="${PRODUCT_DIR}/java/${PACKAGE_NAME}"
    check-exists="false"
  />

  <target name="init">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${dest.dir}"/>

    <!-- Remove all .class files from dest.dir. This prevents inclusion of
         incorrect .class files in the final .jar. For example, if a .java file
         was deleted, the .jar should not contain the .class files for that
         .java from previous builds.
    -->
    <delete>
      <fileset dir="${dest.dir}" includes="**/*.class"/>
    </delete>
  </target>

  <target name="compile" depends="init" description="Compiles source.">
    <fail message="Error: javac.custom.classpath is not set. Please set it to
        classpath for javac.">
      <condition>
        <not><isreference refid="javac.custom.classpath"/></not>
      </condition>
    </fail>

    <echo>
      Compiling ${javac.srcdir}, classpath: ${toString:javac.custom.classpath}
    </echo>

    <javac
      srcdir="${javac.srcdir}"
      destdir="${dest.dir}"
      classpathref="javac.custom.classpath"
      debug="true"
      includeantruntime="false"
    />
  </target>

  <target name="dist" depends="compile"
      description="Generate chromium_${PACKAGE_NAME}.jar.">
    <!-- Create the distribution directory -->
    <jar
      jarfile="${lib.java.dir}/chromium_${PACKAGE_NAME}.jar"
      basedir="${dest.dir}"
    />

    <!-- If Gyp thinks this output is stale but Ant doesn't, the modification
         time should still be updated. Otherwise, this target will continue to
         be rebuilt in future builds.
    -->
    <touch file="${lib.java.dir}/chromium_${PACKAGE_NAME}.jar"/>
  </target>

  <target name="clean" description="clean up">
    <!-- Delete the appropriate directory trees -->
    <delete dir="${dest.dir}"/>
  </target>
</project>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="chr"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cher</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xbl="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:html="http://www.w3.org/1999/xhtml">
  <binding id="circular-progress-indicator">
    <resources>
      <stylesheet src="chrome://browser/skin/circularprogress.css"/>
    </resources>

    <content>
      <xul:stack>
        <xul:toolbarbutton anonid="progressButton"
                           class="circularprogressindicator-progressButton"/>
        <html:div anonid="progressTrack"
                  xbl:inherits="progress"
                  class="circularprogressindicator-progressTrack">
        </html:div>
        <html:canvas anonid="progressRing"
                     xbl:inherits="progress"
                     class="circularprogressindicator-progressRing"
                     width="40"
                     height="40">
        </html:canvas>
        <html:div anonid="progressNotification"
                  xbl:inherits="progress"
                  class="circularprogressindicator-progressNotification">
        </html:div>
      </xul:stack>
    </content>

    <implementation>
      <field name="_progressCanvas">
        document.getAnonymousElementByAttribute(this, "anonid", "progressRing");
      </field>
      <field name="_progressNotification">
        document.getAnonymousElementByAttribute(this, "anonid",
            "progressNotification");
      </field>
      <field name="_progressCircleCtx">null</field>
      <field name="_img">null</field>
      <constructor>
        <![CDATA[
          this._progressCircleCtx = this._progressCanvas.getContext('2d');
        ]]>
      </constructor>
      <method name="updateProgress">
        <parameter name="percentComplete"/>
        <body>
          <![CDATA[
            const PROGRESS_RING_IMG = "chrome://browser/skin/images/progresscircle.png";

            // show ring background even if % is 0.
            this.setAttribute("progress", percentComplete);

            let startAngle = 1.5 * Math.PI;
            let endAngle = startAngle + (2 * Math.PI * (percentComplete / 100));

            if (!this._img) {
              this._img = new Image();
              this._img.onload = () => {
                this.updateProgress(this.getAttribute("progress"))
              }
              this._img.src = PROGRESS_RING_IMG;
            }
            else if (this._img.complete) {
              let ctx = this._progressCircleCtx;
              ctx.clearRect(0, 0,
                this._progressCanvas.width, this._progressCanvas.height);

              // Save the state, so we can undo the clipping
              ctx.save();

              ctx.beginPath();
              let center = this._progressCanvas.width / 2;
              ctx.arc(center, center, center, startAngle, endAngle, false);
              ctx.lineTo(center, center);
              ctx.closePath();
              ctx.clip();

              // Draw circle image.
              ctx.translate(center, center);
              ctx.rotate(endAngle);
              ctx.drawImage(this._img, -center, -center);

              ctx.restore();
            } else {
              //  Image is still loading
            }
            return [startAngle, endAngle];
          ]]>
        </body>
      </method>
      <method name="reset">
        <body>
          <![CDATA[
            if(this._img && !this._img.complete) {
              // cancel any pending updateProgress
              this._img.onload = () => {};
            }
            this._progressCircleCtx.clearRect(0, 0,
              this._progressCanvas.width, this._progressCanvas.height);
            this.removeAttribute("progress");
          ]]>
        </body>
      </method>
      <method name="notify">
        <body>
          <![CDATA[
            this.addEventListener("transitionend", this._onNotificationEnd);

            this._progressNotification.classList.add(
                "progressNotification-active");
          ]]>
        </body>
      </method>
      <method name="_onNotificationEnd">
        <body>
          <![CDATA[
            this.removeEventListener("transitionend", this._onNotificationEnd);

            this._progressNotification.classList.remove(
                "progressNotification-active");
          ]]>
        </body>
      </method>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item gecko:state_dark="true"
          android:drawable="@drawable/close_edit_mode_dark"/>

    <item gecko:state_private="true"
          android:drawable="@drawable/close_edit_mode_light"/>

    <item android:drawable="@drawable/close_edit_mode_light"/>

</selector>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="cmsutil">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>CMSUTIL</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>cmsutil</refname>
    <refpurpose>Performs basic cryptograpic operations, such as encryption and decryption, on Cryptographic Message Syntax (CMS) messages.</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>cmsutil</command>
      <arg><replaceable>options</replaceable></arg>
      <arg>[<replaceable>arguments</replaceable>]</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection id="description">
    <title>Description</title>

    <para>The <command>cmsutil</command> command-line uses the S/MIME Toolkit to perform basic operations, such as encryption and decryption, on Cryptographic Message Syntax (CMS) messages.
	</para>
	<para>
To run cmsutil, type the command cmsutil option [arguments] where option and arguments are combinations of the options and arguments listed in the following section. 
Each command takes one option. Each option may take zero or more arguments. 
To see a usage string, issue the command without options. 
	</para>

  </refsection>

  <refsection id="options">
    <title>Options and Arguments</title>
	<para>
	</para>
   	<para><command>Options</command></para> 
   	<para>
Options specify an action. Option arguments modify an action. 
The options and arguments for the cmsutil command are defined as follows:
    </para>
    <variablelist>
      <varlistentry>
        <term>-C</term>
        <listitem><para>Encrypt a message.</para></listitem>
      </varlistentry>
    
      <varlistentry>
        <term>-D </term>
        <listitem><para>Decode a message.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-E </term>
        <listitem><para>Envelope a message.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-O </term>
        <listitem><para>Create a certificates-only message.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-S </term>
        <listitem><para>Sign a message.</para></listitem>
      </varlistentry>

    </variablelist>

	<para><command>Arguments</command></para>
	<para>Option arguments modify an action.</para>
	<variablelist>
      <varlistentry>
        <term>-b </term>
        <listitem>
          <para>Decode a batch of files named in infile.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-c content </term>
        <listitem>
          <para>Use this detached content (decode only).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-d dbdir</term>
        <listitem>
          <para>Specify the key/certificate database directory (default is ".")</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-e envfile</term>
        <listitem>
          <para>Specify a file containing an enveloped message for a set of recipients to which you would like to send an encrypted message. If this is the first encrypted message for that set of recipients, a new enveloped message will be created that you can then use for future messages (encrypt only).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-f pwfile</term>
        <listitem>
          <para>Use password file to set password on all PKCS#11 tokens.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-G</term>
        <listitem>
          <para>Include a signing time attribute (sign only).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-H hash</term>
        <listitem>
          <para>Use specified hash algorithm (default:SHA1).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-h num</term>
        <listitem>
          <para>Generate email headers with info about CMS message (decode only).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-i infile</term>
        <listitem>
          <para>Use infile as a source of data (default is stdin).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-k</term>
        <listitem>
          <para>Keep decoded encryption certs in permanent cert db.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-N nickname</term>
        <listitem>
          <para>Specify nickname of certificate to sign with (sign only).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-n </term>
        <listitem>
          <para>Suppress output of contents (decode only).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-o outfile</term>
        <listitem>
          <para>Use outfile as a destination of data (default is stdout).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-P</term>
        <listitem>
          <para>Include an S/MIME capabilities attribute.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-p password</term>
        <listitem>
          <para>Use password as key database password.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-r recipient1,recipient2, ...</term>
        <listitem>
          <para>
Specify list of recipients (email addresses) for an encrypted or enveloped message. 
For certificates-only message, list of certificates to send.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-T</term>
        <listitem>
          <para>Suppress content in CMS message (sign only).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-u certusage</term>
        <listitem>
          <para>Set type of cert usage (default is certUsageEmailSigner).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-v</term>
        <listitem>
          <para>Print debugging information.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-Y ekprefnick</term>
        <listitem>
          <para>Specify an encryption key preference by nickname.</para>
        </listitem>
      </varlistentry>

    </variablelist>

  </refsection>

  <refsection id="usage">
    <title>Usage</title>
    <para>Encrypt Example</para>
      <programlisting>
cmsutil -C [-i infile] [-o outfile] [-d dbdir] [-p password] -r "recipient1,recipient2, . . ." -e envfile
      </programlisting>

    <para>Decode Example</para>
      <programlisting>
cmsutil -D [-i infile] [-o outfile] [-d dbdir] [-p password] [-c content] [-n] [-h num]
      </programlisting>

    <para>Envelope Example</para>
      <programlisting>
cmsutil -E [-i infile] [-o outfile] [-d dbdir] [-p password] -r "recipient1,recipient2, ..."
      </programlisting>

    <para>Certificate-only Example</para>
      <programlisting>
cmsutil -O [-i infile] [-o outfile] [-d dbdir] [-p password] -r "cert1,cert2, . . ."
      </programlisting>

    <para>Sign Message Example</para>
      <programlisting>
cmsutil -S [-i infile] [-o outfile] [-d dbdir] [-p password] -N nickname[-TGP] [-Y ekprefnick]
      </programlisting>

  </refsection>

  <refsection id="seealso">
    <title>See also</title>
    <para>certutil(1)</para>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - BR</title>
</head>
<body onload="parent.loadComplete()">
<table id="table-1" border="4" frame="border" cellpadding="2" cellspacing="2" summary="HTML Control Table" rules="all">
<caption>Table Caption</caption>
<thead align="center" valign="middle">
<tr align="center" valign="middle" char="*" charoff="1">
<th id="header-1">Employee Id</th>
<th id="header-2" abbr="maiden" axis="center" align="center" colspan="1" rowspan="1" scope="col" headers="header-1" valign="middle">Employee Name</th>
<th>Position</th>
<th>Salary</th>
<th>Gender</th>
<th>Address</th>
</tr>
</thead>
<tfoot align="center" valign="middle">
<tr>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
</tr>
</tfoot>
<tbody align="center" valign="middle">
<tr>
<td axis="center" id="Table-3" abbr="maiden2" colspan="1" rowspan="1" scope="col" headers="header-2" valign="middle">EMP0001</td>
<td headers="header-2">Margaret Martin</td>
<td>Accountant</td>
<td>56,000</td>
<td>Female</td>
<td>1230 North Ave. Dallas, Texas 98551</td>
</tr>
<tr>
<td>EMP0002</td>
<td>Martha Raynolds</td>
<td>Secretary</td>
<td>35,000</td>
<td>Female</td>
<td>1900 Dallas Road Dallas, Texas 98554</td>
</tr>
</tbody>
</table>
<form id="form1" action="./files/getData.pl" method="post">
<p>
<select id="selectId" dir="ltr" tabindex="7" name="select1" multiple="multiple" size="1">
<option selected="selected" value="EMP1">EMP10001</option>
<option>EMP10002</option>
<option>EMP10003</option>
<option>EMP10004</option>
<option>EMP10005</option>
</select>
</p>
</form>
<p>
<select name="select2">
<option>EMP20001</option>
<option>EMP20002</option>
<option>EMP20003</option>
<option>EMP20004</option>
<option>EMP20005</option>
</select>
</p>
<p>
<select name="select3" disabled="disabled" tabindex="1">
<option>EMP30001</option>
<option>EMP30002</option>
<option>EMP30003</option>
<option>EMP30004</option>
<option>EMP30005</option>
</select>
</p>
</body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="ring"
       android:innerRadius="15dip"
       android:thickness="4dip"
       android:useLevel="false">
    <solid android:color="@android:color/white"/>
</shape>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
                 android:id="@+id/text"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 android:textAppearance="@style/TextAppearance.Widget.TextView"
                 style="@style/Widget.ListItem"
                 android:background="@drawable/color_picker_row_bg"
                 android:checkMark="@android:color/transparent"/>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="colorpickerBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="colorpicker" extends="chrome://global/content/bindings/general.xml#basecontrol">
    <resources>
      <stylesheet src="chrome://global/skin/colorpicker.css"/>
    </resources>
    
    <content>
      <xul:vbox flex="1">

        <xul:hbox>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #FFFFFF" color="#FFFFFF"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #FFCCCC" color="#FFCCCC"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #FFCC99" color="#FFCC99"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #FFFF99" color="#FFFF99"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #FFFFCC" color="#FFFFCC"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #99FF99" color="#99FF99"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #99FFFF" color="#99FFFF"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #CCFFFF" color="#CCFFFF"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #CCCCFF" color="#CCCCFF"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #FFCCFF" color="#FFCCFF"/>
        </xul:hbox>
        <xul:hbox>
          <xul:spacer class="colorpickertile" style="background-color: #CCCCCC" color="#CCCCCC"/>
          <xul:spacer class="colorpickertile" style="background-color: #FF6666" color="#FF6666"/>
          <xul:spacer class="colorpickertile" style="background-color: #FF9966" color="#FF9966"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #FFFF66" color="#FFFF66"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #FFFF33" color="#FFFF33"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #66FF99" color="#66FF99"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #33FFFF" color="#33FFFF"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #66FFFF" color="#66FFFF"/>
          <xul:spacer class="colorpickertile" style="background-color: #9999FF" color="#9999FF"/>
          <xul:spacer class="colorpickertile" style="background-color: #FF99FF" color="#FF99FF"/>
        </xul:hbox>
        <xul:hbox>
          <xul:spacer class="colorpickertile" style="background-color: #C0C0C0" color="#C0C0C0"/>
          <xul:spacer class="colorpickertile" style="background-color: #FF0000" color="#FF0000"/>
          <xul:spacer class="colorpickertile" style="background-color: #FF9900" color="#FF9900"/>
          <xul:spacer class="colorpickertile" style="background-color: #FFCC66" color="#FFCC66"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #FFFF00" color="#FFFF00"/>
          <xul:spacer class="colorpickertile cp-light" style="background-color: #33FF33" color="#33FF33"/>
          <xul:spacer class="colorpickertile" style="background-color: #66CCCC" color="#66CCCC"/>
          <xul:spacer class="colorpickertile" style="background-color: #33CCFF" color="#33CCFF"/>
          <xul:spacer class="colorpickertile" style="background-color: #6666CC" color="#6666CC"/>
          <xul:spacer class="colorpickertile" style="background-color: #CC66CC" color="#CC66CC"/>
        </xul:hbox>
        <xul:hbox>
          <xul:spacer class="colorpickertile" style="background-color: #999999" color="#999999"/>
          <xul:spacer class="colorpickertile" style="background-color: #CC0000" color="#CC0000"/>
          <xul:spacer class="colorpickertile" style="background-color: #FF6600" color="#FF6600"/>
          <xul:spacer class="colorpickertile" style="background-color: #FFCC33" color="#FFCC33"/>
          <xul:spacer class="colorpickertile" style="background-color: #FFCC00" color="#FFCC00"/>
          <xul:spacer class="colorpickertile" style="background-color: #33CC00" color="#33CC00"/>
          <xul:spacer class="colorpickertile" style="background-color: #00CCCC" color="#00CCCC"/>
          <xul:spacer class="colorpickertile" style="background-color: #3366FF" color="#3366FF"/>
          <xul:spacer class="colorpickertile" style="background-color: #6633FF" color="#6633FF"/>
          <xul:spacer class="colorpickertile" style="background-color: #CC33CC" color="#CC33CC"/>
        </xul:hbox>
        <xul:hbox>
          <xul:spacer class="colorpickertile" style="background-color: #666666" color="#666666"/>
          <xul:spacer class="colorpickertile" style="background-color: #990000" color="#990000"/>
          <xul:spacer class="colorpickertile" style="background-color: #CC6600" color="#CC6600"/>
          <xul:spacer class="colorpickertile" style="background-color: #CC9933" color="#CC9933"/>
          <xul:spacer class="colorpickertile" style="background-color: #999900" color="#999900"/>
          <xul:spacer class="colorpickertile" style="background-color: #009900" color="#009900"/>
          <xul:spacer class="colorpickertile" style="background-color: #339999" color="#339999"/>
          <xul:spacer class="colorpickertile" style="background-color: #3333FF" color="#3333FF"/>
          <xul:spacer class="colorpickertile" style="background-color: #6600CC" color="#6600CC"/>
          <xul:spacer class="colorpickertile" style="background-color: #993399" color="#993399"/>
        </xul:hbox>
        <xul:hbox>
          <xul:spacer class="colorpickertile" style="background-color: #333333" color="#333333"/>
          <xul:spacer class="colorpickertile" style="background-color: #660000" color="#660000"/>
          <xul:spacer class="colorpickertile" style="background-color: #993300" color="#993300"/>
          <xul:spacer class="colorpickertile" style="background-color: #996633" color="#996633"/>
          <xul:spacer class="colorpickertile" style="background-color: #666600" color="#666600"/>
          <xul:spacer class="colorpickertile" style="background-color: #006600" color="#006600"/>
          <xul:spacer class="colorpickertile" style="background-color: #336666" color="#336666"/>
          <xul:spacer class="colorpickertile" style="background-color: #000099" color="#000099"/>
          <xul:spacer class="colorpickertile" style="background-color: #333399" color="#333399"/>
          <xul:spacer class="colorpickertile" style="background-color: #663366" color="#663366"/>
        </xul:hbox>
        <xul:hbox>
          <xul:spacer class="colorpickertile" style="background-color: #000000" color="#000000"/>
          <xul:spacer class="colorpickertile" style="background-color: #330000" color="#330000"/>
          <xul:spacer class="colorpickertile" style="background-color: #663300" color="#663300"/>
          <xul:spacer class="colorpickertile" style="background-color: #663333" color="#663333"/>
          <xul:spacer class="colorpickertile" style="background-color: #333300" color="#333300"/>
          <xul:spacer class="colorpickertile" style="background-color: #003300" color="#003300"/>
          <xul:spacer class="colorpickertile" style="background-color: #003333" color="#003333"/>
          <xul:spacer class="colorpickertile" style="background-color: #000066" color="#000066"/>
          <xul:spacer class="colorpickertile" style="background-color: #330099" color="#330099"/>
          <xul:spacer class="colorpickertile" style="background-color: #330033" color="#330033"/>
        </xul:hbox>
      </xul:vbox>
      <!-- Something to take tab focus
      <button style="border : 0px; width: 0px; height: 0px;"/>
      -->
    </content>
    
    <implementation implements="nsIDOMEventListener">
      <property name="color">
        <getter><![CDATA[
          return this.mSelectedCell ? this.mSelectedCell.getAttribute("color") : null;
        ]]></getter>
        <setter><![CDATA[
          if (!val)
            return val;
          var uppercaseVal = val.toUpperCase();
          // Translate standard HTML color strings:
          if (uppercaseVal[0] != "#") {
            switch (uppercaseVal) {
              case "GREEN":
                uppercaseVal = "#008000";
                break;
              case "LIME":
                uppercaseVal = "#00FF00";
                break;
              case "OLIVE":
                uppercaseVal = "#808000";
                break;
              case "TEAL":
                uppercaseVal = "#008080";
                break;
              case "YELLOW":
                uppercaseVal = "#FFFF00";
                break;
              case "RED":
                uppercaseVal = "#FF0000";
                break;
              case "MAROON":
                uppercaseVal = "#800000";
                break;
              case "PURPLE":
                uppercaseVal = "#800080";
                break;
              case "FUCHSIA":
                uppercaseVal = "#FF00FF";
                break;
              case "NAVY":
                uppercaseVal = "#000080";
                break;
              case "BLUE":
                uppercaseVal = "#0000FF";
                break;
              case "AQUA":
                uppercaseVal = "#00FFFF";
                break;
              case "WHITE":
                uppercaseVal = "#FFFFFF";
                break;
              case "SILVER":
                uppercaseVal = "#C0C0C0";
                break;
              case "GRAY":
                uppercaseVal = "#808080";
                break;
              default: // BLACK
                uppercaseVal = "#000000";
                break;
            }
          }
          var cells = this.mBox.getElementsByAttribute("color", uppercaseVal);
          if (cells.item(0)) {
            this.selectCell(cells[0]);
            this.hoverCell(this.mSelectedCell);
          }
          return val;
        ]]></setter>
      </property>

      <method name="initColor">
        <parameter name="aColor"/>
        <body><![CDATA[
          // Use this to initialize color without
          //  triggering the "onselect" handler,
          //  which closes window when it's a popup
          this.mDoOnSelect = false;
          this.color = aColor;
          this.mDoOnSelect = true;
        ]]></body>
      </method>

      <method name="initialize">
        <body><![CDATA[
          this.mSelectedCell = null;
          this.mHoverCell = null;
          this.mBox = document.getAnonymousNodes(this)[0];
          this.mIsPopup = false;
          this.mDoOnSelect = true;

          this.hoverCell(this.mBox.childNodes[0].childNodes[0]);
          
          // used to capture keydown at the document level
          this.mPickerKeyDown = function(aEvent)
          {
            document._focusedPicker.pickerKeyDown(aEvent);
          }

        ]]></body>
      </method>
      
      <method name="_fireEvent">
        <parameter name="aTarget"/>
        <parameter name="aEventName"/>
        <body>
        <![CDATA[      
          try {
            var event = document.createEvent("Events");
            event.initEvent(aEventName, true, true);
            var cancel = !aTarget.dispatchEvent(event);
            if (aTarget.hasAttribute("on" + aEventName)) {
              var fn = new Function ("event", aTarget.getAttribute("on" + aEventName));
              var rv = fn.call(aTarget, event);
              if (rv == false)
                cancel = true;
            }
            return !cancel;  
          }
          catch (e) { 
            Components.utils.reportError(e);
          }
          return false;
        ]]>
        </body>
      </method>

      <method name="resetHover">
        <body><![CDATA[
          if (this.mHoverCell)
            this.mHoverCell.removeAttribute("hover");
        ]]></body>
      </method>

      <method name="getColIndex">
        <parameter name="aCell"/>
        <body><![CDATA[
          var cell = aCell;
          var idx;
          for (idx = -1; cell; idx++)
            cell = cell.previousSibling;

          return idx;
        ]]></body>
      </method>

      <method name="isColorCell">
        <parameter name="aCell"/>
        <body><![CDATA[
          return aCell && aCell.hasAttribute("color");
        ]]></body>
      </method>

      <method name="hoverLeft">
        <body><![CDATA[
          var cell = this.mHoverCell.previousSibling;
          this.hoverCell(cell);
        ]]></body>
      </method>
      
      <method name="hoverRight">
        <body><![CDATA[
          var cell = this.mHoverCell.nextSibling;
          this.hoverCell(cell);
        ]]></body>
      </method>

      <method name="hoverUp">
        <body><![CDATA[
          var row = this.mHoverCell.parentNode.previousSibling;
          if (row) {
            var colIdx = this.getColIndex(this.mHoverCell);
            var cell = row.childNodes[colIdx];
            this.hoverCell(cell);
          }
        ]]></body>
      </method>

      <method name="hoverDown">
        <body><![CDATA[
          var row = this.mHoverCell.parentNode.nextSibling;
          if (row) {
            var colIdx = this.getColIndex(this.mHoverCell);
            var cell = row.childNodes[colIdx];
            this.hoverCell(cell);
          }
        ]]></body>
      </method>

      <method name="hoverTo">
        <parameter name="aRow"/>
        <parameter name="aCol"/>
        
        <body><![CDATA[
          var row = this.mBox.childNodes[aRow];
          if (!row) return;
          var cell = row.childNodes[aCol];
          if (!cell) return;
          this.hoverCell(cell);
        ]]></body>
      </method>

      <method name="hoverCell">
        <parameter name="aCell"/>
        
        <body><![CDATA[
          if (this.isColorCell(aCell)) {
            this.resetHover();
            aCell.setAttribute("hover", "true");
            this.mHoverCell = aCell;
            var event = document.createEvent('Events');
            event.initEvent('DOMMenuItemActive', true, true);
            aCell.dispatchEvent(event);
          }
        ]]></body>
      </method>

      <method name="selectHoverCell">
        <body><![CDATA[
          this.selectCell(this.mHoverCell);
        ]]></body>
      </method>

      <method name="selectCell">
        <parameter name="aCell"/>
        
        <body><![CDATA[
          if (this.isColorCell(aCell)) {
            if (this.mSelectedCell)
              this.mSelectedCell.removeAttribute("selected");

            this.mSelectedCell = aCell;
            aCell.setAttribute("selected", "true");

            if (this.mDoOnSelect)
              this._fireEvent(this, "select");
          }
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          switch (aEvent.keyCode) {
            case 37: // left
              this.hoverLeft();
              break;
            case 38: // up
              this.hoverUp();
              break;
            case 39: // right
              this.hoverRight();
              break;
            case 40: // down
              this.hoverDown();
              break;
            case 13: // enter
            case 32: // space
              this.selectHoverCell();
              break;
          }
        ]]></body>
      </method>

	  <constructor><![CDATA[
        this.initialize();
      ]]></constructor>

    </implementation>    
    
    <handlers>
      <handler event="mouseover"><![CDATA[
        this.hoverCell(event.originalTarget);
      ]]></handler>
      
      <handler event="click"><![CDATA[
        if (event.originalTarget.hasAttribute("color")) {
          this.selectCell(event.originalTarget);
          this.hoverCell(this.mSelectedCell);
        }
      ]]></handler>


      <handler event="focus" phase="capturing">
      <![CDATA[
        if (!mIsPopup && this.getAttribute('focused') != 'true') {
          this.setAttribute('focused','true');
          document.addEventListener("keydown", this, true);
          if (this.mSelectedCell)
            this.hoverCell(this.mSelectedCell);
        }
      ]]>
      </handler>
    
      <handler event="blur" phase="capturing">
      <![CDATA[
        if (!mIsPopup && this.getAttribute('focused') == 'true') {
          document.removeEventListener("keydown", this, true);
          this.removeAttribute('focused');
          this.resetHover();
        }
      ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="colorpicker-button" display="xul:menu" role="xul:colorpicker"
           extends="chrome://global/content/bindings/general.xml#basecontrol">
    <resources>
      <stylesheet src="chrome://global/skin/colorpicker.css"/>
    </resources>
    
    <content>
      <xul:hbox class="colorpicker-button-colorbox" anonid="colorbox" flex="1" xbl:inherits="disabled"/>

      <xul:panel class="colorpicker-button-menupopup"
                 anonid="colorpopup" noautofocus="true" level="top"
                 onmousedown="event.stopPropagation()"
                 onpopupshowing="this._colorPicker.onPopupShowing()"
                 onpopuphiding="this._colorPicker.onPopupHiding()"
                 onselect="this._colorPicker.pickerChange()">
        <xul:colorpicker xbl:inherits="palettename,disabled" allowevents="true" anonid="colorpicker"/>
      </xul:panel>
    </content>
    
    <implementation>
      <property name="open"
                onget="return this.getAttribute('open') == 'true'"
                onset="this.showPopup();"/>
      <property name="color">
        <getter><![CDATA[
          return this.getAttribute("color");
        ]]></getter>
        <setter><![CDATA[
          this.mColorBox.style.backgroundColor = val;
          this.setAttribute("color", val);
          return val;
        ]]></setter>
      </property>
      
      <method name="initialize">
        <body><![CDATA[
          this.mColorBox = document.getAnonymousElementByAttribute(this, "anonid", "colorbox");
          this.mColorBox.style.backgroundColor = this.color;
        
          var popup = document.getAnonymousElementByAttribute(this, "anonid", "colorpopup")
          popup._colorPicker = this;
          
          this.mPicker = document.getAnonymousElementByAttribute(this, "anonid", "colorpicker")
        ]]></body>
      </method>
      
      <method name="_fireEvent">
        <parameter name="aTarget"/>
        <parameter name="aEventName"/>
        <body>
        <![CDATA[      
          try {
            var event = document.createEvent("Events");
            event.initEvent(aEventName, true, true);
            var cancel = !aTarget.dispatchEvent(event);
            if (aTarget.hasAttribute("on" + aEventName)) {
              var fn = new Function ("event", aTarget.getAttribute("on" + aEventName));
              var rv = fn.call(aTarget, event);
              if (rv == false)
                cancel = true;
            }
            return !cancel;  
          }
          catch (e) { 
            dump(e);
          }
          return false;
        ]]>
        </body>
      </method>

      <method name="showPopup">
        <body><![CDATA[
          this.mPicker.parentNode.openPopup(this, "after_start", 0, 0, false, false);
        ]]></body>
      </method>
      
      <method name="hidePopup">
        <body><![CDATA[
          this.mPicker.parentNode.hidePopup();
        ]]></body>
      </method>

      <method name="onPopupShowing">
        <body><![CDATA[
          if ("resetHover" in this.mPicker)
            this.mPicker.resetHover();
          document.addEventListener("keydown", this.mPicker, true);
          this.mPicker.mIsPopup = true;
          // Initialize to current button's color
          this.mPicker.initColor(this.color);
        ]]></body>
      </method>
      
      <method name="onPopupHiding">
        <body><![CDATA[
          // Removes the key listener
          document.removeEventListener("keydown", this.mPicker, true);
          this.mPicker.mIsPopup = false;
        ]]></body>
      </method>

      <method name="pickerChange">
        <body><![CDATA[
          this.color = this.mPicker.color;
          setTimeout(function(aPopup) { aPopup.hidePopup() }, 1, this.mPicker.parentNode);
          
          this._fireEvent(this, "change");
        ]]></body>
      </method>

      <constructor><![CDATA[
        this.initialize();
      ]]></constructor>
      
    </implementation>

    <handlers>
      <handler event="keydown"><![CDATA[
        // open popup if key is space/up/left/right/down and popup is closed
        if ( (event.keyCode == 32 || (event.keyCode > 36 && event.keyCode < 41)) && !this.open)
          this.showPopup();
        else if ( (event.keyCode == 27) && this.open)
          this.hidePopup();
      ]]></handler>
    </handlers>
  </binding>

  <binding id="colorpickertile" role="xul:colorpickertile">
  </binding>

</bindings>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>
  <color name="background_light">#FFF5F5F5</color>

  <!-- If you update one, update the other. -->
  <color name="background_normal">#FFEBEBF0</color>
  <color name="background_normal_lwt">#DDEBEBF0</color>

  <color name="background_private">#FF292C29</color>
  <color name="background_tabs">#FF363B40</color>
  <color name="highlight">#33000000</color>
  <color name="highlight_focused">#1A000000</color>
  <color name="highlight_dark">#33FFFFFF</color>
  <color name="highlight_dark_focused">#1AFFFFFF</color>

  <!-- If you update one, update the other. -->
  <color name="new_tablet_highlight">#D7D7DC</color>
  <color name="new_tablet_highlight_lwt">#AAD7D7DC</color>

  <!-- If you update one, update the other. -->
  <color name="new_tablet_highlight_dark">#45494E</color>
  <color name="new_tablet_highlight_dark_lwt">#AA45494E</color>

  <!-- (bug 1077195) Focused state values are temporary. -->
  <color name="new_tablet_highlight_focused">#C0C9D0</color>
  <color name="new_tablet_highlight_pb">#222222</color>
  <color name="new_tablet_highlight_focused_pb">#363B40</color>

  <!-- highlight on shaped button: 20% white over background_tabs -->
  <color name="highlight_shaped">#FF696D71</color>

  <!-- highlight-focused on shaped button: 10% white over background_tabs -->
  <color name="highlight_shaped_focused">#FF565B60</color>

  <!-- highlight on nav button: 20% black over background_normal -->
  <color name="highlight_nav">#FFA5ACB2</color>

  <!-- highlight-focused on nav button: 10% black over background_normal -->
  <color name="highlight_nav_focused">#FFB9C1C7</color>

  <!-- highlight on private nav button: 20% white over background_private -->
  <color name="highlight_nav_pb">#FF545654</color>

  <!-- highlight-focused on private nav button: 10% white over background_private -->
  <color name="highlight_nav_focused_pb">#FF3F423F</color>

  <!-- Onboarding start pane -->
  <color name="onboard_start">#EAEAEA</color>
  <color name="onboard_start_highlight">#D8D8D8</color>

  <!--
      Application theme colors
  -->
  <!-- Default colors -->
  <color name="text_color_primary">#222222</color>
  <color name="text_color_secondary">#777777</color>
  <color name="text_color_tertiary">#9198A1</color>

  <!-- Default inverse colors -->
  <color name="text_color_primary_inverse">#F5F5F5</color>
  <color name="text_color_secondary_inverse">#DDDDDD</color>
  <color name="text_color_tertiary_inverse">#A4A7A9</color>

  <!-- Colour used for share overlay button labels -->
  <color name="text_color_overlaybtn">#666666</color>
  <color name="text_color_overlaybtn_disabled">#AFB1B3</color>

  <color name="overlay_share_header_background">#FFFFFFFF</color>

  <!-- Colours used for share overlay button background -->
  <color name="overlay_share_background">#FFEBEBF0</color>
  <color name="overlay_share_selected">#FFF5F5F5</color>

  <!-- Disabled colors -->
  <color name="text_color_primary_disable_only">#999999</color>

  <!-- Hint colors -->
  <color name="text_color_hint">#666666</color>
  <color name="text_color_hint_inverse">#7F828A</color>
  <color name="text_color_hint_floating_focused">#33b5e5</color>

  <!-- Highlight colors -->
  <color name="text_color_highlight">#FF9500</color>
  <color name="text_color_highlight_inverse">#D06BFF</color>

  <!-- Link colors -->
  <color name="text_color_link">#22629E</color>

  <!-- Divider colors -->
  <color name="divider_light">#FFD7D9DB</color>
  <color name="divider_dark">#FFB3C2CE</color>

  <color name="splash_background">#000000</color>
  <color name="splash_msgfont">#ffffff</color>
  <color name="splash_urlfont">#000000</color>
  <color name="splash_content">#ffffff</color>

  <color name="doorhanger_text">#FF222222</color>
  <color name="doorhanger_link">#FF2AA1FE</color>
  <color name="doorhanger_background_dark">#FFDDE4EA</color>

  <color name="validation_message_text">#ffffff</color>
  <color name="url_bar_text_highlight">#FFFF9500</color>
  <color name="url_bar_text_highlight_pb">#FFD06BFF</color>
  <color name="suggestion_primary">#dddddd</color>
  <color name="suggestion_pressed">#bbbbbb</color>
  <color name="tab_row_pressed">#4D000000</color>

  <color name="textbox_background">#FFF</color>
  <color name="textbox_background_disabled">#DDD</color>
  <color name="textbox_stroke">#000</color>
  <color name="textbox_stroke_disabled">#666</color>

  <color name="url_bar_urltext">#A6A6A6</color>
  <color name="url_bar_domaintext">#000</color>
  <color name="url_bar_domaintext_private">#FFF</color>
  <color name="url_bar_blockedtext">#b14646</color>
  <color name="url_bar_shadow">#12000000</color>

  <color name="nav_button_border_color">#BFBFBF</color>
  <color name="nav_button_border_color_private">#5F6368</color>

  <color name="home_button_bar_bg">#FFF5F7F9</color>

  <!-- Colour used for share overlay button labels -->
  <color name="home_text_color">@color/text_color_primary</color>
  <color name="home_text_color_disabled">#AFB1B3</color>

  <color name="panel_image_item_background">#D1D9E1</color>

  <!-- Swipe to refresh colors for dynamic panel -->
  <color name="swipe_refresh_orange">#FFFFC26C</color>
  <color name="swipe_refresh_white">#FFFFFFFF</color>

  <!-- Swipe to refresh colors for remote tabs -->
  <color name="swipe_refresh_orange1">#EE6700</color>
  <color name="swipe_refresh_orange2">#FF9400</color>
  <color name="swipe_refresh_orange3">#F57900</color>
  <color name="swipe_refresh_orange4">#FFB44C</color>

  <!-- Remote tabs setup -->
  <color name="remote_tabs_setup_button_background">#E66000</color>
  <color name="remote_tabs_setup_button_background_hit">#D95300</color>

  <!-- Button toast colors. -->
  <color name="toast_background">#DD363B40</color>
  <color name="toast_button_background">#00000000</color>
  <color name="toast_button_pressed">#DD2C3136</color>
  <color name="toast_button_text">#FFFFFFFF</color>

  <!-- Tab History colors. -->
  <color name="tab_history_background">#EBEBF0</color>
  <color name="tab_history_timeline_separator">#D7D9DB</color>
  <color name="tab_history_favicon_border">#D7D9DB</color>
  <color name="tab_history_favicon_background">#FFFFFF</color>
  <color name="tab_history_title_color">#363B40</color>
  <color name="tab_history_border_color">#DADADF</color>

  <!-- Colour used for Find-In-Page dialog -->
  <color name="find_status_default">#AFB1B3</color>
  <color name="find_matchcase_on">#AFB1B3</color>
  <color name="find_matchcase_off">#D02626</color>

  <!-- Canvas delegate paint color -->
  <color name="canvas_delegate_paint">#FFFF0000</color>

  <!-- Top sites thumbnail colors -->
  <color name="top_site_default">#FFECF0F3</color>
  <color name="top_site_border">#FFCFD9E1</color>

  <!-- Tab grid text highlight colour -->
  <color name="new_tablet_tab_grid_text_unselected">#FFAFB1B3</color>


</resources>
<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright (c) 2012 The Chromium Authors. All rights reserved.
  Use of this source code is governed by a BSD-style license that can be
  found in the LICENSE file.
-->
<project name="chrome_common_defines">
  <!-- Common build properties for Chrome for android. -->

  <!--
    Macro for checking that a property is correctly set. Performs checks for:
    1. Property is set and not null.
    2. String value of property does not contains any '$' signs.
  -->
  <macrodef name="check-property-value">
    <attribute name="property"/>
    <sequential>
      <fail message ="Property @{property} is not set.">
        <condition>
          <or>
            <not><isset property="@{property}"/></not>
            <length string="${@{property}}" trim="true" when="less" length="1"/>
          </or>
        </condition>
      </fail>
      <!--
        Check for $ signs. This catches errors when properties are initialized from environment
        variables. E.g. if we have <property name="foo" value="${env.bar}" /> but env.bar is
        not set then foo will have the literal value of '${env.bar}'.
      -->
      <fail message="Value checked failed for property: @{property} : ${@{property}}.
          Property value contains an uninitialized environment variable.">
        <condition>
          <contains string="${@{property}}" substring="$"/>
        </condition>
      </fail>
    </sequential>
  </macrodef>

  <!--
    A safe setter for location properties. Checks that a location is not
    empty and actually exists. For specifying output directories, location
    check can be disabled by specifying check-exists="false".
  -->
  <macrodef name="property-location">
    <attribute name="name"/>
    <attribute name="location"/>
    <attribute name="check-exists" default="true"/>
    <sequential>
      <property name="@{name}" location="@{location}"/>
      <check-property-value property="@{name}"/>
      <fail message="Location specified for @{name} : @{location} does not exist.">
        <condition>
          <and>
            <equals arg1="@{check-exists}" arg2="true"/>
            <not><available file="@{location}"/></not>
          </and>
        </condition>
      </fail>
    </sequential>
  </macrodef>

  <!-- A safe setter for property values -->
  <macrodef name="property-value">
    <attribute name="name"/>
    <attribute name="value"/>
    <sequential>
      <property name="@{name}" value="@{value}"/>
      <check-property-value property="@{name}"/>
    </sequential>
  </macrodef>

  <!-- Common environment properties. -->
  <property-location name="sdk.dir" location="${ANDROID_SDK_ROOT}"/>
  <property-value name="target" value="android-${ANDROID_SDK_VERSION}"/>
  <property name="source.dir" location="src"/>
  <property-location name="android.gdbserver" location="${ANDROID_GDBSERVER}"/>
  <!--
       Common directories used by SDK Build, when making changes here
       make sure to update gyp files and test scripts constants in
       build/android/pylib/constants.py
  -->
  <!-- Common directory for chromium_*.jars. -->
  <property-location name="lib.java.dir" location="${PRODUCT_DIR}/lib.java"/>
  <!-- Common directory for test jars. -->
  <property-location name="test.lib.java.dir"
    location="${PRODUCT_DIR}/test.lib.java"/>
  <!-- Common directory for apks. -->
  <property-location name="apks.dir" location="${PRODUCT_DIR}/apks"/>
</project>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings SYSTEM "chrome://global/locale/console.dtd">

<bindings id="consoleBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="console-box" extends="xul:box">
    <content>  
      <xul:stringbundle src="chrome://global/locale/console.properties" role="string-bundle"/>
      <xul:vbox class="console-box-internal">
        <xul:vbox class="console-rows" role="console-rows" xbl:inherits="dir=sortOrder"/>
      </xul:vbox>
    </content>

    <implementation>
      <field name="limit" readonly="true">
        250
      </field>

      <field name="fieldMaxLength" readonly="true">
        <!-- Limit displayed string lengths to avoid performance issues. (Bug 796179 and 831020) -->
        200
      </field>

      <field name="showChromeErrors" readonly="true">
        Services.prefs.getBoolPref("javascript.options.showInConsole");
      </field>

      <property name="count" readonly="true">
        <getter>return this.mCount</getter>
      </property>

      <property name="mode">
        <getter>return this.mMode;</getter>
        <setter><![CDATA[
          if (this.mode != val) {
            this.mMode = val || "All";
            this.setAttribute("mode", this.mMode);
            this.selectedItem = null;
          }
          return val;
        ]]></setter>
      </property>

      <property name="filter">
        <getter>return this.mFilter;</getter>
        <setter><![CDATA[
          val = val.toLowerCase();
          if (this.mFilter != val) {
            this.mFilter = val;
            for (let aRow of this.mConsoleRowBox.children) {
              this.filterElement(aRow);
            }
          }
          return val;
        ]]></setter>
      </property>

      <property name="sortOrder">
        <getter>return this.getAttribute("sortOrder");</getter>
        <setter>this.setAttribute("sortOrder", val); return val;</setter>
      </property>
      <field name="mSelectedItem">null</field>
      <property name="selectedItem">
        <getter>return this.mSelectedItem</getter>
        <setter><![CDATA[
          if (this.mSelectedItem)
            this.mSelectedItem.removeAttribute("selected");

          this.mSelectedItem = val;
          if (val)
            val.setAttribute("selected", "true");

          // Update edit commands
          window.updateCommands("focus");
          return val;
        ]]></setter>
      </property>

      <method name="init">
        <body><![CDATA[
          this.mCount = 0;

          this.mConsoleListener = {
            console: this, 
            observe : function(aObject) {
              // The message can arrive a little bit after the xbl binding has been
              // unbind. So node.appendItem will not be available anymore.
              if ('appendItem' in this.console)
                this.console.appendItem(aObject);
            }
          };

          this.mConsoleRowBox = document.getAnonymousElementByAttribute(this, "role", "console-rows");
          this.mStrBundle = document.getAnonymousElementByAttribute(this, "role", "string-bundle");

          try {
            Services.console.registerListener(this.mConsoleListener);
          } catch (ex) {
            appendItem(
              "Unable to display errors - couldn't get Console Service component. " +
              "(Missing @mozilla.org/consoleservice;1)");
            return;
          }

          this.mMode = this.getAttribute("mode") || "All";
          this.mFilter = "";

          this.appendInitialItems();
          window.controllers.insertControllerAt(0, this._controller);
        ]]></body>
      </method>

      <method name="destroy">
        <body><![CDATA[
          Services.console.unregisterListener(this.mConsoleListener);
          window.controllers.removeController(this._controller);
        ]]></body>
      </method>

      <method name="appendInitialItems">
        <body><![CDATA[
          var messages = Services.console.getMessageArray();

          // In case getMessageArray returns 0-length array as null
          if (!messages)
            messages = [];

          var limit = messages.length - this.limit;
          if (limit < 0) limit = 0;

          // Checks if console ever been cleared
          for (var i = messages.length - 1; i >= limit; --i)
            if (!messages[i].message)
              break;

          // Populate with messages after latest "clear"
          while (++i < messages.length)
            this.appendItem(messages[i]);
        ]]></body>
      </method>

      <method name="appendItem">
        <parameter name="aObject"/>
        <body><![CDATA[
          try {
            // Try to QI it to a script error to get more info
            var scriptError = aObject.QueryInterface(Components.interfaces.nsIScriptError);

            // filter chrome urls
            if (!this.showChromeErrors && scriptError.sourceName.substr(0, 9) == "chrome://")
              return;

            // filter private windows
            if (scriptError.isFromPrivateWindow)
              return;

            this.appendError(scriptError);
          } catch (ex) {
            try {
              // Try to QI it to a console message
              var msg = aObject.QueryInterface(Components.interfaces.nsIConsoleMessage);
              if (msg.message)
                this.appendMessage(msg.message);
              else // observed a null/"clear" message
                this.clearConsole();
            } catch (ex2) {
              // Give up and append the object itself as a string
              this.appendMessage(aObject);
            }
          }
        ]]></body>
      </method>

      <method name="_truncateIfNecessary">
        <parameter name="aString"/>
        <parameter name="aMiddleCharacter"/>
        <body><![CDATA[
          if (!aString || aString.length <= this.fieldMaxLength)
            return {string: aString, column: aMiddleCharacter};
          let halfLimit = this.fieldMaxLength / 2;
          if (!aMiddleCharacter || aMiddleCharacter < 0 || aMiddleCharacter > aString.length)
            aMiddleCharacter = halfLimit;

          let startPosition = 0;
          let endPosition = aString.length;
          if (aMiddleCharacter - halfLimit >= 0)
            startPosition = aMiddleCharacter - halfLimit;
          if (aMiddleCharacter + halfLimit <= aString.length)
            endPosition = aMiddleCharacter + halfLimit;
          if (endPosition - startPosition < this.fieldMaxLength)
            endPosition += this.fieldMaxLength - (endPosition - startPosition);
          let truncatedString = aString.substring(startPosition, endPosition);
          let Ci = Components.interfaces;
          let ellipsis = Services.prefs.getComplexValue("intl.ellipsis",
                                                        Ci.nsIPrefLocalizedString).data;
          if (startPosition > 0) {
            truncatedString = ellipsis + truncatedString;
            aMiddleCharacter += ellipsis.length;
          }
          if (endPosition < aString.length)
            truncatedString = truncatedString + ellipsis;

          return {
            string: truncatedString,
            column: aMiddleCharacter - startPosition
          };
        ]]></body>
      </method>

      <method name="appendError">
        <parameter name="aObject"/>
        <body><![CDATA[
          var row = this.createConsoleRow();
          var nsIScriptError = Components.interfaces.nsIScriptError;

          // Is this error actually just a non-fatal warning?
          var warning = aObject.flags & nsIScriptError.warningFlag != 0;

          var typetext = warning ? "typeWarning" : "typeError";
          row.setAttribute("typetext", this.mStrBundle.getString(typetext));
          row.setAttribute("type", warning ? "warning" : "error");
          row.setAttribute("msg", aObject.errorMessage);
          row.setAttribute("category", aObject.category);
          row.setAttribute("time", this.properFormatTime(aObject.timeStamp));
          if (aObject.lineNumber || aObject.sourceName) {
            row.setAttribute("href", this._truncateIfNecessary(aObject.sourceName).string);
            row.mSourceName = aObject.sourceName;
            row.setAttribute("line", aObject.lineNumber);
          } else {
            row.setAttribute("hideSource", "true");
          }
          if (aObject.sourceLine) {
            let sourceLine = aObject.sourceLine.replace(/\s/g, " ");
            let truncatedLineObj = this._truncateIfNecessary(sourceLine, aObject.columnNumber);
            row.setAttribute("code", truncatedLineObj.string);
            row.mSourceLine = sourceLine;
            if (aObject.columnNumber) {
              row.setAttribute("col", aObject.columnNumber);
              row.setAttribute("errorDots", this.repeatChar(" ", truncatedLineObj.column));
              row.setAttribute("errorCaret", " ");
            } else {
              row.setAttribute("hideCaret", "true");
            }
          } else {
            row.setAttribute("hideCode", "true");
          }

          this.appendConsoleRow(row);
        ]]></body>
      </method>

      <method name="appendMessage">
        <parameter name="aMessage"/>
        <parameter name="aType"/>
        <body><![CDATA[
          var row = this.createConsoleRow();
          row.setAttribute("type", aType || "message");
          row.setAttribute("msg", aMessage);
          this.appendConsoleRow(row);
        ]]></body>
      </method>

      <method name="clear">
        <body><![CDATA[
          // add a "clear" message (mainly for other listeners)
          Services.console.logStringMessage(null);
          Services.console.reset();
        ]]></body>
      </method>

      <method name="properFormatTime">
        <parameter name="aTime"/>
        <body><![CDATA[
          const dateServ = Components.classes["@mozilla.org/intl/scriptabledateformat;1"]
                                     .getService(Components.interfaces.nsIScriptableDateFormat);
          let errorTime = new Date(aTime);
          return dateServ.FormatDateTime("", dateServ.dateFormatShort, dateServ.timeFormatSeconds,
              errorTime.getFullYear(), errorTime.getMonth() + 1, errorTime.getDate(),
              errorTime.getHours(), errorTime.getMinutes(), errorTime.getSeconds());
        ]]></body>
      </method>

      <method name="copySelectedItem">
        <body><![CDATA[
          if (this.mSelectedItem) try {
            const clipURI = "@mozilla.org/widget/clipboardhelper;1";
            const clipI = Components.interfaces.nsIClipboardHelper;
            var clipboard = Components.classes[clipURI].getService(clipI);

            clipboard.copyString(this.mSelectedItem.toString(), document);
          } catch (ex) {
            // Unable to copy anything, die quietly
          }
        ]]></body>
      </method>

      <method name="createConsoleRow">
        <body><![CDATA[
          var row = document.createElement("box");
          row.setAttribute("class", "console-row");
          row._IsConsoleRow = true;
          row._ConsoleBox = this;
          return row;
        ]]></body>
      </method>

      <method name="appendConsoleRow">
        <parameter name="aRow"/>
        <body><![CDATA[
          this.filterElement(aRow);
          this.mConsoleRowBox.appendChild(aRow);
          if (++this.mCount > this.limit) this.deleteFirst();
        ]]></body>
      </method>

      <method name="deleteFirst">
        <body><![CDATA[
          var node = this.mConsoleRowBox.firstChild;
          this.mConsoleRowBox.removeChild(node);
          --this.mCount;
        ]]></body>
      </method>

      <method name="clearConsole">
        <body><![CDATA[
          if (this.mCount == 0) // already clear
            return;
          this.mCount = 0;

          var newRows = this.mConsoleRowBox.cloneNode(false);
          this.mConsoleRowBox.parentNode.replaceChild(newRows, this.mConsoleRowBox);
          this.mConsoleRowBox = newRows;
          this.selectedItem = null;
        ]]></body>
      </method>

      <method name="filterElement">
        <parameter name="aRow" />
        <body><![CDATA[
          let anyMatch = ["msg", "line", "code"].some(function (key) {
            return (aRow.hasAttribute(key) &&
                    this.stringMatchesFilters(aRow.getAttribute(key), this.mFilter));
          }, this) || (aRow.mSourceName &&
                       this.stringMatchesFilters(aRow.mSourceName, this.mFilter));

          if (anyMatch) {
            aRow.classList.remove("filtered-by-string")
          } else {
            aRow.classList.add("filtered-by-string")
          }
        ]]></body>
      </method>

      <!-- UTILITY FUNCTIONS -->
      
      <method name="repeatChar">
        <parameter name="aChar"/>
        <parameter name="aCol"/>
        <body><![CDATA[
          if (--aCol <= 0)
            return "";

          for (var i = 2; i < aCol; i += i)
            aChar += aChar;

          return aChar + aChar.slice(0, aCol - aChar.length);
        ]]></body>
      </method>

      <method name="stringMatchesFilters">
        <parameter name="aString"/>
        <parameter name="aFilter"/>
        <body><![CDATA[
          if (!aString || !aFilter) {
            return true;
          }

          let searchStr = aString.toLowerCase();
          let filterStrings = aFilter.split(/\s+/);
          return !filterStrings.some(function (f) {
            return searchStr.indexOf(f) == -1;
          });
        ]]></body>
      </method>
          
      <constructor> this.init(); </constructor>
      <destructor> this.destroy(); </destructor>

      <!-- Command controller for the copy command -->
      <field name="_controller"><![CDATA[({
        _outer: this,

        QueryInterface: function(aIID) {
          if (aIID.equals(Components.interfaces.nsIController) ||
              aIID.equals(Components.interfaces.nsISupports))
            return this;
          throw Components.results.NS_NOINTERFACE;
        },

        supportsCommand: function(aCommand) {
          return aCommand == "cmd_copy";
        },

        isCommandEnabled: function(aCommand) {
          return aCommand == "cmd_copy" && this._outer.selectedItem;
        },

        doCommand: function(aCommand) {
          if (aCommand == "cmd_copy")
            this._outer.copySelectedItem();
        },

        onEvent: function() { }
      });]]></field>
    </implementation>

    <handlers>
      <handler event="mousedown"><![CDATA[
        if (event.button == 0 || event.button == 2) {
          var target = event.originalTarget;

          while (target && !("_IsConsoleRow" in target))
            target = target.parentNode;

          if (target)
            this.selectedItem = target;
        }
      ]]></handler>
    </handlers>
  </binding>

  <binding id="error" extends="xul:box">
    <content>
      <xul:box class="console-row-internal-box" flex="1">
        <xul:box class="console-row-icon" align="center" xbl:inherits="selected">
          <xul:image class="console-icon" xbl:inherits="src,type"/>
        </xul:box>
        <xul:vbox class="console-row-content" xbl:inherits="selected" flex="1">
          <xul:box class="console-row-msg" align="start">
            <xul:label class="label" xbl:inherits="value=typetext"/>
            <xul:description class="console-error-msg" xbl:inherits="xbl:text=msg" flex="1"/>
            <xul:label class="label console-time" xbl:inherits="value=time"/>
          </xul:box>
          <xul:box class="console-row-file" xbl:inherits="hidden=hideSource">
            <xul:label class="label" value="&errFile.label;"/>
            <xul:box class="console-error-source" xbl:inherits="href,line"/>
            <xul:spacer flex="1"/>
            <xul:hbox class="lineNumberRow" xbl:inherits="line">
              <xul:label class="label" value="&errLine.label;"/>
              <xul:label class="label" xbl:inherits="value=line"/>
            </xul:hbox>
          </xul:box>
          <xul:vbox class="console-row-code" xbl:inherits="selected,hidden=hideCode">
            <xul:label class="monospace console-code" xbl:inherits="value=code" crop="end"/>
            <xul:box xbl:inherits="hidden=hideCaret">
              <xul:label class="monospace console-dots" xbl:inherits="value=errorDots"/>
              <xul:label class="monospace console-caret" xbl:inherits="value=errorCaret"/>
              <xul:spacer flex="1"/>
            </xul:box>
          </xul:vbox>
        </xul:vbox>
      </xul:box>
    </content>

    <implementation>
      <field name="mSourceName">null</field>
      <field name="mSourceLine">null</field>

      <method name="toString">
        <body><![CDATA[
          let msg = "";
          let strBundle = this._ConsoleBox.mStrBundle;

          if (this.hasAttribute("time"))
            msg += strBundle.getFormattedString("errTime", [this.getAttribute("time")]) + "\n";

          msg += this.getAttribute("typetext") + " " + this.getAttribute("msg");

          if (this.hasAttribute("line") && this.mSourceName) {
            msg += "\n" + strBundle.getFormattedString("errFile",
                                        [this.mSourceName]) + "\n";
            if (this.hasAttribute("col")) {
              msg += strBundle.getFormattedString("errLineCol",
                         [this.getAttribute("line"), this.getAttribute("col")]);
            } else
              msg += strBundle.getFormattedString("errLine", [this.getAttribute("line")]);
          }

          if (this.hasAttribute("code"))
            msg += "\n" + strBundle.getString("errCode") + "\n" + this.mSourceLine;

          return msg;
        ]]></body>
      </method>
    </implementation>

  </binding>

  <binding id="message" extends="xul:box">
    <content>
      <xul:box class="console-internal-box" flex="1">
        <xul:box class="console-row-icon" align="center">
          <xul:image class="console-icon" xbl:inherits="src,type"/>
        </xul:box>
        <xul:vbox class="console-row-content" xbl:inherits="selected" flex="1">
          <xul:vbox class="console-row-msg" flex="1">
            <xul:description class="console-msg-text" xbl:inherits="xbl:text=msg"/>
          </xul:vbox>
        </xul:vbox>
      </xul:box>
    </content>

    <implementation>
      <method name="toString">
        <body><![CDATA[
          return this.getAttribute("msg");
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="console-error-source" extends="xul:box">
    <content>
      <xul:label class="text-link" xbl:inherits="value=href" crop="right"/>
    </content>

    <handlers>
      <handler event="click" phase="capturing" button="0" preventdefault="true">
        <![CDATA[
          var url = document.getBindingParent(this).mSourceName;
          url = url.substring(url.lastIndexOf(" ") + 1);
          var line = getAttribute("line");
          gViewSourceUtils.viewSource(url, null, null, line);
        ]]>
      </handler>
    </handlers>
  </binding>

</bindings>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
<!ENTITY % browserDTD SYSTEM "chrome://browser/locale/browser.dtd">
%browserDTD;
]>

<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  <binding id="error" extends="chrome://browser/content/bindings/bindings.xml#richlistitem">
    <content orient="vertical">
      <xul:hbox class="console-row-internal-box" flex="1">
        <xul:vbox class="console-row-content" flex="1">
          <xul:hbox class="console-row-msg" align="start">
            <xul:label class="label title" xbl:inherits="value=typetext"/>
            <xul:description class="console-error-msg title" xbl:inherits="xbl:text=msg" flex="1"/>
          </xul:hbox>
          <xul:hbox class="console-row-file" xbl:inherits="hidden=hideSource">
            <xul:label class="label title" value="&consoleErrFile.label;"/>
            <xul:label class="title" xbl:inherits="value=href" crop="right"/>
            <xul:spacer flex="1"/>
            <xul:hbox class="lineNumberRow" xbl:inherits="line">
              <xul:label class="label title" value="&consoleErrLine.label;"/>
              <xul:label class="label title" xbl:inherits="value=line"/>
            </xul:hbox>
          </xul:hbox>
          <xul:vbox class="console-row-code" xbl:inherits="hidden=hideCode">
            <xul:label class="monospace console-code" xbl:inherits="value=code" crop="end"/>
          </xul:vbox>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>
  <binding id="message" extends="chrome://browser/content/bindings/bindings.xml#richlistitem">
    <content>
      <xul:hbox class="console-internal-box" flex="1">
        <xul:vbox class="console-row-content" flex="1">
          <xul:vbox class="console-row-msg" flex="1">
            <xul:description class="console-msg-text title" xbl:inherits="xbl:text=msg"/>
          </xul:vbox>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>browser_ContentSearch contentSearchBadImage.xml</ShortName>
<Url type="text/html" method="GET" template="http://browser-ContentSearch.com/contentSearchBadImage" rel="searchform"/>
<Image width="16" height="16">data:image/x-icon;base64,notbase64</Image>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>browser_ContentSearch contentSearchSuggestions.xml</ShortName>
<Url type="application/x-suggestions+json" method="GET" template="http://mochi.test:8888/browser/browser/modules/test/contentSearchSuggestions.sjs?{searchTerms}"/>
<Url type="text/html" method="GET" template="http://browser-ContentSearch.com/contentSearchSuggestions" rel="searchform"/>
</SearchPlugin>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:fillViewport="true">

    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="vertical"
                  android:background="@color/background_normal">
        
        <LinearLayout android:layout_width="match_parent"
                      android:layout_height="0dp"
                      android:orientation="vertical"
                      android:padding="10dp"
                      android:layout_weight="1">

            <TextView android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:padding="10dip"
                      android:textSize="30sp"
                      android:textColor="#000"
                      android:layout_gravity="center_horizontal"
                      android:fontFamily="sans-serif-light"
                      android:text="@string/crash_sorry"/>

            <TextView android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:padding="10dip"
                      android:textAppearance="@style/TextAppearance"
                      android:text="@string/crash_message2"/>

            <CheckBox android:id="@+id/send_report"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:checked="true"
                      android:textColor="@color/primary_text"
                      android:layout_marginBottom="10dp"
                      android:text="@string/crash_send_report_message3"/>

            <EditText android:id="@+id/comment"
                      style="@style/CrashReporter.EditText"
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:ems="10"
                      android:inputType="textMultiLine"
                      android:lines="5"
                      android:gravity="top"
                      android:layout_marginLeft="8dp"
                      android:layout_marginRight="8dp"
                      android:layout_marginBottom="10dp"
                      android:hint="@string/crash_comment" />

            <CheckBox android:id="@+id/include_url"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textColor="@color/primary_text"
                      android:textAppearance="@style/TextAppearance"
                      android:layout_marginBottom="10dp"
                      android:text="@string/crash_include_url2"/>

            <CheckBox android:id="@+id/allow_contact"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textColor="@color/primary_text"
                      android:textAppearance="@style/TextAppearance"
                      android:layout_marginBottom="10dp"
                      android:text="@string/crash_allow_contact2"/>

            <org.mozilla.gecko.widget.ClickableWhenDisabledEditText
                    android:id="@+id/email"
                    style="@style/CrashReporter.EditText"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:ems="10"
                    android:inputType="textEmailAddress"
                    android:layout_marginLeft="8dp"
                    android:layout_marginRight="8dp"
                    android:enabled="false"
                    android:clickable="true"
                    android:hint="@string/crash_email" />

        </LinearLayout>
        
        <View android:layout_width="match_parent"
              android:layout_height="1dp"
              android:background="#999" />

        <LinearLayout android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:orientation="horizontal"
                      android:layout_gravity="bottom">

            <Button android:id="@+id/close"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1.0"
                    android:padding="15dp"
                    android:onClick="onCloseClick"
                    android:text="@string/crash_close_label"
                    android:textAppearance="?android:attr/textAppearance"
                    android:background="@drawable/action_bar_button"/>

            <View android:layout_width="1dp"
                  android:layout_height="match_parent"
                  android:background="#999" />
        
            <Button android:id="@+id/restart"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1.0"
                    android:padding="15dp"
                    android:onClick="onRestartClick"
                    android:text="@string/crash_restart_label"
                    android:textAppearance="?android:attr/textAppearance"
                    android:background="@drawable/action_bar_button"/>

        </LinearLayout>
   
    </LinearLayout>

</ScrollView>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Creative Commons</ShortName>
<Description>Find photos, movies, music, and text to rip, sample, mash, and share.</Description>
<InputEncoding>utf-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJUSURBVDiNjZO9S1thGMXPvTfJFbnkipNkLLS0ksFg0M0lf4CboNCEgIIg/RiKtEOn0qGWTtbVoBYcIji10I9J0ApWCjp0kRaXdhHjTW4+uGnur4NJ8GOwZ3nf4TnnfZ5z3scAdBGGYdyVdN+yrGHTNNOtVqsVhuG+pO+S3gE/LtV3BIxzPDJNc8FxHGN0dNRKpVIGoJ2dndr+/r5Vr9cl6bmkN0AoSQIEyHXdj5KYnZ3F932uolKpkM/nK5KQ9FmSCZwLOI7zQBLr6+vXiFdRLBaDtsiTTve3YrFYkM/nbyR3MDU1dSKpLumO+vr6Xruui+d5AFSrVVZWVtjY2KDRaABwdHTE4uIie3t7AJTLZaLRaFXSCyUSid1MJgOA53n09/eTTqdJJpPMzc2xurqKbduMj48Tj8fZ3d0FYHBw8FjSezmOU56fnwdgeXkZ27ap1WpUKhWazSZjY2Nks1kASqVSd4zp6eljSX/MtiHdRDpnEATyfb+bkiSVSqXu3TCM8xgHBga+dkY4OzvDdV2GhoZIJBLMzMxQKBSIRqNkMhlisRhbW1sAJJPJn5I+KB6Pv7poou/7rK2tsbm5SRAEXROXlpY4ODgAoFarYdu2J+llN8ZcLvffMeZyud+SGpLuCVBPT89jSRQKhRvJxWKxISmU9JTOT5Rk9Pb2fpHE5OQkJycn14inp6dMTEx4bdM/SbKAy8sk6WEkElmwLCuSSqUYGRmxgHB7e7t+eHgYazabgaRnkt7SeZnr63xbUtYwjGHTNNNhGP4F9iR9a6/zr4v1/wDE1D9XlC4rrAAAAABJRU5ErkJggg==</Image>
<Url type="text/html" method="GET" template="http://search.creativecommons.org/" resultdomain="creativecommons.org">
  <Param name="q" value="{searchTerms}"/>
  <Param name="sourceid" value="Mozilla-search"/>
</Url>
<SearchForm>http://search.creativecommons.org/</SearchForm>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="crlutil">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>CRLUTIL</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>crlutil</refname>
    <refpurpose>
List, generate, modify, or delete CRLs within the NSS security database file(s) and list, create, modify or delete certificates entries in a particular CRL.
    </refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>crlutil</command>
      <arg><replaceable>options</replaceable></arg>
      <arg>[<replaceable>arguments</replaceable>]</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection id="description">
    <title>Description</title>

    <para>The Certificate Revocation List (CRL) Management Tool, <command>crlutil</command>, is a command-line utility that can list, generate, modify, or delete CRLs within the NSS security database file(s) and list, create, modify or delete certificates entries in a particular CRL.
    </para>
    <para>
The key and certificate management process generally begins with creating keys in the key database, then generating and managing certificates in the certificate database(see certutil tool) and continues with certificates expiration or revocation.
    </para>
    <para>
This document discusses certificate revocation list management. For information on security module database management, see Using the Security Module Database Tool. For information on certificate and key database management, see Using the Certificate Database Tool.
    </para>

    <para>
To run the Certificate Revocation List Management Tool, type the command
    </para>
    <para>
crlutil option [arguments]
    </para>
    <para>
where options and arguments are combinations of the options and arguments listed in the following section. Each command takes one option. Each option may take zero or more arguments. To see a usage string, issue the command without options, or with the -H option.
    </para>

  </refsection>
  
  <refsection id="options">
    <title>Options and Arguments</title>
	<para>
	</para>
   	<para><command>Options</command></para> 
   	<para>
Options specify an action. Option arguments modify an action. 
The options and arguments for the crlutil command are defined as follows:
    </para>

  <variablelist>
    <varlistentry>
      <term>-D </term>
        <listitem>
          <para>
Delete Certificate Revocation List from cert database.
          </para>
        </listitem>
      </varlistentry>

    <varlistentry>
      <term>-E </term>
        <listitem>
          <para>
Erase all CRLs of specified type from the cert database
          </para>
        </listitem>
      </varlistentry>

    <varlistentry>
      <term>-G </term>
        <listitem>
          <para>
Create new Certificate Revocation List (CRL).
          </para>
        </listitem>
      </varlistentry>

    <varlistentry>
      <term>-I </term>
        <listitem>
          <para>
Import a CRL to the cert database
          </para>
        </listitem>
      </varlistentry>

    <varlistentry>
      <term>-L </term>
        <listitem>
          <para>
List existing CRL located in cert database file.
          </para>
        </listitem>
      </varlistentry>

    <varlistentry>
      <term>-M </term>
        <listitem>
          <para>
Modify existing CRL which can be located in cert db or in arbitrary file. If located in file it should be encoded in ASN.1 encode format.
          </para>
        </listitem>
      </varlistentry>

    <varlistentry>
      <term>-S </term>
        <listitem>
          <para>
Show contents of a CRL file which isn't stored in the database.
          </para>
        </listitem>
      </varlistentry>
  </variablelist>

  <para><command>Arguments</command></para>
  <para>Option arguments modify an action.</para>

  <variablelist>

      <varlistentry>
        <term>-a </term>
        <listitem>
          <para>
Use ASCII format or allow the use of ASCII format for input and output. This formatting follows RFC #1113.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-B </term>
        <listitem>
          <para>
Bypass CA signature checks.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-c crl-gen-file </term>
        <listitem>
          <para>
Specify script file that will be used to control crl generation/modification. See crl-cript-file format below. If options -M|-G is used and -c crl-script-file is not specified, crlutil will read script data from standard input.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-d directory </term>
        <listitem>
          <para>
Specify the database directory containing the certificate and key database files. On Unix the Certificate Database Tool defaults to $HOME/.netscape (that is, ~/.netscape). On Windows NT the default is the current directory.
          </para>
          <para>
The NSS database files must reside in the same directory.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-f password-file </term>
        <listitem>
          <para>
Specify a file that will automatically supply the password to include in a certificate or to access a certificate database. This is a plain-text file containing one password. Be sure to prevent unauthorized access to this file.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-i crl-file </term>
        <listitem>
          <para>
Specify the file which contains the CRL to import or show.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-l algorithm-name </term>
        <listitem>
          <para>
Specify a specific signature algorithm. List of possible algorithms: MD2 | MD4 | MD5 | SHA1 | SHA256 | SHA384 | SHA512
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-n nickname </term>
        <listitem>
          <para>
Specify the nickname of a certificate or key to list, create, add to a database, modify, or validate. Bracket the nickname string with quotation marks if it contains spaces.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-o output-file </term>
        <listitem>
          <para>
Specify the output file name for new CRL. Bracket the output-file string with quotation marks if it contains spaces. If this argument is not used the output destination defaults to standard output.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-P dbprefix </term>
        <listitem>
          <para>
Specify the prefix used on the NSS security database files (for example, my_cert8.db and my_key3.db). This option is provided as a special case. Changing the names of the certificate and key databases is not recommended.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-t crl-type </term>
        <listitem>
          <para>
Specify type of CRL. possible types are: 0 - SEC_KRL_TYPE, 1 - SEC_CRL_TYPE. This option is obsolete
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-u url </term>
        <listitem>
          <para>
Specify the url.
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-w pwd-string</term>
        <listitem>
          <para>Provide db password in command line.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>-Z algorithm</term>
        <listitem>
          <para>Specify the hash algorithm to use for signing the CRL.</para>
        </listitem>
      </varlistentry>

    </variablelist>
  </refsection>

  <refsection id="syntax">
    <title>CRL Generation script syntax</title>
    <para>CRL generation script file has the following syntax:</para>
    <para>
    * Line with comments should have # as a first symbol of a line</para>
    <para>
    * Set "this update" or "next update" CRL fields:
    </para>
    <para>           
             update=YYYYMMDDhhmmssZ
             nextupdate=YYYYMMDDhhmmssZ
     </para>
    <para>
      Field "next update" is optional. Time should be in GeneralizedTime format (YYYYMMDDhhmmssZ).
      For example: 20050204153000Z
    </para>

    <para>* Add an extension to a CRL or a crl certificate entry:</para>
    <para>addext extension-name critical/non-critical [arg1[arg2 ...]]</para>
    <para>Where:</para>
    <para>
          extension-name: string value of a name of known extensions.
          critical/non-critical: is 1 when extension is critical and 0 otherwise.
          arg1, arg2: specific to extension type extension parameters
    </para>
    <para>
      addext uses the range that was set earlier by addcert and will install an extension to every cert entries within the range.
    </para>
    <para>
    * Add certificate entries(s) to CRL:
    </para>
    <para>
          addcert range date
    </para>
    <para>
          range: two integer values separated by dash: range of certificates that will be added by this command. dash is used as a delimiter. Only one cert will be added if there is no delimiter.
          date: revocation date of a cert. Date should be represented in GeneralizedTime format (YYYYMMDDhhmmssZ).
    </para>
    <para>
    * Remove certificate entry(s) from CRL
    </para>
    <para>
          rmcert range
    </para>
    <para>
      Where:
    </para>
    <para>
          range: two integer values separated by dash: range of certificates that will be added by this command. dash is used as a delimiter. Only one cert will be added if there is no delimiter.
    </para>
    <para>
    * Change range of certificate entry(s) in CRL
    </para>
    <para>
          range new-range
    </para>
    <para>
      Where:
    </para>
    <para>
          new-range: two integer values separated by dash: range of certificates that will be added by this command. dash is used as a delimiter. Only one cert will be added if there is no delimiter.
    </para>
    <para>
Implemented Extensions
     </para>
     <para>
      The extensions defined for CRL provide methods for associating additional attributes with CRLs of theirs entries. For more information see RFC #3280
     </para>
     <para>
    * Add The Authority Key Identifier extension:
     </para>
     <para>
The authority key identifier extension provides a means of identifying the public key corresponding to the private key used to sign a CRL.
     </para>
     <para>
          authKeyId critical [key-id | dn cert-serial]
     </para>
     <para>
      Where:
     </para>
     <para>
          authKeyIdent: identifies the name of an extension
          critical: value of 1 of 0. Should be set to 1 if this extension is critical or 0 otherwise.
          key-id: key identifier represented in octet string. dn:: is a CA distinguished name cert-serial: authority certificate serial number. 
     </para>
     <para>
    * Add Issuer Alternative Name extension:
     </para>
     <para>
      The issuer alternative names extension allows additional identities to be associated with the issuer of the CRL. Defined options include an rfc822 name (electronic mail address), a DNS name, an IP address, and a URI.
     </para>
     <para>
          issuerAltNames non-critical name-list
     </para>
     <para>
      Where:
     </para>
     <para>
          subjAltNames: identifies the name of an extension
          should be set to 0 since this is non-critical extension
          name-list: comma separated list of names
     </para>
     <para>
    * Add CRL Number extension:
     </para>
     <para>
      The CRL number is a non-critical CRL extension which conveys a monotonically increasing sequence number for a given CRL scope and CRL issuer. This extension allows users to easily determine when a particular CRL supersedes another CRL
     </para>
     <para>
          crlNumber non-critical number
     </para>
     <para>
      Where:
     </para>
     <para>
          crlNumber: identifies the name of an extension
          critical: should be set to 0 since this is non-critical extension
          number: value of long which identifies the sequential number of a CRL.
     </para>
     <para>
    * Add Revocation Reason Code extension:
     </para>
     <para>
      The reasonCode is a non-critical CRL entry extension that identifies the reason for the certificate revocation.
     </para>
     <para>
          reasonCode non-critical code
     </para>
     <para>
      Where:
     </para>
     <para>
          reasonCode: identifies the name of an extension
          non-critical: should be set to 0 since this is non-critical extension
          code: the following codes are available:
     </para>
     <para>
              unspecified (0),
              keyCompromise (1),
              cACompromise (2),
              affiliationChanged (3),
              superseded (4),
              cessationOfOperation (5),
              certificateHold (6),
              removeFromCRL (8),
              privilegeWithdrawn (9),
              aACompromise (10)
     </para>
     <para>
    * Add Invalidity Date extension:
     </para>
     <para>
      The invalidity date is a non-critical CRL entry extension that provides the date on which it is known or suspected that the private key was compromised or that the certificate otherwise became invalid.
     </para>
     <para>
          invalidityDate non-critical date
     </para>
     <para>
      Where:
     </para>
     <para>
          crlNumber: identifies the name of an extension
          non-critical: should be set to 0 since this is non-critical extension date: invalidity date of a cert. Date should be represented in GeneralizedTime format (YYYYMMDDhhmmssZ).
     </para>
  </refsection>

  <refsection id="usage">
    <title>Usage</title>
    <para>
The Certificate Revocation List Management Tool's capabilities are grouped as follows, using these combinations of options and arguments. Options and arguments in square brackets are optional, those without square brackets are required.
    </para>
    <para>See "Implemented extensions" for more information regarding extensions and their parameters.</para>
    <para>
    * Creating or modifying a CRL:
    </para>
      <programlisting>
crlutil -G|-M -c crl-gen-file -n nickname [-i crl] [-u url] [-d keydir] [-P dbprefix] [-l alg] [-a] [-B] 
      </programlisting>
    <para>
    * Listing all CRls or a named CRL:
    </para>
      <programlisting>
	crlutil -L [-n crl-name] [-d krydir] 
      </programlisting>

    <para>
    * Deleting CRL from db:
    </para>
      <programlisting>
	crlutil -D -n nickname [-d keydir] [-P dbprefix] 
      </programlisting>

    <para>
    * Erasing CRLs from db:
    </para>
      <programlisting>
	crlutil -E [-d keydir] [-P dbprefix] 
      </programlisting>

    <para>
    * Deleting CRL from db: 
    </para>
    <programlisting>
          crlutil -D -n nickname [-d keydir] [-P dbprefix]
    </programlisting>

    <para>
    * Erasing CRLs from db:
    </para>
    <programlisting>
          crlutil -E [-d keydir] [-P dbprefix] 
    </programlisting>

    <para>
    * Import CRL from file:
    </para>
    <programlisting>
          crlutil -I -i crl [-t crlType] [-u url] [-d keydir] [-P dbprefix] [-B] 
    </programlisting>
  </refsection>

  <refsection id="seealso">
    <title>See Also</title>
    <para>certutil(1)</para>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml-stylesheet type="text/css" href="failer.css"?>
<element/>
<?xml-stylesheet type="text/css" href="passer.css"?>
<element/>
<?xml-stylesheet type="text/css" href="passer.css"?>
<element/>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- When not in use, make sure you disable this or it will run continuously
     in the background sucking up cpu. -->
<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  <binding id="cssthrobberBinding" extends="xul:box">
    <content>
      <html:div anonid="container" id="container" class="progressContainer">
        <html:div class="progressBall" />
        <html:div class="progressBall" />
        <html:div class="progressBall" />
        <html:div class="progressBall" />
        <html:div class="progressBall" />
      </html:div>
    </content>
    <implementation>
      <field name="container" readonly="true">document.getAnonymousElementByAttribute(this, "anonid", "container");</field>
      <property name="enabled">
        <setter>
          <![CDATA[
            if (val) {
              this.container.setAttribute("enabled", true);
            } else {
              this.container.removeAttribute("enabled");
            }
            return val;
          ]]>
        </setter>
      </property>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:23 $"/>
        <language type="cs"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:25 $"/>
        <language type="cy"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp; ' ' , ',' ;</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8"?>
<dashboard>
	<locations class="foo">
		<location for="bar">
			<infowindowtab>
				<tab title="Location"><![CDATA[blabla]]></tab>
				<tab title="Users"><![CDATA[blublu]]></tab>
			</infowindowtab>
		</location>
	</locations>
</dashboard>
<?xml version="1.0" encoding="utf-8"?>
<!--
**
** Copyright 2007, The Android Open Source Project
**
** Licensed under the Apache License, Version 2.0 (the "License");
** you may not use this file except in compliance with the License.
** You may obtain a copy of the License at
**
**     http://www.apache.org/licenses/LICENSE-2.0
**
** Unless required by applicable law or agreed to in writing, software
** distributed under the License is distributed on an "AS IS" BASIS,
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
** See the License for the specific language governing permissions and
** limitations under the License.
*/
-->

<!-- Layout of date picker-->

<!-- Warning: everything within the "pickers" layout is removed and re-ordered
     depending on the date format selected by the user.
-->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/datetime_picker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:orientation="vertical"
    android:gravity="center">

    <LinearLayout android:id="@+id/date_spinners"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="1dip"
        android:layout_marginRight="1dip"
        android:gravity="center">

        <!-- Month -->
        <android.widget.NumberPicker
            android:id="@+id/month"
            android:layout_width="60dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:layout_marginRight="1dip"
            android:focusable="true"
            android:focusableInTouchMode="true"
            />

        <!-- Week -->
        <android.widget.NumberPicker
            android:id="@+id/week"
            android:layout_width="60dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:layout_marginRight="1dip"
            android:focusable="true"
            android:focusableInTouchMode="true"
            />

        <!-- Day -->
        <android.widget.NumberPicker
            android:id="@+id/day"
            android:layout_width="60dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:layout_marginRight="1dip"
            android:focusable="true"
            android:focusableInTouchMode="true"
            />

        <!-- Year -->
        <android.widget.NumberPicker
            android:id="@+id/year"
            android:layout_width="75dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:layout_marginRight="1dip"
            android:focusable="true"
            android:focusableInTouchMode="true"
            />

    </LinearLayout>

    <LinearLayout android:id="@+id/time_spinners"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginLeft="1dip"
        android:layout_marginRight="1dip"
        android:gravity="center">

        <!-- Hour -->
        <android.widget.NumberPicker
            android:id="@+id/hour"
            android:layout_width="60dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:layout_marginRight="1dip"
            android:focusable="true"
            android:focusableInTouchMode="true"
            />

        <TextView android:id="@+id/mincolon"
            android:text="@string/colon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:layout_marginRight="1dip"/>

        <!-- Minute -->
        <android.widget.NumberPicker
            android:id="@+id/minute"
            android:layout_width="60dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:layout_marginRight="1dip"
            android:focusable="true"
            android:focusableInTouchMode="true"
            />

        <!-- AMPM -->
        <android.widget.NumberPicker
            android:id="@+id/ampm"
            android:layout_width="60dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="1dip"
            android:layout_marginRight="1dip"
            android:focusable="true"
            android:focusableInTouchMode="true"
            />

        </LinearLayout>

</LinearLayout>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
  <!ENTITY % datetimepickerDTD SYSTEM "chrome://global/locale/datetimepicker.dtd">
  %datetimepickerDTD;
]>

<bindings id="timepickerBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:html="http://www.w3.org/1999/xhtml"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="datetimepicker-base"
           extends="chrome://global/content/bindings/general.xml#basecontrol">

    <resources>
      <stylesheet src="chrome://global/content/textbox.css"/>
      <stylesheet src="chrome://global/skin/textbox.css"/>
      <stylesheet src="chrome://global/skin/dropmarker.css"/>
      <stylesheet src="chrome://global/skin/datetimepicker.css"/>
    </resources>

    <content align="center">
      <xul:hbox class="datetimepicker-input-box" align="center"
                xbl:inherits="context">
        <xul:hbox class="textbox-input-box datetimepicker-input-subbox" align="center">
          <html:input class="datetimepicker-input textbox-input" anonid="input-one"
                      size="2" maxlength="2"
                      xbl:inherits="disabled,readonly"/>
        </xul:hbox>
        <xul:label anonid="sep-first" class="datetimepicker-separator" value=":"/>
        <xul:hbox class="textbox-input-box datetimepicker-input-subbox" align="center">
          <html:input class="datetimepicker-input textbox-input" anonid="input-two"
                      size="2" maxlength="2"
                      xbl:inherits="disabled,readonly"/>
        </xul:hbox>
        <xul:label anonid="sep-second" class="datetimepicker-separator" value=":"/>
        <xul:hbox class="textbox-input-box datetimepicker-input-subbox" align="center">
          <html:input class="datetimepicker-input textbox-input" anonid="input-three"
                      size="2" maxlength="2"
                      xbl:inherits="disabled,readonly"/>
        </xul:hbox>
        <xul:hbox class="textbox-input-box datetimepicker-input-subbox" align="center">
          <html:input class="datetimepicker-input textbox-input" anonid="input-ampm"
                      size="2" maxlength="2"
                      xbl:inherits="disabled,readonly"/>
        </xul:hbox>
      </xul:hbox>
      <xul:spinbuttons anonid="buttons" xbl:inherits="disabled"
                       onup="this.parentNode._increaseOrDecrease(1);"
                       ondown="this.parentNode._increaseOrDecrease(-1);"/>
    </content>

    <implementation>
      <field name="_dateValue">null</field>
      <field name="_fieldOne">
        document.getAnonymousElementByAttribute(this, "anonid", "input-one");
      </field>
      <field name="_fieldTwo">
        document.getAnonymousElementByAttribute(this, "anonid", "input-two");
      </field>
      <field name="_fieldThree">
        document.getAnonymousElementByAttribute(this, "anonid", "input-three");
      </field>
      <field name="_fieldAMPM">
        document.getAnonymousElementByAttribute(this, "anonid", "input-ampm");
      </field>
      <field name="_separatorFirst">
        document.getAnonymousElementByAttribute(this, "anonid", "sep-first");
      </field>
      <field name="_separatorSecond">
        document.getAnonymousElementByAttribute(this, "anonid", "sep-second");
      </field>
      <field name="_lastFocusedField">null</field>
      <field name="_hasEntry">true</field>
      <field name="_valueEntered">false</field>
      <field name="attachedControl">null</field>

      <property name="_currentField" readonly="true">
        <getter>
          var focusedInput = document.activeElement;
          if (focusedInput == this._fieldOne ||
              focusedInput == this._fieldTwo ||
              focusedInput == this._fieldThree ||
              focusedInput == this._fieldAMPM)
            return focusedInput;
          return this._lastFocusedField || this._fieldOne;
        </getter>
      </property>

      <property name="dateValue" onget="return new Date(this._dateValue);">
        <setter>
          <![CDATA[
            if (!(val instanceof Date))
              throw "Invalid Date";

            this._setValueNoSync(val);
            if (this.attachedControl)
              this.attachedControl._setValueNoSync(val);
            return val;
          ]]>
        </setter>
      </property>

      <property name="readOnly" onset="if (val) this.setAttribute('readonly', 'true');
                                       else this.removeAttribute('readonly'); return val;"
                                onget="return this.getAttribute('readonly') == 'true';"/>

      <method name="_fireEvent">
        <parameter name="aEventName"/>
        <parameter name="aTarget"/>
        <body>
          var event = document.createEvent("Events");
          event.initEvent(aEventName, true, true);
          return !aTarget.dispatchEvent(event);
        </body>
      </method>

      <method name="_setValueOnChange">
        <parameter name="aField"/>
        <body>
          <![CDATA[
            if (!this._hasEntry)
              return;

            if (aField == this._fieldOne ||
                aField == this._fieldTwo ||
                aField == this._fieldThree) {
              var value = Number(aField.value);
              if (isNaN(value))
                value = 0;

              value = this._constrainValue(aField, value, true);
              this._setFieldValue(aField, value);
            }
          ]]>
        </body>
      </method>

      <method name="_init">
        <body/>
      </method>

      <constructor>
        this._init();

        var cval = this.getAttribute("value");
        if (cval) {
          try {
            this.value = cval;
            return;
          } catch (ex) { }
        }
        this.dateValue = new Date();
      </constructor>

      <destructor>
        if (this.attachedControl) {
          this.attachedControl.attachedControl = null;
          this.attachedControl = null;
        }
      </destructor>

    </implementation>

    <handlers>
      <handler event="focus" phase="capturing">
        <![CDATA[
          var target = event.originalTarget;
          if (target == this._fieldOne ||
              target == this._fieldTwo ||
              target == this._fieldThree ||
              target == this._fieldAMPM)
            this._lastFocusedField = target;
        ]]>
      </handler>

      <handler event="keypress">
        <![CDATA[
          if (this._hasEntry && event.charCode &&
              this._currentField != this._fieldAMPM &&
	      ! (event.altKey || event.ctrlKey || event.metaKey) &&
              (event.charCode < 48 || event.charCode > 57))
            event.preventDefault();
        ]]>
      </handler>

      <handler event="keypress" keycode="VK_UP">
        if (this._hasEntry)
          this._increaseOrDecrease(1);
      </handler>
      <handler event="keypress" keycode="VK_DOWN">
        if (this._hasEntry)
          this._increaseOrDecrease(-1);
      </handler>

      <handler event="input">
        this._valueEntered = true;
      </handler>

      <handler event="change">
        this._setValueOnChange(event.originalTarget);
      </handler>
    </handlers>

  </binding>

  <binding id="timepicker"
           extends="chrome://global/content/bindings/datetimepicker.xml#datetimepicker-base">

    <implementation>
      <field name="is24HourClock">false</field>
      <field name="hourLeadingZero">false</field>
      <field name="minuteLeadingZero">true</field>
      <field name="secondLeadingZero">true</field>
      <field name="amIndicator">"AM"</field>
      <field name="pmIndicator">"PM"</field>

      <field name="hourField">null</field>
      <field name="minuteField">null</field>
      <field name="secondField">null</field>

      <property name="value">
        <getter>
          <![CDATA[
            var minute = this._dateValue.getMinutes();
            if (minute < 10)
              minute = "0" + minute;

            var second = this._dateValue.getSeconds();
            if (second < 10)
              second = "0" + second;
            return this._dateValue.getHours() + ":" + minute + ":" + second;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            var items = val.match(/^([0-9]{1,2})\:([0-9]{1,2})\:?([0-9]{1,2})?$/);
            if (!items)
              throw "Invalid Time";

            var dt = this.dateValue;
            dt.setHours(items[1]);
            dt.setMinutes(items[2]);
            dt.setSeconds(items[3] ? items[3] : 0);
            this.dateValue = dt;
            return val;
          ]]>
        </setter>
      </property>
      <property name="hour" onget="return this._dateValue.getHours();">
        <setter>
          <![CDATA[
            var valnum = Number(val);
            if (isNaN(valnum) || valnum < 0 || valnum > 23)
              throw "Invalid Hour";
            this._setFieldValue(this.hourField, valnum);
            return val;
          ]]>
        </setter>
      </property>
      <property name="minute" onget="return this._dateValue.getMinutes();">
        <setter>
          <![CDATA[
            var valnum = Number(val);
            if (isNaN(valnum) || valnum < 0 || valnum > 59)
              throw "Invalid Minute";
            this._setFieldValue(this.minuteField, valnum);
            return val;
          ]]>
        </setter>
      </property>
      <property name="second" onget="return this._dateValue.getSeconds();">
        <setter>
          <![CDATA[
            var valnum = Number(val);
            if (isNaN(valnum) || valnum < 0 || valnum > 59)
              throw "Invalid Second";
            this._setFieldValue(this.secondField, valnum);
            return val;
          ]]>
        </setter>
      </property>
      <property name="isPM">
        <getter>
          <![CDATA[
            return (this.hour >= 12);
          ]]>
        </getter>
        <setter>
          <![CDATA[
            if (val) {
              if (this.hour < 12)
                this.hour += 12;
            }
            else if (this.hour >= 12)
              this.hour -= 12;
            return val;
          ]]>
        </setter>
      </property>
      <property name="hideSeconds">
        <getter>
          return (this.getAttribute("hideseconds") == "true");
        </getter>
        <setter>
          if (val)
            this.setAttribute("hideseconds", "true");
          else
            this.removeAttribute("hideseconds");
          if (this.secondField)
            this.secondField.parentNode.collapsed = val;
          this._separatorSecond.collapsed = val;
          return val;
        </setter>
      </property>
      <property name="increment">
        <getter>
          <![CDATA[
            var increment = this.getAttribute("increment");
            increment = Number(increment);
            if (isNaN(increment) || increment <= 0 || increment >= 60)
              return 1;
            return increment;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            if (typeof val == "number")
              this.setAttribute("increment", val);
            return val;
          ]]>
        </setter>
      </property>

      <method name="_setValueNoSync">
        <parameter name="aValue"/>
        <body>
          <![CDATA[
            var dt = new Date(aValue);
            if (!isNaN(dt)) {
              this._dateValue = dt;
              this.setAttribute("value", this.value);
              this._updateUI(this.hourField, this.hour);
              this._updateUI(this.minuteField, this.minute);
              this._updateUI(this.secondField, this.second);
            }
          ]]>
        </body>
      </method>
      <method name="_increaseOrDecrease">
        <parameter name="aDir"/>
        <body>
          <![CDATA[
            if (this.disabled || this.readOnly)
              return;

            var field = this._currentField;
            if (this._valueEntered)
              this._setValueOnChange(field);

            if (field == this._fieldAMPM) {
              this.isPM = !this.isPM;
              this._fireEvent("change", this);
            }
            else {
              var oldval;
              var change = aDir;
              if (field == this.hourField) {
                oldval = this.hour;
              }
              else if (field == this.minuteField) {
                oldval = this.minute;
                change *= this.increment;
              }
              else if (field == this.secondField) {
                oldval = this.second;
              }

              var newval = this._constrainValue(field, oldval + change, false);

              if (field == this.hourField)
                this.hour = newval;
              else if (field == this.minuteField)
                this.minute = newval;
              else if (field == this.secondField)
                this.second = newval;

              if (oldval != newval)
                this._fireEvent("change", this);
            }
            field.select();
          ]]>
        </body>
      </method>
      <method name="_setFieldValue">
        <parameter name="aField"/>
        <parameter name="aValue"/>
        <body>
          <![CDATA[
            if (aField == this.hourField)
              this._dateValue.setHours(aValue);
            else if (aField == this.minuteField)
              this._dateValue.setMinutes(aValue);
            else if (aField == this.secondField)
              this._dateValue.setSeconds(aValue);

            this.setAttribute("value", this.value);
            this._updateUI(aField, aValue);

            if (this.attachedControl)
              this.attachedControl._setValueNoSync(this._dateValue);
          ]]>
        </body>
      </method>
      <method name="_updateUI">
        <parameter name="aField"/>
        <parameter name="aValue"/>
        <body>
          <![CDATA[
            this._valueEntered = false;

            var prependZero = false;
            if (aField == this.hourField) {
              prependZero = this.hourLeadingZero;
              if (!this.is24HourClock) {
                if (aValue >= 12) {
                  if (aValue > 12)
                    aValue -= 12;
                  this._fieldAMPM.value = this.pmIndicator;
                }
                else {
                  if (aValue == 0)
                    aValue = 12;
                  this._fieldAMPM.value = this.amIndicator;
                }
              }
            }
            else if (aField == this.minuteField) {
              prependZero = this.minuteLeadingZero;
            }
            else if (aField == this.secondField) {
              prependZero = this.secondLeadingZero;
            }

            if (prependZero && aValue < 10)
              aField.value = "0" + aValue;
            else
              aField.value = aValue;
          ]]>
        </body>
      </method>
      <method name="_constrainValue">
        <parameter name="aField"/>
        <parameter name="aValue"/>
        <parameter name="aNoWrap"/>
        <body>
          <![CDATA[
            // aNoWrap is true when the user entered a value, so just
            // constrain within limits. If false, the value is being
            // incremented or decremented, so wrap around values 
            var max = (aField == this.hourField) ? 24 : 60;
            if (aValue < 0)
              return aNoWrap ? 0 : max + aValue;
            if (aValue >= max)
              return aNoWrap ? max - 1 : aValue - max;
            return aValue;
          ]]>
        </body>
      </method>
      <method name="_init">
        <body>
          <![CDATA[
            this.hourField = this._fieldOne;
            this.minuteField = this._fieldTwo;
            this.secondField = this._fieldThree;

            var numberOrder = /^(\D*)\s*(\d+)(\D*)(\d+)(\D*)(\d+)\s*(\D*)$/;

            var pmTime = new Date(2000,0,1,16,7,9).toLocaleFormat("%X");
            var numberFields = pmTime.match(numberOrder);
            if (numberFields) {
              this._separatorFirst.value = numberFields[3];
              this._separatorSecond.value = numberFields[5];
              if (Number(numberFields[2]) > 12)
                this.is24HourClock = true;
              else
                this.pmIndicator = numberFields[1] || numberFields[7];
            }

            var amTime = new Date(2000,0,1,1,7,9).toLocaleFormat("%X");
            numberFields = amTime.match(numberOrder);
            if (numberFields) {
              this.hourLeadingZero = (numberFields[2].length > 1);
              this.minuteLeadingZero = (numberFields[4].length > 1);
              this.secondLeadingZero = (numberFields[6].length > 1);

              if (!this.is24HourClock) {
                this.amIndicator = numberFields[1] || numberFields[7];
                if (numberFields[1]) {
                  var mfield = this._fieldAMPM.parentNode;
                  var mcontainer = mfield.parentNode;
                  mcontainer.insertBefore(mfield, mcontainer.firstChild);
                }
                var size = (numberFields[1] || numberFields[7]).length;
                if (this.pmIndicator.length > size)
                  size = this.pmIndicator.length;
                this._fieldAMPM.size = size;
                this._fieldAMPM.maxLength = size;
              }
              else {
                this._fieldAMPM.parentNode.collapsed = true;
              }
            }

            this.hideSeconds = this.hideSeconds;
          ]]>
        </body>
      </method>
    </implementation>

    <handlers>
      <handler event="keypress">
        <![CDATA[
          // just allow any printable character to switch the AM/PM state
          if (event.charCode && !this.disabled && !this.readOnly &&
              this._currentField == this._fieldAMPM) {
            this.isPM = !this.isPM;
            this._fieldAMPM.select();
            this._fireEvent("change", this);
            event.preventDefault();
          }
        ]]>
      </handler>
    </handlers>

  </binding>

  <binding id="datepicker"
           extends="chrome://global/content/bindings/datetimepicker.xml#datetimepicker-base">

    <implementation>
      <field name="yearLeadingZero">false</field>
      <field name="monthLeadingZero">true</field>
      <field name="dateLeadingZero">true</field>

      <field name="yearField"/>
      <field name="monthField"/>
      <field name="dateField"/>

      <property name="value">
        <getter>
          <![CDATA[
            var month = this._dateValue.getMonth();
            month = (month < 9) ? month = "0" + ++month : month + 1;

            var date = this._dateValue.getDate();
            if (date < 10)
              date = "0" + date;
            return this._dateValue.getFullYear() + "-" + month + "-" + date;
          ]]>

        </getter>
        <setter>
          <![CDATA[
            var results = val.match(/^([0-9]{1,4})\-([0-9]{1,2})\-([0-9]{1,2})$/);
            if (!results)
              throw "Invalid Date";

            this.dateValue = new Date(results[1] + "/" + results[2] + "/" + results[3]);
            this.setAttribute("value", this.value);
            return val;
          ]]>
        </setter>
      </property>
      <property name="year" onget="return this._dateValue.getFullYear();">
        <setter>
          <![CDATA[
            var valnum = Number(val);
            if (isNaN(valnum) || valnum < 1 || valnum > 9999)
              throw "Invalid Year";
            this._setFieldValue(this.yearField, valnum);
            return val;
          ]]>
        </setter>
      </property>
      <property name="month" onget="return this._dateValue.getMonth();">
        <setter>
          <![CDATA[
            var valnum = Number(val);
            if (isNaN(valnum) || valnum < 0 || valnum > 11)
              throw "Invalid Month";
            this._setFieldValue(this.monthField, valnum);
            return val;
          ]]>
        </setter>
      </property>
      <property name="date" onget="return this._dateValue.getDate();">
        <setter>
          <![CDATA[
            var valnum = Number(val);
            if (isNaN(valnum) || valnum < 1 || valnum > 31)
              throw "Invalid Date";
            this._setFieldValue(this.dateField, valnum);
            return val;
          ]]>
        </setter>
      </property>
      <property name="open" onget="return false;" onset="return val;"/>

      <property name="displayedMonth" onget="return this.month;"
                onset="this.month = val; return val;"/>
      <property name="displayedYear" onget="return this.year;"
                onset="this.year = val; return val;"/>

      <method name="_setValueNoSync">
        <parameter name="aValue"/>
        <body>
          <![CDATA[
            var dt = new Date(aValue);
            if (!isNaN(dt)) {
              this._dateValue = dt;
              this.setAttribute("value", this.value);
              this._updateUI(this.yearField, this.year);
              this._updateUI(this.monthField, this.month);
              this._updateUI(this.dateField, this.date);
            }
          ]]>
        </body>
      </method>
      <method name="_increaseOrDecrease">
        <parameter name="aDir"/>
        <body>
          <![CDATA[
            if (this.disabled || this.readOnly)
              return;

            var field = this._currentField;
            if (this._valueEntered)
              this._setValueOnChange(field);

            var oldval;
            if (field == this.yearField)
              oldval = this.year;
            else if (field == this.monthField)
              oldval = this.month;
            else if (field == this.dateField)
              oldval = this.date;

            var newval = this._constrainValue(field, oldval + aDir, false);

            if (field == this.yearField)
              this.year = newval;
            else if (field == this.monthField)
              this.month = newval;
            else if (field == this.dateField)
              this.date = newval;

            if (oldval != newval)
              this._fireEvent("change", this);
            field.select();
          ]]>
        </body>
      </method>
      <method name="_setFieldValue">
        <parameter name="aField"/>
        <parameter name="aValue"/>
        <body>
          <![CDATA[
            if (aField == this.yearField) {
              var oldDate = this.date;
              this._dateValue.setFullYear(aValue);
              if (oldDate != this.date) {
                this._dateValue.setDate(0);
                this._updateUI(this.dateField, this.date);
              }
            }
            else if (aField == this.monthField) {
              var oldDate = this.date;
              this._dateValue.setMonth(aValue);
              if (oldDate != this.date) {
                this._dateValue.setDate(0);
                this._updateUI(this.dateField, this.date);
              }
            }
            else if (aField == this.dateField) {
              this._dateValue.setDate(aValue);
            }

            this.setAttribute("value", this.value);
            this._updateUI(aField, aValue);

            if (this.attachedControl)
              this.attachedControl._setValueNoSync(this._dateValue);
          ]]>
        </body>
      </method>
      <method name="_updateUI">
        <parameter name="aField"/>
        <parameter name="aValue"/>
        <body>
          <![CDATA[
            this._valueEntered = false;

            var prependZero = false;
            if (aField == this.yearField) {
              if (this.yearLeadingZero) {
                aField.value = ("000" + aValue).slice(-4);
                return;
              }
            }
            else if (aField == this.monthField) {
              aValue++;
              prependZero = this.monthLeadingZero;
            }
            else if (aField == this.dateField) {
              prependZero = this.dateLeadingZero;
            }
            if (prependZero && aValue < 10)
              aField.value = "0" + aValue;
            else
              aField.value = aValue;
          ]]>
        </body>
      </method>
      <method name="_constrainValue">
        <parameter name="aField"/>
        <parameter name="aValue"/>
        <parameter name="aNoWrap"/>
        <body>
          <![CDATA[
            // the month will be 1 to 12 if entered by the user, so subtract 1
            if (aNoWrap && aField == this.monthField)
              aValue--;

            if (aField == this.dateField) {
              if (aValue < 1)
                return new Date(this.year, this.month + 1, 0).getDate();

              var currentMonth = this.month;
              var dt = new Date(this.year, currentMonth, aValue);
              return (dt.getMonth() != currentMonth ? 1 : aValue);
            }
            var min = (aField == this.monthField) ? 0 : 1;
            var max = (aField == this.monthField) ? 11 : 9999;
            if (aValue < min)
              return aNoWrap ? min : max;
            if (aValue > max)
              return aNoWrap ? max : min;
            return aValue;
          ]]>
        </body>
      </method>
      <method name="_init">
        <body>
          <![CDATA[
            // We'll default to YYYY/MM/DD to start.
            var yfield = "input-one";
            var mfield = "input-two";
            var dfield = "input-three";
            var twoDigitYear = false;
            this.yearLeadingZero = true;
            this.monthLeadingZero = true;
            this.dateLeadingZero = true;

            var numberOrder = /^(\D*)\s*(\d+)(\D*)(\d+)(\D*)(\d+)\s*(\D*)$/;

            var dt = new Date(2002,9,4).toLocaleFormat("%x");
            var numberFields = dt.match(numberOrder);
            if (numberFields) {
              this._separatorFirst.value = numberFields[3];
              this._separatorSecond.value = numberFields[5];

              var yi = 2, mi = 4, di = 6;

              for (var i = 1; i < numberFields.length; i++) {
                switch (Number(numberFields[i])) {
                  case 2:
                    twoDigitYear = true; // fall through
                  case 2002:
                    yi = i;
                    yfield = (i == 2 ? "input-one" :
                             (i == 4 ? "input-two" : "input-three"));
                    break;
                  case 9, 10:
                    mi = i;
                    mfield = (i == 2 ? "input-one" :
                             (i == 4 ? "input-two" : "input-three"));
                    break;
                  case 4:
                    di = i;
                    dfield = (i == 2 ? "input-one" :
                             (i == 4 ? "input-two" : "input-three"));
                    break;
                }
              }

              this.yearLeadingZero = (numberFields[yi].length > 1);
              this.monthLeadingZero = (numberFields[mi].length > 1);
              this.dateLeadingZero = (numberFields[di].length > 1);
            }

            this.yearField = document.getAnonymousElementByAttribute(this, "anonid", yfield);
            if (!twoDigitYear)
              this.yearField.parentNode.classList.add("datetimepicker-input-subbox", "datetimepicker-year");
            this.monthField = document.getAnonymousElementByAttribute(this, "anonid", mfield);
            this.dateField = document.getAnonymousElementByAttribute(this, "anonid", dfield);

            this._fieldAMPM.parentNode.collapsed = true;
            this.yearField.size = twoDigitYear ? 2 : 4;
            this.yearField.maxLength = twoDigitYear ? 2 : 4;
          ]]>
        </body>
      </method>
    </implementation>

  </binding>

  <binding id="datepicker-grid"
           extends="chrome://global/content/bindings/datetimepicker.xml#datepicker">

    <content>
      <vbox class="datepicker-mainbox"
            xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
        <hbox class="datepicker-monthbox" align="center">
          <button class="datepicker-previous datepicker-button" type="repeat"
                  xbl:inherits="disabled"
                  oncommand="document.getBindingParent(this)._increaseOrDecreaseMonth(-1);"/>
          <spacer flex="1"/>
          <deck anonid="monthlabeldeck">
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
            <label class="datepicker-gridlabel"/>
          </deck>
          <label anonid="yearlabel" class="datepicker-gridlabel"/>
          <spacer flex="1"/>
          <button class="datepicker-next datepicker-button" type="repeat"
                  xbl:inherits="disabled"
                  oncommand="document.getBindingParent(this)._increaseOrDecreaseMonth(1);"/>
        </hbox>
        <grid class="datepicker-grid" role="grid">
          <columns>
            <column class="datepicker-gridrow" flex="1"/>
            <column class="datepicker-gridrow" flex="1"/>
            <column class="datepicker-gridrow" flex="1"/>
            <column class="datepicker-gridrow" flex="1"/>
            <column class="datepicker-gridrow" flex="1"/>
            <column class="datepicker-gridrow" flex="1"/>
            <column class="datepicker-gridrow" flex="1"/>
          </columns>
          <rows anonid="datebox">
            <row anonid="dayofweekbox">
              <label class="datepicker-weeklabel" role="columnheader"/>
              <label class="datepicker-weeklabel" role="columnheader"/>
              <label class="datepicker-weeklabel" role="columnheader"/>
              <label class="datepicker-weeklabel" role="columnheader"/>
              <label class="datepicker-weeklabel" role="columnheader"/>
              <label class="datepicker-weeklabel" role="columnheader"/>
              <label class="datepicker-weeklabel" role="columnheader"/>
            </row>
            <row>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
            </row>
            <row>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
            </row>
            <row>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
            </row>
            <row>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
            </row>
            <row>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
            </row>
            <row>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
              <label class="datepicker-gridlabel" role="gridcell"/>
            </row>
          </rows>
        </grid>
      </vbox>
    </content>

    <implementation>
      <field name="_hasEntry">false</field>
      <field name="_weekStart">&firstdayofweek.default;</field>
      <field name="_displayedDate">null</field>
      <field name="_todayItem">null</field>

      <field name="yearField">
        document.getAnonymousElementByAttribute(this, "anonid", "yearlabel");
      </field>
      <field name="monthField">
        document.getAnonymousElementByAttribute(this, "anonid", "monthlabeldeck");
      </field>
      <field name="dateField">
        document.getAnonymousElementByAttribute(this, "anonid", "datebox");
      </field>

      <field name="_selectedItem">null</field>

      <property name="selectedItem" onget="return this._selectedItem">
        <setter>
          <![CDATA[
            if (!val.value)
              return val;
            if (val.parentNode.parentNode != this.dateField)
              return val;

            if (this._selectedItem)
              this._selectedItem.removeAttribute("selected");
            this._selectedItem = val;
            val.setAttribute("selected", "true");
            this._displayedDate.setDate(val.value);
            return val;
          ]]>
        </setter>
      </property>

      <property name="displayedMonth">
        <getter>
          return this._displayedDate.getMonth();
        </getter>
        <setter>
          this._updateUI(this.monthField, val, true);
          return val;
        </setter>
      </property>
      <property name="displayedYear">
        <getter>
          return this._displayedDate.getFullYear();
        </getter>
        <setter>
          this._updateUI(this.yearField, val, true);
          return val;
        </setter>
      </property>

      <method name="_init">
        <body>
          <![CDATA[
            var monthLabel = this.monthField.firstChild;
            var tempDate = new Date(2005, 0, 1);
            for (var month = 0; month < 12; month++) {
              tempDate.setMonth(month);
              monthLabel.setAttribute("value", tempDate.toLocaleFormat("%B"));
              monthLabel = monthLabel.nextSibling;
            }

            var fdow = Number(this.getAttribute("firstdayofweek"));
            if (!isNaN(fdow) && fdow >= 0 && fdow <= 6)
              this._weekStart = fdow;

            var weekbox = document.getAnonymousElementByAttribute(this, "anonid", "dayofweekbox").childNodes;
            var date = new Date();
            date.setDate(date.getDate() - (date.getDay() - this._weekStart));
            for (var i = 0; i < weekbox.length; i++) {
              weekbox[i].value = date.toLocaleFormat("%a").charAt(0);
              date.setDate(date.getDate() + 1);
            }
          ]]>
        </body>
      </method>
      <method name="_setValueNoSync">
        <parameter name="aValue"/>
        <body>
          <![CDATA[
            var dt = new Date(aValue);
            if (!isNaN(dt)) {
              this._dateValue = dt;
              this.setAttribute("value", this.value);
              this._updateUI();
            }
          ]]>
        </body>
      </method>
      <method name="_updateUI">
        <parameter name="aField"/>
        <parameter name="aValue"/>
        <parameter name="aCheckMonth"/>
        <body>
          <![CDATA[
            var date;
            var currentMonth;
            if (aCheckMonth) {
              if (!this._displayedDate)
                this._displayedDate = this.dateValue;

              var expectedMonth = aValue;
              if (aField == this.monthField) {
                this._displayedDate.setMonth(aValue);
              }
              else {
                expectedMonth = this._displayedDate.getMonth();
                this._displayedDate.setFullYear(aValue);
              }

              if (expectedMonth != -1 && expectedMonth != 12 &&
                  expectedMonth != this._displayedDate.getMonth()) {
                // If the month isn't what was expected, then the month overflowed.
                // Setting the date to 0 will go back to the last day of the right month.
                this._displayedDate.setDate(0);
              }

              date = new Date(this._displayedDate);
              currentMonth = this._displayedDate.getMonth();
            }
            else {
              var samemonth = (this._displayedDate &&
                               this._displayedDate.getMonth() == this.month &&
                               this._displayedDate.getFullYear() == this.year);
              if (samemonth) {
                var items = this.dateField.getElementsByAttribute("value", this.date);
                if (items.length)
                  this.selectedItem = items[0];
                return;
              }

              date = this.dateValue;
              this._displayedDate = new Date(date);
              currentMonth = this.month;
            }

            if (this._todayItem) {
              this._todayItem.removeAttribute("today");
              this._todayItem = null;
            }

            if (this._selectedItem) {
              this._selectedItem.removeAttribute("selected");
              this._selectedItem = null;
            }

            // Update the month and year title
            this.monthField.selectedIndex = currentMonth;
            this.yearField.setAttribute("value", date.getFullYear());

            date.setDate(1);
            var firstWeekday = (7 + date.getDay() - this._weekStart) % 7;
            date.setDate(date.getDate() - firstWeekday);

            var today = new Date();
            var datebox = this.dateField;
            for (var k = 1; k < datebox.childNodes.length; k++) {
              var row = datebox.childNodes[k];
              for (var i = 0; i < 7; i++) {
                var item = row.childNodes[i];

                if (currentMonth == date.getMonth()) {
                  item.value = date.getDate();

                  // highlight today
                  if (this._isSameDay(today, date)) {
                    this._todayItem = item;
                    item.setAttribute("today", "true");
                  }

                  // highlight the selected date
                  if (this._isSameDay(this._dateValue, date)) {
                    this._selectedItem = item;
                    item.setAttribute("selected", "true");
                  }
                }
                else {
                  item.value = "";
                }

                date.setDate(date.getDate() + 1);
              }
            }

            this._fireEvent("monthchange", this);
            if (this.hasAttribute("monthchange")) {
              var fn = new Function("event", aTarget.getAttribute("onmonthchange"));
              fn.call(aTarget, event);
            }
          ]]>
        </body>
      </method>
      <method name="_increaseOrDecreaseDateFromEvent">
        <parameter name="aEvent"/>
        <parameter name="aDiff"/>
        <body>
          <![CDATA[
            if (aEvent.originalTarget == this && !this.disabled && !this.readOnly) {
              var newdate = this.dateValue;
              newdate.setDate(newdate.getDate() + aDiff);
              this.dateValue = newdate;
              this._fireEvent("change", this);
            }
            aEvent.stopPropagation();
            aEvent.preventDefault();
          ]]>
        </body>
      </method>
      <method name="_increaseOrDecreaseMonth">
        <parameter name="aDir"/>
        <body>
          <![CDATA[
            if (!this.disabled) {
              var month = this._displayedDate ? this._displayedDate.getMonth() :
                                                this.month;
              this._updateUI(this.monthField, month + aDir, true);
            }
          ]]>
        </body>
      </method>
      <method name="_isSameDay">
        <parameter name="aDate1"/>
        <parameter name="aDate2"/>
        <body>
          <![CDATA[
            return (aDate1 && aDate2 &&
                    aDate1.getDate() == aDate2.getDate() &&
                    aDate1.getMonth() == aDate2.getMonth() &&
                    aDate1.getFullYear() == aDate2.getFullYear());
          ]]>
        </body>
      </method>

    </implementation>

    <handlers>
      <handler event="click">
        <![CDATA[
          if (event.button != 0 || this.disabled || this.readOnly)
            return;

          var target = event.originalTarget;
          if (target.classList.contains("datepicker-gridlabel") &&
              target != this.selectedItem) {
            this.selectedItem = target;
            this._dateValue = new Date(this._displayedDate);
            if (this.attachedControl)
              this.attachedControl._setValueNoSync(this._dateValue);
            this._fireEvent("change", this);

            if (this.attachedControl && "open" in this.attachedControl)
              this.attachedControl.open = false; // close the popup
          }
        ]]>
      </handler>
      <handler event="MozMousePixelScroll" preventdefault="true"/>
      <handler event="DOMMouseScroll" preventdefault="true">
        <![CDATA[
          this._increaseOrDecreaseMonth(event.detail < 0 ? -1 : 1);
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_LEFT"
               action="this._increaseOrDecreaseDateFromEvent(event, -1);"/>
      <handler event="keypress" keycode="VK_RIGHT"
               action="this._increaseOrDecreaseDateFromEvent(event, 1);"/>
      <handler event="keypress" keycode="VK_UP"
               action="this._increaseOrDecreaseDateFromEvent(event, -7);"/>
      <handler event="keypress" keycode="VK_DOWN"
               action="this._increaseOrDecreaseDateFromEvent(event, 7);"/>
      <handler event="keypress" keycode="VK_PAGE_UP" preventdefault="true"
               action="this._increaseOrDecreaseMonth(-1);"/>
      <handler event="keypress" keycode="VK_PAGE_DOWN" preventdefault="true"
               action="this._increaseOrDecreaseMonth(1);"/>
    </handlers>
  </binding>

  <binding id="datepicker-popup" display="xul:menu"
           extends="chrome://global/content/bindings/datetimepicker.xml#datepicker">
    <content align="center">
      <xul:hbox class="textbox-input-box datetimepicker-input-box" align="center"
                allowevents="true" xbl:inherits="context">
        <xul:hbox class="datetimepicker-input-subbox" align="baseline">
          <html:input class="datetimepicker-input textbox-input" anonid="input-one"
                      size="2" maxlength="2"
                      xbl:inherits="disabled,readonly"/>
        </xul:hbox>
        <xul:label anonid="sep-first" class="datetimepicker-separator" value=":"/>
        <xul:hbox class="datetimepicker-input-subbox" align="baseline">
          <html:input class="datetimepicker-input textbox-input" anonid="input-two"
                      size="2" maxlength="2"
                      xbl:inherits="disabled,readonly"/>
        </xul:hbox>
        <xul:label anonid="sep-second" class="datetimepicker-separator" value=":"/>
        <xul:hbox class="datetimepicker-input-subbox" align="center">
          <html:input class="datetimepicker-input textbox-input" anonid="input-three"
                      size="2" maxlength="2"
                      xbl:inherits="disabled,readonly"/>
        </xul:hbox>
        <xul:hbox class="datetimepicker-input-subbox" align="center">
          <html:input class="datetimepicker-input textbox-input" anonid="input-ampm"
                      size="2" maxlength="2"
                      xbl:inherits="disabled,readonly"/>
        </xul:hbox>
      </xul:hbox>
      <xul:spinbuttons anonid="buttons" xbl:inherits="disabled" allowevents="true"
                       onup="this.parentNode._increaseOrDecrease(1);"
                       ondown="this.parentNode._increaseOrDecrease(-1);"/>
      <xul:dropmarker class="datepicker-dropmarker" xbl:inherits="disabled"/>
      <xul:panel onpopupshown="this.firstChild.focus();" level="top">
        <xul:datepicker anonid="grid" type="grid" class="datepicker-popupgrid"
                        xbl:inherits="disabled,readonly,firstdayofweek"/>
      </xul:panel>
    </content>
    <implementation>
      <constructor>
        var grid = document.getAnonymousElementByAttribute(this, "anonid", "grid");
        this.attachedControl = grid;
        grid.attachedControl = this;
        grid._setValueNoSync(this._dateValue);
      </constructor>
      <property name="open" onget="return this.hasAttribute('open');">
        <setter>
          <![CDATA[
            if (this.boxObject instanceof MenuBoxObject)
              this.boxObject.openMenu(val);
            return val;
          ]]>
        </setter>
      </property>
      <property name="displayedMonth">
        <getter>
          return document.getAnonymousElementByAttribute(this, "anonid", "grid").displayedMonth;
        </getter>
        <setter>
          document.getAnonymousElementByAttribute(this, "anonid", "grid").displayedMonth = val;
          return val;
        </setter>
      </property>
      <property name="displayedYear">
        <getter>
          return document.getAnonymousElementByAttribute(this, "anonid", "grid").displayedYear;
        </getter>
        <setter>
          document.getAnonymousElementByAttribute(this, "anonid", "grid").displayedYear = val;
          return val;
        </setter>
      </property>
    </implementation>
  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="dav"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:26 $"/>
        <language type="da"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/"> 
  <ShortName>DuckDuckGo</ShortName> 
  <Description>Search DuckDuckGo</Description> 
  <InputEncoding>UTF-8</InputEncoding> 
  <Image height="16" width="16">data:image/icon;base64,AAABAAIAEBAAAAEAIABoBAAAJgAAACAgAAABACAAqBAAAI4EAAAoAAAAEAAAACAAAAABACAAAAAAAAAEAAATCwAAEwsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA11RgALs6oACbQ9wAj0v8AI9L/ACfQ9wAu0agANdUYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzzN4CNdL/oK/z//////////////////////+jsPv/BDXX/wAz0t4AAAAAAAAAAAAAAAAAAAAAAAAAAAAyzvNSduD//////8jK/v+P+Lf/IbQL/17RPP+J3Y//wOKX//////9YeuX/ADLO8wAAAAAAAAAAAAAAAAAw091piOX/8/X9/1Fx5P9xhu//WOWZ/0W9Lv9Lwjn/J8BB/xyDAP9bdfL/9fP//2mI5v8AMNPdAAAAAAc610YRQ9f//////0Zr4P8AGdD/sb32////////////wrv//wAh1/8MPab/ACPc/05r4///////EkPX/wc610YANtWkrr/y/6S48P8AJ9L/AB3R/+/w/v///////////3+D7f8AQeL/AYTw/wFr5/8AMNb/p7Tv/6698v8AM9WkADLW//////8yXt//AC3V/wAw1/////////////z///8A0P7/AKb1/wWI7P8AuPf/AJ3w/zZW3P//////ADHV/wAx2P//////AzrZ/wAu1/84ZOL////////////e////AND//wC1+f8Atff/AZbv/wY62f8ELNf//////wAw1/8AMtn//////wAw2f8ALNn/kKrz////+//cwbH////////////R////Rcb8/wDO/f8A/P//AHzo//////8AMNj/ADXa//////8vXuL/ACna/4yq9///79T/jUkg/9i+r///////r2Q0/7Cozv8BKdr/AirY/zdZ4P//////ADTa/wI72tOuv/T/prr0/wAl2v+JqPb//7yW/+bUxv/9+/n////u//W+n/+Op/L/ADPd/wAv2v+ru/T/r7/0/wI72tMLQd1DEEjg//////9Cbef/ADng///////////////////////R3///AC3g/wAy3v9SeOn//////xFI4P8LQd1DAAAAAAM64PNmiuz/9/j//2mN7f/m7P3///////////9Cb+n/ACXd/wAt3v9rju3//////2iL7P8DOuDzAAAAAAAAAAAAAAAAAT3g/0p16f//////3OT8/3OS7v8AKt3/ACPc/zhn5/+xw/b//////0956v8CPeD/AAAAAAAAAAAAAAAAAAAAAAAAAAAEPODzBUDh/5uz8//7/f7/////////////////prz0/wtF4v8FQeDzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtF5kYDQOOkADrj/wA44v8AOeP/ADzk/wVB46QPReZGAAAAAAAAAAAAAAAAAAAAAPAPAADgBwAAwAMAAIABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIABAADAAwAA4AcAAPAPAAAoAAAAIAAAAEAAAAABACAAAAAAAAAQAAATCwAAEwsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAChIzyAnRNFwJ0TQryND0d8nRNH/J0TR/ydE0f8nRNH/I0PR3ydE0K8nRNFwKEjPIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAChE00AlRdK/J0XS/ydF0v8nRdL/XXPd/11z3f94i+P/k6Lp/5Oi6f9rf+D/NVDV/ydF0v8nRdL/JUXSvyhE00AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACBAzxAnRNOvJ0XT/ydF0/8lRdK/KEXSYOvu+6/+/v6//v7+v/39/c////////////7+/r/J0fOAKEXSYCVF0r8nRdP/J0XT/ydE068gQM8QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlRdUwJ0bT7ydG0/8nRtHPKETTQAAAAADHx8dA2vHhn5TYpN/o9+z/////////////////8PL83ydG0o8lRdUwAAAAAChE00AnRtHPJ0bT/ydG0+8lRdUwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKEXVYCdG1P8nRtT/KEbTgAAAAAAmRtZQI0PU38jIyP/F6s//Rrtk/0a7ZP9/yIr/c796/4vLkv+JpNf/M3Kq/zyWh/8zeKTfJkbWUAAAAAAoRtOAJ0bU/ydG1P8oRdVgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACVF1TAnR9X/J0fV/yhF1WAgQM8QJ0fTrydH1f9CW8//2tra/6Pdsv9Gu2T/Rrtk/0WzWv9Gu2T/Rrtk/0a7ZP9Gu2T/Rrtk/z6egP8nR9X/J0fTryBAzxAoRdVgJ0fV/ydH1f8lRdUwAAAAAAAAAAAAAAAAAAAAAAAAAAAgQM8QJ0fV7ydH1f8oSNVgIEDPECdH1c8nR9X/J0fV/1xwyf/t7e3/o92y/0a7ZP9Gu2T/Ra5U/0a7ZP9Gu2T/Rrtk/0a7ZP9Gu2T/Pp6A/ydH1f8nR9X/J0fVzyBAzxAoSNVgJ0fV/ydH1e8gQM8QAAAAAAAAAAAAAAAAAAAAACdH1q8nR9b/KEjVgCBQzxAnR9bPJ0fW/ydH1v8nR9b/gIzB//r6+v+j3bL/Rrtk/13Ed/+i26//ruG7/z6egf8+noH/Rrtk/0a7ZP86kI//J0fW/ydH1v8nR9b/J0fWzyBQzxAoSNWAJ0fW/ydH1q8AAAAAAAAAAAAAAAAoSNdAJkjW/yZH1s8AAAAAJEfWryZI1v8mSNb/JkjW/yZI1v+jqsT//////+j37P/R7tj////////////W3ff/JkjW/yZI1v8uZbr/PJeI/zJzrP8mSNb/JkjW/yZI1v8mSNb/JEfWrwAAAAAmR9bPJkjW/yhI10AAAAAAAAAAACVI1r8mSNf/KEjXQCZJ1lAmSNf/JkjX/yZI1/8mSNf/JkjX/9HR0f///////////////////////////5Ok6/8mSNf/JkjX/yZI1/8mSNf/JkjX/yZI1/8mSNf/JkjX/yZI1/8mSNf/JknWUChI10AmSNf/JUjWvwAAAAAoSNcgJknY/yZH2M8AAAAAI0nY3yZJ2P8mSdj/JknY/yZJ2P9KZM//39/f////////////////////////////XHfi/yZJ2P8mSdj/JknY/yZJ2P8mSdj/JknY/yZJ2P8mSdj/JknY/yZJ2P8jSdjfAAAAACZH2M8mSdj/KEjXICdJ2HAmSdj/JUjXYCVK2jAmSdj/JknY/yZJ2P8mSdj/JknY/2V4yf/t7e3///////////////////////////9cd+L/HXTj/xSf7/8Nwfj/CdL8/wnS/P8J0vz/ELDz/xt85v8mSdj/JknY/yZJ2P8lStowJUjXYCZJ2P8nSdhwJErZryZK2f8oSNcgJUnajyZK2f8mStn/JkrZ/yZK2f8mStn/iJPA////////////////////////////0ff+/xjV/P8J0vz/Drn1/xiO6/8Yjuv/GI7r/xCw8/8Lyvr/CdL8/xmF6P8mStn/JkrZ/yVJ2o8oSNcgJkrZ/yRK2a8jStrfI0rZ3wAAAAAlSdq/Jkra/yZK2v8mStr/Jkra/yZK2v+xtsf///////////////////////////8o2Pz/CdL8/wvK+v8mStr/Jkra/yZK2v8mStr/Jkra/yZK2v8iW97/Jkra/yZK2v8mStr/JUnavwAAAAAjStnfI0ra3yZK2v8lSdq/AAAAACZH2O8mStr/Jkra/yZK2v8mStr/L1HY/9HR0f///////////////////////////yjY/P8J0vz/CdL8/xCw9P8QsPT/ELD0/xSf7/8ddeX/Jkra/yZK2v8mStr/Jkra/yZK2v8mR9jvAAAAACVJ2r8mStr/Jkvb/yVJ2r8AAAAAJkvb/yZL2/8mS9v/Jkvb/yZL2/9KZtL/4+Pj////////////////////////////4Pn//0fd/f8J0vz/CdL8/wnS/P8J0vz/CdL8/wnS/P8Lyvr/Fpfu/yJc3/8mS9v/Jkvb/yZL2/8AAAAAJUnavyZL2/8mS9z/JUncvwAAAAAmS9z/Jkvc/yZL3P8mS9z/Jkvc/26AyP/x8fH//////////////////////////////////////9H3/v/C9P7/o+7+/2fa+/8Oufb/CdL8/wnS/P8J0vz/CdL8/xiP7P8mS9z/Jkvc/wAAAAAlSdy/Jkvc/yZM3P8lTNy/AAAAACZJ2e8mTNz/Jkzc/yZM3P8mTNz/iJTB////////////qnth/5VaOf/x6eX///////////////////////Hp5f/x6eX/ydL2/yZM3P8kVN7/G37o/xKo8v8QsfT/HXbm/yZM3P8mSdnvAAAAACVM3L8mTNz/I0vc3yZJ2u8AAAAAJUzevyZM3f8mTN3/Jkzd/yZM3f+fqc3///////////+VWjn/v5yI/+re1///////////////////////jk8s/7iRe//J0vb/Jkzd/yZM3f8mTN3/Jkzd/yZM3f8mTN3/Jkzd/yVM3r8AAAAAI0vc3yNL3N8kTd2vJk3d/yhQ3yAlTd2PJk3d/yZN3f8mTd3/Jk3d/6St0v////////////Hp5f/q3tf///////////////////////////+xhm7/49PK/6Cx8P8mTd3/Jk3d/yZN3f8mTd3/Jk3d/yZN3f8mTd3/JU3djyhQ3yAmTd3/JE3drydN33AmTd7/J03fcCVK3zAmTd7/Jk3e/yZN3v8mTd7/pK7S///////Sp5r/////////////////////////////////////////////////T27k/yZN3v8mTd7/Jk3e/yZN3v8mTd7/Jk3e/yZN3v8lSt8wJ03fcCZN3v8nTd9wKFDfICZO3/8mTt3PAAAAACVN3r8mTt//Jk7f/yZO3/+EltX//////+fRyv/SqaD/59LO///////////////////////at63/vIBy/7Glxf8mTt//Jk7f/yZO3/8mTt//Jk7f/yZO3/8mTt//JU3evwAAAAAmTt3PJk7f/yhQ3yAAAAAAJE/dryZO3/8oUN9AKFDfQCZO3/8mTt//Jk7f/zhb2v/o6/T/////////////////////////////////////////////////XHrn/yZO3/8mTt//Jk7f/yZO3/8mTt//Jk7f/yZO3/8oUN9AKFDfQCZO3/8kT92vAAAAAAAAAAAoUN9AJk7g/yZO4M8AAAAAJk/hnyZO4P8mTuD/Jk7g/05v5v/k6fv//////////////////////////////////////3eR7P8mTuD/Jk7g/yZO4P8mTuD/Jk7g/yZO4P8mTuD/Jk/hnwAAAAAmTuDPJk7g/yhQ30AAAAAAAAAAAAAAAAAjT+GfJU/h/yVO4Y8gUN8QIk7gzyVP4f8lT+H/SWnW/0lp1v+bq+H/8fHx/////////////////6Cy8v9OcOb/JU/h/yVP4f8lT+H/JU/h/yVP4f8lT+H/JU/h/yJO4M8gUN8QJU7hjyVP4f8jT+GfAAAAAAAAAAAAAAAAAAAAACBQ3xAlTOHvJU/h/yVQ4mAgUN8QIk7hzyVP4f+ktOv///////////////////////H0/f9phur/JU/h/yVP4f8lT+H/JU/h/yVP4f8lT+H/JU/h/yVP4f8iTuHPIFDfECVQ4mAlT+H/JUzh7yBQ3xAAAAAAAAAAAAAAAAAAAAAAAAAAACVQ3zAlUOLvJVDi/yVQ4mAgUN8QI1Din4mb2//J0/j/ydP4/6299P93ku3/M1vk/yVQ4v8lUOL/JVDi/yVQ4v8lUOL/JVDi/yVQ4v8lUOL/I1DinyBQ3xAlUOJgJVDi/yVQ4u8lUN8wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACVQ5DAlUOLvJVDi/yVQ4o8AAAAAJFDjQCVQ4r8lUOL/JVDi/yVQ4v8lUOL/JVDi/yVQ4v8lUOL/JVDi/yVQ4v8lUOL/JVDivyRQ40AAAAAAJVDijyVQ4v8lUOLvJVDkMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACVQ5DAjUeTfJVHj/yNR5N8kUONAAAAAACVQ5DAmUuOAJVHivyNR5N8lUeP/JVHj/yNR5N8lUeK/JlLjgCVQ5DAAAAAAJFDjQCNR5N8lUeP/I1Hk3yVQ5DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACBQ3xAjUuSfJVHk/yVR5P8jUeTfJFLkcChQ5yAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoUOcgJFLkcCNR5N8lUeT/JVHk/yNS5J8gUN8QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkUONAI1LknyVS5P8lUuT/JVLk/yVS5O8lUeS/JVHkvyVR5L8lUeS/JVLk7yVS5P8lUuT/JVLk/yRS468kUONAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIFDfECVS5GAjUuWfIlPlzyVS5f8lUuX/JVLl/yVS5f8iU+XPI1LlnyVS5GAgUN8QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/AA///AAD//AAAP/ggBB/wgAEP4AAAB8AAAAPAAAADiAAAEYAAAAEQAAAIAAAAAAAAAAAgAAAEIAAABCAAAAQgAAAEIAAABCAAAAQAAAAAAAAAABAAAAiAAAABiAAAEcAAAAPAAAAD4AAAB/CAAQ/4IAQf/AfgP/8AAP//wAP/</Image>
  <Image height="26" width="65">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAYAAADovjFxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxNTg5QTM3RjNCMjA2ODExODIyQUVEOUNBRDIxQzhDMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxRTYyNzYzMzFBQUUxMUU0ODc3NTg3NjMyNDFCNzExQSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxRTYyNzYzMjFBQUUxMUU0ODc3NTg3NjMyNDFCNzExQSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDE4MDExNzQwNzIwNjgxMTg3MUZCQUIxMEI4RjU1NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTU4OUEzN0YzQjIwNjgxMTgyMkFFRDlDQUQyMUM4QzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7hxyCFAAAF4UlEQVR42tSZa2wUVRTH/3dmp92+tnRpCiUgxFoKCDQplsRIfZSgCEHSapBGBCURQvCLWkkQg9GYGNDwTYlGUCMoCA2EtEpEq1KjRJCA9EEElba2FajbN213d+b6vzOzZZfi99mb/DJ3d/aczD33vO6skFLCq6O9YubYXChE4n1+LublaVJO5hLDvRUhjaSefMolno+XU0uOX7WG5BxLSBsXc448Qo6SFWSuywr3O3XvnPqtK3PbkWxGUL5whHzN7WyAZeWQRZBWFz+v4v6+w3sKztFFFpEc0mDLOLJinNIkCocMXppJLhdcCssMw4zu5fOX2XGi6RAa91Rot8aNMsB6kkJOk24yh6seSjZPEHzoZmlfZaaU1pqR/Dsv+XfVlQXf/QbZ67dBz5sKKzxK20TpGBbU5qrtJWXkEllDMqWrK94jPG0ESzpwPTUkl8yQFvZL09oaLlqIG1LDQFoA6Y9vxJQ9Dch+bjus4WEaIwxpmjSGdJKgw1ay39bh6KqJ6U8GTyjnc1aQheQ1UqV2Of3LPTBPfI40RkVsEdmVGzClphmZy9bAitAQlhnvEbBlHR1KV4VbVbydE66sLFI+e8mN5e1Qc7o6IqMIr3sVhVUb/le2e1c1Bk8cgvAxFWjj9rqQvA7HGIVeN4LqA1SJm0iOci/LQDc3aZrg4RZkpBgYHY4iK8OXIHetz4RPi6K/ao4b9PrtkuVKElL9hafDgfuzjrQQk5QxH9hxPphfgAy/gYHByDgDqJGXrSOYlYrAo1WQUTc32LJj+aHM1dlEnvK2EYClpIasiotrmL5URE2JiQEDuw+ewunGjgS5hrNtWLp5P/QHKhk9lh1BDuKmIYAnyWGyxNuJUWI2+ZncG5/djKF+DA45ZX7Hh9/j2HdNCWKzC/JRsXg+sgrmQ4aFjS/LQvqsYejpqiTYepTOn8g8n8c9QQ21zdPiDxD+620IhULIC2TiYl01/CmJy8jNNrCxMh/hjiMIVvYioziK1BlRQJcIHc1B6KscqpLTXN2pPo/nhNjwxR2jIFgdBtouAzPuSDSAZLPUXgX0HYFgLjRIcLnO3sFAb33AJnLdYFNp9w/6Lco97Qm57o7dbKC5wpHffgHuL09srjo22AYY/tOPoQsBiFRgtJ3zljQqo/HoCfbSnULR6eq2vJ4TWskCcnYsJ9hGYIz/1YQR65bTYOARe5FW2EDfqQD+rQ1iqDkN/qlhTHhwAJnFQ6oxiuUWpfMe0uzpPuH3ZUV7eZlFVpPWsRjh+WA4OAV579UiPzghQaajuhgZc1qRWTIKnQ4g0i27N77RlI5rXwQR/seI9cnTyWfkvNfDYR8v35K/iSoBd8eSY8r1doR6escZYfRqLvrPDEDsM+ALWNADJiLdBttoYXuJEPamK13t5D6y1evNUj3pJzvIJqfRYV5XyZGFf/CPlnEy6UXzoLEZYDqEHBCIdBpsmFSsODEgHb1K105Xd4PnD1B86M2kmjSSA/Yi6AlSaBhtPG3/5mTXcTT3nLPnwYcq4KP7X52cgvc3TcWvpQFVDu1UIoWt74CrS+nc7P3qIO00rkLiBfcQdReZCamVqAqRcuUiolzJDx11aO4+gxxjOnqtbmhvzITO+6Yh0DthhF4jYmeHs4Q1FJfd+T6ZLC9VpHOcnk7qyQJSqzzB39WKnr5h+HhS1DUfOvs64RNRVgATlnDawoghYoWl1pWtd3WVJ0WfEDf6pGqhnTdCTGqihCw3urt2h0LdecH0ydB1Aw8XLkfPjRGUTixB4JUtuDDXj0nXokMmsJbyddJJiOoYPZuO0ZdsRlDjsnTa5x/JCDTxEnPfpIH6Y28uXvHYttUFzyNb1cTY+4TyC8ezD37wltT1k5YmXmRkjbhhMI2BcTVpXrS2LJ011jmO/VfgPO7L/GKnfSQ0zU+EaR2SlnWGN53FaRpdw1cKTX+Cxlrr5oMt5G2713Kq7NhLxmQ1gpPvpXyWs2f4oSz+oHHznxrRwOvHnHwkYpK3McJ/AgwADmrfhvtTyFYAAAAASUVORK5CYII=</Image>
  <Image height="52" width="130">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAYAAABGkOCVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxNTg5QTM3RjNCMjA2ODExODIyQUVEOUNBRDIxQzhDMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4RTdBNDY4ODFBQUQxMUU0ODc3NTg3NjMyNDFCNzExQSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4RTdBNDY4NzFBQUQxMUU0ODc3NTg3NjMyNDFCNzExQSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTE3MzgzQ0I2QjIwNjgxMTgyMkFFRDlDQUQyMUM4QzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTU4OUEzN0YzQjIwNjgxMTgyMkFFRDlDQUQyMUM4QzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7NVVBAAAAO30lEQVR42uxdCXRU1Rn+3nszk5nJhmEJAYKyJJJAWFyqUqwWwaJi0aKA9bh0USwunEo9UGmrHG0Vj3LUUoEqFQGXciqgiFCoVtsKeBAJS9JWtrAmIUxmkpnJJDNv6X/fu5O8mUwmkwkoPef9Od/cN/ct9593v/vf//73vhdB0zRY0nU5dktxuzxBMG3zD6GD84XYHYMI1xMuJZQQ2MWzCS6+P0TwE74i/Juwi7CFcCR6gY6qUeMf5t2JjhUsInxjRBhJyUOEewn2NNWIEFYQFlM17rWI8P9FhJsILxGGdHDpOsJ+wmlCA8/LJfQhjCD07uC8Q4TZhI3pEMFmVenXJqMJ7xIGx+UfJawivEf4IsVrXUaYQriLcCHPY8T6gHCYMJVQ3hXlLIvw9ViE1wg/iTt8JeFpuvsHYs4BehLKCAWEHnyXj1BN2EfwmGuMzimi5FeEu+Ouv5zwU6trOD+IUEif/zS1WiZvEWZSzQT4gQ5WYbwVj0+x+I+5dXmNrhPm18miz6WEO+OszdV0zHGLCN8cEZj53mnaXUO4ke72blYTArRS+r6QMLnVFggmu5C6sO5gLl23kp/NuqBNhL6mYy7XTN1OoioXrSo9JzKJ7vVOjTtrhLWEAoMEag5UZaMmyxVqJDKZAFUmKDJBpd0EqinTuZ1hMqGCV34ObZfzstaajmGEnGT5CF+vRbg0zul7krCAN8Ufa6K0vLnkCmSXXQ5nuBmavx6qtw4t+3dC9p6GIJH/LkkQRMm4oNBlC8F8kT/x7Sd4+WYnc5c1ajj3UhBHgofppi/mdbmGmHA75DDC9afh63cxSr4zMeZk+Uw1Au+/jsCGN6C2NEGw2clmk9EWumS4l/PWP43KXkBle2j793wf060fdzwti3CuLAIfy0eHhwtMrZE5jONAZl+lSrUvXI/+w0qTXF1D/Su/QeP65RDsDrISkkGGrlmHf+mOYptVeoJvH04Uw7CIkKYcjSMCVdESSh7gX1lM4JYYEuj1qyKU1w/eUdcC3jPQMnNh65UP9+Dh6FFUin79+8e4ioG/vYszCx80uguyDkLUOqROCDMZ1vPYA5OlVOs/s4hw9onAmncF32YRwXy+/TZhRsy4TVWoD4gAkTA0RYHjuh/Adc0tyBhcAme/iyDGVXLk5GE0bfsr/NRlsK7DIITUFTK8Q7iDb9fCiFAyGQ4+0rCIcPaIUMHJwORb0ISddGfv4kGj2AE8jQ4QaUFkwh3o9/OFcNtSd9M8L8+D/8PVeneBrpHhbtJpFelkHtJWcjJYw8duiSZEMYFQyrfX8BudQ9srTceQJaBclYgQURCc/hiGPPZCl0jApOcjzyJz3GRodA39WubrJ8dKXSfmLDIdjbxSrrt+jGUR0pSqKRdHN9msXxnfvgBGOHiDESgyE4eYIMvwFw5D8bJNyOiOozrjEiiNXmNUkbpVYIGnm2GErb08j4WsR1oWoftSbCLBW5wERe1IYOoW5HseT4sEClmAWk8zzgQ19H7kd5RBfoaqInYWIalM5rr5uK7guhdbROhOz6DpmMVThqd5usiUZ4AqUVNUBHsVIm9oiX5+U4uCpavLsWTVbmz6+FCn5R2vDuhRR7+vCdLYSbAVFpHfqeiGpl15HSOq21OmPP03WF1DmnLk+3rXECS4eYCGBWokFhdKxBqBRgqnR30Xg+e/jF7ZWXjng68wdkwBBvbPTqt8/+a3UbdoLgQHdxxTF+aYkJOBk1xn9huyLIuQvhRyEjB5jaf3dRQgYmi5oC8k0bjl024qSpsETLIn3UHugabPS6BrjTmq43KeZjJCWERIt2sAbjBN6mzSjDn/25JNEKk2B+RIxBiumZw8D5n7lKJDX1bhqjtfwUtvbde/u0aPNSapgK7gNq7rJlPe9RYR0mfCVaa7u53nXZesBgRNQSgUirnM4y9uxogpi/DE4q3kN0SSFrlszQ4cPeXFF/tOwNcCOMuuNBxGVTOxLQFi9biO67rdlHe5RYT0ZQRP63jap+NDBR32gA/+QDBmz5sby2G3iThe68O2L48mLXDGDaPhsElgk9Q9aOiRMbi0HQk0VSDHlCBzqEIbGdqkd5zupRYR0u8ahvH7X8HTkUlNMnUFTs8peLz1Mde5+doShGVVb+VXjipMWuZN1wxD1dZ5WP3MNCPDmWUYBBZfokpXIoJelnt0ED1vrUfeFC/cw5uIK0K8PqN4up+nxdY0dPqSxdNTPO2X3CAQEWqP4nhDY8yuxfOnYM49V2NA3x66ZehSbMHfAi0iwd5XRmZJE1zDQ3BfHIJg582fzU/ZNNQsy0dwj8u8+KmApyd5mmsRoRtxBC7RJec5yboGtjjNUX8aQpMfTeEI3I62RxkGDchLrVD5DJl9sihyNYRwBSTtVQx64RRsubrJIZ2MmmZdgyBqeur7KAeBclfb4IVXPE+jrMy0iNB9CfO0k4dUBDZU0K2C1+uDO793aldXybSfmgOt/nWqyBazywFHL2Mlk6aIrfmMAEqTiMbPcuH9KBtqQNIjB2yoaRJ7nO7WCqWzID2jMZ7OeMC6B3dtFbw+H/qnQAQtuA3q4QlEhpCxUkm00SWiC12FVnLprZ9FKytdaNyejWC522j9ktE1RIljjkfF6R62iJC+syjzhtQjzgPvmAmCCFcNWYQGX+cFRKqhHvi2UYGiHYIkEh9ERBpt1BUokHIUqC0iQv/JgH93JoJ73VACkk4K3TcQDAJoieekorpGdQ9YREifCWzJF5uwGcZzKjpjDqsZZ3UVTsQ5jAkPD+3h/DGWqWmyiCO/LtTNfusSRr2la8Z3xjNJayssebAxqmsJT49Yw8f0ZR9Ph/L0YHKDYKxIdjTUQQg2ItjSkvzw7Al6VwBB1U9Vmw2LIHBz3wqJE4JVvMIcRUKExxJYDCExIQ7G6V5pESH9rqHcNC4fzPMqk4aY2ehBZN1Dle4wJmeCDeKgNYaJFxXYesgYMKcGrqJmvuJN0GMHKlU6iBDOoc3oMaERBffXYcjCEyhaUgV7fjiRHpVc18GmvL1W15A+EzbT51P8G5t3+AOMBaKlnfkKTt1PaMCAvvmdWIVbUbtxKpwFW5B9WRiZpSEdbFpb9lHVUYsX3Sokl9o6nNV9SOoiGj/LRrjWET9aYLKe59xgyttqESF9i2B+fmE6DCK8Sni8U4eRRg6eem9K5QT/G0T9h70hrpaQNaoZWWVNcBc3w5EvG6Fj3qoZAeSAiACNGLyf5KD5uIMZlUTyqknnqOyxiNA9YUvS2PIvtmScRW2qYDzdXJRsCOk8dRgn/P6UChAzaMRgU/WxIKtk/263bgmkbBkZ/WXYsmSoYQGR03a0kAWIOo+6/9B+2HiA6+hC2zL3DXo5Vl12S5aYtmdz8zw3uUUQYPd7IQYa4G8KdVqAY8CFdJaqDwtZ5Yp2Sh0qOY8SQgdp6FhOQ8dKN8Ieux5a1vdLbSOJOJnLdZwd/xssIqTbNRjrQdg6hObo8i+ev45woqPlYvoEkMAdRl/n8QTn0BFQ2VI30ySj4QtorYCoz3HraHUA25fNdFrHdYwuVWvmv8EiwlmQ+Txl3eyjWvv+N8EwUtS7B6+vodOLZ44Za0wv8poz6p1aPpFD4hBTW6A0nR/2KNoiyvNbuyCrHtN2FqNYxKKMfPsF3v9uo+1VyaakXdWH4fF27jA6i8tgc+eyZcwspABBocqn0o4OdOKP9w/A+1P6UL4Wr1M82Kt5tjHdmI48T+a668dYRDg7Yl6ruJbPArJX2RxP5CYYRKhCYyDQmv3+oZX44ear8NwXj2JX7T9iTuk5/lbYI0QAIoFiF7B2al+svKc/avpm4MBQt24dhI7XLTId7uY6re1AZ2vSKX2TEOOJreAmlz0nwB5Jn0k3fhkdMYa2T7CGHTt0oBbY1AS7tw4NgSbkZrnpcmTiaWSw37ML+zw70dPZB9cXTseO2h04ekkl1CuK4WzW4AxrCGRJsMlGxbNtmU1IaUg0sdBMGKMZpc6k/ZNMUdEVMaMTq0bPWlcx0WSK2buMLtOMF1+VEVpiuwaCaMw71PPuQSC/QRSogkU7HGIGGsM+vLhjCU4E9xA9FDhY2MAmoMkt6pbBsAKGjxhyiom6gxZetofrstS0b2K7YapVhWdN2JPGU03f2TOQF9FdP6inxhNGsYEl8hPq+cjBJbn5HoEIQZVNpBA0I5XYs4m84hPNHdjldpm+uLLN73KaynW1iHAOZS3d/CdNzZLNUJZR911D23mEv7eNAUVknGwbOWTY3K0ntf7RiSp7uQb/kwUFClt4IpF1IIuish5BbGcKWBl5epmsq9JwyLTvyTg/wSLCOZQFdM+Xta5gNx6SncKH8+MJP6IGrqj6GsZjCAQNh7GXKx+qpkIhyKqMiBpGVoYbh2tCOF4XQq1Xw3TvtXjouUMY94kXeZ4wIuQ4OshnsBPoeop+baMMjZe5l0cZWMYyRN/llEAsZzFNUZOP3R/g5jkaZVzPI3iz6LQVZOhXkFPwjBCJzHOcqYbPH0J+1kDI9McmlAbmFGFG8QMY1etK1ARrdZ8hz2WsITn05gaM++g0vkNk8OfY0ewSmWV4lnb9UmsLJrJ5j1kmfdhr/OZFX76JBD2M9exjmlLxvWGpOJCzeKVExasHmzRsNcKMMjzjb19aMO2+mcVFQ7Du2EqUXDAGw7LLOrxmw5b1OPbb2RBtjs8FUWTkekN/a6Mxr8CcwD/DeDw/Kg/Srlc609UiwrklAvtgD8J8SjAvVd5LRHiE8Gn0NTqZKz692aGq853ZOSMycnIzJWcGbHx5e0RWEGluQaTB63H7z7ztfe/Nh71b1vE3ruk24BrCy+DvOuBSr+cL2J/KGxQsIpx7IkTlecKc2AO0esJiqMrrUJQq5hgyS2HUidY+EiUK+pPPomRjaxgH0cjjXhiv+o9fD88inL9oHaBYRDiviMA22aNMiwi3xRGCgU0oUJehB3vY01M0xNP4ZITAnkPIp8Y/nLZHkhWYqAce2stfWGBLMEc0LSKcl0SISj5vsewVd5ndVCXIHdHno/EBIc6QWEQ4f4nQaghIriDcCOMfelyaYvHsX/mwf9DxIeHz+NcopUOE/wkwAAeR3z4C+zelAAAAAElFTkSuQmCC</Image>
  <Url type="text/html" method="get" template="https://duckduckgo.com/">
    <Param name="q" value="{searchTerms}"/>
    <MozParam name="t" condition="purpose" purpose="contextmenu" value="ffcm"/>
    <MozParam name="t" condition="purpose" purpose="keyword"     value="ffab"/>
    <MozParam name="t" condition="purpose" purpose="searchbar"   value="ffsb"/>
    <MozParam name="t" condition="purpose" purpose="homepage"    value="ffhp"/>
    <MozParam name="t" condition="purpose" purpose="newtab"      value="ffnt"/>
  </Url>
  <Url type="application/x-suggestions+json" template="https://ac.duckduckgo.com/ac/">
    <Param name="q" value="{searchTerms}"/>
    <Param name="type" value="list"/>
  </Url>
</OpenSearchDescription> 
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="derdump">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>DERDUMP</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>derdump </refname>
    <refpurpose>Dumps C-sequence strings from a DER encoded certificate file</refpurpose>
  </refnamediv>

 <refsynopsisdiv>
    <cmdsynopsis>
      <command>derdump</command>
      <arg><option>-r</option></arg>
      <arg><option>-i <replaceable>input-file</replaceable></option></arg>
      <arg><option>-o <replaceable>output-file</replaceable></option></arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection>
    <title>Description</title>

    <para><command>derdump </command>dumps C-sequence strings from a DER encode certificate file </para>

  </refsection>

<refsection>
    <title>Options</title>
    
    <variablelist>
    
    <varlistentry>
        <term><option>-r </option></term>
        <listitem><simpara>For formatted items, dump raw bytes as well</simpara></listitem>
      </varlistentry>
      
      <varlistentry>
        <term><option>-i </option> <replaceable>DER encoded file</replaceable></term>
        <listitem><simpara>Define an input file to use (default is stdin)</simpara></listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-o </option> <replaceable>output file</replaceable></term>
        <listitem><simpara>Define an output file to use (default is stdout).</simpara></listitem>
      </varlistentry>
    
        </variablelist>
  </refsection>
  
  <refsection id="resources">
    <title>Additional Resources</title>
    <para>NSS is maintained in conjunction with PKI and security-related projects through Mozilla dn Fedora. The most closely-related project is Dogtag PKI, with a project wiki at <ulink url="http://pki.fedoraproject.org/wiki/">PKI Wiki</ulink>. </para>
	<para>For information specifically about NSS, the NSS project wiki is located at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">Mozilla NSS site</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: pki-devel@redhat.com and pki-users@redhat.com</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Gerhardus Geldenhuis &lt;gerhardus.geldenhuis@gmail.com>. Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com&gt;
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Test search engine</ShortName>
<Description>A test search engine (based on Google search)</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/png;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADs9Pt8xetPtu9FsfFNtu%2BTzvb2%2B%2Fne4dFJeBw0egA%2FfAJAfAA8ewBBegAAAAD%2B%2FPtft98Mp%2BwWsfAVsvEbs%2FQeqvF8xO7%2F%2F%2F63yqkxdgM7gwE%2FggM%2BfQA%2BegBDeQDe7PIbotgQufcMufEPtfIPsvAbs%2FQvq%2Bfz%2Bf%2F%2B%2B%2FZKhR05hgBBhQI8hgBAgAI9ewD0%2B%2Fg3pswAtO8Cxf4Kw%2FsJvvYAqupKsNv%2B%2Fv7%2F%2FP5VkSU0iQA7jQA9hgBDgQU%2BfQH%2F%2Ff%2FQ6fM4sM4KsN8AteMCruIqqdbZ7PH8%2Fv%2Fg6Nc%2Fhg05kAA8jAM9iQI%2BhQA%2BgQDQu6b97uv%2F%2F%2F7V8Pqw3eiWz97q8%2Ff%2F%2F%2F%2F7%2FPptpkkqjQE4kwA7kAA5iwI8iAA8hQCOSSKdXjiyflbAkG7u2s%2F%2B%2F%2F39%2F%2F7r8utrqEYtjQE8lgA7kwA7kwA9jwA9igA9hACiWSekVRyeSgiYSBHx6N%2F%2B%2Fv7k7OFRmiYtlAA5lwI7lwI4lAA7kgI9jwE9iwI4iQCoVhWcTxCmb0K%2BooT8%2Fv%2F7%2F%2F%2FJ2r8fdwI1mwA3mQA3mgA8lAE8lAE4jwA9iwE%2BhwGfXifWvqz%2B%2Ff%2F58u%2Fev6Dt4tr%2B%2F%2F2ZuIUsggA7mgM6mAM3lgA5lgA6kQE%2FkwBChwHt4dv%2F%2F%2F728ei1bCi7VAC5XQ7kz7n%2F%2F%2F6bsZkgcB03lQA9lgM7kwA2iQktZToPK4r9%2F%2F%2F9%2F%2F%2FSqYK5UwDKZAS9WALIkFn%2B%2F%2F3%2F%2BP8oKccGGcIRJrERILYFEMwAAuEAAdX%2F%2Ff7%2F%2FP%2B%2BfDvGXQLIZgLEWgLOjlf7%2F%2F%2F%2F%2F%2F9QU90EAPQAAf8DAP0AAfMAAOUDAtr%2F%2F%2F%2F7%2B%2Fu2bCTIYwDPZgDBWQDSr4P%2F%2Fv%2F%2F%2FP5GRuABAPkAA%2FwBAfkDAPAAAesAAN%2F%2F%2B%2Fz%2F%2F%2F64g1C5VwDMYwK8Yg7y5tz8%2Fv%2FV1PYKDOcAAP0DAf4AAf0AAfYEAOwAAuAAAAD%2F%2FPvi28ymXyChTATRrIb8%2F%2F3v8fk6P8MAAdUCAvoAAP0CAP0AAfYAAO4AAACAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAQAA</Image>
<Url type="text/html" method="GET" template="http://example.com/search">
  <Param name="q" value="{searchTerms}"/>
</Url>
<Url type="application/x-moz-tabletsearch" method="GET" template="http://example.com/search/tablet">
  <Param name="q" value="{searchTerms}"/>
</Url>
<Url type="application/x-moz-phonesearch" method="GET" template="http://example.com/search/phone">
  <Param name="q" value="{searchTerms}"/>
</Url>
<SearchForm>http://example.com/</SearchForm>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
	<identity>

		<version number="$Revision: 1.4 $"/>
		<generation date="$Date: 2008/12/08 18:18:44 $"/>
		<language type="de"/>
	</identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;ue=ü&amp;ae=ä&amp;oe=ö&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="dialogBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">
  
  <binding id="dialog" extends="chrome://global/content/bindings/general.xml#root-element">
    <resources>
      <stylesheet src="chrome://global/skin/dialog.css"/>
    </resources>
    <content>
      <xul:vbox class="box-inherit dialog-content-box" flex="1">
        <children/>
      </xul:vbox>
          
      <xul:hbox class="dialog-button-box" anonid="buttons"
                xbl:inherits="pack=buttonpack,align=buttonalign,dir=buttondir,orient=buttonorient"
#ifdef XP_UNIX
                >
        <xul:button dlgtype="disclosure" class="dialog-button" hidden="true"/>
        <xul:button dlgtype="help" class="dialog-button" hidden="true"/>
        <xul:button dlgtype="extra2" class="dialog-button" hidden="true"/>
        <xul:button dlgtype="extra1" class="dialog-button" hidden="true"/>
        <xul:spacer anonid="spacer" flex="1"/>
        <xul:button dlgtype="cancel" class="dialog-button"/>
        <xul:button dlgtype="accept" class="dialog-button" xbl:inherits="disabled=buttondisabledaccept"/>
#else
                pack="end">
        <xul:button dlgtype="extra2" class="dialog-button" hidden="true"/>
        <xul:spacer anonid="spacer" flex="1" hidden="true"/>
        <xul:button dlgtype="accept" class="dialog-button" xbl:inherits="disabled=buttondisabledaccept"/>
        <xul:button dlgtype="extra1" class="dialog-button" hidden="true"/>
        <xul:button dlgtype="cancel" class="dialog-button"/>
        <xul:button dlgtype="help" class="dialog-button" hidden="true"/>
        <xul:button dlgtype="disclosure" class="dialog-button" hidden="true"/>
#endif
      </xul:hbox>
    </content>

    <implementation>
      <field name="_mStrBundle">null</field>
      <field name="_closeHandler">(function(event) {
        if (!document.documentElement.cancelDialog())
          event.preventDefault();
      })</field>

      <property name="buttons"
                onget="return this.getAttribute('buttons');"
                onset="this._configureButtons(val); return val;"/>

      <property name="defaultButton">
        <getter>
        <![CDATA[
          if (this.hasAttribute("defaultButton"))
            return this.getAttribute("defaultButton");
          else // default to the accept button
            return "accept";
        ]]>
        </getter>
        <setter>
        <![CDATA[
          this._setDefaultButton(val);
          return val;
        ]]>
        </setter>
      </property>

      <method name="acceptDialog">
        <body>
        <![CDATA[
          return this._doButtonCommand("accept");
        ]]>
        </body>
      </method>
      
      <method name="cancelDialog">
        <body>
        <![CDATA[
          return this._doButtonCommand("cancel");
        ]]>
        </body>
      </method>
      
      <method name="getButton">
        <parameter name="aDlgType"/>
        <body>
        <![CDATA[
          return this._buttons[aDlgType];
        ]]>
        </body>
      </method>

      <method name="moveToAlertPosition">
        <body>
        <![CDATA[
          // hack. we need this so the window has something like its final size
          if (window.outerWidth == 1) {
            dump("Trying to position a sizeless window; caller should have called sizeToContent() or sizeTo(). See bug 75649.\n");
            sizeToContent();
          }

          var xOffset = (opener.outerWidth - window.outerWidth) / 2;
          var yOffset = opener.outerHeight / 5;

          var newX = opener.screenX + xOffset;
          var newY = opener.screenY + yOffset;

          // ensure the window is fully onscreen (if smaller than the screen)
          if (newX < screen.availLeft)
            newX = screen.availLeft + 20;
          if ((newX + window.outerWidth) > (screen.availLeft + screen.availWidth))
            newX = (screen.availLeft + screen.availWidth) - window.outerWidth - 20;

          if (newY < screen.availTop)
            newY = screen.availTop + 20;
          if ((newY + window.outerHeight) > (screen.availTop + screen.availHeight))
            newY = (screen.availTop + screen.availHeight) - window.outerHeight - 60;

          window.moveTo( newX, newY );
        ]]>
        </body>
      </method>

      <method name="centerWindowOnScreen">
        <body>
        <![CDATA[
          var xOffset = screen.availWidth/2 - window.outerWidth/2;
          var yOffset = screen.availHeight/2 - window.outerHeight/2; //(opener.outerHeight *2)/10;
  
          xOffset = xOffset > 0 ? xOffset : 0;
          yOffset = yOffset > 0 ? yOffset : 0;
          window.moveTo(xOffset, yOffset);
        ]]>
        </body>
      </method>

      <constructor>
      <![CDATA[
        this._configureButtons(this.buttons);

        // listen for when window is closed via native close buttons
        window.addEventListener("close", this._closeHandler, false);

        // for things that we need to initialize after onload fires
        window.addEventListener("load", this.postLoadInit, false);

        window.moveToAlertPosition = this.moveToAlertPosition;
        window.centerWindowOnScreen = this.centerWindowOnScreen;
      ]]>
      </constructor>

      <method name="postLoadInit">
        <parameter name="aEvent"/>
        <body>
        <![CDATA[
          function focusInit() {
            const dialog = document.documentElement;
            const defaultButton = dialog.getButton(dialog.defaultButton);
            // give focus to the first focusable element in the dialog
            if (!document.commandDispatcher.focusedElement) {
              document.commandDispatcher.advanceFocusIntoSubtree(dialog);

              var focusedElt = document.commandDispatcher.focusedElement;
              if (focusedElt) {
                var initialFocusedElt = focusedElt;
                while (focusedElt.localName == "tab" ||
                       focusedElt.getAttribute("noinitialfocus") == "true") {
                  document.commandDispatcher.advanceFocusIntoSubtree(focusedElt);
                  focusedElt = document.commandDispatcher.focusedElement;
                  if (focusedElt == initialFocusedElt)
                    break;
                }

                if (initialFocusedElt.localName == "tab") {
                  if (focusedElt.hasAttribute("dlgtype")) {
                    // We don't want to focus on anonymous OK, Cancel, etc. buttons,
                    // so return focus to the tab itself
                    initialFocusedElt.focus();
                  }
                }
#ifndef XP_MACOSX
                else if (focusedElt.hasAttribute("dlgtype") && focusedElt != defaultButton) {
                  defaultButton.focus();
                }
#endif
              }
            }

            try {
              if (defaultButton)
                window.notifyDefaultButtonLoaded(defaultButton);
            } catch (e) { }
          }

          // Give focus after onload completes, see bug 103197.
          setTimeout(focusInit, 0);
        ]]>
        </body>
      </method>                

      <property name="mStrBundle">
        <getter>
        <![CDATA[
          if (!this._mStrBundle) {
            // need to create string bundle manually instead of using <xul:stringbundle/>
            // see bug 63370 for details
            this._mStrBundle = Components.classes["@mozilla.org/intl/stringbundle;1"]
                                         .getService(Components.interfaces.nsIStringBundleService)
                                         .createBundle("chrome://global/locale/dialog.properties");
          }
          return this._mStrBundle;
        ]]></getter>
      </property>
      
      <method name="_configureButtons">
        <parameter name="aButtons"/>
        <body>
        <![CDATA[
          // by default, get all the anonymous button elements
          var buttons = {};
          this._buttons = buttons;
          buttons.accept = document.getAnonymousElementByAttribute(this, "dlgtype", "accept");
          buttons.cancel = document.getAnonymousElementByAttribute(this, "dlgtype", "cancel");
          buttons.extra1 = document.getAnonymousElementByAttribute(this, "dlgtype", "extra1");
          buttons.extra2 = document.getAnonymousElementByAttribute(this, "dlgtype", "extra2");
          buttons.help = document.getAnonymousElementByAttribute(this, "dlgtype", "help");
          buttons.disclosure = document.getAnonymousElementByAttribute(this, "dlgtype", "disclosure");

          // look for any overriding explicit button elements
          var exBtns = this.getElementsByAttribute("dlgtype", "*");
          var dlgtype;
          var i;
          for (i = 0; i < exBtns.length; ++i) {
            dlgtype = exBtns[i].getAttribute("dlgtype");
            buttons[dlgtype].hidden = true; // hide the anonymous button
            buttons[dlgtype] = exBtns[i];
          }

          // add the label and oncommand handler to each button
          for (dlgtype in buttons) {
            var button = buttons[dlgtype];
            button.addEventListener("command", this._handleButtonCommand, true);

            // don't override custom labels with pre-defined labels on explicit buttons
            if (!button.hasAttribute("label")) {
              // dialog attributes override the default labels in dialog.properties
              if (this.hasAttribute("buttonlabel"+dlgtype)) {
                button.setAttribute("label", this.getAttribute("buttonlabel"+dlgtype));
                if (this.hasAttribute("buttonaccesskey"+dlgtype))
                  button.setAttribute("accesskey", this.getAttribute("buttonaccesskey"+dlgtype));
              } else if (dlgtype != "extra1" && dlgtype != "extra2") {
                button.setAttribute("label", this.mStrBundle.GetStringFromName("button-"+dlgtype));
                var accessKey = this.mStrBundle.GetStringFromName("accesskey-"+dlgtype);
                if (accessKey)
                  button.setAttribute("accesskey", accessKey);
              }
            }
            // allow specifying alternate icons in the dialog header
            if (!button.hasAttribute("icon")) {
              // if there's an icon specified, use that
              if (this.hasAttribute("buttonicon"+dlgtype))
                button.setAttribute("icon", this.getAttribute("buttonicon"+dlgtype));
              // otherwise set defaults
              else
                switch (dlgtype) {
                  case "accept":
                    button.setAttribute("icon","accept");
                    break;
                  case "cancel":
                    button.setAttribute("icon","cancel");
                    break;
                  case "disclosure":
                    button.setAttribute("icon","properties");
                    break;
                  case "help":
                    button.setAttribute("icon","help");
                    break;
                  default:
                    break;
                }
            }
          }

          // ensure that hitting enter triggers the default button command
          this.defaultButton = this.defaultButton;
          
          // if there is a special button configuration, use it
          if (aButtons) {
            // expect a comma delimited list of dlgtype values
            var list = aButtons.split(",");

            // mark shown dlgtypes as true
            var shown = { accept: false, cancel: false, help: false,
                          disclosure: false, extra1: false, extra2: false };
            for (i = 0; i < list.length; ++i)
              shown[list[i].replace(/ /g, "")] = true;

            // hide/show the buttons we want
            for (dlgtype in buttons) 
              buttons[dlgtype].hidden = !shown[dlgtype];

#ifdef XP_WIN
#           show the spacer on Windows only when the extra2 button is present
            var spacer = document.getAnonymousElementByAttribute(this, "anonid", "spacer");
            spacer.removeAttribute("hidden");
            spacer.setAttribute("flex", shown["extra2"]?"1":"0");
#endif

          }
        ]]>
        </body>
      </method>

      <method name="_setDefaultButton">
        <parameter name="aNewDefault"/>
        <body>
        <![CDATA[
          // remove the default attribute from the previous default button, if any
          var oldDefaultButton = this.getButton(this.defaultButton);
          if (oldDefaultButton)
            oldDefaultButton.removeAttribute("default");

          var newDefaultButton = this.getButton(aNewDefault);
          if (newDefaultButton) {
            this.setAttribute("defaultButton", aNewDefault);
            newDefaultButton.setAttribute("default", "true");
          }
          else {
            this.setAttribute("defaultButton", "none");
            if (aNewDefault != "none")
              dump("invalid new default button: " +  aNewDefault + ", assuming: none\n");
          }
        ]]>
        </body>
      </method>

      <method name="_handleButtonCommand">
        <parameter name="aEvent"/>
        <body>
        <![CDATA[
          return document.documentElement._doButtonCommand(
                                        aEvent.target.getAttribute("dlgtype"));
        ]]>
        </body>
      </method>
      
      <method name="_doButtonCommand">
        <parameter name="aDlgType"/>
        <body>
        <![CDATA[
          var button = this.getButton(aDlgType);
          if (!button.disabled) {
            var noCancel = this._fireButtonEvent(aDlgType);
            if (noCancel) {
              if (aDlgType == "accept" || aDlgType == "cancel") {
                var closingEvent = new CustomEvent("dialogclosing", {
                  bubbles: true,
                  detail: { button: aDlgType },
                });
                this.dispatchEvent(closingEvent);
                window.close();
              }
            }
            return noCancel;
          }
          return true;
        ]]>
        </body>
      </method>
      
      <method name="_fireButtonEvent">
        <parameter name="aDlgType"/>
        <body>
        <![CDATA[
          var event = document.createEvent("Events");
          event.initEvent("dialog"+aDlgType, true, true);
          
          // handle dom event handlers
          var noCancel = this.dispatchEvent(event);
          
          // handle any xml attribute event handlers
          var handler = this.getAttribute("ondialog"+aDlgType);
          if (handler != "") {
            var fn = new Function("event", handler);
            var returned = fn(event);
            if (returned == false)
              noCancel = false;
          }
          
          return noCancel;
        ]]>
        </body>
      </method>

      <method name="_hitEnter">
        <parameter name="evt"/>
        <body>
        <![CDATA[
          if (evt.defaultPrevented)
            return;

          var btn = this.getButton(this.defaultButton);
          if (btn)
            this._doButtonCommand(this.defaultButton);
        ]]>
        </body>
      </method>

    </implementation>
    
    <handlers>
      <handler event="keypress" keycode="VK_RETURN"
               group="system" action="this._hitEnter(event);"/>
      <handler event="keypress" keycode="VK_ESCAPE" group="system">
        if (!event.defaultPrevented)
          this.cancelDialog();
      </handler>
#ifdef XP_MACOSX
      <handler event="keypress" key="." modifiers="meta" phase="capturing" action="this.cancelDialog();"/>
#else
      <handler event="focus" phase="capturing">
        var btn = this.getButton(this.defaultButton);
        if (btn)
          btn.setAttribute("default", event.originalTarget == btn || !(event.originalTarget instanceof Components.interfaces.nsIDOMXULButtonElement));
      </handler>
#endif
    </handlers>

  </binding>

  <binding id="dialogheader">
    <resources>
      <stylesheet src="chrome://global/skin/dialog.css"/>
    </resources>
    <content>
      <xul:label class="dialogheader-title" xbl:inherits="value=title,crop" crop="right" flex="1"/>
      <xul:label class="dialogheader-description" xbl:inherits="value=description"/>
    </content>
  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>

    <dimen name="browser_toolbar_height">56dp</dimen>
    <dimen name="remote_tab_child_row_height">56dp</dimen>
    <dimen name="remote_tab_group_row_height">34dp</dimen>
    <dimen name="tabs_counter_size">26sp</dimen>
    <dimen name="tabs_panel_indicator_width">60dp</dimen>
    <dimen name="tabs_panel_list_padding">8dip</dimen>
    <dimen name="panel_grid_view_column_width">250dp</dimen>
    <dimen name="new_tablet_tab_panel_grid_padding">48dp</dimen>

</resources>
<text xml:lang="en">
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:dirRule dir="rtl" selector="//*[@direction='rtlText']"/>
  </its:rules>
 </head>
 <body>
  <par>In Hebrew, the title <quote xml:lang="he"
   direction="rtlText">פעילות הבינאום, W3C</quote>
   means <quote>Internationalization Activity, W3C</quote>.</par>
 </body>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
 <its:dirRule dir="rtl" selector="//*[@direction='rtlText']"/>
</its:rules>
<text xml:lang="en">
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0"
   xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="dir2xmlrules.xml" />
 </head>
 <body>
  <par>In Hebrew, the title <quote xml:lang="he"
   direction="rtlText">פעילות הבינאום, W3C</quote>
   means <quote>Internationalization Activity, W3C</quote>.</par>
 </body>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
	<its:param name="dirParam">rtLeft</its:param>
	<its:dirRule selector="//h:*[@class=$dirParam]" dir="rtl" />
</its:rules>
<text xml:lang="en" xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <body>
  <par>In Arabic, the title <quote xml:lang="ar"
   its:dir="rtl">نشاط التدويل، W3C</quote>
   means <quote>Internationalization Activity, W3C</quote>.</par>
 </body>
</text>
<text xml:lang="en" xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <body>
  <par>In Arabic, the title "<its:span xml:lang="ar" dir="rtl">نشاط التدويل، W3C</its:span>"
   means "Internationalization Activity, W3C".</par>
 </body>
</text>
<text xml:lang="en">
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:param name="dirParam">rtlText</its:param>
   <its:dirRule dir="rtl" selector="//*[@direction=$dirParam]"/>
  </its:rules>
 </head>
 <body>
  <par>In Hebrew, the title <quote xml:lang="he"
   direction="rtlText">פעילות הבינאום, W3C</quote>
   means <quote>Internationalization Activity, W3C</quote>.</par>
 </body>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
 <its:param name="dirParam">rtlText</its:param>
 <its:dirRule dir="rtl" selector="//*[@direction=$dirParam]"/>
</its:rules>
<text xml:lang="en">
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0"
   xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="dir6xmlrules.xml" />
 </head>
 <body>
  <par>In Hebrew, the title <quote xml:lang="he"
   direction="rtlText">פעילות הבינאום, W3C</quote>
   means <quote>Internationalization Activity, W3C</quote>.</par>
 </body>
</text>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - Directory</title>
</head>
<body onload="parent.loadComplete()">
<dir compact="compact">
<li>DIR item number 1.</li>
<li>DIR item number 2.</li>
<li>DIR item number 3.</li>
</dir>
</body>
</html>
<?xml version="1.0"?>
<?xml-stylesheet type="text/css" href="display.css"?>
<!DOCTYPE doc [
<!ATTLIST d id ID #IMPLIED>
]>
<doc>
  <foo xmlns="foobar">One</foo> <x:bar xmlns:x="barfoo">Two</x:bar>
  <d id="id3">Three</d>
</doc><?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">

    <solid android:color="@color/divider_light"/>
    <size android:height="1dp" />

</shape>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">

    <solid android:color="@color/divider_light"/>
    <size android:width="1dp" />

</shape>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - DIV</title>
</head>
<body onload="parent.loadComplete()">
<div align="center">The DIV element is a generic block container.  This text should be centered.</div>
</body>
</html>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="dje"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - DL</title>
</head>
<body onload="parent.loadComplete()">
<dl compact="compact">
<dd>Accountant</dd>
<dd>56,000</dd>
<dd>Female</dd>
<dd>1230 North Ave. Dallas, Texas 98551</dd>
</dl>
</body>
</html>
<?xml version="1.0"?>
<?xml-stylesheet href="docbook.css" type="text/css"?>
<!DOCTYPE Book SYSTEM "docbook.dtd">
<Book xmlns:xlink="http://www.w3.org/1999/xlink"> 
<Title>SoftQuad
Inc.</Title>
<p xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://www.w3.org/1999/xhtml">
<h:img src="flamer.gif"/>
<img src="flamer.gif"/>
<button><b>some text</b></button>
</p>
<BookInfo> <BookBiblio> <Title>Demo Product Documentation</Title>
<AuthorGroup><CorpAuthor>SoftQuad Inc.</CorpAuthor></AuthorGroup> 
</BookBiblio> </BookInfo> <Preface> <Title><Anchor
Id="SDK3"/>Element Overview</Title>
<BridgeHead>Introduction to Elements</BridgeHead> 
<Para>By far the vast majority of objects (apart from text) that authors
encounter when traversing a document are Element nodes. </Para> </Preface> 
<Part> <Title><Anchor Id="SDK273"/>Element Interfaces</Title>
<Chapter Label="1"> <Title><Anchor Id="SDK274"/>Elements and
Attributes</Title>
<Sect1> <Title><Anchor Id="SDK279"/>Introduction to Attributes
</Title>
<Para>Elements may have attributes associated with them; since the Element
interface inherits from Node, the generic Node interface method 
<Function>getAttributes</Function> may be used to retrieve the set of all
attributes for an element. </Para>
<Para>There are methods on the Element interface to retrieve either an Attr
object by name or an attribute value by name. In XML, where an attribute value
may contain entity references, an Attr object should be retrieved to examine
the possibly fairly complex sub-tree representing the attribute value. On the
other hand, in HTML, where all attributes have simple string values, methods to
directly access an attribute value can safely be used as a convenience. </Para>

<Para>Before you can access an Attribute, you must first gain access to the
associated Element.</Para> </Sect1>
<Sect1> <Title><Anchor Id="SDK378"/>Setting the Attribute
Values</Title>
<Para>Attr objects inherit the Node interface, but since they are not actually
child nodes of the element they describe, the DOM does not consider them part
of the document tree. Thus, the Node attributes parentNode, previousSibling,
and nextSibling have a null value for Attr objects. The DOM takes the view that
attributes are properties of elements rather than having a separate identity
from the elements they are associated with; this should make it more efficient
to implement such features as default attributes associated with all elements
of a given type. Furthermore, Attr nodes may not be immediate children of a
DocumentFragment. However, they can be associated with Element nodes contained
within a DocumentFragment. In short, users and implementors of the DOM need to
be aware that Attr nodes have some things in common with other objects
inheriting the Node interface, but they also are quite distinct. </Para> 
<Para>The attribute's effective value is determined as follows:</Para> 
<ItemizedList Mark="Bullet"> <ListItem> 
<Para>If this attribute has been explicitly assigned any value, that value is
the attribute's effective value</Para></ListItem> <ListItem> 
<Para>Otherwise, if there is a declaration for this attribute, and that
declaration includes a default value, then that default value is the
attribute's effective value</Para></ListItem> <ListItem> 
<Para>Otherwise, the attribute does not exist on this element in the structure
model until it has been explicitly added.</Para></ListItem> </ItemizedList> 
<Para>In XML, where the value of an attribute can contain entity references,
the child nodes of the Attr node provide a representation in which entity
references are not expanded. These child nodes may be either Text or
EntityReference nodes. Because the attribute type may be unknown, there are no
tokenized attribute values. </Para> 
<Para>The following topics describe DOM attributes: </Para> 
<ItemizedList Mark="Bullet"> <ListItem> 
<Para> 
<ULink xlink:type="simple" xlink:show="replace"
 xlink:href="http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-637646024">Interface
Attr</ULink> </Para></ListItem> <ListItem> 
<Para> 
<ULink xlink:type="simple" xlink:show="new"
 xlink:href="http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-745549614">
Interface Element</ULink> </Para></ListItem> </ItemizedList> </Sect1></Chapter>

<Chapter Label="26" Role="funcref"> <Title><Anchor
Id="SDK48"/>DOM Level 1 Core: Element Functions</Title>
<RefEntry> <RefMeta><RefEntryTitle> <Anchor Id="setAttribute"/>setAttribute 
</RefEntryTitle></RefMeta> <RefNameDiv> <RefName>setAttribute</RefName> 
<RefPurpose>Sets the Attributes on the associated Element object</RefPurpose> 
<RefClass>Fundamental</RefClass> </RefNameDiv> <RefSynopsisDiv> <Title>
<Anchor Id="SDK85"/>Syntax</Title>
<RefSect2> <Title>OMG IDL</Title>
<Synopsis><Type>void</Type> <Function>setAttribute</Function> (in 
<Type>DOMString</Type> <Parameter>name</Parameter>, in <Type>DOMString</Type> 
<Parameter>value</Parameter>) raises (<ErrorType>DOMException</ErrorType>);
</Synopsis></RefSect2><RefSect2> <Title><Anchor Id="SDK86"/>Java</Title>
<Synopsis><Type>public void</Type> <Function>setAttribute</Function> (
<Type>String</Type> <Parameter>name</Parameter>, <Type>String</Type> 
<Parameter>value</Parameter>) throws (<ErrorType>DOMException</ErrorType>); 
</Synopsis> </RefSect2><RefSect2> <Title><Anchor Id="SDK87"/>ECMA Script
</Title>
<Synopsis> <Function>setAttribute</Function> (<Parameter>name, value
</Parameter>)</Synopsis> </RefSect2></RefSynopsisDiv><RefSect1> <Title>
<Anchor Id="SDK88"/>Parameters</Title>
<VariableList> <VarListEntry><Term> <Parameter>name</Parameter></Term> 
<ListItem> 
<Para>(IN) The name of the attribute to create or alter.</Para> </ListItem>
</VarListEntry><VarListEntry><Term> <Parameter>value</Parameter></Term> 
<ListItem> 
<Para>(IN) Value to set in string form</Para> </ListItem></VarListEntry>
</VariableList></RefSect1><RefSect1> <Title><Anchor Id="SDK89"/>Exceptions
</Title>
<Para>These are the applicable exceptions. </Para> <InformalTable> <TGroup cols="2"> 
<colspec colname="1" colnum="1" colwidth="0.630in"/> 
<colspec colname="2" colnum="2" colwidth="5.203in"/> <tbody>
<row> <entry colname="1">
<Para>INVALID_CHARACTER_ERR</Para></entry> <entry colname="2"> 
<Para>Raised if the specified name contains an invalid character.</Para>
</entry></row> <row> <entry colname="1">
<Para> NO_MODIFICATION_ALLOWED_ERR</Para></entry> <entry colname="2">
<Para>Raised if this node is readonly.</Para></entry> </row> 
</tbody>
</TGroup></InformalTable></RefSect1><RefSect1> <Title><Anchor
Id="SDK90"/>Remarks</Title>
<Para> <Function>setAttribute</Function> adds a new attribute. If an attribute
with that name is already present in the element, its value is changed to be
that of the value parameter. This value is a simple string, it is not parsed as
it is being set. So any markup (such as syntax to be recognized as an entity
reference) is treated as literal text, and needs to be appropriately escaped by
the implementation when it is written out.</Para>
<Para> In order to assign an attribute value that contains entity references,
the user must create an Attr node plus any Text and EntityReference nodes,
build the appropriate subtree, and use <Function>setAttributeNode</Function> to
assign it as the value of an attribute. </Para> </RefSect1></RefEntry>
</Chapter></Part></Book>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - DOCUMENT</title>
</head>
<body onload="parent.loadComplete()" id="TEST-BODY"> 
<form id="form1" accept-charset="US-ASCII" action="./files/getData.pl" enctype="application/x-www-form-urlencoded" method="post">
<p>
<textarea name="text1" cols="20" rows="7"></textarea>
<input type="submit" name="submit1" value="Submit" />
<input type="reset" name="submit2" value="Reset" />
</p>
</form>
<p>
<map name="mapid" id="mapid">
<area tabindex="10" accesskey="a" shape="rect" alt="Domain" coords="0,2,45,45" href="./files/dletter.html" title="Domain1" />
<area tabindex="10" accesskey="a" shape="rect" alt="Domain" coords="0,2,45,45" href="./files/dletter.html" title="Domain2" />
</map>
</p>
<p>
<img id="IMAGE-1" src="./pix/dts.gif" alt="DTS IMAGE LOGO" longdesc="./files/desc.html" usemap="#DTS-MAP" width="115"/>
</p>
<p>
<object data="./pix/line.gif" codetype="image/gif" height="10">
<applet alt="Applet Number 1" code="applet1.class" width="10" height="10"></applet>
</object>
<object data="./pix/logo.gif" type="image/gif">
<applet alt="Applet Number 2" code="applet2.class" width="10" height="10"></applet>
</object>
</p>
<p>
<a id="Anchor" dir="ltr" href="./pix/submit.gif" accesskey="g" type="image/gif" coords="0,0,100,100" shape="rect" rel="GLOSSARY" rev="STYLESHEET" hreflang="en" charset="US-ASCII" tabindex="22" name="Anchor">View Submit Button</a>
</p>
</body>
</html>

<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
            <its:domainRule selector="/h:html/h:body"
                domainPointer="/h:html/h:head/h:meta[@name='keywords']/@content"/>
        </its:rules>

<doc>
    <head>
        <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
            <its:domainRule selector="/doc/body"
                domainPointer="/doc/head/meta[@name='DC.subject']/@content"
            />
        </its:rules>
        <meta name="DC.subject" content="automotive"/>
    </head>
    <body>
        <p>The new car from XYZ - buy it now!</p>
    </body>
</doc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
            <its:domainRule selector="/h:html/h:body"
                domainPointer="/h:html/h:head/h:meta[@name='keywords']/@content"
                domainMapping="automotive auto, medical medicine, 'criminal law' law, 'property law' law"/>
        </its:rules>

<doc>
    <head>
        <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
            <its:domainRule selector="/doc/body"
                domainPointer="/doc/head/meta[@name='DC.subject']/@content"
                domainMapping="automotive auto, 'criminal law' law, 'property law' law"
            />
        </its:rules>
        <meta name="DC.subject" content="automotive"/>
    </head>
    <body>
        <p>The new car from XYZ - buy it now!</p>
    </body>
</doc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:param name="domainParam">keywords</its:param>
<its:domainRule selector="/h:html/h:body" domainPointer="/h:html/h:head/h:meta[@name=$domainParam]/@content" domainMapping="'sports law' law, 'labor law' law, 'contract law' law, 'competition law' law,'tort law' law"/>
</its:rules>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
            <its:domainRule selector="/text/body"
                domainPointer="/text/head/meta[@name='DC.subject']/@content"
                domainMapping="'sports law' law, 'labor law' law, 'contract law' law, 'competition law' law,'tort law' law"  
	 />
        </its:rules>
<text>
    <head>
       <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="domain4xmlrules.xml"/>
        <meta name="DC.subject" content="sports law"/>
    </head>
    <body>
	<p>Sports law is an umbrella term used to describe the legal issues at work in the world of both amateur and professional sports.</p>
	<p>Sports law overlaps substantially with labor law, contract law, competition or antitrust law, and tort law.</p>
    </body>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
            <its:domainRule selector="/text/body"
                domainPointer="/text/head/meta[@name='DC.subject']/@content"
                domainMapping="'sports law' law,'labor law' law,'contract law' law,'competition law' law,'tort law' law"
            />
        </its:rules>
<text>
<head>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="domain5xmlrules.xml"/>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:domainRule selector="/text/body/span" domainPointer="/text/head/meta[@name='DC.type']/@content" domainMapping="'sports law' amateur"/>
</its:rules>
<meta name="DC.subject" content="sports law"/>
<meta name="DC.type" content="sports law"/>
</head>
<body>
<p>
Sports law is an umbrella term used to describe the legal issues at work in the world of both amateur and professional sports.
Sports law overlaps substantially with labor law, contract law, competition or antitrust law, and tort law.
</p>
<span id="amateursports">Unlike intercollegiate sports, international amateur sports are run by a variety of organizations. </span>
</body>
</text>
<text>
<head>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="domainParam">DC.type</its:param>
<its:domainRule selector="/text/body/p" domainPointer="/text/head/meta[@name=$domainParam]/@content" domainMapping="'Poetry literature' poetry"/>
</its:rules>
<meta name="DC.type" content="Poetry literature"/>
</head>
<body>
<p>
<span>
A poem is a composition written in verse (although verse has also been used for epic and dramatic fiction).
</span>
<span>
Poems make use of the aesthetic qualities of language to suggest differential meanings and to evoke emotive responses. Poems rely heavily on imagery and metaphor; they may have a rhythmic structure based on patterns of stresses (metric feet) or on patterns of different-length syllables (as in classical prosody); and they may or may not utilize rhyme.
</span>
</p>
</body>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="domainParam">DC.type</its:param>
<its:domainRule selector="/text/body/p" domainPointer="/text/head/meta[@name=$domainParam]/@content" domainMapping="'Poetry literature' poetry"/>
</its:rules>
<text>
<head>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="domain7xmlrules.xml"/>
<meta name="DC.type" content="Poetry literature"/>
</head>
<body>
<p>
<span>
A poem is a composition written in verse (although verse has also been used for epic and dramatic fiction).
</span>
<span>
Poems make use of the aesthetic qualities of language to suggest differential meanings and to evoke emotive responses. Poems rely heavily on imagery and metaphor; they may have a rhythmic structure based on patterns of stresses (metric feet) or on patterns of different-length syllables (as in classical prosody); and they may or may not utilize rhyme.
</span>
</p>
</body>
</text>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<Button xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:minHeight="48dip"
        android:textColor="#FF222222"
        android:textSize="14sp"
        android:background="@drawable/action_bar_button"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <LinearLayout android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal"
                  android:padding="@dimen/doorhanger_padding">

        <ImageView android:id="@+id/doorhanger_icon"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:paddingRight="@dimen/doorhanger_padding"
                   android:visibility="gone"/>

        <TextView android:id="@+id/doorhanger_title"
                  android:focusable="true"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:textAppearance="@style/TextAppearance.Widget.DoorHanger.Medium"/>

    </LinearLayout>

    <LinearLayout android:id="@+id/doorhanger_inputs"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:orientation="vertical"
              android:gravity="right"
              android:visibility="gone"/>

    <CheckBox android:id="@+id/doorhanger_checkbox"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:checked="true"
              android:textColor="@color/doorhanger_text"
              android:visibility="gone"/>

    <View android:id="@+id/divider_choices"
          android:layout_width="match_parent"
          android:layout_height="1dp"
          android:visibility="gone"/>

    <LinearLayout android:id="@+id/doorhanger_choices"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal"
                  android:visibility="gone"/>

    <View android:id="@+id/divider_doorhanger"
          android:layout_width="match_parent"
          android:layout_height="1dp"
          android:background="#FFFF9500"
          android:visibility="gone"/>

</merge>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
  <!ENTITY % downloadDTD SYSTEM "chrome://webapprt/locale/downloads/downloads.dtd" >
  %downloadDTD;
]>

<bindings id="downloadBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="download-base" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <resources>
      <stylesheet src="chrome://webapprt/skin/downloads/downloads.css"/>
    </resources>
    <implementation>
      <property name="paused">
        <getter>
        <![CDATA[
          return parseInt(this.getAttribute("state")) == Components.interfaces.nsIDownloadManager.DOWNLOAD_PAUSED;
        ]]>
        </getter>
      </property>
      <property name="openable">
        <getter>
        <![CDATA[
          return parseInt(this.getAttribute("state")) == Components.interfaces.nsIDownloadManager.DOWNLOAD_FINISHED;
        ]]>
        </getter>
      </property>
      <property name="inProgress">
        <getter>
        <![CDATA[
          var state = parseInt(this.getAttribute("state"));
          const dl = Components.interfaces.nsIDownloadManager;
          return state == dl.DOWNLOAD_NOTSTARTED || 
                 state == dl.DOWNLOAD_QUEUED ||
                 state == dl.DOWNLOAD_DOWNLOADING || 
                 state == dl.DOWNLOAD_PAUSED ||
                 state == dl.DOWNLOAD_SCANNING;
        ]]>
        </getter>
      </property>
      <property name="removable">
        <getter>
        <![CDATA[
          var state = parseInt(this.getAttribute("state"));
          const dl = Components.interfaces.nsIDownloadManager;
          return state == dl.DOWNLOAD_FINISHED || 
                 state == dl.DOWNLOAD_CANCELED || 
                 state == dl.DOWNLOAD_BLOCKED_PARENTAL || 
                 state == dl.DOWNLOAD_BLOCKED_POLICY || 
                 state == dl.DOWNLOAD_DIRTY || 
                 state == dl.DOWNLOAD_FAILED;
        ]]>
        </getter>
      </property>
      <property name="buttons">
        <getter>
        <![CDATA[
          var startEl = document.getAnonymousNodes(this);
          if (!startEl.length) {
            startEl = [this];
          }

          const XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          return startEl[0].getElementsByTagNameNS(XULNS, "button");
        ]]>
        </getter>
      </property>
    </implementation>
  </binding>

  <binding id="download-starting" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon" validate="always"
                     xbl:inherits="src=image"/>
        </xul:vbox>
        <xul:vbox pack="start" flex="1">
          <xul:label xbl:inherits="value=target,tooltiptext=target"
                     crop="center" class="name"/>
          <xul:progressmeter mode="normal" value="0" flex="1"
                             anonid="progressmeter"/>
          <xul:label value="&starting.label;" class="status"/>
          <xul:spacer flex="1"/>
        </xul:vbox>
        <xul:vbox pack="center">
          <xul:button class="cancel mini-button" tooltiptext="&cmd.cancel.label;"
                      cmd="cmd_cancel" ondblclick="event.stopPropagation();"
                      oncommand="gDownloadList.performCommand('cmd_cancel', this);"/>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="download-downloading" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1" class="downloadContentBox">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon" validate="always"
                     xbl:inherits="src=image"/>
        </xul:vbox>
        <xul:vbox flex="1">
          <xul:label xbl:inherits="value=target,tooltiptext=target"
                       crop="center" flex="2" class="name"/>
          <xul:hbox>
            <xul:vbox flex="1">
              <xul:progressmeter mode="normal" value="0" flex="1"
                                 anonid="progressmeter"
                                 xbl:inherits="value=progress,mode=progressmode"/>
            </xul:vbox>
            <xul:button class="pause mini-button" tooltiptext="&cmd.pause.label;"
                        cmd="cmd_pause" ondblclick="event.stopPropagation();"
                        oncommand="gDownloadList.performCommand('cmd_pause', this);"/>
            <xul:button class="cancel mini-button" tooltiptext="&cmd.cancel.label;"
                        cmd="cmd_cancel" ondblclick="event.stopPropagation();"
                        oncommand="gDownloadList.performCommand('cmd_cancel', this);"/>
          </xul:hbox>
          <xul:label xbl:inherits="value=status,tooltiptext=statusTip" flex="1"
                     crop="right" class="status"/>
          <xul:spacer flex="1"/>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="download-paused" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon" validate="always"
                     xbl:inherits="src=image"/>
        </xul:vbox>
        <xul:vbox flex="1">
          <xul:label xbl:inherits="value=target,tooltiptext=target"
                     crop="center" flex="2" class="name"/>
          <xul:hbox>
            <xul:vbox flex="1">
              <xul:progressmeter mode="normal" value="0" flex="1"
                                 anonid="progressmeter"
                                 xbl:inherits="value=progress,mode=progressmode"/>
            </xul:vbox>
            <xul:button class="resume mini-button" tooltiptext="&cmd.resume.label;"
                        cmd="cmd_resume" ondblclick="event.stopPropagation();"
                        oncommand="gDownloadList.performCommand('cmd_resume', this);"/>
            <xul:button class="cancel mini-button" tooltiptext="&cmd.cancel.label;"
                        cmd="cmd_cancel" ondblclick="event.stopPropagation();"
                        oncommand="gDownloadList.performCommand('cmd_cancel', this);"/>
          </xul:hbox>
          <xul:label xbl:inherits="value=status,tooltiptext=statusTip" flex="1"
                     crop="right" class="status"/>
          <xul:spacer flex="1"/>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="download-done" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon" validate="always"
                     xbl:inherits="src=image"/>
        </xul:vbox>
        <xul:vbox pack="start" flex="1">
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=target,tooltiptext=target"
                       crop="center" flex="1" class="name"/>
            <xul:label xbl:inherits="value=dateTime,tooltiptext=dateTimeTip"
                       class="dateTime"/>
          </xul:hbox>
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=status,tooltiptext=statusTip"
                       crop="end" flex="1" class="status"/>
          </xul:hbox>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="download-canceled" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon" validate="always"
                     xbl:inherits="src=image"/>
        </xul:vbox>
        <xul:vbox pack="start" flex="1">
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=target,tooltiptext=target"
                       crop="center" flex="1" class="name"/>
            <xul:label xbl:inherits="value=dateTime,tooltiptext=dateTimeTip"
                       class="dateTime"/>
          </xul:hbox>
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=status,tooltiptext=statusTip"
                       crop="end" flex="1" class="status"/>
            <xul:button class="retry mini-button" tooltiptext="&cmd.retry.label;"
                        cmd="cmd_retry" ondblclick="event.stopPropagation();"
                        oncommand="gDownloadList.performCommand('cmd_retry', this);"/>
          </xul:hbox>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="download-failed" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon" validate="always"
                     xbl:inherits="src=image"/>
        </xul:vbox>
        <xul:vbox pack="start" flex="1">
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=target,tooltiptext=target"
                       crop="center" flex="1" class="name"/>
            <xul:label xbl:inherits="value=dateTime,tooltiptext=dateTimeTip"
                       class="dateTime"/>
          </xul:hbox>
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=status,tooltiptext=statusTip"
                       crop="end" flex="1" class="status"/>
            <xul:button class="retry mini-button" tooltiptext="&cmd.retry.label;"
                        cmd="cmd_retry" ondblclick="event.stopPropagation();"
                        oncommand="gDownloadList.performCommand('cmd_retry', this);"/>
          </xul:hbox>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="download-blocked-parental" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon blockedIcon"/>
        </xul:vbox>
        <xul:vbox pack="start" flex="1">
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=target,tooltiptext=target"
                       crop="center" flex="1" class="name"/>
            <xul:label xbl:inherits="value=dateTime,tooltiptext=dateTimeTip"
                       class="dateTime"/>
          </xul:hbox>
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=status,tooltiptext=statusTip"
                       crop="end" flex="1" class="status"/>
          </xul:hbox>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="download-blocked-policy" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon blockedIcon"/>
        </xul:vbox>
        <xul:vbox pack="start" flex="1">
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=target,tooltiptext=target"
                       crop="center" flex="1" class="name"/>
            <xul:label xbl:inherits="value=dateTime,tooltiptext=dateTimeTip"
                       class="dateTime"/>
          </xul:hbox>
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=status,tooltiptext=statusTip"
                       crop="end" flex="1" class="status"/>
          </xul:hbox>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="download-scanning" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon" validate="always"
                     xbl:inherits="src=image"/>
        </xul:vbox>
        <xul:vbox pack="start" flex="1">
          <xul:label xbl:inherits="value=target,tooltiptext=target"
                       crop="center" flex="2" class="name"/>
          <xul:hbox>
            <xul:vbox flex="1">
              <xul:progressmeter mode="undetermined" flex="1" />
            </xul:vbox>
          </xul:hbox>
          <xul:label value="&scanning.label;" class="status"/>
          <xul:spacer flex="1"/>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="download-dirty" extends="chrome://webapprt/content/downloads/download.xml#download-base">
    <content>
      <xul:hbox flex="1">
        <xul:vbox pack="center">
          <xul:image class="downloadTypeIcon blockedIcon"/>
        </xul:vbox>
        <xul:vbox pack="start" flex="1">
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=target,tooltiptext=target"
                       crop="center" flex="1" class="name"/>
            <xul:label xbl:inherits="value=dateTime,tooltiptext=dateTimeTip"
                       class="dateTime"/>
          </xul:hbox>
          <xul:hbox align="center" flex="1">
            <xul:label xbl:inherits="value=status,tooltiptext=statusTip"
                       crop="end" flex="1" class="status"/>
          </xul:hbox>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="dua"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>DuckDuckGo</ShortName>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMTgwMTE3NDA3MjA2ODExQTUzMUNFODI2QjhFRURFRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4REU3ODU4OUE4OTMxMUUzODAxMUE0MzZGQUQ1RTAwNyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4REU3ODU4OEE4OTMxMUUzODAxMUE0MzZGQUQ1RTAwNyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDg4MDExNzQwNzIwNjgxMUE1MzFDRTgyNkI4RUVERUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMUE1MzFDRTgyNkI4RUVERUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5AWogMAAAGb0lEQVR42pxXbUyTVxQ+7WpboJCKCiggxcmXjKZuyXRbFtv4hXFq69yyZHHYbGa/FiDuxz5+OJIl+4nbjy3zh4w5f7gfUjBGHX6URY3iFju+pDCgCmUgH5ZiKVjad+e8733btx9Q4knu+3Hf+57nueece+65MlihuA8XafFmxrYDm4E1qThYa8Nmy73Q71mJXlmyASOWIiPeqnDkMUm3h4FJhQhpw28c2PD6fV5Tv/2FCAxbirT4sR4fRWAXKaTZoVLXEmR1zErV2HSs+xcOoDa/KbFFEhIYNhcZ8EsTU0JgVlRgZ/2iG3QSEBdrbTTzfFu/Y1iwXENYBwcW6k9K4DGBANxk5jy10dZfi32k7CQ24wpDhsxeh//a8V+yYg1zm2ljDIkoAo8QXBYBt6LpbOSGhf2fHMvfLmAvPhmBhe528N+7BiGfNxkR3vwywS1kDQ++mwokJMIEHh3io3xIBCdfM0sYUo+fhLX7P4zSTOBTP3zBE0kiBGYCCQlshQXNQky8JI6qKV3zE7LZTmZHlj8TuIwtNc+YGyYvnQO/3w+yvM2gUqlAplRB2tv7QZ6WAUHPJISwLSE5qK8S71+iPjW5Ed9zTjmnm8MWcB0sNrLZOnQtfVvxvUES/aAsLIV1X/0IiqzcJadJ1nh2vWlZd6BuK+p+wJasCd/tPIGhg8VNzEQmNvim+FcgPRM2nLJB2trspJE39vVRmO9qX26IVL+tsKXPIh88UCyuXQd22DmOj/awBN56hwe/3zEGjb93woPOsTitF670w4m66zBY/t6yBEk3YbC4MBO2gh7wA0kjdhh4H3GRn4I5wlJ39EzA8Q8qEio+XFnENz5l3zsDz4ceLsXBSBiov5G5wSxHrB0Mz4b3Ko7PopEG7COBjz7xQu/QRELN1d+1wP2uEdDstECsjphWxbDoeYccrwZsnk0X+1zsOWp0YDEQBjlS+xs03+hOSOLGvQH+m7KwDJIwMDAsHk/BCanSziYbu8PBs4nx8HNp4ToE6YGjB16NI3D19MfCw3gvjyNXhyB1i59v8pQQeG+nw1xPirhp0RhK3UYFcNIokexmTFSTo+D1eiEjIwPOfJs4yLj5DlifNgPw/BEE1bdgw2djoFwfiBozP6iGuW6egBYkrlVE48dL6ui/YQJxgoChkU+B8/0ZlduV61m2nJfDs7/TYOa2BhafKqJJg0iAi1omnqg9nZRNuGF6ehry8vLi8INDlTwJYYaqyNJFMDK3T5hxrHgYlkCAEiEX2VYdsTuefMEPc250l16/5PqmmY6ezkr4TbF6MXb2DmYBHVrLRS7gk4JzX7GOS0CAZGGA1vXBOOXygvMQGtyLATcDudVj6OPU8Df1pnlQbQjwwTh5UYtuSA8TICyqE2i3JRe0sUxoBCFB1MQCpbgHeDdkZmZGFxNqPYz+ugtkwTbQlPsh/TUfP2NR/OiW2b/SwItxIJFGhkXSpmDbLhUN1aWX+7b27it2SSodIQ4m3XwgxhIQhXy9hL9jxYUYDsRoYO82OXa40Aq0BxgeVhZTGq6lAJE29YiwEhJJSsU2iB2/TKtlGJSO7YQtZ3rqWKKqL7vSR2nSFpvAZp0dwrY7Pw7Opx1hApo3dobHDOeroflQFnSXaxIlQRvTXc8WQJ24CgA/2Hv2lpArzHj/BodbgZPppLV/8PEABAIBuDPaCi2DZ2FNSjZsz94NGqUG7ryfIxSz+WoheS2EYEuXLzryZZyV183xOm1lV532MAG2LKxsBZxEcBfbu2+KJMgNs7OzkQLEPw7nOs+CNh0XEwMWZSYjKsEKJRknM7PC1sNKPmEliQ/lV50eScHQgD4SCxSbkJBGYWpqKgpIuSpp0NG/JqZLDDwTw4omwEg4cLCVZSkiUYN9FrxbVk24XbQU89M3RY5C696ELEUF6LW74cT4TthzeQpe7p+DzX1zFNgW9m8N00VBaCWMpAeTrj0lBi5SnjvQnrUVrU773bt3jTllmVV3/ms17il4V7dGHSnTgrMzrodHtlEZ3/jKH05H5+4SI2qvZy70YL+J+ld8NEMFWmY2s3jYQFKNZedvHVKsXivuF1pJoNp9He1tg59/5JIJRYdR4gYrTmDlRzOpdNBMYk5FafrXhRjIyQVltlAp+wd6wfdPOwQjhxX+dKRvdb7Y4TSOyK4SvnjlIsdzXWyWI3fJ2PFcf83pWone/wUYANRs/BQLVeSGAAAAAElFTkSuQmCC</Image>
<Url type="application/x-suggestions+json" method="GET" template="https://ac.duckduckgo.com/ac/">
  <Param name="q" value="{searchTerms}"/>
  <Param name="type" value="list"/>
</Url>
<!-- this is effectively x-moz-phonesearch, but search service expects a text/html entry -->
<Url type="text/html" method="GET" template="https://duckduckgo.com/">
  <Param name="q" value="{searchTerms}" />
  <Param name="t" value="fpas" />
</Url>
<Url type="application/x-moz-tabletsearch" method="GET" template="https://duckduckgo.com/">
  <Param name="q" value="{searchTerms}" />
  <Param name="t" value="ftas" />
</Url>
<SearchForm>https://duckduckgo.com</SearchForm>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="dyo"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2012 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 32275 $"/>
		<generation date="$Date: 2012-08-28 14:56:06 -0700 (Tue, 28 Aug 2012) $"/>
		<language type="dz"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Tibt</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>eBay</ShortName>
<Description>eBay - Online auctions</Description>
<InputEncoding>ISO-8859-1</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAAAAAB6AQAAJgAAACAgAAAAAAAAQgMAAKABAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIBgAAAB/z/2EAAAFBSURBVDjLtZPdK0MBGIf3J5Babhx3rinFBWuipaUskX9DYvkopqgV90q5UJpyp0OKrUWM2VrRsS9D0zZKHGaOnW1nj4vtypVtPPe/533r9746QAAOAJXfo5Yzgg44pHrcugon/6Sgo0b+XuAOZ2iZiVQmyPoDpIwmUkYTzqM7GsdDdC7F6Lbf8pzOkfWOouzqeZem2b+2AqAV8zjD8yVBqqcf2b7C66yNiMGMfixIQSvi8Mp0LEbR5ADq1QSKWM+Gx0RC9nOZ2GLzwlIWdPWiuNzk4w/EpThNkyEAXKEP2ud8KGId2sspilhPMrmNwzfCuqePr/xbSfC5I/I0MMSj2YJ3z49gDdO2cEOrLUowJpE9G0QRG1ClKbR0EIdvmOPYcnUtnN+vsnZiQC1k/qnGagQ1n3LNzySUJZVskitnmr8BlQG7T2hvgxsAAAAASUVORK5CYIKJUE5HDQoaCgAAAA1JSERSAAAAIAAAACAIBgAAAHN6evQAAAMJSURBVFjD7ZddSFNhGMeHXXQTZFFCWfR1pRhUECQlBdWVToo+6KYu1KigtDASG5qUfZgFZvahEDosECPDktKZS1FL+1DRnEvdUptjug91X2dnZzv/3vO6OZbWnR4v9sADL+fs7P97/s/znu2VAJD4UkpSSdKG+QubTyPBr+sXz8XCR64fIAHihVTis0SsUAoAVhEBrBKIHCGAEMB/ARi3F5LkbpS2WMRzYEEBXC2tsD6T03R9agsCGLNyqPw6CXmrBT06JvhbPHZwmkdwtR0B138PPKOHgzXD5jLAy3tmibo4K9weZwDAazJj/FQKRnfugfHMeRiTz0K3Ixam1HQKcPC+Fisu9NK1P08Uj4DleHgMdXC+WQ7nu3UEOhFMfTQcVUvQ1H4IN2sj8H2k7K+2TqCc3GseyA8AmDOzMBq7D9bS8sAr6nEJdNt3UbHVF1XQGtmZew8bTPT6tWoD3KpsUvlR8NxUoEICMvl6KQo+xqCwcRs4T8Ax5c8bFExjbAgAjO7aS8VsLypgq3g5nWStjztAhWRVhqAqeB6IuKTClkw1eNYEbrCQQBwD8yGGOsAooogLYejQPKBi7UPF9DkH+ezd+o141ZkUPAOC+L9SAMivNc7q46YMNSLTe4n1kaQF4XD3ZIDTPgU3XEYciKcAHrsGJS1xKFBGgyVzouiT4VbdGhjt/cEA5isyKsaz7jl3we7bg7Rqf6j0LoSldON4wWcqJDgQNGTN++l13vELA+MK6kKd6iryFOvxtidt9i5gO7owdjKJQliflNAU1pas6xQgnAzg1ux+lJEdILixNr0Pq9JUUA8NwVG9DM73G0jlcnh+V4BpjIWzJmIGQIjnXw5TiDuKSEwxurm3ITc8DNO51BnrLbIcsrW0dNA6RxgUKU1UdGVqLy5X6qGzTLvlnewiBZyGs3Yz6X8UeaYI3olvZDhzwLumZ+eHvooCCC0Q5VUsb4unwycM4YIDqA01tPqmgbzQr2EIYPECiPm33LYoDiZSsY9moh9O/Znoa4d9HkXtPg2pX/cPKCoRQ+ocZa4AAAAASUVORK5CYII=</Image>
<Image width="65" height="26">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAYAAADovjFxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQ0MDYxRTZDQjUyNTExRTNCNzdEOTU4N0NCMjI3MEFDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ0MDYxRTZEQjUyNTExRTNCNzdEOTU4N0NCMjI3MEFDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDQwNjFFNkFCNTI1MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDQwNjFFNkJCNTI1MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7+A48PAAAMr0lEQVR42txYaZBVxRU+3ffet86+z4jMhC2gMzhixShKXKJJaQRFNHEBkhjUiBisWDEpjaWJEo0CP1DcEjUGiyRCLKIghahUjKCowRHZBkUdhhEYmO29edtduvN13/uGYRHxhymTW3Xu2re7zznf+c7pZtuogogYGZQlkxzcGsRCBhHnJCGUSlIJl7S7sI5On/Ic9ZWOIur5EN9NCo4fQ+4J7j+AnE1HODgjMnBiuJKU5AhcbDykq+jps6+i6aNeoVS/6X/nlm5D0oUIX5iaT4gwI4rieRlzaQUJqho0BpN0zIdk/jUSJ93n5x77zBiN6dtJS/8xjcjLEsUq/Yn5RzWkLpDGQ/9ViqMxfYH5/dePYzKCBa98Eiuh87q20m0v3kxUBH25kf+cGmyvwf+ZRt7z9JU++DG3BBz3kkVzti+msZueJSpDWAjvM7AGw8EASsRX3ACfbQQVj65L0nGgD8SxiXCfQEyqY+GrtxNluonCRUd0s/K+aXwZ02VfihHMwQMohcFWxEQUcR8dyq1QDeXMCBlWDl93G32JnTvQ8sz+j+jytx+lJefcSbTnvcGhwZVNDO4ToScItEPDISUQsBy143X7F1B2GKRScSEEnhD78e0DRYEqBnOB/fPsdKx2V7/lESrwsymDASVliJnherOm9gZWXPQ9Fo02MsvSWUK1VKgwUukWt69vWfbTj+ff9tbC5NLmaSRjZYyyvfmJZ4NBmnKu/KXnycm4jyloKHA5npQwzuuIkj+j9R/lEXXnJ5Owr0cn38HAX9O9Ma57ZcJRjdpwWjaS8bnrQvEpJhlnWOhdSJGwneS1n2sAqVTidRGraD4eWDzOS0wOOwrKkVlS8aPwiPpHKRYPM8Mgmc2RTKdddJ9g3ChlsRjjhQXNRkV5c1dl2fXN7/37iivXPv7a4ovmGJTp8WOAqAuXG4GAh8g7KNhEgBIGD0wQjCag3TT8czE+9RrM8w0gxQ0w18NywLc6XwIBsh/XUpXY8K0elp59qkfTe0zetypU0lAr/NQuhPOa7WQX8aMwnUJAxCyYFzGLf6AMGw67hChPUKwoflmkccxTFAqHGTzutnWsyG58/1x706bK3MZ3a5zNW6rsTZsnuZ92rpeeS6ywuJZG1f9zVtsyi/Z+uIVC8fwY4yEPKcchQv4Qtdh4pMgKg7GqsMnOhE5P5JEOj3wLwfgWsYiVdmNK37OQSx72kylT3n8T0DwXPVXhTQ3joSrUJhdKxjZ4ftItPT+XaBjqpqkbTwI1Rcgs+L3yhTwKCkyDD7HM2BUewl5Ij3p7uiZyycyoObz+r6SUQwe5XfueSn20+SIv1b0GL3oZcQfX/W5i3wvZ1pbTRFfvWoas0F05lL4Z771v7M61iNjy/DhhDTeS00yTrgP031DoUAJwrYVuMzDD6YP8MpJk0YJ9brlip9kHUonsAipOx80a3PdBwM7gA0krIafAWHvSsDTHYGc4yZ4cY1ohg0dqLTM87bMykpobDHU/YyjKMEvXy7Sm+3PLuVFeMYPH44Zq4XX1tNnt268JQcFo4ylknXAChcaeRNbor1NEPceKyWndfKnM2SIHmuMFxoxx3t5pJMzBmeFJcMEzjiMP53LFQsJbhOk8M/Au3P3Tv3RcWuUm6VfhkDgZPm3C2+P8UBDKx6BBzF6oqPCCPtl8Fgw23MusLvOyrzrM1O1DZuF9/BAWZEL/qlDQYJnxK2WQ2rNm/2w7qjiiqOACGcSf159eGamDAUaPILwnHokQjwKq6lpcqA3CK6o7ZSLZpuYF0xfVWLlzgSJn0Kh3aSKEO0CE/qSZyrjSr1VVwEq6d6B5rJ02fXLJpdPX373diFKLaYY3wUs5hAKMwc5Hi8twvRpXIIipEv0adHCK+tXGOKWS+iq85C0pHe9AgxGps8zIT0RAKxIpQ4DfPYhlFc5VCwQGFLkiu9XO2qsMONNk0cgwclAT2DaZ1ZWXIyNMEumM7zV2wJcqOxAwbo0Y5gEJNaT15hSXdi28m2e2Dlza/d842Z6kfMkoYDVmDPS3BY97dcktuXJVWV20U3UxSQg5FfF+DtYNFTojaH5gQZyLg4Clci5WE6OHunbLJiO9ppzHzkGWUGi413GzT6jmMgJjobwJCaPB8mJTpEITjGDbiRsNqKCmZLJIpEQrqOZrmuU6cA4xwEAFBF2l+oYAd9XkvAyV2r2KmQ3fBir+2UH/SCkPMP3BXe7XRsjUUl3tq9n7mh6cJTP0oPScQWMzlXJ3QhLoHJ5hbvDheMiI4D4+VEM+eY3Hoh8rQxlGuBJouN7OZR/T1lMZwSuYzwELlV8cmV5vM2eNqv2EMoLM5fqR/qo1J+zf/ziPFTzLiuIYMns4s4RC2orwvCwWOWorG0PLar49mdzULPU/+qvhh+R9pklL+pwnDir6avU5V05X1C2/2Syk49Pdea/L5+GRecgQG5lwQc7CR5I2jkbFTTgvCFaD7lCgrkS4nyRY6vkSo3CS9NFwj+tkH7PVtKU5KizikwVSMQPystR/kxs+UFyZUPZjXlI8XIMt2Z+yP/rwlXBTMxnFRSATjwaKFUyA9SXJ2dVGdrKXSkFUb9WeQS+POw3oyc4KOKgKETAaBtmmO0cVopCAFKnLaNv1fC9L+gZuyrRFeJqaC7ccr+oKyTT438XdxYfWeFJHFkgS9QAeT8t/yUGK8K0B8iYlZxXL+CRlbdMIV1hmdGZWZh6OyIJ5KhsgnSDyM2vdnPO2OQiYXPT1v6AfFScMOe46TLowt/FtZIFW8jo6yNu9h9yd7eRsa6X0+xvI7ek7waysWdBZOWTB5b1v3D152+KxFKs9UNtI+XsVTqp09pfR/kLaDLzoRwn7jYapC2ou6NhzatnmzaooDia1wYew8prQfpfMUtWsyhPo2lPMekneCPkl3HBAwhGi3Rb9T3NkCkWSphm9Niqt8SERuUhwT1dKTi4xy1ClsorqQEynq+sxK1n9AMVjIYR2PDy66WVnW8sEu3OXjUyst1uEWkRpNFvxSNNJK0IVJQ3Ky7TDW7ePYgtJuAeKcsYmccO4DUb43UFlC2Ix2PS4A5cLtMZuIQ0t3vCzkfFPG0EyJwYtL0QfEfBMlvIBrdYmTG2oIGV6zosqpxxUaeM0DMFdYkhKieTPQ0bshypOOLeaY7JsrQazImqWWpWNuC2KDAevfzngm8vsaL+EBctlo6zo1HDjuFaromYmLywbx+IFw3isdJxVXj0z3jR2q1kQbfBsh8p3fUDru4snrqs/u5uyXYPJToX+HFfQapTPV+FxnBI8TwXcV8MUvx2wjRtdMyy0cwkI6gVP5K1ItZjwBsxnMu7rITVA14moE6CY3AIUfdcnSsqnZdSKkmqlEvVBdue85L2cGXnUDWzpZEX/zYoIRYCgvJgeFZLo71tpbNw40Rox8nFeUFDLKssbQmVlC0U2ozOCwjaPxHQ+0cvrRGInbd0xY97Jv+4WNaMnUudmbUD034Yxv4/5LEU9ch7S3XkDgafTZR4tqlxgi4XgV5eYvYqh3kFtdSuUv99fN8gxSEPP+SSoZu3o0AgWWHPRxSrcrg6w0GyjlYJGI5q0Qvecl7rLYrGpnJvHK5I0EE45r3+FyLjbQkdYkZuKeTlFUCj1LqeW90ayqsrprKRkshGNNiGoanRxAwW83p7dMp1pEX29y8r2dTz9enRobsn4qUT9HcvRazrorxWWX2NwOZyb7EZXyCmwYSMGtZQ+GLsDyF4bsviTMNBLOZU1iOcN8wBi/1+w8kw8TYDX6wdNtw+rnHWkVp7Sfg70idKH5gZA2Jcvk+vgZhOdAVW2w9J/ivLSOzxNqh45dmK2oijOjrKfwLBkR7ZJuZ27HpGdex8xo3HUEOEyT3gREA2QlNwv3bQqP7TVO4qGIPmC2NL9K/G40mdwfycJA/VGTISEZHNSnkCa4cWwpWsZtBdGEAY/sCl1SHGNRZP1ps4gwq3GqjDMVQLgof3Ew56/8eqXbjj9Il8+FeBdEtfnTZ8sULVwy4hdrStIqJjlib9lo2KHwQ4ttw7bVNF1MKYU8VOiK1xh251C7SqBmVVYMAr55TUybUxtuDpZvYT1a7fDl6xBnZQIZGARI+XnbXlow+w9/L087E00ePUEptaGqVRDy5ARv93k4WFqZak2CrJ26hY6yurSPPLGjt4f9wtBaeqrhJDrfWX2BZVC8UCrpTDAO9BkiK4lWFGYFd6pUKBSZc5JLKKs1xFix7S99r9zaAMEBPd3gPYlSG1Q10WMwqdAhEj/rt5jsEXyVq3l/5MRmF40EW3HzRLMfjv5IWBpFBj1Foue5Ul7D/IZy1BqUS4s93A6Mhfkj/8IMADEmqUjWa9CogAAAABJRU5ErkJggg==</Image>
<Image width="130" height="52">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAYAAABGkOCVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE4OUIxMDhEQjUyNjExRTNCNzdEOTU4N0NCMjI3MEFDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE4OUIxMDhFQjUyNjExRTNCNzdEOTU4N0NCMjI3MEFDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTg5QjEwOEJCNTI2MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTg5QjEwOENCNTI2MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7A0O4yAAAeb0lEQVR42uxdCZRdVZU9977pz5WqpJLKHEISCggJWVFApEEN0IigIipCt0MzLFtFUFyyGAKIQoMDLYICIkIrihERZJIpEkRYzBLClEBSCQlJJWSo4Y9vuPf2Ofe9X/XHqkoIAmvVy3r1/3/jHc7ZZ5/hvbCVMA7KiwIOFpTwrwCJvy38K4HhdgE8EQcIBB0ESkjgY1tBFvMAuSwewUFaNtgxB9pzO+DrB58Hvz70+wDbVtLBeCUGQyyT8aDbo4NUxXYD11/i+isY8YI9YAwMzkAohRdkYBrYfilByHCfL1V4q0CGtwsSADyAp444Bg5oXws9xfDGFv6VZgr39+sRACMZ9oL6Iz1QRgw/A/zt6+swFTZecRMYM0Apqe8f9grvjb9jjMMNTMKzOJ5jh+gFU/COLKrJNHDssLk7b+ThIPRZcbjh8UthY2Yy3L/gawCbnw/v1FwYcLThgCb75o7szrUyNLrs7MJ368VQ8rNmDDyTw+8fOgumrHkYYOxs1Bwx1Gn+EPt6hgEArf0GD7VudHmPCAItJkLg+tR4aAtKcNtf/hNhogCQHI8TJXczzqEQIOwT2IyKwHtQEGixEAHW2hk40O2G8x78DkAL0gBu7lYh0CSCs6HZx+jy7gpC+dKbkIJc+urv4LCnrwMYv29IrnaDECDngrjDq4RidHmPCgIx7az2OwBuWHY+xLatAkhP3C0mwkKTYJBJGOUF7wdEIJdEwRpIwCx/B1x2/1khV+D8baJB6B5KOTp57xtBKAcD3sK/Z77xV5j16l3oRczZNRNBQoCEwDJHHYT3pSAQmcuCoz+vXrYYoNQH4KR36UIGG40YvDcEgVQxCNDMu6B8H5SLn4C/wcPfJVAefno+gBB1JmItxOCo3pfh8BW3ICrM2jlUiNCArEolGpBQMNZY+N75he3ivvfmMgKfTuI84IQXmR51HnP2NKz0dJ7JTOKpRFoViwly4rhpFZhh9ECx+CaSuC6ZL2ySUMI9lr6NwE8ff1/07C9g6b6fRdrfCuD2j3zQIgFgLBIKRi2D+UzCdBSODtya0WEMBCBJ1ghgLR73T1zlbpt4urEmuwz9YbkH/kD2y7AjkIo6GuAReTyGAmFv4roO92+sxDAv0ic5jDl9JxbZBEopam42l2iBzS/ip815ZtzHzTFjDmfJ5CIWi+3HbDvsDako44OzhAyO4vqICAHvzz7Cs/0PqZ6+O5XXv4rGaT0k4ZD+1XDi0zfAHw6/EGDzCjzfGJkQlOdBwUeFVJ9EYPp0INWMWiXUoCXC9igGGyiPgS28E3cvY29L++Vh2L+jlAoOxR8HgnCNah+p3Fapxy6McKCYAluGX5Zh4+/G7ytsUituHhdjZkqA9KvvwrgCWZTCv+Mdie8Y9ufxHqgsg64b3dOwwGb1SScXtFDjIbGOiRfx9nEns2RqmvbXaKJxBjRlb8bYIgxntoVfOahSCWRf7z3e+o2XBG7/U1Pxyi/a0+GAU5eFglTqm4knrWnS9svwPudpxOHsWGDqAiHhgwOjzmDEQoQI8hxyjEt8qf4y0qSTsjJo8vpOw6NPx03zYKduXBnk0EIBDmP39eK1fm7aEwvOuMfGoXkU1YKghy9feusjvvD/zneThaHpskz7hGRs/BJKhqmK9hlgAx/X+2deLdVMo4AZT3w0ts/c5ebs2d9jqfQ0zQeKRc0JBuw/CgazcLIRHTRCmOagEcdjVBEFoFBArcRJ7Jh4TGz+fk/GJky+cCPe+oPeG3D8C0sA0pOGcwHWMS1Y8CPsy1142Q9WjGs9a1TNzTXC4kJfwh14vV/jpsSwjFMpm4nirXjs9YNCwBoIwVCNqDxeQUnJj49V6qVTRDGhZP4uytsyxGUVrVIFeg5MM3npbiWC2ATHylxFcRdZcT/KcgrlgXD6v1RDFgtgpNtOis2f97DZNma+zOfDyafJorQuTjaPx/ETdcb3pczlukV/32uyv78LBaVPH+OgYMRiAziuhSKX0+Nhd3ZebE6fvSSLdzr/6V8A39EFEMsM1QHT4Ox/8DLf1cEjVjHWZXMRfstp+8xg2GgjXuZkbNtylOO2sv0AhgyGB7Vz+KgSpc81JoCq4iYc3SDAjsBqPAa5CZdDGRhUjfiUQD14Qikrckz1izrtDcA2kh+2DGuRVLuHF5im8x+GERtPglY1vtwEV+Qv9/tVwYwjAhAkSTQHkBp3nL3f3r+XEicvXxicTNR0nkAlKhSUt2nT1TKbe4AFwQqc/C2BLPpkUEwnkQbbnskSiQ+xdOorxvj2A7UpIUHC65A3IRDXnelTTugTvrngzTWfPXrVXXDPQWdyKK1sSP/x1lcESsVqlY0b7HEUxSVxhz3nBWpjqaj67BhL2CbrKLpyruLsaBScLzQDG7SRs8HkK1ggOxXzc2Qecn5S+1A0Fgbjt+BBB4b8p6GIrgDDuQ55wmOMGWuFCnLUV24YDrLpdqaCTiWDRXjgt/BusVq88HA8FwbecS8HJXc5zsAEnHxZcQShoGWl/tcXPfN3h29jmanv1yIvR24WSC/r+dnz/O266xwbESDrj8+w58z8kx6maPL0yaj9zHEg2LjpjtKLL81x31x3pujr/Ssiwpt4qF8hyllZLL0gtm6/zl298iBv5arTwPNKLOaE16HroSDIYgH4jOnHo4U45ZOv3I/bfNUs2ohnxarJDl9jmOxznKtDTAY/Nzk8gZvX40pa2Y0I8jyuN+P2E3EEDsQBfaCRe0kXxqZMZia/k9nEE9qgu9ihR8MEtg8ynBNVI1gh+8qdy5mZmI+7r8UtL+LGXMURNHDoLRhLkYqfKxmfg/C5tBJqqDnlQfs3P+9YUJ+HFygYJo/PQ1T4yNtBBTrXNmMnm0Z8Zi0aEH/z/P4fKakoAgDcRzHw6Nu0mUtQkw3iAgPaSUiAMB+8sf7K0tqVn1G+t5oj82fcaajBZDJYPIadtcHfsfmG/IpVCxSqLItFXgadEqBtQsLpz551wwF9rzC+5dVNYI8owPS4ZbJOtE63lblq7SApVQHaCp7GTh6FN726uZlgH0PF+DbIGKwrTA5JJcAFzfIhyHd+ibb1XEb1FTVooSpdzMGp2CCYOgJ1fDmrEYYSju0ewhULg2Kph1uVfkeEChxsK/Mr9jbRwDRTlzZBg7wfFK9gbIBMF8ByEgvM8a0HynyFEFB5FWpz8ObmBwobu78NJAC6dA1JI3k9VdGcaADIFHgeHuOiwqNABPmV/so1x4VhQT7gVSjXg572KTDf2HrKoasfKUJy3HAdegUF6BAU3mCnRoEEIxBn4J1vZA1ND5InED8EbplbRBvoSICCT6smF8QrXGBI7J8ohC4i9SWi2DrqSeVpwtX7yC3mSMhM4dP2b6oakhlxA76P3/8PJIw9qiZ6QFzBNGKzTMM6ZFdQgc6xzNhpJnc66tAAxd33sufgdBV55OQiwppgTpz8AzBxFHCCypNLHgFCvSyt2/x50CKAR44ZD7Ex6dBbcGw90KYKfWaGEk4xBF3P2I90sLsbr4x4k99yp9zStoxPnPBR8iTKk6R9/XT8v+fn3rjnEcWRoKCkNSSMjBju8XQzzwt0izmZkhGFiUJ8QJfpFGzgJ/DHhPpDUB2dHacu3bzoOpm9msUdeULeBRvvKyt0ncarhHKzVf9CbWVBUddYaGUjpdGWVOp6RjDMyLSysIYR2GO4byvubK+SU8bZNBG81K4KzxZ55lxHulVeBujJTF2JXOEDu+Ip2Fb6J/WhZAM9Bb9YsorXUhRJlMEf3YBW3pb5BI5yNazhRMtt229nake/jfIb32MaOHM7wZo6CYz2scCTSeCpJBiZFuAZZP70O5MGY2wr2HP2BHPuPiCtmJ4v4g11E0dCN6Zl4TQzfyIUcm80JGYh0FyHo7mS3FMSRg1GagTeuy6PE3oKte8s5dcau/+EfN3nrNjwKfja8u8q1gJ3xQy4DdHidl1Uq4AKa2/D9R59OhXYoOwMcKhaR4VVehgs0n7aK1+qvTNNO47crHY/e3G/DHxWE1wjTbbM5ELbsI/eGVQQpOEcPQXuZBqhQcnIXuDH8LA4HhsLV86TsUOZ7YSBokG/Qk+Ut37jTxiy2ti8uWBN6QBVKoLMoQNUinINtOr8gkfupPYMaB96FcBaWsDefyF6G2NAZLc9qtySjj1URzlsaLf8wyAoiUZBGh3PU/KnikWWn4W66QdSDy6vgXsWIYjA/Uq7hUZ4gv5kFK3b3oQrTId016zrXzsbrn/+OBCmHTaVoTZbKZxzKzQNjJUjhjuRJwkQenWlc7Y+eK8Hu3NGIN0Sy/7QYGa976vdv+QlTS2grF5J9qmCzyI0qOE6xA0E+Ntct3CFidaNcLi8Ijl15mko01Hw6OIoCDKfR7TKPGvNnIFuZRwFID8Y6B9J/wsFHU+w9p0LYm3XZlUo9iBitKrKCCQ2bCwUO9ENS4TFh6J2ENbh8a/V9x7dlSA0LzzE5AGh8NEJUYw1zqcp9SD+PbGBIOCc9x6giq2rv/rktfCJifvA5OQOyPs2bk+H7RJ+Cq+5F07fDKYo18AI5sch+MexLwkdjGQRy0AsHMzjhAKEy4JmQ9WJXU+p4uVFlTobRdBWFfBJGo2sf4Fl5Cja+EhVtJGF2lzlDeFHnMVPs3isQyi/xlMwwPX7LlVumMlVVUkny57BajYSOiAPMJy9Zy0ntRiIKewUZWU6vIwOMZgz9wwQEWKqJiuJN4EWVZwEoogEJF5v9xk8wxVr4MiFbSn6MuQL+jkGBDFB4VOp780ahxn/qRoIQigMxp4QtMAp+y2GyWN2gFtANFBqPAT5Y0EGyFHYQYoSTNoc+FEkVtXnGgbyDSMbrwCtXYfgML4g8hudvgsnWmMvF1VVN4MeRCC2z66cdIVdF051lJWA0ApS59e6VBzRJhDFbb6fv9Lk9dNpors3XokGZNxAyQzE3IEYwC75Lyw0GTRZVFEiZM21FE4gi0PTGlS2QSO7apw3pXQBkVMSbzIXlLLhFmsaakZ3ckPjpzxIilonQGotXLL3VaRWUwLJFzPwvoS8Kg6sNqY93HiMfLwIhxN42amIIS8bxSvGS/9iJHSOrMhCVHgQh9XmIJgcbBoRv4RInGpJZ6po8JSA6/d/s5wrrCORSPhSZOsb1h7sjlKgMqmSTQRKllOWjZqg+qR28RqsSsFA2DkiaAo1Swa4igYrbkcT0N/U0BamJU7a42boaM8f5RbYK0wFX8V2xUMSy5p6JLUx7V1SGTxpOkKDUYDA9frOqh+nQQ9iqMsYFIGT6SsUyDo0EMLtEYG3hFc2vWI1FTTwsJUaJHYE5+wdKrTA62ZEAd0T4TW+B6UvR+AwlyFj+GY2DmH6GWDpNc/9YM41E1BF7wsGIGqoC3KKKHZjA7ahicuh4KBriYKLiodnFytJF0I7tfKLKFizml1tCvY/5VDBb+kaC7zzTGZPrmT8oQeR2N9CU+UL725eb2IgIWMnGWBlatGAeuPJ3OnCqOcGgwDrlkrMSWMbK70GPMN1N4Bt34CEj2tbv5uFQRCTL26BLW17ZSDWdiboQEyNhDMYR/ZMNVWk0Er7IkSbEQBYW8OtxYmwaPZNe84ct/U2P9ds+rUP8yAS3Dvx+9Nog1YjzPQqdFMZuZQ6c6g0VwlL6likU1IjGP6eh1tmNTMPk3CdLRm8gJ1Ii+y5lj3utw1Cm8gVUpf4YsfdtdhkKGbEZObHdWhA0RxWWluIl24ZqszPlP3ZrXzcWNA0fIDDoc+ezfYFXV3ft/bYE9iYjPYCdnpRGs/wenYVDaABG+/3wpPjDoaTO88n9Pk2lPMb1bVRewZSNmy8inxi22QaFQxdscS1pWkmtLh5z4Yl8NJSHxnz7ClgQMaTvO50nSZR6hTsz43aO2HQNPVc69AyboXiqgaDSXWAROU/2OxZCL7PmhRfKN1sQnGxzWJzRA0qGDxGOYhFge//rRyMJDaRVOgpgDMpqPD+QrPAwRP5i5QYui4RjQcSqBqGSSYbSeS+Kt/T4r/0fJ/VuQ/wCRNAFoq6ZnFYdKDBpjoFFADI5yDYtAnRP9ATR0taedCDWvShT92KP2bNhK3PoDDEGungQZIKRBqk/IkYqih4Up4KB4VCota4gWii1vzghqzT7GFz4isz0ECGwsysOgP1+sadK/CMPBdGsVtdLzezWQ6jfEtChZiuEUCU8LKn2Vbs79UkVYXCTx5EsH1m2UvgWpASF0gQddzAV24Xgv7NxjCcn6ti4YWB0RzAbYS7RIKxlgmf8fDihZWvgru6Kwwtp1K6+khzCO26RSsVqpimzlSyVBIYFbZ2rQb14ivgvbkWSt0bcH1Drz2bu8HatAEuegjRwN2MM5hpEiFkY/DjkCpA07SXwqdGFbvRwoJcQT8Pycq+e9Vq4zGH1tsoFMDYZlgw5jXZ6HFcFLcevPjPo9BUE90fnKyQv1LmQISBeaQ/ILzpuGfKcIRxCtL+dhlquM+8R11WeKo2yBTGFWJ7kAehI9p4XlzGT7UgNknW1DvRzLt+7+m6Ein0spuupswVllFkkCZxILpIBSb0IEnHhLN537abaACCjSgIuRxt07EBRkEogw/6Irq6mXINAcjeHKhu5FEip+Ms3EhOsByjg8lQtylUnMdGf2/1rf6qZ/eSSz58XgA7Xjcbwr+UFyKcHFl+z4AuWzPMKIdQz+ek9ia5fj+CKifGQmZ8Dv5x6g10GmaMe+XFWZntDgLVnAai8DgLQ07RfAfRIMvqFFIUHjZ0GkSEXk0kgwYzjhuO9BJDasVjJyCqLUeBpsibG+S+YhvxVwkFVKWHotPLqSu9oGcBlcE4KlPvKSDP80Xh9SDw7jNHQO/QNOTfUju2P8inTDlSu5GRlsmSC+bY1k6VaP2kV+i9y4A0yL63QPRtDSc3mdYpZwo2aU5BTaSXZmibTjji4LYEjoMPyc45z/OWlonS9SoqDVATVz/11JS+LcfiTQNoVEgbOr1HYJOOV774MzeREyN7DNQQj7sxiGxylJMmk2QYE1GyL254ht8C/97+5MXY1HNK/Y1GjM+QICsrkvQ/RsklEg99Kx810w5ZC4W4de1vYQBBcD2rciobkufocwZKxHNk5ki3wF/pxwoP20b6Y6IiIaU9CCu5vxH0TTSKPG3G0FOoiiKGLrvv9f+XGqFLy4uQgsKmvu8oP0SFStUiDTf2mvVHxZPTJOSwY46uNdAhwMAnzwJksQ8kIoXOOdDghFaM6nyASjOtjmk/M9rGTJS+X4HSuBehHfL+/S8mZ2ytCZTWpYpxEn/LuLEXRdgopDzi8AbipskMB6ftvsaCQ5rt/3Nh62t/xka3y8avFJmLE7o3L3upzNRFvtWNYIOZToje1BKxTLTTv+FKTR1Rk/GgTuxfCkfDpReyxCjlmfu6ri+soXqS3sBijbk9brbcImtC84aOIpZe8WXw+EgLYLlD9sPb/pLa8tbfSMMHOhjVDbBkPJbYZ9Y/DNuZJzWAkXYYIUcgXkCTrk2FEXWfQ2irCpBsafuyM2PyGRoJKB5BuE0rmpNMzxZY5yeuemaPAw0o9Q7DPVUCMfcZFIJ/25nHnFBuOsDiT6I8zG8GiGDnTp/irCP1e501yU7i5qt0ZTY3omDy8I3QgMSsS/DsL6kRNprs/VQcnklemJy1aNjcYJXnZ3/DmVlzfc0VDjIMe6Gqy9EoKJn5b1N2JEiObOWhpDlQfKP7eNmXy/FkoloYCPpb0tPseQtfMMZPIjtr6QdeiAz6ga5WG8hC0hNPVANpmBPtabNvcvad83+UDlZ+TSo07kB85cs/+0d83x07pi2cCcWeptnkCtKWRjb9KJqFq7HRE8uTxmpy8JEGOEgWz8CdrwdC7d8IDPT5gXUpGNufmBLbSIJwTbNIN55+OEr97dTyoSNX5TAU3pMZywwZnM/KnCLcJ4fqJ6kZVc51IOHNEiLYYcVjycifF77NildHUXQ1cnVew0Dh9ljhiRJ3HzR4LV9uvpolbY3Q1qtSH6x8/fDkvL2eZIk4qEJpAMYVuo1Usm7O7ryMj+/4huzteRCZyNN4Uhfa4B2ICCY4Tjuo1GyeTh/Mx7Qew5LJmCyXv1cUwRrpJAQbNj4NrvzWHxd+iuYsrmsH6tWRMs13YhuOH7RWFFqG0/HI03B8H8JNz+BvVGdds5j0hJqE58xHJ2gRnjdxaBPCfg++tbg1vh4mxbaRZ3cHWoalqMaH12u8TlQch3/WMGb8EVvyGOiqZSinltN4xDScmLnoKSxCk7qoqnwt/LgJN1BVdKrOcyt7HNGGmTgcj0WmyAij8Js83n9VzGk5QwzzWgHKHLte4VxWGuTJI0LP8gMu5PBw6AHbMT9kd+53D8uk2qj+QL9JrWKS9DMMxNqRhGkvIxptMg362QYSHOIDFcRTs/3o+Qe/e/NDE1a/fOxzzjT34FMfob0fADf3TEPg5oy8qYNRAO6EWtbTiAUNlxMqAx1nv9Mh32w7dLY/DsuPOF43tRRA3AJjFYrb1F3LHKgG0QEdkTwBzdutFGpucNG1aO9nln+QlKzHI36KHjrlz8yyS8rBShsdJa7oIrJJVRJyA+kuz5W2LYCdzBXyqkodiKNNKj7hvrBiL7lu3Y3MjOIGFSRSm4BiISxGiVqoJ5+eXyiV9IMwA0EnsquODTxNxioQ7qurvuWvfvlIFCV38YfPBsjgeBf7Ms2HVc1EBbjL4Oww02SrqhIlrAkyN8sPoV2xLNbnWOzLSqovNsmtFbEj+2GfHhocmp1JvFU/0IJj0IdqfQyanFsZt2Y2ad0kdHdtcnlp9XGdiusshCdKXOggl9J65/t+9jLW5BFBFgXcXa/nJF20OkzcoG6tJ0ZE4OU2f8OaU/wVLx4h3tywRHpevw4U0cMt+Kk1nxCAVUS9KIhDASUijuga0nsZdYFLNrfa7+r6kffC8jn+tu6fUfTsL+P2h4f3+yxA7xuU14jcEBAVa/SbZbmOi6hH0fjsjZc7G2+7ckTzUyE0SDK3ODa/MunwvVAQfgtCVfW4un4YzQx3jsSJ+wb+eqXuYiO5ITO2A7evRvvdiSblXu3jK0GJqFJNX+k7ecPp8tnaSUTWeGAQptkpXEE4Qk/3lkR+sa+KL/I6YVA63xGIwhOBFK9ytvOvDjAbs2RLu38y37tUrt2xVPJ4q9GSOcpobT0a4X1vXKfi6LbpR2XKASVyN32/hJzgLRScLpnPL1c9vbeJQuFxIpdcm54kilk/3DP7SIDWdoBuegTAfBQd7xk1REpLGLpzm0BFET3tl6kfx23+Y1Sfw/tL6guCiCDAHrXJJEJ5hP8N+HWFY8GdOO+3xS2jqFPaI6oZ0XB+Dd71GrDGHAui+BmQ/gKUyBnYkJYGJyBX4OvxtJXAY/fiebdhY7PU78FbyW4I22rWGjHkOf1lUTKjLxtZGEtgtQ6qUvWZWkJl5Fm+m/smk7uWHzSHHg4nBGgpekTP1j+Inp4/6CeBkklHmUYbSyRbg963LGYnlBlPumLb9u2IFttVKafooRkSprB6Kx4BV9j/OFUAk4KE1cgF7Ws2ccFqo8v6mRsTllomWyr0I3XoWjJGj8UnQ79WubbJtiK/2ObiCBN4CXplg1TNH1xqpt30wa27QXh3h5SOp5nyxuO3BE6IiZ6Jz5VCt8rYJrnRHwaUDO3aNckrbB5O/MgteRzbfAf+6FChSwlRTiVhJM61eGKhrClBM/Sjy9l7XTt4jtBAwG4WhMEGGmGqFUki009DCxd82S1dr1sgX2CuQJ/WCYNMFE+gBzakWVHoqWoKKGS0addS2zUPY5MQdTWcStX8nQAj53+VUUVdgJqFpjRFwa6+z0VBaB82oLAuQWOZhshjGEyvMNtIN3j4RqMXlKz8+UEsLE6Bd0oQ6hzwKNEUBpGY5gVh3iFKRLHRF9zslGCDLmvXmnw9Dp3nhmhAoWojqr1xrMSFhmnFawtSKYroyvxS3/VfMN9GyYg5Og3v7qKi1DMp9o0JRASc+UkqJI3laKMljTYHWr4na15lHCbCyFPIncaCt1c7NCoI7/LCo2ji33ASH8V5nip0hGnAqFJc0rbii3Xdoap+EoqjCfaC3ANC+uvMt/m+nVFBeBeRgIQgjl+6kBP8CSeSomc8IogsMhWIBhMclfqWZEEVK9H/NYISVJl8JofaWolRQXjfcIJUJA2rcQavtcOgThwGGX8UA4M4S/0CvQIWNEAD1+u7RQRyVe3b5kYF4X2AAoTg9BwDRZHuxXl9kDwC9HvaK8ghlAkiZx12PH68qEMDA4gv+KJwETNgt7zNb1QQ/oUoQIEOChevwlG/FddVEApAAgbJYWXMJGG03W9wG4T09NNOZWkymAUF3vurYlKs3l2v4hsVhH/RQnF0Ch/ehzO3jIdcYEYNUlQKgcHNBbhO80WxayC4FfnvyA1cV+UWs7dLDCqW/xdgABZnO7MDe2YlAAAAAElFTkSuQmCC</Image>
<Url type="application/x-suggestions+json" method="GET" template="http://autosug.ebay.com/autosug">
  <Param name="sId" value="0" />
  <Param name="kwd" value="{searchTerms}" />
  <Param name="fmt" value="osr" />
</Url>
<Url type="text/html" method="GET" template="http://rover.ebay.com/rover/1/711-47294-18009-3/4" resultdomain="ebay.com">
  <Param name="mfe"  value="search" />
  <Param name="mpre" value="http://www.ebay.com/sch/i.html?_nkw={searchTerms}" />
</Url>
<SearchForm>http://search.ebay.com/</SearchForm>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="ebu"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="editorBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">
  
  <binding id="editor" role="outerdoc">
    <implementation type="application/javascript">
      <constructor>
        <![CDATA[
          // Make window editable immediately only
          //   if the "editortype" attribute is supplied
          // This allows using same contentWindow for different editortypes,
          //   where the type is determined during the apps's window.onload handler.
          if (this.editortype)
            this.makeEditable(this.editortype, true);
        ]]>
      </constructor>
      <destructor/>

      <field name="_editorContentListener">
        <![CDATA[
          ({
            QueryInterface: function(iid)
            {
              if (iid.equals(Components.interfaces.nsIURIContentListener) ||
                  iid.equals(Components.interfaces.nsISupportsWeakReference) ||
                  iid.equals(Components.interfaces.nsISupports))
              return this;

              throw Components.results.NS_ERROR_NO_INTERFACE;
            },
            onStartURIOpen: function(uri)
            {
              return false;
            },
            doContent: function(contentType, isContentPreferred, request, contentHandler)
            {
              return false;
            },
            isPreferred: function(contentType, desiredContentType)
            {
              return false;
            },
            canHandleContent: function(contentType, isContentPreferred, desiredContentType)
            {
              return false;
            },
            loadCookie: null,
            parentContentListener: null
          })
        ]]>
      </field>
      <method name="makeEditable">
        <parameter name="editortype"/>
        <parameter name="waitForUrlLoad"/>
        <body>
        <![CDATA[
          this.editingSession.makeWindowEditable(this.contentWindow, editortype, waitForUrlLoad, true, false);
          this.setAttribute("editortype", editortype);

          this.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
              .getInterface(Components.interfaces.nsIURIContentListener)
              .parentContentListener = this._editorContentListener;
        ]]>
        </body>
      </method>
      <method name="getEditor">
        <parameter name="containingWindow"/>
        <body>
        <![CDATA[
          return this.editingSession.getEditorForWindow(containingWindow);
        ]]>
        </body>
      </method>
      <method name="getHTMLEditor">
        <parameter name="containingWindow"/>
        <body>
        <![CDATA[
          var editor = this.editingSession.getEditorForWindow(containingWindow);
          return editor.QueryInterface(Components.interfaces.nsIHTMLEditor);
        ]]>
        </body>
      </method>

      <field name="_finder">null</field>
      <property name="finder" readonly="true">
        <getter><![CDATA[
          if (!this._finder) {
            if (!this.docShell)
              return null;

            let Finder = Components.utils.import("resource://gre/modules/Finder.jsm", {}).Finder;
            this._finder = new Finder(this.docShell);
          }
          return this._finder;
        ]]></getter>
      </property>

      <field name="_fastFind">null</field>
      <property name="fastFind"
                readonly="true">
        <getter>
        <![CDATA[
          if (!this._fastFind) {
            if (!("@mozilla.org/typeaheadfind;1" in Components.classes))
              return null;

            if (!this.docShell)
              return null;

            this._fastFind = Components.classes["@mozilla.org/typeaheadfind;1"]
                                       .createInstance(Components.interfaces.nsITypeAheadFind);
            this._fastFind.init(this.docShell);
          }
          return this._fastFind;
        ]]>
        </getter>
      </property>

      <field name="_lastSearchString">null</field>
      <field name="_lastSearchHighlight">false</field>

      <property name="editortype"
                onget="return this.getAttribute('editortype');"
                onset="this.setAttribute('editortype', val); return val;"/>
      <property name="webNavigation"
                onget="return this.docShell.QueryInterface(Components.interfaces.nsIWebNavigation);"
                readonly="true"/>
      <property name="contentDocument" readonly="true"
                onget="return this.webNavigation.document;"/>
      <property name="docShell"
                onget="return this.boxObject.docShell;"
                readonly="true"/>
      <property name="currentURI"
                readonly="true"
                onget="return this.webNavigation.currentURI;"/>
      <property name="contentWindow"
                readonly="true"
                onget="return this.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIDOMWindow);"/>
      <property name="webBrowserFind"
                readonly="true"
                onget="return this.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIWebBrowserFind);"/>
      <property name="markupDocumentViewer"
                readonly="true"
                onget="return this.docShell.contentViewer;"/>
      <property name="editingSession"
                readonly="true"
                onget="return this.webNavigation.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIEditingSession);"/>
      <property name="commandManager"
                readonly="true"
                onget="return this.webNavigation.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsICommandManager);"/>
      <property name="fullZoom"
                onget="return this.markupDocumentViewer.fullZoom;"
                onset="this.markupDocumentViewer.fullZoom = val;"/>
      <property name="textZoom"
                onget="return this.markupDocumentViewer.textZoom;"
                onset="this.markupDocumentViewer.textZoom = val;"/>
      <property name="isSyntheticDocument"
                onget="return this.contentDocument.isSyntheticDocument;"
                readonly="true"/>
    </implementation>
  </binding>

</bindings>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Make sure the border only appears at the bottom of the background -->
    <item
        android:top="-2dp"
        android:right="-2dp"
        android:left="-2dp">
        <shape>
            <!-- Padding creates vertical space between the text and the underline,
                 as well as right padding for search icon/clear button -->
            <padding
                android:top="@dimen/search_bar_padding_y"
                android:bottom="@dimen/search_bar_padding_y"
                android:right="@dimen/search_bar_padding_right"/>
            <solid android:color="@android:color/transparent"/>
            <stroke android:width="1dp" android:color="@color/edit_text_default"/>
        </shape>
    </item>

</layer-list>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Make sure the border only appears at the bottom of the background -->
    <item
        android:top="-3dp"
        android:right="-3dp"
        android:left="-3dp">
        <shape>
            <!-- Padding creates vertical space between the text and the underline,
                 as well as right padding for search icon/clear button -->
            <padding
                android:top="@dimen/search_bar_padding_y"
                android:bottom="@dimen/search_bar_padding_y"
                android:right="@dimen/search_bar_padding_right"/>
            <solid android:color="@android:color/transparent"/>
            <!-- We apply a color filter to set the color for the selected search engine -->
            <stroke android:width="2dp" android:color="@android:color/white"/>
        </shape>
    </item>

</layer-list>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 30101 $"/>
        <generation date="$Date: 2011-05-11 19:11:29 -0700 (Wed, 11 May 2011) $"/>
        <language type="ee"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html lang="en" dir="ltr" xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - Element</title>
</head>
<body onload="parent.loadComplete()">
<center id="Test-CENTER" title="CENTER Element" lang="en" dir="ltr" class="CENTER-class">
<object align="middle"></object>
</center>
<center>
<p align="center">Test Lists</p>
</center>
<br />
<ol compact="compact" start="1" type="1">
  <li type="square" value="2">EMP0001
  <ul compact="compact" type="disc">
    <li>Margaret Martin
    <dl>
      <dd id="Test-DD" title="DD Element" lang="en" dir="ltr" class="DD-class">Accountant</dd>
      <dd>56,000</dd>
      <dd>Female</dd>
      <dd>1230 North Ave. Dallas, Texas 98551</dd>
    </dl>
    </li>
  </ul>
  </li>
</ol>
<br />
<b id="Test-B" title="B Element" lang="en" dir="ltr" class="B-class">Bold</b>
<br />
<dl>
  <dt id="Test-DT" title="DT Element" lang="en" dir="ltr" class="DT-class">DT element</dt>
</dl>
<br />
<bdo id="Test-BDO" title="BDO Element" lang="en" dir="ltr" class="BDO-class">Bidirectional algorithm overide
</bdo>
<br />
<i id="Test-I" title="I Element" lang="en" dir="ltr" class="I-class">Italicized</i>
<br />
<span id="Test-SPAN" title="SPAN Element" lang="en" dir="ltr" class="SPAN-class"></span>
<br />
<tt id="Test-TT" title="TT Element" lang="en" dir="ltr" class="TT-class">Teletype</tt>
<br />
<sub id="Test-SUB" title="SUB Element" lang="en" dir="ltr" class="SUB-class">Subscript</sub>
<br />
<sup id="Test-SUP" title="SUP Element" lang="en" dir="ltr" class="SUP-class">SuperScript</sup>
<br />
<s id="Test-S" title="S Element" lang="en" dir="ltr" class="S-class">Strike Through (S)</s>
<br />
<strike id="Test-STRIKE" title="STRIKE Element" lang="en" dir="ltr" class="STRIKE-class">Strike Through (STRIKE)</strike>
<br />
<small id="Test-SMALL" title="SMALL Element" lang="en" dir="ltr" class="SMALL-class">Small</small>
<br />
<big id="Test-BIG" title="BIG Element" lang="en" dir="ltr" class="BIG-class">Big</big>
<br />
<em id="Test-EM" title="EM Element" lang="en" dir="ltr" class="EM-class">Emphasis</em>
<br />
<strong id="Test-STRONG" title="STRONG Element" lang="en" dir="ltr" class="STRONG-class">Strong</strong>
<br />
<dfn id="Test-DFN" title="DFN Element" lang="en" dir="ltr" class="DFN-class">
        <code id="Test-CODE" title="CODE Element" lang="en" dir="ltr" class="CODE-class">10  Computer Code Fragment 20  Temp = 10</code>
        <samp id="Test-SAMP" title="SAMP Element" lang="en" dir="ltr" class="SAMP-class">Temp = 20</samp>
        <kbd id="Test-KBD" title="KBD Element" lang="en" dir="ltr" class="KBD-class">*2</kbd>
        <var id="Test-VAR" title="VAR Element" lang="en" dir="ltr" class="VAR-class">Temp</var>
        <cite id="Test-CITE" title="CITE Element" lang="en" dir="ltr" class="CITE-class">Citation</cite>
</dfn>
<br />
<abbr id="Test-ABBR" title="ABBR Element" lang="en" dir="ltr" class="ABBR-class">Temp</abbr>
<br />
<acronym id="Test-ACRONYM" title="ACRONYM Element" lang="en" dir="ltr" class="ACRONYM-class">NIST</acronym>
<br />
<address id="Test-ADDRESS" title="ADDRESS Element" lang="en" dir="ltr" class="ADDRESS-class">Gaithersburg, MD 20899</address>
<br />
<noframes id="Test-NOFRAMES" title="NOFRAMES Element" lang="en" dir="ltr" class="NOFRAMES-class">Not</noframes>
<br />
<noscript id="Test-NOSCRIPT" title="NOSCRIPT Element" lang="en" dir="ltr" class="NOSCRIPT-class">Not</noscript>
<br />
<u id="Test-U" title="U Element" lang="en" dir="ltr" class="U-class">Underlined</u>
</body>
</html>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:29 $"/>
        <language type="el"/>
    </identity>
</ldml>
<?xml version="1.0" ?>
<!-- empty document for use in tests that don't need any particular DOM -->
<root/>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2007/06/04 01:05:45 $"/>
		<language type="en"/> 
		<territory type="BE"/> 
	</identity>
	
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/"> 
  <ShortName>A second test engine</ShortName> 
  <Description>A second test search engine (based on DuckDuckGo)</Description> 
  <InputEncoding>UTF-8</InputEncoding> 
  <LongName>A second test search engine (based on DuckDuckGo)</LongName> 
  <Image width="16" height="16">data:image/vnd.microsoft.icon;base64,AAABAAMAEBAAAAEACABoBQAANgAAACAgAAABAAgAqAgAAJ4FAAAwMAAAAQAIAKgOAABGDgAAKAAAABAAAAAgAAAAAQAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUvgAAFMAAABfDAAAYwQAAGscAAB7KAAAgzAAAIcwAACHNAAAizgAAI9AAACTQAAAnzAAAJtMAACnXABktyAAALtgAAC/bAAAx3QAAM+AAADbjAAA34wAAOOQAADzYAAA65wAWPdcAADvoAABG1QC6cg0AAFXdAERS0AAAVd8AAF3cAABp5wAAcOUATGziAAB36AAAeugATHLqAF165ABlg+0A0qRkAACS7wAAlO8AeI7nAIGX6gCVndwAAKX1AACr9gAAr/YAALX4AAC3+QCdrvIAALz6AAC9+QAAv/kAAMD7AADH+wAAyvwAAND9ALHB9QAA0vwA5c68AADT/gAA1P0AANT+AADU/wAA1/8AANj/AADZ/wAA3P8AAN3/AGrV+wAA3/8AAOH/AMrS9ADs3tYA39zmAOHj8AB+6v8A5ur6AKDw/wCq8f8A9fDtAPby7wD38vAA6/D8APfz8QD69O4A8PP8APL0/AD69/IA+/fzAPr39QDd+f8A+/n1APb4/QD7+fgA+/r5AOz8/gD1/P8A+vz/AP7+/QD//v8A////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABpLGhoaGhQHgEAAQEBAQFpGUtoaGhoSw8CAwICAgICAiNQaGhoaC0EBAwgIBsEBAQnWmhoaGgnIjY5PUBHOyUFLWhoaGheR0MdBgYGByQrCEtoaGhoT0I3CQkJCQkJCQlQaGhoaFI/QTIzNSoXCgsLWmhoaGhoUUVEQ0RKRDEfDWhoXFxoaGhjZWRILzpJRjhoXBwcWGhoaFtbYg4QIS8waFwcKVhoaF8cHF8REREREWhnXFxoaGhfHClOEhISEhJVU2hoaGhoaF9fNBMTExMTVz5MZmhoaFdMTSYUFBQUFDxhVGhoaGhdPi4VFhYWFhZpVmBoaGhoWSgYGhoaGhppgAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAEAACgAAAAgAAAAQAAAAAEACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFL8AABTAAAEWvAABF74AABbCAAAXwwABGMAAABjDAAAYxAAAGsUAABrGAAAbxgAAG8cAAh3BAAEcxQAAHMgAAR3HAAgewgAAHcoAAB/LAAAgzAAFIckAiEYiAAAhzgAAI88AACPQAAAk0AAAJc8AACXSAAUmzQAAJ9IAACfTABAqxwAAKNQAjE0rAAAp1QAAKdYAACrXAAAr2AAGLdMAAC3ZAAAu2wAAL9wAADPVAAAx3QAAMt8AADPgAAA04QAAONQAADnXAAA24wAGN94ACjfdAAA34wAAN+QACznbAAA45QAJOeAAFTzUABY81AAAOeYAFj3UAAo74AAAP9YAADrnAAs74AAAPtoABT/pAABF2wAARd0AAEbaAABI1gAASdoAEETmAABJ2wAAS98AAFHfAAFV3ABTc2EAWYA+AAFa4gAAXd0AAF3hADyeAAABZd4AAWTjADZf5wABZuIAQKETAD2jDwBGZ9gARKEYADhk6wA8pBMAPKUVAK+DbABKbN8ATGziAAF15ABTpioAaKE1AEGtJAABfOkAOrIiAH6hRQABgOkAAYLmAAGC5wACgucAXXrkAAGE5wBEr0AAAYToAAGG6gA9s0AAObkuAD20QQA5ui8AaIHhAEe3OABxgeAAAo3sAFasbABshukAOcA5AGmI7gABleoAbovsAAKZ7QCFtmEAAp7vAD7CagCBl+oAPsNuAAKo8QACqvIAA6zyAAOs9AACr/QAkKfxAGLJlQBfypUAZMqWAAO49QDSuawAc8qaAMPCngADwfgAA8H5AAPE+QAEyPsABMr7AATO/AAE0PwABND9AATR/QAE0v0ACNP9ABvW/QDj1MwAMtr9ADvc/QDK0vQA59rTAOjb1ADp3tcA6+DaAG/l/gB15v4A29/0AO3k3wDu5eAA4eT3AJDr/gDy6+cA5uj3APLs6ADj6PsA8+zpAObq+gDz7uoA8+7rANHt+gD07usA6e35APbx7wDy9PwA5fr/APv7+wD2+/8A7fz/APz8+gDw/P8A/fz7APv8/gD9/f4A+P7/AP/+/gD+/v8A////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyMgAAAAAPYyDb4HHx8fHw05dUwAAAAAAAAAAAAAAyMjIAQEBAQFhkYNyXmV3Y2h6dF1TAgEBAQEBAQEBAQEByAQEBAQEBG2Og3JedXxnWYV0XVMDBAQEBAQEBAQEBAQEBQUFBQURhIyDcl5zfGdbhXRdUwYFBQUFBQUFBQUFBQUICAgICDuijYNyXmV3ZE96dF1TBwgICAgICAgICAgICAoKCgoKYbOMg5K/x8esCg5OWFMJCgoKCgoKCgoKCgoKDAwMDAxtusfHx8fHx3gMDAwLDQwMDAwMDAwMDAwMDAwPDw8PEITHx8fHx8fHFQ8PDw8PDw8PDw8PDw8PDw8PDxISEhIgosfHx8fHx8YSEhISEhISEhISEhISEhISEhISExMTEzuzx8fHx8fHrxMTExMTExMTExMTExMTExMTExMUFBQUYbrHx8fHx8epFBQUboiXnJqGVEcUFBQUFBQUFBcXFxdtx8fHx8fHx7YbbJyYj2tigpObnIAXFxcXFxcXGBgYHYTHx8fHx8e7npybcE0wGBgYP1F+ahgYGBgYGBgaGho6osfHx8fHx6icnIcZGhoaGhoaGhoaGhoaGhoaGhwcHGGzx8fHx8fHp5ycnEgeRjErHBwcHBwcHBwcHBwcISEhbbrHx8fHx8e+oZycnJycnJyViVdEISEhISEhISEhIR+Ex8fHx8fHx8fEraCdnJycnJycnJZxSiEhISEhISMjJ6LHx8fHx8fHx8fHx8fAvcBCVXmUnJyZUiMjIyMjJSU6s8fHx6Wlx8fHx8fHx8fHxyUkJUxpmZuKJSUlJSUmJmG6x8WjIhaqx8fHx8fHtLTHJiYmJkVQZksmJiYmJigobcXHx6QiX6rHx8fHx7AiFrUoKCgoKCgoKCgoKCgoKSmEx8fHx6urx8fHx8fHsiJfeykpKSkpKSkpKSkpKSkqKoTHt8fHx8fHx8fHx8fHubk0KioqKioqKioqKioqKiwsbcemx8fHx8fHx8fHwcfHuCwsLCwsLCwsLCwsLCwsLi43s8eQkJ/Hx8fHx8eukJA5Li4uLi4uLi4uLi4uLi4uLi2Ex8fHx8fHx8fHx8fHfy4uLi4uLi4uLi4uLi4uLi8vLzOzx8fHx8fHx8fHx4svLy8vLy8vLy8vLy8vLy8vMjIyMkGEvMfHx8fHx7FWMjIyMjIyMjIyMjIyMjIyMjI2NjY2MjI+drPHx8d9NTY2NjY2NjY2NjY2NjY2NjY2Njg4NlrHx8fHx8fGSTg4ODg4ODg4ODg4ODg4ODg4ODg4yEBAPGDHx8fCXEBAQEBAQEBAQEBAQEBAQEBAQEBAQMjIyENDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0PIyMAAAAOAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAHAAAADKAAAADAAAABgAAAAAQAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARwQAAE8IAABXEAAAXxQAAGcYAARvHAAAfwAAAHsoAFSucAIdGHgAAIs0Ai0kjAAAlzwAHJc8AID59AAAo0gCPTSgAACnTACQ8lwAYMsgAADDaAAI01AA+WkgAADTeABU4zgAEM+YAl1o3AAg52QAANukAADfqAAA65AA5Y0cAAEDYABc+3QAARtYANEPPAJ1lQgA6eSUAGUbeAAFK2wAVRucAMknWAAJQ2gA8hBkANoQfAB9M5QAXTeYANo0FAABT3gAmUeEAVoMvAEaYAAAAXeIASJIcAABg3gA9WeEAPZ4AADefBACneGMAA2TiAAFn3gAwX+oAU4ZkADqiDwAAauIArH9hAKx9aABWZtYAW4pfAFJp2gAAcOIAX2raAEOkJABJoi4AXKErAEtt4ABGpykANa0bAElu6gA6qiYAaXLbAAZ66ABFricAPq4tAFZ24wBseNoAeaVCALiPdwBtedsANrgeAF955gBBsjIAY6dMAFx86gBYfu0AAIjrAD61RwBCuzMAZILpAAKM6QCipWMAYrZCAL+bhwA3wjQAaIbuADy6UABrifEAAJXtAHCL6wBZtmgATLduAG2O8AACnO8APMFkAIuW4wCltXMAq7J+AIKX6AB9mOsAyamaAImb5AA5xXMAi6DjAACq9ACsuYgAT8iDAAaw8wBBzIIAjqbyAACz9wCVqu0AmK3xAJ+u8AClru4AC8P2AKa48wAAx/wAAMv5ALvQtgAJz/4AAND/ALPB9QDDzscAANP8AMDF7QAQ1PwAwsz3ACna/AC9zfoANtv8AObYzACr4sYA6NrOAMvS8wCu5M8ATuD/AGDi/wCy59MAaOP/ANPn1ABp5vwA5eHjAOzk2wDU3vgAwurYAIHq/ADr6t0Akev/AObm8wDh5vYA9e3kAOTq+gDz8OsAsPH/AOjt/QC38v8A6u//AN327QDx8f4A+PT2AM73/gDz9foA+/jzAPX2/AD8+fQA3fr8AP369QD4+v8A+v37AP/++AD8//4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC/vwAAAAAAAAAAAAAAAAF2obO9vr6+vr6+vr28RwAAAAAAAAAAAAAAAAAAAAAAv7+/AAYAAAAAAAAAAAABAgGZfW18vr6+vr6+vr6pAAAAAAAAAAAAAAAAAAAAAQAGAL8BAQEBQ5Cyvru+vb1QAxiff3FgSWS+vr6+vr5HAggWDgETvb67vr2+vrWQQwEGAQEBAQFyvlUTAAEBAQEAAUukfXFgTzhMYFJKc44+ST9IKwEBAQEBAQEBAQFVvnIBAQEBAUO+IwEBAQEAAQEBAVSdf3FgT0hnZ1lNSHlpWz85LwEBAQEBAQEBAQEBI7tDAQECApBYAgICAgICAgICAnWaf3FgUjhnZ2FPP31pUzhILwICAgICAgICAgICAliQAgICArUCAgICAgICAgICApmaf3FgTzlnZ1lNSHlpUzg5LwICAgICAgICAgICAgK1AgICAr0CAgICAgICAgICS6mXf3FgTzNWZVtPMm5pWz9ILAICAgICAgICAgICAgK7AgICAr4CAgICAgICAgICVLWXf3FcdL6+vr6FBAJEUzg4JQICAgICAgICAgICAgK9AgICArsCAgICAgICAgICdb6xiqa+vr6+vrMpCgICEjU4HwICAgICAgICAgICAgK7AgIDA74DAwMDAwMDAwMDmb6+vr6+vr6+vrAKAwMDAwMSAwMDAwMDAwMDAwMDAwO+AwMDA7sDAwMDAwMDAwMDqb6+vr6+vr6+voUDAwMDAwMDAwMDAwMDAwMDAwMDAwO9AwMFBb4FBQUFBQUFBQVLtb6+vr6+vr6+vkUFBQUFBQUFBQUFBQUFBQUFBQUFBQW+BQUFBbsFBQUFBQUFBQVavr6+vr6+vr6+vikFBQUFBQUFBQUFBQUFBQUFBQUFBQW9BQUHB7sHBwcHBwcHBwd1vr6+vr6+vr6+vgcHBwcHBwcHBwcHBwcHBwcHBwcHBwe+BwcHB70HBwcHBwcHBweZvr6+vr6+vr6+vgcHBwciUXuIj4+PhmsqBwcHBwcHBwe+BwcKCr4MCgoKCgoKCgqrvr6+vr6+vr6+vgoKY4uRj5GRkYyPi4uRiDYKCgoKCgq7CgoKCr4MCgoKCgoKCku1vr6+vr6+vr6+r4aPi4twOycgIjBAcIaLj488CgoKCgq9CgoKCr4KCgoKCgoKClS+vr6+vr6+vr60kYyMiyoKCgoKCgoKCgoVKkYVCgoKCgq9CgoMDLsMDAwMDAwMDHW+vr6+vr6+vrubjI+RYw0KCgoKCgoMCgwMDAwMDAwMCgy+CgwMDL4MDAwMDAwMDJm+vr6+vr6+vr2Tj4+PiBUMDAwMDAwMDAwMDAwMDAwMDAy9DwwMDL4MDAwMDAwMIam+vr6+vr6+vrugi4+Mj4uIi4yIflEgDAwMDAwMDAwMDAy8DAwMDL4MDAwMDAwMS7W+vr6+vr6+vr6+npGLj4yPj4+Pj4+PiF8gDAwMDAwMDAy+DAwPDL0PDwwPDA8PWr6+vr6+vr6+vr6+vq2Tj4+Lj4yPj5GLj4+PgTsPDA8MDwy9DA8PD74PDw8PDw8Pdb6+vr6+vr6+vr6+vr67ua2npZyVjI+LkY+Rj4+INA8PDw++Dw8PD70PDw8PDw8Pmb6+vr6+vr6+vr6+vr69vr6+vr69VCpffoyLjI+Jj4EPDw++Dw8PD70PDw8PDw8Pq76+vqEaGqq+vr6+vr6+vr68vr6+NxEPDw82e5GMiVEPDw++Dw8REbwRERERERFLtb6+vgsQCzq+vr6+vr6+vpYaGqy7ERERERERERERERERERG9EREUEb4RFBEUERRdvr6+vhAQoma+vr6+vr6+vgkaCTq+FBEUERQRFBEUERQRFBG+ERQUFL4UFBQUFBR1vr6+vqpBQra+vr6+vr6+uxAQoWa+FBQUFBQUFBQUFBQUFBS9FBQUFL4UFBQUFBR2vr6+vr6+vr6+vr6+vr6+vqpCQrayFBQUFBQUFBQUFBQUFBS+FBQUFL4UFBQUFBRivr6qvr6+vr6+vr6+vr6+vr6+vr6CFBQUFBQUFBQUFBQUFBS9FBQXFL4UFxQXFBdLvrNXvr6+vr6+vr6+vr6+vr6+vr4UFxQXFBcUFxQXFBcUFxS+FBcUF74XFBcUFxQXvr62JFd3s72+vr6+vr67rLO7mKgXFBcUFxQXFBcUFxQXFBe+FxQXF74XFxcXFxcXrr6+vrq9vr6+vr6+vr6+uCRXljEXFxcXFxcXFxcXFxcXFxe+FxcXF74XFxcXFxcXhL2+vr6+vr6+vr6+vr6+vb69gxcXFxcXFxcXFxcXFxcXFxe+FxcXF74XFxcXFxcXG667vr6+vr6+vr6+vr6+vrupFxcXFxcXFxcXFxcXFxcXFxe+FxcXHr4eFx4XHhceFx68vb6+vr6+vr6+vr69vrUXHhceFx4XHhceFx4XHhceFx6+HhceF74XHhceFx4XHhceeLu9vb6+vr6+vb6zhxceFx4XHhceFx4XHhceFx4XHhe+Fx4eHr4eHh4eHh4eHh4eHhctXZm+vr6+sGIeHh4eHh4eHh4eHh4eHh4eHh4eHh69Hh4eHr0eHh4eHh4eHmJsdoKNo7u+vr61LR4eHh4eHh4eHh4eHh4eHh4eHh4eHh69Hh4eHLUcHhweHB4cG6u8vr6+vr6+voMeHB4cHhweHB4cHhweHB4cHhweHB4cHhy1HB4cHpJqHB4cHhweHCaZvr6+vr2DLhwcHhweHB4cHhweHB4cHhweHB4cHhweHGqSHhwcHF6+PRwcHBwcHlR6hINoTigZGRwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcPb5eHBwcHByAvW8cHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBxvvYAcHBwcHBwcXpS3vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vreUXhwcHBy/HBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHL+/vx0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dv7/AAAAAAAMAAIAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAQAAwAAAAAADAAA=</Image>
  <Url type="text/html" method="get" template="https://duckduckgo.com/?q={searchTerms}"/>  
</OpenSearchDescription> 
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Test search engine (fr)</ShortName>
<Description>A test search engine (based on Google search for a different locale)</Description>
<InputEncoding>ISO-8859-1</InputEncoding>
<Url type="text/html" method="GET" template="http://www.google.fr/search" resultdomain="google.fr">
  <Param name="q" value="{searchTerms}"/>
  <Param name="ie" value="iso-8859-1"/>
  <Param name="oe" value="iso-8859-1"/>
</Url>
<SearchForm>http://www.google.fr/</SearchForm>
</SearchPlugin>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
    <ShortName>IconsTest</ShortName>
    <Description>IconsTest. Search by Test.</Description>
    <InputEncoding>UTF-8</InputEncoding>
    <Image width="16" height="16">data:image/x-icon;base64,ico16</Image>
    <Image width="32" height="32">data:image/x-icon;base64,ico32</Image>
    <Image width="74" height="74">data:image/png;base64,ico74</Image>
    <Url type="application/x-suggestions+json" template="http://api.bing.com/osjson.aspx">
        <Param name="query" value="{searchTerms}"/>
        <Param name="form" value="MOZW"/>
    </Url>
    <Url type="text/html" method="GET" template="http://www.bing.com/search">
        <Param name="q" value="{searchTerms}"/>
        <MozParam name="pc" condition="pref" pref="ms-pc"/>
        <Param name="form" value="MOZW"/>
    </Url>
    <SearchForm>http://www.bing.com/search</SearchForm>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>engine-rel-searchform-post.xml</ShortName>
<Url type="text/html" method="POST" template="http://engine-rel-searchform-post.xml/POST" rel="searchform"/>
<SearchForm>http://engine-rel-searchform-post.xml/?search</SearchForm>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>engine-rel-searchform.xml</ShortName>
<Url type="text/html" method="GET" template="http://engine-rel-searchform.xml/?search" rel="searchform"/>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Test search engine</ShortName>
<Description>A test search engine (based on Google search)</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/png;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADs9Pt8xetPtu9FsfFNtu%2BTzvb2%2B%2Fne4dFJeBw0egA%2FfAJAfAA8ewBBegAAAAD%2B%2FPtft98Mp%2BwWsfAVsvEbs%2FQeqvF8xO7%2F%2F%2F63yqkxdgM7gwE%2FggM%2BfQA%2BegBDeQDe7PIbotgQufcMufEPtfIPsvAbs%2FQvq%2Bfz%2Bf%2F%2B%2B%2FZKhR05hgBBhQI8hgBAgAI9ewD0%2B%2Fg3pswAtO8Cxf4Kw%2FsJvvYAqupKsNv%2B%2Fv7%2F%2FP5VkSU0iQA7jQA9hgBDgQU%2BfQH%2F%2Ff%2FQ6fM4sM4KsN8AteMCruIqqdbZ7PH8%2Fv%2Fg6Nc%2Fhg05kAA8jAM9iQI%2BhQA%2BgQDQu6b97uv%2F%2F%2F7V8Pqw3eiWz97q8%2Ff%2F%2F%2F%2F7%2FPptpkkqjQE4kwA7kAA5iwI8iAA8hQCOSSKdXjiyflbAkG7u2s%2F%2B%2F%2F39%2F%2F7r8utrqEYtjQE8lgA7kwA7kwA9jwA9igA9hACiWSekVRyeSgiYSBHx6N%2F%2B%2Fv7k7OFRmiYtlAA5lwI7lwI4lAA7kgI9jwE9iwI4iQCoVhWcTxCmb0K%2BooT8%2Fv%2F7%2F%2F%2FJ2r8fdwI1mwA3mQA3mgA8lAE8lAE4jwA9iwE%2BhwGfXifWvqz%2B%2Ff%2F58u%2Fev6Dt4tr%2B%2F%2F2ZuIUsggA7mgM6mAM3lgA5lgA6kQE%2FkwBChwHt4dv%2F%2F%2F728ei1bCi7VAC5XQ7kz7n%2F%2F%2F6bsZkgcB03lQA9lgM7kwA2iQktZToPK4r9%2F%2F%2F9%2F%2F%2FSqYK5UwDKZAS9WALIkFn%2B%2F%2F3%2F%2BP8oKccGGcIRJrERILYFEMwAAuEAAdX%2F%2Ff7%2F%2FP%2B%2BfDvGXQLIZgLEWgLOjlf7%2F%2F%2F%2F%2F%2F9QU90EAPQAAf8DAP0AAfMAAOUDAtr%2F%2F%2F%2F7%2B%2Fu2bCTIYwDPZgDBWQDSr4P%2F%2Fv%2F%2F%2FP5GRuABAPkAA%2FwBAfkDAPAAAesAAN%2F%2F%2B%2Fz%2F%2F%2F64g1C5VwDMYwK8Yg7y5tz8%2Fv%2FV1PYKDOcAAP0DAf4AAf0AAfYEAOwAAuAAAAD%2F%2FPvi28ymXyChTATRrIb8%2F%2F3v8fk6P8MAAdUCAvoAAP0CAP0AAfYAAO4AAACAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAQAA</Image>
<Url type="application/x-suggestions+json" method="GET" template="http://suggestqueries.google.com/complete/search?output=firefox&amp;client=firefox&amp;hl={moz:locale}&amp;q={searchTerms}"/>
<Url type="text/html" method="GET" template="http://www.google.com/search" resultdomain="google.com">
  <Param name="q" value="{searchTerms}"/>
  <Param name="ie" value="utf-8"/>
  <Param name="oe" value="utf-8"/>
  <Param name="aq" value="t"/>
  <!-- Dynamic parameters -->
  <MozParam name="client" condition="defaultEngine" trueValue="firefox-a" falseValue="firefox"/>
  <MozParam name="channel" condition="purpose" purpose="contextmenu" value="rcs"/>
  <MozParam name="channel" condition="purpose" purpose="keyword" value="fflb"/>
</Url>
<Url type="application/x-moz-default-purpose" method="GET" template="http://www.google.com/search" resultdomain="purpose.google.com">
  <Param name="q" value="{searchTerms}"/>
  <MozParam name="client" condition="defaultEngine" trueValue="firefox-a" falseValue="firefox"/>
  <!-- MozParam with a default value if purpose is not specified -->
  <MozParam name="channel" condition="purpose" purpose="" value="none"/>
  <MozParam name="channel" condition="purpose" purpose="contextmenu" value="rcs"/>
  <MozParam name="channel" condition="purpose" purpose="keyword" value="fflb"/>
</Url>
<SearchForm>http://www.google.com/</SearchForm>
</SearchPlugin>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom author name works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).authors.queryElementAt(0, Components.interfaces.nsIFeedPerson).name=='John Doe Entry';

-->

<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2003-12-13T18:30:02Z</updated>
  <author>
       <name>John Doe</name>
  </author>
  <id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>

  <entry>
    <title>Atom-Powered Robots Run Amok</title>
    <link href="http://example.org/2003/12/13/atom03"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>
    <summary>Some text.</summary>
    <author>
      <name>John Doe Entry</name>
    </author>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry content:encoded and xhtml works
Expect: var content = feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).content.plainText(); content == "should appear";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux"
      xmlns:content="http://purl.org/rss/1.0/modules/content/">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    <summary type="xhtml">
      <div xmlns="http://www.w3.org/1999/xhtml">
	<b>test</b> content
      </div>
    </summary>
    <content:encoded>
      should appear
    </content:encoded>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry content html works
Expect: var content = feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).content.plainText(); content == "test content";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    <content type="html">&lt;b>test&lt;/b> content</content>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry content xhtml works
Expect: var content = feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).content.text; content == "<b>test</b> content";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    <content type="xhtml">
      <div xmlns="http://www.w3.org/1999/xhtml">
	<b>test</b> content
      </div>
    </content>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry content xhtml works
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).content.plainText() == "test content";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    <content type="xhtml">
      <div xmlns="http://www.w3.org/1999/xhtml">
	<b>test</b> content
      </div>
    </content>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry summary works
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).content.plainText() == "test content";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    <content>test content</content>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom author name works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).contributors.queryElementAt(0, Components.interfaces.nsIFeedPerson).name=='John Doe Entry';

-->

<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2003-12-13T18:30:02Z</updated>
  <author>
       <name>John Doe</name>
  </author>
  <id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>

  <entry>
    <title>Atom-Powered Robots Run Amok</title>
    <link href="http://example.org/2003/12/13/atom03"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>
    <summary>Some text.</summary>
    <contributor>
      <name>John Doe Entry</name>
    </contributor>
  </entry>

</feed>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: HTML title w/ CDATA
Expect: var title = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).title.plainText(); title == "<title>";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
<id>http://atomtests.philringnalda.com/tests/item/title/html-cdata.atom</id>
<title>Atom item title html cdata</title>
<updated>2005-12-18T00:13:00Z</updated>
<author>
  <name>Phil Ringnalda</name>
  <uri>http://weblog.philringnalda.com/</uri>
</author>
<link rel="self" href="http://atomtests.philringnalda.com/tests/item/title/html-cdata.atom"/>
<entry>
  <id>http://atomtests.philringnalda.com/tests/item/title/html-cdata.atom/1</id>
  <title type="html"><![CDATA[&lt;title>]]></title>
  <updated>2005-12-18T00:13:00Z</updated>
  <summary>An item with a type="html" title consisting of a less-than 
character, the word 'title' and a greater-than character, where 
the character entity reference for the less-than is escaped by being
in a CDATA section.</summary>
  <link href="http://atomtests.philringnalda.com/alt/title-title.html"/>
  <category term="item title"/>
</entry>
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry id
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).id == "http://foo.example.com/hmm/ok,2006,07,11";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    <id>http://foo.example.com/hmm/ok,2006,07,11</id>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with random link relations
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.snellspace.com/public/linktests/alternate";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />

  

  <entry>

    <id>tag:snellspace.com,2006:/atom/conformance/linktest/4</id>
    <title>One of each core link rel type + An additional alternate link</title>
    <updated>2005-01-18T15:00:04Z</updated>
    <summary>The aggregator should pick either the first or last links as the alternate. First link is likely better.</summary>
    <link href="http://www.snellspace.com/public/linktests/alternate" />
    <link rel="enclosure" href="http://www.snellspace.com/public/linktests/enclosure" length="19" />
    <link rel="related" href="http://www.snellspace.com/public/linktests/related" />

    <link rel="self" href="http://www.snellspace.com/public/linktests/self" />
    <link rel="via" href="http://www.snellspace.com/public/linktests/via" />
    <link rel="alternate" type="text/plain" href="http://www.snellspace.com/public/linktests/alternate2" />
  </entry>  
  
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with random link relations
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.snellspace.com/public/linktests/alternate";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />

  <entry>
    <id>tag:snellspace.com,2006:/atom/conformance/linktest/3</id>
    <title>One of each core link rel type</title>

    <updated>2005-01-18T15:00:03Z</updated>
    <summary>The aggregator should pick the first link as the alternate</summary>
    <link href="http://www.snellspace.com/public/linktests/alternate" />
    <link rel="enclosure" href="http://www.snellspace.com/public/linktests/enclosure" length="19" />
    <link rel="related" href="http://www.snellspace.com/public/linktests/related" />
    <link rel="self" href="http://www.snellspace.com/public/linktests/self" />
    <link rel="via" href="http://www.snellspace.com/public/linktests/via" />
  </entry>  
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with random link relations
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.snellspace.com/public/linktests/alternate";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />

  <entry>
    <id>tag:snellspace.com,2006:/atom/conformance/linktest/2</id>
    <title>Two alternate links</title>
    <updated>2005-01-18T15:00:02Z</updated>
    <summary>The aggregator should pick either the second or third link below as the alternate</summary>

    <link rel="ALTERNATE" href="http://www.snellspace.com/public/linktests/wrong" />    
    <link href="http://www.snellspace.com/public/linktests/alternate" />
    <link type="text/plain" href="http://www.snellspace.com/public/linktests/alternate2" />
    <link rel="ALTERNATE" href="http://www.snellspace.com/public/linktests/wrong" />
  </entry>
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with random link relations
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.snellspace.com/public/linktests/alternate";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />
  <entry>
    <id>tag:snellspace.com,2006:/atom/conformance/linktest/5</id>
    <title>Entry with a link relation registered by an extension</title>
    <updated>2005-01-18T15:00:05Z</updated>
    <summary>The aggregator should ignore the license link without throwing any errors.  The first link should be picked as the alternate.</summary>
    <link href="http://www.snellspace.com/public/linktests/alternate" />
    <link rel="payment" href="http://www.example.org/payment" />
  </entry>
  
  
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item enclosure added to enclosures
Expect: var encs = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).enclosures; encs.QueryInterface(Components.interfaces.nsIArray); var enc = encs.queryElementAt(0, Components.interfaces.nsIPropertyBag2); ((enc.getProperty('length') == '24986239') && (enc.getProperty('type') == 'audio/mpeg') && (enc.getProperty('url') == 'http://dallas.example.com/joebob_050689.mp3'));

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />

  

  <entry>

    <id>tag:snellspace.com,2006:/atom/conformance/linktest/4</id>
    <title>One of each core link rel type + An additional alternate link</title>
    <updated>2005-01-18T15:00:04Z</updated>
    <summary>The aggregator should pick either the first or last links as the alternate. First link is likely better.</summary>
    <link rel="enclosure" length="24986239" type="audio/mpeg" href="http://dallas.example.com/joebob_050689.mp3" /> 
  </entry>  
  
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item enclosure works
Expect: var links = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('links'); links.QueryInterface(Components.interfaces.nsIArray); var link = links.queryElementAt(0, Components.interfaces.nsIPropertyBag2); ((link.getProperty('length') == '24986239') && (link.getProperty('type') == 'audio/mpeg') && (link.getProperty('href') == 'http://dallas.example.com/joebob_050689.mp3') && (feed.type == 1) && (feed.enclosureCount == 1));

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />

  

  <entry>

    <id>tag:snellspace.com,2006:/atom/conformance/linktest/4</id>
    <title>One of each core link rel type + An additional alternate link</title>
    <updated>2005-01-18T15:00:04Z</updated>
    <summary>The aggregator should pick either the first or last links as the alternate. First link is likely better.</summary>
    <link rel="enclosure" length="24986239" type="audio/mpeg" href="http://dallas.example.com/joebob_050689.mp3" /> 
  </entry>  
  
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with IANA URI link relations
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.snellspace.com/public/alternate";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />
  
  <entry>
    <id>tag:example.org,2006:/linkreltest/1</id>
    <title>Does your reader support http://www.iana.org/assignments/relation/alternate properly? </title>
    <updated>2006-04-25T12:12:12Z</updated>
   <link rel="http://example.org/random"
         href="http://www.snellspace.com/public/random" /> 
    <link rel="http://www.iana.org/assignments/relation/alternate"
          href="http://www.snellspace.com/public/alternate" />
   <link rel="http://example.org/random"
         href="http://www.snellspace.com/public/random" /> 
    <content>This entry uses link/@rel="http://www.iana.org/assignments/relation/alternate".</content>
  </entry>
  
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with random link relations
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.snellspace.com/public/linktests/alternate";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />
  
  <entry>
    <id>tag:snellspace.com,2006:/atom/conformance/linktest/6</id>
    <title>Entry with a link relation identified by URI</title>
    <updated>2005-01-18T15:00:06Z</updated>
    <summary>The aggregator should ignore the second link without throwing any errors.  The first link should be picked as the alternate.</summary>
    <link href="http://www.snellspace.com/public/linktests/alternate" />
    <link rel="http://example.org" href="http://www.snellspace.com/public/linktests/example" />
  </entry>
  
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with random link relations
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.snellspace.com/public/linktests/alternate";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />

    
  <entry>
    <id>tag:snellspace.com,2006:/atom/conformance/linktest/5</id>
    <title>Entry with a link relation registered by an extension</title>
    <updated>2005-01-18T15:00:05Z</updated>
    <summary>The aggregator should ignore the license link without throwing any errors.  The first link should be picked as the alternate.</summary>
    <link href="http://www.snellspace.com/public/linktests/alternate" />
    <link rel="payment" href="http://www.example.org/payment" />
  </entry>
  
  
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with random link relations
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.snellspace.com/public/linktests/alternate";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:snellspace.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-01-18T15:10:00Z</updated>
  <author><name>James Snell</name></author>
  <link href="http://www.intertwingly.net/wiki/pie/LinkConformanceTests" />
  <link rel="self" href="http://www.snellspace.com/public/linktests.xml" />

  <entry>
    <id>tag:snellspace.com,2006:/atom/conformance/linktest/1</id>
    <title>Just a single Alternate Link</title>
    <updated>2005-01-18T15:00:01Z</updated>
    <summary>The aggregator should pick the second link as the alternate</summary>
    <link rel="http://example.org/random"
         href="http://www.snellspace.com/public/wrong" /> 
    <link href="http://www.snellspace.com/public/linktests/alternate" />
    <link rel="http://example.org/random"
         href="http://www.snellspace.com/public/wrong" /> 
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom published works
Expect: var entry = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry); entry.published == 'Tue, 09 Dec 2003 18:30:02 GMT'

-->

<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2003-12-13T18:30:02Z</updated>
  <author>
       <name>John Doe</name>
  </author>
  <id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>

  <entry>
    <title>Atom-Powered Robots Run Amok</title>
    <link href="http://example.org/2003/12/13/atom03"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>
    <published>2003-12-09T18:30:02Z</published>
    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry rights works normalized
Expect:      feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).rights.plainText() == "test rights"

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> title</div>
  </title>
  <entry>
    <rights type="xhtml">
      <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> rights</div>
    </rights>
  </entry>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry summary xhtml works
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).summary.plainText() == "test summary";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux"
      xmlns:content="http://purl.org/rss/1.0/modules/content/">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    <summary type="xhtml">
      <div xmlns="http://www.w3.org/1999/xhtml">
	<b>test</b> summary
      </div>
    </summary>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry title normalized
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).title.text == "test";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom feed and entry with random attributes works
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).title.text == "test";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom updated works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).updated == 'Sat, 13 Dec 2003 18:30:02 GMT'

-->

<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2003-12-13T18:30:02Z</updated>
  <author>
       <name>John Doe</name>
  </author>
  <id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>

  <entry>
    <title>Atom-Powered Robots Run Amok</title>
    <link href="http://example.org/2003/12/13/atom03"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>
    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry content:encoded and xhtml works
Expect: var content = feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).content.text; content == "<b>test</b> content";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux"
      xmlns:content="http://purl.org/rss/1.0/modules/content/">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  

  <entry></entry>

  <entry foo:bar="baz">
    <title>test</title>
    <content type="xhtml">
      <div xmlns="http://www.w3.org/1999/xhtml">
	<b>test</b> content
      </div>
    </content>
    <content:encoded>
      shouldn't appear
    </content:encoded>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry content xhtml works with a base URI that contains an ampersand.
Base: http://www.travellerspoint.com/photo_gallery_feed.cfm?tags=Canada&onlyShowFeatured=true
Expect: var frag = null; var content = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).content; var parser = Components.classes["@mozilla.org/xmlextras/domparser;1"].createInstance(Components.interfaces.nsIDOMParser); var doc = parser.parseFromString("<div/>", "text/xml"); frag = content.createDocumentFragment(doc.documentElement); notEqual(frag, null, "frag is not null"); true;

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>

  <entry foo:bar="baz">
    <title>test</title>
    <content type="xhtml">
      <div xmlns="http://www.w3.org/1999/xhtml">
	<b>test</b> content
      </div>
    </content>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with xml:base
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.example.org/bar/foo";

-->
<feed xmlns="http://www.w3.org/2005/Atom">

  <id>tag:example.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-06-18T16:13:00Z</updated>
  <link href="http://www.example.org" />
  
  <entry xml:base="http://www.example.org">
    <id>tag:example.org,2006:/linkreltest/1</id>
    <title>Does your reader support xml:base properly? </title>
    <updated>2006-06-23T12:12:12Z</updated>
    <link xml:base="/bar/" href="foo"/>
  </entry>
  
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry with xml:base
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == "http://www.example.org/foo";

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>tag:example.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-06-18T6:23:00Z</updated>
  <link href="http://www.example.org" />
  
  <entry xml:base="http://www.example.org">
    <id>tag:example.org,2006:/linkreltest/1</id>
    <title>Does your reader support xml:base properly? </title>
    <updated>2006-06-23T12:12:12Z</updated>
    <link href="foo"/>
  </entry>
  
</feed>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.27 $"/>
		<generation date="$Date: 2008/05/25 01:05:51 $"/>
		<language type="en"/> 
    <territory type="US"/> 
    <variant type="POSIX"/> 
	</identity>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
        <version number="$Revision: 28846 $"/>
        <generation date="$Date: 2010/10/17 22:15:00 $"/>
		<language type="en"/> 
		<territory type="US"/> 
	</identity>
	
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
	<identity>

		<version number="$Revision: 1.4 $"/>
		<generation date="$Date: 2008/12/08 18:18:44 $"/>
		<language type="en"/>
	</identity>
    <rbnf>
        <rulesetGrouping type="DurationRules">
            <ruleset type="with-words">
                <rbnfrule value="0">0 seconds; 1 second; =0= seconds;</rbnfrule>
                <rbnfrule value="60" radix="60">←%%min←[, →→];</rbnfrule>
                <rbnfrule value="3600" radix="60">←%%hr←[, →→→];</rbnfrule>
            </ruleset>
            <ruleset type="min" access="private">
                <rbnfrule value="0">0 minutes; 1 minute; =0= minutes;</rbnfrule>
            </ruleset>
            <ruleset type="hr" access="private">
                <rbnfrule value="0">0 hours; 1 hour; =0= hours;</rbnfrule>
            </ruleset>
            <ruleset type="in-numerals">
                <rbnfrule value="0">=0= sec.;</rbnfrule>
                <rbnfrule value="60">=%%min-sec=;</rbnfrule>
                <rbnfrule value="3600">=%%hr-min-sec=;</rbnfrule>
            </ruleset>
            <ruleset type="min-sec" access="private">
                <rbnfrule value="0">:=00=;</rbnfrule>
                <rbnfrule value="60" radix="60">←0←→→;</rbnfrule>
            </ruleset>
            <ruleset type="hr-min-sec" access="private">
                <rbnfrule value="0">:=00=;</rbnfrule>
                <rbnfrule value="60" radix="60">←00←→→;</rbnfrule>
                <rbnfrule value="3600" radix="60">←#,##0←:→→→;</rbnfrule>
            </ruleset>
            <ruleset type="duration">
                <rbnfrule value="0">=%in-numerals=;</rbnfrule>
            </ruleset>
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp; ':' = '.' = ' ' = '-';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:32 $"/>
        <language type="eo"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 34023 $"/>
        <generation date="$Date: 2013-08-08 22:56:45 +0000 (Thu, 08 Aug 2013) $"/>
        <language type="es"/>
        <territory type="419"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:33 $"/>
        <language type="es"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:34 $"/>
        <language type="et"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.22 $"/>
		<generation date="$Date: 2008/05/25 01:05:51 $"/>
		<language type="eu"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="ewo"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>
<?xml-stylesheet href="svg.css" type="text/css"?>
<!DOCTYPE svg SYSTEM "SVG-20000202.dtd" > 
<!--<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 10 January 2000//EN" --> 
<!--  "http://www.w3.org/Graphics/SVG/SVG-19991203.dtd"> --> 
<svg xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.svg" 
     xmlns:html="http://www.w3.org/1999/xhtml">

  <html:script>
<![CDATA[

var gIsInit  = false;
var barXPnts = new Array();
var barYPnts = new Array();

var nodes = new Array();
var gBarMax   = 200;
var gHeight   = 80;
var gBarCount = 10;
var gBarDir   = 1;
var gGo       = true;

function init()
{
  dump("----------------\n");
  nodes[0] = findNode(document.documentElement, "bar21");
  nodes[1] = findNode(document.documentElement, "bar22");
  nodes[2] = findNode(document.documentElement, "bar23");
  nodes[3] = findNode(document.documentElement, "bargrid21");
  nodes[4] = findNode(document.documentElement, "bargrid22");
  nodes[5] = findNode(document.documentElement, "bargrid23");
  dump("----------------\n");
  gGo = true;
  setTimeout("moveit()", 100);
}
function stop()
{
  gGo = false;
}
function ChangeBar(name, height)
{
  today = new Date();
  stime = today.getMilliseconds();
  dump("----------------\n");
  str = name+"1";
  node = findNode(document.documentElement, str); 
  //node = document.getElementById(str);
  today = new Date();
  etime = today.getMilliseconds();
  dump("1----------------"+(etime-stime)+"\n");
  attr = document.createAttribute("points"); 
  attr.value = "30 " + height + " 30 210 50 210 50 " + height;
  node.attributes.setNamedItem(attr); 
  today = new Date();
  stime = today.getMilliseconds();
  dump("2----------------"+(stime-etime)+"\n");

  str = name+"2";
  node = findNode(document.documentElement, str); 
  dump("3----------------\n");
  attr.value = "30 " + height + " 50 " + height + " 60 " + (height-10) + " 40 " + (height-10);
  node.attributes.setNamedItem(attr); 
  dump("4----------------\n");

  str = name+"3";
  node = findNode(document.documentElement, str); 
  dump("5----------------\n");
  attr.value = "50 " + height + " 60 " + (height-10) + " 60 200 50 210";
  node.attributes.setNamedItem(attr); 
  dump("=================\n");
}

function ChangeBarWithNodes(node1, node2, node3, height)
{
  attr = document.createAttribute("points"); 
  attr.value = "30 " + height + " 30 210 50 210 50 " + height;
  node1.attributes.setNamedItem(attr); 

  attr.value = "30 " + height + " 50 " + height + " 60 " + (height-10) + " 40 " + (height-10);
  node2.attributes.setNamedItem(attr); 

  attr.value = "50 " + height + " 60 " + (height-10) + " 60 200 50 210";
  node3.attributes.setNamedItem(attr); 
}

function moveit()
{
  //ChangeBar("bar2", 150);
  //ChangeBar("bargrid2", 150);

  ChangeBarWithNodes(nodes[0], nodes[1], nodes[2], gHeight);
  ChangeBarWithNodes(nodes[3], nodes[4], nodes[5], gHeight);

  gHeight += gBarDir;
  gBarCount--;
  //dump("gHeight: "+gHeight+"   gBarCount: "+gBarCount+"  gBarDir: "+gBarDir+"\n");
  if (gHeight > gBarMax || gHeight < 1) {
    gBarDir *= -1;
    gBarCount = (Math.random() * 15)+3;
    //dump("Changining directions: "+gBarDir+"\n");
    if (gHeight > gBarMax) {
      gHeight = gBarMax;
    } else {
      gHeight = 1;
    }
  } else {
    if (gBarCount < 1) {
      gBarDir *= -1;
      gBarCount = (Math.random() * 15)+3;
      //dump("----> "+gBarCount+"\n");
    }
  }
  if (gGo) {
    setTimeout("moveit()", 100);
  }

}

function findNode(node, nodename)
{
  var type = node.nodeType;
  if (type == Node.ELEMENT_NODE) {

      // open tag
      //dump("\<" + node.tagName);

      // dump the attributes if any
      attributes = node.attributes;
      if (null != attributes) {
        var countAttrs = attributes.length;
        var index = 0;
        while(index < countAttrs) {
          att = attributes[index];
          if (null != att) {
            //dump(" " + att.name + "=" + att.value+" ["+nodename+"]\n");
            if (att.name == "id" && att.value == nodename) {
              //dump("Found it!\n");
              return node;
            }
          }
          index++;
        }
      }

      // recursively dump the children
      if (node.hasChildNodes()) {
	      // close tag
        //dump(">");

        // get the children
        var children = node.childNodes;
        var length = children.length;
        var count = 0;
        while(count < length) {
          child = children[count];
          fndNode = findNode(child, nodename);
          if (fndNode != null) {
            return fndNode;
          }
          count++;
        }
        //dump("</" + node.tagName + ">");
      } else {
	      // close tag
        //dump("/>");
      }

      
  }
  // if it's a piece of text just dump the text
  else if (type == Node.TEXT_NODE) {
      //dump(node.data);
  }
  return null;
}

]]>
  </html:script>	

  <g>
    <polyline x="55" y="10" id="bg" points="20 0 220 0 220 200 20 200"/> 
    <polyline x="55" y="10" id="bg" points="20 0 20 200 0 220 0 20 0 20  20 0"/> 
    <polyline x="55" y="10" id="bg" points="20 200 220 200 200 220 0 220"/> 

    <polyline x="55" y="10" id="grid" points="20 0 220 0 220 200 20 200"/> 
    <polyline x="55" y="10" id="grid" points="20 0 20 200 0 220 0 20 0 20"/> 
    <polyline x="55" y="10" id="grid" points="20 200 220 200 200 220 0 220"/> 

    <polyline x="55" y="10" id="grid" points="20  220 40  200  40   0"/> 
    <polyline x="55" y="10" id="grid" points="40  220 60  200  60   0"/> 
    <polyline x="55" y="10" id="grid" points="60  220 80  200  80   0"/> 
    <polyline x="55" y="10" id="grid" points="80  220 100 200  100  0"/> 
    <polyline x="55" y="10" id="grid" points="100 220 120 200  120  0"/> 
    <polyline x="55" y="10" id="grid" points="120 220 140 200  140  0"/> 
    <polyline x="55" y="10" id="grid" points="140 220 160 200  160  0"/> 
    <polyline x="55" y="10" id="grid" points="160 220 180 200  180  0"/> 
    <polyline x="55" y="10" id="grid" points="180 220 200 200  200  0"/> 

    <polygon x="55" y="10" id="bar1" points="30 60 30 210 50 210 50 60"/> 
    <polygon x="55" y="10" id="bar1" points="30 60 50 60 60 50 40 50"/> 
    <polygon x="55" y="10" id="bar1" points="50 60 60 50 60 200 50 210"/> 

    <polyline x="55" y="10" id="grid" points="30 60 30 210 50 210 50 60"/> 
    <polyline x="55" y="10" id="grid" points="30 60 50 60 60 50 40 50"/> 
    <polyline x="55" y="10" id="grid" points="50 60 60 50 60 200 50 210"/> 


    <polygon x="95" y="10" id="bar21" points="30 80 30 210 50 210 50 80"/> 
    <polygon x="95" y="10" id="bar22" points="30 80 50 80  60 70  40 70"/> 
    <polygon x="95" y="10" id="bar23" points="50 80 60 70  60 200 50 210"/> 

    <polyline x="95" y="10" id="bargrid21" points="30 80 30 210 50 210 50 80"/> 
    <polyline x="95" y="10" id="bargrid22" points="30 80 50 80  60 70  40 70"/> 
    <polyline x="95" y="10" id="bargrid23" points="50 80 60 70  60 200 50 210"/> 

    <polygon x="400" y="20" id="rect" points="10 10 50 10 50 50"/> 
    <polygon x="400" y="75" id="poly" points="10 10 50 10 50 50 45 70 32 32 80 20"/> 
    <polyline x="400" y="150" id="poly" points="10 10 50 10 50 50 45 70 32 32 80 20"/> 

  </g>
  <foreignobject>
    <html:div style="position:absolute;top:5px;left:385px;">Simple Polygons</html:div>
    <html:div style="position:absolute;top:240px;left:115px;">A Simple Graph</html:div>
    <html:input type="button" style="position:absolute;top:260px;left:350px;" onclick="init();" value="Start"/>
    <html:input type="button" style="position:absolute;top:260px;left:390px;" onclick="stop();" value="Stop"/>
  </foreignobject>
</svg> 
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="expanderBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xbl="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="expander" display="xul:vbox">
    <resources>
      <stylesheet src="chrome://global/skin/expander.css"/>
    </resources>
    <content>
      <xul:hbox align="center">
        <xul:button type="disclosure" class="expanderButton" anonid="disclosure" xbl:inherits="disabled" mousethrough="always"/>
        <xul:label class="header expanderButton" anonid="label" xbl:inherits="value=label,disabled" mousethrough="always" flex="1"/>
        <xul:button anonid="clear-button" xbl:inherits="label=clearlabel,disabled=cleardisabled,hidden=clearhidden" mousethrough="always" icon="clear"/>
      </xul:hbox>
      <xul:vbox flex="1" anonid="settings" class="settingsContainer" collapsed="true" xbl:inherits="align">
        <children/>
      </xul:vbox>
    </content>
    <implementation>
      <constructor><![CDATA[
        var settings = document.getAnonymousElementByAttribute(this, "anonid", "settings");
        var expander = document.getAnonymousElementByAttribute(this, "anonid", "disclosure");
        var open = this.getAttribute("open") == "true";
        settings.collapsed = !open;
        expander.open = open;
      ]]></constructor>
      <property name="open">
        <setter>
          <![CDATA[
            var settings = document.getAnonymousElementByAttribute(this, "anonid", "settings");
            var expander = document.getAnonymousElementByAttribute(this, "anonid", "disclosure");
            settings.collapsed = !val;
            expander.open = val;
            if (val)
              this.setAttribute("open", "true");
            else
              this.setAttribute("open", "false");
            return val;
          ]]>
        </setter>
        <getter>
          return this.getAttribute("open");
        </getter>
      </property>        
      <method name="onCommand">
        <parameter name="aEvent"/>
        <body><![CDATA[
          var element = aEvent.originalTarget;
          var button = element.getAttribute("anonid");
          switch (button) {
          case "disclosure":
          case "label":
            if (this.open == "true")
              this.open = false;
            else
              this.open = true;
            break;
          case "clear-button":
            var event = document.createEvent("Events");
            event.initEvent("clear", true, true);
            this.dispatchEvent(event);
            break;
          }
        ]]></body>
      </method>
    </implementation>
    <handlers>
      <handler event="command"><![CDATA[
        this.onCommand(event);
      ]]></handler>
      <handler event="click"><![CDATA[
        if (event.originalTarget.localName == "label")
          this.onCommand(event);
      ]]></handler>
    </handlers>
  </binding>
          
</bindings>

          
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE page [
<!ENTITY % extensionsDTD SYSTEM "chrome://mozapps/locale/extensions/extensions.dtd">
%extensionsDTD;
]>

<bindings id="addonBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">


  <!-- Rating - displays current/average rating, allows setting user rating -->
  <binding id="rating">
    <content>
      <xul:image class="star"
                 onmouseover="document.getBindingParent(this)._hover(1);"
                 onclick="document.getBindingParent(this).userRating = 1;"/>
      <xul:image class="star"
                 onmouseover="document.getBindingParent(this)._hover(2);"
                 onclick="document.getBindingParent(this).userRating = 2;"/>
      <xul:image class="star"
                 onmouseover="document.getBindingParent(this)._hover(3);"
                 onclick="document.getBindingParent(this).userRating = 3;"/>
      <xul:image class="star"
                 onmouseover="document.getBindingParent(this)._hover(4);"
                 onclick="document.getBindingParent(this).userRating = 4;"/>
      <xul:image class="star"
                 onmouseover="document.getBindingParent(this)._hover(5);"
                 onclick="document.getBindingParent(this).userRating = 5;"/>
    </content>

    <implementation>
      <constructor><![CDATA[
        this._updateStars();
      ]]></constructor>

      <property name="stars" readonly="true">
        <getter><![CDATA[
          return document.getAnonymousNodes(this);
        ]]></getter>
      </property>

      <property name="averageRating">
        <getter><![CDATA[
          if (this.hasAttribute("averagerating"))
            return this.getAttribute("averagerating");
          return -1;
        ]]></getter>
        <setter><![CDATA[
          this.setAttribute("averagerating", val);
          if (this.showRating == "average")
            this._updateStars();
        ]]></setter>
      </property>

      <property name="userRating">
        <getter><![CDATA[
          if (this.hasAttribute("userrating"))
            return this.getAttribute("userrating");
          return -1;
        ]]></getter>
        <setter><![CDATA[
          if (this.showRating != "user")
            return;
          this.setAttribute("userrating", val);
          if (this.showRating == "user")
            this._updateStars();
        ]]></setter>
      </property>

      <property name="showRating">
        <getter><![CDATA[
          if (this.hasAttribute("showrating"))
            return this.getAttribute("showrating");
          return "average";
        ]]></getter>
        <setter><![CDATA[
          if (val != "average" || val != "user")
            throw Components.Exception("Invalid value", Components.results.NS_ERROR_ILLEGAL_VALUE);
          this.setAttribute("showrating", val);
          this._updateStars();
        ]]></setter>
      </property>

      <method name="_updateStars">
        <body><![CDATA[
          var stars = this.stars;
          var rating = this[this.showRating + "Rating"];
          // average ratings can be non-whole numbers, round them so they
          // match to their closest star
          rating = Math.round(rating);
          for (let i = 0; i < stars.length; i++)
            stars[i].setAttribute("on", rating > i);
        ]]></body>
      </method>

      <method name="_hover">
        <parameter name="aScore"/>
        <body><![CDATA[
          if (this.showRating != "user")
            return;
          var stars = this.stars;
          for (let i = 0; i < stars.length; i++)
            stars[i].setAttribute("on", i <= (aScore -1));
        ]]></body>
      </method>

    </implementation>

    <handlers>
      <handler event="mouseout">
        this._updateStars();
      </handler>
    </handlers>
  </binding>

  <!-- Download progress - shows graphical progress of download and any
       related status message. -->
  <binding id="download-progress">
    <content>
      <xul:stack flex="1">
        <xul:hbox flex="1">
          <xul:hbox class="start-cap"/>
          <xul:progressmeter anonid="progress" class="progress" flex="1"
                             min="0" max="100"/>
          <xul:hbox class="end-cap"/>
        </xul:hbox>
        <xul:hbox class="status-container">
          <xul:spacer flex="1"/>
          <xul:label anonid="status" class="status"/>
          <xul:spacer flex="1"/>
          <xul:button anonid="cancel-btn" class="cancel"
                      tooltiptext="&progress.cancel.tooltip;"
                      oncommand="document.getBindingParent(this).cancel();"/>
        </xul:hbox>
      </xul:stack>
    </content>

    <implementation>
      <constructor><![CDATA[
        var progress = 0;
        if (this.hasAttribute("progress"))
          progress = parseInt(this.getAttribute("progress"));
        this.progress = progress;
      ]]></constructor>

      <field name="_progress">
        document.getAnonymousElementByAttribute(this, "anonid", "progress");
      </field>
      <field name="_cancel">
        document.getAnonymousElementByAttribute(this, "anonid", "cancel-btn");
      </field>
      <field name="_status">
        document.getAnonymousElementByAttribute(this, "anonid", "status");
      </field>

      <property name="progress">
        <getter><![CDATA[
          return this._progress.value;
        ]]></getter>
        <setter><![CDATA[
          this._progress.value = val;
          if (val == this._progress.max)
            this.setAttribute("complete", true);
          else
            this.removeAttribute("complete");
        ]]></setter>
      </property>

      <property name="maxProgress">
        <getter><![CDATA[
          return this._progress.max;
        ]]></getter>
        <setter><![CDATA[
          if (val == -1) {
            this._progress.mode = "undetermined";
          } else {
            this._progress.mode = "determined";
            this._progress.max = val;
          }
          this.setAttribute("mode", this._progress.mode);
        ]]></setter>
      </property>

      <property name="status">
        <getter><![CDATA[
          return this._status.value;
        ]]></getter>
        <setter><![CDATA[
          this._status.value = val;
        ]]></setter>
      </property>

      <method name="cancel">
        <body><![CDATA[
          this.mInstall.cancel();
        ]]></body>
      </method>
    </implementation>
  </binding>


  <!-- Sorters - displays and controls the sort state of a list. -->
  <binding id="sorters">
    <content orient="horizontal">
      <xul:button anonid="name-btn" class="sorter"
                  label="&sort.name.label;" tooltiptext="&sort.name.tooltip;"
                  oncommand="this.parentNode._handleChange('name');"/>
      <xul:button anonid="date-btn" class="sorter"
                  label="&sort.dateUpdated.label;"
                  tooltiptext="&sort.dateUpdated.tooltip;"
                  oncommand="this.parentNode._handleChange('updateDate');"/>
      <xul:button anonid="price-btn" class="sorter" hidden="true"
                  label="&sort.price.label;"
                  tooltiptext="&sort.price.tooltip;"
                  oncommand="this.parentNode._handleChange('purchaseAmount');"/>
      <xul:button anonid="relevance-btn" class="sorter" hidden="true"
                  label="&sort.relevance.label;"
                  tooltiptext="&sort.relevance.tooltip;"
                  oncommand="this.parentNode._handleChange('relevancescore');"/>
    </content>

    <implementation>
      <constructor><![CDATA[
        if (!this.hasAttribute("sortby"))
          this.setAttribute("sortby", "name");

        if (this.getAttribute("showrelevance") == "true")
          this._btnRelevance.hidden = false;

        if (this.getAttribute("showprice") == "true")
          this._btnPrice.hidden = false;

        this._refreshState();
      ]]></constructor>

      <field name="handler">null</field>
      <field name="_btnName">
        document.getAnonymousElementByAttribute(this, "anonid", "name-btn");
      </field>
      <field name="_btnDate">
        document.getAnonymousElementByAttribute(this, "anonid", "date-btn");
      </field>
      <field name="_btnPrice">
        document.getAnonymousElementByAttribute(this, "anonid", "price-btn");
      </field>
      <field name="_btnRelevance">
        document.getAnonymousElementByAttribute(this, "anonid", "relevance-btn");
      </field>

      <property name="sortBy">
        <getter><![CDATA[
          return this.getAttribute("sortby");
        ]]></getter>
        <setter><![CDATA[
          if (val != this.sortBy) {
            this.setAttribute("sortBy", val);
            this._refreshState();
          }
        ]]></setter>
      </property>

      <property name="ascending">
        <getter><![CDATA[
          return (this.getAttribute("ascending") == "true");
        ]]></getter>
        <setter><![CDATA[
          val = !!val;
          if (val != this.ascending) {
            this.setAttribute("ascending", val);
            this._refreshState();
          }
        ]]></setter>
      </property>

      <property name="showrelevance">
        <getter><![CDATA[
          return (this.getAttribute("showrelevance") == "true");
        ]]></getter>
        <setter><![CDATA[
          val = !!val;
          this.setAttribute("showrelevance", val);
          this._btnRelevance.hidden = !val;
        ]]></setter>
      </property>

      <property name="showprice">
        <getter><![CDATA[
          return (this.getAttribute("showprice") == "true");
        ]]></getter>
        <setter><![CDATA[
          val = !!val;
          this.setAttribute("showprice", val);
          this._btnPrice.hidden = !val;
        ]]></setter>
      </property>

      <method name="setSort">
        <parameter name="aSort"/>
        <parameter name="aAscending"/>
        <body><![CDATA[
          var sortChanged = false;
          if (aSort != this.sortBy) {
            this.setAttribute("sortby", aSort);
            sortChanged = true;
          }

          aAscending = !!aAscending;
          if (this.ascending != aAscending) {
            this.setAttribute("ascending", aAscending);
            sortChanged = true;
          }

          if (sortChanged)
            this._refreshState();
        ]]></body>
      </method>

      <method name="_handleChange">
        <parameter name="aSort"/>
        <body><![CDATA[
          const ASCENDING_SORT_FIELDS = ["name", "purchaseAmount"];

          // Toggle ascending if sort by is not changing, otherwise
          // name sorting defaults to ascending, others to descending
          if (aSort == this.sortBy)
            this.ascending = !this.ascending;
          else
            this.setSort(aSort, ASCENDING_SORT_FIELDS.indexOf(aSort) >= 0);
        ]]></body>
      </method>

      <method name="_refreshState">
        <body><![CDATA[
          var sortBy = this.sortBy;
          var checkState = this.ascending ? 2 : 1;

          if (sortBy == "name") {
            this._btnName.checkState = checkState;
            this._btnName.checked = true;
          } else {
            this._btnName.checkState = 0;
            this._btnName.checked = false;
          }

          if (sortBy == "updateDate") {
            this._btnDate.checkState = checkState;
            this._btnDate.checked = true;
          } else {
            this._btnDate.checkState = 0;
            this._btnDate.checked = false;
          }

          if (sortBy == "purchaseAmount") {
            this._btnPrice.checkState = checkState;
            this._btnPrice.checked = true;
          } else {
            this._btnPrice.checkState = 0;
            this._btnPrice.checked = false;
          }

          if (sortBy == "relevancescore") {
            this._btnRelevance.checkState = checkState;
            this._btnRelevance.checked = true;
          } else {
            this._btnRelevance.checkState = 0;
            this._btnRelevance.checked = false;
          }

          if (this.handler && "onSortChanged" in this.handler)
            this.handler.onSortChanged(sortBy, this.ascending);
        ]]></body>
      </method>
    </implementation>
  </binding>


  <!-- Categories list - displays the list of categories on the left pane. -->
  <binding id="categories-list"
           extends="chrome://global/content/bindings/richlistbox.xml#richlistbox">
    <implementation>
      <!-- This needs to be overridden to allow the fancy animation while not
           allowing that item to be selected when hiding.  -->
      <method name="_canUserSelect">
        <parameter name="aItem"/>
        <body>
        <![CDATA[
          if (aItem.hasAttribute("disabled") &&
              aItem.getAttribute("disabled") == "true")
            return false;
          var style = document.defaultView.getComputedStyle(aItem, "");
          return style.display != "none" && style.visibility == "visible";
        ]]>
        </body>
      </method>
    </implementation>
  </binding>


  <!-- Category item - an item in the category list. -->
  <binding id="category"
           extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <content align="center">
      <xul:image anonid="icon" class="category-icon"/>
      <xul:label anonid="name" class="category-name" flex="1" xbl:inherits="value=name"/>
      <xul:label anonid="badge" class="category-badge" xbl:inherits="value=count"/>
    </content>

    <implementation>
      <constructor><![CDATA[
        if (!this.hasAttribute("count"))
          this.setAttribute("count", 0);
      ]]></constructor>

      <property name="badgeCount">
        <getter><![CDATA[
          return this.getAttribute("count");
        ]]></getter>
        <setter><![CDATA[
          if (this.getAttribute("count") == val)
            return;

          this.setAttribute("count", val);
          var event = document.createEvent("Events");
          event.initEvent("CategoryBadgeUpdated", true, true);
          this.dispatchEvent(event);
        ]]></setter>
      </property>
    </implementation>
  </binding>


  <!-- Creator link - Name of a user/developer, providing a link if relevant. -->
  <binding id="creator-link">
    <content>
      <xul:label anonid="label" value="&addon.createdBy.label;"/>
      <xul:label anonid="creator-link" class="creator-link text-link"/>
      <xul:label anonid="creator-name" class="creator-name"/>
    </content>

    <implementation>
      <constructor><![CDATA[
        if (this.hasAttribute("nameonly") &&
            this.getAttribute("nameonly") == "true") {
          this._label.hidden = true;
        }
      ]]></constructor>

      <field name="_label">
        document.getAnonymousElementByAttribute(this, "anonid", "label");
      </field>
      <field name="_creatorLink">
        document.getAnonymousElementByAttribute(this, "anonid", "creator-link");
      </field>
      <field name="_creatorName">
        document.getAnonymousElementByAttribute(this, "anonid", "creator-name");
      </field>

      <method name="setCreator">
        <parameter name="aCreator"/>
        <parameter name="aHomepageURL"/>
        <body><![CDATA[
          if (!aCreator) {
            this.collapsed = true;
            return;
          }
          this.collapsed = false;
          var url = aCreator.url || aHomepageURL;
          var showLink = !!url;
          if (showLink) {
            this._creatorLink.value = aCreator.name;
            this._creatorLink.href = url;
          } else {
            this._creatorName.value = aCreator.name;
          }
          this._creatorLink.hidden = !showLink;
          this._creatorName.hidden = showLink;
        ]]></body>
      </method>
    </implementation>
  </binding>


  <!-- Install status - Displays the status of an install/upgrade. -->
  <binding id="install-status">
    <content>
      <xul:label anonid="message"/>
      <xul:progressmeter anonid="progress" class="download-progress"/>
      <xul:button anonid="purchase-remote-btn" hidden="true"
                  class="addon-control"
                  oncommand="document.getBindingParent(this).purchaseRemote();"/>
      <xul:button anonid="install-remote-btn" hidden="true"
                  class="addon-control install" label="&addon.install.label;"
                  tooltiptext="&addon.install.tooltip;"
                  oncommand="document.getBindingParent(this).installRemote();"/>
    </content>

    <implementation>
      <constructor><![CDATA[
        if (this.mInstall)
          this.initWithInstall(this.mInstall);
        else if (this.mControl.mAddon.install)
          this.initWithInstall(this.mControl.mAddon.install);
        else
          this.refreshState();
      ]]></constructor>

      <destructor><![CDATA[
        if (this.mInstall)
          this.mInstall.removeListener(this);
      ]]></destructor>

      <field name="_message">
        document.getAnonymousElementByAttribute(this, "anonid", "message");
      </field>
      <field name="_progress">
        document.getAnonymousElementByAttribute(this, "anonid", "progress");
      </field>
      <field name="_purchaseRemote">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "purchase-remote-btn");
      </field>
      <field name="_installRemote">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "install-remote-btn");
      </field>
      <field name="_restartNeeded">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "restart-needed");
      </field>
      <field name="_undo">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "undo-btn");
      </field>

      <method name="initWithInstall">
        <parameter name="aInstall"/>
        <body><![CDATA[
          if (this.mInstall) {
            this.mInstall.removeListener(this);
            this.mInstall = null;
          }
          this.mInstall = aInstall;
          this._progress.mInstall = aInstall;
          this.refreshState();
          this.mInstall.addListener(this);
        ]]></body>
      </method>

      <method name="refreshState">
        <body><![CDATA[
          var showInstallRemote = false;
          var showPurchase = false;

          if (this.mInstall) {

            switch (this.mInstall.state) {
              case AddonManager.STATE_AVAILABLE:
                if (this.mControl.getAttribute("remote") != "true")
                  break;

                this._progress.hidden = true;
                showInstallRemote = true;
                break;
              case AddonManager.STATE_DOWNLOADING:
                this.showMessage("installDownloading");
                break;
              case AddonManager.STATE_CHECKING:
                this.showMessage("installVerifying");
                break;
              case AddonManager.STATE_DOWNLOADED:
                this.showMessage("installDownloaded");
                break;
              case AddonManager.STATE_DOWNLOAD_FAILED:
                // XXXunf expose what error occured (bug 553487)
                this.showMessage("installDownloadFailed", true);
                break;
              case AddonManager.STATE_INSTALLING:
                this.showMessage("installInstalling");
                break;
              case AddonManager.STATE_INSTALL_FAILED:
                // XXXunf expose what error occured (bug 553487)
                this.showMessage("installFailed", true);
                break;
              case AddonManager.STATE_CANCELLED:
                this.showMessage("installCancelled", true);
                break;
            }

          } else if (this.mControl.mAddon.purchaseURL) {
            this._progress.hidden = true;
            showPurchase = true;
            this._purchaseRemote.label =
              gStrings.ext.formatStringFromName("addon.purchase.label",
                [this.mControl.mAddon.purchaseDisplayAmount], 1);
            this._purchaseRemote.tooltiptext =
              gStrings.ext.GetStringFromName("addon.purchase.tooltip");
          }

          this._purchaseRemote.hidden = !showPurchase;
          this._installRemote.hidden = !showInstallRemote;

          if ("refreshInfo" in this.mControl)
            this.mControl.refreshInfo();
        ]]></body>
      </method>

      <method name="showMessage">
        <parameter name="aMsgId"/>
        <parameter name="aHideProgress"/>
        <body><![CDATA[
          this._message.setAttribute("hidden", !aHideProgress);
          this._progress.setAttribute("hidden", !!aHideProgress);

          var msg = gStrings.ext.GetStringFromName(aMsgId);
          if (aHideProgress)
            this._message.value = msg;
          else
            this._progress.status = msg;
        ]]></body>
      </method>

      <method name="purchaseRemote">
        <body><![CDATA[
          openURL(this.mControl.mAddon.purchaseURL);
        ]]></body>
      </method>

      <method name="installRemote">
        <body><![CDATA[
          if (this.mControl.getAttribute("remote") != "true")
            return;

          if (this.mControl.mAddon.eula) {
            var data = {
              addon: this.mControl.mAddon,
              accepted: false
            };
            window.openDialog("chrome://mozapps/content/extensions/eula.xul", "_blank",
                              "chrome,dialog,modal,centerscreen,resizable=no", data);
            if (!data.accepted)
              return;
          }

          delete this.mControl.mAddon;
          this.mControl.mInstall = this.mInstall;
          this.mControl.setAttribute("status", "installing");
          this.mInstall.install();
        ]]></body>
      </method>

      <method name="undoAction">
        <body><![CDATA[
          if (!this.mAddon)
            return;
          var pending = this.mAddon.pendingOperations;
          if (pending & AddonManager.PENDING_ENABLE)
            this.mAddon.userDisabled = true;
          else if (pending & AddonManager.PENDING_DISABLE)
            this.mAddon.userDisabled = false;
          this.refreshState();
        ]]></body>
      </method>

      <method name="onDownloadStarted">
        <body><![CDATA[
          this.refreshState();
        ]]></body>
      </method>

      <method name="onDownloadEnded">
        <body><![CDATA[
          this.refreshState();
        ]]></body>
      </method>

      <method name="onDownloadFailed">
        <body><![CDATA[
          this.refreshState();
        ]]></body>
      </method>

      <method name="onDownloadProgress">
        <body><![CDATA[
          this._progress.maxProgress = this.mInstall.maxProgress;
          this._progress.progress = this.mInstall.progress;
        ]]></body>
      </method>

      <method name="onInstallStarted">
        <body><![CDATA[
          this._progress.progress = 0;
          this.refreshState();
        ]]></body>
      </method>

      <method name="onInstallEnded">
        <body><![CDATA[
          this.refreshState();
          if ("onInstallCompleted" in this.mControl)
            this.mControl.onInstallCompleted();
        ]]></body>
      </method>

      <method name="onInstallFailed">
        <body><![CDATA[
          this.refreshState();
        ]]></body>
      </method>
    </implementation>
  </binding>


  <!-- Addon - base - parent binding of any item representing an addon. -->
  <binding id="addon-base"
           extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <implementation>
      <method name="hasPermission">
        <parameter name="aPerm"/>
        <body><![CDATA[
          var perm = AddonManager["PERM_CAN_" + aPerm.toUpperCase()];
          return !!(this.mAddon.permissions & perm);
        ]]></body>
      </method>

      <method name="opRequiresRestart">
        <parameter name="aOperation"/>
        <body><![CDATA[
          var operation = AddonManager["OP_NEEDS_RESTART_" + aOperation.toUpperCase()];
          return !!(this.mAddon.operationsRequiringRestart & operation);
        ]]></body>
      </method>

      <method name="isPending">
        <parameter name="aAction"/>
        <body><![CDATA[
          var action = AddonManager["PENDING_" + aAction.toUpperCase()];
          return !!(this.mAddon.pendingOperations & action);
        ]]></body>
      </method>

      <method name="onUninstalled">
        <body><![CDATA[
          this.parentNode.removeChild(this);
        ]]></body>
      </method>
    </implementation>
  </binding>


  <!-- Addon - generic - A normal addon item, or an update to one -->
  <binding id="addon-generic"
           extends="chrome://mozapps/content/extensions/extensions.xml#addon-base">
    <content>
      <xul:hbox anonid="warning-container"
                class="warning">
        <xul:image class="warning-icon"/>
        <xul:label anonid="warning" flex="1"/>
        <xul:label anonid="warning-link" class="text-link"/>
        <xul:button anonid="warning-btn" class="button-link"/>
        <xul:spacer flex="5000"/> <!-- Necessary to allow the message to wrap -->
      </xul:hbox>
      <xul:hbox anonid="error-container"
                class="error">
        <xul:image class="error-icon"/>
        <xul:label anonid="error" flex="1"/>
        <xul:label anonid="error-link" class="text-link"/>
        <xul:spacer flex="5000"/> <!-- Necessary to allow the message to wrap -->
      </xul:hbox>
      <xul:hbox anonid="pending-container"
                class="pending">
        <xul:image class="pending-icon"/>
        <xul:label anonid="pending" flex="1"/>
        <xul:button anonid="restart-btn" class="button-link"
                    label="&addon.restartNow.label;"
                    oncommand="document.getBindingParent(this).restart();"/>
        <xul:button anonid="undo-btn" class="button-link"
                    label="&addon.undoAction.label;"
                    tooltipText="&addon.undoAction.tooltip;"
                    oncommand="document.getBindingParent(this).undo();"/>
        <xul:spacer flex="5000"/> <!-- Necessary to allow the message to wrap -->
      </xul:hbox>

      <xul:hbox class="content-container">
        <xul:vbox class="icon-container">
          <xul:image anonid="icon" class="icon"/>
        </xul:vbox>
        <xul:vbox class="content-inner-container" flex="1">
          <xul:hbox class="basicinfo-container">
              <xul:hbox class="name-container">
                <xul:label anonid="name" class="name" crop="end" flex="1"
                           xbl:inherits="value=name,tooltiptext=name"/>
                <xul:label anonid="version" class="version"/>
                <xul:label class="disabled-postfix" value="&addon.disabled.postfix;"/>
                <xul:label class="update-postfix" value="&addon.update.postfix;"/>
                <xul:spacer flex="5000"/> <!-- Necessary to make the name crop -->
              </xul:hbox>
            <xul:label anonid="date-updated" class="date-updated"
                       unknown="&addon.unknownDate;"/>
          </xul:hbox>
          <xul:hbox class="experiment-container">
            <svg width="6" height="6" viewBox="0 0 6 6" version="1.1"
                 xmlns="http://www.w3.org/2000/svg"
                 class="experiment-bullet-container">
              <circle cx="3" cy="3" r="3" class="experiment-bullet"/>
            </svg>
            <xul:label anonid="experiment-state" class="experiment-state"/>
            <xul:label anonid="experiment-time" class="experiment-time"/>
          </xul:hbox>

          <xul:hbox class="advancedinfo-container" flex="1">
            <xul:vbox class="description-outer-container" flex="1">
              <xul:hbox class="description-container">
                <xul:label anonid="description" class="description" crop="end" flex="1"/>
                <xul:button anonid="details-btn" class="details button-link"
                            label="&addon.details.label;"
                            tooltiptext="&addon.details.tooltip;"
                            oncommand="document.getBindingParent(this).showInDetailView();"/>
                <xul:spacer flex="5000"/> <!-- Necessary to make the description crop -->
              </xul:hbox>
              <xul:vbox anonid="relnotes-container" class="relnotes-container">
                <xul:label class="relnotes-header" value="&addon.releaseNotes.label;"/>
                <xul:label anonid="relnotes-loading" value="&addon.loadingReleaseNotes.label;"/>
                <xul:label anonid="relnotes-error" hidden="true"
                           value="&addon.errorLoadingReleaseNotes.label;"/>
                <xul:vbox anonid="relnotes" class="relnotes"/>
              </xul:vbox>
              <xul:hbox class="relnotes-toggle-container">
                <xul:button anonid="relnotes-toggle-btn" class="relnotes-toggle"
                            hidden="true" label="&cmd.showReleaseNotes.label;"
                            tooltiptext="&cmd.showReleaseNotes.tooltip;"
                            showlabel="&cmd.showReleaseNotes.label;"
                            showtooltip="&cmd.showReleaseNotes.tooltip;"
                            hidelabel="&cmd.hideReleaseNotes.label;"
                            hidetooltip="&cmd.hideReleaseNotes.tooltip;"
                            oncommand="document.getBindingParent(this).toggleReleaseNotes();"/>
              </xul:hbox>
            </xul:vbox>
            <xul:vbox class="status-control-wrapper">
              <xul:hbox class="status-container">
                <xul:hbox anonid="checking-update" hidden="true">
                  <xul:image class="spinner"/>
                  <xul:label value="&addon.checkingForUpdates.label;"/>
                </xul:hbox>
                <xul:vbox anonid="update-available" class="update-available"
                          hidden="true">
                  <xul:checkbox anonid="include-update" class="include-update"
                                label="&addon.includeUpdate.label;" checked="true"
                                oncommand="document.getBindingParent(this).onIncludeUpdateChanged();"/>
                  <xul:hbox class="update-info-container">
                    <xul:label class="update-available-notice"
                               value="&addon.updateAvailable.label;"/>
                    <xul:button anonid="update-btn" class="addon-control update"
                                label="&addon.updateNow.label;"
                                tooltiptext="&addon.updateNow.tooltip;"
                                oncommand="document.getBindingParent(this).upgrade();"/>
                  </xul:hbox>
                </xul:vbox>
                <xul:hbox anonid="install-status" class="install-status"
                          hidden="true"/>
              </xul:hbox>
              <xul:hbox anonid="control-container" class="control-container">
                <xul:button anonid="preferences-btn"
                            class="addon-control preferences"
#ifdef XP_WIN
                            label="&cmd.showPreferencesWin.label;"
                            tooltiptext="&cmd.showPreferencesWin.tooltip;"
#else
                            label="&cmd.showPreferencesUnix.label;"
                            tooltiptext="&cmd.showPreferencesUnix.tooltip;"
#endif
                            oncommand="document.getBindingParent(this).showPreferences();"/>
                            <!-- label="&cmd.debugAddon.label;" -->
                <xul:button anonid="debug-btn" class="addon-control debug"
                            label="&cmd.debugAddon.label;"
                            oncommand="document.getBindingParent(this).debug();"/>

                <xul:button anonid="enable-btn"  class="addon-control enable"
                            label="&cmd.enableAddon.label;"
                            oncommand="document.getBindingParent(this).userDisabled = false;"/>
                <xul:button anonid="disable-btn" class="addon-control disable"
                            label="&cmd.disableAddon.label;"
                            oncommand="document.getBindingParent(this).userDisabled = true;"/>
                <xul:button anonid="remove-btn" class="addon-control remove"
                            label="&cmd.uninstallAddon.label;"
                            oncommand="document.getBindingParent(this).uninstall();"/>
                <xul:menulist anonid="state-menulist"
                              class="addon-control state"
                              tooltiptext="&cmd.stateMenu.tooltip;">
                  <xul:menupopup>
                    <xul:menuitem anonid="ask-to-activate-menuitem"
                                  class="addon-control"
                                  label="&cmd.askToActivate.label;"
                                  tooltiptext="&cmd.askToActivate.tooltip;"
                                  oncommand="document.getBindingParent(this).userDisabled = AddonManager.STATE_ASK_TO_ACTIVATE;"/>
                    <xul:menuitem anonid="always-activate-menuitem"
                                  class="addon-control"
                                  label="&cmd.alwaysActivate.label;"
                                  tooltiptext="&cmd.alwaysActivate.tooltip;"
                                  oncommand="document.getBindingParent(this).userDisabled = false;"/>
                    <xul:menuitem anonid="never-activate-menuitem"
                                  class="addon-control"
                                  label="&cmd.neverActivate.label;"
                                  tooltiptext="&cmd.neverActivate.tooltip;"
                                  oncommand="document.getBindingParent(this).userDisabled = true;"/>
                  </xul:menupopup>
                </xul:menulist>
              </xul:hbox>
            </xul:vbox>
          </xul:hbox>
        </xul:vbox>
      </xul:hbox>
    </content>

    <implementation>
      <constructor><![CDATA[
        this._installStatus.mControl = this;

        this.setAttribute("contextmenu", "addonitem-popup");

        this._showStatus("none");

        this._initWithAddon(this.mAddon);

        gEventManager.registerAddonListener(this, this.mAddon.id);
      ]]></constructor>

      <destructor><![CDATA[
        gEventManager.unregisterAddonListener(this, this.mAddon.id);
      ]]></destructor>

      <field name="_warningContainer">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "warning-container");
      </field>
      <field name="_warning">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "warning");
      </field>
      <field name="_warningLink">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "warning-link");
      </field>
      <field name="_warningBtn">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "warning-btn");
      </field>
      <field name="_errorContainer">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "error-container");
      </field>
      <field name="_error">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "error");
      </field>
      <field name="_errorLink">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "error-link");
      </field>
      <field name="_pendingContainer">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "pending-container");
      </field>
      <field name="_pending">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "pending");
      </field>
      <field name="_infoContainer">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "info-container");
      </field>
      <field name="_info">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "info");
      </field>
      <field name="_version">
        document.getAnonymousElementByAttribute(this, "anonid", "version");
      </field>
      <field name="_experimentState">
        document.getAnonymousElementByAttribute(this, "anonid", "experiment-state");
      </field>
      <field name="_experimentTime">
        document.getAnonymousElementByAttribute(this, "anonid", "experiment-time");
      </field>
      <field name="_icon">
        document.getAnonymousElementByAttribute(this, "anonid", "icon");
      </field>
      <field name="_dateUpdated">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "date-updated");
      </field>
      <field name="_description">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "description");
      </field>
      <field name="_stateMenulist">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "state-menulist");
      </field>
      <field name="_askToActivateMenuitem">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "ask-to-activate-menuitem");
      </field>
      <field name="_alwaysActivateMenuitem">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "always-activate-menuitem");
      </field>
      <field name="_neverActivateMenuitem">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "never-activate-menuitem");
      </field>
      <field name="_preferencesBtn">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "preferences-btn");
      </field>
      <field name="_enableBtn">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "enable-btn");
      </field>
      <field name="_debugBtn">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "debug-btn");
      </field>
      <field name="_disableBtn">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "disable-btn");
      </field>
      <field name="_removeBtn">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "remove-btn");
      </field>
      <field name="_updateBtn">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "update-btn");
      </field>
      <field name="_controlContainer">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "control-container");
      </field>
      <field name="_installStatus">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "install-status");
      </field>
      <field name="_checkingUpdate">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "checking-update");
      </field>
      <field name="_updateAvailable">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "update-available");
      </field>
      <field name="_includeUpdate">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "include-update");
      </field>
      <field name="_relNotesLoaded">false</field>
      <field name="_relNotesToggle">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "relnotes-toggle-btn");
      </field>
      <field name="_relNotesLoading">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "relnotes-loading");
      </field>
      <field name="_relNotesError">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "relnotes-error");
      </field>
      <field name="_relNotesContainer">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "relnotes-container");
      </field>
      <field name="_relNotes">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "relnotes");
      </field>

      <property name="userDisabled">
        <getter><![CDATA[
          return this.mAddon.userDisabled;
        ]]></getter>
        <setter><![CDATA[
          this.mAddon.userDisabled = val;
        ]]></setter>
      </property>

      <property name="includeUpdate">
        <getter><![CDATA[
          return this._includeUpdate.checked && !!this.mManualUpdate;
        ]]></getter>
        <setter><![CDATA[
          //XXXunf Eventually, we'll want to persist this for individual
          //       updates - see bug 594619.
          this._includeUpdate.checked = !!val;
        ]]></setter>
      </property>

      <method name="_initWithAddon">
        <parameter name="aAddon"/>
        <body><![CDATA[
          this.mAddon = aAddon;

          this._installStatus.mAddon = this.mAddon;
          this._updateDates();
          this._updateState();

          this.setAttribute("name", aAddon.name);

          var iconURL = this.mAddon.iconURL;
          if (iconURL)
            this._icon.src = iconURL;
          else
            this._icon.src = "";

          if (shouldShowVersionNumber(this.mAddon))
            this._version.value = this.mAddon.version;
          else
            this._version.hidden = true;

          if (this.mAddon.description)
            this._description.value = this.mAddon.description;
          else
            this._description.hidden = true;

          if (!("applyBackgroundUpdates" in this.mAddon) ||
              (this.mAddon.applyBackgroundUpdates == AddonManager.AUTOUPDATE_DISABLE ||
               (this.mAddon.applyBackgroundUpdates == AddonManager.AUTOUPDATE_DEFAULT &&
                !AddonManager.autoUpdateDefault))) {
            var self = this;
            AddonManager.getAllInstalls(function(aInstallsList) {
              // This can return after the binding has been destroyed,
              // so try to detect that and return early
              if (!("onNewInstall" in self))
                return;
              for (let install of aInstallsList) {
                if (install.existingAddon &&
                    install.existingAddon.id == self.mAddon.id &&
                    install.state == AddonManager.STATE_AVAILABLE) {
                  self.onNewInstall(install);
                  self.onIncludeUpdateChanged();
                }
              }
            });
          }
        ]]></body>
      </method>

      <method name="_showStatus">
        <parameter name="aType"/>
        <body><![CDATA[
          this._controlContainer.hidden = aType != "none" &&
                                          !(aType == "update-available" && !this.hasAttribute("upgrade"));

          this._installStatus.hidden = aType != "progress";
          if (aType == "progress")
            this._installStatus.refreshState();
          this._checkingUpdate.hidden = aType != "checking-update";
          this._updateAvailable.hidden = aType != "update-available";
          this._relNotesToggle.hidden = !(this.mManualUpdate ?
                                          this.mManualUpdate.releaseNotesURI :
                                          this.mAddon.releaseNotesURI);
        ]]></body>
      </method>

      <method name="_updateDates">
        <body><![CDATA[
          function formatDate(aDate) {
            return Cc["@mozilla.org/intl/scriptabledateformat;1"]
                     .getService(Ci.nsIScriptableDateFormat)
                     .FormatDate("",
                                 Ci.nsIScriptableDateFormat.dateFormatLong,
                                 aDate.getFullYear(),
                                 aDate.getMonth() + 1,
                                 aDate.getDate()
                                 );
          }

          if (this.mAddon.updateDate)
            this._dateUpdated.value = formatDate(this.mAddon.updateDate);
          else
            this._dateUpdated.value = this._dateUpdated.getAttribute("unknown");
        ]]></body>
      </method>

      <method name="_updateState">
        <body><![CDATA[
          if (this.parentNode.selectedItem == this)
            gViewController.updateCommands();

          var pending = this.mAddon.pendingOperations;
          if (pending != AddonManager.PENDING_NONE) {
            this.removeAttribute("notification");

            var pending = null;
            const PENDING_OPERATIONS = ["enable", "disable", "install",
                                        "uninstall", "upgrade"];
            for (let op of PENDING_OPERATIONS) {
              if (this.isPending(op))
                pending = op;
            }

            this.setAttribute("pending", pending);
            this._pending.textContent = gStrings.ext.formatStringFromName(
              "notification." + pending,
              [this.mAddon.name, gStrings.brandShortName], 2
            );
          } else {
            this.removeAttribute("pending");

            var isUpgrade = this.hasAttribute("upgrade");
            var install = this._installStatus.mInstall;

            if (install && install.state == AddonManager.STATE_DOWNLOAD_FAILED) {
              this.setAttribute("notification", "warning");
              this._warning.textContent = gStrings.ext.formatStringFromName(
                "notification.downloadError",
                [this.mAddon.name], 1
              );
              this._warningBtn.label = gStrings.ext.GetStringFromName("notification.downloadError.retry");
              this._warningBtn.tooltipText = gStrings.ext.GetStringFromName("notification.downloadError.retry.tooltip");
              this._warningBtn.setAttribute("oncommand", "document.getBindingParent(this).retryInstall();");
              this._warningBtn.hidden = false;
              this._warningLink.hidden = true;
            } else if (install && install.state == AddonManager.STATE_INSTALL_FAILED) {
              this.setAttribute("notification", "warning");
              this._warning.textContent = gStrings.ext.formatStringFromName(
                "notification.installError",
                [this.mAddon.name], 1
              );
              this._warningBtn.label = gStrings.ext.GetStringFromName("notification.installError.retry");
              this._warningBtn.tooltipText = gStrings.ext.GetStringFromName("notification.downloadError.retry.tooltip");
              this._warningBtn.setAttribute("oncommand", "document.getBindingParent(this).retryInstall();");
              this._warningBtn.hidden = false;
              this._warningLink.hidden = true;
            } else if (!isUpgrade && this.mAddon.blocklistState == Ci.nsIBlocklistService.STATE_BLOCKED) {
              this.setAttribute("notification", "error");
              this._error.textContent = gStrings.ext.formatStringFromName(
                "notification.blocked",
                [this.mAddon.name], 1
              );
              this._errorLink.value = gStrings.ext.GetStringFromName("notification.blocked.link");
              this._errorLink.href = this.mAddon.blocklistURL;
              this._errorLink.hidden = false;
            } else if ((!isUpgrade && !this.mAddon.isCompatible) && (AddonManager.checkCompatibility
            || (this.mAddon.blocklistState != Ci.nsIBlocklistService.STATE_SOFTBLOCKED))) {
              this.setAttribute("notification", "warning");
              this._warning.textContent = gStrings.ext.formatStringFromName(
                "notification.incompatible",
                [this.mAddon.name, gStrings.brandShortName, gStrings.appVersion], 3
              );
              this._warningLink.hidden = true;
              this._warningBtn.hidden = true;
            } else if (!isUpgrade && this.mAddon.blocklistState == Ci.nsIBlocklistService.STATE_SOFTBLOCKED) {
              this.setAttribute("notification", "warning");
              this._warning.textContent = gStrings.ext.formatStringFromName(
                "notification.softblocked",
                [this.mAddon.name], 1
              );
              this._warningLink.value = gStrings.ext.GetStringFromName("notification.softblocked.link");
              this._warningLink.href = this.mAddon.blocklistURL;
              this._warningLink.hidden = false;
              this._warningBtn.hidden = true;
            } else if (!isUpgrade && this.mAddon.blocklistState == Ci.nsIBlocklistService.STATE_OUTDATED) {
              this.setAttribute("notification", "warning");
              this._warning.textContent = gStrings.ext.formatStringFromName(
                "notification.outdated",
                [this.mAddon.name], 1
              );
              this._warningLink.value = gStrings.ext.GetStringFromName("notification.outdated.link");
              this._warningLink.href = Services.urlFormatter.formatURLPref("plugins.update.url");
              this._warningLink.hidden = false;
              this._warningBtn.hidden = true;
            } else if (!isUpgrade && this.mAddon.blocklistState == Ci.nsIBlocklistService.STATE_VULNERABLE_UPDATE_AVAILABLE) {
              this.setAttribute("notification", "error");
              this._error.textContent = gStrings.ext.formatStringFromName(
                "notification.vulnerableUpdatable",
                [this.mAddon.name], 1
              );
              this._errorLink.value = gStrings.ext.GetStringFromName("notification.vulnerableUpdatable.link");
              this._errorLink.href = this.mAddon.blocklistURL;
              this._errorLink.hidden = false;
            } else if (!isUpgrade && this.mAddon.blocklistState == Ci.nsIBlocklistService.STATE_VULNERABLE_NO_UPDATE) {
              this.setAttribute("notification", "error");
              this._error.textContent = gStrings.ext.formatStringFromName(
                "notification.vulnerableNoUpdate",
                [this.mAddon.name], 1
              );
              this._errorLink.value = gStrings.ext.GetStringFromName("notification.vulnerableNoUpdate.link");
              this._errorLink.href = this.mAddon.blocklistURL;
              this._errorLink.hidden = false;
            } else if (this.mAddon.id == "gmp-gmpopenh264" && !this.mAddon.isInstalled) {
              this.setAttribute("notification", "warning");
              this._warning.textContent = gStrings.ext.GetStringFromName("notification.openH264Pending");
            } else {
              this.removeAttribute("notification");
            }
          }

          this._preferencesBtn.hidden = (!this.mAddon.optionsURL) ||
                                        this.mAddon.optionsType == AddonManager.OPTIONS_TYPE_INLINE_INFO;

          let addonType = AddonManager.addonTypes[this.mAddon.type];
          if (addonType.flags & AddonManager.TYPE_SUPPORTS_ASK_TO_ACTIVATE) {
            this._enableBtn.disabled = true;
            this._disableBtn.disabled = true;
            this._askToActivateMenuitem.disabled = !this.hasPermission("ask_to_activate");
            this._alwaysActivateMenuitem.disabled = !this.hasPermission("enable");
            this._neverActivateMenuitem.disabled = !this.hasPermission("disable");
            if (this.mAddon.userDisabled === true) {
              this._stateMenulist.selectedItem = this._neverActivateMenuitem;
            } else if (this.mAddon.userDisabled == AddonManager.STATE_ASK_TO_ACTIVATE) {
              this._stateMenulist.selectedItem = this._askToActivateMenuitem;
            } else {
              this._stateMenulist.selectedItem = this._alwaysActivateMenuitem;
            }
            let hasActivatePermission =
              ["ask_to_activate", "enable", "disable"].some(perm => this.hasPermission(perm));
            this._stateMenulist.disabled = !hasActivatePermission;
            this._stateMenulist.hidden = false;
            this._stateMenulist.classList.add('no-auto-hide');
          } else {
            this._stateMenulist.hidden = true;
            if (this.hasPermission("enable")) {
              this._enableBtn.hidden = false;
              let tooltip = gViewController.commands["cmd_enableItem"]
                                           .getTooltip(this.mAddon);
              this._enableBtn.setAttribute("tooltiptext", tooltip);
            } else {
              this._enableBtn.hidden = true;
            }

            if (this.hasPermission("disable")) {
              this._disableBtn.hidden = false;
              let tooltip = gViewController.commands["cmd_disableItem"]
                                           .getTooltip(this.mAddon);
              this._disableBtn.setAttribute("tooltiptext", tooltip);
            } else {
              this._disableBtn.hidden = true;
            }
          }

          if (this.hasPermission("uninstall")) {
            this._removeBtn.hidden = false;
            let tooltip = gViewController.commands["cmd_uninstallItem"]
                                         .getTooltip(this.mAddon);
            this._removeBtn.setAttribute("tooltiptext", tooltip);
          } else {
            this._removeBtn.hidden = true;
          }

          this.setAttribute("active", this.mAddon.isActive);

          var showProgress = this.mAddon.purchaseURL || (this.mAddon.install &&
                             this.mAddon.install.state != AddonManager.STATE_INSTALLED);
          this._showStatus(showProgress ? "progress" : "none");

          let debuggable = this.mAddon.isDebuggable &&
                           Services.prefs.getBoolPref('devtools.chrome.enabled') &&
                           Services.prefs.getBoolPref('devtools.debugger.remote-enabled');

          this._debugBtn.disabled = this._debugBtn.hidden = !debuggable

          if (this.mAddon.type == "experiment") {
            this.removeAttribute("notification");
            let prefix = "experiment.";
            let active = this.mAddon.isActive;

            if (!showProgress) {
              let stateKey = prefix + "state." + (active ? "active" : "complete");
              this._experimentState.value = gStrings.ext.GetStringFromName(stateKey);

              let now = Date.now();
              let end = this.endDate;
              let days = Math.abs(end - now) / (24 * 60 * 60 * 1000);

              let timeKey = prefix + "time.";
              let timeMessage;

              if (days < 1) {
                timeKey += (active ? "endsToday" : "endedToday");
                timeMessage = gStrings.ext.GetStringFromName(timeKey);
              } else {
                timeKey += (active ? "daysRemaining" : "daysPassed");
                days = Math.round(days);
                let timeString = gStrings.ext.GetStringFromName(timeKey);
                timeMessage = PluralForm.get(days, timeString)
                                        .replace("#1", days);
              }

              this._experimentTime.value = timeMessage;
            }
          }
        ]]></body>
      </method>

      <method name="_updateUpgradeInfo">
        <body><![CDATA[
          // Only update the version string if we're displaying the upgrade info
          if (this.hasAttribute("upgrade") && shouldShowVersionNumber(this.mAddon))
            this._version.value = this.mManualUpdate.version;
        ]]></body>
      </method>

      <method name="_fetchReleaseNotes">
        <parameter name="aURI"/>
        <body><![CDATA[
          var self = this;
          if (!aURI || this._relNotesLoaded) {
            sendToggleEvent();
            return;
          }

          var relNotesData = null, transformData = null;

          this._relNotesLoaded = true;
          this._relNotesLoading.hidden = false;
          this._relNotesError.hidden = true;

          function sendToggleEvent() {
            var event = document.createEvent("Events");
            event.initEvent("RelNotesToggle", true, true);
            self.dispatchEvent(event);
          }

          function showRelNotes() {
            if (!relNotesData || !transformData)
              return;

            self._relNotesLoading.hidden = true;

            var processor = Components.classes["@mozilla.org/document-transformer;1?type=xslt"]
                                      .createInstance(Components.interfaces.nsIXSLTProcessor);
            processor.flags |= Components.interfaces.nsIXSLTProcessorPrivate.DISABLE_ALL_LOADS;

            processor.importStylesheet(transformData);
            var fragment = processor.transformToFragment(relNotesData, document);
            self._relNotes.appendChild(fragment);
            if (self.hasAttribute("show-relnotes")) {
              var container = self._relNotesContainer;
              container.style.height = container.scrollHeight + "px";
            }
            sendToggleEvent();
          }

          function handleError() {
            dataReq.abort();
            styleReq.abort();
            self._relNotesLoading.hidden = true;
            self._relNotesError.hidden = false;
            self._relNotesLoaded = false; // allow loading to be re-tried
            sendToggleEvent();
          }

          function handleResponse(aEvent) {
            var req = aEvent.target;
            var ct = req.getResponseHeader("content-type");
            if ((!ct || ct.indexOf("text/html") < 0) &&
                req.responseXML &&
                req.responseXML.documentElement.namespaceURI != XMLURI_PARSE_ERROR) {
              if (req == dataReq)
                relNotesData = req.responseXML;
              else
                transformData = req.responseXML;
              showRelNotes();
            } else {
              handleError();
            }
          }

          var dataReq = Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"]
                              .createInstance(Components.interfaces.nsIXMLHttpRequest);
          dataReq.open("GET", aURI.spec, true);
          dataReq.addEventListener("load", handleResponse, false);
          dataReq.addEventListener("error", handleError, false);
          dataReq.send(null);

          var styleReq = Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"]
                              .createInstance(Components.interfaces.nsIXMLHttpRequest);
          styleReq.open("GET", UPDATES_RELEASENOTES_TRANSFORMFILE, true);
          styleReq.addEventListener("load", handleResponse, false);
          styleReq.addEventListener("error", handleError, false);
          styleReq.send(null);
        ]]></body>
      </method>

      <method name="toggleReleaseNotes">
        <body><![CDATA[
          if (this.hasAttribute("show-relnotes")) {
            this._relNotesContainer.style.height = "0px";
            this.removeAttribute("show-relnotes");
            this._relNotesToggle.setAttribute(
              "label",
              this._relNotesToggle.getAttribute("showlabel")
            );
            this._relNotesToggle.setAttribute(
              "tooltiptext",
              this._relNotesToggle.getAttribute("showtooltip")
            );
            var event = document.createEvent("Events");
            event.initEvent("RelNotesToggle", true, true);
            this.dispatchEvent(event);
          } else {
            this._relNotesContainer.style.height = this._relNotesContainer.scrollHeight +
                                                   "px";
            this.setAttribute("show-relnotes", true);
            this._relNotesToggle.setAttribute(
              "label",
              this._relNotesToggle.getAttribute("hidelabel")
            );
            this._relNotesToggle.setAttribute(
              "tooltiptext",
              this._relNotesToggle.getAttribute("hidetooltip")
            );
            var uri = this.mManualUpdate ?
                      this.mManualUpdate.releaseNotesURI :
                      this.mAddon.releaseNotesURI;
            this._fetchReleaseNotes(uri);
          }
        ]]></body>
      </method>

      <method name="restart">
        <body><![CDATA[
          gViewController.commands["cmd_restartApp"].doCommand();
        ]]></body>
      </method>

      <method name="undo">
        <body><![CDATA[
          gViewController.commands["cmd_cancelOperation"].doCommand(this.mAddon);
        ]]></body>
      </method>

      <method name="uninstall">
        <body><![CDATA[
          // If uninstalling does not require a restart then just disable it
          // and show the undo UI.
          if (!this.opRequiresRestart("uninstall")) {
            this.setAttribute("wasDisabled", this.mAddon.userDisabled);

            // We must set userDisabled to true first, this will call
            // _updateState which will clear any pending attribute set.
            this.mAddon.userDisabled = true;

            // This won't update any other add-on manager views (bug 582002)
            this.setAttribute("pending", "uninstall");
          } else {
            this.mAddon.uninstall();
          }
        ]]></body>
      </method>

      <method name="debug">
        <body><![CDATA[
          gViewController.doCommand("cmd_debugItem", this.mAddon);
        ]]></body>
      </method>

      <method name="showPreferences">
        <body><![CDATA[
          gViewController.doCommand("cmd_showItemPreferences", this.mAddon);
        ]]></body>
      </method>

      <method name="upgrade">
        <body><![CDATA[
          var install = this.mManualUpdate;
          delete this.mManualUpdate;
          install.install();
        ]]></body>
      </method>

      <method name="retryInstall">
        <body><![CDATA[
          var install = this._installStatus.mInstall;
          if (!install)
            return;
          if (install.state != AddonManager.STATE_DOWNLOAD_FAILED &&
              install.state != AddonManager.STATE_INSTALL_FAILED)
            return;
          install.install();
        ]]></body>
      </method>

      <method name="showInDetailView">
        <body><![CDATA[
          gViewController.loadView("addons://detail/" +
                                   encodeURIComponent(this.mAddon.id));
        ]]></body>
      </method>

      <method name="onIncludeUpdateChanged">
        <body><![CDATA[
          var event = document.createEvent("Events");
          event.initEvent("IncludeUpdateChanged", true, true);
          this.dispatchEvent(event);
        ]]></body>
      </method>

      <method name="onEnabling">
        <body><![CDATA[
          this._updateState();
        ]]></body>
      </method>

      <method name="onEnabled">
        <body><![CDATA[
          this._updateState();
        ]]></body>
      </method>

      <method name="onDisabling">
        <body><![CDATA[
          this._updateState();
        ]]></body>
      </method>

      <method name="onDisabled">
        <body><![CDATA[
          this._updateState();
        ]]></body>
      </method>

      <method name="onUninstalling">
        <parameter name="aRestartRequired"/>
        <body><![CDATA[
          this._updateState();
        ]]></body>
      </method>

      <method name="onOperationCancelled">
        <body><![CDATA[
          this._updateState();
        ]]></body>
      </method>

      <method name="onPropertyChanged">
        <parameter name="aProperties"/>
        <body><![CDATA[
          if (aProperties.indexOf("appDisabled") != -1 ||
              aProperties.indexOf("userDisabled") != -1)
            this._updateState();
        ]]></body>
      </method>

      <method name="onNoUpdateAvailable">
        <body><![CDATA[
          this._showStatus("none");
        ]]></body>
      </method>

      <method name="onCheckingUpdate">
        <body><![CDATA[
          this._showStatus("checking-update");
        ]]></body>
      </method>

      <method name="onCompatibilityUpdateAvailable">
        <body><![CDATA[
          this._updateState();
        ]]></body>
      </method>

      <method name="onExternalInstall">
        <parameter name="aAddon"/>
        <parameter name="aExistingAddon"/>
        <parameter name="aNeedsRestart"/>
        <body><![CDATA[
          if (aExistingAddon.id != this.mAddon.id)
            return;

          // If the install completed without needing a restart then switch to
          // using the new Addon
          if (!aNeedsRestart)
            this._initWithAddon(aAddon);
          else
            this._updateState();
        ]]></body>
      </method>

      <method name="onNewInstall">
        <parameter name="aInstall"/>
        <body><![CDATA[
          if (this.mAddon.applyBackgroundUpdates == AddonManager.AUTOUPDATE_ENABLE)
            return;
          if (this.mAddon.applyBackgroundUpdates == AddonManager.AUTOUPDATE_DEFAULT &&
              AddonManager.autoUpdateDefault)
            return;

          this.mManualUpdate = aInstall;
          this._showStatus("update-available");
          this._updateUpgradeInfo();
        ]]></body>
      </method>

      <method name="onDownloadStarted">
        <parameter name="aInstall"/>
        <body><![CDATA[
          this._updateState();
          this._showStatus("progress");
          this._installStatus.initWithInstall(aInstall);
        ]]></body>
      </method>

      <method name="onInstallStarted">
        <parameter name="aInstall"/>
        <body><![CDATA[
          this._updateState();
          this._showStatus("progress");
          this._installStatus.initWithInstall(aInstall);
        ]]></body>
      </method>

      <method name="onInstallEnded">
        <parameter name="aInstall"/>
        <parameter name="aAddon"/>
        <body><![CDATA[
          // If the install completed without needing a restart then switch to
          // using the new Addon
          if (!(aAddon.pendingOperations & AddonManager.PENDING_INSTALL))
            this._initWithAddon(aAddon);
          else
            this._updateState();
        ]]></body>
      </method>

      <method name="onDownloadFailed">
        <body><![CDATA[
            this._updateState();
        ]]></body>
      </method>

      <method name="onInstallFailed">
        <body><![CDATA[
            this._updateState();
        ]]></body>
      </method>

      <method name="onInstallCancelled">
        <body><![CDATA[
            this._updateState();
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="click" button="0"><![CDATA[
        switch (event.detail) {
        case 1:
          // Prevent double-click where the UI changes on the first click
          this._lastClickTarget = event.originalTarget;
          break;
        case 2:
          if (event.originalTarget.localName != 'button' &&
              !event.originalTarget.classList.contains('text-link') &&
              event.originalTarget == this._lastClickTarget) {
            this.showInDetailView();
          }
          break;
        }
      ]]></handler>
    </handlers>
  </binding>


  <!-- Addon - uninstalled - An uninstalled addon that can be re-installed. -->
  <binding id="addon-uninstalled"
           extends="chrome://mozapps/content/extensions/extensions.xml#addon-base">
    <content>
      <xul:hbox class="pending">
        <xul:image class="pending-icon"/>
        <xul:label anonid="notice" flex="1"/>
        <xul:button anonid="restart-btn" class="button-link"
                    label="&addon.restartNow.label;"
                    command="cmd_restartApp"/>
        <xul:button anonid="undo-btn" class="button-link"
                    label="&addon.undoRemove.label;"
                    tooltiptext="&addon.undoRemove.tooltip;"
                    oncommand="document.getBindingParent(this).cancelUninstall();"/>
        <xul:spacer flex="5000"/> <!-- Necessary to allow the message to wrap -->
      </xul:hbox>
    </content>

    <implementation>
      <constructor><![CDATA[
        this._notice.textContent = gStrings.ext.formatStringFromName("uninstallNotice",
                                                                     [this.mAddon.name],
                                                                     1);

        if (!this.isPending("uninstall"))
          this._restartBtn.setAttribute("hidden", true);

        gEventManager.registerAddonListener(this, this.mAddon.id);
      ]]></constructor>

      <destructor><![CDATA[
        gEventManager.unregisterAddonListener(this, this.mAddon.id);
      ]]></destructor>

      <field name="_notice" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "notice");
      </field>
      <field name="_restartBtn" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "restart-btn");
      </field>

      <method name="cancelUninstall">
        <body><![CDATA[
          // This assumes that disabling does not require a restart when
          // uninstalling doesn't. Things will still work if not, the add-on
          // will just still be active until finally getting uninstalled.

          if (this.isPending("uninstall"))
            this.mAddon.cancelUninstall();
          else if (this.getAttribute("wasDisabled") != "true")
            this.mAddon.userDisabled = false;

          this.removeAttribute("pending");
        ]]></body>
      </method>

      <method name="onOperationCancelled">
        <body><![CDATA[
          if (!this.isPending("uninstall"))
            this.removeAttribute("pending");
        ]]></body>
      </method>

      <method name="onExternalInstall">
        <parameter name="aAddon"/>
        <parameter name="aExistingAddon"/>
        <parameter name="aNeedsRestart"/>
        <body><![CDATA[
          if (aExistingAddon.id != this.mAddon.id)
            return;

          // Make sure any newly installed add-on has the correct disabled state
          if (this.hasAttribute("wasDisabled"))
            aAddon.userDisabled = this.getAttribute("wasDisabled") == "true";

          // If the install completed without needing a restart then switch to
          // using the new Addon
          if (!aNeedsRestart)
            this.mAddon = aAddon;

          this.removeAttribute("pending");
        ]]></body>
      </method>

      <method name="onInstallStarted">
        <parameter name="aInstall"/>
        <body><![CDATA[
          // Make sure any newly installed add-on has the correct disabled state
          if (this.hasAttribute("wasDisabled"))
            aInstall.addon.userDisabled = this.getAttribute("wasDisabled") == "true";
        ]]></body>
      </method>

      <method name="onInstallEnded">
        <parameter name="aInstall"/>
        <parameter name="aAddon"/>
        <body><![CDATA[
          // If the install completed without needing a restart then switch to
          // using the new Addon
          if (!(aAddon.pendingOperations & AddonManager.PENDING_INSTALL))
            this.mAddon = aAddon;

          this.removeAttribute("pending");
        ]]></body>
      </method>
    </implementation>
  </binding>


  <!-- Addon - installing - an addon item that is currently being installed -->
  <binding id="addon-installing"
           extends="chrome://mozapps/content/extensions/extensions.xml#addon-base">
    <content>
      <xul:hbox anonid="warning-container" class="warning">
        <xul:image class="warning-icon"/>
        <xul:label anonid="warning" flex="1"/>
        <xul:button anonid="warning-link" class="button-link"
                   oncommand="document.getBindingParent(this).retryInstall();"/>
        <xul:spacer flex="5000"/> <!-- Necessary to allow the message to wrap -->
      </xul:hbox>
      <xul:hbox class="content-container">
        <xul:vbox class="icon-outer-container">
          <xul:vbox class="icon-container">
            <xul:image anonid="icon" class="icon"/>
          </xul:vbox>
        </xul:vbox>
        <xul:vbox class="fade name-outer-container" flex="1">
          <xul:hbox class="name-container">
            <xul:label anonid="name" class="name" crop="end"/>
            <xul:label anonid="version" class="version" hidden="true"/>
          </xul:hbox>
        </xul:vbox>
        <xul:vbox class="install-status-container">
          <xul:hbox anonid="install-status" class="install-status"/>
        </xul:vbox>
      </xul:hbox>
    </content>

    <implementation>
      <constructor><![CDATA[
        this._installStatus.mControl = this;
        this._installStatus.mInstall = this.mInstall;
        this.refreshInfo();
      ]]></constructor>

      <field name="_icon">
        document.getAnonymousElementByAttribute(this, "anonid", "icon");
      </field>
      <field name="_name">
        document.getAnonymousElementByAttribute(this, "anonid", "name");
      </field>
      <field name="_version">
        document.getAnonymousElementByAttribute(this, "anonid", "version");
      </field>
      <field name="_warning">
        document.getAnonymousElementByAttribute(this, "anonid", "warning");
      </field>
      <field name="_warningLink">
        document.getAnonymousElementByAttribute(this, "anonid", "warning-link");
      </field>
      <field name="_installStatus">
        document.getAnonymousElementByAttribute(this, "anonid",
                                                "install-status");
      </field>

      <method name="onInstallCompleted">
        <body><![CDATA[
          this.mAddon = this.mInstall.addon;
          this.setAttribute("name", this.mAddon.name);
          this.setAttribute("value", this.mAddon.id);
          this.setAttribute("status", "installed");
        ]]></body>
      </method>

      <method name="refreshInfo">
        <body><![CDATA[
          this.mAddon = this.mAddon || this.mInstall.addon;
          if (this.mAddon) {
            this._icon.src = this.mAddon.iconURL ||
                             (this.mInstall ? this.mInstall.iconURL : "");
            this._name.value = this.mAddon.name;

            if (this.mAddon.version) {
              this._version.value = this.mAddon.version;
              this._version.hidden = false;
            } else {
              this._version.hidden = true;
            }

          } else {
            this._icon.src = this.mInstall.iconURL;
            // AddonInstall.name isn't always available - fallback to filename
            if (this.mInstall.name) {
              this._name.value = this.mInstall.name;
            } else if (this.mInstall.sourceURI) {
              var url = Components.classes["@mozilla.org/network/standard-url;1"]
                                  .createInstance(Components.interfaces.nsIStandardURL);
              url.init(url.URLTYPE_STANDARD, 80, this.mInstall.sourceURI.spec,
                       null, null);
              url.QueryInterface(Components.interfaces.nsIURL);
              this._name.value = url.fileName;
            }

            if (this.mInstall.version) {
              this._version.value = this.mInstall.version;
              this._version.hidden = false;
            } else {
              this._version.hidden = true;
            }
          }

          if (this.mInstall.state == AddonManager.STATE_DOWNLOAD_FAILED) {
            this.setAttribute("notification", "warning");
            this._warning.textContent = gStrings.ext.formatStringFromName(
              "notification.downloadError",
              [this._name.value], 1
            );
            this._warningLink.label = gStrings.ext.GetStringFromName("notification.downloadError.retry");
            this._warningLink.tooltipText = gStrings.ext.GetStringFromName("notification.downloadError.retry.tooltip");
          } else if (this.mInstall.state == AddonManager.STATE_INSTALL_FAILED) {
            this.setAttribute("notification", "warning");
            this._warning.textContent = gStrings.ext.formatStringFromName(
              "notification.installError",
              [this._name.value], 1
            );
            this._warningLink.label = gStrings.ext.GetStringFromName("notification.installError.retry");
            this._warningLink.tooltipText = gStrings.ext.GetStringFromName("notification.downloadError.retry.tooltip");
          } else {
            this.removeAttribute("notification");
          }
        ]]></body>
      </method>

      <method name="retryInstall">
        <body><![CDATA[
          this.mInstall.install();
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="detail-row">
    <content>
      <xul:label class="detail-row-label" xbl:inherits="value=label"/>
      <xul:label class="detail-row-value" xbl:inherits="value"/>
    </content>

    <implementation>
      <property name="value">
        <getter><![CDATA[
          return this.getAttribute("value");
        ]]></getter>
        <setter><![CDATA[
          if (!val)
            this.removeAttribute("value");
          else
            this.setAttribute("value", val);
        ]]></setter>
      </property>
    </implementation>
  </binding>

</bindings>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml"  version="2.0">
 <its:externalResourceRefRule selector="//h:video/@src" externalResourceRefPointer="."/>
 <its:externalResourceRefRule selector="//h:video/@poster" externalResourceRefPointer="."/>
</its:rules>
<doc
  xmlns:its="http://www.w3.org/2005/11/its" 
  xmlns:dbk="http://docbook.org/ns/docbook" >
 <its:rules version="2.0">
  <its:externalResourceRefRule selector="//dbk:imagedata | //dbk:audiodata |  //dbk:videodata" externalResourceRefPointer="@fileref"/>
 </its:rules>
 <dbk:mediaobject>
  <dbk:videoobject>
   <dbk:videodata fileref="movie.avi"/>
  </dbk:videoobject>
  <dbk:imageobject>
   <dbk:imagedata fileref="movie-frame.gif"/>
  </dbk:imageobject>
  <dbk:textobject>
   <dbk:para>This video illustrates the proper way to assemble an inverting time distortion
       device. </dbk:para>
   <dbk:warning>
    <dbk:para> It is imperative that the primary and secondary temporal couplings not be
         mounted in the wrong order. Temporal catastrophe is the likely result. The
         future you destroy may be your own. </dbk:para>
   </dbk:warning>
  </dbk:textobject>
 </dbk:mediaobject>
</doc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml"  version="2.0">
 <its:param name="externalresourceParam">1</its:param>
 <its:externalResourceRefRule selector="//h:p[@id=$externalresourceParam]/h:video" externalResourceRefPointer="@poster"/>
</its:rules>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:dbk="http://docbook.org/ns/docbook" version="2.0">
  <its:externalResourceRefRule selector="//dbk:imagedata | //dbk:audiodata |  //dbk:videodata" externalResourceRefPointer="@fileref"/>
 </its:rules>
<doc
  xmlns:its="http://www.w3.org/2005/11/its" 
  xmlns:dbk="http://docbook.org/ns/docbook" >
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="externalresource2xmlrules.xml"/>
 <dbk:mediaobject>
  <dbk:videoobject>
   <dbk:videodata fileref="movie.avi"/>
  </dbk:videoobject>
  <dbk:imageobject>
   <dbk:imagedata fileref="movie-frame.gif"/>
  </dbk:imageobject>
  <dbk:textobject>
   <dbk:para>This video illustrates the proper way to assemble an inverting time distortion
       device. </dbk:para>
   <dbk:warning>
    <dbk:para> It is imperative that the primary and secondary temporal couplings not be
         mounted in the wrong order. Temporal catastrophe is the likely result. The
         future you destroy may be your own. </dbk:para>
   </dbk:warning>
  </dbk:textobject>
 </dbk:mediaobject>
</doc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:dbk="http://docbook.org/ns/docbook" version="2.0">
  <its:externalResourceRefRule selector="//dbk:imagedata |  //dbk:videodata" externalResourceRefPointer="@fileref"/>
 </its:rules>
<doc
  xmlns:its="http://www.w3.org/2005/11/its" 
  xmlns:dbk="http://docbook.org/ns/docbook" >
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="externalresource3xmlrules.xml"/>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:dbk="http://docbook.org/ns/docbook" version="2.0">
  <its:externalResourceRefRule selector="//dbk:audiodata" externalResourceRefPointer="@fileref"/>
 </its:rules>
 <dbk:mediaobject>
  <dbk:videoobject>
   <dbk:videodata fileref="movie.avi"/>
  </dbk:videoobject>
  <dbk:audioobject>
   <dbk:audiodata fileref="movie.mp3"/>
  </dbk:audioobject>
  <dbk:imageobject>
   <dbk:imagedata fileref="movie-frame.gif"/>
  </dbk:imageobject>
  <dbk:textobject>
   <dbk:para>This video illustrates the proper way to assemble an inverting time distortion
       device. </dbk:para>
   <dbk:warning>
    <dbk:para> It is imperative that the primary and secondary temporal couplings not be
         mounted in the wrong order. Temporal catastrophe is the likely result. The
         future you destroy may be your own. </dbk:para>
   </dbk:warning>
  </dbk:textobject>
 </dbk:mediaobject>
</doc>
<doc
  xmlns:its="http://www.w3.org/2005/11/its" 
  xmlns:dbk="http://docbook.org/ns/docbook" >
 <its:rules version="2.0">
   <its:param name="externalResourceParam">movie-frame.gif</its:param>
    <its:externalResourceRefRule selector="//dbk:imagedata[@fileref=$externalResourceParam]" externalResourceRefPointer="@fileref"/>
 </its:rules>
 <dbk:mediaobject>
  <dbk:videoobject>
   <dbk:videodata fileref="movie.avi"/>
  </dbk:videoobject>
  <dbk:imageobject>
   <dbk:imagedata fileref="movie-frame.gif"/>
  </dbk:imageobject>
  <dbk:textobject>
   <dbk:para>This video illustrates the proper way to assemble an inverting time distortion
       device. </dbk:para>
   <dbk:warning>
    <dbk:para> It is imperative that the primary and secondary temporal couplings not be
         mounted in the wrong order. Temporal catastrophe is the likely result. The
         future you destroy may be your own. </dbk:para>
   </dbk:warning>
  </dbk:textobject>
 </dbk:mediaobject>
</doc>
<its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:dbk="http://docbook.org/ns/docbook">
   <its:param name="externalResourceParam">movie-frame.gif</its:param>
  <its:externalResourceRefRule selector="//dbk:imagedata[@fileref=$externalResourceParam]" externalResourceRefPointer="@fileref"/>
 </its:rules>
<doc xmlns:dbk="http://docbook.org/ns/docbook" >
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="externalresource5xmlrules.xml"/>
 <dbk:mediaobject>
  <dbk:videoobject>
   <dbk:videodata fileref="movie.avi"/>
  </dbk:videoobject>
  <dbk:imageobject>
   <dbk:imagedata fileref="movie-frame.gif"/>
  </dbk:imageobject>
  <dbk:textobject>
   <dbk:para>This video illustrates the proper way to assemble an inverting time distortion
       device. </dbk:para>
   <dbk:warning>
    <dbk:para> It is imperative that the primary and secondary temporal couplings not be
         mounted in the wrong order. Temporal catastrophe is the likely result. The
         future you destroy may be your own. </dbk:para>
   </dbk:warning>
  </dbk:textobject>
 </dbk:mediaobject>
</doc>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:37 $"/>
        <language type="fa"/>
        <territory type="AF"/>
    </identity>
</ldml>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/facet_button_background_color_default" />
</shape>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/facet_button_background_color_pressed" />
</shape>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!--facet button is pressed (omitting currently-selected facet)-->
    <item
        android:state_pressed="true"
        android:state_checked="false"
        android:drawable="@drawable/facet_button_background_pressed"/>

    <!--default-->
    <item
        android:drawable="@drawable/facet_button_background_default"/>
</selector>
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- facet is selected -->
    <item android:state_checked="true" android:color="@color/facet_button_text_color_selected" />

    <!-- default -->
    <item android:color="@color/facet_button_text_color_default" />
</selector>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:36 $"/>
        <language type="fa"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom rights works with HTML
Expect: feed.fields.getProperty('atom:rights') != null

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> title</div>
  </title>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  <summary type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><div><div>test</div> summary</div></div>
  </summary>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom author count works
Expect: feed.authors.length == 2

-->
<feed xmlns="http://www.w3.org/2005/Atom">
<title>test title</title>
<author>
</author>
<author>
</author>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom author name works
Expect: feed.authors.queryElementAt(1, Components.interfaces.nsIFeedPerson).email=='bar@example.com';

-->
<feed xmlns="http://www.w3.org/2005/Atom">
<title>test title</title>
<author>
<email>hmm@example.com</email>
<name>foo</name>
</author>
<author>
<email>bar@example.com</email>
<name>foo</name>
</author>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom author name works
Expect: feed.authors.queryElementAt(0, Components.interfaces.nsIFeedPerson).email=='hmm@example.com';

-->
<feed xmlns="http://www.w3.org/2005/Atom">
<title>test title</title>
<author>
<email>hmm@example.com</email>
<name>foo</name>
</author>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom author name works
Expect: feed.authors.queryElementAt(0, Components.interfaces.nsIFeedPerson).name=='foo';

-->
<feed xmlns="http://www.w3.org/2005/Atom">
<title>test title</title>
<author>
<name>foo</name>
</author>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom author name works
Expect: feed.authors.queryElementAt(0, Components.interfaces.nsIFeedPerson).name=='John Doe';

-->

<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2003-12-13T18:30:02Z</updated>
  <author>
       <name>John Doe</name>
  </author>
  <id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>

  <entry>
    <title>Atom-Powered Robots Run Amok</title>
    <link href="http://example.org/2003/12/13/atom03"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>
    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom author uri works
Expect: feed.authors.queryElementAt(1, Components.interfaces.nsIFeedPerson).uri.spec =='http://example.com/';

-->
<feed xmlns="http://www.w3.org/2005/Atom">
<title>test title</title>
<author>
<email>hmm@example.com</email>
<name>foo</name>
<uri>http://example.org</uri>
</author>
<author>
<email>bar@example.com</email>
<name>foo</name>
<uri>http://example.com/</uri>
</author>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom author count works
Expect: feed.authors.length == 1;

-->
<feed xmlns="http://www.w3.org/2005/Atom">
<title>test title</title>
<author>
</author>
</feed><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ bogus title element
Expect: feed.title.text == 'Correct Title'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>



   <title>Bogus</title>



  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Correct Title</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>



   <title>Bogus</title>



  <item>
   <title>XML: A Disruptive Technology</title> 
    <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet.
    </dc:description>
  </item>
  <item>
 <dc:publisher>The O'Reilly Network</dc:publisher>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet 2.
    </dc:description>
    <title>XML: A Disruptive Technology</title> 
  </item>
</rdf:RDF>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel category works w/ domain
Expect:      feed.categories.length == 4

-->
<rss version="2.0" >
<channel>
<category>hmm0</category>
<category>hmm1</category>
<category domain="http://example.org">hmm2</category>
<category>hmm3</category>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel category works 
Expect:      feed.categories.queryElementAt(0, Components.interfaces.nsIPropertyBag).getProperty('term') == 'hmm'

-->
<rss version="2.0" >
<channel>
<category>hmm</category>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel cloud works
Expect:      ((feed.cloud.getProperty('domain')=="rpc.sys.com") && (feed.cloud.getProperty('port')=="80") && (feed.cloud.getProperty('path')=="/RPC2") && (feed.cloud.getProperty('registerProcedure')=="pingMe") && (feed.cloud.getProperty('protocol')=="soap"))

-->
<rss version="2.0" >
<channel>
<cloud domain="rpc.sys.com" port="80" path="/RPC2" registerProcedure="pingMe" protocol="soap"/>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: wfw works with extra attribute
Expect: feed.fields.getProperty('wfw:commentRss') == 'http://example.org'

-->

<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://example.org"
      xmlns:bla="http://wellformedweb.org/CommentAPI/">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2003-12-13T18:30:02Z</updated>
  <author>
       <name>John Doe</name>
  </author>
  <id foo:bar="baz">urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>
  <bla:commentRss hmm="yeah">http://example.org</bla:commentRss>
  <entry>
    <title>Atom-Powered Robots Run Amok</title>
    <link href="http://example.org/2003/12/13/atom03"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>
    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom contributor uri works
Expect: feed.contributors.queryElementAt(1, Components.interfaces.nsIFeedPerson).uri.spec=='http://example.com/';

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>test title</title>
  <contributor>
    <email>hmm@example.com</email>
    <name>foo</name>
    <uri>http://example.org</uri>
  </contributor>
  <contributor>
    <email>bar@example.com</email>
    <name>foo</name>
    <uri>http://example.com</uri>
  </contributor>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel copyright works 
Expect:      feed.fields.getProperty('copyright') == 'copyright 2005'

-->
<rss version="2.0" >
<channel>
<copyright>copyright 2005


</copyright>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel copyright works 
Expect:      feed.fields.getProperty('copyright') == 'copyright 2006'

-->
<rss version="2.0" >
<channel>
<copyright>copyright 2006</copyright>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel copyright works 
Expect:      feed.fields.getProperty('copyright') == 'copyright 2006'

-->
<rss version="2.0" >
<dc:creator xmlns:dc="http://example.org">heynow</dc:creator>
<channel>
<copyright>copyright 2006</copyright>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel copyright works 
Expect:      feed.contributors.queryElementAt(0, Components.interfaces.nsIFeedPerson).name == 'them';

-->
<rss version="2.0" >
<channel xmlns:dc="http://purl.org/dc/elements/1.1/">
<copyright>copyright 2006</copyright>
<dc:creator>me</dc:creator>
<dc:contributor>them</dc:contributor>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel copyright works 
Expect: feed.authors.queryElementAt(0, Components.interfaces.nsIFeedPerson).name == 'me'

-->
<rss version="2.0" >
<channel xmlns:dc="http://purl.org/dc/elements/1.1/">
<copyright>copyright 2006</copyright>
<dc:creator>me</dc:creator>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel description works w/ html & CDATA 
Expect:      feed.fields.getProperty('description') == '<b>test</b>'

-->
<rss version="2.0" >
<channel>
<description><![CDATA[<b>test</b>]]></description>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel description works w/html
Expect:      feed.fields.getProperty('description') == '<b>test</b>'

-->
<rss version="2.0" >
<channel>
<description>&lt;b>test&lt;/b></description>
</channel>
</rss><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed description works normalized
Expect: feed.subtitle.text == 'a description'

-->
<rdf:RDF 
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns="http://purl.org/rss/1.0/"
>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <description>a description</description>
  </channel>
</rdf:RDF>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed description works normalized
Expect: feed.subtitle.plainText() == 'another description'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
</rdf:RDF>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed description works normalized
Expect: feed.subtitle.text == 'a description'

-->
<rdf:RDF 
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns="http://purl.org/rss/1.0/"
  xmlns:dc='http://purl.org/dc/elements/1.1/'
>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
  <dc:description>another description</dc:description>  
  <description>a description</description>
  </channel>
</rdf:RDF>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel description works 
Expect: var desc = feed.fields.getProperty('description'); desc == 'test';

-->
<rss version="2.0" >
<channel>
<description>test</description>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel docs works
Expect:      feed.fields.getProperty('docs') == 'http://example.org'

-->
<rss version="2.0" >
<channel>
<docs>http://example.org</docs>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom entry count works
Expect: feed.items.length == 3

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>test title</title>
  <logo>http://example.org/logo.jpg</logo>
  <entry></entry>
  <entry></entry>
  <entry></entry>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom generator works
Expect: feed.generator.uri.spec == 'http://example.org/';

-->
<feed xmlns="http://www.w3.org/2005/Atom">

<author>
<email>hmm@example.com</email>
<name>foo</name>
</author>


  <generator uri="http://example.org">Hmm</generator>

<author>
<email>bar@example.com</email>
<name>foo</name>
</author>


  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> title</div>
  </title>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  <summary type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><div><div>test</div> summary</div></div>
  </summary>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom generator works
Expect: feed.generator.uri.spec == 'http://example.org/gen/';

-->
<feed xml:base="http://example.org/" xmlns="http://www.w3.org/2005/Atom">

<author>
<email>hmm@example.com</email>
<name>foo</name>
</author>


  <generator uri="/gen/">Hmm</generator>

<author>
<email>bar@example.com</email>
<name>foo</name>
</author>


  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> title</div>
  </title>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  <summary type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><div><div>test</div> summary</div></div>
  </summary>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom generator works
Expect: feed.generator.version == "1.1"

-->
<feed xmlns="http://www.w3.org/2005/Atom">

<author>
<email>hmm@example.com</email>
<name>foo</name>
</author>


  <generator version="1.1" uri="http://example.org">Hmm</generator>

<author>
<email>bar@example.com</email>
<name>foo</name>
</author>


  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> title</div>
  </title>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  <summary type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><div><div>test</div> summary</div></div>
  </summary>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel generator works
Expect:      feed.generator.agent == 'a generator used to make feeds'

-->
<rss version="2.0" >
<channel>
<generator>a generator used to make feeds</generator>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom icon works
Expect: feed.fields.getProperty('atom:icon') == 'http://example.org/favicon.ico'

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>test title</title>
  <icon>http://example.org/favicon.ico</icon>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom feed id works with extra attribute
Expect: feed.fields.getProperty('atom:id') == 'urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6'

-->

<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://example.org">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2003-12-13T18:30:02Z</updated>
  <author>
       <name>John Doe</name>
  </author>
  <id foo:bar="baz">urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>

  <entry>
    <title>Atom-Powered Robots Run Amok</title>
    <link href="http://example.org/2003/12/13/atom03"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>
    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ feed rdf:about
Expect: feed.id == 'http://www.xml.com/xml/news.rss'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
  <item rdf:about="http://example.com/hmm">
   <title>XML: A Disruptive Technology</title> 
   <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical
      infrastructure of the Internet.
    </dc:description>
  </item> 
</rdf:RDF>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel image required fields work
Expect: ((feed.image.getProperty('title') == 'A picture') && (feed.image.getProperty('link') == 'http://example.org') && (feed.image.getProperty('url') == 'http://example.org/a.jpg') && (feed.image.getProperty('description') == 'Yo!') && (feed.image.getProperty('width') == '42') && (feed.image.getProperty('height') == '43'))

-->
<rss version="2.0" >
<channel>
<image>
  <link>http://example.org</link>
  <title>A picture</title>
  <url>http://example.org/a.jpg</url>
  <description>Yo!</description>
  <width>42</width>
  <height>43</height>
</image>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel image description and required fields work
Expect: ((feed.image.getProperty('title') == 'A picture') && (feed.image.getProperty('link') == 'http://example.org') && (feed.image.getProperty('url') == 'http://example.org/a.jpg') && (feed.image.getProperty('description') == 'Yo!'))

-->
<rss version="2.0" >
<channel>
<image>
  <link>http://example.org</link>
  <title>A picture</title>
  <url>http://example.org/a.jpg</url>
  <description>Yo!</description>
</image>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel image required fields work
Expect: ((feed.image.getProperty('title') == 'A picture') && (feed.image.getProperty('link') == 'http://example.org') && (feed.image.getProperty('url') == 'http://example.org/a.jpg'))

-->
<rss version="2.0" >
<channel>
<image>
  <link>http://example.org</link>
  <title>A picture</title>
  <url>http://example.org/a.jpg</url>
</image>
</channel>
</rss><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ image
Expect: ((feed.image.getProperty('rss1:link') == 'http://www.xml.com') && (feed.image.getProperty('rss1:url') == 'http://xml.com/universal/images/xml_tiny.gif'))

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>

  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
    <textInput rdf:resource="http://www.google.com"/>
  </channel>

  <image rdf:about="http://xml.com/universal/images/xml_tiny.gif">
    <title>XML.com</title>
    <link>http://www.xml.com</link>
    <url>http://xml.com/universal/images/xml_tiny.gif</url>
  </image>

  <item>
   <title>XML: A Disruptive Technology</title> 
    <link>http://c.moreover.com/click/here.pl?r123</link>
    <dc:description>
      XML is placing increasingly heavy loads on the existing technical
      infrastructure of the Internet.
    </dc:description>
    <dc:publisher>The O'Reilly Network</dc:publisher>
    <dc:creator>Simon St.Laurent (mailto:simonstl@simonstl.com)</dc:creator>
    <dc:rights>Copyright &#169; 2000 O'Reilly &amp; Associates, Inc.</dc:rights>
    <dc:subject>XML</dc:subject>
  </item> 

</rdf:RDF><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ zero items count
Expect: feed.items.length == 0

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
</rdf:RDF><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel language works 
Expect:      feed.fields.getProperty('language') == 'en-us'

-->
<rss version="2.0" >
<channel>
<language>en-us</language>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel lastBuildDate works 
Expect:      feed.fields.getProperty('lastBuildDate') == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rss version="2.0" >
<channel>
<lastBuildDate>Sat, 07 Sep 2002 00:00:01 GMT</lastBuildDate>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel link works w/ line break
Expect:      feed.link.spec == 'http://mozilla.org/'

-->
<rss version="2.0" >
<channel>
<link>
http://mozilla.org/
</link>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel link works w/ CDATA
Expect:      feed.link.spec == 'http://mozilla.org/'

-->
<rss version="2.0" >
<channel>
<link>
  <![CDATA[http://mozilla.org/]]>
</link>
</channel>
</rss><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed link works normalized
Expect: feed.link.spec == 'http://xml.com/pub'

-->
<rdf:RDF 
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns="http://purl.org/rss/1.0/"
>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
  </channel>
</rdf:RDF><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel link works
Expect:      feed.link.spec == 'http://mozilla.org/'

-->
<rss version="2.0" >
<channel>
<link>http://mozilla.org/</link>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom logo works
Expect: feed.image.getProperty('url') == 'http://example.org/logo.jpg'

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>test title</title>
  <logo xml:base="http://example.org/">logo.jpg</logo>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel managingEditor works 
Expect:      feed.authors.queryElementAt(0, Components.interfaces.nsIFeedPerson).email == 'example@example.com'

-->
<rss version="2.0" >
<channel>
<managingEditor foo:bar="baz" xmlns:foo="http://example.org">example@example.com</managingEditor>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel managingEditor works 
Expect:      feed.authors.queryElementAt(0, Components.interfaces.nsIFeedPerson).email == 'example@example.com'

-->
<rss version="2.0" >
<channel>
<managingEditor>example@example.com</managingEditor>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel category works 
Expect:      feed.categories.queryElementAt(2, Components.interfaces.nsIPropertyBag).getProperty('term') == 'hmm2'

-->
<rss version="2.0" >
<channel>
<category>hmm0</category>
<category>hmm1</category>
<category>hmm2</category>
<category>hmm3</category>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: non-RFC822 date should produce null feed.updated
Expect:      feed.updated == null

-->
<rss version="2.0" >
<channel>
<pubDate>Satmonkey, 07 Sepmonkey 2002 00:00:01 GMT</pubDate>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: Test whether date parsing handles partly-abbreviated dates.
Expect:      feed.updated == 'Tue, 25 Apr 2006 08:00:00 GMT'

-->
<rss version="2.0" >
<channel>
<pubDate>Tues, 25 Apri 2006 08:00:00 GMT</pubDate>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: Test whether date parsing handles unabbreviated dates.
Expect:      feed.updated == 'Sat, 25 Nov 2006 00:12:45 GMT'

-->
<rss version="2.0" >
<channel>
<pubDate>Saturday 25 November 2006 10:12:45 +1000</pubDate>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: Test whether date parsing handles "Z" as a timezone in RFC822.
Expect:      feed.updated == 'Tue, 25 Apr 2006 08:00:00 GMT'

-->
<rss version="2.0" >
<channel>
<pubDate>Tue, 25 Apr 2006 08:00:00 Z</pubDate>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: Test whether date parsing handles 'UTC' as a timezone.
Expect:      feed.updated == 'Mon, 16 Apr 2007 03:12:45 GMT'

-->
<rss version="2.0" >
<channel>
<pubDate>Monday, 16 April 2007 03:12:45 UTC</pubDate>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel pubDate works 
Expect:      feed.fields.getProperty('pubDate') == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rss version="2.0" >
<channel>
<pubDate>Sat, 07 Sep 2002 00:00:01 GMT</pubDate>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom feed and entry with random attributes works
Expect: feed.title.text == "hmm" && feed.items.length == 2

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:foo="http://www.example.org"
      foo:quux="quuux">

  <title>hmm</title>

  <author>
    <email>hmm@example.com</email>
    <name>foo</name>
  </author>
  <generator version="1.1" uri="http://example.org">Hmm</generator>
  <author>
    <email>bar@example.com</email>
    <name>foo</name>
  </author>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><i>test</i> rights</div>
  </rights>
  
  <entry foo:bar="baz"></entry>
  <entry></entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel rating works
Expect: feed.fields.getProperty('rating') == '(PICS-1.1 "http://www.rsac.org/ratingsv01.html" l by "webmaster@example.com" on "2006.01.29T10:09-0800" r (n 0 s 0 v 0 l 0))'

-->
<rss version="2.0" >
<channel>
<rating>(PICS-1.1 "http://www.rsac.org/ratingsv01.html" l by "webmaster@example.com" on "2006.01.29T10:09-0800" r (n 0 s 0 v 0 l 0))</rating>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom rights works normalized
Expect:      feed.rights.plainText() == "test rights"

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> title</div>
  </title>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> rights</div>
  </rights>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom rights works with nested divs
Expect: feed.fields.getProperty('atom:rights') != null

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> title</div>
  </title>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><div><div>test</div> rights</div></div>
  </rights>
</feed><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom rights works
Expect:      feed.fields.getProperty('atom:rights') != null

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> title</div>
  </title>
  <rights type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> rights</div>
  </rights>
</feed><?xml version="1.0"?>
<!--

Description: stylesheets with single quoted attributes work. Bug 352549.
Base: http://www.penny-arcade.com/rss.xml
Expect: result.stylesheet.spec == "http://www.penny-arcade.com/stylesheets/rss-display.xsl"

-->
<?xml-stylesheet type='text/xsl' href='/stylesheets/rss-display.xsl' version='1.0'?>
<rss version="2.0">
<channel>
<title>Penny-Arcade</title>
<link>http://www.penny-arcade.com/</link>
<language>en-us</language>

<copyright>Copyright 1999 - 2006 Penny Arcade, Inc.</copyright>
<image>
<url>http://www.penny-arcade.com/images/rss-logo.png</url>
<title>Penny-Arcade Logo</title>
<link>http://www.penny-arcade.com/</link>
<width>144</width>

<height>82</height>
</image>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel skipDays works
Expect: ((feed.skipDays.queryElementAt(0, Components.interfaces.nsISupportsString) == 'Sunday') && (feed.skipDays.queryElementAt(1, Components.interfaces.nsISupportsString) == 'Monday'))

-->
<rss version="2.0" >
<channel>
<skipDays>
  <day>Sunday</day>
  <day>Monday</day>
</skipDays>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel skipHours works
Expect: ((feed.skipHours.queryElementAt(0, Components.interfaces.nsISupportsString) == '0') && (feed.skipHours.queryElementAt(4, Components.interfaces.nsISupportsString) == '23'))

-->
<rss version="2.0" >
<channel>
<skipHours>
  <hour>0</hour>
  <hour>1</hour>
  <hour>2</hour>
  <hour>22</hour>
  <hour>23</hour>
</skipHours>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel description works 
Expect:      feed.subtitle.plainText() == '<i><b>test</b></i>'

-->
<rss version="2.0" >
<channel>
<description><![CDATA[<i><b>test</b></i>]]></description>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel description markup is not HTML
Expect:      feed.subtitle.plainText() == '<i><b>test</b></i>'

-->
<rss version="2.0" >
<channel>
<description><![CDATA[<i><b>test</b></i>]]></description>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel description works 
Expect:      feed.subtitle.text == 'test'

-->
<rss version="2.0" >
<channel>
<description>test</description>
</channel>
</rss>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
  <!ENTITY % pageInfoDTD SYSTEM "chrome://browser/locale/pageInfo.dtd">
  %pageInfoDTD;
]>

<bindings id="feedBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="feed" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <content>
      <xul:vbox flex="1">
        <xul:hbox flex="1">
          <xul:textbox flex="1" readonly="true" xbl:inherits="value=name"
                       class="feedTitle"/>
          <xul:label xbl:inherits="value=type"/>
        </xul:hbox>
        <xul:vbox>
          <xul:vbox align="start">
            <xul:hbox>
              <xul:label xbl:inherits="value=feedURL,tooltiptext=feedURL" class="text-link" flex="1"
                         onclick="openUILink(this.value, event);" crop="end"/>
            </xul:hbox>
          </xul:vbox>
        </xul:vbox>
        <xul:hbox flex="1" class="feed-subscribe">
          <xul:spacer flex="1"/>
          <xul:button label="&feedSubscribe;" accesskey="&feedSubscribe.accesskey;"
                      oncommand="onSubscribeFeed()"/>
        </xul:hbox> 
      </xul:vbox>
    </content>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!--
Description: XHTML title with apos
Expect: feed.title.plainText() == "Tantek's Updates"
-->
<feed xml:lang="en-US"
      xmlns="http://www.w3.org/2005/Atom">
  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml">Tantek's Updates</div>
  </title>
  <link href="http://tantek.com/"
	rel="alternate" title="Tantek's Posts" type="text/html"/>
  <link href="http://tantek.com/updates.atom"
	rel="self" />
  <id>http://tantek.com/updates.atom</id>
  <author>
    <name>Tantek</name>
    <uri>http://tantek.com/</uri>
  </author>
  <updated>2006-05-02T20:13:00-07:00</updated>
  <entry>
    <updated>2006-04-22T00:00:00-07:00</updated>
    <published>2006-04-22T00:00:00-07:00</published>
    <link href="http://www.makezine.com/faire/"
	  rel="alternate" title="Make Faire" type="text/html"/>
    <id>http://www.makezine.com/faire/</id>
    <title>Make Faire</title>
    <content type="xhtml" xml:space="preserve">
      <div xmlns="http://www.w3.org/1999/xhtml">
	<div class="vevent">
	  <a class="url" href="http://www.makezine.com/faire/">
	    <abbr class="dtstart" title="20060422">
	      4/22</abbr>-<abbr class="dtend" title="20060424">23</abbr>
	      
	      <span class="summary">
		Make Faire
		</span> @
		<span class="location">
		  San Mateo Fairgrounds
		</span>
	  </a>
	</div>
      </div>
    </content>
  </entry>
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel textInput works
Expect: ((feed.textInput.getProperty('description') == 'Your aggregator supports the textInput element. What software are you using?') && (feed.textInput.getProperty('link') == 'http://www.cadenhead.org/textinput.php') && (feed.textInput.getProperty('name') == 'query') && (feed.textInput.getProperty('title') == 'TextInput Inquiry'))

-->
<rss version="2.0" >
<channel>
<textInput>
  <description>Your aggregator supports the textInput element. What software are you using?</description>
  <link>http://www.cadenhead.org/textinput.php</link>
  <name>query</name>
  <title>TextInput Inquiry</title>
</textInput>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel title works w/ funky CDATA title
Expect:      feed.title.plainText() == 'test title'

-->
<rss version="2.0" >
<channel>
<title>test t<![CDATA[it]]>le</title>
</channel>
</rss>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed title works
Expect: feed.fields.getProperty('rss1:title') == 'Test'

-->
<rdf:RDF 
    xmlns:foo="http://example.org"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns="http://purl.org/rss/1.0/"
>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title foo:bar="baz">Test</title>
  </channel>
</rdf:RDF><?xml version='1.0' encoding='UTF-8'?>
<!--
Description: Feed title works with full entry
Expect: feed.title.text == 'ongoing'
-->
<feed xmlns='http://www.w3.org/2005/Atom'
      xml:base='http://www.tbray.org/ongoing/ongoing.atom'
      xml:lang='en-us'>
 <title>ongoing</title>
 <id>http://www.tbray.org/ongoing/</id>
 <link href='./' />
 <link rel='self' href='' />
 <logo>rsslogo.jpg</logo>
 <icon>/favicon.ico</icon>
 <updated>2006-04-26T20:10:25-08:00</updated>
 <author><name>Tim Bray</name></author>
 <subtitle>ongoing fragmented essay by Tim Bray</subtitle>
 <rights>All content written by Tim Bray and photos by Tim Bray Copyright Tim Bray, some rights reserved, see /ongoing/misc/Copyright</rights>
 <generator uri='/misc/Colophon'>Generated from XML source code using Perl, Expat, XML::Parser, Emacs, Mysql, and ImageMagick.  Industrial strength technology, baby.</generator>

<entry xml:base='When/200x/2006/04/26/'>
 <title>Spring in White on White</title>
 <link href='Spring-in-White-on-White' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/26/Spring-in-White-on-White</id>
 <published>2006-04-26T13:00:00-08:00</published>
 <updated>2006-04-26T20:10:16-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts/Photos' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Photos' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Garden' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Garden' />
 <summary type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>Most people would generally prefer a climate where it&#x2019;s bright and warm most of the time. But for Canadians and others who live where it&#x2019;s not, there are compensations, and one is the experience of spring.  I have a picture.</div></summary>
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>Most people would generally prefer a climate where it’s bright
and warm most of the time. But for Canadians and others who live where it’s
not, there are compensations, and one is the experience of
spring.  I have a picture.</p>
<img src="IMGP3247.png" alt="Pear blossoms against cherry blossoms" />
<div class="caption"><p>The blossoms are pear in the foreground, cherry behind.</p></div>
<p>After all the months of 50° North Latitude winter—icy-sharp in most
of Canada, wet and dark here in Vancouver—the soul, the spirit, and the
libido all spring to life when the sun comes back.  We’ve had a solid year of
crappy weather, but this last Saturday through Monday were solidly summery,
bright 
and warm; and in this season the days are already long and each gets
longer so fast you can feel it.</p>
<p>On the back porch, our pear tree’s branches were silhouetted against the
neighbors’ big wild old cherry; the cherry yields no edible fruit but who
cares, it’s beautiful
tree any time of year.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/26/'>
 <title>Scott</title>
 <link href='Scott' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/26/Scott</id>
 <published>2006-04-26T13:00:00-08:00</published>
 <updated>2006-04-26T20:06:50-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Business/Sun' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Business' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Sun' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>I’ve been watching our internal leadership conference and spending quite a
bit of time talking in the virtual hallways, and I’ve been surprised at
the intensity of feeling about Mr. McNealy.  Yes, there are those
here saying “About bloody time, now we can make some progress” but there’s a
much bigger group that is genuinely emotional about this transition.
Maybe it’s a function of seniority: I never met nor corresponded with Scott, and
he hasn’t been
much of a presence in the company’s conversation in the time I’ve been here.
But there are a lot of smart, seasoned, unsentimental people making it clear
that 
he’s been a major force in their lives, at a more personal level than I’m
used to hearing when people speak about executives.  I guess also that to a
lot of people, Sun’s vision, for which Scott gets some of the credit, was a
radical and wonderful thing.   I first used Unix in 1979 and quit a nice
big-company job
to become a VAX-bsd sysadmin in 1983, so I’ve always kind of
lived inside that vision.
But I’ll tell you one thing, what I’ve been hearing the last couple of days
makes me really regret that I didn’t get to know Scott.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/26/'>
 <title>Jacobs, Pictures, Spartans</title>
 <link href='Jane-Jacobs' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/26/Jane-Jacobs</id>
 <published>2006-04-26T13:00:00-08:00</published>
 <updated>2006-04-26T17:28:59-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts/Photos' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Photos' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p><a href="http://en.wikipedia.org/wiki/Jane_Jacobs">Jane Jacobs</a> died;
the city I live in, Vancouver, is pretty solidly Jacobsian both in its current
shape and its planning dogma.  By choosing to live here I’m empirically a
fan.  Oddly, few have remarked how great Jacobs
<em>looked</em>; her face commanded the eye.  Which leads me Alex
Waterhouse-Hayward’s wonderful 
<a href="http://www.alexwaterhousehayward.com/blog/2006/04/jane-jacobs-viveca-lindfors_26.html">Jane Jacobs &amp; Viveca Lindfors</a>;
surprising portraits and thoughts on decoration.  W-H’s blog has become one of
only two or three that I 
stab at excitedly whenever I see something new.  For example, see 
<a href="http://www.alexwaterhousehayward.com/blog/archives/2006_04_01_archive.html#114476408248660848">Sex Crimes, Homicide and Drugs</a>
and yes, that’s what it’s about.
Staying with the death-and-betrayal theme, and apparently (but not really)
shifting back 2&#xbd; millennia, see John Cowan’s
<a href="http://recycledknowledge.blogspot.com/2006/04/war-after-simonides.html">The
War (after Simonides)</a>, being careful to look closely at the links.
I’ve
<a href="http://www.tbray.org/ongoing/When/200x/2003/03/24/Herodotus">written</a>
about those same wars.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/25/'>
 <title>LAMP and MARS</title>
 <link href='Scaling-Rails' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/25/Scaling-Rails</id>
 <published>2006-04-25T13:00:00-08:00</published>
 <updated>2006-04-26T07:24:06-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Web' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Web' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Sun' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Sun' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>At
<a href="/ongoing/When/200x/2006/04/13/RoR">that Rails conference</a>, when I
was
<a href="http://blog.garbledygook.com/2006/04/17/ruby-on-rails-podcast-tim-bray-ruby-on-rails-podcast/">talking</a>
to
<a href="http://jroller.com/page/obie">Obie Fernandez</a>, he asked, more or
less “How can Sun love us?  We’re not Java” and I said, more or less, “Hey,
you’re programmers, you write software and there have to be computers to run
it, we sell computers, why wouldn’t we love you?”  Anyhow, we touched on
parallelism a bit and I talked up the
<a href="http://www.sun.com/processors/UltraSPARC-T1/">T1</a>; 
Obie took that ball and 
<a href="http://jroller.com/page/obie?entry=will_ultrasparc_t1_emerge_as">ran with it</a>,
saying all sorts of positive things about synergy between Rails’
shared-nothing architecture and our multicore systems.  Yeah, well, good in
theory, but I’m too old to make that kind of prediction without running some
tests.  Hah, it turns out that
<a href="http://joyent.com/">Joyent</a> has been
<a href="http://scalewithrails.com/">doing that</a>, and have
<a href="http://scalewithrails.com/downloads/ScaleWithRails-April2006.pdf">76
PDF slides</a> on the subject.
If you care about big-system scaling issues, read the whole thing; a little
long, but amusing and with hardly any bullet lists.  If you’re a Sun
shareholder looking for a pick-me up, check out slides 40-41, 49, and 52-74.
Oh, I gather that the T1, Solaris, and ZFS are OK for Java too.
<i>[Update: The title was just “SAMR”, as in LAMP with two new letters.  
Enough people didn’t get it that I was forced to think about it, and MARS
works better anyhow.]</i></p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/25/'>
 <title>Real-Time Journalism</title>
 <link href='Talk-With-Berlind' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/25/Talk-With-Berlind</id>
 <published>2006-04-25T13:00:00-08:00</published>
 <updated>2006-04-26T06:40:19-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World/Journalism' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Journalism' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Syndication' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Syndication' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>I got email late yesterday from
<a href="http://blogs.zdnet.com/bio.php#berlind">David Berlind</a>: “Hey, can
I call you for a minute?”  He wanted commentary on
<a href="http://blogs.zdnet.com/BTL/?p=2906">a story he was writing</a> that I
think is about the potential for intellectual-property lock-ins on RSS and Atom
extensions.  I say “I think is about” because the headline is “Will or could
RSS get forked?”.  After a few minutes’ chat, David asked if he could record
for a podcast, and even though I only had a cellphone, the audio came out OK.
The conversation was rhythmic: David brought up a succession of potential
issues and answered each along the lines of “Yes, it’s reasonable to worry
about that, but in this 
case I don’t see any particular problems.”  
Plus I emitted a mercifully-brief rant on the difference between protocols,
data, and software.
On the one hand, I thought David could have been a 
little clearer that I was pushing back against the thrust of his story, but on
the other hand he included the whole conversation right
there in the piece, so anyone who actually cares can listen and find out what
I actually said, not what I think I said nor what David reported I said.
I find this raw barely-intermediated journalism (we
talk on the phone this afternoon, it’s on the Web in hours) a little
shocking still.
On balance, it’s better than the way we used to do things.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/24/'>
 <title>The Transition Explained</title>
 <link href='CEO-Transition' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/24/CEO-Transition</id>
 <published>2006-04-24T13:00:00-08:00</published>
 <updated>2006-04-24T16:49:05-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Business/Sun' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Business' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Sun' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>It’s not that complicated, really.
Bloggers are
<a href="http://www.sun.com/2006-0418/js/index.jsp">taking over the world</a>.
Resistance is futile; you will be assimilated.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/24/'>
 <title>5&#x272d;&#x266b;: One More Cup of Coffee</title>
 <link href='One-More-Cup-Of-Coffee' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/24/One-More-Cup-Of-Coffee</id>
 <published>2006-04-24T13:00:00-08:00</published>
 <updated>2006-04-24T13:00:00-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts/Music/Recordings' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Music' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Recordings' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts/Music/5 Stars' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='5 Stars' />
 <summary type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>I&#x2019;m not really a <a href='http://en.wikipedia.org/wiki/Bob_Dylan'>Bob Dylan</a> fan.  A voice like that, and a tunesmithing talent like that, come along only a few times per century, but he&#x2019;s still kind of irritating. That aside, the song <cite>One More Cup of Coffee</cite>, from the 1976 album <a href='http://en.wikipedia.org/wiki/Desire_%28album%29'>Desire</a>, can&#x2019;t be ignored; wonderful tune, wonderful orchestration, wonderful performance. <i>(&#x201c;5&#x272d;&#x266b;&#x201d; series introduction <a href='/ongoing/When/200x/2006/01/23/5-Star-Music'>here</a>; with <a href='/ongoing/When/200x/2006/01/23/5-Star-Music#p-1'>an explanation</a> of why the title may look broken.)</i></div></summary>
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>I’m not really a
<a href="http://en.wikipedia.org/wiki/Bob_Dylan">Bob Dylan</a> fan.  A voice
like that, and a tunesmithing talent like that, come along only a few times
per century, but he’s still kind of irritating.
That aside, the song <cite>One More Cup of Coffee</cite>, from the 1976 album
<a href="http://en.wikipedia.org/wiki/Desire_%28album%29">Desire</a>, can’t be
ignored; wonderful tune, wonderful orchestration, wonderful performance.
<i>(“5✭♫” series introduction <a href="/ongoing/When/200x/2006/01/23/5-Star-Music">here</a>;
with <a href="/ongoing/When/200x/2006/01/23/5-Star-Music#p-1">an
explanation</a> of why the title may look broken.)</i></p>
<img src="Desire.png" class="inline" alt="Desire, by Bob Dylan" />
<h2 id='p-1'>The Context</h2>
<p>Nothing I can possibly write will add any wisdom to the
millions of words, some 90% of them in excess of needs, written on the subject
of this particular person.</p>
<p>A personal statement: Bob Dylan has long irritated me for, during the first
thirty years or 
so of his career, never having given a straight answer to a straight question,
and for writing songs with dozens of boring verses.  But they’ll still be
listening 
to lots of his performances long after I’m dead, and in recent years he’s
become a better, more direct, interview.</p>
<p>My taste in Dylan is a little unusual: once you get past <cite>One More Cup
of Coffee</cite>, my favorites would be <cite>Baby Let Me Follow You
Down</cite> (from the <cite>Last Waltz</cite> soundtrack) and 
<cite>Crash on the Levee (Down in the Flood)</cite> from
<a href="http://en.wikipedia.org/wiki/The_Basement_Tapes">The Basement
Tapes</a>.</p>
<p><cite>Desire</cite>, the record, is hit and miss. <cite>Joey</cite>,
glorification of the life of some mafioso, is flawed in concept
and unlistenable in execution.  <cite>Hurricane</cite>, whatever you think
about
<a href="http://en.wikipedia.org/wiki/Rubin_Carter">Mr. Carter</a>, that song
rocks; and <cite>Isis</cite> hits pretty hard too.</p>
<h2 id='p-2'>The Music</h2>
<p>Is there anything in <cite>One More Cup of Coffee</cite> that’s not
perfect?  Well yes, in the verses, the
lyrics on occasion drag (“He oversees his kingdom / So no stranger does
intrude / His voice it trembles as he calls out / For another plate of food”).
But apart from that, the sentiment is compelling,
<a href="http://en.wikipedia.org/wiki/Scarlet_Rivera">Scarlet Rivera’s</a>
violin is beautifully scored and played, the tune is to die for, and the
backing vocals are by Emmylou Harris, who you can bet is going to be here in
the 5-✭ series one of these days.
And while there’s not much middle ground on the subject of Dylan’s singing, if
you like it, you’ll <em>really</em> like this song.</p>
<p>Listen to the choruses: Bob and Emmylou veer wildly around the rhythm, then
coalesce on the beat when it matters, and they’re making it
up as they go along, they’re wholly inhabiting the moment, and it’s
quite, quite perfect.</p>
<h2 id='p-3'>Sampling It</h2>
<p>Oh yeah, it’s out there.  And there’s a live version too; but the smart
thing  would be to go buy the un-compressed un-DRM’ed shiny round silver
version of <cite>Desire</cite>; it’s a keeper.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/24/'>
 <title>Atomic Monday</title>
 <link href='Atomic-Monday' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/24/Atomic-Monday</id>
 <published>2006-04-24T13:00:00-08:00</published>
 <updated>2006-04-24T00:44:06-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Syndication' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Syndication' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Atom' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Atom' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>First of all, implementors of anything Atom-related need to spend some time
<a href="http://golem.ph.utexas.edu/~distler/blog/archives/000793.html">chez
Jacques Distler</a>; in particular, the conversation that plays out in the
comments. Second, there’s this piece of software called
<a href="http://www.planetplanet.org/">Planet Planet</a> that allows you to
make an aggregate web page by reading lots of feeds; for example, see
<a href="http://www.planetapache.org/">Planet Apache</a> or
<a href="http://planetsun.org/">Planet Sun</a>.
Sam Ruby decided that its Atom support needed some work, so
<a href="http://www.intertwingly.net/blog/2006/04/23/Adding-Atom-support-to-PlanetPlanet">he did
it</a>.  Now, here’s the exciting part: he pinged me over the weekend and said
“Hey, look at this” wanting to show me his cleverly-Atomized
Planet Intertwingly feed. 
I looked at it in
<a href="http://ranchero.com/netnewswire/">NetNewsWire</a> and was puzzled for
a moment; some but not all of the 
things in the feed were highlighted as unread, even though this was the first
time I’d seen it.  Then the light went on. 
This
is Atom doing <em>exactly what we went to all that trouble to make it do</em>.
NetNewsWire has good Atom support and, because Atom entries all have unique
IDs and timestamps,  it can
tell that it’s seen lots of those entries before in other feeds that I
subscribe to.  That’s how I found Jacques’ piece.  This is huge; anyone who
uses synthetic or aggregated feeds knows that dupes are a big problem, showing
up all over the place.
No longer, Atom makes that problem go away.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/22/'>
 <title>Hyatt on the High-Res Web</title>
 <link href='High-Res-Web' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/22/High-Res-Web</id>
 <published>2006-04-22T13:00:00-08:00</published>
 <updated>2006-04-23T17:12:18-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Web' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Web' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Presentation' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Presentation' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>Check out Dave Hyatt’s
<a href="http://webkit.opendarwin.org/blog/?p=55">excellent write-up</a> on
designing and rendering Web pages so they take advantage of the
higher-resolution screens that <em>may</em> be coming our way. 
I emphasize “may” because I’ve seen how slowly we’ve picked up pixels over
the years. The first really substantial screen I ever worked on was a
1988-vintage Sun workstation with about a million pixels.  The Mac on my
lap right now, which has 125 times as much memory as that workstation, has
only 1.38 million pixels.
Anyhow, Hyatt has some smart things to say on the issues,
which are trickier than you might think.  I suspect that sometime in a couple of
years, if I still care about <span class='o'>ongoing</span>, I’m  going to
have to go back and reprocess all the images so that higher-res versions are
available for those who have the screens and don’t mind downloading bigger
files. 
Anyhow, Dave’s piece may be slightly misleading in that he talks about SVG
as though 
it’s something coming in the future.  Not so, check out
<a href="http://zcorpan.1go.dk/sandbox/svg/atom/.xml">this nifty SVG Atom
logo</a>, which works fine in all the Mozilla browsers I have here.
Load it up, resize the window, and watch what happens.  Then do a “view
source”.
<i>[Update:
<a href="http://blog.codedread.com">Jeff Schiller</a> writes to tell me that
Opera 9 does SVG (and Opera 8 “SVG Tiny”) too.]
[<a href="http://www.freeke.org/ffg">Dave Walker</a> writes: Though the shipping version of Safari doesn’t support SVG,
<a href="http://nightly.webkit.org/builds/Latest-WebKit-SVN.dmg">the
nightlies</a> do.]
[<a href="http://www.davelemen.com/archives/2006/04/is_it_time_for_jpeg_2000_to_go_mainstream.html">Dave Lemen</a>
points to
<a href="http://en.wikipedia.org/wiki/JPEG-2000">JPEG 2000</a> as possibly
useful in a high-res context.]</i></p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/23/'>
 <title>Wrong About the Infield Fly Rule</title>
 <link href='Wrong-About-the-Infield-Fly-Rule' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/23/Wrong-About-the-Infield-Fly-Rule</id>
 <published>2006-04-23T13:00:00-08:00</published>
 <updated>2006-04-23T15:02:41-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World/Family' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Family' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>My brother
<a href="http://takingalongview.blogspot.com/">Rob</a> is really taking to
this blogging medium.  Check out his recent
<a href="http://takingalongview.blogspot.com/2006/04/credo.html">Credo</a>,
and also the only instance I’ve seen of
<a href="http://takingalongview.blogspot.com/2006/04/ode-to-96-chevy-lumina.html">Anglo-Saxon alliterative poetry</a>
applied to a mini-van.</p>
</div></content></entry>

<entry xml:base='When/200x/2004/12/12/'>
 <title>Statistics</title>
 <link href='BMS' />
 <id>http://www.tbray.org/ongoing/When/200x/2004/12/12/BMS</id>
 <published>2004-12-12T12:00:00-08:00</published>
 <updated>2006-04-23T10:10:02-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Publishing' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Publishing' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Web' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Web' />
 <summary type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>Almost every Sunday I grab the week&#x2019;s <span class="o">ongoing</span> logfiles and update my numbers. I find it interesting and maybe others will too, so  this entry is now the charts&#x2019; permanent home. I&#x2019;ll update it most weeks, probably. <i>[Updated: 2006/04/23.]</i></div></summary>
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>Almost every Sunday I grab the week’s <span class='o'>ongoing</span>
logfiles and update my numbers.
I find it interesting
and maybe others will too, so 
this entry is now the charts’ permanent home. I’ll update it most weeks,
probably.
<i>[Updated: 2006/04/23.]</i></p>
<img src="Browser-Market-Share.png" alt="Browser market shares at ‘ongoing’" />
<div class="caption"><p>Browsers visiting <span class='o'>ongoing</span>,
percent.</p></div>
<img src="Browsers-via-search.png" alt="Browser market shares at ‘ongoing’, visitors via search engines" />
<div class="caption"><p>Browsers visiting <span class='o'>ongoing</span> via
search engines, percent.</p></div>
<img src="Search-Engines.png" alt="Search engine market shares at ‘ongoing’" />
<div class="caption"><p>Search referrals to <span
class='o'>ongoing</span> .</p></div>
<img src="Feeds.png" alt="RSS and Atom feed fetches" />
<div class="caption"><p>Fetches of the RSS 2.0 and Atom 1.0 feeds.</p></div>
<p>The notes on usage and source code will return in coming weeks when I get
the cycles to rewrite this whole article.</p>
<h2 id='p-1'>What a “Hit” Means</h2>
<p>I recently
<a href="/ongoing/When/200x/2006/02/07/Thumbnail">updated</a> the
<a href="/ongoing/misc/Colophon"><span class='o'>ongoing</span> software</a>
(but haven’t updated the Colophon I see, oops).
Anyhow, the <code>XMLHttpRequest</code> now issued by each page seems to be a
pretty reliable counter of the number of actual browsers with humans behind
them reading the pages.  I checked against
<a href="/ongoing/When/200x/2005/12/04/Google-Analytics">Google Analytics</a>
and the numbers agreed to within a dozen or two on days with 5,000 to 10,000
page views; interestingly, Google Analytics was always 10 or 20 views
higher.</p>
<p>Anyhow, do <em>not</em> conclude that now I know how many people are
reading whatever it is I write here; because I publish lots of short pieces
that are all there in my RSS feed, and anyone reading my Atom feed gets the
full content of everything.
I and I have <em>no #&amp;*!$ idea</em> how many people look at my feeds.</p>
<p>By the way, this was the first time in weeks and weeks that I’d looked at the
Analytics numbers, and they showed almost exactly zero change from the report
linked above.  So I’m going to turn them off; they’re a little too intrusive
and I think may be slowing page loads.</p>
<p>Anyhow, I ran some detailed statistics on the traffic for Wednesday,
February 8th, 2006.</p>
<table cellspacing="3" cellpadding="2" class="wltable">
<tr valign="top"><td>Total connections to the server</td><td align="right">180,428</td></tr>
<tr valign="top"><td>Total successful GET transactions</td><td align="right">155,507</td></tr>
<tr valign="top"><td>Total fetches of the RSS and Atom feeds</td><td align="right">88,450</td></tr>
<tr valign="top"><td>Total GET transactions that actually fetched data (i.e. status code
200 as opposed to 304)</td><td align="right">87,271</td></tr>
<tr valign="top"><td>Total GETs of actual ongoing pages (i.e. not CSS, js, or
images)</td><td align="right">18,444</td></tr>
<tr valign="top"><td>Actual human page-views</td><td align="right">6,348</td>
</tr>
</table>
<p>So, there you have it.  Doing a bit of rounding, if you take the 180K
transactions and subtract the 90K feed fetches and the 6000 actual human page
views, you’re left with 84,000 or so “Web overhead” transactions, mostly
stylesheets and graphics and so on.
For every human who viewed a page, it was fetched almost twice again by
various kinds of robots and non-browser automated agents.</p>
<p>It’s amazing that the whole thing works at all.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/18/'>
 <title>XML Automaton</title>
 <link href='XML-Grammar' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/18/XML-Grammar</id>
 <published>2006-04-18T13:00:00-08:00</published>
 <updated>2006-04-23T08:25:56-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/XML' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='XML' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Coding' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Coding' />
 <summary type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>In December of 1996 I released a piece of software called <a href='http://www.textuality.com/Lark/'>Lark</a>, which was the world&#x2019;s first <a href='http://www.w3.org/TR/REC-xml/#dt-xml-proc'>XML Processor</a> (as the term is defined in the <a href='http://www.w3.org/TR/REC-xml/'>XML Specification</a>). It was successful, but I stopped maintaining it in 1998 because lots of other smart people, and some big companies like Microsoft, were shipping perfectly good processors.  I never <em>quite</em> open-sourced it, holding back one clever bit in the moronic idea that I could make money out of Lark somehow. The magic sauce is a finite state machine that can be used to parse XML 1.0. Recently, someone out there needed one of those, so I thought I&#x2019;d publish it, with some commentary on Lark&#x2019;s construction and an amusing anecdote about the name. I doubt there are more than twelve people on the planet who care about this kind of parsing arcana. <i>[Rick Jelliffe  <a href='http://www.oreillynet.com/xml/blog/2006/04/xml_in_xml.html'>has upgraded</a> the machine].</i></div></summary>
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>In December of 1996 I released a piece of software called
<a href="http://www.textuality.com/Lark/">Lark</a>, which was
the world’s first
<a href="http://www.w3.org/TR/REC-xml/#dt-xml-proc">XML Processor</a> (as the
term is defined in the
<a href="http://www.w3.org/TR/REC-xml/">XML Specification</a>).
It was successful, but I stopped maintaining it in 1998 because lots of other
smart people, and some big companies like Microsoft, were shipping perfectly
good processors.  I never <em>quite</em> open-sourced it, holding back one
clever bit in the moronic idea that I could make money out of Lark somehow.
The magic sauce is a finite state machine that can be used to parse XML 1.0.
Recently, someone out there needed one of those, so I thought I’d publish
it, with some commentary on Lark’s construction and an amusing anecdote about
the name.
I doubt there are more than twelve people on the planet who care about
this kind of parsing arcana.
<i>[Rick Jelliffe 
<a href="http://www.oreillynet.com/xml/blog/2006/04/xml_in_xml.html">has
upgraded</a> the machine].</i></p>
<h2 id='p-1'>Why “Lark”?</h2>
<p><a href="http://www.laurenwood.org/anyway/">Lauren</a> and I went to
Australia in late 1996 to visit her mother and to get married, which we
did on November 30th.  Forty-eight hours later, Lauren twisted her knee
badly enough that she was pretty well
confined to a sofa for the rest of our Australian vacation.</p>
<p>So I broke out my computer and finished the work I’d already started on my
XML processor, and decided to call it Lark for <b>La</b>uren’s <b>R</b>ight
<b>K</b>nee.</p>
<h2 id='p-2'>How Lark Worked</h2>
<p>Lark was a pure
<a href="http://en.wikipedia.org/wiki/Deterministic_finite_state_machine">deterministic
finite automaton</a> (DFA)
parser, with a little teeny state stack.
Some of its transitions were labeled with named “events” that would provoke
the parser to do something if, for example, it had just recognized a start tag
or whatever.</p>
<p>DFA-driven parsers are a common enough design pattern, although I think
Lark is the only example in the XML space.
There are well-known parser generators such as
<a href="http://en.wikipedia.org/wiki/Yacc">yacc</a>, 
<a href="http://en.wikipedia.org/wiki/GNU_bison">GNU bison</a>, and
<a href="https://javacc.dev.java.net/">javacc</a>,
usually used in combination with lexical scanners such as
<a href="http://en.wikipedia.org/wiki/Flex_lexical_analyser">flex</a> so that
you can write your grammar in terms of tokens not characters.
Also, they handle LALR langauges, so the parsing technique is quite a bit
richer than a pure state machine.</p>
<p>I thought I had a better idea.  The grammar of XML is simple
enough, and the syntax characters few enough, that I thought I could just
write down the state machine by hand.
So that’s what I did, inventing a special-purpose DFA-description
language for the purpose.</p>
<p>Then I had a file called <code>Lark.jin</code> which was really a Java
program that used the state machine to parse XML.  The transition “events”
in the machine were mapped to <code>case</code> labels in a huge
<code>switch</code> construct.  Then there was a horrible, <em>horrible</em>
Perl program that read the <code>Lark.jin</code> and the automaton,
generated the DFA tables in Java syntax, inserted them into the code and 
produced <code>Lark.java</code>, which you actually compiled
to make the parser.</p>
<p>So while Java doesn’t have a preprocessor, Lark did, which made quite a few
things easier.</p>
<p>There were a lot of tricks; some of the state transitions 
weren’t on characters, they were on XML character classes such as
<code>NameChar</code> and so on.
This made the automaton easier to write, and in fact, to keep the class files
small, the character-class transitions persisted into the Java form, and the
real DFA was built at startup time.
These days, quick startup might be more important than <code>.class</code>
file size.</p>
<h2 id='p-3'>What Was Good</h2>
<p>It was <em>damn</em> fast.  James Clark managed to hand-craft a
Java-language XML parser called
<a href="http://jclark.com/xml/xp/index.html">XP</a> that was a little faster
than Lark, but he did that by clever I/O buffering, and I was determined to
leapfrog him by improving my I/O.</p>
<p>This was before the time of standardized XML APIs, but Lark had a stream API
that influenced SAX, and a DOM-like tree API; both worked just fine.
Lark is one of very few parsers ever to have survived the
<a href="http://www.securityfocus.com/archive/1/303509/2002-12-13/2002-12-19/0">billion
laughs attack</a>.</p>
<p>Lark was put into production in quite a few deployments, and the flow of
bug reports slowed to a trickle.
Then in 1998 I noticed that IBM and Microsoft and BEA and everyone else
were building XML Processors, so I decided that it wasn’t worthwhile 
maintaining mine.</p>
<h2 id='p-4'>What Was Bad</h2>
<p>I never got around to teaching it namespaces, which means it wouldn’t be
real useful today.</p>
<p>It had one serious bug that would have been real work to fix and since
nobody ever encountered it in practice, I kept putting it off and never did.
If you had an internal parsed entity reference in an attribute value and the
replacement text included the attribute delimiter (<code>'</code> or
<code>"</code>), it would scream and claim you had a busted XML document.</p>
<h2 id='p-5'>That Automaton</h2>
<p>What happened was,
<a href="http://www.oreillynet.com/pub/au/1712">Rick Jelliffe</a>, who is a
Good Person, was 
<a href="http://www.stylusstudio.com/xmldev/200604/post30110.html">looking for
a FSM for XML</a> and I eventually noticed, and so I sent him mine.</p>
<p>There’s no reason whatsoever to keep it a secret: 
<a href="/ongoing/code/lark/com/textuality/autom.txt">here it is</a>.
Be warned: it’s ugly.</p>
<p>Fortunately, there were only 227 states and 8732 transitions, so the state
number fit into a 
byte; that and the associated event index pack into a short.
To make things even tighter, the transitions were only keyed by characters up
to 127, as in 7-bit ASCII.
Characters higher than that can’t be XML syntax characters, so we’re only
interested whether they fall into classes like <code>NameChar</code> and
<code>NameStartChar</code> and so on.  A 64K <code>byte[]</code> array takes
care of that, each byte having a class bitmask.</p>
<p>As a result of all this jiggery-pokery, the DFA ends up, believe it
or not, constituting a <code>short[227][128]</code>.</p>
<p>Here’s a typical chunk of the automaton:</p>
<pre><code>1. # in Start tag GI
2. State StagGI BustedMarkup {in element type}
3. T $NameC StagGI
4. T $S InStag !EndGI
5. T > InDoc !EndGI !ReportSTag
6. T / EmptyClose !EndGI</code></pre>
<p>This state, called <code>StagGI</code>, is the state where we’re actually
reading the name of a tag, we got here by seeing a <code>&lt;</code> followed
by a <code>NameStart</code> character.<br/>
Line 1 is a comment.<br/>
In line 2 we name the state, and support error reporting, providing the name
of another state to fall back into in case of error, and in the curly braces,
some text to help build an error message.<br/>
Line 3 says that if we see a valid XML Name character, we just stay in this
state.<br/>
Line 4 says that if we see an XML space character, we move to state
<code>InStag</code> and process an <code>EndGI</code> event, which would stash
the characters in the start tag.<br/>And so on.</p>
<h2 id='p-6'>Other Hackery</h2>
<p>An early cut of Lark used String and StringBuffer objects to hold all the
bits and pieces of the XML.  This might be a viable strategy today, but in
1996’s Java it was painfully slow. 
So the code goes to heroic lengths to live in the land of character arrays at
all times, making Strings only when a client program asks for one through the
API.  The performance difference was mind-boggling.</p>
<h2 id='p-7'>An Evil Idea</h2>
<p>If you look at the automaton, and the Lark code, at least half—I’d bet
three quarters—is there to deal with parsing the DTD and then dealing with
entity wrangling.
A whole bunch more is there to support DOM-building and walking.</p>
<p>I bet if I went through and simply removed support for anything coming out
of the <code>&lt;!DOCTYPE></code>, including all entity processing, 
then discarded
the DOM stuff, then added namespace support and SAX and StAX APIs, it would be
less than half its current size.  
Then if I reworked the I/O, knowing what I know now and stealing some tricks
that James Clark uses in
<a href="http://expat.sourceforge.net/">expat</a>, I bet it would
be the fastest Java XML parser on the planet for XML docs without a
DOCTYPE; by a wide margin.  It’s hard to beat a DFA.</p>
<p>And it would still be fully XML 1.0 compliant.  Because (snicker) this is
Java, and your basic core Java now includes an XML parser, so I could simply
instrument Larkette to buffer the prologue and if it saw a DOCTYPE with an
internal subset, defer to Java’s built-in parser.</p>
<p>I’ll probably never do it.  But the thought brings a smile to my face.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/22/'>
 <title>Just A Kid</title>
 <link href='Just-a-Kid' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/22/Just-a-Kid</id>
 <published>2006-04-22T13:00:00-08:00</published>
 <updated>2006-04-22T13:37:58-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World/Food and Drink' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Food and Drink' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>Last weekend, Lauren felt like cooking up home-made Easter eggs, so
the shopping list included “chocolate chips (large bag)”.  I was heading down
the bulk-foods aisle and realized one of the vertical acrylic bins was full of
them.  Someone had been sloppy, and there was a little heap of chocolate chips
on the shelf underneath it.  For a second, I flashed into pure eight-year-old
mode, thinking “Holy cow, there’s a <em>whole bin</em> full of chocolate
chips, and more just lying there!”  I popped a few in my mouth and they were
excellent; semi-sweet, dark, strong, and firm.  I was still in the state that
Buddhists don’t mean when they say “Child’s Mind”, thinking “I
can get as many as I want!”  The list did say “large bag” after all, so I put
a bag under the spout and gleefully jammed the lever <em>all the way
over</em>.  At home, Lauren said “You went overboard, a bit, didn’t you?”
and now we have a plastic canister-full in the pantry which should last us
into 2007.  It’s a good feeling.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/22/'>
 <title>Goddess</title>
 <link href='Goddess' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/22/Goddess</id>
 <published>2006-04-22T13:00:00-08:00</published>
 <updated>2006-04-22T12:25:59-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World/Family' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Family' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Microsoft' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Microsoft' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>That would be my wife 
<a href="http://www.laurenwood.org/anyway/">Lauren</a>.  After 
<a href="/ongoing/When/200x/2006/04/16/Mad-at-Microsoft">I b0rked</a> our
Win2K gamebox, I tried re-installing the OS and eventually reduced it to
complete brick-ness, it recognized neither the video adapter nor the network
card.  So Lauren brushed me aside and started wrestling with the problem, and
to make a long story short, it almost completely works again.  At one point
she seemed nearly infinite in her capabilities, sitting in front of the
computer wrangling software updates while knitting baby stuff and looking up
words in a German dictionary for the kid’s homework.  Some of the German nouns
and muttered curses at the Windows install sounded remarkably like each other.
Why would anyone not marry a geek?  The only problem is that Win2K won’t
auto-switch resolutions to play games any more, it gets the frequency wrong
and the LCD goes pear-shaped, you have to hand-select the frequency and
switch into the right resolution first.  LazyWeb?</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/21/'>
 <title>Routing Around Spotlight</title>
 <link href='Routing-Around-Spotlight' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/21/Routing-Around-Spotlight</id>
 <published>2006-04-21T13:00:00-08:00</published>
 <updated>2006-04-21T23:16:25-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Mac OS X/Gripes' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Mac OS X' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Gripes' />
 <summary type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>Herewith two hideously ugly little shell scripts for use when Spotlight refuses to search your mail. Spotlight is a flawed v1.0 implementation of a really good idea and will, I&#x2019;m sure, be debugged in a near-future release. <i>[Update: The LazyWeb is educating me... these are moving targets.]</i></div></summary>
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>Herewith two hideously ugly little shell scripts for use when Spotlight
refuses to search your mail.
Spotlight is a flawed v1.0 implementation of a really good idea and will, I’m
sure, be debugged in a near-future release.
<i>[Update: The LazyWeb is educating me... these are moving targets.]</i></p>
<p>My problem is that whereas Mail.app will search my To/From/Subject
lines (slowly, and with a
<a href="/ongoing/When/200x/2005/11/20/UnTiger">really irritating GUI</a>),
the “Entire Message” option just doesn’t work, it returns instantly with no
results.  Yes, I’ve read the hints about making Spotlight re-index,
but it just flatly refuses to work for me.  Mind you, I have a lot of
email, but still, it should at least try.</p>
<p>It turns out I had never really figured out the <code>-print0</code> and
<code>-0</code> idioms that a lot of the shell-command stalwarts now have.
Thanks to Malcolm Tredinnick for raising my consciousness.</p>
<p>This lives in <code>$HOME/bin</code> under the name
<code>mailgrep</code>:</p>
<pre><code>#!/bin/sh
find $HOME/Library/Mail/IMAP* -name '*.emlx' -print0 | \
  xargs -0 fgrep -i $@</code></pre>
<p>Isn’t <code>xargs</code> a funny command?  I’ve discovered that it’s nearly
impossible to describe what does, and then why what it does is necessary, but
there are just a whole bunch of places where you’d be lost without it.</p>
<p>This lives in <code>$HOME/bin/mailview</code>:</p>
<pre><code>#!/bin/sh
find $HOME/Library/Mail/IMAP* -name '*.emlx'  -print0 | \
  xargs -0 fgrep -i -l -Z $@ | \
  xargs -0 open</code></pre>
<p>The first cut of this dodged <code>xargs</code> and used an
incredibly-inefficient and slow chain of <code>-exec</code> arguments to open
the files one at a time with 
<code>view</code> (aka <code>vim</code>), to work around 
a well-known <code>vim</code> misfeature; it complained about the input
not being a terminal and left my Terminal.app keystrokes borked.</p>
<p>But Malcolm, confirming my belief in the broken-ness of <code>vim</code>,
said “Oh, *that* ‘view’.  I thought it was some sexy Mac ‘view my email’ app”.
D’oh, of course; the magic OS X <code>open</code> command does just the right
thing. 
Erm, you might want to run <code>mailgrep</code> before you run
<code>mailview</code>; I’m not sure what would happen if you asked OS X to
open three or four thousand email messages at once.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/21/'>
 <title>FSS: Pink Flowers</title>
 <link href='Dracon-Help' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/21/Dracon-Help</id>
 <published>2006-04-21T13:00:00-08:00</published>
 <updated>2006-04-21T17:19:27-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts/Photos' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Photos' />
 <summary type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>Friday Slide Scan #28 is two Eighties florals, one interior, one exterior.  With a confession.</div></summary>
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>Friday Slide Scan #28 is two Eighties florals, one interior, one
exterior.  With a confession.</p>
<p>First some spring flowers fallen from a tree, just as now in our front
yard, at dusk.</p>
<img src="0506.png" alt="Fallen pink treeflowers on grass at dusk" />
<p>I’m not sure what these are, but look at the light in the center.  Rewards
enlarging.</p>
<img src="0713.png" alt="Flowers in shadow with light in background" />
<p>Here’s the confession.  Sometimes on Fridays when I’m feeling kinda
burned-out, I knock off work and do these slide scans in the office, because
this is where I have the
<a href="http://www.tbray.org/ongoing/When/200x/2004/04/14/MineIsBigger">big
screen</a>.
Blowing these pictures up to mega-huge, picking away at the old-slide crud and
scanning artifacts, tinkering with the colour balance, and listening; I never
play music while I’m writing or coding seriously, but I play it real loud while
photo-editing.  It’s all pretty well pure pleasure; you just can’t imagine
how good that second one above looks at near-native size.
It reconstitutes the part of my mind that I earn my living with; that’s my
story and I’m sticking to it.</p>
<p>Images in the Friday Slide Scans are from 35mm slides taken between 1953
and 2003 by (in rough chronological order)
<a href="http://www.textuality.com/BillBray/">Bill Bray</a>, 
<a href="/ongoing/When/200x/2004/08/11/MomsGarden">Jean Bray</a>, Tim Bray, Cath
Bray, and
<a href="http://www.laurenwood.org/anyway/">Lauren Wood</a>; when I know
exactly who took one, I’ll say; in this case, at least one is by Cath Bray.
Most but not all of the slides were on Kodachrome; they were digitized using
a Nikon CoolScan 4000 ED scanner and cleaned up by a combination of the Nikon
scanning software and PhotoShop Elements.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/20/'>
 <title>Spring Pix</title>
 <link href='Spring-Pix' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/20/Spring-Pix</id>
 <published>2006-04-20T13:00:00-08:00</published>
 <updated>2006-04-20T23:07:10-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World/Places/Vancouver' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Places' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Vancouver' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts/Photos' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Arts' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Photos' />
 <summary type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>Three pictures around Vancouver; one of a fresh green springtime tree, two of rotten old buildings being torn down.</div></summary>
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>Three pictures around Vancouver; one of a fresh green springtime tree, two
of rotten old buildings being torn down.</p>
<p>There’s nothing quite as fresh as just-sprouted deciduous leaves;
another few weeks and this tree will be just a tree.</p>
<img src="IMG_4656.png" alt="Sunlit fresh young leaves" />
<p>I have a thing about demolition.
The first is a rotten dingy old one-story on Main Street near 23rd, the second
is an unlovely grey mid-rise being torn down to build still more condos at
Homer and Helmcken.</p>
<img src="IMG_4665.png" alt="Demolition site on Main Street, Vancouver" />
<img src="IMG_4671.png" alt="Demolition site at Homer and Helmcken, Vancouver" />
</div></content></entry>

<entry xml:base='When/200x/2006/04/20/'>
 <title>Totten&#x2019;s Trip</title>
 <link href='Totten-on-Iraq' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/20/Totten-on-Iraq</id>
 <published>2006-04-20T13:00:00-08:00</published>
 <updated>2006-04-20T21:05:22-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World/Places/Middle East' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Places' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Middle East' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p><a href="http://www.michaeltotten.com/">Michael J. Totten</a> is a
journalist and blogger who’s back and forth to the 
Middle East and writes about it, quite well in my opinion; he supports this by
freelancing and with his blog’s tip jar.  He gets lots of
link love from the right-wing blogosphere, which is puzzling because Totten is
balanced and clear-eyed and doesn’t seem to have any particular axe to grind.
Recently, he and a friend were 
<a href="http://www.michaeltotten.com/archives/001117.html">having fun in
Istanbul</a> and, on a random drive out into the country, decided on impulse to
keep going, all the way across Turkey and into Iraq; into the Kurdish
mini-state in Iraq’s north, to 
be precise.  It makes a heck of a story, with lots of pictures, in six parts:
<a href="http://www.michaeltotten.com/archives/001119.html">I</a>,
<a href="http://www.michaeltotten.com/archives/001120.html">II</a>,
<a href="http://www.michaeltotten.com/archives/001121.html">III</a>,
<a href="http://www.michaeltotten.com/archives/001124.html">IV</a>,
<a href="http://www.michaeltotten.com/archives/001126.html">V</a>, and
<a href="http://www.michaeltotten.com/archives/001127.html">VI</a>.
</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/19/'>
 <title>The Cost of AJAX</title>
 <link href='The-Cost-of-AJAX' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/19/The-Cost-of-AJAX</id>
 <published>2006-04-19T13:00:00-08:00</published>
 <updated>2006-04-20T00:37:46-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology/Web' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Technology' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Web' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>James Governor
<a href="http://www.redmonk.com/jgovernor/archives/001526.html">relays a
question</a> that sounds important
but I think is actively dangerous: do AJAX apps present more of
a server-side load?  The question is dangerous because it’s meaningless and
unanswerable.  Your typical Web page will, in the process of
loading, call back to the server for a bunch of stylesheets and graphics and
scripts and so on: for example, this <span class='o'>ongoing</span> page calls
out to three different graphics, one stylesheet, and one JavaScript file.
It also has one “AJAXy” XMLHttpRequest call.
From the server’s point of view, those are all just requests to dereference
one URI or another.  In the case
of <span class='o'>ongoing</span>, the AJAX request is for a static file less
than 200 bytes in size (i.e. cheap).
On the other hand, it could have been for something that required a
complex outer join on two ten-million-row tables (i.e. <em>very</em>
expensive).  And one of the virtues of 
the Web Architecture is that it hides those differences, the “U” in URI stands
for “Uniform”, it’s a Uniform interface to a resource on the Web that could
be, well, anything.
So saying “AJAX is expensive” (or that it’s cheap) is like saying “A mountain
bike is slower than a battle tank” (or that it’s faster).  
The truth depends on what you’re doing with it. 
In the case of web sites, it depends on how many fetches you do and
where you have to go to get the data to satisfy them.
<span class='o'>ongoing</span> is a pretty quick web site, even though it runs
on a fairly modest server, but
that has nothing to do with AJAX-or-not; it’s because of the particular way
I’ve set up the Web resources that make the pages here.
I’ve
<a href="/ongoing/When/200x/2006/02/14/AJAX-Performance">argued elsewhere</a>
that AJAX can be a performance win, system-wide; but that argument too is
contingent on context, lots of context.</p>
</div></content></entry>

<entry xml:base='When/200x/2006/04/18/'>
 <title>Hao Wu and Graham McMynn</title>
 <link href='Hao-Wu' />
 <id>http://www.tbray.org/ongoing/When/200x/2006/04/18/Hao-Wu</id>
 <published>2006-04-18T13:00:00-08:00</published>
 <updated>2006-04-18T22:00:40-08:00</updated>
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World/Places/China' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Places' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='China' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='The World/Politics' />
 <category scheme='http://www.tbray.org/ongoing/What/' term='Politics' />
<content type='xhtml'><div xmlns='http://www.w3.org/1999/xhtml'>
<p>Graham McMynn is a teenager who was kidnapped in Vancouver on April 4th and
freed, in a large, noisy, and
<a href="http://www.cbc.ca/story/news/national/2006/04/12/bcabduction060412.html">newsworthy</a>
police operation, on April 12th.
<a href="http://en.wikipedia.org/wiki/Hao_Wu">Hao Wu</a> is a Chinese
film-maker and
<a href="http://beijingorbust.blogspot.com/">blogger</a> who was kidnapped in
Beijing on February 22nd in a 
small, quiet police operation not intended to be newsworthy, and who has not
been freed.
Read about it
<a href="http://spaces.msn.com/wuhaofamily/">here</a>,
<a href="http://ethanzuckerman.com/haowu/">here</a>, and
<a href="http://rconversation.blogs.com/rconversation/freehaowu/index.html">here</a>.
Making noise about it <em>might</em> influence the government of China to
moderate its actions against Mr. Wu, and can’t do any harm.
Mr. McMynn’s kidnappers were a gaggle of small-time hoodlums, one of whom was
out on bail while awaiting trial for another kidnapping (!).
Mr. Wu’s were police.
In a civilized country, the function of the police force is to deter such
people and arrest them.  A nation where they are the same people?   Nobody
could call it “civilized”.</p> 
</div></content></entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel title works w/ nested title
Expect:      feed.title.text == 'test title'

-->
<rss version="2.0" >
<channel>
<title>test title</title>
<bogus><title>bogus title</title></bogus>
</channel>
</rss>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed title works normalized
Expect: feed.title.plainText() == 'Test'

-->
<rdf:RDF 
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns="http://purl.org/rss/1.0/"
>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
  </channel>
</rdf:RDF>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom summary with entities works
Expect: feed.subtitle.text == '&quot;test&quot; &amp; &apos;title&apos; &amp; &lt;ok&gt;'

-->
<feed xmlns="http://www.w3.org/2005/Atom">
<subtitle type="xhtml">
  <div xmlns="http://www.w3.org/1999/xhtml">
    "test&quot; &amp; &apos;title' &amp; &lt;ok>
  </div>
</subtitle>
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom title works
Expect:      feed.title.plainText() == 'test title'

-->
<feed xmlns="http://www.w3.org/2005/Atom">
  <title type="xhtml">
    <div xmlns="http://www.w3.org/1999/xhtml"><b>test</b> title</div>
  </title>
</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel title works
Expect:      feed.title.plainText() == 'test title'

-->
<rss version="2.0" >
<channel>
<title>test title</title>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel ttl works
Expect: feed.fields.getProperty('ttl') == '60'

-->
<rss version="2.0" >
<channel>
<ttl>60</ttl>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel pubDate works 
Expect:      feed.updated == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel>
<dc:date>Sat, 07 Sep 2002 00:00:01 GMT</dc:date>
</channel>
</rss><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed updated
Expect:  feed.updated == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'
 xmlns:dcterms='http://purl.org/dc/terms/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
    <dcterms:modified>Sat, 07 Sep 2002 00:00:01 GMT</dcterms:modified>
  </channel>
  <item rdf:about="http://example.com/hmm">
   <title>XML: A Disruptive Technology</title> 
   <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical
      infrastructure of the Internet.
    </dc:description>
  </item> 
</rdf:RDF>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: non-date atom updated should produce null feed.updated
Expect: feed.updated == null

-->

<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2003I'mNotADate</updated>
  <author>
       <name>John Doe</name>
  </author>
  <id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>

  <entry>
    <title>Atom-Powered Robots Run Amok</title>
    <link href="http://example.org/2003/12/13/atom03"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>
    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel lastBuildDate trumps pubDate
Expect:      feed.updated == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rss version="2.0" >
<channel>
<pubDate>Sun, 08 Sep 2002 00:00:01 GMT</pubDate>
<lastBuildDate>Sat, 07 Sep 2002 00:00:01 GMT</lastBuildDate>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel lastBuildDate works 
Expect:      feed.updated == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rss version="2.0" >
<channel>
<lastBuildDate>Sat, 07 Sep 2002 00:00:01 GMT</lastBuildDate>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom updated works
Expect: feed.updated == 'Sat, 13 Dec 2003 18:30:02 GMT'

-->

<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2003-12-13T18:30:02Z</updated>
  <author>
       <name>John Doe</name>
  </author>
  <id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6</id>

  <entry>
    <title>Atom-Powered Robots Run Amok</title>
    <link href="http://example.org/2003/12/13/atom03"/>
    <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
    <updated>2003-12-13T18:30:02Z</updated>
    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel pubDate works 
Expect:      feed.updated == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rss version="2.0" >
<channel>
<pubDate>Sat, 07 Sep 2002 00:00:01 GMT</pubDate>
</channel>
</rss><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 Version works
Expect: result.version == 'rss1'
-->
<rdf:RDF 
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns="http://purl.org/rss/1.0/"
>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
  </channel>
</rdf:RDF><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel webMaster works 
Expect:      feed.fields.getProperty('webMaster') == 'example@example.com'

-->
<rss version="2.0" >
<channel>
<webMaster>example@example.com</webMaster>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel copyright works 
Expect:      feed.fields.getProperty('wfw:comment') == 'http://example.org'

-->
<rss xmlns:wfw="http://wellformedweb.org/CommentAPI/" version="2.0" >
<channel xmlns:dc="http://purl.org/dc/elements/1.1/">
<wfw:comment>http://example.org</wfw:comment>
<copyright>copyright 2006</copyright>
<dc:creator>me</dc:creator>
<dc:contributor>them</dc:contributor>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel copyright works 
Expect:      feed.fields.getProperty('wfw:commentRss') == 'http://example.org'

-->
<rss xmlns:wfw="http://wellformedweb.org/CommentAPI/" version="2.0" >
<channel xmlns:dc="http://purl.org/dc/elements/1.1/">
<copyright>copyright 2006</copyright>
<dc:creator>me</dc:creator>
<wfw:commentRss>http://example.org</wfw:commentRss>
<dc:contributor>them</dc:contributor>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel unusual prefixed ext works 
Expect:      feed.fields.getProperty('wiki:version') == '1'
 
-->
<rss 
xmlns:w='http://purl.org/rss/1.0/modules/wiki/'
xmlns:wfw="http://wellformedweb.org/CommentAPI/" version="2.0" >
<channel xmlns:dc="http://purl.org/dc/elements/1.1/">
<copyright>copyright 2006</copyright>
<dc:creator>me</dc:creator>
<w:version>1</w:version>
<wfw:commentRss>http://example.org</wfw:commentRss>
<dc:contributor>them</dc:contributor>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel unusual prefixed ext works 
Expect:      feed.fields.getProperty('wiki:version') == '1'
 
-->
<rss 
xmlns:w='http://purl.org/rss/1.0/modules/wiki/'
xmlns:wfw="http://wellformedweb.org/CommentAPI/" version="2.0" >
<channel xmlns:dc="http://purl.org/dc/elements/1.1/">
<copyright>copyright 2006</copyright>
<dc:creator>me</dc:creator>
<w:version>1</w:version>
<wfw:commentRss>http://example.org</wfw:commentRss>
<dc:contributor>them</dc:contributor>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: atom feed with xml:base
Expect: feed.link.spec == "http://www.example.com/foo/bar/baz";

-->
<feed xmlns="http://www.w3.org/2005/Atom"
      xml:base="http://www.example.com/foo/bar/">

  <id>tag:example.com,2006:/atom/conformance/linktest/</id>
  <title>Atom Link Tests</title>
  <updated>2005-06-18T16:13:00Z</updated>
  <link href="baz" />
  
  <entry xml:base="http://www.example.org">
    <id>tag:example.org,2006:/linkreltest/1</id>
    <title>Does your reader support xml:base properly? </title>
    <updated>2006-06-23T12:12:12Z</updated>
    <link xml:base="/bar/" href="foo"/>
  </entry>
  
</feed>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="ff"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - FieldSet</title>
</head>
<body onload="parent.loadComplete()">
<form id="form2" action="..." method="post">
<fieldset>
<legend>All data entered must be valid</legend>
</fieldset>
</form>
<table summary="Table 1">
<tr>
<td>
<fieldset>
<legend>All data entered must be valid</legend>
</fieldset>
</td>
</tr>
</table>
</body>
</html>
<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xhtml="http://www.w3.org/1999/xhtml"
          xmlns:svg="http://www.w3.org/2000/svg">
<binding id="test">
  <content>
    <svg:g><svg:circle><xhtml:div xml:base="#shesellsseashellsbytheseashore"/></svg:circle><children/></svg:g>
  </content>
 </binding>
</bindings>
<?xml version="1.0"?>
<bindings id="testBindings" xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml">
  <binding id="regularChromeBinding">
    <content><html:p>Anonymous Paragraph</html:p></content>
  </binding>
  <binding id="whitelistedChromeBinding" bindToUntrustedContent="true">
    <content><html:p>Anonymous Paragraph</html:p></content>
  </binding>
</bindings>
<?xml-stylesheet type="text/xsl" href="file_bug293347xslt.xml"?>
<doc/><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/doc">
    <html>
      <body>
        <div></div>
        <div>
          <script>
            didThrow = false;
            try {
              document.write("shrimp");
            } catch (e) {
              didThrow = true;
            }
          </script>
        </div>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet>
<data root="yes"/>
<?xml version="1.0"?>
<bindings id="xbltestBindings" xmlns="http://www.mozilla.org/xbl">
  <binding id="xbltest"><content>PASS</content></binding>
</bindings>
<out>Here be sea hags</out>
<?xml version="1.0"?>
<bindings id="xbltestBindings" xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml">
  <binding id="xbltest"><content>PASS<html:b style="display:none"><children/></html:b></content></binding>
</bindings>
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="file_bug604660-2.xsl" ?>
<placeholder/>
<?xml version="1.0"?>
<placeholder/>
<?xml version="1.0" encoding="windows-1251"?><root></root>
<?xml version="1.0"?>
<bindings id="xbltestBindings" xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml">
<binding id="xbltest">
<implementation>
<method name="testMethod" exposeToUntrustedContent="true">
<body>
  Components.interfaces;
</body>
</method>
<property name="testProp" readonly="true"
          onget="Components; return 3;"
          exposeToUntrustedContent="true" />
<constructor>
  var foo = Components;
</constructor>
</implementation>
</binding>
</bindings>
<?xml version="1.0"?>
<bindings id="testBindings" xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml">
  <binding id="testAllowScript" bindToUntrustedContent="true">
    <implementation>
       <property name="someProp" onget="return 2;" readonly="true"></property>
       <method name="someMethod"><body> return 3; </body></method>
       <method name="startTest">
         <body>
         <![CDATA[
           // Make sure we only get constructed when we're loaded from a domain
           // with script enabled.
           is(this.id, 'allow', "XBL should only be bound when the origin of the binding allows scripts");

           var t = this;
           doFinish = function() {
             // Take a moment to make sure that other constructors don't run when they shouldn't.
             if (t.id == 'allow')
               setTimeout(SpecialPowers.wrap(window.parent).finish, 100);
           }

           onTestEvent = function(target) {
             ok(true, 'called event handler');

             // Try calling event handlers on anonymous content.
             var e = new MouseEvent('click');
             document.getAnonymousNodes(target)[1].dispatchEvent(e);
             ok(window.calledEventHandlerOnAC, "Should invoke event handler on AC");

             // Now, dispatch a key event to test key handlers and move the test along.
             var k = document.createEvent('KeyboardEvent');
             k.initEvent('keyup', true, true);
             target.dispatchEvent(k);
           }

           // Check the implementation.
           is(this.someProp, 2, "Properties work");
           is(this.someMethod(), 3, "Methods work");

           // Kick over to the event handlers. This tests XBL event handlers,
           // XBL key handlers, and event handlers on anonymous content.
           this.dispatchEvent(new CustomEvent('testEvent'));
         ]]>
         </body>
       </method>

      <constructor>
      <![CDATA[
        win = XPCNativeWrapper.unwrap(window);
        SpecialPowers = win.SpecialPowers;
        ok = win.ok = SpecialPowers.wrap(window.parent).ok;
        is = win.is = SpecialPowers.wrap(window.parent).is;
        info = win.info = SpecialPowers.wrap(window.parent).info;

        info("Invoked constructor for " + this.id);

        var t = this;
        window.addEventListener('load', function loadListener() {
          window.removeEventListener('load', loadListener);
          // Wait two refresh-driver ticks to make sure that the constructor runs
          // for both |allow| and |deny| if it's ever going to.
          //
          // See bug 944407 comment 37.
          info("Invoked load listener for " + t.id);
          window.requestAnimationFrame(function() { window.requestAnimationFrame(t.startTest.bind(t)); });
        });
      ]]>
      </constructor>
    </implementation>
    <handlers>
      <handler event="testEvent" action="onTestEvent(this)" allowuntrusted="true"/>
      <handler event="keyup" action="ok(true, 'called key handler'); doFinish();" allowuntrusted="true"/>
    </handlers>
    <content>Anonymous Content<html:div onclick="window.calledEventHandlerOnAC = true;"></html:div><html:b style="display:none"><children/></html:b></content>
  </binding>
</bindings>
<?xml version="1.0"?>
<bindings id="chromeTestBindings" xmlns="http://www.mozilla.org/xbl">
  <binding id="testBinding" bindToUntrustedContent="true">
    <implementation implements="nsIObserver">
      <constructor>
      <![CDATA[
        // This binding gets applied to a content object, and thus is actually
        // running in a content XBL scope.
        var win = XPCNativeWrapper.unwrap(window);
        var SpecialPowers = win.SpecialPowers;
        var ok = SpecialPowers.unwrap(SpecialPowers.wrap(window).parent.ok);
        ok(win != window, "Should be running in an XBL scope with Xrays");

        // Generate an XPCWrappedJS for the reflector. We need to do this
        // explicitly with a testing helper, because we're converging on
        // removing XPConnect from the web, which means that it won't be
        // possible to generate an XPCWrappedJS from content (or XBL) code.
        var scope = {};
        var holder = SpecialPowers.Cu.generateXPCWrappedJS(this, scope);

        // Now, QI |this|, which will generate an aggregated native.
        this.QueryInterface(Components.interfaces.nsIObserver);

        ok(true, "Didn't assert or crash");

        SpecialPowers.wrap(window).parent.SimpleTest.finish();
      ]]>
      </constructor>
      <method name="observe">
        <parameter name="aSubject"/>
        <parameter name="aTopic"/>
        <parameter name="aData"/>
        <body><![CDATA[]]></body>
      </method>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="file_CSP_bug663567.xsl"?>
<catalog>
	<cd>
		<title>Empire Burlesque</title>
		<artist>Bob Dylan</artist>
		<country>USA</country>
		<company>Columbia</company>
		<price>10.90</price>
		<year>1985</year>
	</cd>
	<cd>
		<title>Hide your heart</title>
		<artist>Bonnie Tyler</artist>
		<country>UK</country>
		<company>CBS Records</company>
		<price>9.90</price>
		<year>1988</year>
	</cd>
	<cd>
		<title>Greatest Hits</title>
		<artist>Dolly Parton</artist>
		<country>USA</country>
		<company>RCA</company>
		<price>9.90</price>
		<year>1982</year>
	</cd>
</catalog>
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="file_CSP_bug663567.xsl"?>
<catalog>
	<cd>
		<title>Empire Burlesque</title>
		<artist>Bob Dylan</artist>
		<country>USA</country>
		<company>Columbia</company>
		<price>10.90</price>
		<year>1985</year>
	</cd>
	<cd>
		<title>Hide your heart</title>
		<artist>Bonnie Tyler</artist>
		<country>UK</country>
		<company>CBS Records</company>
		<price>9.90</price>
		<year>1988</year>
	</cd>
	<cd>
		<title>Greatest Hits</title>
		<artist>Dolly Parton</artist>
		<country>USA</country>
		<company>RCA</company>
		<price>9.90</price>
		<year>1982</year>
	</cd>
</catalog>
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="file_CSP_bug910139.xsl"?>
<catalog>
	<cd>
		<title>Empire Burlesque</title>
		<artist>Bob Dylan</artist>
		<country>USA</country>
		<company>Columbia</company>
		<price>10.90</price>
		<year>1985</year>
	</cd>
	<cd>
		<title>Hide your heart</title>
		<artist>Bonnie Tyler</artist>
		<country>UK</country>
		<company>CBS Records</company>
		<price>9.90</price>
		<year>1988</year>
	</cd>
	<cd>
		<title>Greatest Hits</title>
		<artist>Dolly Parton</artist>
		<country>USA</country>
		<company>RCA</company>
		<price>9.90</price>
		<year>1982</year>
	</cd>
</catalog>
<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml">
  <binding id="foo">
    <implementation>
      <field name="bar">baz</field>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="filefieldBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xbl="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="filefield" extends="chrome://global/content/bindings/general.xml#basetext">
    <resources>
      <stylesheet src="chrome://global/skin/filefield.css"/>
    </resources>
    <content>
      <xul:stringbundle anonid="bundle" src="chrome://global/locale/filefield.properties"/>
      <xul:hbox class="fileFieldContentBox" align="center" flex="1" xbl:inherits="disabled">
        <xul:image class="fileFieldIcon" xbl:inherits="src=image,disabled"/>
        <xul:textbox class="fileFieldLabel" xbl:inherits="value=label,disabled,accesskey,tabindex,aria-labelledby" flex="1" readonly="true"/>
      </xul:hbox>
    </content>
    <implementation implements="nsIDOMXULLabeledControlElement">
      <property name="label" onget="return this.getAttribute('label');">
        <setter>
          this.setAttribute('label', val); 
          var elt = document.getAnonymousElementByAttribute(this, "class", "fileFieldLabel");
          return (elt.value = val);
        </setter>
      </property>
      
      <field name="_file">null</field>
      <property name="file"  onget="return this._file">
        <setter>
        <![CDATA[
          this._file = val; 
          if (val) {
            this.image = this._getIconURLForFile(val);
            this.label = this._getDisplayNameForFile(val);
          }
          else {
            this.removeAttribute("image");
            var bundle = document.getAnonymousElementByAttribute(this, "anonid", "bundle");
            this.label = bundle.getString("downloadHelperNoneSelected");
          }            
          return val;
        ]]>
        </setter>
      </property>      
      <method name="_getDisplayNameForFile">
        <parameter name="aFile"/>
        <body>
        <![CDATA[
#ifdef XP_WIN
          var lfw = aFile.QueryInterface(Components.interfaces.nsILocalFileWin);
          try {
            return lfw.getVersionInfoField("FileDescription"); 
          }
          catch (e) {
            // fall through to the filename
          }
#endif
#ifdef XP_MACOSX
          var lfm = aFile.QueryInterface(Components.interfaces.nsILocalFileMac);
          try {
            return lfm.bundleDisplayName;
          }
          catch (e) {
            // fall through to the file name
          }
#endif
          var ios = Components.classes["@mozilla.org/network/io-service;1"]
                              .getService(Components.interfaces.nsIIOService);
          var url = ios.newFileURI(aFile).QueryInterface(Components.interfaces.nsIURL);
          return url.fileName;
        ]]>
        </body>
      </method>
      
      <method name="_getIconURLForFile">
        <parameter name="aFile"/>
        <body>
        <![CDATA[
          if (!aFile)
            return "";
          var ios = Components.classes["@mozilla.org/network/io-service;1"]
                              .getService(Components.interfaces.nsIIOService);
          var fph = ios.getProtocolHandler("file")
                       .QueryInterface(Components.interfaces.nsIFileProtocolHandler);
          var urlspec = fph.getURLSpecFromFile(aFile);
          return "moz-icon://" + urlspec + "?size=16";  
        ]]>
        </body>
      </method>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0"?>
<bindings id="xbltestBindings" xmlns="http://www.mozilla.org/xbl">
  <binding id="xbltest">
    <content>PASS</content>
    <implementation>
      <constructor>
        var win = XPCNativeWrapper.unwrap(window);
        var SpecialPowers = win.SpecialPowers;
        var is = win.is;
        var todo_is = win.todo_is;
        var ok = win.ok;
        var legacyMozPrefixedInterfaces = win.legacyMozPrefixedInterfaces;
        var createInterfaceMap = win.createInterfaceMap;
        eval(win.runTest.toString());
        runTest(true);
        win.SimpleTest.finish();
      </constructor>
    </implementation>
  </binding>
</bindings>
<res xml:base="http://www.example.com/">data</res>
<res>hello</res>
<!-- comment -->
<out>hi</out>
<?xml version="1.0"><doc/>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:40 $"/>
        <language type="fil"/>
    </identity>
</ldml>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
<!ENTITY % findBarDTD SYSTEM "chrome://global/locale/findbar.dtd" >
%findBarDTD;
]>

<bindings id="findbarBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <!-- Private binding -->
  <binding id="findbar-textbox"
           extends="chrome://global/content/bindings/textbox.xml#textbox">
    <implementation>

      <field name="_findbar">null</field>
      <property name="findbar" readonly="true">
        <getter>
          return this._findbar ?
                 this._findbar : this._findbar = document.getBindingParent(this);
        </getter>
      </property>

      <method name="_handleEnter">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (this.findbar._findMode == this.findbar.FIND_NORMAL) {
            let findString = this.findbar._findField;
            if (!findString.value)
              return;
#ifdef XP_MACOSX
            if (aEvent.metaKey) {
#else
            if (aEvent.ctrlKey) {
#endif
              this.findbar.getElement("highlight").click();
              return;
            }

            this.findbar.onFindAgainCommand(aEvent.shiftKey);
          } else {
            this.findbar._finishFAYT(aEvent);
          }
        ]]></body>
      </method>

      <method name="_handleTab">
        <parameter name="aEvent"/>
        <body><![CDATA[
          let shouldHandle = !aEvent.altKey && !aEvent.ctrlKey &&
                             !aEvent.metaKey;
          if (shouldHandle &&
              this.findbar._findMode != this.findbar.FIND_NORMAL) {

            this.findbar._finishFAYT(aEvent);
          }
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="input"><![CDATA[
        // We should do nothing during composition.  E.g., composing string
        // before converting may matches a forward word of expected word.
        // After that, even if user converts the composition string to the
        // expected word, it may find second or later searching word in the
        // document.
        if (this.findbar._isIMEComposing) {
          return;
        }
        this.findbar._find(this.value);
      ]]></handler>

      <handler event="keypress"><![CDATA[
        let shouldHandle = !event.altKey && !event.ctrlKey &&
                           !event.metaKey && !event.shiftKey;

        switch (event.keyCode) {
          case KeyEvent.DOM_VK_RETURN:
            this._handleEnter(event);
            break;
          case KeyEvent.DOM_VK_TAB:
            this._handleTab(event);
            break;
          case KeyEvent.DOM_VK_PAGE_UP:
          case KeyEvent.DOM_VK_PAGE_DOWN:
            if (shouldHandle) {
              this.findbar.browser.finder.keyPress(event);
              event.preventDefault();
            }
            break;
          case KeyEvent.DOM_VK_UP:
          case KeyEvent.DOM_VK_DOWN:
            this.findbar.browser.finder.keyPress(event);
            event.preventDefault();
            break;
        }
      ]]></handler>

      <handler event="blur"><![CDATA[
        let findbar = this.findbar;
        // Note: This code used to remove the selection
        // if it matched an editable.
        findbar.browser.finder.enableSelection();
      ]]></handler>

#ifdef XP_MACOSX
      <handler event="focus"><![CDATA[
        let findbar = this.findbar;
        findbar._onFindFieldFocus();
      ]]></handler>
#endif

      <handler event="compositionstart"><![CDATA[
        // Don't close the find toolbar while IME is composing.
        let findbar = this.findbar;
        findbar._isIMEComposing = true;
        if (findbar._quickFindTimeout) {
          clearTimeout(findbar._quickFindTimeout);
          findbar._quickFindTimeout = null;
        }
      ]]></handler>

      <handler event="compositionend"><![CDATA[
        let findbar = this.findbar;
        findbar._isIMEComposing = false;
        if (findbar._findMode != findbar.FIND_NORMAL)
          findbar._setFindCloseTimeout();
      ]]></handler>

      <handler event="dragover"><![CDATA[
        if (event.dataTransfer.types.contains("text/plain"))
          event.preventDefault();
      ]]></handler>

      <handler event="drop"><![CDATA[
        let value = event.dataTransfer.getData("text/plain");
        this.value = value;
        this.findbar._find(value);
        event.stopPropagation();
        event.preventDefault();
      ]]></handler>
    </handlers>
  </binding>

  <binding id="findbar"
           extends="chrome://global/content/bindings/toolbar.xml#toolbar">
    <resources>
      <stylesheet src="chrome://global/skin/findBar.css"/>
    </resources>

    <content hidden="true">
    <xul:hbox anonid="findbar-container" class="findbar-container" flex="1" align="center">
      <xul:hbox anonid="findbar-textbox-wrapper" align="stretch">
        <xul:textbox anonid="findbar-textbox"
                     class="findbar-textbox findbar-find-fast"
                     xbl:inherits="flash"/>
        <xul:toolbarbutton anonid="find-previous"
                           class="findbar-find-previous tabbable"
                           tooltiptext="&previous.tooltip;"
                           oncommand="onFindAgainCommand(true);"
                           disabled="true"
                           xbl:inherits="accesskey=findpreviousaccesskey"/>
        <xul:toolbarbutton anonid="find-next"
                           class="findbar-find-next tabbable"
                           tooltiptext="&next.tooltip;"
                           oncommand="onFindAgainCommand(false);"
                           disabled="true"
                           xbl:inherits="accesskey=findnextaccesskey"/>
      </xul:hbox>
      <xul:toolbarbutton anonid="highlight"
                         class="findbar-highlight findbar-button tabbable"
                         label="&highlightAll.label;"
                         accesskey="&highlightAll.accesskey;"
                         tooltiptext="&highlightAll.tooltiptext;"
                         oncommand="toggleHighlight(this.checked);"
                         type="checkbox"
                         xbl:inherits="accesskey=highlightaccesskey"/>
      <xul:toolbarbutton anonid="find-case-sensitive"
                         class="findbar-case-sensitive findbar-button tabbable"
                         label="&caseSensitive.label;"
                         accesskey="&caseSensitive.accesskey;"
                         tooltiptext="&caseSensitive.tooltiptext;"
                         oncommand="_setCaseSensitivity(this.checked ? 1 : 0);"
                         type="checkbox"
                         xbl:inherits="accesskey=matchcaseaccesskey"/>
      <xul:label anonid="match-case-status" class="findbar-find-fast"/>
      <xul:label anonid="found-matches" class="findbar-find-fast found-matches" hidden="true"/>
      <xul:image anonid="find-status-icon" class="findbar-find-fast find-status-icon"/>
      <xul:description anonid="find-status"
                       control="findbar-textbox"
                       class="findbar-find-fast findbar-find-status">
      <!-- Do not use value, first child is used because it provides a11y with text change events -->
      </xul:description>
    </xul:hbox>
    <xul:toolbarbutton anonid="find-closebutton"
                       class="findbar-closebutton close-icon"
                       tooltiptext="&findCloseButton.tooltip;"
                       oncommand="close();"/>
    </content>

    <implementation implements="nsIDOMEventListener, nsIEditActionListener">
      <field name="FIND_NORMAL">0</field>
      <field name="FIND_TYPEAHEAD">1</field>
      <field name="FIND_LINKS">2</field>

      <field name="_findMode">0</field>

      <field name="_flashFindBar">0</field>
      <field name="_initialFlashFindBarCount">6</field>

      <property name="prefillWithSelection"
                onget="return this.getAttribute('prefillwithselection') != 'false'"
                onset="this.setAttribute('prefillwithselection', val); return val;"/>
      <field name="_selectionMaxLen">150</field>

      <method name="getElement">
        <parameter name="aAnonymousID"/>
        <body><![CDATA[
          return document.getAnonymousElementByAttribute(this,
                                                         "anonid",
                                                         aAnonymousID)
        ]]></body>
      </method>

      <property name="findMode"
                readonly="true"
                onget="return this._findMode;"/>

      <property name="canClear" readonly="true">
        <getter><![CDATA[
          if (this._findField.value)
            return true;

          // Watch out for lazy editor init
          if (this._findField.editor) {
            let tm = this._findField.editor.transactionManager;
            return !!(tm.numberOfUndoItems || tm.numberOfRedoItems);
          }
          return false;
        ]]></getter>
      </property>

      <field name="_browser">null</field>
      <property name="browser">
        <getter><![CDATA[
          if (!this._browser) {
            this._browser =
              document.getElementById(this.getAttribute("browserid"));
          }
          return this._browser;
        ]]></getter>
        <setter><![CDATA[
          // A shortcut for the service.
          let els = Components.classes["@mozilla.org/eventlistenerservice;1"].
            getService(Components.interfaces.nsIEventListenerService);

          if (this._browser) {
            els.removeSystemEventListener(this._browser, "keypress", this,
                                          false);
            els.removeSystemEventListener(this._browser, "mouseup", this,
                                          false);
            let finder = this._browser.finder;
            if (finder)
              finder.removeResultListener(this);
          }

          this._browser = val;
          if (this._browser) {
            els.addSystemEventListener(this._browser, "keypress", this, false);
            els.addSystemEventListener(this._browser, "mouseup", this, false);
            this._browser.finder.addResultListener(this);

            this._findField.value = this._browser._lastSearchString;
            this.toggleHighlight(this.browser._lastSearchHighlight);
          }
          return val;
        ]]></setter>
      </property>

      <field name="_observer"><![CDATA[({
        _self: this,

        QueryInterface: function(aIID) {
          if (aIID.equals(Components.interfaces.nsIObserver) ||
              aIID.equals(Components.interfaces.nsISupportsWeakReference) ||
              aIID.equals(Components.interfaces.nsISupports))
            return this;

          throw Components.results.NS_ERROR_NO_INTERFACE;
        },

        observe: function(aSubject, aTopic, aPrefName) {
          if (aTopic != "nsPref:changed")
            return;

          let prefsvc =
            aSubject.QueryInterface(Components.interfaces.nsIPrefBranch);

          switch (aPrefName) {
            case "accessibility.typeaheadfind":
              this._self._useTypeAheadFind = prefsvc.getBoolPref(aPrefName);
              break;
            case "accessibility.typeaheadfind.linksonly":
              this._self._typeAheadLinksOnly = prefsvc.getBoolPref(aPrefName);
              break;
            case "accessibility.typeaheadfind.casesensitive":
              this._self._setCaseSensitivity(prefsvc.getIntPref(aPrefName));
              break;
          }
        }
      })]]></field>

      <field name="_destroyed">false</field>

      <constructor><![CDATA[
        // These elements are accessed frequently and are therefore cached
        this._findField = this.getElement("findbar-textbox");
        this._foundMatches = this.getElement("found-matches");
        this._findStatusIcon = this.getElement("find-status-icon");
        this._findStatusDesc = this.getElement("find-status");

        this._foundURL = null;

        let prefsvc =
          Components.classes["@mozilla.org/preferences-service;1"]
                    .getService(Components.interfaces.nsIPrefBranch);

        this._quickFindTimeoutLength =
          prefsvc.getIntPref("accessibility.typeaheadfind.timeout");
        this._flashFindBar =
          prefsvc.getIntPref("accessibility.typeaheadfind.flashBar");
        this._matchesCountTimeoutLength =
          prefsvc.getIntPref("accessibility.typeaheadfind.matchesCountTimeout");
        this._matchesCountLimit =
          prefsvc.getIntPref("accessibility.typeaheadfind.matchesCountLimit");

        prefsvc.addObserver("accessibility.typeaheadfind",
                            this._observer, false);
        prefsvc.addObserver("accessibility.typeaheadfind.linksonly",
                            this._observer, false);
        prefsvc.addObserver("accessibility.typeaheadfind.casesensitive",
                            this._observer, false);

        this._useTypeAheadFind =
          prefsvc.getBoolPref("accessibility.typeaheadfind");
        this._typeAheadLinksOnly =
          prefsvc.getBoolPref("accessibility.typeaheadfind.linksonly");
        this._typeAheadCaseSensitive =
          prefsvc.getIntPref("accessibility.typeaheadfind.casesensitive");

        // Convenience
        this.nsITypeAheadFind = Components.interfaces.nsITypeAheadFind;
        this.nsISelectionController = Components.interfaces.nsISelectionController;
        this._findSelection = this.nsISelectionController.SELECTION_FIND;

        this._findResetTimeout = -1;

        // Make sure the FAYT keypress listener is attached by initializing the
        // browser property
        if (this.getAttribute("browserid"))
          setTimeout(function(aSelf) { aSelf.browser = aSelf.browser; }, 0, this);
      ]]></constructor>

      <destructor><![CDATA[
        this.destroy();
      ]]></destructor>

      <!-- This is necessary because the destructor isn't called when
           we are removed from a document that is not destroyed. This
           needs to be explicitly called in this case -->
      <method name="destroy">
        <body><![CDATA[
          if (this._destroyed)
            return;
          this._destroyed = true;

          this.browser = null;

          let prefsvc =
            Components.classes["@mozilla.org/preferences-service;1"]
                      .getService(Components.interfaces.nsIPrefBranch);
          prefsvc.removeObserver("accessibility.typeaheadfind",
                                 this._observer);
          prefsvc.removeObserver("accessibility.typeaheadfind.linksonly",
                                 this._observer);
          prefsvc.removeObserver("accessibility.typeaheadfind.casesensitive",
                                 this._observer);

          // Clear all timers that might still be running.
          this._cancelTimers();
        ]]></body>
      </method>

      <method name="_cancelTimers">
        <body><![CDATA[
          if (this._flashFindBarTimeout) {
            clearInterval(this._flashFindBarTimeout);
            this._flashFindBarTimeout = null;
          }
          if (this._quickFindTimeout) {
            clearTimeout(this._quickFindTimeout);
            this._quickFindTimeout = null;
          }
          if (this._highlightTimeout) {
            clearTimeout(this._highlightTimeout);
            this._highlightTimeout = null;
          }
          if (this._findResetTimeout) {
            clearTimeout(this._findResetTimeout);
            this._findResetTimeout = null;
          }
          if (this._updateMatchesCountTimeout) {
            clearTimeout(this._updateMatchesCountTimeout);
            this._updateMatchesCountTimeout = null;
          }
        ]]></body>
      </method>

      <method name="_setFindCloseTimeout">
        <body><![CDATA[
          if (this._quickFindTimeout)
            clearTimeout(this._quickFindTimeout);

          // Don't close the find toolbar while IME is composing OR when the
          // findbar is already hidden.
          if (this._isIMEComposing || this.hidden) {
            this._quickFindTimeout = null;
            return;
          }

          this._quickFindTimeout = setTimeout(() => {
             if (this._findMode != this.FIND_NORMAL)
               this.close();
             this._quickFindTimeout = null;
           }, this._quickFindTimeoutLength);
        ]]></body>
      </method>

      <field name="_pluralForm">null</field>
      <property name="pluralForm">
        <getter><![CDATA[
          if (!this._pluralForm) {
            this._pluralForm = Components.utils.import(
                               "resource://gre/modules/PluralForm.jsm", {}).PluralForm;
          }
          return this._pluralForm;
        ]]></getter>
      </property>

      <!--
        - Updates the search match count after each find operation on a new string.
        - @param aRes
        -        the result of the find operation
        -->
      <method name="_updateMatchesCount">
        <body><![CDATA[
          if (this._matchesCountLimit == 0 || !this._dispatchFindEvent("matchescount"))
            return;

          if (this._updateMatchesCountTimeout) {
            window.clearTimeout(this._updateMatchesCountTimeout);
          }
          this._updateMatchesCountTimeout =
            window.setTimeout(() => {
              this.browser.finder.requestMatchesCount(this._findField.value, this._matchesCountLimit,
                  this._findMode == this.FIND_LINKS);
            }, this._matchesCountTimeoutLength);
        ]]></body>
      </method>

      <!--
        - Turns highlight on or off.
        - @param aHighlight (boolean)
        -        Whether to turn the highlight on or off
        -->
      <method name="toggleHighlight">
        <parameter name="aHighlight"/>
        <body><![CDATA[
          if (!this._dispatchFindEvent("highlightallchange"))
            return;

          let word = this._findField.value;
          // Bug 429723. Don't attempt to highlight ""
          if (aHighlight && !word)
            return;

          this.browser._lastSearchHighlight = aHighlight;
          this.browser.finder.highlight(aHighlight, word);

          // Update the matches count
          this._updateMatchesCount(this.nsITypeAheadFind.FIND_FOUND);
        ]]></body>
      </method>

      <!--
        - Updates the case-sensitivity mode of the findbar and its UI.
        - @param [optional] aString
        -        The string for which case sensitivity might be turned on.
        -        This only used when case-sensitivity is in auto mode,
        -        @see _shouldBeCaseSensitive. The default value for this
        -        parameter is the find-field value.
        -->
      <method name="_updateCaseSensitivity">
        <parameter name="aString"/>
        <body><![CDATA[
          let val = aString || this._findField.value;

          let caseSensitive = this._shouldBeCaseSensitive(val);
          let checkbox = this.getElement("find-case-sensitive");
          let statusLabel = this.getElement("match-case-status");
          checkbox.checked = caseSensitive;

          statusLabel.value = caseSensitive ? this._caseSensitiveStr : "";

          // Show the checkbox on the full Find bar in non-auto mode.
          // Show the label in all other cases.
          let hideCheckbox = this._findMode != this.FIND_NORMAL ||
            (this._typeAheadCaseSensitive != 0 &&
             this._typeAheadCaseSensitive != 1);
          checkbox.hidden = hideCheckbox;
          statusLabel.hidden = !hideCheckbox;

          this.browser.finder.caseSensitive = caseSensitive;
        ]]></body>
      </method>

      <!--
        - Sets the findbar case-sensitivity mode
        - @param aCaseSensitivity (int)
        -   0 - case insensitive
        -   1 - case sensitive
        -   2 - auto = case sensitive iff match string contains upper case letters
        -   @see _shouldBeCaseSensitive
        -->
      <method name="_setCaseSensitivity">
        <parameter name="aCaseSensitivity"/>
        <body><![CDATA[
          this._typeAheadCaseSensitive = aCaseSensitivity;
          this._updateCaseSensitivity();
          this._findFailedString = null;
          this._find();
          if (this.getElement("highlight").checked)
            this._setHighlightTimeout();

          this._dispatchFindEvent("casesensitivitychange");
        ]]></body>
      </method>

      <field name="_strBundle">null</field>
      <property name="strBundle">
        <getter><![CDATA[
          if (!this._strBundle) {
            this._strBundle =
              Components.classes["@mozilla.org/intl/stringbundle;1"]
                        .getService(Components.interfaces.nsIStringBundleService)
                        .createBundle("chrome://global/locale/findbar.properties");
          }
          return this._strBundle;
        ]]></getter>
      </property>

      <!--
        - Opens and displays the find bar.
        -
        - @param aMode
        -        the find mode to be used, which is either FIND_NORMAL,
        -        FIND_TYPEAHEAD or FIND_LINKS. If not passed, the last
        -        find mode if any or FIND_NORMAL.
        - @returns true if the find bar wasn't previously open, false otherwise.
        -->
      <method name="open">
        <parameter name="aMode"/>
        <body><![CDATA[
          if (aMode != undefined)
            this._findMode = aMode;

          if (!this._notFoundStr) {
            var stringsBundle = this.strBundle;
            this._notFoundStr = stringsBundle.GetStringFromName("NotFound");
            this._wrappedToTopStr =
              stringsBundle.GetStringFromName("WrappedToTop");
            this._wrappedToBottomStr =
              stringsBundle.GetStringFromName("WrappedToBottom");
            this._normalFindStr =
              stringsBundle.GetStringFromName("NormalFind");
            this._fastFindStr =
              stringsBundle.GetStringFromName("FastFind");
            this._fastFindLinksStr =
              stringsBundle.GetStringFromName("FastFindLinks");
            this._caseSensitiveStr =
              stringsBundle.GetStringFromName("CaseSensitive");
          }

          this._findFailedString = null;

          this._updateFindUI();
          if (this.hidden) {
            this.hidden = false;

            this._updateStatusUI(this.nsITypeAheadFind.FIND_FOUND);

            let event = document.createEvent("Events");
            event.initEvent("findbaropen", true, false);
            this.dispatchEvent(event);

            return true;
          }
          return false;
        ]]></body>
      </method>

      <!--
        - Closes the findbar.
        -->
      <method name="close">
        <body><![CDATA[
          if (this.hidden)
            return;

          this.hidden = true;

          this.browser.finder.focusContent();
          this.browser.finder.enableSelection();
          this._findField.blur();

          this._cancelTimers();

          this._findFailedString = null;
        ]]></body>
      </method>

      <method name="clear">
        <body><![CDATA[
          this.browser.finder.removeSelection();
          this._findField.reset();
          this.toggleHighlight(false);
          this._updateStatusUI();
          this._enableFindButtons(false);
        ]]></body>
      </method>

      <method name="_dispatchKeypressEvent">
        <parameter name="aTarget"/>
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (!aTarget)
            return;

          let event = document.createEvent("KeyEvents");
          event.initKeyEvent(aEvent.type, aEvent.bubbles, aEvent.cancelable,
                             aEvent.view, aEvent.ctrlKey, aEvent.altKey,
                             aEvent.shiftKey, aEvent.metaKey, aEvent.keyCode,
                             aEvent.charCode);
          aTarget.dispatchEvent(event);
        ]]></body>
      </method>

      <field name="_xulBrowserWindow">null</field>
      <method name="_updateStatusUIBar">
        <parameter name="aFoundURL"/>
        <body><![CDATA[
          if (!this._xulBrowserWindow) {
            try {
              this._xulBrowserWindow =
                window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
                      .getInterface(Components.interfaces.nsIWebNavigation)
                      .QueryInterface(Components.interfaces.nsIDocShellTreeItem)
                      .treeOwner
                      .QueryInterface(Components.interfaces.nsIInterfaceRequestor)
                      .getInterface(Components.interfaces.nsIXULWindow)
                      .XULBrowserWindow;
            }
            catch(ex) { }
            if (!this._xulBrowserWindow)
              return false;
          }

          // Call this has the same effect like hovering over link,
          // the browser shows the URL as a tooltip.
          this._xulBrowserWindow.setOverLink(aFoundURL || "", null);
          return true;
        ]]></body>
      </method>

      <method name="_finishFAYT">
        <parameter name="aKeypressEvent"/>
        <body><![CDATA[
          this.browser.finder.focusContent();

          if (aKeypressEvent)
            aKeypressEvent.preventDefault();

          this.browser.finder.keyPress(aKeypressEvent);

          this.close();
          return true;
        ]]></body>
      </method>

      <!--
        - Returns true if |aMimeType| is text-based, or false otherwise.
        -
        - @param aMimeType
        -        The MIME type to check.
        -
        - if adding types to this function, please see the similar function
        - in browser/base/content/browser.js
        -->
      <method name="_mimeTypeIsTextBased">
        <parameter name="aMimeType"/>
        <body><![CDATA[
          return /^text\/|\+xml$/.test(aMimeType) ||
                 aMimeType == "application/x-javascript" ||
                 aMimeType == "application/javascript" ||
                 aMimeType == "application/json" ||
                 aMimeType == "application/xml";
        ]]></body>
      </method>

      <!--
        - Returns whether FAYT can be used for the given event in
        - the current content state.
        -->
      <method name="_shouldFastFind">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (aEvent.ctrlKey || aEvent.altKey || aEvent.metaKey ||
              aEvent.defaultPrevented)
            return false;

          let {BrowserUtils} = Components.utils.import("resource://gre/modules/BrowserUtils.jsm", {});
          let [elt, win] = BrowserUtils.getFocusSync(document);

          if (elt) {
            if (elt instanceof HTMLInputElement && elt.mozIsTextField(false))
              return false;

            if (elt.isContentEditable)
              return false;

            if (elt instanceof HTMLTextAreaElement ||
                elt instanceof HTMLSelectElement ||
                elt instanceof HTMLObjectElement ||
                elt instanceof HTMLEmbedElement)
              return false;
          }

          if (win && !this._mimeTypeIsTextBased(win.document.contentType))
              return false;

          // disable FAYT in about:blank to prevent FAYT opening unexpectedly.
          let url = this.browser.currentURI;
          if (url.spec == "about:blank")
            return false;

          // disable FAYT in documents that ask for it to be disabled.
          if ((url.schemeIs("about") || url.schemeIs("chrome")) &&
              (win.document.documentElement &&
               win.document.documentElement.getAttribute("disablefastfind") == "true"))
            return false;

          if (win) {
            try {
              let editingSession = win.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
                                   .getInterface(Components.interfaces.nsIWebNavigation)
                                   .QueryInterface(Components.interfaces.nsIInterfaceRequestor)
                                   .getInterface(Components.interfaces.nsIEditingSession);
              if (editingSession.windowIsEditable(win))
                return false;
            }
            catch (e) {
              // If someone built with composer disabled, we can't get an editing session.
            }
         }

          return true;
        ]]></body>
      </method>

      <method name="_shouldBeCaseSensitive">
        <parameter name="aString"/>
        <body><![CDATA[
          if (this._typeAheadCaseSensitive == 0)
            return false;
          if (this._typeAheadCaseSensitive == 1)
            return true;

          return aString != aString.toLowerCase();
        ]]></body>
      </method>

      <method name="_onBrowserKeypress">
        <parameter name="aEvent"/>
        <body><![CDATA[
          const TAF_LINKS_KEY = "'";
          const TAF_TEXT_KEY = "/";

          if (!this._shouldFastFind(aEvent))
            return;

          if (this._findMode != this.FIND_NORMAL && this._quickFindTimeout) {
            if (!aEvent.charCode)
              return;

            this._findField.select();
            this._findField.focus();
            this._dispatchKeypressEvent(this._findField.inputField, aEvent);
            aEvent.preventDefault();
            return;
          }

          let key = aEvent.charCode ? String.fromCharCode(aEvent.charCode) : null;
          let manualstartFAYT = (key == TAF_LINKS_KEY || key == TAF_TEXT_KEY);
          let autostartFAYT = !manualstartFAYT && this._useTypeAheadFind &&
                              key && key != " ";
          if (manualstartFAYT || autostartFAYT) {
            let mode = (key == TAF_LINKS_KEY ||
                        (autostartFAYT && this._typeAheadLinksOnly)) ?
              this.FIND_LINKS : this.FIND_TYPEAHEAD;

            // Clear bar first, so that when openFindBar() calls setCaseSensitivity()
            // it doesn't get confused by a lingering value
            this._findField.value = "";

            this.open(mode);
            this._setFindCloseTimeout();
            this._findField.select();
            this._findField.focus();

            if (autostartFAYT)
              this._dispatchKeypressEvent(this._findField.inputField, aEvent);
            else
              this._updateStatusUI(this.nsITypeAheadFind.FIND_FOUND);

            aEvent.preventDefault();
          }
        ]]></body>
      </method>

      <!-- See nsIDOMEventListener -->
      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          switch (aEvent.type) {
            case "mouseup":
              if (!this.hidden && this._findMode != this.FIND_NORMAL)
                this.close();

              break;
            case "keypress":
              this._onBrowserKeypress(aEvent);
              break;
          }
        ]]></body>
      </method>

      <method name="_enableFindButtons">
        <parameter name="aEnable"/>
        <body><![CDATA[
          this.getElement("find-next").disabled =
            this.getElement("find-previous").disabled = !aEnable;
        ]]></body>
      </method>

      <!--
        - Determines whether minimalist or general-purpose search UI is to be
        - displayed when the find bar is activated.
        -->
      <method name="_updateFindUI">
        <body><![CDATA[
          let showMinimalUI = this._findMode != this.FIND_NORMAL;

          let nodes = this.getElement("findbar-container").childNodes;
          let wrapper = this.getElement("findbar-textbox-wrapper");
          for (let node of nodes) {
            if (node == wrapper)
               continue;
            node.hidden = showMinimalUI;
          }
          this.getElement("find-next").hidden =
            this.getElement("find-previous").hidden = showMinimalUI;
          this._updateCaseSensitivity();

          if (showMinimalUI)
            this._findField.classList.add("minimal");
          else
            this._findField.classList.remove("minimal");

          if (this._findMode == this.FIND_TYPEAHEAD)
            this._findField.placeholder = this._fastFindStr;
          else if (this._findMode == this.FIND_LINKS)
            this._findField.placeholder = this._fastFindLinksStr;
          else
            this._findField.placeholder = this._normalFindStr;
        ]]></body>
      </method>

      <method name="_find">
        <parameter name="aValue"/>
        <body><![CDATA[
          if (!this._dispatchFindEvent(""))
            return;

          let val = aValue || this._findField.value;

          // We have to carry around an explicit version of this,
          // because finder.searchString doesn't update on failed
          // searches.
          this.browser._lastSearchString = val;

          // Only search on input if we don't have a last-failed string,
          // or if the current search string doesn't start with it.
          if (!this._findFailedString ||
              !val.startsWith(this._findFailedString))
          {
            this._enableFindButtons(val);
            if (this.getElement("highlight").checked)
              this._setHighlightTimeout();

            this._updateCaseSensitivity(val);

            this.browser.finder.fastFind(val, this._findMode == this.FIND_LINKS,
                                         this._findMode != this.FIND_NORMAL);
          }

          if (this._findMode != this.FIND_NORMAL)
            this._setFindCloseTimeout();

          if (this._findResetTimeout != -1)
            clearTimeout(this._findResetTimeout);

          // allow a search to happen on input again after a second has
          // expired since the previous input, to allow for dynamic
          // content and/or page loading
          this._findResetTimeout = setTimeout(() => {
            this._findFailedString = null;
            this._findResetTimeout = -1;
          }, 1000);
        ]]></body>
      </method>

      <method name="_flash">
        <body><![CDATA[
          if (this._flashFindBarCount === undefined)
            this._flashFindBarCount = this._initialFlashFindBarCount;

          if (this._flashFindBarCount-- == 0) {
            clearInterval(this._flashFindBarTimeout);
            this.removeAttribute("flash");
            this._flashFindBarCount = 6;
            return;
          }

          this.setAttribute("flash",
                            (this._flashFindBarCount % 2 == 0) ?
                            "false" : "true");
        ]]></body>
      </method>

      <method name="_setHighlightTimeout">
        <body><![CDATA[
          if (this._highlightTimeout)
            clearTimeout(this._highlightTimeout);
          this._highlightTimeout =
            setTimeout(function(aSelf) {
                         aSelf.toggleHighlight(false);
                         aSelf.toggleHighlight(true);
                       }, 500, this);
        ]]></body>
      </method>

      <method name="_findAgain">
        <parameter name="aFindPrevious"/>
        <body><![CDATA[
          this.browser.finder.findAgain(aFindPrevious,
                                        this._findMode == this.FIND_LINKS,
                                        this._findMode != this.FIND_NORMAL);
        ]]></body>
      </method>

      <method name="_updateStatusUI">
        <parameter name="res"/>
        <parameter name="aFindPrevious"/>
        <body><![CDATA[
          switch (res) {
            case this.nsITypeAheadFind.FIND_WRAPPED:
              this._findStatusIcon.setAttribute("status", "wrapped");
              this._findStatusDesc.textContent =
                aFindPrevious ? this._wrappedToBottomStr : this._wrappedToTopStr;
              this._findField.removeAttribute("status");
              break;
            case this.nsITypeAheadFind.FIND_NOTFOUND:
              this._findStatusIcon.setAttribute("status", "notfound");
              this._findStatusDesc.textContent = this._notFoundStr;
              this._findField.setAttribute("status", "notfound");
              break;
            case this.nsITypeAheadFind.FIND_PENDING:
              this._findStatusIcon.setAttribute("status", "pending");
              this._findStatusDesc.textContent = "";
              this._findField.removeAttribute("status");
              break;
            case this.nsITypeAheadFind.FIND_FOUND:
            default:
              this._findStatusIcon.removeAttribute("status");
              this._findStatusDesc.textContent = "";
              this._findField.removeAttribute("status");
              break;
          }
          this._updateMatchesCount(res);
        ]]></body>
      </method>

      <method name="updateControlState">
        <parameter name="aResult"/>
        <parameter name="aFindPrevious"/>
        <body><![CDATA[
          this._updateStatusUI(aResult, aFindPrevious);
          this._enableFindButtons(aResult !== this.nsITypeAheadFind.FIND_NOTFOUND);
        ]]></body>
      </method>

      <method name="_getInitialSelection">
        <body><![CDATA[
          let focusedElement = document.commandDispatcher.focusedElement;
          let selText;

          if (focusedElement instanceof Components.interfaces.nsIDOMNSEditableElement &&
              focusedElement.editor &&
              focusedElement.ownerDocument.defaultView.top == this._browser.contentWindow)
          {
            // The user may have a selection in an input or textarea
            selText = focusedElement.editor.selectionController
              .getSelection(Components.interfaces.nsISelectionController.SELECTION_NORMAL)
              .toString();
          }
          else {
            // Look for any selected text on the actual page
            let focusedWindow = document.commandDispatcher.focusedWindow;
            if (focusedWindow.top == this._browser.contentWindow)
              selText = focusedWindow.getSelection().toString();
          }

          if (!selText)
            return "";

          // Process our text to get rid of unwanted characters
          if (selText.length > this._selectionMaxLen) {
            let pattern = new RegExp("^(?:\\s*.){0," + this._selectionMaxLen + "}");
            pattern.test(selText);
            selText = RegExp.lastMatch;
          }
          return selText.replace(/^\s+/, "")
                        .replace(/\s+$/, "")
                        .replace(/\s+/g, " ")
                        .substr(0, this._selectionMaxLen);
        ]]></body>
      </method>

      <method name="_dispatchFindEvent">
        <parameter name="aType"/>
        <parameter name="aFindPrevious"/>
        <body><![CDATA[
          let event = document.createEvent("CustomEvent");
          event.initCustomEvent("find" + aType, true, true, {
            query: this._findField.value,
            caseSensitive: !!this._typeAheadCaseSensitive,
            highlightAll: this.getElement("highlight").checked,
            findPrevious: aFindPrevious
          });
          return this.dispatchEvent(event);
        ]]></body>
      </method>


      <!--
        - Opens the findbar, focuses the findfield and selects its contents.
        - Also flashes the findbar the first time it's used.
        - @param aMode
        -        the find mode to be used, which is either FIND_NORMAL,
        -        FIND_TYPEAHEAD or FIND_LINKS. If not passed, the last
        -        find mode if any or FIND_NORMAL.
        -->
      <method name="startFind">
        <parameter name="aMode"/>
        <body><![CDATA[
          let prefsvc =
            Components.classes["@mozilla.org/preferences-service;1"]
                      .getService(Components.interfaces.nsIPrefBranch);
          let userWantsPrefill = true;
          this.open(aMode);

          if (this._flashFindBar) {
            this._flashFindBarTimeout = setInterval(() => this._flash(), 500);
            prefsvc.setIntPref("accessibility.typeaheadfind.flashBar",
                               --this._flashFindBar);
          }

          if (this.prefillWithSelection)
            userWantsPrefill =
              prefsvc.getBoolPref("accessibility.typeaheadfind.prefillwithselection");

          let initialString = null;
          if (this.prefillWithSelection && userWantsPrefill)
            initialString = this._getInitialSelection();
#ifdef XP_MACOSX
          if (!initialString) {
            let clipboardSearchString = this.browser.finder.clipboardSearchString;
            if (clipboardSearchString)
              initialString = clipboardSearchString;
          }
#endif

          if (initialString)
            this._findField.value = initialString;

          this._enableFindButtons(!!this._findField.value);

          this._findField.select();
          this._findField.focus();
        ]]></body>
      </method>

      <!--
        - Convenient alias to startFind(gFindBar.FIND_NORMAL);
        -
        - You should generally map the window's find command to this method.
        -   e.g. <command name="cmd_find" oncommand="gFindBar.onFindCommand();"/>
        -->
      <method name="onFindCommand">
        <body><![CDATA[
          this.startFind(this.FIND_NORMAL);
        ]]></body>
      </method>

      <!--
        - Stub for find-next and find-previous commands
        - @param aFindPrevious
        -        true for find-previous, false otherwise.
        -->
      <method name="onFindAgainCommand">
        <parameter name="aFindPrevious"/>
        <body><![CDATA[
          let findString = this._browser.finder.searchString || this._findField.value;
          if (!findString) {
            this.startFind();
            return;
          }

          // We dispatch the findAgain event here instead of in _findAgain since
          // if there is a find event handler that prevents the default then
          // finder.searchString will never get updated which in turn means
          // there would never be findAgain events because of the logic below.
          if (!this._dispatchFindEvent("again", aFindPrevious))
            return;

          // user explicitly requested another search, so do it even if we think it'll fail
          this._findFailedString = null;

          // Ensure the stored SearchString is in sync with what we want to find
          if (this._findField.value != this._browser.finder.searchString)
            this._find(this._findField.value);
          else
            this._findAgain(aFindPrevious);

        ]]></body>
      </method>

#ifdef XP_MACOSX
      <!--
        - Fetches the currently selected text and sets that as the text to search
        - next. This is a MacOS specific feature.
      -->
      <method name="onFindSelectionCommand">
        <body><![CDATA[
          let searchString = this.browser.finder.setSearchStringToSelection();
          if (searchString)
            this._findField.value = searchString;
        ]]></body>
      </method>

      <method name="_onFindFieldFocus">
        <body><![CDATA[
          let prefsvc =
            Components.classes["@mozilla.org/preferences-service;1"]
                      .getService(Components.interfaces.nsIPrefBranch);
          const kPref = "accessibility.typeaheadfind.prefillwithselection";
          if (this.prefillWithSelection && prefsvc.getBoolPref(kPref))
            return;

          let clipboardSearchString = this._browser.finder.clipboardSearchString;
          if (clipboardSearchString && this._findField.value != clipboardSearchString) {
            this._findField.value = clipboardSearchString;
            // Changing the search string makes the previous status invalid, so
            // we better clear it here.
            this._updateStatusUI();
          }
        ]]></body>
      </method>
#endif

      <!--
        - This handles all the result changes for both
        - type-ahead-find and highlighting.
        - @param aResult
        -   One of the nsITypeAheadFind.FIND_* constants
        -   indicating the result of a search operation.
        - @param aFindBackwards
        -   If the search was done from the bottom to
        -   the top. This is used for right error messages
        -   when reaching "the end of the page".
        - @param aLinkURL
        -   When a link matched then its URK. Always null
        -   when not in FIND_LINKS mode.
        -->
      <method name="onFindResult">
        <parameter name="aData"/>
        <body><![CDATA[
          this._updateStatusUI(aData.result, aData.findBackwards);
          this._updateStatusUIBar(aData.linkURL);

          if (aData.result == this.nsITypeAheadFind.FIND_NOTFOUND)
            this._findFailedString = aData.searchString;
          else
            this._findFailedString = null;

          if (this._findMode != this.FIND_NORMAL)
            this._setFindCloseTimeout();
        ]]></body>
      </method>

      <!--
        - This handles all the result changes for matches counts.
        - @param aResult
        -   Result Object, containing the total amount of matches and a vector
        -   of the current result.
        -->
      <method name="onMatchesCountResult">
        <parameter name="aResult"/>
        <body><![CDATA[
          if (aResult.total !== 0) {
            if (aResult.total == -1) {
              this._foundMatches.value = this.pluralForm.get(
                this._matchesCountLimit,
                this.strBundle.GetStringFromName("FoundMatchesCountLimit")
              ).replace("#1", this._matchesCountLimit);
            } else {
              this._foundMatches.value = this.pluralForm.get(
                aResult.total,
                this.strBundle.GetStringFromName("FoundMatches")
              ).replace("#1", aResult.current)
               .replace("#2", aResult.total);
            }
            this._foundMatches.hidden = false;
          } else {
            this._foundMatches.hidden = true;
            this._foundMatches.value = "";
          }
        ]]></body>
      </method>

      <!--
        - This handler may cancel a request to focus content by returning |false|
        - explicitly.
        -->
      <method name="shouldFocusContent">
        <body><![CDATA[
          const fm = Components.classes["@mozilla.org/focus-manager;1"]
                               .getService(Components.interfaces.nsIFocusManager);
          if (fm.focusedWindow != window)
            return false;

          let focusedElement = fm.focusedElement;
          if (!focusedElement)
            return false;

          let bindingParent = document.getBindingParent(focusedElement);
          if (bindingParent != this && bindingParent != this._findField)
            return false;

          return true;
        ]]></body>
      </method>

    </implementation>

    <handlers>
      <!--
        - We have to guard against `this.close` being |null| due to an unknown
        - issue, which is tracked in bug 957999.
        -->
      <handler event="keypress" keycode="VK_ESCAPE" phase="capturing"
               action="if (this.close) this.close();" preventdefault="true"/>
    </handlers>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <view class="org.mozilla.gecko.CustomEditText"
              android:id="@+id/find_text"
              android:layout_width="0dip"
              android:layout_height="wrap_content"
              android:layout_weight="1.0"
              android:layout_marginLeft="@dimen/find_in_page_text_margin_left"
              android:layout_marginRight="@dimen/find_in_page_text_margin_right"
              android:contentDescription="@string/find_text"
              android:background="@drawable/url_bar_entry"
              android:singleLine="true"
              android:textColor="#000000"
              android:textCursorDrawable="@null"
              android:inputType="text"
              android:paddingLeft="@dimen/find_in_page_text_padding_left"
              android:paddingRight="@dimen/find_in_page_text_padding_right"
              android:textColorHighlight="@color/url_bar_text_highlight"
              android:imeOptions="actionSearch"
              android:selectAllOnFocus="true"
              android:gravity="center_vertical|left"/>

    <TextView android:id="@+id/find_status"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginRight="@dimen/find_in_page_status_margin_right"
              android:textColor="@color/find_status_default"
              android:visibility="gone"/>

    <CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
                     android:id="@+id/find_matchcase"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:padding="@dimen/find_in_page_matchcase_padding"
                     android:checked="false"
                     android:text="@string/find_matchcase"
                     android:textColor="@drawable/find_matchcase_selector"/>

    <ImageButton android:id="@+id/find_prev"
                 style="@style/FindBar.ImageButton"
                 android:contentDescription="@string/find_prev"
                 android:layout_marginTop="@dimen/find_in_page_control_margin_top"
                 android:src="@drawable/find_prev"/>

    <ImageButton android:id="@+id/find_next"
                 style="@style/FindBar.ImageButton"
                 android:contentDescription="@string/find_next"
                 android:layout_marginTop="@dimen/find_in_page_control_margin_top"
                 android:src="@drawable/find_next"/>

    <ImageButton android:id="@+id/find_close"
                 style="@style/FindBar.ImageButton"
                 android:contentDescription="@string/find_close"
                 android:layout_marginTop="@dimen/find_in_page_control_margin_top"
                 android:src="@drawable/find_close"/>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_checked="true"
          android:color="@color/find_matchcase_on"/>

    <item android:state_checked="false"
          android:color="@color/find_matchcase_off"/>

</selector>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:38 $"/>
        <language type="fi"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Holo blue for focus -->
    <item android:state_focused="true" android:color="@color/text_color_hint_floating_focused" />

    <!-- Default gray for all other states -->
    <item android:color="@color/text_color_hint"/>
</selector>
<?xml version="1.0"?>

<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="flyoutpanelBinding" extends="xul:box">
    <resources>
      <stylesheet src="chrome://browser/skin/flyoutpanel.css"/>
    </resources>

    <content>
      <xul:vbox class="flyoutpanel-wrapper">
        <xul:hbox class="flyoutpanel-header" align="top">
          <xul:toolbarbutton class="flyout-close-button"
                             command="cmd_flyout_back"
                             xbl:inherits="command"/>
          <xul:label class="flyout-header-label" xbl:inherits="value=headertext"/>
        </xul:hbox>
        <xul:scrollbox class="flyoutpanel-contents" observes="bcast_preciseInput" flex="1" orient="vertical">
          <children/>
        </xul:scrollbox>
      </xul:vbox>
    </content>

    <implementation>
      <constructor>
        <![CDATA[
            this.setAttribute("isSlidOut", true);
        ]]>
      </constructor>
      <method name="_onAfterSlideOut">
        <body>
          <![CDATA[
            this.removeAttribute("isSlidingOut");
            this.setAttribute("isSlidOut", true);
            this.removeAttribute("visible");
            this.removeEventListener("transitionend", this._onAfterSlideOut);
          ]]>
        </body>
      </method>

      <method name="_onAfterSlideIn">
        <body>
          <![CDATA[
            this.removeAttribute("isSlidingIn");
            this.setAttribute("isSlidIn", true);
            this.removeEventListener("transitionend", this._onAfterSlideIn);
          ]]>
        </body>
      </method>

      <method name="hide">
        <body>
          <![CDATA[
            if (this.hasAttribute("isSlidingOut")
             || this.hasAttribute("isSlidOut")) {
              return;
            }

            if (this.hasAttribute("isSlidingIn")) {
              this._onAfterSlideIn();
            }

            this.addEventListener("transitionend", this._onAfterSlideOut);
            this.classList.remove("flyoutpanel-slide-in");
            this.setAttribute("isSlidingOut", true);
            this.removeAttribute("isSlidIn");

            let event = document.createEvent("Events");
            event.initEvent("MozFlyoutPanelHiding", true, false);
            this.dispatchEvent(event);
          ]]>
        </body>
      </method>

      <method name="show">
        <body>
          <![CDATA[
            if (this.hasAttribute("isSlidingIn")
             || this.hasAttribute("isSlidIn")) {
              return;
            }

            if (this.hasAttribute("isSlidingOut")) {
              this._onAfterSlideOut();
            }

            let event = document.createEvent("Events");
            event.initEvent("MozFlyoutPanelShowing", true, false);
            this.dispatchEvent(event);
            this.classList.add("flyoutpanel-slide-in");

            this.setAttribute("isSlidingIn", true);
            this.setAttribute("visible", true);
            this.removeAttribute("isSlidOut");
          ]]>
        </body>
      </method>

      <field name="anonScrollBox" readonly="true"><![CDATA[
        // Expose the anyonymous scrollbox so ScrollUtils.getScrollboxFromElement can find it.
        document.getAnonymousElementByAttribute(this, "class", "flyoutpanel-contents");
      ]]></field>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this file,
   - You can obtain one at http://mozilla.org/MPL/2.0/.  -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"> 

    <ScrollView android:id="@+id/scrolling_container"
                android:layout_width="match_parent"
                android:layout_height="350dp"
                android:layout_margin="8dp"
                android:padding="8dp"
                android:scrollbars="vertical"
                android:scrollbarStyle="outsideOverlay"
                android:fadeScrollbars="true"
                android:requiresFadingEdge="vertical">

            <TextView android:id="@+id/preview"
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:text="@string/pref_font_size_preview_text"
                      android:textColor="#ff000000"/>

    </ScrollView>

    <LinearLayout android:id="@+id/button_container"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:layout_marginLeft="4dp"
                  android:layout_marginRight="4dp"
                  android:orientation="horizontal">

        <Button android:id="@+id/decrease_preview_font_button"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:text="@string/pref_font_size_adjust_char"
                android:textSize="8sp"/>

        <Button android:id="@+id/increase_preview_font_button"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:text="@string/pref_font_size_adjust_char"
                android:textSize="16sp"/>

    </LinearLayout>

</LinearLayout>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - BaseFont</title>
</head>
<body onload="parent.loadComplete()">
<font color="#000000" face="arial,helvitica" size="4">Test Tables</font>
</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - FORM</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" target="dynamic" accept-charset="US-ASCII" action="./files/getData.pl" enctype="application/x-www-form-urlencoded" method="post">
<p>
<textarea id="text1" cols="20" rows="7"></textarea>
<input type="submit" name="submit1" value="Submit" />
<input type="reset" name="submit2" value="Reset" />
</p>
</form>
</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>FORM3</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" action="about:blank">
<p>
<textarea id="text1" cols="20" rows="7"></textarea>
<input type="submit" name="submit1" value="Submit" />
<input type="reset" name="submit2" value="Reset" />
</p>
</form>
</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - FORM</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" accept-charset="US-ASCII" action="./files/getData.pl" enctype="application/x-www-form-urlencoded" method="post">
<p>
<textarea id="text1" cols="20" rows="7"></textarea>
<input type="submit" name="submit1" value="Submit" />
<input type="reset" name="submit2" value="Reset" />
</p>
</form>
</body>
</html>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:41 $"/>
        <language type="fo"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"
   "xhtml1-frameset.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - FRAME2</title>
<script type="text/javascript">function loadComplete() { }</script>
</head>
<frameset cols="20, 80"  onload="parent.loadComplete()">
<frameset rows="100, 200">
<frame id="Frame1" name="Frame1" src="frame.html"/>
</frameset>
<frame id="Frame2" name="Frame2" src="iframe.html"/>
</frameset>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"
   "xhtml1-frameset.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - FRAMESET</title>
</head>
<frameset cols="20, 80"  onload="parent.loadComplete()">
<frameset rows="100, 200">
<frame src="right.png" />
</frameset>
<frame src="w3c_main.png" />
</frameset>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"
   "xhtml1-frameset.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - FRAME</title>
</head>
<frameset cols="20, 80"  onload="parent.loadComplete()">
<frameset rows="100, 200">
<frame longdesc="about:blank" marginheight="10" marginwidth="5" noresize="noresize" name="Frame1" frameborder="1" scrolling="yes" src="right.png" />
</frameset>
<frame src="w3c_main.png" />
</frameset>
</html>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:44 $"/>
        <language type="fr"/>
        <territory type="BE"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
        <version number="$Revision: 28846 $"/>
        <generation date="$Date: 2010/10/17 22:15:00 $"/>
		<language type="fr"/> 
		<territory type="CA"/> 
	</identity>
	
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:45 $"/>
        <language type="fr"/>
        <territory type="CH"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
	<identity>
		<version number="$Revision: 1.4 $"/>
		<generation date="$Date: 2008/12/08 18:18:44 $"/>
		<language type="fr"/>
	</identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<?codewarrior exportversion="1.0.1" ideversion="5.0" ?>

<!DOCTYPE PROJECT [
<!ELEMENT PROJECT (TARGETLIST, TARGETORDER, GROUPLIST, DESIGNLIST?)>
<!ELEMENT TARGETLIST (TARGET+)>
<!ELEMENT TARGET (NAME, SETTINGLIST, FILELIST?, LINKORDER?, SEGMENTLIST?, OVERLAYGROUPLIST?, SUBTARGETLIST?, SUBPROJECTLIST?, FRAMEWORKLIST?, PACKAGEACTIONSLIST?)>
<!ELEMENT NAME (#PCDATA)>
<!ELEMENT USERSOURCETREETYPE (#PCDATA)>
<!ELEMENT PATH (#PCDATA)>
<!ELEMENT FILELIST (FILE*)>
<!ELEMENT FILE (PATHTYPE, PATHROOT?, ACCESSPATH?, PATH, PATHFORMAT?, ROOTFILEREF?, FILEKIND?, FILEFLAGS?)>
<!ELEMENT PATHTYPE (#PCDATA)>
<!ELEMENT PATHROOT (#PCDATA)>
<!ELEMENT ACCESSPATH (#PCDATA)>
<!ELEMENT PATHFORMAT (#PCDATA)>
<!ELEMENT ROOTFILEREF (PATHTYPE, PATHROOT?, ACCESSPATH?, PATH, PATHFORMAT?)>
<!ELEMENT FILEKIND (#PCDATA)>
<!ELEMENT FILEFLAGS (#PCDATA)>
<!ELEMENT FILEREF (TARGETNAME?, PATHTYPE, PATHROOT?, ACCESSPATH?, PATH, PATHFORMAT?)>
<!ELEMENT TARGETNAME (#PCDATA)>
<!ELEMENT SETTINGLIST ((SETTING|PANELDATA)+)>
<!ELEMENT SETTING (NAME?, (VALUE|(SETTING+)))>
<!ELEMENT PANELDATA (NAME, VALUE)>
<!ELEMENT VALUE (#PCDATA)>
<!ELEMENT LINKORDER (FILEREF*)>
<!ELEMENT SEGMENTLIST (SEGMENT+)>
<!ELEMENT SEGMENT (NAME, ATTRIBUTES?, FILEREF*)>
<!ELEMENT ATTRIBUTES (#PCDATA)>
<!ELEMENT OVERLAYGROUPLIST (OVERLAYGROUP+)>
<!ELEMENT OVERLAYGROUP (NAME, BASEADDRESS, OVERLAY*)>
<!ELEMENT BASEADDRESS (#PCDATA)>
<!ELEMENT OVERLAY (NAME, FILEREF*)>
<!ELEMENT SUBTARGETLIST (SUBTARGET+)>
<!ELEMENT SUBTARGET (TARGETNAME, ATTRIBUTES?, FILEREF?)>
<!ELEMENT SUBPROJECTLIST (SUBPROJECT+)>
<!ELEMENT SUBPROJECT (FILEREF, SUBPROJECTTARGETLIST)>
<!ELEMENT SUBPROJECTTARGETLIST (SUBPROJECTTARGET*)>
<!ELEMENT SUBPROJECTTARGET (TARGETNAME, ATTRIBUTES?, FILEREF?)>
<!ELEMENT FRAMEWORKLIST (FRAMEWORK+)>
<!ELEMENT FRAMEWORK (FILEREF, LIBRARYFILE?, VERSION?)>
<!ELEMENT PACKAGEACTIONSLIST (PACKAGEACTION+)>
<!ELEMENT PACKAGEACTION (#PCDATA)>
<!ELEMENT LIBRARYFILE (FILEREF)>
<!ELEMENT VERSION (#PCDATA)>
<!ELEMENT TARGETORDER (ORDEREDTARGET|ORDEREDDESIGN)*>
<!ELEMENT ORDEREDTARGET (NAME)>
<!ELEMENT ORDEREDDESIGN (NAME, ORDEREDTARGET+)>
<!ELEMENT GROUPLIST (GROUP|FILEREF)*>
<!ELEMENT GROUP (NAME, (GROUP|FILEREF)*)>
<!ELEMENT DESIGNLIST (DESIGN+)>
<!ELEMENT DESIGN (NAME, DESIGNDATA)>
<!ELEMENT DESIGNDATA (#PCDATA)>
]>

<PROJECT>
    <TARGETLIST>
        <TARGET>
            <NAME>FreeTypeLib</NAME>
            <SETTINGLIST>

                <!-- Settings for "Source Trees" panel -->
                <SETTING><NAME>UserSourceTrees</NAME><VALUE></VALUE></SETTING>

                <!-- Settings for "Access Paths" panel -->
                <SETTING><NAME>AlwaysSearchUserPaths</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>InterpretDOSAndUnixPaths</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>RequireFrameworkStyleIncludes</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>SourceRelativeIncludes</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>UserSearchPaths</NAME>
                    <SETTING>
                        <SETTING><NAME>SearchPath</NAME>
                            <SETTING><NAME>Path</NAME><VALUE>:</VALUE></SETTING>
                            <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                            <SETTING><NAME>PathRoot</NAME><VALUE>Project</VALUE></SETTING>
                        </SETTING>
                        <SETTING><NAME>Recursive</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>FrameworkPath</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>HostFlags</NAME><VALUE>All</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>SearchPath</NAME>
                            <SETTING><NAME>Path</NAME><VALUE>:::include:</VALUE></SETTING>
                            <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                            <SETTING><NAME>PathRoot</NAME><VALUE>Project</VALUE></SETTING>
                        </SETTING>
                        <SETTING><NAME>Recursive</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>FrameworkPath</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>HostFlags</NAME><VALUE>All</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>SearchPath</NAME>
                            <SETTING><NAME>Path</NAME><VALUE>:::src:</VALUE></SETTING>
                            <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                            <SETTING><NAME>PathRoot</NAME><VALUE>Project</VALUE></SETTING>
                        </SETTING>
                        <SETTING><NAME>Recursive</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>FrameworkPath</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>HostFlags</NAME><VALUE>All</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>SearchPath</NAME>
                            <SETTING><NAME>Path</NAME><VALUE>::</VALUE></SETTING>
                            <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                            <SETTING><NAME>PathRoot</NAME><VALUE>Project</VALUE></SETTING>
                        </SETTING>
                        <SETTING><NAME>Recursive</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>FrameworkPath</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>HostFlags</NAME><VALUE>All</VALUE></SETTING>
                    </SETTING>
                </SETTING>
                <SETTING><NAME>SystemSearchPaths</NAME>
                    <SETTING>
                        <SETTING><NAME>SearchPath</NAME>
                            <SETTING><NAME>Path</NAME><VALUE>:</VALUE></SETTING>
                            <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                            <SETTING><NAME>PathRoot</NAME><VALUE>CodeWarrior</VALUE></SETTING>
                        </SETTING>
                        <SETTING><NAME>Recursive</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>FrameworkPath</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>HostFlags</NAME><VALUE>All</VALUE></SETTING>
                    </SETTING>
                </SETTING>

                <!-- Settings for "Debugger Runtime" panel -->
                <SETTING><NAME>MWRuntimeSettings_WorkingDirectory</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWRuntimeSettings_CommandLine</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWRuntimeSettings_HostApplication</NAME>
                    <SETTING><NAME>Path</NAME><VALUE></VALUE></SETTING>
                    <SETTING><NAME>PathFormat</NAME><VALUE>Generic</VALUE></SETTING>
                    <SETTING><NAME>PathRoot</NAME><VALUE>Absolute</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>MWRuntimeSettings_EnvVars</NAME><VALUE></VALUE></SETTING>

                <!-- Settings for "Target Settings" panel -->
                <SETTING><NAME>Linker</NAME><VALUE>MacOS PPC Linker</VALUE></SETTING>
                <SETTING><NAME>PreLinker</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>PostLinker</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>Targetname</NAME><VALUE>FreeTypeLib</VALUE></SETTING>
                <SETTING><NAME>OutputDirectory</NAME>
                    <SETTING><NAME>Path</NAME><VALUE>:::objs:</VALUE></SETTING>
                    <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                    <SETTING><NAME>PathRoot</NAME><VALUE>Project</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>SaveEntriesUsingRelativePaths</NAME><VALUE>false</VALUE></SETTING>

                <!-- Settings for "File Mappings" panel -->
                <SETTING><NAME>FileMappings</NAME>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>APPL</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>Appl</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>MMLB</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>Lib Import PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>MPLF</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>Lib Import PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>MWCD</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>RSRC</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.bh</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>Balloon Help</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.c</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW C/C++ PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE>C/C++</VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.c++</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW C/C++ PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE>C/C++</VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.cc</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW C/C++ PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE>C/C++</VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.cp</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW C/C++ PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE>C/C++</VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.cpp</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW C/C++ PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE>C/C++</VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.exp</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.h</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW C/C++ PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE>C/C++</VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>true</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.p</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW Pascal PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.pas</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW Pascal PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.pch</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW C/C++ PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE>C/C++</VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.pch++</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW C/C++ PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE>C/C++</VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.ppu</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>MW Pascal PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.r</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>Rez</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE>Rez</VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>TEXT</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.s</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>PPCAsm</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>XCOF</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>XCOFF Import PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>docu</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>rsrc</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>shlb</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>PEF Import PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileType</NAME><VALUE>stub</VALUE></SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>PEF Import PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.doc</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>true</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.o</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE>XCOFF Import PPC</VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.ppob</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                    <SETTING>
                        <SETTING><NAME>FileExtension</NAME><VALUE>.rsrc</VALUE></SETTING>
                        <SETTING><NAME>Compiler</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>EditLanguage</NAME><VALUE></VALUE></SETTING>
                        <SETTING><NAME>Precompile</NAME><VALUE>false</VALUE></SETTING>
                        <SETTING><NAME>Launchable</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>ResourceFile</NAME><VALUE>true</VALUE></SETTING>
                        <SETTING><NAME>IgnoredByMake</NAME><VALUE>false</VALUE></SETTING>
                    </SETTING>
                </SETTING>

                <!-- Settings for "Build Extras" panel -->
                <SETTING><NAME>CacheModDates</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>DumpBrowserInfo</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>CacheSubprojects</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>UseThirdPartyDebugger</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>BrowserGenerator</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>DebuggerAppPath</NAME>
                    <SETTING><NAME>Path</NAME><VALUE></VALUE></SETTING>
                    <SETTING><NAME>PathFormat</NAME><VALUE>Generic</VALUE></SETTING>
                    <SETTING><NAME>PathRoot</NAME><VALUE>Absolute</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>DebuggerCmdLineArgs</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>DebuggerWorkingDir</NAME>
                    <SETTING><NAME>Path</NAME><VALUE></VALUE></SETTING>
                    <SETTING><NAME>PathFormat</NAME><VALUE>Generic</VALUE></SETTING>
                    <SETTING><NAME>PathRoot</NAME><VALUE>Absolute</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>CodeCompletionPrefixFileName</NAME><VALUE>MacHeaders.c</VALUE></SETTING>
                <SETTING><NAME>CodeCompletionMacroFileName</NAME><VALUE>MacOS_Carbon_C++_Macros.h</VALUE></SETTING>

                <!-- Settings for "Debugger Target" panel -->
                <SETTING><NAME>ConsoleEncoding</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>LogSystemMessages</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>AutoTargetDLLs</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>StopAtWatchpoints</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>PauseWhileRunning</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>PauseInterval</NAME><VALUE>5</VALUE></SETTING>
                <SETTING><NAME>PauseUIFlags</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>AltExePath</NAME>
                    <SETTING><NAME>Path</NAME><VALUE></VALUE></SETTING>
                    <SETTING><NAME>PathFormat</NAME><VALUE>Generic</VALUE></SETTING>
                    <SETTING><NAME>PathRoot</NAME><VALUE>Absolute</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>StopAtTempBPOnLaunch</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>CacheSymbolics</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>TempBPFunctionName</NAME><VALUE>main</VALUE></SETTING>
                <SETTING><NAME>TempBPType</NAME><VALUE>0</VALUE></SETTING>

                <!-- Settings for "Remote Debug" panel -->
                <SETTING><NAME>Enabled</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>ConnectionName</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>DownloadPath</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>LaunchRemoteApp</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>RemoteAppPath</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>CoreID</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>JTAGClockSpeed</NAME><VALUE>8000</VALUE></SETTING>
                <SETTING><NAME>IsMultiCore</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>OSDownload</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>UseGlobalOSDownload</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>OSDownloadConnectionName</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>OSDownloadPath</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>AltDownload</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>AltDownloadConnectionName</NAME><VALUE></VALUE></SETTING>

                <!-- Settings for "Auto-target" panel -->
                <SETTING><NAME>OtherExecutables</NAME><VALUE></VALUE></SETTING>

                <!-- Settings for "Analyzer Connections" panel -->
                <SETTING><NAME>AnalyzerConnectionName</NAME><VALUE></VALUE></SETTING>

                <!-- Settings for "Custom Keywords" panel -->
                <SETTING><NAME>CustomColor1</NAME>
                    <SETTING><NAME>Red</NAME><VALUE>0</VALUE></SETTING>
                    <SETTING><NAME>Green</NAME><VALUE>32767</VALUE></SETTING>
                    <SETTING><NAME>Blue</NAME><VALUE>0</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>CustomColor2</NAME>
                    <SETTING><NAME>Red</NAME><VALUE>0</VALUE></SETTING>
                    <SETTING><NAME>Green</NAME><VALUE>32767</VALUE></SETTING>
                    <SETTING><NAME>Blue</NAME><VALUE>0</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>CustomColor3</NAME>
                    <SETTING><NAME>Red</NAME><VALUE>0</VALUE></SETTING>
                    <SETTING><NAME>Green</NAME><VALUE>32767</VALUE></SETTING>
                    <SETTING><NAME>Blue</NAME><VALUE>0</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>CustomColor4</NAME>
                    <SETTING><NAME>Red</NAME><VALUE>0</VALUE></SETTING>
                    <SETTING><NAME>Green</NAME><VALUE>32767</VALUE></SETTING>
                    <SETTING><NAME>Blue</NAME><VALUE>0</VALUE></SETTING>
                </SETTING>

                <!-- Settings for "C/C++ Compiler" panel -->
                <SETTING><NAME>MWFrontEnd_C_cplusplus</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_checkprotos</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_arm</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_trigraphs</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_onlystdkeywords</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_enumsalwaysint</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_ansistrict</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_wchar_type</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_enableexceptions</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_dontreusestrings</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_poolstrings</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_dontinline</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_useRTTI</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_unsignedchars</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_autoinline</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_booltruefalse</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_inlinelevel</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_ecplusplus</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_defer_codegen</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_templateparser</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_c99</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_bottomupinline</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_gcc_extensions</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWFrontEnd_C_instance_manager</NAME><VALUE>0</VALUE></SETTING>

                <!-- Settings for "C/C++ Preprocessor" panel -->
                <SETTING><NAME>C_CPP_Preprocessor_EmitFile</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>C_CPP_Preprocessor_EmitLine</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>C_CPP_Preprocessor_EmitFullPath</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>C_CPP_Preprocessor_KeepComments</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>C_CPP_Preprocessor_PCHUsesPrefixText</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>C_CPP_Preprocessor_EmitPragmas</NAME><VALUE>true</VALUE></SETTING>
                <SETTING><NAME>C_CPP_Preprocessor_KeepWhiteSpace</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>C_CPP_Preprocessor_MultiByteEncoding</NAME><VALUE>encASCII_Unicode</VALUE></SETTING>
                <SETTING><NAME>C_CPP_Preprocessor_PrefixText</NAME><VALUE>/* settings imported from old "C/C++ Language" panel */

#if !__option(precompile)
#include "ftoption.h" /* was "Prefix file" */
#endif
</VALUE></SETTING>

                <!-- Settings for "C/C++ Warnings" panel -->
                <SETTING><NAME>MWWarning_C_warn_illpragma</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_emptydecl</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_possunwant</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_unusedvar</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_unusedarg</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_extracomma</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_pedantic</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warningerrors</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_hidevirtual</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_implicitconv</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_notinlined</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_structclass</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_missingreturn</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_no_side_effect</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_resultnotused</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_padding</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_impl_i2f_conv</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_impl_f2i_conv</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_impl_s2u_conv</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_illtokenpasting</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_filenamecaps</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_filenamecapssystem</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_undefmacro</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWWarning_C_warn_ptrintconv</NAME><VALUE>0</VALUE></SETTING>

                <!-- Settings for "MacOS Merge Panel" panel -->
                <SETTING><NAME>MWMerge_MacOS_projectType</NAME><VALUE>Application</VALUE></SETTING>
                <SETTING><NAME>MWMerge_MacOS_outputName</NAME><VALUE>Merge Out</VALUE></SETTING>
                <SETTING><NAME>MWMerge_MacOS_outputCreator</NAME><VALUE>????</VALUE></SETTING>
                <SETTING><NAME>MWMerge_MacOS_outputType</NAME><VALUE>APPL</VALUE></SETTING>
                <SETTING><NAME>MWMerge_MacOS_suppressWarning</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWMerge_MacOS_copyFragments</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWMerge_MacOS_copyResources</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWMerge_MacOS_flattenResource</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWMerge_MacOS_flatFileName</NAME><VALUE>a.rsrc</VALUE></SETTING>
                <SETTING><NAME>MWMerge_MacOS_flatFileOutputPath</NAME>
                    <SETTING><NAME>Path</NAME><VALUE>:</VALUE></SETTING>
                    <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                    <SETTING><NAME>PathRoot</NAME><VALUE>Project</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>MWMerge_MacOS_skipResources</NAME>
                    <SETTING><VALUE>DLGX</VALUE></SETTING>
                    <SETTING><VALUE>ckid</VALUE></SETTING>
                    <SETTING><VALUE>Proj</VALUE></SETTING>
                    <SETTING><VALUE>WSPC</VALUE></SETTING>
                </SETTING>

                <!-- Settings for "Output Flags" panel -->
                <SETTING><NAME>FileLocked</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>ResourcesMapIsReadOnly</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>PrinterDriverIsMultiFinderCompatible</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>Invisible</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>HasBundle</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>NameLocked</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>Stationery</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>HasCustomIcon</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>Shared</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>HasBeenInited</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>Label</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>Comments</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>HasCustomBadge</NAME><VALUE>false</VALUE></SETTING>
                <SETTING><NAME>HasRoutingInfo</NAME><VALUE>false</VALUE></SETTING>

                <!-- Settings for "PPC CodeGen" panel -->
                <SETTING><NAME>MWCodeGen_PPC_structalignment</NAME><VALUE>PPC_mw</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_tracebacktables</NAME><VALUE>None</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_processor</NAME><VALUE>Generic</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_function_align</NAME><VALUE>4</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_tocdata</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_largetoc</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_profiler</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_vectortocdata</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_poolconst</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_peephole</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_readonlystrings</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_linkerpoolsstrings</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_volatileasm</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_schedule</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_altivec</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_altivec_move_block</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_strictIEEEfp</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_fpcontract</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_genfsel</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_PPC_orderedfpcmp</NAME><VALUE>0</VALUE></SETTING>

                <!-- Settings for "PPC CodeGen Mach-O" panel -->
                <SETTING><NAME>MWCodeGen_MachO_structalignment</NAME><VALUE>PPC_mw</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_profiler_enum</NAME><VALUE>Off</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_processor</NAME><VALUE>Generic</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_function_align</NAME><VALUE>4</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_common</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_boolisint</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_peephole</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_readonlystrings</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_linkerpoolsstrings</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_volatileasm</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_schedule</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_altivec</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_vecmove</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_fp_ieee_strict</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_fpcontract</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_genfsel</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWCodeGen_MachO_fp_cmps_ordered</NAME><VALUE>0</VALUE></SETTING>

                <!-- Settings for "PPC Disassembler" panel -->
                <SETTING><NAME>MWDisassembler_PPC_showcode</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWDisassembler_PPC_extended</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWDisassembler_PPC_mix</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWDisassembler_PPC_nohex</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWDisassembler_PPC_showdata</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWDisassembler_PPC_showexceptions</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWDisassembler_PPC_showsym</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWDisassembler_PPC_shownames</NAME><VALUE>1</VALUE></SETTING>

                <!-- Settings for "PPC Global Optimizer" panel -->
                <SETTING><NAME>GlobalOptimizer_PPC_optimizationlevel</NAME><VALUE>Level0</VALUE></SETTING>
                <SETTING><NAME>GlobalOptimizer_PPC_optfor</NAME><VALUE>Speed</VALUE></SETTING>

                <!-- Settings for "PPC Linker" panel -->
                <SETTING><NAME>MWLinker_PPC_linksym</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_symfullpath</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_linkmap</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_nolinkwarnings</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_dontdeadstripinitcode</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_permitmultdefs</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_linkmode</NAME><VALUE>Fast</VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_code_folding</NAME><VALUE>None</VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_initname</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_mainname</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWLinker_PPC_termname</NAME><VALUE></VALUE></SETTING>

                <!-- Settings for "PPC Mac OS X Linker" panel -->
                <SETTING><NAME>MWLinker_MacOSX_linksym</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_symfullpath</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_nolinkwarnings</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_linkmap</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_dontdeadstripinitcode</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_permitmultdefs</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_use_objectivec_semantics</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_strip_debug_symbols</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_split_segs</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_report_msl_overloads</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_objects_follow_linkorder</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_linkmode</NAME><VALUE>Normal</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_exports</NAME><VALUE>ReferencedGlobals</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_sortcode</NAME><VALUE>None</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_mainname</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_initname</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_code_folding</NAME><VALUE>None</VALUE></SETTING>
                <SETTING><NAME>MWLinker_MacOSX_stabsgen</NAME><VALUE>None</VALUE></SETTING>

                <!-- Settings for "PPC Mac OS X Project" panel -->
                <SETTING><NAME>MWProject_MacOSX_type</NAME><VALUE>Executable</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_outfile</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_filecreator</NAME><VALUE>????</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_filetype</NAME><VALUE>MEXE</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_vmaddress</NAME><VALUE>4096</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_usedefaultvmaddr</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_flatrsrc</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_flatrsrcfilename</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_flatrsrcoutputdir</NAME>
                    <SETTING><NAME>Path</NAME><VALUE>:</VALUE></SETTING>
                    <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                    <SETTING><NAME>PathRoot</NAME><VALUE>Project</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>MWProject_MacOSX_installpath</NAME><VALUE>./</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_dont_prebind</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_flat_namespace</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_frameworkversion</NAME><VALUE>A</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_currentversion</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_flat_oldimpversion</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_MacOSX_AddrMode</NAME><VALUE>1</VALUE></SETTING>

                <!-- Settings for "PPC PEF" panel -->
                <SETTING><NAME>MWPEF_exports</NAME><VALUE>None</VALUE></SETTING>
                <SETTING><NAME>MWPEF_libfolder</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWPEF_sortcode</NAME><VALUE>None</VALUE></SETTING>
                <SETTING><NAME>MWPEF_expandbss</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWPEF_sharedata</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWPEF_olddefversion</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWPEF_oldimpversion</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWPEF_currentversion</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWPEF_fragmentname</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWPEF_collapsereloads</NAME><VALUE>0</VALUE></SETTING>

                <!-- Settings for "PPC Project" panel -->
                <SETTING><NAME>MWProject_PPC_type</NAME><VALUE>Library</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_outfile</NAME><VALUE>FreeTypeLib</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_filecreator</NAME><VALUE>????</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_filetype</NAME><VALUE>????</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_size</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_minsize</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_stacksize</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_flags</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_symfilename</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_rsrcname</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_rsrcheader</NAME><VALUE>Native</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_rsrctype</NAME><VALUE>????</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_rsrcid</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_rsrcflags</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_rsrcstore</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_rsrcmerge</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_flatrsrc</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWProject_PPC_flatrsrcoutputdir</NAME>
                    <SETTING><NAME>Path</NAME><VALUE>:</VALUE></SETTING>
                    <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                    <SETTING><NAME>PathRoot</NAME><VALUE>Project</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>MWProject_PPC_flatrsrcfilename</NAME><VALUE></VALUE></SETTING>

                <!-- Settings for "PPCAsm Panel" panel -->
                <SETTING><NAME>MWAssembler_PPC_auxheader</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWAssembler_PPC_symmode</NAME><VALUE>Mac</VALUE></SETTING>
                <SETTING><NAME>MWAssembler_PPC_dialect</NAME><VALUE>PPC</VALUE></SETTING>
                <SETTING><NAME>MWAssembler_PPC_prefixfile</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWAssembler_PPC_typecheck</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWAssembler_PPC_warnings</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWAssembler_PPC_casesensitive</NAME><VALUE>0</VALUE></SETTING>

                <!-- Settings for "Property List" panel -->
                <SETTING><NAME>PList_OutputType</NAME><VALUE>File</VALUE></SETTING>
                <SETTING><NAME>PList_OutputEncoding</NAME><VALUE>UTF-8</VALUE></SETTING>
                <SETTING><NAME>PList_PListVersion</NAME><VALUE>1.0</VALUE></SETTING>
                <SETTING><NAME>PList_Prefix</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>PList_FileFilename</NAME><VALUE>Info.plist</VALUE></SETTING>
                <SETTING><NAME>PList_FileDirectory</NAME>
                    <SETTING><NAME>Path</NAME><VALUE>:</VALUE></SETTING>
                    <SETTING><NAME>PathFormat</NAME><VALUE>MacOS</VALUE></SETTING>
                    <SETTING><NAME>PathRoot</NAME><VALUE>Project</VALUE></SETTING>
                </SETTING>
                <SETTING><NAME>PList_ResourceType</NAME><VALUE>plst</VALUE></SETTING>
                <SETTING><NAME>PList_ResourceID</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>PList_ResourceName</NAME><VALUE></VALUE></SETTING>

                <!-- Settings for "Rez Compiler" panel -->
                <SETTING><NAME>MWRez_Language_maxwidth</NAME><VALUE>80</VALUE></SETTING>
                <SETTING><NAME>MWRez_Language_script</NAME><VALUE>Roman</VALUE></SETTING>
                <SETTING><NAME>MWRez_Language_alignment</NAME><VALUE>Align1</VALUE></SETTING>
                <SETTING><NAME>MWRez_Language_filtermode</NAME><VALUE>FilterSkip</VALUE></SETTING>
                <SETTING><NAME>MWRez_Language_suppresswarnings</NAME><VALUE>0</VALUE></SETTING>
                <SETTING><NAME>MWRez_Language_escapecontrolchars</NAME><VALUE>1</VALUE></SETTING>
                <SETTING><NAME>MWRez_Language_prefixname</NAME><VALUE></VALUE></SETTING>
                <SETTING><NAME>MWRez_Language_filteredtypes</NAME><VALUE>'CODE' 'DATA' 'PICT'</VALUE></SETTING>
            </SETTINGLIST>
            <FILELIST>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftsystem.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftbase.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftinit.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>sfnt.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>psnames.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftdebug.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>type1cid.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>cff.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>smooth.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>winfnt.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>truetype.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftmac.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>psaux.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS></FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftcache.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS></FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftglyph.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS></FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>type1.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>pshinter.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>pcf.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftraster.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
                <FILE>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftrend1.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                    <FILEKIND>Text</FILEKIND>
                    <FILEFLAGS>Debug</FILEFLAGS>
                </FILE>
            </FILELIST>
            <LINKORDER>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftsystem.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftbase.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftinit.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>sfnt.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>psnames.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftdebug.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>type1cid.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>cff.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>smooth.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>winfnt.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>truetype.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftmac.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>psaux.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftcache.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftglyph.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>type1.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>pshinter.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>pcf.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftraster.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
                <FILEREF>
                    <PATHTYPE>Name</PATHTYPE>
                    <PATH>ftrend1.c</PATH>
                    <PATHFORMAT>MacOS</PATHFORMAT>
                </FILEREF>
            </LINKORDER>
        </TARGET>
    </TARGETLIST>

    <TARGETORDER>
        <ORDEREDTARGET><NAME>FreeTypeLib</NAME></ORDEREDTARGET>
    </TARGETORDER>

    <GROUPLIST>
        <GROUP><NAME>base</NAME>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>ftbase.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>ftdebug.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>ftglyph.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>ftinit.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>ftsystem.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>ftmac.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
        </GROUP>
        <GROUP><NAME>ftmodules</NAME>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>cff.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>ftcache.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>psaux.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>psnames.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>sfnt.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>smooth.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>truetype.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>type1cid.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>winfnt.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>type1.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>pshinter.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>pcf.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>ftraster.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
            <FILEREF>
                <TARGETNAME>FreeTypeLib</TARGETNAME>
                <PATHTYPE>Name</PATHTYPE>
                <PATH>ftrend1.c</PATH>
                <PATHFORMAT>MacOS</PATHFORMAT>
            </FILEREF>
        </GROUP>
    </GROUPLIST>

</PROJECT>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: Full RSS1 feed not bozo
Expect: result.bozo == false

-->
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
xmlns:admin="http://webns.net/mvcb/"
xmlns:cc="http://web.resource.org/cc/"
xmlns="http://purl.org/rss/1.0/">

<channel rdf:about="http://weblogs.mozillazine.org/ben/">
<title>Inside Firefox</title>
<link>http://weblogs.mozillazine.org/ben/</link>
<description>The Inside Track on Firefox Development</description>
<dc:language>en-us</dc:language>
<dc:creator></dc:creator>
<dc:date>2006-04-26T14:34:49-08:00</dc:date>
<admin:generatorAgent rdf:resource="http://www.movabletype.org/?v=3.2" />


<items>
<rdf:Seq><rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/010115.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/010109.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/010075.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/010074.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/010073.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/010040.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/010030.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/010011.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/009965.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/009964.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/009943.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/009924.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/009914.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/009804.html" />
<rdf:li rdf:resource="http://weblogs.mozillazine.org/ben/archives/009774.html" />
</rdf:Seq>
</items>

</channel>

<item rdf:about="http://weblogs.mozillazine.org/ben/archives/010115.html">
<title>Firefox 2 Is Cool</title>
<link>http://weblogs.mozillazine.org/ben/archives/010115.html</link>
<description><![CDATA[<p>A lot of people read my previous post and came to a very reasonable conclusion: "If you take Places out of Firefox 2, shouldn't it be called Firefox 1.6?"</p>

<p>I don't agree that Places was the one and only thing that sold Firefox 2 though. I took a look through the <a href="http://wiki.mozilla.org/Firefox2/Requirements">Firefox 2 Requirements</a> page to look at some of the other stuff that's going on. Reading that document, I think I can see now why people are down in the dumps about no-places Firefox 2. I don't think that document necessarily does the best possible job of capturing the excitement I have about some of the Firefox 2 features we're pursuing. </p>

<p>For the past week or so, I've been toting around a printout of another document, which I wrote because I wanted to convey some of the vision I have of the Firefox 2 product as a whole - a more holistic view as it were. </p>

<h3>Safer, Faster, Better</h3>

<p>If you take a look at the black buttons stacked in the right column of this page, you'll see that one of them reads "Safer, Faster, Better." I don't knowwho came up with that one but it's a good tag line. It has a certain cadence about it. People have attached lots of these to Firefox in the past - "Take Back the Web" was the one I came up with, there's "Rediscover the Web", the FirefoxFlicks project has yielded a few good ones too - I like "<a href="http://www.firefoxflicks.com/flick/index.php?sort=new&id=21122&c=false">Web For All</a>". But "Safer, Faster, Better" is not just a tag line, it can also map into a set of themes for product development. </p>

<p>So, taking a look at the Requirements page, I attempted to do that. My document wasn't a comprehensive collection of everything on that page, I was focused more on the things immediately visible to most users. I guess my problem with the Requirements page has always been its very engineering/technical focus.  The result of this is that the priority of items tend to reflect how difficult something is to implement, or where it lies in the development cycle, not necessarily the impact on the user. What I ended up with I guess is a sort of "Shadow PRD" that reflects what I personally thought was cool about Firefox 2, and what I wanted to get out of it. </p>

<p>A copy of the document is <a href="http://www.bengoodger.com/software/mb/2.0/firefox2-vision.html">here</a>. <br />
Some notes:</p>

<ul>
  <li>Assume the scratched out section for "Retracing Your Steps" will be part 
      of a future release.
  <li>The priorities shown are my opinion, and relate to potential impact on 
      the user.      
  <li>The document does not represent all of the work being done, just a 
      readily marketable subset. 
</ul>

<p>All in all, I think there's easily enough here to justify a "2" designation. That's just my opinion though. I also think whole numbers are probably easier for the general populace to understand than decimals. </p>

<p>Firefox has never been about date driven development (within reason). The changes with Places should not be seen as a change in this sentiment. What we're about is high quality software development with real advantages to <br />
users, and I think that with the updated plan we're still on a trajectory that supports and encourages that, perhaps more firmly now than before.</p>

<p>And that's it from today's "Ben waits for the tinderboxen to clear" report. </p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-04-26T14:34:49-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/010109.html">
<title>Firefox 2 Content Update</title>
<link>http://weblogs.mozillazine.org/ben/archives/010109.html</link>
<description><![CDATA[<p>When we began work on Firefox 2, we decided to focus on a development branch, a continuation of the Mozilla 1.8 branch. The reason for doing this was that there was to be a lot of significant architectural changes going on on the trunk, with the prospect of a new rendering back end, a rearchitecture of reflow in layout, and various other things. Shipping a Firefox 2 release in 2006 off of this code did not seem possible. </p>

<p>As a result, we decided to pursue a release focused on application level improvements, on a separate branch. Going into it, we knew the perils of multi-branch development. We knew the divergences that would inevitably form between branch and trunk. We had experience from the painful development of Firefox 1.0 on the Aviary branch. We resolved to be more methodical about our commits, but we knew to expect some pain. The goal was to produce a high value release in short enough time so that we could all return to the trunk and help build new features that utilize the back end being developed there, to help shake them out. </p>

<p>Late last year, we put together a list of things to pursue for the Firefox 2 release. A month or so ago, we got together as a group and formalized this more in a <a href="http://wiki.mozilla.org/Firefox2/Requirements">Firefox 2 PRD</a>. We had scheduled four major pre-release milestones, two alphas and two betas. We have already shipped one alpha. The intent of the second is to be "Feature Complete".</p>

<p>The people driving the various sub-projects on the Requirements list get together weekly to check status. As the weeks have gone by, it has become clear to us that the most complex feature on the plan is Places. It is easily an order of magnitude more complex than anything else on the plan. Places is a great feature and it has been exciting watching its capabilities grow. We are looking forward to the capabilities that it will expose. What we have learned though is that the work required to complete Places is probably too substantial to gate the Firefox 2 release. It falls more into the "significant rearchitecture" category of feature that's generally been targeted at Firefox 3.</p>

<p>What we have decided to do is as follows:</p>

<ul>
<li>We will disable places on the 1.8 branch, reverting the user interface and back end to Firefox 1.x functionality. 
<li>We will continue to aggressively develop the capabilities of Places on the 1.9 trunk. Places will remain enabled here. 
</ul>

<p>We think this is a good decision for two reasons:</p>

<ul>
<li>It reduces the pressure on the Places team to deliver a lot of bug fixes and additional features on the very immediate timeframe required by the Firefox 2 testing releases. It is my opinion that doing so would impact the quality of the feature, if we did not add at least a couple more alpha cycles to the process. This decision provides us with an opportunity to really make the architecture and user interface of Places reach their full potential. 
<li>It allows us as a group to circle around and consider the content of the Firefox 2 release holistically, identify high impact at risk areas and spend some more time on them. One of those for me was Feed Handling.
</ul>

<p>Michael Schroepfer of the Mozilla Corporation has a <a href="http://groups.google.com/group/mozilla.dev.planning/browse_frm/thread/4b8e7bafecccbc10/8997efd5d5d5f03f">newsgroup posting</a> with additional information. His thread is also the most appropriate forum for discussion of this topic. </p>

<p>I have been working on refining some of the messaging surrounding feature content and prioritization on the PRD. I will post the initial results of that here soon.</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-04-24T09:30:54-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/010075.html">
<title>Did I Mention...</title>
<link>http://weblogs.mozillazine.org/ben/archives/010075.html</link>
<description><![CDATA[<p>... that I hate this computer?</p>

<p>While I'm at it... the up arrow key cap fell off after about three weeks, in early 2004. About six months later I lost the little rubber membrane thing that made it slightly easier to push the arrow. Since then, I've been typing by pushing down on the little connection thingy on the keyboard tray. </p>

<p>It's been shedding pieces of plastic too. I've never dropped the computer once, but pieces of the shell have begun to snap off. </p>

<p>When I first got it, when the secondary battery was in place, when the primary drained the machine would hibernate, even though the secondary was present! Pretty awful bug to ship with. There was never a solution that I could find. Speaking of batteries, the primary battery is pretty much toast... it won't go for more than 5 minutes before shutting down. It began doing this at around the 12-18 month mark. And the battery light permanently flashes orange whenever the system is on. </p>

<p>Why don't I call the hotline? I guess I'll have to, before my warranty runs out. I don't because it usually involves 45 minutes on hold or explaining to someone who only has a script to read from that the issue involving a missing up arrow doesn't require restarting Windows or running some stupid diagnostic tool. I could have paid more for "premium support" at build-time but I found that concept sort of insulting: why should I have to pay extra to speak to someone who is smart and doesn't think I'm a moron?</p>

<p>And I don't want a Thinkpad either. I hate those computers. They have old-fashioned 4:3 displays, and the function key and left Ctrl key are reversed. I know I could map them differently but why would I? Why couldn't IBM just have designed the product correctly in the first place? Oh, and I'd sooner drink paint than run the awful IBM access connections software to connect to a wireless network, or deal with the fact that the Num Lock key seems to reset to ON every time the system is rebooted.</p>

<p>Why doesn't someone make the perfect laptop? I'd be interested to hear from someone how long the compile times are for FirefoxDebug on a 2.16GHz MacBook Pro...</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-04-16T19:11:28-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/010074.html">
<title>I Hate This Computer</title>
<link>http://weblogs.mozillazine.org/ben/archives/010074.html</link>
<description><![CDATA[<p>I have been fighting with this computer for the past few days to do a build with a few patches applied. </p>

<p>First, I managed to get a certain distance with a branch build, compiling with Visual C++ 6.0. But soon I realized there were too many dependencies that were trunk specific, so I had to build trunk. About a quarter of the way through my build died, of course, compiling from the same shell, wrong version of VC6.0 for Cairo/Thebes. </p>

<p>Starting over again with the VC7 tools, another failure towards the end. Some sort of cyclic dependency check error. Clobber and restart. Now I forgot one of my patches had a configure change, and the process begins anew, I have effectively clobbered. </p>

<p><a href="http://weblogs.mozillazine.org/ben/archives/2003_12.html">When I bought this machine</a>, a Dell Precision M60 with a Pentium M 1.7GHz processor, a 7200rpm disk and a gig of RAM, it could compile Firefox start to stop in 21 minutes. Now it takes over an hour.</p>

<p>The situation is better on my Google-supplied workstation, but for how long? Over time, Windows reaches a point of being completely useless for anything aside from the most basic activities. What's the effect? I had planned to work both days this weekend on Firefox 2 features. Instead I spent the whole time fighting one of the most frustrating fights possible, and have achieved nothing. I hate Windows. I hate this computer.</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-04-16T18:58:02-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/010073.html">
<title>Miscommunications</title>
<link>http://weblogs.mozillazine.org/ben/archives/010073.html</link>
<description><![CDATA[<p>My laptop was running pretty slowly yesterday so I decided to scan the Add/Remove Programs list to clear out the cruft. Things were really chugging along. I sequentially uninstalled several pieces of software, and the process was very dissatisfying. I became more and more enfuriated at my computer as it proceeded. Here are some of the nuisances:</p>

<ul>
<li>I could only remove one thing at a time. 
<li>Many pieces of software used the Windows Installer system which seemed to take forever and report very inconsistent progress (I know, Firefox isn't the best at this in its installer, either)
<li>Most annoyingly, the uninstaller apps all reported themselves as performing a variety of actions that I never requested, as explanations for what they were doing during long periods of inactivity and progress-bar freeze. Common excuses were "Windows is Configuring <blah>" and "InstallShield is preparing a report on <bleh>".
</ul>

<p>You know, I never <strong>asked</strong> for blah to be "configured." I never asked for a report on bleh (What am I, a manager? Where is the report anyway? Does it have the appropriate cover sheet?) <strong>I just want the software gone</strong>. I'm getting really tired of excuses from software like this. Windows software seems to be getting worse and worse. On Mac, the typical way to remove a program is to drag it into the trash can. I can even do that to several programs at once! I do however have to be able to afford a Mac (I can, I have one). Many folk aren't as fortunate as I. </p>

<p>As a side note, I read an interesting article in Forbes a few weeks ago criticizing Microsoft for its delays shipping Vista, and asking why wouldn't you just side-step all the trouble and buy a Mac, since the odds were good many people would have to upgrade their PC anyway just to get the whiz-bang in Vista. The article side-swiped open source desktop initiatives, asking where the viable free alternative was. I think that was an interesting point, and especially so since the capabilities of Linux systems have come an awesome distance in the past few years but there have been few distributions or desktop environments that IMO make the most of all of those.</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-04-16T18:05:04-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/010040.html">
<title>Firefox Version Numbers</title>
<link>http://weblogs.mozillazine.org/ben/archives/010040.html</link>
<description><![CDATA[<p>Mike Beltzner <a href="http://www.beltzner.ca/mike/archives/2006/04/10/when_3_is_less_than_2.html">explains</a> Firefox version numbering. i.e. Firefox 3 RTM is not "out".</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-04-10T08:38:18-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/010030.html">
<title>Our Next Challenge?</title>
<link>http://weblogs.mozillazine.org/ben/archives/010030.html</link>
<description><![CDATA[<p>The past year or so has been interesting. In this time, I've been able to meet a lot of new people and learn a lot of new things. Most importantly is that for the first time in as long as I can remember, I have had a chance to see the Mozilla project from the outside, as it would appear to someone who was trying to build on Mozilla technology or contribute directly to a project, but was not part of Netscape "back in the day" or an employee of the Mozilla Foundation/Corporation itself. </p>

<p>It's been an illuminating experience. From a technical perspective, it helped highlight APIs that I had developed without a clear understanding of how they would be used. The Extension Installation API was one example of this, and we were able to make some great improvements to it in 2005.</p>

<p>But perhaps more importantly it has shed some light on how people perceive Mozilla as an open source project. These perceptions are not the sort of things people express explicitly. You have to notice them.</p>

<h3>The Difficulty of Involvement</h3>

<p>This is sort of the uber-perception. I think some of the reasons for this include the following:</p>

<h3>Where is the Discussion?</h3>

<p>Which newsgroup/mailing list/IRC channel/wiki/talk page/bug/forum page do I need to track in order to know what's going on in a specific area? The answer is unsatisfactorily complex.</p>

<p>The traditional method of joining a project in the OSS world (where you join lists and IRC channels and lurk for a while, gradually ramping up your contributions) scales uneasily to a project the size of Mozilla. The amount of data a mere mortal would have to absorb in order to be productive quickly is staggering. I have in the past jocularly referred to it as the "learning wall". I wonder how many people just give up. </p>

<h3>Madness to Method?</h3>

<p>As a large project, Mozilla has thousands of source files across hundreds of directories. One of my coworkers here at Google commented that he tried to find something as simple as the browser window code a couple of years ago and couldn't, because it lived under the thoughtfully named "xpfe". </p>

<p>There's not a huge amount of documentation - and I'm not just talking about public API docs. I'm talking about the much needed diagrams that show how the various building blocks fit together, and in-code documentation for pretty much anything that isn't intuitive (which is a lot). I've written as little of this as anyone else.</p>

<h3>Tone</h3>

<p>In the past, I have not done the best I could to establish a tone for discourse that is conducive to productive development. My tendency was to snap when provoked. I made two mistakes of judgement here, one was ignoring the effect that this sort of thing would have on those watching, aside from the victim. The other was to think that regardless of the tone set by my actions, we as a group could work through any negative effects. Any work we relied on others for we could do ourselves. Or we could hire through it.</p>

<h3>The Joy of Code</h3>

<p>The flaw with this is that when your project's contributions come solely from companies, for better or for worse the activities of those paid contributors will align in some way with the interests of those companies. What this does not always allow for is the pursuit of the sort of improvements that are outside the scope of these interests. Such things often include raising general code quality, speculative feature development, feature polish and detail etc. I don't mean to say that companies are <em>against</em> these things, but they're often not the primary concern during a release crunch. And what companies like to have is shipping software. </p>

<p>Alternately, even in the absence of corporate support, if there is not enough redundancy that the same set of folk has to do the grunt work over and over, the risk of burnout is high.</p>

<p>I feel this because I have been incredibly "plan" focused over the past few years, formally during my time at Netscape and less formally but no less importantly during the run up to Firefox 1.0 and 1.5. What I notice is that I no longer have time to work on the sort of interesting side projects that I used to enjoy doing when I was first starting out. </p>

<p>For example, about six years ago I discovered a bug in the Bookmarks menu shortly after scrolling was implemented. When you moused into a submenu for a folder that was in the scrolled section, the sub menu popup was pushed off the bottom of the screen. I took a couple of days to learn the menu positioning code and fix the math error that was causing the bug. The exercise was good for me in a number of ways: I learned more about another section of the code, my general expertise was raised, and well.. I fixed the bug that was bothering<br />
me.</p>

<p>I think we need to have a project that is accessible to volunteers for this reason. We also need to provide a way to allow those volunteers to grow if they want to, so that if you're one of the folk at the center you can have a chance to step aside for a moment and take a breather and code for the pure joy of it. </p>

<p>Full time paid contributors will always be a part of Open Source development. But I don't think release-focused agendas will ever be a substitute for the passion of folk who participate because of the joy of exploration and of contribution. </p>

<h3>Looking Outward, Looking Forward</h3>

<p>As a project, we have made overtures towards being a more inclusive lot. For some of the reasons I've listed here, I think as a project we're still more inward looking than outward. How many of us have thought about what we want to be doing in 5 years? Will we always be doing this? Will our roles remain the same? My opinion is that it's fast becoming time for us to start considering making personal sacrifices in our short term conveniences to make the project more accessible to new people. Do I know what we need to do? Not exactly. But I have some ideas: find ways to make our discussions, our public faces, and our code more accessible.</p>

<p>With Firefox we did an excellent job of building a world class product that people wanted to use. We have a new challenge now, one that is larger and scope and in the long run in my opinion considerably more important because the long term success of products like Firefox depend on it. How will we grow a world class development community? How will we ensure that the freedoms we enjoy are protected, forever?</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-04-07T09:22:59-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/010011.html">
<title>Congrats Relicensing Project!</title>
<link>http://weblogs.mozillazine.org/ben/archives/010011.html</link>
<description><![CDATA[<p><a href="http://weblogs.mozillazine.org/gerv/archives/2006/03/relicensing_complete.html">Gerv announces</a> that the Relicensing project is complete. Congrats Gerv and everyone else who doggedly pursued this over the years.  Part of Mozilla's mission is preserving choice, and making our code available under a variety of flexible licenses helps ensure that by allowing other projects to make use of it. This was a formidable task and a great accomplishment. </p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-04-04T07:15:22-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/009965.html">
<title>Producing Open Source Software</title>
<link>http://weblogs.mozillazine.org/ben/archives/009965.html</link>
<description><![CDATA[<p>I've been reading Karl Fogel's excellent <a href="http://www.producingoss.com/">Producing Open Source Software</a>. </p>

<p>Karl's book is very well written, nice and compact (272 pages), and contains useful information for anyone doing anything in the Open Source world: both developers and managers. </p>

<p>It will help people new to Open Source get a better understanding of how OSS projects are run. It will help people familiar with Open Source to get a better understanding of how to contribute more effectively.</p>

<p>It's definitely a "must read."</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-03-26T15:03:52-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/009964.html">
<title>Writing for Busy People</title>
<link>http://weblogs.mozillazine.org/ben/archives/009964.html</link>
<description><![CDATA[<p>Back when I was in <a href="http://www2.ece.auckland.ac.nz/">University</a>, many of the lecturers stressed time and time again the importance of succinct, well organized writing. They said over and over that this was the best way to have your thoughts read and understood by decision makers. In fact, they scared us by saying that 70% of us would become managers sooner or later!</p>

<p>Well, I can tell you that's sage advice. It's great when people make contributions in the form of ideas and proposals, but it's even better when they're written for busy people. Here are some examples:</p>

<ul>
 <li>Making important points up front
 <li>Clear taxonomy of headings, and lots of them
 <li>Writing clearly and succinctly
 <li>No long, unbroken paragraphs or tracts of text. 
 <li>Preferring bulleted lists with clear points to paragraphs. 
 <li>Use of emphasis in formatting to make important things clear
</ul>

<p>These days, I find I don't have a lot of time to read everything carefully, so the better structured a document is, the more I get out of it. I frequently find I miss entire subsections or points of documents, even when there's relatively little text, because of incomplete organization. My eyes definitely glaze over when i see a large block of unbroken text with few headings. At the very least, it'd be very helpful if folk would structure their thoughts into: "Problem" and "Proposed Solution". </p>

<p>Before you post, stop and think if you've written something in a way that'll allow others to get the most out of it. Communicating your ideas effectively means you may get a clearer and quicker response from other people. </p>]]></description>
<dc:subject>Editorial</dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-03-26T14:48:04-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/009943.html">
<title>Step 2: Ask Questions</title>
<link>http://weblogs.mozillazine.org/ben/archives/009943.html</link>
<description><![CDATA[<p>A healthy project is one where active contributors are always evaluating the project's progress, making sure it is headed in the right direction (usually stated in the project mission or goals). </p>

<p>I think we could be better at this in Mozilla. I'm not suggesting people be assholes or anything, but I think some more pan-project analysis would be useful. </p>

<p>Historically, I can point at a couple of groups of people who have attempted to do something like this. The <code>drivers@</code> group is one that looked beyond individual modules within Gecko to make sure that the right thing for the shipping products as a whole happened. The Firefox team is another example. By taking a holistic view, user experience was enhanced. </p>

<p>I think contributors should not be afraid to poke their nose in other parts of the project and see how things are going. Ask questions. Learn more. Get involved in governance and management. If things don't seem intuitive, or a little arbitrary, ask, rather than assume it's for a good reason. One of the benefits of having an open, referencable set of discussion forums means that once you've answered a question once on the public forums, when someone else asks you can just give them a URL. </p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-03-22T17:27:14-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/009924.html">
<title>Step 1: Public Discussions</title>
<link>http://weblogs.mozillazine.org/ben/archives/009924.html</link>
<description><![CDATA[<p>The first step on the pathway to open source project happiness is to have our discussions in the public. </p>

<p>One of the things people have (rightly) criticized about Firefox and Mozilla development in the past is that too much happens mysteriously, behind closed doors. This was for a number of reasons that sounded sufficient at the time - it was expedient, people were sitting within shouting distance, mental laziness, etc. </p>

<p>What poor communication breeds is a lack of understanding of procedures, priorities and such like. A healthy project is one where the contributors understanding where things are headed, and what parts they can play. It is one where newcomers can visit the project website and within the space of a few minutes get a decent understanding of how things work, and find out opportunities for them to participate. </p>

<p>People don't want to contribute to projects where things happen "magically". I've learned this lesson in the past. </p>

<p>To this end, I've been encouraging everyone to have public discussions on the <a href="https://lists.mozilla.org/listinfo">Mozilla Newsgroups/Mailing Lists</a>. For Firefox, the list is dev-apps-firefox@, and the newsgroup is mozilla.dev.apps.firefox. They are mirrored through <a href="http://groups.google.com/group/mozilla.dev.apps.firefox">Google Groups</a> for ease of browsing. We're planning on improving the theme for Firefox2, and rather than pursue this effort in a walled garden like last time, we're going to proceed in dev-themes@/mozilla.dev.themes. Come on over and join in!</p>

<p>At the same time, we've been encouraging other projects to use the newsgroups/lists too. Decisions made in private email, IRC (which isn't archived anywhere) even in public bugs etc make it very difficult for people who aren't central to the project to find out more or participate. I think we should strive to strike a better balance between convenience and accessibility/referencability. </p>

<p>On top of this, there is a need to make the contact portions of the web site more accurate, relevant and easy to find, so people can easily find the list they want, and the person or group to contact. </p>

<p>We've been having discussions about all of this in <a href="http://groups.google.com/group/mozilla.dev.general">mozilla.dev.general</a>, in <a href="http://groups.google.com/group/mozilla.dev.general/browse_thread/thread/899917f713861f06/4ae6d094ffee5ae7">these</a> <a href="http://groups.google.com/group/mozilla.dev.general/browse_thread/thread/5d1bf2bbc769919d/210246003f1f6fea">threads</a>. Rather than talk in a vacuum of only ourselves, I really hope that those of you that have experienced difficulty in the past in some of these areas will come forward and contribute to the discussion. </p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-03-20T09:23:24-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/009914.html">
<title>Reflection</title>
<link>http://weblogs.mozillazine.org/ben/archives/009914.html</link>
<description><![CDATA[<p>I've been doing a bit of it lately. All manner of topics. We recently moved and things have been chaotic so it's been nice to take the time to think. I've had a chance to look at how far we've come, and form some ideas about what we might need to do to go the right places. </p>

<p>The past couple of years have brought some immense highs, and some considerable angst. With success has come the realization that true now as ever: the spirit of open source is expressed through the creative freedom of the many. The surest way to navigate the murky waters of increased attention and marketshare and such like is, as Leslie has been saying for some time, to keep your karma clean. Do the right thing, not only in technical matters but also relationships. </p>

<p>For the Mozilla project, what we need to do (I think) is:</p>

<ul>
 <li>Better define the things that are important to us. The things that define who we are. Impart the positive aspects of open development culture and practice on everyone involved because  they're effective, and as a safeguard against recurrence of some of the <a href="http://weblogs.mozillazine.org/ben/archives/009698.html">troubles of the past</a>.
 <li>Engage the community more effectively. Create and maintain an infrastructure of open communication to remove the "mystery" behind the decision making process. Organize our contributor materials better to make the project more accessible to newcomers. These are just a couple of examples. 
</ul>

<p>For my part, I'm starting out this year by doing things <a href="http://www.producingoss.com/">a little differently</a>. I think we need to grow more as a project. I'm hopeful that I'll be able to achieve some positive change. </p>

<p>I understand that this post might seem a little abstract. I think what I'm saying might become a bit more clear after I talk about some tangible efforts, which I will do in future entries.</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-03-19T02:00:07-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/009804.html">
<title>Bye Bye Blackberry?</title>
<link>http://weblogs.mozillazine.org/ben/archives/009804.html</link>
<description><![CDATA[<p><a href="http://news.com.com/Bye-bye%2C+BlackBerry+-+page+2/2100-1047_3-6042308-2.html?tag=st.num">Bye Bye, Blackberry?</a></p>

<p>I cannot believe people are discussing life without these things. It's like this: I have a patent on television. I don't plan on doing anything with it, but I'm going to shut TV down for all of you, and you're going to sit about and think about life without TV? What's wrong with people?! Is this the world we all want to live in, where people without  the interest or capability to pursue technology can hold everyone else captive? That's not the world I want to live in. <br />
</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-02-24T10:57:32-08:00</dc:date>
</item>
<item rdf:about="http://weblogs.mozillazine.org/ben/archives/009774.html">
<title>More on Memory</title>
<link>http://weblogs.mozillazine.org/ben/archives/009774.html</link>
<description><![CDATA[<p>Firefox's caching behavior is just one area of memory usage. I'm really glad that there's been such a lot of discussion in the previous post I made, since many people have raised specific issues, bugs have been filed, and people are looking at the things people are reporting. This sort of feedback system is one of the things that makes the open development model great. Firefox 2 will be much better because of your help!</p>]]></description>
<dc:subject></dc:subject>
<dc:creator>ben</dc:creator>
<dc:date>2006-02-17T23:44:03-08:00</dc:date>
</item>


</rdf:RDF>
<!--

Description: rss1 unknown elements does not cause error
Expect:  feed.items.length == 1

-->
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
xmlns:admin="http://webns.net/mvcb/"
xmlns:cc="http://web.resource.org/cc/"
xmlns="http://purl.org/rss/1.0/">

<channel rdf:about="http://example.org/">
<title>fooo</title>
<link>http://weblogs.example.org/</link>
<description>fooooooo</description>
<dc:language>en-us</dc:language>
<dc:creator></dc:creator>
<dc:date>2006-04-10T08:38:18-08:00</dc:date>
<admin:generatorAgent rdf:resource="http://www.movabletype.org/?v=3.2" />







<foo:bar xmlns:foo="http://example.org">baz</foo:bar>










<items>
<rdf:Seq>
<rdf:li rdf:resource="http://weblogs.example.org/archives/009698.html" />
</rdf:Seq>

</items>

</channel>
<item rdf:about="http://weblogs.example.org/archives/009698.html">
<title>Come From?</title>
<link>http://example.org/009698.html</link>
<description><![CDATA[much of the code]]></description>
<dc:date>2006-02-06T10:19:03-08:00</dc:date>
</item>
</rdf:RDF>
<!--

Description: atom generator works
Expect:  result.bozo == true && feed.items.length == 1

-->
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
xmlns:admin="http://webns.net/mvcb/"
xmlns:cc="http://web.resource.org/cc/"
xmlns="http://purl.org/rss/1.0/">

<channel rdf:about="http://example.org/">
<title>fooo</title>
<link>http://weblogs.example.org/</link>
<description>fooooooo</description>
<dc:language>en-us</dc:language>
<dc:creator></dc:creator>
<dc:date>2006-04-10T08:38:18-08:00</dc:date>
<admin:generatorAgent rdf:resource="http://www.movabletype.org/?v=3.2" />


<items>
<rdf:Seq>
<rdf:li rdf:resource="http://weblogs.example.org/archives/009698.html" />
</rdf:Seq>

</items>

</channel>
<item rdf:about="http://weblogs.example.org/archives/009698.html">
<title>Come From?</title>
<link>http://example.org/009698.html</link>
<description><![CDATA[
   %Gâ%@ much of the code 
]]></description>
<dc:date>2006-02-06T10:19:03-08:00</dc:date>
</item>
</rdf:RDF>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout style="@style/FxAccountMiddle" >

        <TextView
            style="@style/FxAccountHeaderItem"
            android:text="@string/fxaccount_account_verified_sub_header" >
        </TextView>

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="45dp"
            android:contentDescription="@string/fxaccount_empty_contentDescription"
            android:src="@drawable/fxaccount_checkbox" >
        </ImageView>

        <TextView
            style="@style/FxAccountTextItem"
            android:layout_marginBottom="40dp"
            android:text="@string/fxaccount_account_verified_description"
            android:textSize="18sp" />

        <Button
            android:id="@+id/button"
            style="@style/FxAccountButton"
            android:text="@string/fxaccount_back_to_browsing" />

        <LinearLayout style="@style/FxAccountSpacer" />

        <ImageView
            style="@style/FxAccountIcon"
            android:contentDescription="@string/fxaccount_empty_contentDescription" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<account-authenticator xmlns:android="http://schemas.android.com/apk/res/android"
    android:accountType="@string/moz_android_shared_fxaccount_type"
    android:icon="@drawable/icon"
    android:smallIcon="@drawable/icon"
    android:label="@string/fxaccount_label"
    android:accountPreferences="@xml/fxaccount_options" />
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle" >
  <solid android:color="@color/fxaccount_button_background_inactive" />
  <corners
      android:radius="@dimen/fxaccount_corner_radius" />
</shape>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle" >
  <solid android:color="@color/fxaccount_button_background_active" />
  <corners
      android:radius="@dimen/fxaccount_corner_radius" />
</shape>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle" >
  <solid android:color="@color/fxaccount_button_background_hit" />
  <corners
      android:radius="@dimen/fxaccount_corner_radius" />
</shape>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/fxaccount_button_background_pressed" />
    <item android:state_enabled="false"
          android:drawable="@drawable/fxaccount_button_background_disabled" />
    <item android:state_enabled="true"
          android:drawable="@drawable/fxaccount_button_background_enabled" />
</selector>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:color="@color/fxaccount_button_textColor" />
</selector>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_enabled="false" android:color="@color/fxaccount_input_textColor_inactive" />
  <item android:state_pressed="true" android:color="@color/fxaccount_input_textColor_pressed" />
  <item android:color="@color/fxaccount_input_textColor" />
</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources xmlns:android="http://schemas.android.com/apk/res/android">
  <color name="fxaccount_textColor">#424f59</color>
  <color name="fxaccount_textColorSubdued">#8a9ba8</color>

  <color name="fxaccount_linkified_textColor">#8a9ba8</color>
  <color name="fxaccount_linkified_textColorLink">#0095dd</color>
  <color name="fxaccount_linkified_textColorLinkSubdued">#8a9ba8</color>

  <color name="fxaccount_error">#d63920</color>

  <color name="fxaccount_error_preference_backgroundcolor">#fad4d2</color>

  <color name="fxaccount_button_textColor">#ffffff</color>
  <color name="fxaccount_button_background_active">#0095dd</color>
  <color name="fxaccount_button_background_hit">#0088cc</color>
  <color name="fxaccount_button_background_inactive">#8a9ba8</color>
  <color name="fxaccount_input_textColor">#424f59</color>
  <color name="fxaccount_input_textColor_pressed">#424f59</color>
  <color name="fxaccount_input_textColor_inactive">#8a9ba8</color>
  <color name="fxaccount_input_textColorHint">#8a9ba8</color>
  <color name="fxaccount_link_textColor">#0095dd</color>
  <color name="fxaccount_link_textColor_pressed">#0088cc</color>
  <color name="fxaccount_link_textColor_inactive">#8a9ba8</color>
  <color name="fxaccount_input_borderActive">#0095dd</color>
  <color name="fxaccount_input_borderInactive">#8a9ba8</color>
  <color name="fxaccount_password_show_textcolor">#8a9ba8</color>
  <color name="fxaccount_password_show_backgroundcolor">#ffffff</color>
  <color name="fxaccount_password_hide_textcolor">#ffffff</color>
  <color name="fxaccount_password_hide_backgroundcolor">#8a9ba8</color>
</resources>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout style="@style/FxAccountMiddle" >

        <LinearLayout style="@style/FxAccountSpacer" />

        <TextView
            style="@style/FxAccountHeaderItem"
            android:text="@string/fxaccount_confirm_account_header" >
        </TextView>

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="40dp"
            android:background="@android:color/transparent"
            android:contentDescription="@string/fxaccount_empty_contentDescription"
            android:src="@drawable/fxaccount_mail" >
        </ImageView>

        <TextView
            android:id="@+id/verification_link_text"
            style="@style/FxAccountTextItem"
            android:layout_marginBottom="40dp"
            android:text="@string/fxaccount_confirm_account_verification_link"
            android:textSize="18sp" />

        <Button
            android:id="@+id/button"
            style="@style/FxAccountButton"
            android:text="@string/fxaccount_back_to_browsing" />

        <TextView
            android:id="@+id/resend_confirmation_email_link"
            style="@style/FxAccountLinkItem"
            android:text="@string/fxaccount_confirm_account_resend_email" />

        <TextView
            android:id="@+id/change_confirmation_email_link"
            style="@style/FxAccountLinkItem"
            android:text="@string/fxaccount_confirm_account_change_email" />

        <LinearLayout style="@style/FxAccountSpacer" />

        <ImageView
            style="@style/FxAccountIcon"
            android:contentDescription="@string/fxaccount_empty_contentDescription" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:id="@+id/create_account_not_allowed_view"
        style="@style/FxAccountMiddle" >

        <LinearLayout style="@style/FxAccountSpacer" />

        <TextView
            style="@style/FxAccountHeaderItem"
            android:text="@string/fxaccount_account_create_not_allowed" >
        </TextView>

        <TextView
            style="@style/FxAccountTextItem"
            android:layout_marginBottom="45dp"
            android:layout_marginTop="45dp"
            android:text="@string/fxaccount_account_create_not_allowed_you_must_meet_certain_age_requirements" >
        </TextView>

        <TextView
            android:id="@+id/learn_more_link"
            style="@style/FxAccountLinkifiedItem"
            android:text="@string/fxaccount_account_create_not_allowed_learn_more" />

        <LinearLayout style="@style/FxAccountSpacer" />

        <ImageView
            style="@style/FxAccountIcon"
            android:contentDescription="@string/fxaccount_empty_contentDescription" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:id="@+id/create_account_view"
        style="@style/FxAccountMiddle" >

        <LinearLayout style="@style/FxAccountSpacer" />

        <TextView
            style="@style/FxAccountHeaderItem"
            android:text="@string/fxaccount_create_account_header" />

        <include layout="@layout/fxaccount_custom_server_view" />

        <include layout="@layout/fxaccount_email_password_view" />

        <TextView
            style="@style/FxAccountTextItem"
            android:layout_marginTop="10dp"
            android:text="@string/fxaccount_create_account_password_length_restriction"
            android:textColor="@color/fxaccount_textColorSubdued" />

        <!-- Per http://stackoverflow.com/questions/2359176/android-edittext-onclicklistener, not allowing focus allows us to highjack the click. -->

        <EditText
            android:id="@+id/year_edit"
            style="@style/FxAccountEditItem"
            android:drawableRight="@drawable/fxaccount_ddarrow_inactive"
            android:focusable="false"
            android:hint="@string/fxaccount_create_account_year_of_birth"
            android:inputType="none" />

        <TextView
            android:id="@+id/policy"
            style="@style/FxAccountLinkifiedItem"
            android:layout_marginBottom="0dp"
            android:layout_marginTop="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:text="@string/fxaccount_create_account_policy_text"
            android:textColorLink="@color/fxaccount_linkified_textColorLinkSubdued" />

        <TextView
            android:id="@+id/remote_error"
            style="@style/FxAccountErrorItem" />

        <RelativeLayout
            style="@style/FxAccountButtonLayout"
            android:layout_marginBottom="10dp" >

            <ProgressBar
                android:id="@+id/progress"
                style="@style/FxAccountProgress" />

            <Button
                android:id="@+id/button"
                style="@style/FxAccountButton"
                android:text="@string/fxaccount_create_account_button" />
        </RelativeLayout>

        <CheckBox
            android:id="@+id/choose_what_to_sync_checkbox"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_margin="0dp"
            android:text="@string/fxaccount_create_account_choose_what_to_sync" />

        <TextView
            android:id="@+id/sign_in_instead_link"
            style="@style/FxAccountLinkItem"
            android:layout_marginBottom="20dp"
            android:layout_marginTop="20dp"
            android:focusable="true"
            android:text="@string/fxaccount_create_account_sign_in_instead" />

        <LinearLayout style="@style/FxAccountSpacer" />

        <ImageView
            style="@style/FxAccountIcon"
            android:contentDescription="@string/fxaccount_empty_contentDescription" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <LinearLayout
        android:id="@+id/account_server_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:background="@color/fxaccount_error_preference_backgroundcolor"
        android:gravity="center_vertical"
        android:minHeight="?android:attr/listPreferredItemHeight" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/fxaccount_empty_contentDescription"
            android:gravity="center"
            android:minWidth="48dip"
            android:padding="10dip"
            android:src="@drawable/fxaccount_sync_error" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical"
            android:paddingBottom="6dip"
            android:paddingRight="10dip"
            android:paddingTop="6dip" >

            <TextView
                android:id="@+id/account_server_title"
                style="@style/FxAccountTextItem"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_marginBottom="0dp"
                android:gravity="center_vertical"
                android:text="@string/fxaccount_custom_server_account_title" >
            </TextView>

            <TextView
                android:id="@+id/account_server_summary"
                style="@style/FxAccountTextItem"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="0dp"
                android:ellipsize="middle"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:singleLine="true"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textSize="12sp" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/sync_server_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:background="@color/fxaccount_error_preference_backgroundcolor"
        android:gravity="center_vertical"
        android:minHeight="?android:attr/listPreferredItemHeight" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/fxaccount_empty_contentDescription"
            android:gravity="center"
            android:minWidth="48dip"
            android:padding="10dip"
            android:src="@drawable/fxaccount_sync_error" />

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical"
            android:paddingBottom="6dip"
            android:paddingRight="10dip"
            android:paddingTop="6dip" >

            <TextView
                android:id="@+id/sync_server_title"
                style="@style/FxAccountTextItem"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_marginBottom="0dp"
                android:gravity="center_vertical"
                android:text="@string/fxaccount_custom_server_sync_title" >
            </TextView>

            <TextView
                android:id="@+id/sync_server_summary"
                style="@style/FxAccountTextItem"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="0dp"
                android:ellipsize="marquee"
                android:focusable="true"
                android:focusableInTouchMode="true"
                android:singleLine="true"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textSize="12sp" />
        </LinearLayout>
    </LinearLayout>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>
  <dimen name="fxaccount_stroke_width">1dp</dimen>
  <dimen name="fxaccount_corner_radius">5dp</dimen>

  <!-- The amount of horizontal padding that appears inside the email,
       password, etc input fields. -->
  <dimen name="fxaccount_input_padding_horizontal">20dp</dimen>
  <!-- And the amount of vertical padding that appears inside input
       fields. -->
  <dimen name="fxaccount_input_padding_vertical">10dp</dimen>

  <!-- The amount of horizontal padding that appears around the show/hide
       password button.  Vertical padding is provided by the adjacent input
       field. -->
  <dimen name="fxaccount_show_password_padding_horizontal">8dp</dimen>

  <!-- Preference fragment padding, bottom -->
  <dimen name="preference_fragment_padding_bottom">0dp</dimen>
  <!-- Preference fragment padding, sides -->
  <dimen name="preference_fragment_padding_side">16dp</dimen>

  <integer name="preference_fragment_scrollbarStyle">0x02000000</integer> <!-- outsideOverlay -->
</resources>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <AutoCompleteTextView
            android:id="@+id/email"
            style="@style/FxAccountEditItem"
            android:layout_marginBottom="10dp"
            android:completionThreshold="2"
            android:ems="10"
            android:hint="@string/fxaccount_email_hint"
            android:inputType="textEmailAddress" >

            <requestFocus />
        </AutoCompleteTextView>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <EditText
                android:id="@+id/password"
                style="@style/FxAccountEditItem"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/fxaccount_password_background"
                android:ems="10"
                android:hint="@string/fxaccount_password_hint"
                android:inputType="textPassword" />

            <!-- For the following, I beg forgiveness. The show/hide button is a
                 toggle button; its text depends on its state. The text for each
                 state could be a different length. We want to maintain the
                 button's width regardless of its state. To achieve this, we
                 size the actual button to its container, and include two
                 invisible (but present for layout purposes) buttons, one of
                 each state. The container wraps the larger of the two dummy
                 buttons; the actual button sizes to the container; and we're
                 happy. Be thankful there are not three buttons! -->
            <FrameLayout
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_weight="0"
                android:orientation="horizontal" >

                <Button
                    android:id="@+id/show_password"
                    style="@style/FxAccountShowHidePasswordButton"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="@string/fxaccount_password_show" >
                </Button>

                <Button
                    style="@style/FxAccountShowHidePasswordButton"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:text="@string/fxaccount_password_show"
                    android:visibility="invisible" >
                </Button>

                <Button
                    style="@style/FxAccountShowHidePasswordButton"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:text="@string/fxaccount_password_hide"
                    android:visibility="invisible" >
                </Button>
            </FrameLayout>
        </LinearLayout>
    </LinearLayout>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:id="@+id/update_credentials_view"
        style="@style/FxAccountMiddle" >

        <LinearLayout style="@style/FxAccountSpacer" />

        <TextView
            style="@style/FxAccountHeaderItem"
            android:text="@string/fxaccount_finish_migrating_header" />

        <include layout="@layout/fxaccount_custom_server_view" />

        <include layout="@layout/fxaccount_email_password_view" />

        <TextView
            style="@style/FxAccountTextItem"
            android:layout_marginTop="10dp"
            android:text="@string/fxaccount_finish_migrating_description" />

        <TextView
            android:id="@+id/remote_error"
            style="@style/FxAccountErrorItem" />

        <RelativeLayout style="@style/FxAccountButtonLayout" >

            <ProgressBar
                android:id="@+id/progress"
                style="@style/FxAccountProgress" />

            <Button
                android:id="@+id/button"
                style="@style/FxAccountButton"
                android:text="@string/fxaccount_finish_migrating_button_label" />
        </RelativeLayout>

        <TextView
            android:id="@+id/forgot_password_link"
            style="@style/FxAccountLinkifiedItem"
            android:layout_marginTop="10dp"
            android:text="@string/fxaccount_sign_in_forgot_password" />

        <LinearLayout style="@style/FxAccountSpacer" />

        <ImageView
            style="@style/FxAccountIcon"
            android:contentDescription="@string/fxaccount_empty_contentDescription" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:id="@+id/intro_view"
        style="@style/FxAccountMiddle" >

        <LinearLayout style="@style/FxAccountSpacer" />

        <TextView
            style="@style/FxAccountHeaderItem"
            android:text="@string/fxaccount_getting_started_welcome_to_sync" >
        </TextView>

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="30dp"
            android:layout_marginTop="30dp"
            android:contentDescription="@string/fxaccount_empty_contentDescription"
            android:src="@drawable/fxaccount_intro" >
        </ImageView>

        <TextView
            style="@style/FxAccountTextItem"
            android:text="@string/fxaccount_getting_started_description" >
        </TextView>

        <Button
            android:id="@+id/get_started_button"
            style="@style/FxAccountButton"
            android:text="@string/fxaccount_getting_started_get_started" />

        <TextView
            android:id="@+id/old_firefox"
            style="@style/FxAccountLinkifiedItem"
            android:text="@string/fxaccount_getting_started_old_firefox" />

        <LinearLayout style="@style/FxAccountSpacer" />

        <ImageView
            style="@style/FxAccountIcon"
            android:contentDescription="@string/fxaccount_empty_contentDescription" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_enabled="false" android:color="@color/fxaccount_link_textColor_inactive" />
  <item android:state_pressed="true" android:color="@color/fxaccount_link_textColor_pressed" />
  <item android:color="@color/fxaccount_link_textColor" />
</selector>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout style="@style/FxAccountMiddle" >

        <TextView
            style="@style/FxAccountHeaderItem"
            android:text="@string/fxaccount_migration_finished_header" >
        </TextView>

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="45dp"
            android:contentDescription="@string/fxaccount_empty_contentDescription"
            android:src="@drawable/fxaccount_checkbox" >
        </ImageView>

        <TextView
            style="@style/FxAccountTextItem"
            android:layout_marginBottom="40dp"
            android:text="@string/fxaccount_migration_finished_description"
            android:textSize="18sp" />

        <Button
            android:id="@+id/button"
            style="@style/FxAccountButton"
            android:text="@string/fxaccount_back_to_browsing" />

        <LinearLayout style="@style/FxAccountSpacer" />

        <ImageView
            style="@style/FxAccountIcon"
            android:contentDescription="@string/fxaccount_empty_contentDescription" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
  <PreferenceCategory
    android:title="@string/fxaccount_options_title" />
  <PreferenceScreen
    android:key="options"
    android:title="@string/fxaccount_options_configure_title">
    <intent
      android:action="android.intent.action.MAIN"
      android:targetPackage="@string/android_package_name_for_ui"
      android:targetClass="org.mozilla.gecko.fxa.activities.FxAccountStatusActivity">
    </intent>
  </PreferenceScreen>
</PreferenceScreen>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
  <solid
      android:color="@android:color/white" />
  <stroke
      android:width="@dimen/fxaccount_stroke_width"
      android:color="@color/fxaccount_input_borderActive" />
  <corners
      android:radius="@dimen/fxaccount_corner_radius"
      android:topLeftRadius="@dimen/fxaccount_corner_radius"
      android:topRightRadius="0dp"
      android:bottomLeftRadius="@dimen/fxaccount_corner_radius"
      android:bottomRightRadius="0dp" />
</shape>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item
      android:state_focused="false"
      android:drawable="@drawable/fxaccount_password_inactive" />
  <item
      android:drawable="@drawable/fxaccount_password_active" />
</selector>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
  <solid
      android:color="@color/fxaccount_password_hide_backgroundcolor" />
  <stroke
      android:width="@dimen/fxaccount_stroke_width"
      android:color="@color/fxaccount_input_borderActive" />
  <corners
      android:radius="@dimen/fxaccount_corner_radius"
      android:topLeftRadius="0dp"
      android:topRightRadius="@dimen/fxaccount_corner_radius"
      android:bottomLeftRadius="0dp"
      android:bottomRightRadius="@dimen/fxaccount_corner_radius" />
</shape>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item
      android:drawable="@drawable/fxaccount_password_button_hide_active" />
</selector>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
  <solid
      android:color="@color/fxaccount_password_show_backgroundcolor" />
  <stroke
      android:width="@dimen/fxaccount_stroke_width"
      android:color="@color/fxaccount_input_borderActive" />
  <corners
      android:radius="@dimen/fxaccount_corner_radius"
      android:topLeftRadius="0dp"
      android:topRightRadius="@dimen/fxaccount_corner_radius"
      android:bottomLeftRadius="0dp"
      android:bottomRightRadius="@dimen/fxaccount_corner_radius" />
</shape>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item
      android:drawable="@drawable/fxaccount_password_button_show_active" />
</selector>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
  <solid
      android:color="@android:color/white" />
  <stroke
      android:width="@dimen/fxaccount_stroke_width"
      android:color="@color/fxaccount_input_borderInactive" />
  <corners
      android:radius="@dimen/fxaccount_corner_radius"
      android:topLeftRadius="@dimen/fxaccount_corner_radius"
      android:topRightRadius="0dp"
      android:bottomLeftRadius="@dimen/fxaccount_corner_radius"
      android:bottomRightRadius="0dp" />
</shape>
<?xml version="1.0" encoding="utf-8"?>
<!--
/*
** Copyright 2010, The Android Open Source Project
**
** Licensed under the Apache License, Version 2.0 (the "License");
** you may not use this file except in compliance with the License.
** You may obtain a copy of the License at
**
**     http://www.apache.org/licenses/LICENSE-2.0
**
** Unless required by applicable law or agreed to in writing, software
** distributed under the License is distributed on an "AS IS" BASIS,
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
** See the License for the specific language governing permissions and
** limitations under the License.
*/
-->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:background="@android:color/transparent">

    <ListView android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="0px"
        android:layout_weight="1"
        android:paddingTop="0dip"
        android:paddingBottom="@dimen/preference_fragment_padding_bottom"
        android:paddingLeft="@dimen/preference_fragment_padding_side"
        android:paddingRight="@dimen/preference_fragment_padding_side"
        android:scrollbarStyle="@integer/preference_fragment_scrollbarStyle"
        android:clipToPadding="false"
        android:drawSelectorOnTop="false"
        android:cacheColorHint="@android:color/transparent"
        android:scrollbarAlwaysDrawVerticalTrack="true" />

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:id="@+id/sign_in_view"
        style="@style/FxAccountMiddle" >

        <LinearLayout style="@style/FxAccountSpacer" />

        <TextView
            style="@style/FxAccountHeaderItem"
            android:text="@string/fxaccount_sign_in_sub_header" />

        <include layout="@layout/fxaccount_custom_server_view" />

        <include layout="@layout/fxaccount_email_password_view" />

        <TextView
            android:id="@+id/remote_error"
            style="@style/FxAccountErrorItem" />

        <RelativeLayout style="@style/FxAccountButtonLayout" >

            <ProgressBar
                android:id="@+id/progress"
                style="@style/FxAccountProgress" />

            <Button
                android:id="@+id/button"
                style="@style/FxAccountButton"
                android:text="@string/fxaccount_sign_in_button_label" />
        </RelativeLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/forgot_password_link"
                style="@style/FxAccountLinkifiedItem"
                android:layout_gravity="left"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/fxaccount_sign_in_forgot_password" />

            <TextView
                android:id="@+id/create_account_link"
                style="@style/FxAccountLinkItem"
                android:layout_gravity="right"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/fxaccount_sign_in_create_account_instead" />
        </LinearLayout>

        <TextView
            android:id="@+id/policy"
            style="@style/FxAccountLinkifiedItem"
            android:layout_marginTop="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:text="@string/fxaccount_create_account_policy_text"
            android:textColorLink="@color/fxaccount_linkified_textColorLinkSubdued" />

        <LinearLayout style="@style/FxAccountSpacer" />

        <ImageView
            style="@style/FxAccountIcon"
            android:contentDescription="@string/fxaccount_empty_contentDescription" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/fxaccount_error_preference_backgroundcolor"
    android:gravity="center_vertical"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:paddingRight="?android:attr/scrollbarSize" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center"
        android:minWidth="0dp"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+android:id/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:minWidth="48dip"
            android:padding="10dip" />
    </LinearLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="6dip"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="6dip"
        android:layout_marginTop="6dip"
        android:layout_weight="1" >

        <TextView
            android:id="@+android:id/title"
            style="@style/FxAccountTextItem"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:gravity="center_vertical" >
        </TextView>
    </RelativeLayout>

    <!-- We ignore summary and widget_frame, but they still need to be present.  We set them to be gone. -->

    <TextView
        android:id="@+android:id/summary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:maxLines="4"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="?android:attr/textColorSecondary"
        android:visibility="gone" />

    <!-- Preference should place its actual preference widget here. -->

    <LinearLayout
        android:id="@+android:id/widget_frame"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center"
        android:orientation="vertical"
        android:visibility="gone" />

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
  <item
    android:id="@+id/remove_account"
    android:title="@string/fxaccount_remove_account_menu_item" />
</menu>
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    android:key="status_screen" >

    <PreferenceCategory
        android:key="signed_in_as_category"
        android:title="@string/fxaccount_status_signed_in_as" >
        <Preference
            android:editable="false"
            android:key="email"
            android:persistent="false"
            android:title="@string/fxaccount_email_hint" />
        <Preference
            android:editable="false"
            android:key="auth_server"
            android:persistent="false"
            android:title="@string/fxaccount_status_auth_server" />
    </PreferenceCategory>
    <PreferenceCategory
        android:key="sync_category"
        android:title="@string/fxaccount_status_sync" >
        <Preference
            android:editable="false"
            android:icon="@drawable/fxaccount_sync_error"
            android:key="needs_credentials"
            android:layout="@layout/fxaccount_status_error_preference"
            android:persistent="false"
            android:title="@string/fxaccount_status_needs_credentials" />
        <Preference
            android:editable="false"
            android:icon="@drawable/fxaccount_sync_error"
            android:key="needs_upgrade"
            android:layout="@layout/fxaccount_status_error_preference"
            android:persistent="false"
            android:title="@string/fxaccount_status_needs_upgrade" />
        <Preference
            android:editable="false"
            android:icon="@drawable/fxaccount_sync_error"
            android:key="needs_verification"
            android:layout="@layout/fxaccount_status_error_preference"
            android:persistent="false"
            android:title="@string/fxaccount_status_needs_verification" />
        <Preference
            android:editable="false"
            android:icon="@drawable/fxaccount_sync_error"
            android:key="needs_master_sync_automatically_enabled"
            android:layout="@layout/fxaccount_status_error_preference"
            android:persistent="false"
            android:title="@string/fxaccount_status_needs_master_sync_automatically_enabled" />
        <Preference
            android:editable="false"
            android:icon="@drawable/fxaccount_sync_error"
            android:key="needs_account_enabled"
            android:layout="@layout/fxaccount_status_error_preference"
            android:persistent="false"
            android:title="@string/fxaccount_status_needs_account_enabled" />
        <Preference
            android:editable="false"
            android:icon="@drawable/fxaccount_sync_error"
            android:key="needs_finish_migrating"
            android:layout="@layout/fxaccount_status_error_preference"
            android:persistent="false"
            android:title="@string/fxaccount_status_needs_finish_migrating" />

        <Preference
            android:editable="false"
            android:key="sync_now"
            android:defaultValue=""
            android:persistent="false"
            android:title="Sync now"
            android:summary="" />

        <CheckBoxPreference
            android:key="bookmarks"
            android:persistent="false"
            android:title="@string/fxaccount_status_bookmarks" />
        <CheckBoxPreference
            android:key="history"
            android:persistent="false"
            android:title="@string/fxaccount_status_history" />
        <CheckBoxPreference
            android:key="tabs"
            android:persistent="false"
            android:title="@string/fxaccount_status_tabs" />
        <CheckBoxPreference
            android:key="passwords"
            android:persistent="false"
            android:title="@string/fxaccount_status_passwords" />

        <EditTextPreference
            android:singleLine="true"
            android:key="device_name"
            android:persistent="false"
            android:title="@string/fxaccount_status_device_name" />

        <Preference
            android:editable="false"
            android:key="sync_server"
            android:persistent="false"
            android:title="@string/fxaccount_status_sync_server" />

        <Preference
            android:editable="false"
            android:key="more"
            android:persistent="false"
            android:title="@string/fxaccount_status_more" />

    </PreferenceCategory>
    <PreferenceCategory
        android:key="legal_category"
        android:title="@string/fxaccount_status_legal" >
        <Preference android:title="@string/fxaccount_status_linktos" >
            <intent
                android:action="android.intent.action.VIEW"
                android:data="@string/fxaccount_link_tos"
                android:targetClass="@string/browser_intent_class"
                android:targetPackage="@string/browser_intent_package" />
        </Preference>
        <Preference android:title="@string/fxaccount_status_linkprivacy" >
            <intent
                android:action="android.intent.action.VIEW"
                android:data="@string/fxaccount_link_pn"
                android:targetClass="@string/browser_intent_class"
                android:targetPackage="@string/browser_intent_package" />
        </Preference>
    </PreferenceCategory>
    <PreferenceCategory
        android:key="debug_category" >
        <Preference android:key="debug_refresh" />
        <Preference android:key="debug_dump" />
        <Preference android:key="debug_force_sync" />
        <Preference android:key="debug_forget_certificate" />
        <Preference android:key="debug_require_password" />
        <Preference android:key="debug_require_upgrade" />
        <Preference android:key="debug_migrated_from_sync11" />
    </PreferenceCategory>

</PreferenceScreen>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- FxAccountStatusActivity ActionBar -->
    <style name="ActionBar.FxAccountStatusActivity">
         <item name="android:displayOptions">showHome|homeAsUp|showTitle</item>
    </style>

    <style name="FxAccountTheme" parent="@style/Gecko" />

    <style name="FxAccountTheme.FxAccountStatusActivity" parent="@FxAccountTheme">
         <item name="android:windowActionBar">true</item>
         <item name="android:windowNoTitle">false</item>
         <item name="android:actionBarStyle">@style/ActionBar.FxAccountStatusActivity</item>
    </style>

</resources>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
    android:accountType="@string/moz_android_shared_fxaccount_type"
    android:contentAuthority="@string/content_authority_db_browser"
    android:isAlwaysSyncable="true"
    android:supportsUploading="true"
    android:userVisible="true"
/>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
  <solid
      android:color="@android:color/white" />
  <stroke
      android:width="@dimen/fxaccount_stroke_width"
      android:color="@color/fxaccount_input_borderActive" />
  <corners
      android:radius="@dimen/fxaccount_corner_radius" />
</shape>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item
      android:state_focused="false"
      android:drawable="@drawable/fxaccount_textfield_inactive" />
  <item
      android:drawable="@drawable/fxaccount_textfield_active" />
</selector>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
  <solid
      android:color="@android:color/white" />
  <stroke
      android:width="@dimen/fxaccount_stroke_width"
      android:color="@color/fxaccount_input_borderInactive" />
  <corners
      android:radius="@dimen/fxaccount_corner_radius" />
</shape>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle" >
  <solid android:color="@color/fxaccount_error" />
</shape>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:id="@+id/update_credentials_view"
        style="@style/FxAccountMiddle" >

        <LinearLayout style="@style/FxAccountSpacer" />

        <TextView
            style="@style/FxAccountHeaderItem"
            android:text="@string/fxaccount_update_credentials_header" />

        <include layout="@layout/fxaccount_custom_server_view" />

        <include layout="@layout/fxaccount_email_password_view" />

        <TextView
            android:id="@+id/remote_error"
            style="@style/FxAccountErrorItem" />

        <RelativeLayout style="@style/FxAccountButtonLayout" >

            <ProgressBar
                android:id="@+id/progress"
                style="@style/FxAccountProgress" />

            <Button
                android:id="@+id/button"
                style="@style/FxAccountButton"
                android:text="@string/fxaccount_update_credentials_button_label" />
        </RelativeLayout>

        <TextView
            android:id="@+id/forgot_password_link"
            style="@style/FxAccountLinkifiedItem"
            android:layout_marginTop="10dp"
            android:text="@string/fxaccount_sign_in_forgot_password" />

        <LinearLayout style="@style/FxAccountSpacer" />

        <ImageView
            style="@style/FxAccountIcon"
            android:contentDescription="@string/fxaccount_empty_contentDescription" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
	<identity>
		<version number="$Revision: 1.4 $"/>
		<generation date="$Date: 2008/12/08 18:18:44 $"/>
		<language type="ga"/>
	</identity>
    <rbnf>
        <rulesetGrouping type="DurationRules">
            <ruleset type="with-words">
                <rbnfrule value="0">=0= soicind;</rbnfrule>
                <rbnfrule value="60" radix="60">←%%min←[, →→];</rbnfrule>
                <rbnfrule value="3600" radix="60">←%%hr←[, →→→];</rbnfrule>
            </ruleset>
            <ruleset type="min" access="private">
                <rbnfrule value="0">=0= nÃ³imÃ©ad;</rbnfrule>
            </ruleset>
            <ruleset type="hr" access="private">
                <rbnfrule value="0">=0= uair;</rbnfrule>
                <rbnfrule value="3">=0= huaire;</rbnfrule>
                <rbnfrule value="5">=0= uaire;</rbnfrule>
                <rbnfrule value="6">=0= huaire;</rbnfrule>
                <rbnfrule value="7">=0= n-uaire;</rbnfrule>
                <rbnfrule value="10">=0= n-uair;</rbnfrule>
                <rbnfrule value="11">=0= →%%uaire→;</rbnfrule>
                <rbnfrule value="20">=0= uair; =0= →%%uaire→;</rbnfrule>
            </ruleset>
            <ruleset type="uaire" access="private">
                <rbnfrule value="1">uair;</rbnfrule>
                <rbnfrule value="3">huaire;</rbnfrule>
                <rbnfrule value="5">uaire;</rbnfrule>
                <rbnfrule value="6">huaire;</rbnfrule>
                <rbnfrule value="7">n-uaire;</rbnfrule>
            </ruleset>
            <ruleset type="hms">
                <rbnfrule value="0">:=00=;</rbnfrule>
                <rbnfrule value="60" radix="60">←00←→→→</rbnfrule>
                <rbnfrule value="3600" radix="60">←#,##0←→→→;</rbnfrule>
            </ruleset>
            <ruleset type="in-numerals">
                <rbnfrule value="0">=0= sec.;</rbnfrule>
                <rbnfrule value="60">=%%min-sec=;</rbnfrule>
                <rbnfrule value="3600">=%%hr-min-sec=;</rbnfrule>
            </ruleset>
            <ruleset type="min-sec" access="private">
                <rbnfrule value="0">:=00=;</rbnfrule>
                <rbnfrule value="60" radix="60">←0←→→;</rbnfrule>
            </ruleset>
            <ruleset type="hr-min-sec" access="private">
                <rbnfrule value="0">:=00=;</rbnfrule>
                <rbnfrule value="60" radix="60">←00←→→;</rbnfrule>
                <rbnfrule value="3600" radix="60">←#,##0←:→→→;</rbnfrule>
            </ruleset>
            <ruleset type="duration">
                <rbnfrule value="0">=%in-numerals=;</rbnfrule>
            </ruleset>
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp; ':' = '.' = ' ' = '-';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
    </rbnf>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/quit"
          android:icon="@drawable/ic_menu_quit"
          android:title="@string/quit"
          android:orderInCategory="10" />
</menu>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:gecko="http://schemas.android.com/apk/res-auto"
                android:id="@+id/root_layout"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:fitsSystemWindows="true">

    <ViewStub android:id="@+id/tabs_panel"
              android:layout="@layout/tabs_panel_view"
              android:layout_width="match_parent"
              android:layout_height="match_parent"/>

   <view class="org.mozilla.gecko.GeckoApp$MainLayout"
         android:id="@+id/main_layout"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:background="@android:color/transparent">

        <RelativeLayout android:id="@+id/gecko_layout"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:layout_below="@+id/new_tablet_tab_strip"
                        android:layout_above="@+id/find_in_page">

            <include layout="@layout/shared_ui_components"/>

            <FrameLayout android:id="@+id/home_pager_container"
                         android:layout_width="match_parent"
                         android:layout_height="match_parent"
                         android:visibility="gone">

                <ViewStub android:id="@+id/home_pager_stub"
                          android:layout="@layout/home_pager"
                          android:layout_width="match_parent"
                          android:layout_height="match_parent"/>

                <ViewStub android:id="@+id/home_banner_stub"
                          android:layout="@layout/home_banner"
                          android:layout_width="match_parent"
                          android:layout_height="@dimen/home_banner_height"
                          android:layout_gravity="bottom"/>

            </FrameLayout>

        </RelativeLayout>

        <org.mozilla.gecko.FindInPageBar android:id="@+id/find_in_page"
                                         android:layout_width="match_parent"
                                         android:layout_height="wrap_content"
                                         android:layout_alignParentBottom="true"
                                         style="@style/FindBar"
                                         android:visibility="gone"/>

        <org.mozilla.gecko.MediaCastingBar android:id="@+id/media_casting"
                                           android:layout_width="match_parent"
                                           android:layout_height="wrap_content"
                                           android:layout_alignParentBottom="true"
                                           style="@style/FindBar"
                                           android:visibility="gone"/>

        <FrameLayout android:id="@+id/search_container"
                     android:layout_width="match_parent"
                     android:layout_height="match_parent"
                     android:layout_below="@+id/browser_chrome"
                     android:background="@android:color/white"
                     android:visibility="invisible"/>

        <!-- When focus is cleared from from BrowserToolbar's EditText to
             lower the virtual keyboard, focus will be returned to the root
             view. To make sure the EditText is not the first focusable view in
             the root view, BrowserToolbar should be specified as low in the
             view hierarchy as possible. -->

        <LinearLayout android:id="@id/browser_chrome"
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:orientation="vertical">

            <ViewStub android:id="@+id/new_tablet_tab_strip"
                      android:inflatedId="@id/new_tablet_tab_strip"
                      android:layout="@layout/new_tablet_tab_strip"
                      android:layout_width="match_parent"
                      android:layout_height="@dimen/new_tablet_tab_strip_height"
                      android:visibility="gone"/>

            <org.mozilla.gecko.toolbar.ActionBarViewFlipper
                android:id="@+id/browser_actionbar"
                android:layout_width="match_parent"
                android:layout_height="@dimen/browser_toolbar_height"
                android:clickable="true"
                android:focusable="true">

                <org.mozilla.gecko.toolbar.BrowserToolbar
                    android:id="@+id/browser_toolbar"
                    style="@style/BrowserToolbar"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:clickable="true"
                    android:focusable="true"
                    android:background="@drawable/url_bar_bg"/>

                <org.mozilla.gecko.ActionModeCompatView android:id="@+id/actionbar"
                                                        android:layout_height="match_parent"
                                                        android:layout_width="match_parent"
                                                        style="@style/GeckoActionBar"/>

            </org.mozilla.gecko.toolbar.ActionBarViewFlipper>

        </LinearLayout>

        <org.mozilla.gecko.toolbar.ToolbarProgressView android:id="@+id/progress"
                                                       android:layout_width="match_parent"
                                                       android:layout_height="14dp"
                                                       android:layout_marginTop="-8dp"
                                                       android:layout_below="@id/browser_chrome"
                                                       android:src="@drawable/progress"
                                                       android:background="@null"
                                                       android:visibility="gone" />

    </view>

    <FrameLayout android:id="@+id/tab_history_panel"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
                 android:layout_alignParentBottom="true"
                 android:visibility="gone" />

    <ViewStub android:id="@+id/toast_stub"
              android:layout="@layout/button_toast"
              style="@style/Toast"/>

</RelativeLayout>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="generalBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="basecontrol">
    <implementation implements="nsIDOMXULControlElement">
      <!-- public implementation -->
      <property name="disabled" onset="if (val) this.setAttribute('disabled', 'true');
                                       else this.removeAttribute('disabled');
                                       return val;"
                                onget="return this.getAttribute('disabled') == 'true';"/>
      <property name="tabIndex" onget="return parseInt(this.getAttribute('tabindex')) || 0"
                                onset="if (val) this.setAttribute('tabindex', val);
                                       else this.removeAttribute('tabindex'); return val;"/>
    </implementation>
  </binding>

  <binding id="basetext" extends="chrome://global/content/bindings/general.xml#basecontrol">
    <implementation implements="nsIDOMXULLabeledControlElement">
      <!-- public implementation -->
      <property name="label"      onset="this.setAttribute('label',val); return val;"
                                  onget="return this.getAttribute('label');"/>
      <property name="crop"       onset="this.setAttribute('crop',val); return val;"
                                  onget="return this.getAttribute('crop');"/>
      <property name="image"      onset="this.setAttribute('image',val); return val;"
                                  onget="return this.getAttribute('image');"/>
      <property name="command"    onset="this.setAttribute('command',val); return val;"
                                  onget="return this.getAttribute('command');"/>
      <property name="accessKey">
        <getter>
          <![CDATA[
            return this.labelElement ? this.labelElement.accessKey : this.getAttribute('accesskey');
          ]]>
        </getter>
        <setter>
          <![CDATA[
            // Always store on the control
            this.setAttribute('accesskey', val);
            // If there is a label, change the accesskey on the labelElement
            // if it's also set there
            if (this.labelElement) {
              this.labelElement.accessKey = val;
            }
            return val;
          ]]>
        </setter>
      </property>

      <field name="labelElement"/>
    </implementation>      
  </binding>

  <binding id="control-item" extends="chrome://global/content/bindings/general.xml#basetext">
    <implementation>
      <property name="value"      onset="this.setAttribute('value', val); return val;"
                                  onget="return this.getAttribute('value');"/>
    </implementation>
  </binding>

  <binding id="root-element">
    <implementation>
      <field name="_lightweightTheme">null</field>
      <constructor><![CDATA[
        if (this.hasAttribute("lightweightthemes")) {
          let temp = {};
          Components.utils.import("resource://gre/modules/LightweightThemeConsumer.jsm", temp);
          this._lightweightTheme = new temp.LightweightThemeConsumer(this.ownerDocument);
        }
      ]]></constructor>
      <destructor><![CDATA[
        if (this._lightweightTheme) {
          this._lightweightTheme.destroy();
          this._lightweightTheme = null;
        }
      ]]></destructor>
    </implementation>
  </binding>

  <binding id="iframe" role="outerdoc">
    <implementation>
      <property name="docShell"
                readonly="true"
                onget="return this.boxObject.docShell"/>
      <property name="contentWindow"
                readonly="true"
                onget="return this.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIDOMWindow);"/>
      <property name="webNavigation"
                onget="return this.docShell.QueryInterface(Components.interfaces.nsIWebNavigation);"
                readonly="true"/>
      <property name="contentDocument" readonly="true"
                onget="return this.webNavigation.document;"/>
    </implementation>
  </binding>

  <binding id="statusbarpanel" display="xul:button">
    <content>
      <children>
        <xul:label class="statusbarpanel-text" xbl:inherits="value=label,crop" crop="right" flex="1"/>
      </children>
    </content>

    <implementation>
      <property name="label"
                onget="return this.getAttribute('label');"
                onset="this.setAttribute('label',val); return val;"/>
      <property name="image"
                onget="return this.getAttribute('image');"
                onset="this.setAttribute('image',val); return val;"/>
      <property name="src"
                onget="return this.getAttribute('src');"
                onset="this.setAttribute('src',val); return val;"/>
    </implementation>
  </binding>

  <binding id="statusbarpanel-menu-iconic" display="xul:menu"
           extends="chrome://global/content/bindings/general.xml#statusbarpanel">
    <content>
      <xul:image class="statusbarpanel-icon" xbl:inherits="src,src=image"/>
      <children/>
    </content>
  </binding>

  <binding id="statusbar" role="xul:statusbar">
    <content>
      <children/>
      <xul:statusbarpanel class="statusbar-resizerpanel">
        <xul:resizer dir="bottomend"/>
      </xul:statusbarpanel>
    </content>
  </binding>

  <binding id="statusbarpanel-iconic" display="xul:button" role="xul:button"
           extends="chrome://global/content/bindings/general.xml#statusbarpanel">
    <content>
      <xul:image class="statusbarpanel-icon" xbl:inherits="src,src=image"/>
    </content>
  </binding>

  <binding id="statusbarpanel-iconic-text" display="xul:button" role="xul:button"
           extends="chrome://global/content/bindings/general.xml#statusbarpanel">
    <content>
      <xul:image class="statusbarpanel-icon" xbl:inherits="src,src=image"/>
      <xul:label class="statusbarpanel-text" xbl:inherits="value=label,crop"/>
    </content>
  </binding>

  <binding id="image" role="xul:image">
    <implementation implements="nsIDOMXULImageElement">
      <property name="src"
                onget="return this.getAttribute('src');"
                onset="this.setAttribute('src',val); return val;"/>
    </implementation>
  </binding>

  <binding id="deck">
    <implementation>
      <property name="selectedIndex"
                onget="return this.getAttribute('selectedIndex') || '0'">
        <setter>
        <![CDATA[
          if (this.selectedIndex == val)
            return val;
          this.setAttribute("selectedIndex", val);
          var event = document.createEvent('Events');
          event.initEvent('select', true, true);
          this.dispatchEvent(event);
          return val;
        ]]>
        </setter>
      </property>

      <property name="selectedPanel">
        <getter>
          <![CDATA[
            return this.childNodes[this.selectedIndex];
          ]]>
        </getter>

        <setter>
          <![CDATA[
            var selectedIndex = -1;
            for (var panel = val; panel != null; panel = panel.previousSibling)
              ++selectedIndex;
            this.selectedIndex = selectedIndex;
            return val;
          ]]>
        </setter>
      </property>
    </implementation>
  </binding>

  <binding id="dropmarker" extends="xul:button" role="xul:dropmarker">
    <resources>
      <stylesheet src="chrome://global/skin/dropmarker.css"/>
    </resources>

    <content>
      <xul:image class="dropmarker-icon"/>
    </content>
  </binding>

  <binding id="windowdragbox">
    <implementation>
      <field name="_dragBindingAlive">true</field>
      <constructor>
        if (!this._draggableStarted) {
          this._draggableStarted = true;
          try {
            let tmp = {};
            Components.utils.import("resource://gre/modules/WindowDraggingUtils.jsm", tmp);
            let draghandle = new tmp.WindowDraggingElement(this);
            draghandle.mouseDownCheck = function () this._dragBindingAlive;
          } catch (e) {}
        }
      </constructor>
    </implementation>
  </binding>

</bindings>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:g="http://www.w3.org/2000/svg">
 <head>
  <title>document.getElementsByClassName(): compound</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
 </head>
 <body>
  <div id="log"/>
  <x class="a"/>
  <g:x class="a"/>
  <script>test(function() {
                 assert_array_equals(document.getElementsByClassName("a"),
                                     document.getElementsByTagName("x"));
               })
  </script>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:g="http://www.w3.org/2000/svg" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:t="http://tc.labs.opera.com/#test">
 <head>
  <title>document.getElementsByClassName(): "tricky" compound</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
 </head>
 <body>
  <div id="log" />
  <x class="a"/>
  <g:x class="a"/>
  <x t:class="a" h:class="a" g:class="a"/>
  <g:x t:class="a" h:class="a" g:class="a"/>
  <t:x class="a" t:class="a" h:class="a" g:class="a"/>
  <script>
   test(function() {
          var collection = document.getElementsByClassName("a");
          var test = document.getElementsByTagName("x");
          assert_array_equals(collection, [test[0], test[1]]);
         })
  </script>
 </body>
</html>
<?xml version="1.0" encoding="UTF-8"?>

<!--
  This XML file describes the encryption applied to |gizmo-frag-cenc*|. To
  generate the gizmo-frag-cenc files, run the following commands:

  Encrypt gizmo.mp4 with the keys specified in this file, and output to |gizmo-cenc.mp4|
    MP4Box -crypt gizmo-frag-cenc.xml -out gizmo-cenc.mp4 gizmo.mp4

  Fragment |gizmo-cenc.mp4| into 1000ms segments:
    MP4Box -dash 1000 -rap -segment-name gizmo-frag-cenc -subsegs-per-sidx 5 -rem 2 gizmo-cenc.mp4

  The above command will generate a set of fragments in |gizmo-frag-cenc*.m4s|
  and a single |gizmo-frag-cencinit.mp4| containing just the init segment.
  
  To cut down the duration, we throw out all but the first two segments:
    rm gizmo-frag-cenc[^12].m4s
-->

<GPACDRM type="CENC AES-CTR">

  <DRMInfo type="pssh" version="1">
    <!--
    SystemID specified in
    https://dvcs.w3.org/hg/html-media/raw-file/tip/encrypted-media/cenc-format.html
    -->
    <BS ID128="1077efecc0b24d02ace33c1e52e2fb4b" />
    <!-- Number of KeyIDs = 2 -->
    <BS bits="32" value="2" />
    <!-- KeyID -->
    <BS ID128="0x7e571d037e571d037e571d037e571d03" />
    <BS ID128="0x7e571d047e571d047e571d047e571d04" />
  </DRMInfo>

  <CrypTrack trackID="1" isEncrypted="1" IV_size="16" saiSavedBox="senc"
    first_IV="0x00000000000000000000000000000000">
    <key KID="0x7e571d037e571d037e571d037e571d03"
      value="0x7e5733337e5733337e5733337e573333" />
  </CrypTrack>

  <CrypTrack trackID="2" isEncrypted="1" IV_size="16" saiSavedBox="senc"
    first_IV="0x00000000000000000000000000000000">
    <key KID="0x7e571d047e571d047e571d047e571d04"
      value="0x7e5744447e5744447e5744447e574444" />
  </CrypTrack>

</GPACDRM>

<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="globalBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="radio"
           extends="chrome://global/content/bindings/radio.xml#radio">
    <content>
      <xul:hbox class="radio-check-box1" xbl:inherits="selected,checked,disabled">
        <xul:hbox class="radio-check-box2" flex="1">
          <xul:image class="radio-check" xbl:inherits="selected,checked,disabled"/>
        </xul:hbox>
      </xul:hbox>
      <xul:hbox class="radio-label-box" align="center" flex="1">
        <xul:image class="radio-icon" xbl:inherits="src"/>
        <xul:label class="radio-label" xbl:inherits="xbl:text=label,accesskey,crop" flex="1"/>
      </xul:hbox>
    </content>
  </binding>

  <binding id="radio-with-spacing"
           extends="chrome://global/skin/globalBindings.xml#radio">
    <content>
      <xul:hbox class="radio-spacer-box">
        <xul:hbox class="radio-check-box1" xbl:inherits="selected,checked,disabled">
          <xul:hbox class="radio-check-box2" flex="1">
            <xul:image class="radio-check" xbl:inherits="selected,checked,disabled"/>
          </xul:hbox>
        </xul:hbox>
      </xul:hbox>
      <xul:hbox class="radio-label-center-box" flex="1">
        <xul:hbox class="radio-label-box" flex="1">
          <xul:image class="radio-icon" xbl:inherits="src"/>
          <xul:label class="radio-label" xbl:inherits="xbl:text=label,accesskey,crop" flex="1"/>
        </xul:hbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="toolbarpaletteitem-spacer"
           extends="chrome://global/content/bindings/toolbar.xml#toolbarpaletteitem">
    <content>
      <xul:spacer class="spacer-left"/>
      <children/>
      <xul:spacer class="spacer-right"/>
    </content>
  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.22 $"/>
		<generation date="$Date: 2008/05/25 01:05:52 $"/>
		<language type="gl"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Google</ShortName>
<Description>Google Search</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAAAAAB9AQAAJgAAACAgAAAAAAAA8gIAAKMBAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIBgAAAB/z/2EAAAFESURBVDjLpZNJSwNBEIXnt4lE4kHxovgT9BDwJHqPy0HEEOJBiAuCRg+KUdC4QS4KrpC4gCBGE3NQ48JsnZ6eZ3UOM6gjaePhQU93v6+qq2q0pqgeJj2S8EdJT1hr0OxBtKCD5iEd8QxDYpvhvOBAuMDKURX9C9aPu4GA1GEVkzvMg10UBfYveWAWgYAP00V01fa+R9M2bA51wJvhIn3qR+ybt3D3JNQBE5sMjCIOLFpoHzOwdsLRO22qA6R6kiZiWwxUvy/PUQZIhYZ1vFM9cvcOOsYNdcBgysISdSJBnZjJMlR0Fw8vAp0xoz5gao/h+NZBy4i/10XGwrPA+hmvDyhVRG2Avu/LwcrkFADZa16L1h330w1RNgc3DiJzCpPYRm1bpveXX11clQR28xwblHpk1vq1iP/5mcoS0CoXDZiL0vsJ+dzfl+3T/VYAAAAASUVORK5CYIKJUE5HDQoaCgAAAA1JSERSAAAAIAAAACAIBgAAAHN6evQAAAK5SURBVFjDxVfrSxRRFJ9/Jta/oyWjF5XQm6D6EkHRgygIIgjUTcueVgqVWSRRkppEUQYWWB8ye1iGWilWlo/Ude489s7M6Zw7D9dlt53dmd29cFiWvXvO77x+51xpaaUsoSxBaUWZQ4ECy5xji2xKZDyCMlMEw6lCNiOSgwZKJK1SkcKeSealfP64t0mBjl4Ow39MkDUL0p2RSROOtqhZdeUEYM1pBl39XCg/fEeFtWcY7G9W4csvUxjlBkCsQ4Nt9QyWVfvT6RsAKXw3aoDGATZeYIt+W1kjw7cJG0RctWDTRebbKd8A6h5pwsDb70ba3w/eUr3wt/cmwgfw6Yft4TNMQaY7o1P2ncm4FT4ANQH/jQBJ2xv7kqIXEADDql8eS3+n8bku7oxNm+EDIM/dU92upb3T/NJGeaNbDx/AsbsLRUY5Xn92caWXY5d8RV6gWllxSg4fAEnTC90DQW13BLlgXR2D3dcUeDVkwOthA1bXspxILWcm3HdThcfvufB26LcJpkOEAz9NKI/lzqpSEC7feol5EWnpSeSlIxCALUkApmULdjUqxQVAQnl3D/X/yQda4QBEq2TYc12By091MQ17Bg3R88nHKlQbVmHvj89awNBLYrwT9zXY2aBAxTkGFdiSxP/Jp6FLDw+AS7GfsdJTJ2EqSO5khD43nGfBARy/ZxOQgZHe7GPM1jzUvChUtmnBAXQPcKGMJp3fdFGq6NByEhiAO4b/YptFfQJwNyQ/bZkVQGcf90Ja25ndIyrKBOa/f8wIpwi3X1G8UcxNu7ozUS7tiH0jBswwS3RIaF1w6LYKU/ML2+8sGnjygQswtKrVIy/Qd9qQP6LnO64q4fPAKpxyZIymHo1jWk6p1ag2BsdNwQMHcC+M5kHFJX+YlPxpVlbCx2mZ5DzPI04k4kUwHHdskU3pH76iftG8yWlkAAAAAElFTkSuQmCC</Image>
<Image width="74" height="74">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABKCAYAAAAc0MJxAAAAA3NCSVQICAjb4U/gAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAv/SURBVHhe7VwJjBTHFf093XPusrssLJcNhMscWgLEhlgGG1sCB0wcxyBHIsIJVhykHEKgRCJICRFS5ChyrCAnIcg5UOxISGDF8kEc7CQgO9rEDtbG2MYxRzjE2lwB9pydmZ7u/Ffd08dM99IL3bsLmidmp6equvrXm/9//fpVg7T0x5d08gJKJePSeDM/WHA08AXX+zbx7lVA6qtfZ12ZDHxZeWdffZXg7sMNibSiSoKoGGlmIRDjFwsAGfjSfLP+2kAbLrOK7ZaAVFEPOKXga+OfCUddBVGSXetRZ4EvHS1NmJ+t4vL6sntc1Sw8fy7ks85hOFvg2vnqH0BZJZylINFZ4qjTne0A3a71qLPAl46WJszPVnF5fdk9rmp84Jf5TNf3XYU/qkQFRJWogKgSFRBVogKiSlRAVIkKCEfAiXgJMYPJnXlpvDnKLXCZT8Bp3eMbkBp1pWqdYxVNl6jIYqhFYmk4GkYT3CIQPOCMcX1cJkrF+R7JfKb1aOvCAuKoWKnMVW1/KBR6B48oneuK/J7PcykX16VjdGujRFNH412mhhqihCxRQjFv8YVNVJzbpuJEh07rtOutImk8LEnizq1HO2UwMKSJUlldenISjRwm0QNzFVrSHKfJTVbDa0auQLT9ryq9+p5O8RgTILrkP9ajbRlKGJJEQYt68jrVpojW3Zeih27nr99E2yWNPvpEE2YzdYxMYxtsTSmHxjZ5htfyaWFe/Ah+xiutRXq2hXVUkyidgCY5xmOJZstYwpAjCn6os1eiu6crtHVV2jKpliMqa0Gejp/TSea2uBf+qXm8TN/7fIKmjLIe4MK2fQX69QGVhqV4mCx6kjkHQbKhRiZMmcw3x4WFIUWUICmr0+qFKfrWkqRoA+x8I0c7mKT6tEQKs2QoAYvOfiWvsnkWdNr6cJKWNns7ql3/ZJL/UmT/Buklfpxj0AKmTJZotowlBCXKfVcEwOM6e4kenp9wkdR6UqUdf8tTYy3PUsyDczLDdZLNqi4l0ZY/5uidk/giK7H6ToVWzJWpO2cWRIjIicqzVsy6JUbfeYC/dge27cuz2UhiOveDzDYFsjbvZibsWMGFTStkGl4jiQkiSkRKFETPqUTf/6KbpPYejU5d1NjczII+AL+FPp76M09pHoDTfnwxaxWHGVEiUqJy7GcWz1Rowgg3IyeZJCiAK7PoAyhchs1wL89qOdZOLyxpjgntRNwUFSIjCpaS5VBg9Z08FZWhi32WjyV5AmSB2JeYLC8kFYlmjoP5mQURIDKiMLBRdTGaeUulffXhlrzB7ZPs8F/9tzdRwMSRxhIoKkRGFISeMCImHHI56tllxcQ6LDhk5vs0B6UwZy808ewZpT+PVKMaWHgvjG9kAnkdhxgmKODPiqxQR8563xMhRwKROvO4hzYBdZkY1ST7pwHoqcjtsdTxwsVOTUToUSEyoiBzZ68/E4tukzn6Nj8EAXcIIi51e/d58qIRSkSFyLqG0J9c9icKWQOVVaQ/sx/g1R5B7eGPkTEwCyJApESduKDS+XZvU5l9q0Jj6mPBI2puJvxeptK+XuLZsCenE1JPUSGyrhECKOyw9/zLP2TeuDxJXbxYDqJVaALTu22MW2TEar85oLHPMwsiQoTfAYl80QtMVDcPxgsLpym0YKrCg736rAUzbaqTaFoZUd/dVaAC18n9Ds76h0iJggYgnvrBnh6zpBLb1qSpgRe1WTYdP83C0uQKa97WVe4of/PuPH3Qpov8eNSIlCggxWN765hKP9/nnwt5YUOGpoyW6H9dCCgNcovskJCT6sgS9bKz/uVXUjRrnC3ut5/N0z+OweSMLGfUGLDEXTtrxLLZSdqyMiXaeOHvR1R6/m2Vjp7TBFkITO+ZKdOjd9kp4w7u56vP5EV/aS4WmweAeFx0ibsBTQX35CWRjdy0IkWLZtiDDwrEXQ/+rFeYYoIXwtZ2FCAedxMQhVKxRcUm1cPOu5ZN5nNz4rRgkkwTm5AmQRuJzrbrYmbzMqcNf8jRoTM6ZRKlSodc4nE3CVFWPWuXxnU5nq00bHiiip+PNEl9Wqd9m2pFOzd0mr8lS6PqZQeJdp/G46Ijyn3XAAED5RCL0qwZ2LqCOdalJbF5+chnK/NXJQyE0/bDoBDlBFK5IAAvhAfIf3tDohVzFOrg9SM0cqAx6EQ5gS25s1fgBrzxw5UJmjdB4hkPpA4sWUOKKJHFfLfvlMLTjyZp7d0Kx1xGvDVQGDJEQUGMNArRa4f6JuvxxQr9am1ChAsISgdCuQaFKAwMyoBQAVE3Nhu6eAmDsAFnDzbtzrHG9D36eRNj9Pz6pFgMo4+ouRrQgBMTcYE1IM8hgcLqMywj0dwJMk3nuGnCyBiN4kVvIzvz2nSMEjLOIvg5dhs4sLH2mQK1XeY1H5N2Q8dRGmtOVuxfSqwJMn3hdg40JyscGlydiGDQac2OAp3twLLGEohhymSJZstYwpAgCpE4gkqY2soFCVq7KEnDOF5yojevU8vRIr17WqMzlzRq41kPp166OAxAMg4JwK/fm6Cv3dv3kudKt05fZrIwDjslbMpkiWbLWMKgEyUxO1084NmsQU98KVORmXznhEo738zTwf9qbIY6xRVsbRmBqMRxgtjO4uAKJtuZlWjGWEnMeBle+vjhtfeL9KMXcbqllFEwZbJEs2UsIShR7rvCAgbHGgEt2r62xkUSZqkNz/XQN3Zm6cOPNfZJvGzheqzfsOPLfAnCRCDK7eGmMPCTF3V6aFuv0Dw/3N/M60axEYpBhovQiYIGdOWIVs1P0sbl7pRKN5vSI093U+upIo2oZYctMgD+GmKBmyA5B2375u/z9Eqrf/iweLokclphI3SiENvMGCfTxrJjPsCG57LU3qOLKT0APRWAtkH7nnhZpZd9yLpjEs+s/jvv14xQiYLTzrPz3vxgJUkH2ScdbiuK44PXA5hiQ4boyT+pdOx8pRmOwdlPlgOyhIlQiUKS/9PjFZoyuvJgxv4PCiKYDGRqV0GM2cJy58m9lVqF9aLrGGdICLVLmB3OQ3kBZ6KCHBwLCpB+gh18eQTfzVE+1oAhfB8uhK5RzaxRXoDgYVoDNBNR/rl2d69HziLcMD+EiFC7hF/AmUsvTBopi9MoYQLkl69y3vxIC/Brh/4jVKIgtN9i9r5mhQoc34SVR0I/cY4XxtTbTGGH5uAJlJsFISJUouIcF7We8p62PzNRoVnjFF7pmwXXCYQAk5sksXlawm/fKIoFN5x92AiVKKj8/sP+TPxkdUr8wgC/WbkevcIiG4Svv9+2scNtGr3YWnTs0ISLUIlC6uT4uSK9/r73wYzGmhjtXFdDjRyVY4mDAfeHMTTFhHElS7RxmUIzzZ3jKxzEbt6tipAh7NmuhFCJgpDY4v7p3iyd7/Bek41tiNGe9TW0ZqGRDcCOLzQMhzCQWyrnDS4N0z2OTiNXjv3Ap1YnaOUdhjbBJ677XUEcBAkz/ChHJNkDHEht4IXs9sdqOVIuv88GMpP7D6u0/0OVTnNMdKFDFwOOmREjSMLgm+piPGtKtGy2Qktno85Qm5ZjyBaoHCYYR6hvyA1QlcnCgHEGavmcq69bsOLHb1qQh8ILm6Fp1p7hTHiG14ZYQJdwoVOnX7xeoAP/0USiTmiSEOcGJAr3FDWJetiscKbpsXuS4idoJW24Frx3RhOHOFqOauLg6011SEOXdDGVwxyHZ2Sa9ymF7pomi/UgcuTYJa4kT6fL3WyKnUTHeeH79nGNDp3WhD/CsWvMnMaPjRxyicfdwESV6hEg4gfW8CfIMMTlmDg7Bd/iTNRhIlRZE5Hg6+W2+DE2zC7B5oXwCNlPG/YzjcdFR5T7rggBBcCuSorjHPzAB4k4OGuxXZUzfviIyLqb/VMp8QbTgsbht3u4F0QOFgaMKCdAGgYt8eBBABaxOBiLl8ib8wvRdRgpmbAwKETdiKgSFRBVogKiSlRAVIkKiCpRAeEgCgFWCbh2vvoH70ndWWrEB3aJo64iJHDETx51FviyMtIyP1vF5fVl97iq8YFf5jNFZC6uyoFS80azqfhrw9HAF1zv28S7V4E+4ydnXZkMfFl5Z199leDuww38h6Uq/R+mjexaMP/pdwAAAABJRU5ErkJggg==</Image>
<Url type="application/x-suggestions+json" method="GET" template="https://www.google.com/complete/search?client=metrofirefox&amp;q={searchTerms}"/>
<Url type="text/html" method="GET" template="https://www.google.com/search">
  <Param name="q" value="{searchTerms}"/>
  <Param name="ie" value="utf-8"/>
  <Param name="oe" value="utf-8"/>
  <Param name="client" value="metrofirefox"/>
</Url>
<SearchForm>https://www.google.com/</SearchForm>
</SearchPlugin>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Google</ShortName>
<Description>Google Search</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAAAAAB9AQAAJgAAACAgAAAAAAAA8gIAAKMBAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIBgAAAB/z/2EAAAFESURBVDjLpZNJSwNBEIXnt4lE4kHxovgT9BDwJHqPy0HEEOJBiAuCRg+KUdC4QS4KrpC4gCBGE3NQ48JsnZ6eZ3UOM6gjaePhQU93v6+qq2q0pqgeJj2S8EdJT1hr0OxBtKCD5iEd8QxDYpvhvOBAuMDKURX9C9aPu4GA1GEVkzvMg10UBfYveWAWgYAP00V01fa+R9M2bA51wJvhIn3qR+ybt3D3JNQBE5sMjCIOLFpoHzOwdsLRO22qA6R6kiZiWwxUvy/PUQZIhYZ1vFM9cvcOOsYNdcBgysISdSJBnZjJMlR0Fw8vAp0xoz5gao/h+NZBy4i/10XGwrPA+hmvDyhVRG2Avu/LwcrkFADZa16L1h330w1RNgc3DiJzCpPYRm1bpveXX11clQR28xwblHpk1vq1iP/5mcoS0CoXDZiL0vsJ+dzfl+3T/VYAAAAASUVORK5CYIKJUE5HDQoaCgAAAA1JSERSAAAAIAAAACAIBgAAAHN6evQAAAK5SURBVFjDxVfrSxRRFJ9/Jta/oyWjF5XQm6D6EkHRgygIIgjUTcueVgqVWSRRkppEUQYWWB8ye1iGWilWlo/Ude489s7M6Zw7D9dlt53dmd29cFiWvXvO77x+51xpaaUsoSxBaUWZQ4ECy5xji2xKZDyCMlMEw6lCNiOSgwZKJK1SkcKeSealfP64t0mBjl4Ow39MkDUL0p2RSROOtqhZdeUEYM1pBl39XCg/fEeFtWcY7G9W4csvUxjlBkCsQ4Nt9QyWVfvT6RsAKXw3aoDGATZeYIt+W1kjw7cJG0RctWDTRebbKd8A6h5pwsDb70ba3w/eUr3wt/cmwgfw6Yft4TNMQaY7o1P2ncm4FT4ANQH/jQBJ2xv7kqIXEADDql8eS3+n8bku7oxNm+EDIM/dU92upb3T/NJGeaNbDx/AsbsLRUY5Xn92caWXY5d8RV6gWllxSg4fAEnTC90DQW13BLlgXR2D3dcUeDVkwOthA1bXspxILWcm3HdThcfvufB26LcJpkOEAz9NKI/lzqpSEC7feol5EWnpSeSlIxCALUkApmULdjUqxQVAQnl3D/X/yQda4QBEq2TYc12By091MQ17Bg3R88nHKlQbVmHvj89awNBLYrwT9zXY2aBAxTkGFdiSxP/Jp6FLDw+AS7GfsdJTJ2EqSO5khD43nGfBARy/ZxOQgZHe7GPM1jzUvChUtmnBAXQPcKGMJp3fdFGq6NByEhiAO4b/YptFfQJwNyQ/bZkVQGcf90Ja25ndIyrKBOa/f8wIpwi3X1G8UcxNu7ozUS7tiH0jBswwS3RIaF1w6LYKU/ML2+8sGnjygQswtKrVIy/Qd9qQP6LnO64q4fPAKpxyZIymHo1jWk6p1ag2BsdNwQMHcC+M5kHFJX+YlPxpVlbCx2mZ5DzPI04k4kUwHHdskU3pH76iftG8yWlkAAAAAElFTkSuQmCC</Image>
<Image width="65" height="26">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAYAAADovjFxAAAKQWlDQ1BJQ0MgUHJvZmlsZQAASA2dlndUU9kWh8+9N73QEiIgJfQaegkg0jtIFQRRiUmAUAKGhCZ2RAVGFBEpVmRUwAFHhyJjRRQLg4Ji1wnyEFDGwVFEReXdjGsJ7601896a/cdZ39nnt9fZZ+9917oAUPyCBMJ0WAGANKFYFO7rwVwSE8vE9wIYEAEOWAHA4WZmBEf4RALU/L09mZmoSMaz9u4ugGS72yy/UCZz1v9/kSI3QyQGAApF1TY8fiYX5QKUU7PFGTL/BMr0lSkyhjEyFqEJoqwi48SvbPan5iu7yZiXJuShGlnOGbw0noy7UN6aJeGjjAShXJgl4GejfAdlvVRJmgDl9yjT0/icTAAwFJlfzOcmoWyJMkUUGe6J8gIACJTEObxyDov5OWieAHimZ+SKBIlJYqYR15hp5ejIZvrxs1P5YjErlMNN4Yh4TM/0tAyOMBeAr2+WRQElWW2ZaJHtrRzt7VnW5mj5v9nfHn5T/T3IevtV8Sbsz55BjJ5Z32zsrC+9FgD2JFqbHbO+lVUAtG0GQOXhrE/vIADyBQC03pzzHoZsXpLE4gwnC4vs7GxzAZ9rLivoN/ufgm/Kv4Y595nL7vtWO6YXP4EjSRUzZUXlpqemS0TMzAwOl89k/fcQ/+PAOWnNycMsnJ/AF/GF6FVR6JQJhIlou4U8gViQLmQKhH/V4X8YNicHGX6daxRodV8AfYU5ULhJB8hvPQBDIwMkbj96An3rWxAxCsi+vGitka9zjzJ6/uf6Hwtcim7hTEEiU+b2DI9kciWiLBmj34RswQISkAd0oAo0gS4wAixgDRyAM3AD3iAAhIBIEAOWAy5IAmlABLJBPtgACkEx2AF2g2pwANSBetAEToI2cAZcBFfADXALDIBHQAqGwUswAd6BaQiC8BAVokGqkBakD5lC1hAbWgh5Q0FQOBQDxUOJkBCSQPnQJqgYKoOqoUNQPfQjdBq6CF2D+qAH0CA0Bv0BfYQRmALTYQ3YALaA2bA7HAhHwsvgRHgVnAcXwNvhSrgWPg63whfhG/AALIVfwpMIQMgIA9FGWAgb8URCkFgkAREha5EipAKpRZqQDqQbuY1IkXHkAwaHoWGYGBbGGeOHWYzhYlZh1mJKMNWYY5hWTBfmNmYQM4H5gqVi1bGmWCesP3YJNhGbjS3EVmCPYFuwl7ED2GHsOxwOx8AZ4hxwfrgYXDJuNa4Etw/XjLuA68MN4SbxeLwq3hTvgg/Bc/BifCG+Cn8cfx7fjx/GvyeQCVoEa4IPIZYgJGwkVBAaCOcI/YQRwjRRgahPdCKGEHnEXGIpsY7YQbxJHCZOkxRJhiQXUiQpmbSBVElqIl0mPSa9IZPJOmRHchhZQF5PriSfIF8lD5I/UJQoJhRPShxFQtlOOUq5QHlAeUOlUg2obtRYqpi6nVpPvUR9Sn0vR5Mzl/OX48mtk6uRa5Xrl3slT5TXl3eXXy6fJ18hf0r+pvy4AlHBQMFTgaOwVqFG4bTCPYVJRZqilWKIYppiiWKD4jXFUSW8koGStxJPqUDpsNIlpSEaQtOledK4tE20Otpl2jAdRzek+9OT6cX0H+i99AllJWVb5SjlHOUa5bPKUgbCMGD4M1IZpYyTjLuMj/M05rnP48/bNq9pXv+8KZX5Km4qfJUilWaVAZWPqkxVb9UU1Z2qbapP1DBqJmphatlq+9Uuq43Pp893ns+dXzT/5PyH6rC6iXq4+mr1w+o96pMamhq+GhkaVRqXNMY1GZpumsma5ZrnNMe0aFoLtQRa5VrntV4wlZnuzFRmJbOLOaGtru2nLdE+pN2rPa1jqLNYZ6NOs84TXZIuWzdBt1y3U3dCT0svWC9fr1HvoT5Rn62fpL9Hv1t/ysDQINpgi0GbwaihiqG/YZ5ho+FjI6qRq9Eqo1qjO8Y4Y7ZxivE+41smsImdSZJJjclNU9jU3lRgus+0zwxr5mgmNKs1u8eisNxZWaxG1qA5wzzIfKN5m/krCz2LWIudFt0WXyztLFMt6ywfWSlZBVhttOqw+sPaxJprXWN9x4Zq42Ozzqbd5rWtqS3fdr/tfTuaXbDdFrtOu8/2DvYi+yb7MQc9h3iHvQ732HR2KLuEfdUR6+jhuM7xjOMHJ3snsdNJp9+dWc4pzg3OowsMF/AX1C0YctFx4bgccpEuZC6MX3hwodRV25XjWuv6zE3Xjed2xG3E3dg92f24+ysPSw+RR4vHlKeT5xrPC16Il69XkVevt5L3Yu9q76c+Oj6JPo0+E752vqt9L/hh/QL9dvrd89fw5/rX+08EOASsCegKpARGBFYHPgsyCRIFdQTDwQHBu4IfL9JfJFzUFgJC/EN2hTwJNQxdFfpzGC4sNKwm7Hm4VXh+eHcELWJFREPEu0iPyNLIR4uNFksWd0bJR8VF1UdNRXtFl0VLl1gsWbPkRoxajCCmPRYfGxV7JHZyqffS3UuH4+ziCuPuLjNclrPs2nK15anLz66QX8FZcSoeGx8d3xD/iRPCqeVMrvRfuXflBNeTu4f7kufGK+eN8V34ZfyRBJeEsoTRRJfEXYljSa5JFUnjAk9BteB1sl/ygeSplJCUoykzqdGpzWmEtPi000IlYYqwK10zPSe9L8M0ozBDuspp1e5VE6JA0ZFMKHNZZruYjv5M9UiMJJslg1kLs2qy3mdHZZ/KUcwR5vTkmuRuyx3J88n7fjVmNXd1Z752/ob8wTXuaw6thdauXNu5Tnddwbrh9b7rj20gbUjZ8MtGy41lG99uit7UUaBRsL5gaLPv5sZCuUJR4b0tzlsObMVsFWzt3WazrWrblyJe0fViy+KK4k8l3JLr31l9V/ndzPaE7b2l9qX7d+B2CHfc3em681iZYlle2dCu4F2t5czyovK3u1fsvlZhW3FgD2mPZI+0MqiyvUqvakfVp+qk6oEaj5rmvep7t+2d2sfb17/fbX/TAY0DxQc+HhQcvH/I91BrrUFtxWHc4azDz+ui6rq/Z39ff0TtSPGRz0eFR6XHwo911TvU1zeoN5Q2wo2SxrHjccdv/eD1Q3sTq+lQM6O5+AQ4ITnx4sf4H++eDDzZeYp9qukn/Z/2ttBailqh1tzWibakNml7THvf6YDTnR3OHS0/m/989Iz2mZqzymdLz5HOFZybOZ93fvJCxoXxi4kXhzpXdD66tOTSna6wrt7LgZevXvG5cqnbvfv8VZerZ645XTt9nX297Yb9jdYeu56WX+x+aem172296XCz/ZbjrY6+BX3n+l37L972un3ljv+dGwOLBvruLr57/17cPel93v3RB6kPXj/Mejj9aP1j7OOiJwpPKp6qP6391fjXZqm99Oyg12DPs4hnj4a4Qy//lfmvT8MFz6nPK0a0RupHrUfPjPmM3Xqx9MXwy4yX0+OFvyn+tveV0auffnf7vWdiycTwa9HrmT9K3qi+OfrW9m3nZOjk03dp76anit6rvj/2gf2h+2P0x5Hp7E/4T5WfjT93fAn88ngmbWbm3/eE8/syOll+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACN2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+MTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPHRpZmY6UGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbj4yPC90aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgqIYvkNAAAKUElEQVRYCe1YCVQURxqu6pnuYYYZZoZLYAEjhwY5DAHRgCcx4IEa8UniruhqjLriJtHEXGvivGSfCTGJkjXxTFxvM4gYcQVPPAc0CIIcKlFRIJwDzN0zfdR2jw5vJJDI5r113z7rAX/9f31//VVf1/93NQA8aU8Y4BmAPWnYedHgXXRT8MeaFjrRQKIgvRlJKBqJ3MTQFOAOzoV6Y0eG+csK5o+HZE/fx6Xn15eN+6ImfwEEkBFCDC0PS/kqyT/86qOuR+gMXLLDvOzLAupDTym6HB0o2BzgLqiJ9mXJA2WMnKTBqPJ6ekVhtfWVAHfq+qZC8wdLxksOOPs/tj5EVpKln7pQXzo61ifiOG0hav6jtby+x7TR57Uu9NZ+0+K+Jjhai0TJa7v2uC9po7JOGif2hXsc9leLtmWCbTNRSM7yf/Q3vv0krM0nV646YFny3hRijSrVdXNfk0wOhdZ9GvPXo0KEO16fID3eF+5x2BmGIQBC3A/70Ol+lLUI1Zcsg976nvxosA/WOjFSkqn6Da/Z8RLNb0AeyzAGEAAsy5HAyX424cVadkGzjnEZHybKGRkK9f30fwhuVKt9LPeqp5ENdX6syUjgwWHVLkH+ee5pi3UPAR8o6NbfYoFVOxq0n/QCkiAzkA4thE+vv9gbdl0BOeF6ExuVf40cYCIxChciymBhxNEBeMWFD+V7acByJPBE/NJbu2V9srX+Toy1vs5NNDTitixhzCFZQnJrXl7eHwQCQRRWdo9JEAkgoGlQ9kv3R7e0ZX2yqOtkzjFEUwGYVF4qCouA5ktnv+vI3n9Vd+zwJOeZUL1ajCpSvwPtRz8HVJMBDJhSDjDhGHB3ywX0Y7Ia6arcHfjWViSds8lw8NwN+lUWsVVJ4USnpwy8zzBIlTZCFLA0yaXSjuU3j1hAO5GAtFq3pveX5djqajMAy9wQD41sISvLM5vXf1qiKzw6MiYlpdNNqRSDiPe7bsuXaNHcTYa/OgL3V+pzdi2smz4GdR1WJzr7duVlJ11PegZdnxxn0Z0qiOPHuOMqQFcn5aHiqDqk3e3mjEdlabvREQ7y4+R8HsePLd9n2hb2rs7IF2UHdrfGOkO2SIumZelOOGzzzn6zDnw9FfnuWbrRYWtbvSKvafmCcofOy45D+0ZXjxqCbs2f1tBaVSXl4kAMcjEZjj2KBZ7O4Efto5M/DOjYs20dERR8RjEt7bSzn2LqrOOykWP2UK1NLm37t39kH7v7wXTQmp8CPCathR5zHk6/wIz3gMjdAFqOTgS1qyf+cAHJcn5k5vsqBJV8UXbMPSdelBszSFh88ho9YcMpyxjeDh+kA4MYOwydyB+lv3g6RTgoZIPDr33HxjjTxdOzCF//CnzgoE10dhYLIUTCAXJ490YTG9RpYsY6wL3Jo+Vm/xlZ+mdFGEbjQpbUGaFgxihJo0W7f5itqVEqioqt682PGBiqhiLxnyw/3Rijz9vsCXTZL9vz1jWsticeeoytR8XjTgHzmRdB54mpRnJOjYnyx8w22l2FEKaCsPuwB3lBjeYmGtncxSq65+GKIiuwHyCgO3XkOZaiABdb2LYt62XLlUvTzddKbbiHxxEywGVl4GtZ3aQKn/IUXLsAqfFVDXRsbgkZPCPW5Vb3pA86JSUI/0qjX+jrJhgrxsGAxi4Q5uslNC0eTsUbc8u8EXeeWF2HvKcfr2MQK8MkrmbKTEtoa5MfMNUE8oUc6MsDesMDTMrn+IuAbHoal1BdYgKZ7rQzQVFl9AjOXuTwwQVQ4OUG6eGDJZfsNp4e7hcT4nbVcL5QilxwYDxzfCnxdHiuS1xCpvf8jF5vkdjIQQI1tzHQqmddT1RSbziCOMuYGEDv/ItcVbfea/y8sZKVVgoBpStWNSHGvQJAAcNyT8DWqR2KqqoIZz++31xyppPbsxFxPCEo7gCYxAJoboBqi+yJtevm2212CZXNafHhHWlxLt+26ZHgn2cta89XICU/dqwceVfU0ynz4sVvT4+ELbyNq4l8wQGs1carQDp6XBdjNgIgEXf5rf78w74I4LHYwkTJxeQo/ADFILC3yLL4cJl1Oj/g3Pi8cejuUkiw3KuIphn7dwcRGVWEiV0Qead2sLbmSrQD55DSiGdxhiTlLsGhJR4z32kAkthC+0nQnpuAUMn9x+YA81LiL7GT5DvrX7y6PA1796U44ZfFt+igZWr94fi/63a+m60780IEkbnmJck6HsO3+x9B3DJpyq67jp+iAQQOzLXVCboTR6bYjX38wXj7x6nypc8F42U6E4tnbNfve2OXbnYfeCAAiOQvJJBl7L6KtFevuI1KzKbaW6Hlasmqnn6u3gOnUCaTyCv9ldX2sRDVt0Di0wJ098LB3aK5PfGA1L4IFENqQMg4+3dJAISWfUvd3kyOU4ZG+AtU1xupdAvFen2U6rrV2ZeAGAUYGsiFhP0oEMlTLinjEw/RBh1s3vDJ1qYt64c74/l+886drrzs/oo8V4u8VNmdGy7ftqVZOTIThxLHvGRwk78nVrn/jNU4MwEXKaWEV00Dmb5XY3kteqCwpHSNj31i1NDgUbdm5T5jafEL4siYrUTgoExcrtQLFB7jWrN3feGR9ufPfNMXdldp1KQeCyqW7QW0zg/4Tn8FgAF5QCSUA8PN5cB0YyyIOTgNKqJu8wt0bmoNcn8np+Nmq47xiPLHD3yWqlg0Ogp2qus14i+LcvOK75Y+H+IdXBOmDHh7Ueyk03FaWmbM/DjHUHU1QaBQAiIwaLckevg5a2OjkrWQIr+5S7dK4+Kau0lwBPvksCGxoMI2+2Yz/TxX7+TcUzcKITDIXTGSu6CQXm7YbQkOzr/wjItmxURZlcMPqdWChuvFs03VlemYWIKAANdiMlmTZEjEfr8lK0ocOIdEjd8FgJ8PLuA2ngRwj5+BQGgCuOIqkEzcBsMzuGS+31SFSCg2mlMu36GSjCSAHAGDm3VsXIuOlSYMJq5sTldMVbfvwrdfOz1HjLuwNpoi3EVSQ5i7/5ZdyStNSKMWN165Nc+gOTuTMZsDuYTR434BBV4TJm32mDmngY/yCxIexAYqFcKqfDtl5yutRNIQVzbIm7Sq0ry7F+fA9SZ5QkB1NYIqFV+ufrOhks04jF18P5md0AcuW8NXZRu2y8QYNSIEX+/jJijW2sTtQ31sod+eNm4tvmGLSx0hzT34hizVye3/p1t2BymeXdX+U8ibbS3c28Ceu867yy1Diqj32iuUi5rNsz7t/fXsjP+1vr24/RrgcY1l7GiL4u4uwb5yeDl5GDT1XMeMaNgVHyr8nktXzEtG378m9gQ9ov4/S0KUv4jEuDdzYycTfazc4N3bfu61Mc9NfkZ06JuMR0vT3ubgbX3WhL4c/lt27gkT6Rt1O3afN708PISoHRZIrFZKQImFtJkQxH1aDOyCNj0Tued1z1R/N6j9Pevq939hfk+w/vhyFzRbCUJzuUuc5tJP1gV5peYs/hbMvam6fJWo1VsuKMhI9VzBEXD/itifyZ9gnzDQKwP/BlaTi1SzVazVAAAAAElFTkSuQmCC</Image>
<Image width="130" height="52">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAYAAABGkOCVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMwQjQ3MEVGRjQxMTExRTM5RkNCRjhFNDM0QjY3OEQ1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMwQjQ3MEYwRjQxMTExRTM5RkNCRjhFNDM0QjY3OEQ1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzBCNDcwRURGNDExMTFFMzlGQ0JGOEU0MzRCNjc4RDUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzBCNDcwRUVGNDExMTFFMzlGQ0JGOEU0MzRCNjc4RDUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5U94CwAAArpElEQVR42ux9B5hU5dn2c9r02Z3ZXmCX3QV2KS69KE1AsQAGEBT1tyQawUSN0fgbjfrFWGIs0ZjYjaKiWBABERSRDtKR3naXXZbtO7PTy6n/87xnlqLEL1++/Pn/fNee6zrOMDtz5pz3uZ/7ue/nfc/IGYYBXVvXxncNQdfWBYSurQsIXVsXELq2LiB0bV1A6Np+cBNDcdM+SgJAR9QADqGx7pAKNW06DC0RoCSbh+V7VZB48FS36hftqlMvjSvGyOag3q+uSTePIhjgtHGQ6eIiPXOFg7oONX0L+S0Axma7xG2f2NcCJ/06aGhV6bnTCqDq5zodDgwnD2m7NoJweBckOzrAMewC0FUV/O+/DqrfB2mX/Ag4qw04yQK8ywVKaxPYe/cFW59K4Gx24EQRDN0AXsTdQlBPA2h+HyCyDyBvNkBoG0CiESDZAJA9DSBeB1D7NIAWA+h+O4Cu4PU4gQ2E3AaQPhwgYwwex4av6XjeEkRVJ/CcARpegz9iAI4JSCLAjuMaDCwSQcfrfH5lAnbVarDyPguM6clDUP6+Taf3eSwO4DgO7tkx/95DwcYcj8WZJEvPcwKEEyFLWFNyHh0064ECh7cxpibPMWZ4XFc66HhuaS88D9xXy8E6eiKI+YXsr87ho8EaDkB11TH4Ei9RpO/VVPa3IUOGsH3VqlXs9XOcIIDdwkFRJg/HWvSRaw4qP91ao/6k2Y8BdwCk2TmoyBe+vaSf1Izv5SIJw3a4SevVFtYLVu+Qh2PEh687zM3OdnOQ4eQOxmTjQwTI630KhCYHHlfT/+f3LugKNQ2g0MsxgNMrRupZ52YTJAgosaxrNvxl6Zd7Pz0f0vIxUpglmEmgyJgtCXj+wrteGZ1b7v9b3xOnPAwEQKw5Bm1NzRC228H6jzDCWSePZ8rjmWa5OAjEjYwXvko+//F2+fr2Jg0Kuglw83jrHy/uL763/rC6q7I7D9eOtGLMAfadVGHZbgXcdq7weJs2CZnlxs92Jce1BnRENdf35ZXxRzLT+F/PGGJ5ISdNeBUBdjx+jgzBJAMNmcnAAcK0/rcGAjIo2x/8WIWHrhChT4EJgaBisHGmf1kEEY6Fm+2V3u4fz7riyWf+fOirx/a1Hu4jWd2QTETg+gHTX/5F30t/VhNuBVlX8TPmMShGcQIWHqjsZDsYJ2tBsdpBRxBw/2CDUDwTwchQkJvGQ1tYnfjkssQH9a1almjl4NqLbR8O7SHchVndnO7gADMcWkMGnPDpDAgNHTrIqgGKCg3ndRPfumGU9a35FeL0Z7+Iv3iiWcvPRWbxhw376+9G7nPYOedz17rvONmhwVnnjM9VOw8iJoIYxosTLf/e4gvH0oOMuGCNBku2a3DDaAFuu1iASkwoutggJTxmfrbNXX9Tz/HP9XBkwsLabXP2yPE+uuQCzuGF+kjbnstXPQ0RNX4KBJ3CrppX4FeJTBgQy4FYYTaiygrw3+gS852lQMRnBV4e3vtGnn3ne7FVqAGy7A4e5o633n/vZbbZhsE1U53v1BQcd2ZlN49BNbM1pEO9X4MxFdKnv53uqOhXLHwVQu2hRHWYNNmxaOYw232+6HeyHf+pOQTgFRyYhiMgxsNgSLZ/+9JADF+Yz4GEyfTKMhWGPyTDzW/IsB8ZNt2ig4CDqOCbmmIdUBdth7gm20mbGKkyEpYT6Tr+/SwQUOKpURjqyofb7L1BllBXUTD+m1MFPCHXirxgETlYvke5/KbXowuSmN0U2F9eYn385xOtT9a148kizZOg/KEMkFGDEFvQKZGIGtVLCv16quOBeLsGU8+3fXrfFMeVqA9ixB5ngki1IgoDIUj/Yj5IMT/ojvR/+9LQuVFyOJDcCos4sCG23/xchfPuVeG1rX6I8MfgJF6viMGnYLNYGibl0yOJSAnLh8Sf3nlRQuZV4TY5E6iEREH7pzEYE4Yo9gpmvRhdZkNAxFGcYj3f9viV9gdRFMLIngLkpfMQjhtnMcGZm4zngxoBsHyAgHF12whcKNYTxuDLx9nX3HO5fUZrWIdI0jC/NAUC2eDBgo4j58Re4BqrQXN5/seA4CzSw0uyo/QpKOZAxISa85wTXl7HgcsVZcwAcBoAZz6eudO7ahIBmOkqgYu5XGSQKPDA/XOAsLNOIxDA/R/HFsbiOudBoUgBvGakdCOVgm9PaBDHetYfxaEvBkwLnAsMZD0H9xBgbIUAQQQMAYPKRFmusHTuBNsEH4Ig+j0QIOJRIebjAFlxV20uc8T+B2/EEDkeHAek9N+/kw+NzW5wO2RWS04BADqBoJ+1x1UZHMgKc0pGYy2XQE3ZwH8KEIjK0RlMXfqtcn5hFg/NPg1mDLOsKMkWDu+p1+AkCsG9+EgBnDJAZPRFiv97YODM4KJghE7DRDHFstNM35FQ4GwQ6DwDQaEthhmB/wbhn4Ttfw8wuBw6MjEPIX+22bPgzgAA1WViRQNO7ZT5dVEfXFk4CFm3L8TjflY6/mkNpTG9RWp+/E5XTQGITA2XV4p/Lc/jmY3s/C4j1VvIcPLwIYYtnDBYCdC0039P4jEUzQw4XQt9li6a9s7nxDa56QK0hTTI4OJ4DOMUOL7vJ3kQvJnAE6J4nn0J70oD3u5gKKPm0T8skjiioQI8qcTpb5cyzYaSGa5UFP5OcWiYp0iui8drous0/tZ1pV5PGklIxryCFvNqYFdSQTdSj2d/MqEpkC7a4WZiA10zezG8Oci8yw28O5012tgY2ewgpHvAkGWz8cbAp0MwFAHRMESB51RTIKJLE03jKC77Vum387g6MBOtTgDpvXe+oAwoEteRPYx9x+uTY/A4ObhupAWBYApDCdMZdQCWBp3RO9XBNLSBZCupHNB10TmTIEWWAQHfP39THC4qU0GgcZe5033uVFB5pwsETwaovtZ+kbUrp2rRyAV6MNBTj8fkxP5dR8Fi2WcpKt0sObt/LXi8KQT/Z0FLhUXKwFFBEZSoHw6N8yZDonEEqB09EBAx8H99EN+2H9wDN4AlaxN776nP/u3sdqIryPNwsK9eK/xou3xdc1Abd6BB75aQjaTLygWN1NnRaSYVsGHy88Gg7qooEY7luPifxCKusMPh+wFrx0EtssEtCILi9FzQmxsxR/BVbwZzXHLVkYuSJ45PV+prz8fg25PHj1Ur/ra9YlbOVhzwpbo303BYrTCwshQBKqZHQsHbrVarnkgkYh0dHS9gSbpVXLhDnk7Zne3mkb4NcFu5qm3VajtRuaob5+w64ntYoKMIBLKdPTDAD1xhh5GlEtRiablnQQR+NNAClw20QiBmMkccj7dqfxI+2pSAmkYZjj/rNvvanWBDKuQkCcTsXEgePTQxtGLxb5O1VaM5ohebPYYXFRK9mXmRdV8N0FV5llRYhIBxH7VXDn7K0XfgXwXMCE1OnjsDDc1sG1sLAdoWzYTmDx6FaFUF8Oi9BXcI7GUJ0BPlcPKTQQyVgU14blk7wTvmUcgYtwQEl8kU3PdZoBjL6dFWrdvjSxOPf31QvYE6p8WZ3MGBRYLjWLPe41izBjnIEiQQCTT5CJgjjRqUFIrw8BXO+5x2I6wKSPN6ikZPsYJ+SiTGNBkyJKfJBhQDzHg+zQNKfd2M4Cfzn5MbTxQRKwiZOS3W0l5piarDFUpzw2Qao9j+3XWuCy99IKe05/uTh48BRbL4jh48eKL2+PGYqqqTamtrH0ZWGC7KijFCxWDoqZKUZufqD6F49EVOC7vvbjRPQHU9wynBxH4ipKHqF1JpTY+fbknAp2vjMGu8HWYOt8LBBhUW4msHamUSA5CVJ4LDevbBOStaaKcbAgveejm48N25WiIOaVNmPm0bNOJP8f27Gox4DNyXThPcbS3TOz586+nEsUM9OLu9d/zYwTdUv29KwUNPXSl5MnQtHgFOILpTzQYF4z0PpaMFqu7+EGrfmQZkg7vfeh+4Kv8K/tU+DDpA3tVOCO28Go4/9zzEmnBUW4ZAYP9i0OKvwnlvzGVA0oJ4GNMVUcy8yI7fVKlj7pgXW3G8XnP+crrtpW4Zwp0IGK1fIYeW28h7b7P8/NcHlauzU4x7cT/py0evdPzYH9H9Hpsl6dfaINMRQrbPPIMVjbPY4ETUD7eUjobuWYXsT2JaOgRWr3gVQXAredLsB37/UyOZfCu0aplmHzgM3BdPHR1a8emL0d1bK7VIqDi685v3YO6vimyjJj6pYrmQFaWhpaVFGjJkyKcItGFer3e5iLRexGFUSagQIzgtoA4vwRoeNn7Qc7Yg4XXP4MHr4FjJoHen283WR/ccAerbNfh4fRw+2RZng0Zv8GYI7L2iYGCSS1SUkQVMkSFkZENsw6qvY1s3TpBKekL6ZdPGSj16biA+1WNRICDgxWr2vpULYfaPv/C9/fL2ZF1NhZiTD/4lC6ZpkfCmoqdfO59HQGEpQWBZzaJNmyXbDkde3gUdjRXg7R6FgpsHgL20GtQQBjdi6gUDvVjGhDfxTFZB9RO7IOnLBGsawLF5c0BPZsKAd2eh1EdiUBm7ZaN+2l2nlU37U2R9a4MGt02zf/bYTPvPX12ThHq/ybBYXpvnz3HOfnJ5Qnj+0/jMnFwe5q9PXnJhH2n6LeNsL0XjAA2KAnUR1EtiqgSd0gjmrqB4c0l2mJJ/nokTOQHtTz28IPjJe7Ol4lLFe/MdfZznj60Ofr6ITcBJrS1grxy6sejF9wfWzpl1JH5oXy/SWS1vvvB71/DR6+2DR24uKOu5WrRY+DS7XZYslmWoFTi+MaB7nLbTQESEGASIuGwC47t7EndqLnXL4GBwicgsoXGO8iGJHGRmCuCy8agreMhwm0GhUpKQeWhvCuCTNtDCQSZqQosXzIvt2joB6z94rr3lF94bbmMgUPHiWEAJEEj9qBXAUTk0kn/fY+PF7BxVC/jBhsAJrPh0ZOOzj7yi+tohcRhLfbQBLyaMgY4C1D62EkIIAupa9/rDDCi+uxq/GEe5DY8rmNpBpX/jORXceAIq354EaNOw1qC8RyaoWjATjj54NyjNIAePQjseMoQa6aFF8Y9a23XI6S5An0LhuYMIiHwPuiEEOiVKeb7AxuHhK+yzyksEfxB1lAMTZ+68yIsr9sj9a9sNaGyzgUUQTkuRU7sJig5dhkH2LBjajufS0gqhpR/fHFzy4Wya7sz65YP3pF1xVTWdv+BwgmPAMFZaE4f2gNxYb3imXXNLp3jUQkFo+OMjS9WGExLUH1dVRZHN7icrQQZ/5neT2GsNG2kHGnWoxQukqejv7lWtOs1IQv/uIptUUf6TxhbVxjNLDAmrQMgKL32GQdi5BpRjByH4ybsTAgvevJHcgLW8X7u1T/8X5JO1IOXkgZRbAFpHu2mrknGsjWko7rPBMXhks2fKrN+qbc3MbkndiqBj2cdzgqtXDDCwKhhtawEiWwFqHvwpNHw+mpUDb+UBcPRZCZH9AI7eiNYcBGNTCr0YWSvN/qEeyJ68C/JnzYN4wrR21O0+/udnoe2LbEU10D0BrNirnL/+iDo43cuTU9AK0vmjLSiwqYs4ulzCBOCgFzJAI3VkEVM3jrE+loyaYltFVnxtbeIXrUH8+qSAQlqA0+l0dmmI4MWcJ3nZ82TtUXvgo3l/QakPyJZJQ1Xnxb/dDvF9u4HDEuEYPAJdlpe5iGT1YUgeO9wNUHcprc14qQXotlwnW15+xiG/9CSkbVkDKrkMTDLSIWKGgwvWtOHFiYQOg2ivfGSZSI5Nl88R5DgyQhZezHndBNYl/K9aWcY8ahIayboVo82SLeB/59VndQWFHmfFgBZv1WMx0OpqWNOE0Gwt6Y2DUAW2nhWmSPK34esO8Eye+WzwyyUPyCfrHDy6DBnVdHT3tvvTRk+azdHoczjKzR/+nglA+l5739WQbMHRP26uLxCR+p29zfKQPswsEfFaBAgOfPHtj0DToptAxfRHaoYIPob3/MJTMu3B5z8PwuqjtsnWlEXkzeviSFyjK8Dk0LFMIhFh4tCag7aQTusU3ikpEp9uDeoCkRAK9GH5GQYE4g6QcQw4R0qk6WdiwQBNkaF3TzzHioGQWPbxTHQENgETRswrPKYFO8KUMDThJGbmoIV0I57jkKw5ekPHh/Pujx87VCHlF/pc5497X8rvtgDF4zeJmmPAB1AWYYmRz0xYtD1tykFqiAvM4jV2aDn42KdHlnCAAv3djcpDgYcEE4cX8H0g0JxFyvL/7U1VQESVDw4vJHZt6o8nN5B8sNLeCnxGVr21z3mgZmWbIhKFn7eiP4TWfgnRvbtRS2Syz9MXS9m5CWtZ+eJ41ZFrOU1Dce+G2OEDlyvt7Tap1JuA0JJLINqUyagrTj6vogEyxuNFlKW6NBgtzyiA5oUA/o04GuhkiE4oUlJWLaRVfgNt28+nhTcs2v4tP4JuHQ+e39ML66q4nlQWvVj2WkK6UOfTupdk8SdVjVlEZAOBLcSJolOl17LcnK80W9hR26qN4KiNLxvub+s0TCYVSsrIfXGniSBVFmhCKsfugl4hPOCJkxDfve0yAzWKJsjEIHH78FGg4pgZqKGSNccGJDat+Vl4zYpbDV0DqaBbc/qUK++ylvR6U3ClhQ0NP9fhY00oAxNMF6WzmRup7BCO9QQ6CxvSWmuHDhuPKpPQ8hxowudnBlpLzaP372Y2mgT+bF0AqfKSSBhzqM/RqXvou8/oEWGB1XIFgdsMGd2/wlo2Wm1vARJ9BgonpD2dAsqCnbKVvCsdnCPGQGTLeqYRINWb14gtispWoO28ljWY0HWowQ533UN39it54rGd9pyTFwIdhthBl83cpWVLZAc7pz0tWA4yJmKQ16Xew6VA4kDg9FkOLQgE6rYRmIKH+8DOq739en3RkeHpZknIEXSfqAeQ/jGOg/oVCt/QlLwk8CwZQjFgToEaTE4rj7aS34eDOIJwhuDw8XgdGW6znKjad8QiU9AiiFYHRD98G2R/EmLh9nI+OwchEAe1w5+mNNTb4nt3TI2sXfk4Zn8v3uEAx9ALPkDx+IytZ5+dkW3rkZ4UUP3tzJqfEs/nKuEjyqRv3tuY/Dl5XFbLMdpbqtUbfzHJ/hz9mzRAJxhU/BvVPpvEsfdapdMoseDF+aNGxf96MbS5za9709I5SOJBaZ6CuQnenDTx+zS4aJILnr3eMiL67RaIfrutJ9pAIBTThagtjbnhr5eD0tJ4qoVqYLZzrESUAYdINlLtTMHpAnv/gbtEdBwqik7qrMk+H2ReNSfXmotisX5NCdMG1K6lx8iBbGiaj0itO93zMwh8yDLuganGVKoeWlE/eEftAPEdHBM1JShlAXpe1WNVTU5HVaNW5Xac7ryuPKBc+6PBlpdoTMga76pVmeC+uB8t09Og0EPCmUsYrNNqQFkuv4Ha8TKfwGtC2jCc3+9/0YwkBi9WcwTCB4+DWpCbzrqq1HKIhIqaf/erOJVJKTvveOb1c++w9aucJzjdER1dEy3rI4EouLH88SlBTL0JWvmEu4GvGaQRElH2NxFR+kVhJme0h3WOlqClYwA3H5IHfLIjOWxkmbTdH2VoZ0AlBqBu4uHGBGsm0YoiPTWkNPO4pUrJPdyovD9hoKWa+hJYRrQMF9d3W40yh6ao40ilWR4++tTcjOL0tkZfyzuvoYMLOUgLsIkVVM9KS1MpIVdEy9MZcDpxAdWw0tbCLBJvMdcqcOgwjGSiFh8DeACPkerTi1n5WLAPYiGudpoFPNVPSNaXMG1AfYNTVJY0G02xYxiVVpMxWIrgAMZPHMOsNJARTN6m4Ig5MKV/GJqjnk9+9wncS0CnfsL6Q+qo5qA+ZFQvcWcdWmdihk92yMxiEzCSmERYPvoAjmdGgQD3XGr/Y798EapCHLQkTU3xXcdwqi3LWsbpxJYKCkTGFHLTSbu9csiqjOvn3se703ZxGFjalaZ6zH4rS5zOjiuH48pxZmeVtJSWSICQiIGOpcLIQ62GukIcUy75LqywLHzvq/gsPqUTghEdFu9IvnTbBPswqoPk/TNcPGsi7a5V4Dg6hz0nVFYfyRWwjqSdJyu5bkAPaZ0V39jQocF1o2zQK08on/GnjjmcwYGi6lDaw9KwfIfh2x8Mw/U33QRt6zY1x99CIZyVy05c9bf1tVWc5xG9GQESPqxvgRdloHWsu/9ngGKJtZ/ZiCHaBIcrBpLFjwj30KCJqJpb33mxyV12J9hLZ7TALsxou2FOHSR9QyBz0mmXwOYXUBhGEQSH70PAhcwOZGfZENIi6CJUSAbMgiraNdjzQL1QxMPtl9y6dftRy9eL1iQmFpeK0B7U4K75sQ/WPeDuVU8rt/DjnlSPBZkCGkJGxZJNiYmUPX+42nndkBKpocmHY4cW16Dv4s4IfmezFROBlxXIu2wGpKGFDK5Z1hjbtrFCyMhiotBa0X+jY8SYXfE9O/BcUZgG4tRrwdP2MDCQtRaQZYkFdNGCjiILda8T80oBAUsvt3g+iGg5tf6DgacO4vSh1t8KLnPOgJLHmy3Ayh3y0N8tid1Mdo86wVuqZHhxVZQ5BWqZ0nS0TTJrWz7SXn46z0pFDI9R06bB6N4WuH60jQaiOCmDiUgqNarBq3ilDslgPQJNU/eD1cpKA+d0EtKtKHjGxg/sgdiuLbhvZdogceQgSHndQEDAUBcSrRAqbXOnImwgKNRQADMnI1zyzMsHbUUY4I6O/WbJp8YGlYYjxdD8UV8IbsEatcbc2z9HNjhi2klLtgkEYgMx3bSSnatOCTfOskNwwbp2V94ooL88c419Vv8KsaWuXoVsZNLtNUrPKc9FNoSTRmlpDg+0rI96CSv2yCMufDiwncrnnCudP+nXTXgfyzyCAPWsFgCJO/eyPAHPO6AloLZ3GfCjxoOlW4+dWixiZjmW09DXn9+PSeJwXzwFHMNHUyMJpKJSrHw1iOkOcF94KfA5hRCuqoLoiRNgMHGimKVBsrD1jfrW9WAsmg88IXfyQMvBuRfZ34q2Yog4c/6AHNN/fBB+Y1+D1j/LzUN1swbUMKESQGxFWoFsEW+2paEW6yBNNjWgcLqs0gK3jLexGcpI3GBLv80MZv/l7JzK+bg0iEbxeD17fiVm5ypU40lJEtIjWzdeS5NvWjSKzi7MZhkj6JdpLsFaWg6WohImLi2FxSBm5wkoMt30WaXDD47zBi23l5Yl0ayjOLlgCQOAlvJ4FMy2z65h4o/6B8lmYPbQt8F0EK5+WONwd5TgY39kkm4iaHHRXEaFe+b4xeDow8RgCO0AuoSOj253Dbigv/glNdooEVbvk0fPnRetnr9J/qrBr7/89PL4qinPhrZU1SmuBfemjZxYLr21v15nZdantqIzUPDU+NPC4HRnD0RkyJASgyYlwqZ57cMvWMy50lhjDcsBJI4dsvo+mvcHEtcSUTyWAA0DHT1eBZG9u8A1CgkI3ZiKdpwB4MwFP/Q9aDsNmrVEcIndsIaR+HtkhvOnS3cmL6pvULtnI4q9bg6oa3bJ4/7NO5/IHDGsp3RoX4PKKO+US8ABKsTPtwQ0eOK9IIweaIOfT7TDJAQCCSKiRV4wmcAwuFNFUMKT8gte0MovgPTuOWHXgf2vtb767M8ZpWEZiB/YfRUG+WfOwSP9nVOp4T07mQBynz8OvJdcgWIpTDWT7FOPjlWf56hooXi3BzzjJv5ebqgDyZkPQrcRVdDyxWqoWzcB0lJiJrDzNug/6iHIGGdaRQ0B045AUPwAOVcAdLvWBAmVjI5N5XD8I56dtpNW9k59AaJHSWuAZKUmTx5Vs5aHp9sv3V6tjdtcpVy6uUorP1GvuZFpL8JgX7TrmMIG/e1702fPGGTdunhnEnpkStCIgx/U/GDhrKkFKdyp3kEnGEg32fH1emQOEnzp5w3d7CvvdziyfVOFtXsJ003t775yu3PwiA+tpb03dixfxDqLkgf1FY4xlQZATcHTVPMPOAYCBE8TSCHM3EwXr6263zsuM4OPtTWZK4yzswRoatHcYx717/h6vzy+L4ocWpPQaRVZomC2EZAUFEfHmhUYVyHBhsMyVLVokOFEkYIXYgLRSNVBYAtSgsgGTQIqc7RH2T++8yGpsEhNNjegmPFCouYo1/LSH17tXCUbWLmUpqSZVlDamiGBOkFPJsDarRhCm9ZcK6PDSJxohpzrbnndO/GyPdR74JzdMEM8AOXPzmVrtYkNaMF/e0Mm1PzuMVYCqK3c8L7pHNiKm+MoMA+ZfQQrapamBTeyrgsJ61733geZ49qYuBQ9YLdqpxpsvrABBV5uXWmOcD8K6xlP3OC8+MIK8fM4iUBMKCeW3b75wloqvRU4hn0LeQjEdJYs3FlTmmfoBGQ4fyKsERN8G26E+kADXpMHsm+47TYKKjElMQGVxJO/u2dVYNnCYYLLhTo4l5XZ7zV4MAjkspgO6/BxWjgEZ+5853o6cgG984Tjy3/tHVpWKNS3YfYnSA8gO1Q3qo5fzgut3nhEeYxcI14wW4dwVg8BSwXNK5A7QJcAm47I4EJ9gWWjjfQBQ71+elUGDcKRVoONspiT29H98RdnkNBB14B1rgT8H82bGfxyyfWxg6gVcBfTzTYr2ad41SHGBnJrU7fmd159INEYgowrrtjR/d7/uJXYQ8KsoEc2n5A+5BgMevoOdicI9RRInR/642+gfcUY8K3FwO9DZKabwadp6cB2vEJ0FcGtI6Bm6Q1ANxdVTFkMfZ58ip04lQ1Pb9hd74Qv96GORKCQK3Dj9VNSPDvbAfdPtUMwplcqGHgS3zKC5e73wn/5cp8M39apeN0KZFvTwCtmYMVJgh1dU44jnW54SYCmmEI16ofppSMik/L7w4lIK2xx43EkHtIunro2Z849f06crGWlk0S24mu3tn/w121YKuYKaekocTx4KVbEawabg6AxE1EoRvbtnqxHo5PTL7iQd/SthDN34de/+Q8GHmIOQnZumtCe4+VfjelG2aE6pX8U7U46ikFqRO04Ko9de1T+CYLGjUBoQiHp65UrsSbSJ6tjkFcgwl2XuuFYiwroeKEtrDuX7Y5PPdKoXU5OUMUssNi4tIoC6VEanONtOlR4dfCg0LIW9z5qLS47Htq0errqa0Mh4YToto3T9Xi81VHRfwf1D8g+2orLwDVoGMQPHxhWffsNO6L7ahzZ1129pvy1D8fxksUg78yaSzw1w6iwY4C9Y7aBVU1C04aLINUSgPZlN4GuHIL0QQdAsJm3vqVVIg1OAGheMgW+uWY1Y4K+MxfA8E+vMvsIQaIz1EY2+GS3lTEggb05qEJxtgjRhMbmEkgkNgUM9+Yj8ngH6icLfuZwnda3MaSPH1QifTG8VIqAjoljtcCJWCNa0QBUBZpg6fFtD/ij/ix2t1MiDOU5PXMdgrSlJtDAXVY8xI7aP+ayOsFb1HOFEgkVRnZvHUJ6gfooGpbG2P5vp8hNDbPlxpO5CAgrWnBb8mRtz+CW9VdGdm59U4/HxmdOnjEvbfjoZgsmiw0ZtXPniKI6J4eiiOBmFHtbq9GyYPCrmpWpn+xI/HpntXJBIo7CEDNep1YtBjU3T4Asl7BnUA9xH9rHqqWb43JmlsBfPdKeeaxZLTjSpFTGkkafxhpMmTSB3eyBNbP58oG2pbdOcM4NxgyjPcbBeTkaDC7FZPWFWPMjuHrFsPYFbzyTOHpoLDVLyDe7ho+plXLyFyANVuF7ipWAf7Lvs0VDpPxCSB930YN519/6uGvQcHQNQbZyhzUGLQgEpk8kc1aR+gf1r1wCJxY8BaEDlZByj5BTvhfsBQtxJBswbXpBsn0WnNxRBm5vAvLG/gLKH3kN0gZgOvoYpgzODhurrMxF2fDfReiw6v0qjC23ADImSygky8wNR5QKHMflJ3x6GjkvYsV2LJ+ZaSgw7/JMm9BHWu9Dm7625Rs47D+Z/+yuxSs7Ao39weY2RR01gWIdDLWZabkwrfeYOVar7bU+3iK4Xc2FJB6vY+v629s/eOsxubE+nS1Tw5KoUBKx+0JJVMrsvlEeHUbGxVMX51xz0wwU3oaE7KorytnrQb4LBHICX+2XmQIeiv44hH//cm9y7Em/dtXuOvXCcNzo1x42b2gl4WgoZk3zZAgQjRmYtSpwKCBzMPgJ2Tg+tsKyoXsmv1PRYUs8aey6bIBNvXaUA9BiYUnhWAs0XVJACQZR3PjYhfBIZ5HtmyeFt26crgb8Y9RgoB/1yonyk40NtB7voOO8wa+7Bg55W3B7OyjBvRdPZrqhs9SeBoLFvJk1fsIUhBZUjU3LZ0D7qitAbh4JSricaQRbEQ5ADfra0u3gGfo6ZIyYj3YlAXZ8PRdFpIrnZqBGMRzsFr9NR5OQ4xahX6EAG47KpTWt+rQtVcpMtM4jLQLHNQbMlUnUXQzheLndZsexpZ1uWDFg0T0Z06YNtSzZ7TsK7x1e03/h0W03Z9lc1RxT12abjqaIk2rCk+3w+rq7sl4/Hm3XJnQfCI8YPSAaRpBkZOI1J9OD61ZeE9mzY6oWifQxeD6D6jAGWjc0rdHarWhl1pSZr9nLyo+QpSS2tPcoo8/97XsfT6EjVf5p3UEAS0NZnrh+eJll/XlFKhxtUnugsOzhj+jd1x2SM074NUtldymMpSA+vEwKW7FkvL853n735a4TK/Ykk5MHWcGFsdhUpUB7SAXqVFIDio6r6Dy46botqS/FLNCCAYZkW2mvlZjhKy2ojm3FJbbo3l0WS7ciIVFb00Gi0dG3P1rKHRhDDWuhF354GpQzNUCi2Zzs8A5bBJp/EbiwFDh6OKBjuwhpAzno2BBkC1qdPVEjfAtsTYLNvKtY1u0Q0xyslW4VDSjOFOFQozZ20Y7EfZ/tki9XMfDde0hav0Jxoaob21+/2b1//uZEnawaBrLmPb95N3xzGIV2Hq0UR5s+60/+xV8/kFXZr6D3vkh8435R0n6Z68LAstXL+imLl8DvLHJngVO0gdviAAeVDZVjglBtbsSykBlMH3vRK2gfX5Gy85D8/GmotQxk0GT08D6ZGkqkG+SWJjaHwNts//lNsOdaaUsb3diSkDW2CAXHu7ZXnlB7os1sNJFAIqRT57EMRWS6HV/k4kxNK5pBs5lsFRP57L9vdTHHUMvULNofPSePuooJtEMJtmQaBwdVLyitLf/1FcwEArKMRPOy3+wuarT0SYFTO/UWaBaycx5Cj5rGAQNC40FNNDeWyM92x597Z0PiLqNNg7yeUuOTP/XcGpfh87isE0AAg49ikod2pP8HpjpvcUrcuscXR95ubtO43BwRWk4q8PN3Am8vuSNr8I/LJ6MmaoWdLTXgMLJS7WATCEkUj+x+BgQA9/371FhmI2uyeQXWllfkEHUSyT7qbFVXnD3StP0PJcvf/UMZnQ06KgfUH6A5Bz1197Q59Wr2DWg1s2F2f0/d9fsPbylQsDmH1COzRv+ULTXBxFaxdD52zpzQ96LNcGCeZA5lg0RzAR67eb1//ir28tufRe8y0B4OGGo5+tS1rrL+heLnVDKbgjorB/ScmI/GiRawThtqffeJ2e5BqJUCLagp7Fg+T7RrgzbWxPrbFNQAtl9DiTQINFsj/EML9GmehY2Pbu6ppPl7IyBC13aOQUVQOBVoMqZCdVMF2AyV1XW67W/1IXn8nz6LzhW8AuvAPjPbPeei/pYEzS+QhfRFOqeUTVtNCUILVqobETRF4p7fzHBd/JsPw9vNtZ9oK+eHBmNq7XfwLsTdT4HrrUEuyhQuUQDGv/CWny4gfG+9PkbX2QFtbb3gzZYhIMYSqAs0llkEhNdXx++mqXpagNs9U2iv82lr/7o2zsjreCvaRxeHpZR0BMem3+MyD+X5ItA9JfTanPGOHftOKJ+882X0SkuWQAzLVuxHtBC7V8S1bw6+TwJL7hZI4/IAtC4g/L+5l93jg7rAWBjxxz7QogUhy5FItcdP3dAy0JMpsCl1rBnGvnoVS6LOFp7QApMIPq8o4LEcqFDVJMMNYxzw3IoIYwti6nQHT02mzYirK2n946Oz3LuL8Hikw+ineUBBEHBzYHFYhX2RbZBDHc4uIPwrNwy2iDY2EYH7V18OLWEFsrPQwRj8qcWkosDRrCubaSNGaGhSsyffmDZ8fB/LNgp8C+qDl76KQLZbYrf0VbWorIO64tsE3HGJC/oWipDrEWD14WRvaFagT19n1Yyhtr0krOXO+1m5JHgEKxQEb4RHD9WDLxGEPIe3Cwj/2k2BQGQ4XDtRhDsn0eBknSXcqC/w8MLwN+8sixRlFUnQjpbxtx+H/zL4V97hpBeqMfDUPDJXhHPsOekEclThuPn7EvtOKp4lm+P/C7BM/PJS1x09skW20vn0Sm9a66jD+AIXHIhPgid2vw7lnqL/61fe9fN6p7QBZr/YD9SCq2BiL4AhxQJUYrAHnLEXY02fO9HxCM2rtPs1yMwVYPOu+LDL/uD/Eh1T9/7dJPbrcgQK0gMUXJqToUm5gcUSHGhQ86c94dvZui/p/NXt3qevG2X/gsqKTTSX+nXudtHsKY0p7APZNi/7/aQuIPyrtmQLqDlXgJheDLGw+RNB4YR+1k7W+PxelkOL7s+cxdYTYDlw5Yiw/XBy0uVP+2peXxt9ozWkX4Hqr1TWDEk375Cm31Ub8dRnkWdn/tHX2N4gl95zp/ehp2el/W+6fYBsNjHF2bv5GwNOyYrAsJhNpq7S8K9iBI2tSKIFzwKc+/5nsz9iwPQhtoWPzHaPWLo9/vTeenUsjyzQelIV/1oduhmyxZtpGp4C3Iql49Y3OqAVtQMkUUSWWNZfconrVzOG2bdTr4EWA3Pc6RXg3xWu1EwiEHD/AhvZBYQzu456kvWUfuhnIGn9RqNPIyu57e4p7nEH6pULNh6RL4sljUEY1LKmgJaOjsKOh7MO7yW1+CP60Usq7atGl1uX64ZxgCb1TuLnSTiKPAD8f/KTk1zX/7ija+vSCF1bFxC6trO3/yPAAKRem5XZIKfcAAAAAElFTkSuQmCC</Image>
<Url type="application/x-suggestions+json" method="GET" template="https://www.google.com/complete/search?client=firefox&amp;q={searchTerms}"/>
<Url type="text/html" method="GET" template="https://www.google.com/search" rel="searchform">
  <Param name="q" value="{searchTerms}"/>
  <Param name="ie" value="utf-8"/>
  <Param name="oe" value="utf-8"/>
  <Param name="aq" value="t"/>
  <Param name="rls" value="{moz:distributionID}:{moz:locale}:{moz:official}"/>
  <MozParam name="client" condition="defaultEngine" trueValue="firefox-a" falseValue="firefox"/>
  <MozParam name="channel" condition="purpose" purpose="contextmenu" value="rcs"/>
  <MozParam name="channel" condition="purpose" purpose="keyword" value="fflb"/>
  <MozParam name="channel" condition="purpose" purpose="searchbar" value="sb"/>
  <MozParam name="channel" condition="purpose" purpose="homepage" value="np"/>
  <MozParam name="channel" condition="purpose" purpose="newtab" value="nts"/>
  <MozParam name="source" condition="purpose" purpose="homepage" value="hp"/>
</Url>
</SearchPlugin>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="richgrid"
           extends="chrome://global/content/bindings/general.xml#basecontrol">

    <content>
      <html:div id="grid-div" anonid="grid" class="richgrid-grid" xbl:inherits="compact">
        <children/>
      </html:div>
    </content>

    <implementation implements="nsIDOMXULSelectControlElement">
      <property name="_grid" readonly="true" onget="return document.getAnonymousElementByAttribute(this, 'anonid', 'grid');"/>

      <property name="isBound" readonly="true" onget="return !!this._grid"/>
      <property name="isArranging" readonly="true" onget="return !!this._scheduledArrangeItemsTimerId"/>

      <field name="controller">null</field>

      <!-- collection of child items excluding empty tiles -->
      <property name="items" readonly="true" onget="return this.querySelectorAll('richgriditem[value]');"/>
      <property name="itemCount" readonly="true" onget="return this.items.length;"/>

      <method name="isItem">
        <parameter name="anItem"/>
        <body>
          <![CDATA[
            // only non-empty child nodes are considered items
            return anItem && anItem.hasAttribute("value") &&
                   anItem.parentNode == this;
          ]]>
        </body>
      </method>

      <!-- nsIDOMXULMultiSelectControlElement (not fully implemented) -->

      <method name="clearSelection">
        <body>
          <![CDATA[
            // 'selection' and 'selected' are confusingly overloaded here
            // as richgrid is adopting multi-select behavior, but select/selected are already being
            // used to describe triggering the default action of a tile
            if (this._selectedItem){
              this._selectedItem.removeAttribute("selected");
              this._selectedItem = null;
            }

            for (let childItem of this.selectedItems) {
              childItem.removeAttribute("selected");
            }
          ]]>
        </body>
      </method>

      <method name="toggleItemSelection">
        <parameter name="anItem"/>
        <body>
          <![CDATA[
            if (!this.isItem(anItem))
              return;

            let wasSelected = anItem.selected;
            if ("single" == this.getAttribute("seltype")) {
              this.clearSelection();
            }
            this._selectedItem = wasSelected ? null : anItem;
            if (wasSelected)
              anItem.removeAttribute("selected");
            else
              anItem.setAttribute("selected", true);
            this._fireEvent("selectionchange");
          ]]>
        </body>
      </method>

      <method name="selectItem">
        <parameter name="anItem"/>
        <body>
          <![CDATA[
            if (!this.isItem(anItem))
              return;
            let wasSelected = anItem.selected,
                isSingleMode = ("single" == this.getAttribute("seltype"));
            if (isSingleMode) {
              this.clearSelection();
            }
            this._selectedItem = anItem;
            if (wasSelected) {
              return;
            }
            anItem.setAttribute("selected", true);
            if (isSingleMode) {
              this._fireEvent("select");
            } else {
              this._fireEvent("selectionchange");
            }
          ]]>
        </body>
      </method>

      <method name="selectNone">
        <body>
          <![CDATA[
            let selectedCount = this.selectedItems.length;
            this.clearSelection();
            if (selectedCount && "single" != this.getAttribute("seltype")) {
              this._fireEvent("selectionchange");
            }
          ]]>
        </body>
      </method>

      <method name="handleItemClick">
        <parameter name="aItem"/>
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            if (!(this.isBound && this.isItem(aItem)))
              return;

            if ("single" == this.getAttribute("seltype")) {
              // we'll republish this as a selectionchange event on the grid
              aEvent.stopPropagation();
              this.selectItem(aItem);
            }

            if (this.controller && this.controller.handleItemClick)
              this.controller.handleItemClick(aItem, aEvent);
          ]]>
        </body>
      </method>

      <method name="handleItemContextMenu">
        <parameter name="aItem"/>
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            if (!this.isBound || this.noContext || !this.isItem(aItem))
              return;
            // we'll republish this as a selectionchange event on the grid
            aEvent.stopPropagation();
            this.toggleItemSelection(aItem);
          ]]>
        </body>
      </method>

      <property name="contextSetName" readonly="true"
                onget="return this.getAttribute('set-name');"/>

      <property name="contextActions">
        <getter>
          <![CDATA[
            // return the subset of verbs that apply to all selected tiles
            let tileNodes = this.selectedItems;
            if (!tileNodes.length) {
              return new Set();
            }

            // given one or more sets of values,
            // return a set with only those values present in each
            let initialItem = tileNodes[0];

            let verbSet = new Set(initialItem.contextActions);
            for (let i=1; i<tileNodes.length; i++){
              let set = tileNodes[i].contextActions;
              for (let item of verbSet) {
                if (!set.has(item)){
                  verbSet.delete(item);
                }
              }
            }
            // add the clear-selection button if more than one tiles are selected
            if (tileNodes.length > 1) {
              verbSet.add('clear');
            }
            // returns Set
            return verbSet;
          ]]>
        </getter>
      </property>

    <!-- nsIDOMXULSelectControlElement -->

      <field name="_selectedItem">null</field>
      <property name="selectedItem" onget="return this._selectedItem;">
        <setter>
          <![CDATA[
            this.selectItem(val);
          ]]>
        </setter>
      </property>

      <!-- partial implementation of multiple selection interface -->
      <property name="selectedItems">
        <getter>
          <![CDATA[
            return this.querySelectorAll("richgriditem[value][selected]");
          ]]>
        </getter>
      </property>

      <property name="selectedIndex">
        <getter>
          <![CDATA[
            return this.getIndexOfItem(this._selectedItem);
          ]]>
        </getter>
        <setter>
          <![CDATA[
            if (val >= 0) {
              let selected = this.getItemAtIndex(val);
              this.selectItem(selected);
            } else {
              this.selectNone();
            }
          ]]>
        </setter>
      </property>

      <method name="appendItem">
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <parameter name="aSkipArrange"/>
        <body>
          <![CDATA[
            let item = this.nextSlot();
            item.setAttribute("value", aValue);
            item.setAttribute("label", aLabel);

            if (!aSkipArrange)
              this.arrangeItems();
            return item;
          ]]>
        </body>
      </method>

      <method name="_slotValues">
        <body><![CDATA[
          return Array.map(this.children, (cnode) => cnode.getAttribute("value"));
        ]]></body>
      </method>

      <property name="minSlots" readonly="true"
                onget="return this.getAttribute('minSlots') || 3;"/>

      <method name="clearAll">
        <parameter name="aSkipArrange"/>
        <body>
          <![CDATA[
            const ELEMENT_NODE_TYPE = Components.interfaces.nsIDOMNode.ELEMENT_NODE;
            let slotCount = this.minSlots;
            let childIndex = 0;
            let child = this.firstChild;
            while (child) {
              // remove excess elements and non-element nodes
              if (child.nodeType !== ELEMENT_NODE_TYPE || childIndex+1 > slotCount) {
                let orphanNode = child;
                child = orphanNode.nextSibling;
                this.removeChild(orphanNode);
                continue;
              }
              if (child.hasAttribute("value")) {
                this._releaseSlot(child);
              }
              child = child.nextSibling;
              childIndex++;
            }
            // create our quota of item slots
            for (let count = this.childElementCount; count < slotCount; count++) {
              this.appendChild( this._createItemElement() );
            }

            if (!aSkipArrange)
              this.arrangeItems();
          ]]>
        </body>
      </method>

      <method name="_slotAt">
        <parameter name="anIndex"/>
        <body>
          <![CDATA[
            // backfill with new slots as necessary
            let count = Math.max(1+anIndex, this.minSlots) - this.childElementCount;
            for (; count > 0; count--) {
              this.appendChild( this._createItemElement() );
            }
            return this.children[anIndex];
          ]]>
        </body>
      </method>

      <method name="nextSlot">
        <body>
          <![CDATA[
            if (!this.itemCount) {
              return this._slotAt(0);
            }
            let lastItem = this.items[this.itemCount-1];
            let nextIndex = 1 + Array.indexOf(this.children, lastItem);
            return this._slotAt(nextIndex);
          ]]>
        </body>
      </method>

      <method name="_releaseSlot">
        <parameter name="anItem"/>
        <body>
          <![CDATA[
            // Flush out data and state attributes so we can recycle this slot/element
            let exclude = { value: 1, tiletype: 1 };
            let attrNames = [attr.name for (attr of anItem.attributes)];
            for (let attrName of attrNames) {
              if (!(attrName in exclude))
                anItem.removeAttribute(attrName);
            }
            // clear out inline styles
            anItem.removeAttribute("style");
            // finally clear the value, which should apply the richgrid-empty-item binding
            anItem.removeAttribute("value");
          ]]>
        </body>
      </method>

      <method name="insertItemAt">
        <parameter name="anIndex"/>
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <parameter name="aSkipArrange"/>
        <body>
          <![CDATA[
            anIndex = Math.min(this.itemCount, anIndex);
            let insertedItem;
            let existing = this.getItemAtIndex(anIndex);
            if (existing) {
              // use an empty slot if we have one, otherwise insert it
              let childIndex = Array.indexOf(this.children, existing);
              if (childIndex > 0 && !this.children[childIndex-1].hasAttribute("value")) {
                insertedItem = this.children[childIndex-1];
              } else {
                insertedItem = this.insertBefore(this._createItemElement(),existing);
              }
            }
            if (!insertedItem) {
              insertedItem = this._slotAt(anIndex);
            }
            insertedItem.setAttribute("value", aValue);
            insertedItem.setAttribute("label", aLabel);
            if (!aSkipArrange)
              this.arrangeItems();
            return insertedItem;
          ]]>
        </body>
      </method>

      <method name="removeItemAt">
        <parameter name="anIndex"/>
        <parameter name="aSkipArrange"/>
        <body>
          <![CDATA[
            let item = this.getItemAtIndex(anIndex);
            if (!item)
              return null;
            return this.removeItem(item, aSkipArrange);
          ]]>
        </body>
      </method>

      <method name="removeItem">
        <parameter name="aItem"/>
        <parameter name="aSkipArrange"/>
        <body>
          <![CDATA[
            if (!this.isItem(aItem))
              return null;

            let removal = this.removeChild(aItem);
            // replace the slot if necessary
            if (this.childElementCount < this.minSlots) {
              this.nextSlot();
            }

            if (removal && !aSkipArrange)
                this.arrangeItems();

            // note that after removal the node is unbound
            // so none of the richgriditem binding methods & properties are available
            return removal;
          ]]>
        </body>
      </method>

      <method name="getIndexOfItem">
        <parameter name="anItem"/>
        <body>
          <![CDATA[
            if (!this.isItem(anItem))
              return -1;

            return Array.indexOf(this.items, anItem);
          ]]>
        </body>
      </method>

      <method name="getItemAtIndex">
        <parameter name="anIndex"/>
        <body>
          <![CDATA[
            if (!this._isIndexInBounds(anIndex))
              return null;
            return this.items.item(anIndex);
          ]]>
        </body>
      </method>

      <method name="getItemsByUrl">
        <parameter name="aUrl"/>
        <body>
          <![CDATA[
            return this.querySelectorAll('richgriditem[value="'+aUrl+'"]');
          ]]>
        </body>
      </method>

    <!-- Interface for offsetting selection and checking bounds -->

      <property name="isSelectionAtStart" readonly="true"
                onget="return this.selectedIndex == 0;"/>

      <property name="isSelectionAtEnd" readonly="true"
                onget="return this.selectedIndex == (this.itemCount - 1);"/>

      <property name="isSelectionInStartRow" readonly="true">
        <getter>
          <![CDATA[
            return this.selectedIndex < this.columnCount;
          ]]>
        </getter>
      </property>

      <property name="isSelectionInEndRow" readonly="true">
        <getter>
          <![CDATA[
            let lowerBound = (this.rowCount - 1) * this.columnCount;
            let higherBound = this.rowCount * this.columnCount;

            return this.selectedIndex >= lowerBound &&
                   this.selectedIndex < higherBound;
          ]]>
        </getter>
      </property>

      <method name="offsetSelection">
        <parameter name="aOffset"/>
        <body>
          <![CDATA[
            let newIndex = this.selectedIndex + aOffset;
            if (this._isIndexInBounds(newIndex))
              this.selectedIndex = newIndex;
          ]]>
        </body>
      </method>

      <method name="offsetSelectionByRow">
        <parameter name="aRowOffset"/>
        <body>
          <![CDATA[
            let newIndex = this.selectedIndex + (this.columnCount * aRowOffset);
            if (this._isIndexInBounds(newIndex))
              this.selectedIndex -= this.columnCount;
          ]]>
        </body>
      </method>

      <!-- Interface for grid layout management -->

      <field name="_rowCount">0</field>
      <property name="rowCount" readonly="true" onget="return this._rowCount;"/>
      <field name="_columnCount">0</field>
      <property name="columnCount" readonly="true" onget="return this._columnCount;"/>
      <property name="_containerSize">
        <getter><![CDATA[
            // return the rect that represents our bounding box
            let containerNode = this.hasAttribute("flex") ? this : this.parentNode;
            let rect = containerNode.getBoundingClientRect();
            // return falsy if the container has no height
            return rect.height ? {
              width: rect.width,
              height: rect.height
            } : null;
        ]]></getter>
      </property>

      <property name="_itemSize">
        <getter><![CDATA[
            // return the dimensions that represent an item in the grid

            // grab tile/item dimensions
            this._tileSizes = this._getTileSizes();

            let type = this.getAttribute("tiletype") || "default";
            let dims = this._tileSizes && this._tileSizes[type];
            if (!dims) {
              throw new Error("Missing tile sizes for '" + type + "' type");
            }
            return dims;
        ]]></getter>
      </property>

      <!-- do conditions allow layout/arrange of the grid? -->
      <property name="_canLayout" readonly="true">
        <getter>
          <![CDATA[
            if (!(this._grid && this._grid.style)) {
               return false;
            }

            let gridItemSize = this._itemSize;

            // If we don't have valid item dimensions we can't arrange yet
            if (!(gridItemSize && gridItemSize.height)) {
              return false;
            }

            let container = this._containerSize;
            // If we don't have valid container dimensions we can't arrange yet
            if (!(container && container.height)) {
              return false;
            }
            return true;
          ]]>
        </getter>
      </property>

      <field name="_scheduledArrangeItemsTimerId">null</field>
      <field name="_scheduledArrangeItemsTries">0</field>
      <field name="_maxArrangeItemsRetries">5</field>

      <method name="_scheduleArrangeItems">
        <parameter name="aTime"/>
        <body>
          <![CDATA[
              // cap the number of times we reschedule calling arrangeItems
              if (
                  !this._scheduledArrangeItemsTimerId &&
                  this._maxArrangeItemsRetries > this._scheduledArrangeItemsTries
              ) {
                this._scheduledArrangeItemsTimerId = setTimeout(this.arrangeItems.bind(this), aTime || 0);
                // track how many times we've attempted arrangeItems
                this._scheduledArrangeItemsTries++;
              }
          ]]>
        </body>
      </method>

      <method name="arrangeItems">
        <body>
          <![CDATA[
            if (this.hasAttribute("deferlayout")) {
              return;
            }
            if (!this._canLayout) {
              // try again later
              this._scheduleArrangeItems();
              return;
            }

            let itemDims = this._itemSize;
            let containerDims = this._containerSize;
            let slotsCount = this.childElementCount;

            // reset the flags
            if (this._scheduledArrangeItemsTimerId) {
              clearTimeout(this._scheduledArrangeItemsTimerId);
              delete this._scheduledArrangeItemsTimerId;
            }
            this._scheduledArrangeItemsTries = 0;

            // clear explicit width and columns before calculating from avail. height again
            let gridStyle = this._grid.style;
            gridStyle.removeProperty("min-width");
            gridStyle.removeProperty("-moz-column-count");

            if (this.hasAttribute("vertical")) {
              this._columnCount = Math.floor(containerDims.width / itemDims.width) || 1;
              this._rowCount = Math.floor(slotsCount / this._columnCount);
            } else {
              // rows attribute is fixed number of rows
              let maxRows = Math.floor(containerDims.height / itemDims.height);
              this._rowCount = this.getAttribute("rows") ?
                                  // fit indicated rows when possible
                                  Math.min(maxRows, this.getAttribute("rows")) :
                                  // at least 1 row
                                  Math.min(maxRows, slotsCount) || 1;

              // columns attribute is min number of cols
              this._columnCount = Math.ceil(slotsCount / this._rowCount) || 1;
              if (this.getAttribute("columns")) {
                this._columnCount = Math.max(this._columnCount, this.getAttribute("columns"));
              }
            }

            // width is typically auto, cap max columns by truncating items collection
            // or, setting max-width style property with overflow hidden
            if (this._columnCount) {
              gridStyle.MozColumnCount = this._columnCount;
            }
            this._fireEvent("arranged");
          ]]>
        </body>
      </method>
      <method name="arrangeItemsNow">
        <body>
          <![CDATA[
            this.removeAttribute("deferlayout");
            // cancel any scheduled arrangeItems and reset flags
            if (this._scheduledArrangeItemsTimerId) {
              clearTimeout(this._scheduledArrangeItemsTimerId);
              delete this._scheduledArrangeItemsTimerId;
            }
            this._scheduledArrangeItemsTries = 0;
            // pass over any params
            return this.arrangeItems.apply(this, arguments);
          ]]>
        </body>
      </method>

      <!-- Inteface to suppress selection events -->
      <property name="suppressOnSelect"
                  onget="return this.getAttribute('suppressonselect') == 'true';"
                  onset="this.setAttribute('suppressonselect', val);"/>
      <property name="noContext"
                  onget="return this.hasAttribute('nocontext');"
                  onset="if (val) this.setAttribute('nocontext', true); else this.removeAttribute('nocontext');"/>
      <property name="crossSlideBoundary"
          onget="return this.hasAttribute('crossslideboundary')? this.getAttribute('crossslideboundary') : Infinity;"/>

    <!-- Internal methods -->
      <field name="_xslideHandler"/>
      <constructor>
        <![CDATA[
          // create our quota of item slots
          for (let count = this.childElementCount, slotCount = this.minSlots;
              count < slotCount; count++) {
            this.appendChild( this._createItemElement() );
          }
          if (this.controller && this.controller.gridBoundCallback != undefined)
            this.controller.gridBoundCallback();
          // XXX This event was never actually implemented (bug 223411).
          let event = document.createEvent("Events");
          event.initEvent("contentgenerated", true, true);
          this.dispatchEvent(event);
        ]]>
      </constructor>

      <destructor>
        <![CDATA[
          this.disableCrossSlide();
        ]]>
      </destructor>
      <method name="enableCrossSlide">
        <body>
          <![CDATA[
            // set up cross-slide gesture handling for multiple-selection grids
            if (!this._xslideHandler &&
                "undefined" !== typeof CrossSlide && !this.noContext) {
              this._xslideHandler = new CrossSlide.Handler(this, {
                    REARRANGESTART: this.crossSlideBoundary
              });
            }
          ]]>
        </body>
      </method>

      <method name="disableCrossSlide">
        <body>
          <![CDATA[
            if (this._xslideHandler) {
              this.removeEventListener("touchstart", this._xslideHandler);
              this.removeEventListener("touchmove", this._xslideHandler);
              this.removeEventListener("touchend", this._xslideHandler);
              this._xslideHandler = null;
            }
          ]]>
        </body>
      </method>

      <property name="tileWidth" readonly="true" onget="return this._itemSize.width"/>
      <property name="tileHeight" readonly="true" onget="return this._itemSize.height"/>
      <field name="_tileStyleSheetName">"tiles.css"</field>
      <method name="_getTileSizes">
        <body>
          <![CDATA[
            // Tile sizes are constants, this avoids the need to measure a rendered item before grid layout
            // The defines.inc used by the theme CSS is the single source of truth for these values
            // This method locates and parses out (just) those dimensions from the stylesheet

            let typeSizes = this.ownerDocument.defaultView._richgridTileSizes;
            if (typeSizes && typeSizes["default"]) {
              return typeSizes;
            }

            // cache sizes on the global window object, for reuse between bound nodes
            typeSizes = this.ownerDocument.defaultView._richgridTileSizes = {};

            let sheets = this.ownerDocument.styleSheets;
            // The (first matching) rules that will give us tile type => width/height values
            // The keys in this object are string-matched against the selectorText
            // of rules in our stylesheet. Quoted values in a selector will always use " not '
            let typeSelectors = {
              'richgriditem' : "default",
              'richgriditem[tiletype="thumbnail"]': "thumbnail",
              'richgriditem[search]': "search",
              'richgriditem[compact]': "compact"
            };
            let rules, sheet;
            for (let i=0; (sheet=sheets[i]); i++) {
              if (sheet.href && sheet.href.endsWith( this._tileStyleSheetName )) {
                rules = sheet.cssRules;
                break;
              }
            }
            if (rules) {
              // walk the stylesheet rules until we've matched all our selectors
              for (let i=0, rule;(rule=rules[i]); i++) {
                let type = rule.selectorText && typeSelectors[rule.selectorText];
                if (type) {
                  let sizes = typeSizes[type] = {};
                  typeSelectors[type] = null;
                  delete typeSelectors[type];
                  // we assume px unit for tile dimension values
                  sizes.width =  parseInt(rule.style.getPropertyValue("width"));
                  sizes.height = parseInt(rule.style.getPropertyValue("height"));
                }
                if (!Object.keys(typeSelectors).length)
                  break;
              }
            } else {
              throw new Error("Failed to find stylesheet to parse out richgriditem dimensions\n");
            }
            return typeSizes;
          ]]>
        </body>
      </method>

      <method name="_isIndexInBounds">
        <parameter name="anIndex"/>
        <body>
          <![CDATA[
            return anIndex >= 0 && anIndex < this.itemCount;
          ]]>
        </body>
      </method>

      <method name="_createItemElement">
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <body>
          <![CDATA[
            let item = this.ownerDocument.createElement("richgriditem");
            if (aValue) {
              item.setAttribute("value", aValue);
            }
            if (aLabel) {
              item.setAttribute("label", aLabel);
            }
            if (this.hasAttribute("tiletype")) {
              item.setAttribute("tiletype", this.getAttribute("tiletype"));
            }
            return item;
          ]]>
        </body>
      </method>

      <method name="_fireEvent">
        <parameter name="aType"/>
        <body>
          <![CDATA[
            switch (aType) {
              case "select" :
              case "selectionchange" :
                if (this.suppressOnSelect)
                  return;
                break;
              case "arranged" :
                break;
            }

            let event = document.createEvent("Events");
            event.initEvent(aType, true, true);
            this.dispatchEvent(event);
          ]]>
        </body>
      </method>

      <method name="bendItem">
        <parameter name="aItem"/>
        <parameter name="aEvent"/>
        <body><![CDATA[
          // apply the transform to the contentBox element of the item
          let bendNode = this.isItem(aItem) ? aItem._contentBox : null;
          if (!bendNode || aItem.hasAttribute("bending"))
            return;

          let event = aEvent;
          let rect = bendNode.getBoundingClientRect();
          let angle;
          let x = (event.clientX - rect.left) / rect.width;
          let y = (event.clientY - rect.top) / rect.height;
          let perspective = '450px';
          // scaling factors for the angle of deflection,
          //   based on the aspect-ratio of the tile
          let aspectRatio = rect.width/rect.height;
          let deflectX = 10 * Math.ceil(1/aspectRatio);
          let deflectY = 10 * Math.ceil(aspectRatio);

          if (Math.abs(x - .5) < .1 && Math.abs(y - .5) < .1) {
            bendNode.style.transform = "perspective("+perspective+") translateZ(-10px)";
          }
          else if (x > y) {
            if (1 - y > x) {
              angle = Math.ceil((.5 - y) * deflectY);
              bendNode.style.transform = "perspective("+perspective+") rotateX(" + angle + "deg)";
              bendNode.style.transformOrigin = "center bottom";
            } else {
              angle = Math.ceil((x - .5) * deflectX);
              bendNode.style.transform = "perspective("+perspective+") rotateY(" + angle + "deg)";
              bendNode.style.transformOrigin = "left center";
            }
          } else {
            if (1 - y < x) {
              angle = -Math.ceil((y - .5) * deflectY);
              bendNode.style.transform = "perspective("+perspective+") rotateX(" + angle + "deg)";
              bendNode.style.transformOrigin = "center top";
            } else {
              angle = -Math.ceil((.5 - x) * deflectX);
              bendNode.style.transform = "perspective("+perspective+") rotateY(" + angle + "deg)";
              bendNode.style.transformOrigin = "right center";
            }
          }
          // mark when bend effect is applied
          aItem.setAttribute("bending", true);
        ]]></body>
      </method>

      <method name="unbendItem">
        <parameter name="aItem"/>
        <body><![CDATA[
          // clear the 'bend' transform on the contentBox element of the item
          let bendNode = 'richgriditem' == aItem.nodeName && aItem._contentBox;
          if (bendNode && aItem.hasAttribute("bending")) {
            bendNode.style.removeProperty('transform');
            bendNode.style.removeProperty('transformOrigin');
            aItem.removeAttribute("bending");
          }
        ]]></body>
      </method>
    </implementation>
    <handlers>
      <!--  item bend effect handlers -->
      <handler event="mousedown" button="0" phase="capturing" action="this.bendItem(event.target, event)"/>
      <handler event="touchstart" action="this.bendItem(event.target, event.touches[0])"/>
      <handler event="mouseup" button="0" action="this.unbendItem(event.target)"/>
      <handler event="mouseout" button="0" action="this.unbendItem(event.target)"/>
      <handler event="touchend" action="this.unbendItem(event.target)"/>
      <handler event="touchcancel" action="this.unbendItem(event.target)"/>
      <!--  /item bend effect handler -->

      <handler event="context-action">
        <![CDATA[
          // context-action is an event fired by the appbar typically
          // which directs us to do something to the selected tiles
          switch (event.action) {
            case "clear":
              this.selectNone();
              break;
            default:
              if (this.controller && this.controller.doActionOnSelectedTiles) {
                this.controller.doActionOnSelectedTiles(event.action, event);
              }
          }
        ]]>
      </handler>
      <handler event="MozCrossSliding">
        <![CDATA[
          // MozCrossSliding is swipe gesture across a tile
          // The tile should follow the drag to reinforce the gesture
          // (with inertia/speedbump behavior)
          let state = event.crossSlidingState;
          let thresholds = this._xslideHandler.thresholds;
          let transformValue;
          switch (state) {
            case "cancelled":
              this.unbendItem(event.target);
              event.target.removeAttribute('crosssliding');
              // hopefully nothing else is transform-ing the tile
              event.target.style.removeProperty('transform');
              break;
            case "dragging":
            case "selecting":
              // remove bend/depress effect when a cross-slide begins
              this.unbendItem(event.target);

              event.target.setAttribute("crosssliding", true);
              // just track the mouse in the initial phases of the drag gesture
              transformValue = (event.direction=='x') ?
                                      'translateX('+event.delta+'px)' :
                                      'translateY('+event.delta+'px)';
              event.target.style.transform = transformValue;
              break;
            case "selectSpeedBumping":
            case "speedBumping":
              event.target.setAttribute('crosssliding', true);
              // in speed-bump phase, we add inertia to the drag
              let offset = CrossSlide.speedbump(
                event.delta,
                thresholds.SPEEDBUMPSTART,
                thresholds.SPEEDBUMPEND
              );
              transformValue = (event.direction=='x') ?
                                      'translateX('+offset+'px)' :
                                      'translateY('+offset+'px)';
              event.target.style.transform = transformValue;
              break;
            // "rearranging" case not used or implemented here
            case "completed":
              event.target.removeAttribute('crosssliding');
              event.target.style.removeProperty('transform');
              break;
          }
        ]]>
      </handler>
      <handler event="MozCrossSlideSelect">
        <![CDATA[
          if (this.noContext)
            return;
          this.toggleItemSelection(event.target);
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="richgrid-item">
    <content>
      <html:div anonid="anon-tile" class="tile-content" xbl:inherits="customImage">
        <html:div class="tile-start-container" xbl:inherits="customImage">
          <html:div class="tile-icon-box" anonid="anon-tile-icon-box"><xul:image anonid="anon-tile-icon" xbl:inherits="src=iconURI"/></html:div>
        </html:div>
        <html:div anonid="anon-tile-label" class="tile-desc" xbl:inherits="xbl:text=label"/>
      </html:div>
    </content>

    <implementation>
      <property name="isBound" readonly="true" onget="return !!this._icon"/>
      <constructor>
        <![CDATA[
            this.refresh();
        ]]>
      </constructor>
      <property name="_contentBox" onget="return document.getAnonymousElementByAttribute(this, 'class', 'tile-content');"/>
      <property name="_textbox" onget="return document.getAnonymousElementByAttribute(this, 'class', 'tile-desc');"/>
      <property name="_top" onget="return document.getAnonymousElementByAttribute(this, 'class', 'tile-start-container');"/>
      <property name="_icon" onget="return document.getAnonymousElementByAttribute(this, 'anonid', 'anon-tile-icon');"/>
      <property name="_iconBox" onget="return document.getAnonymousElementByAttribute(this, 'anonid', 'anon-tile-icon-box');"/>
      <property name="_label" onget="return document.getAnonymousElementByAttribute(this, 'anonid', 'anon-tile-label');"/>
      <property name="iconSrc"
                onset="this._icon.src = val; this.setAttribute('iconURI', val);"
                onget="return this._icon.src;" />

      <property name="selected"
                onget="return this.hasAttribute('selected');"
                onset="if (val) this.setAttribute('selected', val); else this.removeAttribute('selected');" />
      <property name="url"
                onget="return this.getAttribute('value')"
                onset="this.setAttribute('value', val);"/>
      <property name="label"
                onget="return this._label.getAttribute('value')"
                onset="this.setAttribute('label', val); this._label.setAttribute('value', val);"/>
      <property name="pinned"
                onget="return this.hasAttribute('pinned')"
                onset="if (val) { this.setAttribute('pinned', val) } else this.removeAttribute('pinned');"/>

      <method name="refresh">
        <body>
          <![CDATA[
            // Prevent an exception in case binding is not done yet.
            if (!this.isBound)
              return;

            // Seed the binding properties from bound-node attribute values
            // Usage: node.refresh()
            //        - reinitializes all binding properties from their associated attributes

            this.iconSrc = this.getAttribute('iconURI');
            this.color = this.getAttribute("customColor");
            this.label = this.getAttribute('label');
            // url getter just looks directly at attribute
            // selected getter just looks directly at attribute
            // pinned getter just looks directly at attribute
            // value getter just looks directly at attribute
            this._contextActions = null;
            this.refreshBackgroundImage();
          ]]>
        </body>
      </method>

      <property name="control">
        <getter><![CDATA[
          let parent = this.parentNode;
          while (parent && parent != this.ownerDocument.documentElement) {
            if (parent instanceof Components.interfaces.nsIDOMXULSelectControlElement)
              return parent;
            parent = parent.parentNode;
          }
          return null;
        ]]></getter>
      </property>

      <property name="color" onget="return this.getAttribute('customColor');">
        <setter><![CDATA[
          if (val) {
            this.setAttribute("customColor", val);
            this._contentBox.style.backgroundColor = val;

            // overridden in tiles.css for non-thumbnail types
            this._label.style.backgroundColor = val.replace(/rgb\(([^\)]+)\)/, 'rgba($1, 0.8)');

            // Small icons get a border+background-color treatment.
            // See tiles.css for large icon overrides
            this._iconBox.style.borderColor = val.replace(/rgb\(([^\)]+)\)/, 'rgba($1, 0.6)');
            this._iconBox.style.backgroundColor = this.hasAttribute("tintColor") ?
                                                    this.getAttribute("tintColor") : "#fff";
          } else {
            this.removeAttribute("customColor");
            this._contentBox.style.removeProperty("background-color");
            this._label.style.removeProperty("background-color");
            this._iconBox.style.removeProperty("border-color");
            this._iconBox.style.removeProperty("background-color");
          }
        ]]></setter>
      </property>

      <property name="backgroundImage" onget="return this.getAttribute('customImage');">
        <setter><![CDATA[
          if (val) {
            this.setAttribute("customImage", val);
            this._top.style.backgroundImage = val;
          } else {
            this.removeAttribute("customImage");
            this._top.style.removeProperty("background-image");
          }
        ]]></setter>
      </property>

      <method name="refreshBackgroundImage">
        <body><![CDATA[
          if (!this.isBound)
            return;
          if (this.backgroundImage) {
            this._top.style.removeProperty("background-image");
            this._top.style.setProperty("background-image", this.backgroundImage);
          }
        ]]></body>
      </method>

      <field name="_contextActions">null</field>
      <property name="contextActions">
        <getter>
          <![CDATA[
            if (!this._contextActions) {
              this._contextActions = new Set();
              let actionSet = this._contextActions;
              let actions = this.getAttribute("data-contextactions");
              if (actions) {
                actions.split(/[,\s]+/).forEach(function(verb){
                  actionSet.add(verb);
                });
              }
            }
            return this._contextActions;
          ]]>
        </getter>
      </property>
    </implementation>

    <handlers>
      <handler event="click" button="0">
        <![CDATA[
          // left-click/touch handler
          this.control.handleItemClick(this, event);
          // Stop this from bubbling, when the richgrid container
          // receives click events, we blur the nav bar.
          event.stopPropagation();
        ]]>
      </handler>

      <handler event="contextmenu">
        <![CDATA[
          // fires for right-click, long-click and (keyboard) contextmenu input
          // toggle the selected state of tiles in a grid
          let gridParent = this.control;
          if (!this.isBound || !gridParent)
            return;
          gridParent.handleItemContextMenu(this, event);
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="richgrid-empty-item">
    <content>
      <html:div anonid="anon-tile" class="tile-content"></html:div>
    </content>
  </binding>

</bindings>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="groupboxBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="groupbox-base">
    <resources>
      <stylesheet src="chrome://global/skin/groupbox.css"/>
    </resources>
  </binding>

  <binding id="groupbox" role="xul:groupbox"
    extends="chrome://global/content/bindings/groupbox.xml#groupbox-base">
    <content>
      <xul:hbox class="groupbox-title" align="center" pack="start">
        <children includes="caption"/>
      </xul:hbox>
      <xul:box flex="1" class="groupbox-body" xbl:inherits="orient,align,pack">
        <children/>
      </xul:box>
    </content>
  </binding>

  <binding id="caption" extends="chrome://global/content/bindings/general.xml#basetext">
    <resources>
      <stylesheet src="chrome://global/skin/groupbox.css"/>
    </resources>
    
    <content>
      <children>
        <xul:image class="caption-icon" xbl:inherits="src=image"/>
        <xul:label class="caption-text" flex="1"
                   xbl:inherits="default,value=label,crop,accesskey"/>
      </children>
    </content>
  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:duration="250">

    <scale android:fromXScale="0.5"
           android:toXScale="1.0"
           android:fromYScale="0.5"
           android:toYScale="1.0"
           android:pivotX="50%"
           android:pivotY="50%"/>

    <alpha android:fromAlpha="0.0"
           android:toAlpha="1.0"/>

</set>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<set xmlns:android="http://schemas.android.com/apk/res/android">

    <scale android:fromXScale="1.0"
           android:toXScale="1.0"
           android:fromYScale="0.3"
           android:toYScale="1.0"
           android:pivotX="0%"
           android:pivotY="0%"
           android:duration="150"/>

    <alpha android:interpolator="@android:anim/decelerate_interpolator"
           android:fromAlpha="0.0"
           android:toAlpha="1.0"
           android:duration="150"/>

</set>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.1 $"/>
		<generation date="$Date: 2009/04/06 11:23:51 $"/>
		<language type="gsw"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:52 $"/>
		<language type="gu"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Gujr</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="guz"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:52 $"/>
		<language type="gv"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:51 $"/>
		<language type="ha"/> 
		<script type="Latn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<level-list xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- LTR -->
    <item android:maxLevel="0" android:drawable="@drawable/handle_start"/>

    <!-- RTL -->
    <item android:maxLevel="1" android:drawable="@drawable/handle_end"/>

</level-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<level-list xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- LTR -->
    <item android:maxLevel="0" android:drawable="@drawable/handle_end"/>

    <!-- RTL -->
    <item android:maxLevel="1" android:drawable="@drawable/handle_start"/>

</level-list>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE overlay [
  <!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd">
  <!ENTITY % applicationsDTD SYSTEM "chrome://browser/locale/preferences/applications.dtd">
  %brandDTD;
  %applicationsDTD;
]>

<bindings id="handlerBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="handler-base" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <implementation>
      <property name="type" readonly="true">
        <getter>
          return this.getAttribute("type");
        </getter>
      </property>
    </implementation>
  </binding>

  <binding id="handler" extends="chrome://browser/content/preferences/handlers.xml#handler-base">
    <content>
      <xul:hbox flex="1" equalsize="always">
        <xul:hbox flex="1" align="center" xbl:inherits="tooltiptext=typeDescription">
          <xul:image src="moz-icon://goat?size=16" class="typeIcon"
                     xbl:inherits="src=typeIcon" height="16" width="16"/>
          <xul:label flex="1" crop="end" xbl:inherits="value=typeDescription"/>
        </xul:hbox>
        <xul:hbox flex="1" align="center" xbl:inherits="tooltiptext=actionDescription">
          <xul:image xbl:inherits="src=actionIcon" height="16" width="16" class="actionIcon"/>
          <xul:label flex="1" crop="end" xbl:inherits="value=actionDescription"/>
        </xul:hbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="handler-selected" extends="chrome://browser/content/preferences/handlers.xml#handler-base">
    <content>
      <xul:hbox flex="1" equalsize="always">
        <xul:hbox flex="1" align="center" xbl:inherits="tooltiptext=typeDescription">
          <xul:image src="moz-icon://goat?size=16" class="typeIcon"
                     xbl:inherits="src=typeIcon" height="16" width="16"/>
          <xul:label flex="1" crop="end" xbl:inherits="value=typeDescription"/>
        </xul:hbox>
        <xul:hbox flex="1">
          <xul:menulist class="actionsMenu" flex="1" crop="end" selectedIndex="1"
                        xbl:inherits="tooltiptext=actionDescription"
                        oncommand="gApplicationsPane.onSelectAction(event.originalTarget)">
            <xul:menupopup/>
          </xul:menulist>
        </xul:hbox>
      </xul:hbox>
    </content>

    <implementation>
      <constructor>
        gApplicationsPane.rebuildActionsMenu();
      </constructor>
    </implementation>

  </binding>

  <binding id="offlineapp"
	   extends="chrome://global/content/bindings/listbox.xml#listitem">
    <content>
      <children>
	<xul:listcell xbl:inherits="label=host"/>
	<xul:listcell xbl:inherits="label=usage"/>
      </children>
    </content>
  </binding>

</bindings>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="hanlder-bindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="handler"
           extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">

    <content>
      <xul:vbox pack="center">
        <xul:image xbl:inherits="src=image" height="32" width="32"/>
      </xul:vbox>
      <xul:vbox flex="1">
        <xul:label class="name" xbl:inherits="value=name"/>
        <xul:label class="description" xbl:inherits="value=description"/>
      </xul:vbox>
    </content>
    <implementation>
      <property name="label" onget="return this.getAttribute('name') + ' ' + this.getAttribute('description');"/>
    </implementation>
  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.14 $"/>
		<generation date="$Date: 2008/05/25 01:05:52 $"/>
		<language type="haw"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:51 $"/>
		<language type="ha"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title>hc_nodtdstaff</title></head><body onload="parent.loadComplete()">
 <p>
  <em>EMP0001</em>
  <strong>Margaret Martin</strong>
  <code>Accountant</code>           
  <sup>56,000</sup>
  <var>Female</var>
  <acronym title="Yes">1230 North Ave. Dallas, Texas 98551</acronym>
 </p>
</body></html>
<?xml version="1.0"?><?TEST-STYLE PIDATA?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd" [
   <!ENTITY alpha "&#945;">
   <!ENTITY beta "&#946;">
   <!ENTITY gamma "&#947;">
   <!ENTITY delta "&#948;">
   <!ENTITY epsilon "&#949;">
   <!ENTITY alpha "&#950;">
   <!NOTATION notation1 PUBLIC "notation1File">
   <!NOTATION notation2 SYSTEM "notation2File">
   <!ATTLIST acronym dir CDATA "ltr">
]>
<!-- This is comment number 1.-->
<html xmlns='http://www.w3.org/1999/xhtml'><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title>hc_staff</title><script type="text/javascript" src="svgunit.js"/><script charset="UTF-8" type="text/javascript" src="svgtest.js"/><script type='text/javascript'>function loadComplete() { startTest(); }</script></head><body onload="parent.loadComplete()">
 <p>
  <em>EMP0001</em>
  <strong>Margaret Martin</strong>
  <code>Accountant</code>           
  <sup>56,000</sup>
  <var>Female</var>
  <acronym title="Yes">1230 North Ave. Dallas, Texas 98551</acronym>
 </p>
 <p>
  <em>EMP0002</em>
  <strong>Martha RaynoldsThis is a CDATASection with EntityReference number 2 &amp;ent2;
This is an adjacent CDATASection with a reference to a tab &amp;tab;</strong>
  <code>Secretary</code>
  <sup>35,000</sup>
  <var>Female</var>
  <acronym title="Yes" class="Yes">&beta; Dallas, &gamma;
 98554</acronym>
 </p>
 <p>
  <em>EMP0003</em>
  <strong>Roger
 Jones</strong>
  <code>Department Manager</code>
  <sup>100,000</sup>
  <var>&delta;</var>
  <acronym title="Yes" class="No">PO Box 27 Irving, texas 98553</acronym>
 </p>
 <p>
  <em>EMP0004</em>
  <strong>Jeny Oconnor</strong>
  <code>Personnel Director</code>
  <sup>95,000</sup>
  <var>Female</var>
  <acronym title="Yes" class="Y&alpha;">27 South Road. Dallas, Texas 98556</acronym>
 </p>
 <p>
  <em>EMP0005</em>
  <strong>Robert Myers</strong>
  <code>Computer Specialist</code>
  <sup>90,000</sup>
  <var>male</var>
  <acronym title="Yes">1821 Nordic. Road, Irving Texas 98558</acronym>
 </p>
</body></html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - HEADING</title>
</head>
<body onload="parent.loadComplete()">
<h1 align="center">Head Element 1</h1>
<h2 align="left">Head Element 2</h2>
<h3 align="right">Head Element 3</h3>
<h4 align="right">Head Element 4</h4>
<h5 align="center">Head Element 5</h5>
<h6 align="left">Head Element 6</h6>
</body>
</html>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:48 $"/>
        <language type="he"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:50 $"/>
        <language type="hi"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

     <ImageView android:id="@+id/icon"
                android:layout_width="@dimen/home_banner_icon_width"
                android:layout_height="@dimen/home_banner_icon_height"
                android:layout_marginLeft="10dp"
                android:scaleType="centerInside"/>

     <org.mozilla.gecko.widget.EllipsisTextView
         android:id="@+id/text"
         android:layout_width="0dip"
         android:layout_height="match_parent"
         android:layout_weight="1"
         android:layout_marginLeft="10dp"
         android:paddingTop="7dp"
         android:paddingBottom="7dp"
         android:textAppearance="@style/TextAppearance.Widget.HomeBanner"
         android:layout_gravity="bottom"
         android:gravity="center_vertical"
         gecko:ellipsizeAtLine="3"/>

    <ImageButton android:id="@+id/close"
                 android:layout_width="@dimen/home_banner_close_width"
                 android:layout_height="match_parent"
                 android:background="@drawable/home_banner"
                 android:scaleType="center"
                 android:contentDescription="@string/close_tab"
                 android:src="@drawable/tab_close"/>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.home.HomeBanner xmlns:android="http://schemas.android.com/apk/res/android"
                                   android:id="@+id/home_banner"
                                   style="@style/Widget.HomeBanner"
                                   android:layout_width="match_parent"
                                   android:layout_height="match_parent"
                                   android:background="@drawable/home_banner"
                                   android:gravity="center_vertical"
                                   android:visibility="gone"
                                   android:clickable="true"
                                   android:focusable="true"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="match_parent"
             android:layout_height="match_parent">

    <ViewStub android:id="@+id/home_empty_view_stub"
              android:layout="@layout/home_empty_panel"
              android:layout_width="match_parent"
              android:layout_height="match_parent"/>

    <org.mozilla.gecko.home.BookmarksListView
            android:id="@+id/bookmarks_list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

</FrameLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/home_open_new_tab"
          android:title="@string/contextmenu_open_new_tab"/>

    <item android:id="@+id/home_open_private_tab"
          android:title="@string/contextmenu_open_private_tab"/>

    <item android:id="@+id/home_copyurl"
          android:title="@string/contextmenu_copyurl"/>

    <item android:id="@+id/home_share"
          android:title="@string/contextmenu_share"/>

    <item android:id="@+id/top_sites_edit"
          android:title="@string/contextmenu_top_sites_edit"/>

    <item android:id="@+id/top_sites_pin"
          android:title="@string/contextmenu_top_sites_pin"/>

    <item android:id="@+id/top_sites_unpin"
          android:title="@string/contextmenu_top_sites_unpin"/>

    <item android:id="@+id/home_edit_bookmark"
          android:title="@string/contextmenu_edit_bookmark"/>

    <item android:id="@+id/home_remove"
          android:title="@string/contextmenu_remove"/>

    <item android:id="@+id/home_add_to_launcher"
          android:title="@string/contextmenu_add_to_launcher"/>

</menu>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/home_empty_view"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical"
              android:gravity="center"
              android:paddingLeft="50dp"
              android:paddingRight="50dp">

    <!-- Empty spacer view -->
    <View android:layout_width="match_parent"
          android:layout_height="0dip"
          android:layout_weight="1"/>

    <ImageView android:id="@+id/home_empty_image"
               android:layout_width="90dp"
               android:layout_height="90dp"
               android:layout_marginBottom="10dp"
               android:gravity="top|center"
               android:scaleType="fitCenter"/>

    <TextView android:id="@+id/home_empty_text"
              android:layout_width="match_parent"
              android:layout_height="0dip"
              android:gravity="top|center"
              android:textAppearance="@style/TextAppearance.EmptyMessage"
              android:layout_weight="2"/>

    <TextView android:id="@+id/home_empty_hint"
              android:layout_width="match_parent"
              android:layout_height="0dip"
              android:visibility="gone"
              android:gravity="top|center"
              android:textAppearance="@style/TextAppearance.EmptyHint"
              android:textColorLink="#FFA62F"
              android:layout_weight="4"/>

</LinearLayout>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/home_empty_view"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical"
              android:gravity="center">

    <!-- Empty spacer view -->
    <View android:layout_width="match_parent"
          android:layout_height="0dip"
          android:layout_weight="1"/>

    <ImageView android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:gravity="top|center"
               android:scaleType="center"
               android:src="@drawable/icon_reading_list_empty"
               android:paddingBottom="10dp"/>

    <TextView android:layout_width="match_parent"
              android:layout_height="0dip"
              android:gravity="top|center"
              android:text="@string/home_reading_list_empty"
              android:textAppearance="@style/TextAppearance.EmptyMessage"
              android:paddingLeft="50dp"
              android:paddingRight="50dp"
              android:layout_weight="3"/>

    <ImageView android:src="@drawable/divider_horizontal"
               android:layout_width="match_parent"
               android:layout_height="1dip"
               android:paddingLeft="25dp"
               android:paddingRight="25dp"/>

    <TextView android:id="@+id/home_empty_hint"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:gravity="bottom"
              android:text="@string/home_reading_list_hint"
              android:textAppearance="@style/TextAppearance.Small"
              android:contentDescription="@string/home_reading_list_hint_accessible"
              android:paddingTop="20dp"
              android:paddingBottom="15dp"
              android:paddingLeft="25dp"
              android:paddingRight="40dp"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          style="@style/Widget.Home.HeaderItem"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical">

    <include layout="@layout/home_list"/>

    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:background="@color/home_button_bar_bg">

        <Button android:id="@+id/clear_history_button"
                style="@style/Widget.Home.ActionButton"
                android:text="@string/home_clear_history_button"
                android:gravity="center"
                android:visibility="gone"/>

    </LinearLayout>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.home.TwoLinePageRow xmlns:android="http://schemas.android.com/apk/res/android"
                                       android:layout_width="match_parent"
                                       android:layout_height="@dimen/page_row_height"
                                       android:minHeight="@dimen/page_row_height"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <ViewStub android:id="@+id/home_empty_view_stub"
              android:layout="@layout/home_empty_panel"
              android:layout_width="match_parent"
              android:layout_height="match_parent"/>

    <org.mozilla.gecko.home.HomeListView
            android:id="@+id/list"
            style="@style/Widget.Home.HomeList"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:text="@string/home_open_all"
          style="@style/Widget.Home.ActionItem"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<layer-list xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item android:maxLevel="0" android:drawable="@android:color/white"/>

    <item>
      <bitmap android:src="@drawable/icon_home_empty_firefox"
              android:gravity="center"/>
    </item>

</layer-list><?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- This file is used to include the home pager in gecko app
     layout based on screen size -->

<org.mozilla.gecko.home.HomePager xmlns:android="http://schemas.android.com/apk/res/android"
                                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                                  android:id="@+id/home_pager"
                                  android:layout_width="match_parent"
                                  android:layout_height="match_parent"
                                  android:background="@android:color/white">

    <org.mozilla.gecko.home.TabMenuStrip android:layout_width="match_parent"
                                         android:layout_height="@dimen/tabs_strip_height"
                                         android:background="@color/background_light"
                                         android:layout_gravity="top"
                                         gecko:strip="@drawable/home_tab_menu_strip"/>

</org.mozilla.gecko.home.HomePager>
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:left="-1dp"
          android:right="-1dp"
          android:top="-1dp">

        <shape android:shape="rectangle" >
            <stroke android:width="1px"
                    android:color="@color/divider_light" />

            <solid android:color="#00000000" />
        </shape>
    </item>

</layer-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical">

    <ViewStub android:id="@+id/home_empty_view_stub"
              android:layout="@layout/home_empty_reading_panel"
              android:layout_width="match_parent"
              android:layout_height="match_parent"/>

    <org.mozilla.gecko.home.HomeListView android:id="@+id/list"
                                         style="@style/Widget.ReadingListView"
                                         android:layout_width="match_parent"
                                         android:layout_height="match_parent"/>
</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical">

    <include layout="@layout/home_list"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.home.TwoLinePageRow xmlns:android="http://schemas.android.com/apk/res/android"
                                       style="@style/Widget.RemoteTabsItemView"
                                       android:layout_width="match_parent"
                                       android:layout_height="@dimen/page_row_height"
                                       android:minHeight="@dimen/page_row_height"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/home_remote_tabs_hide_client"
          android:title="@string/pref_panels_hide"/>

    <item android:id="@+id/home_remote_tabs_show_client"
          android:title="@string/pref_panels_show"/>

</menu>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:gecko="http://schemas.android.com/apk/res-auto"
    style="@style/Widget.RemoteTabsClientView"
    android:gravity="center_vertical"
    android:layout_width="match_parent"
    android:layout_height="@dimen/page_group_height"
    android:minHeight="@dimen/page_group_height">

    <ImageView
        android:id="@+id/device_type"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginLeft="5dp"
        android:layout_gravity="center_vertical"
        android:scaleType="center"
        tools:src="@drawable/sync_mobile"/>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical">

        <org.mozilla.gecko.widget.FadedSingleColorTextView
            android:id="@+id/client"
            style="@style/Widget.TwoLinePageRow.Title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            gecko:fadeWidth="30dp"
            tools:text="Firefox on Nexus 5"/>

        <TextView
            android:id="@+id/last_synced"
            style="@style/Widget.TwoLinePageRow.Url"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:maxLength="1024"
            tools:text="Last synced: 5 minutes ago"/>
    </LinearLayout>

    <ImageView
        android:id="@+id/device_expanded"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="15dip"
        android:scaleType="center"
        tools:src="@drawable/home_group_expanded"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<!-- This layout is actually necessary because of an interaction
     between ExpandableListView and onClick handling.  We need a child
     to attach a click listener to. -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:gecko="http://schemas.android.com/apk/res-auto"
    style="@style/Widget.RemoteTabsClientView"
    android:layout_width="match_parent"
    android:layout_height="@dimen/home_remote_tabs_hidden_footer_height"
    android:gravity="center_vertical" >

    <TextView
        android:id="@+id/hidden_devices"
        style="@style/Widget.Home.ActionItem"
        android:background="@drawable/action_bar_button"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:maxLength="1024"
        android:textColor="@color/home_text_color_disabled" />

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical">

    <ViewStub android:id="@+id/home_empty_view_stub"
              android:layout="@layout/home_empty_panel"
              android:layout_width="match_parent"
              android:layout_height="match_parent"/>

    <org.mozilla.gecko.widget.GeckoSwipeRefreshLayout
                 android:id="@+id/remote_tabs_refresh_layout"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent">

        <org.mozilla.gecko.home.HomeExpandableListView
                android:id="@+id/list"
                style="@style/Widget.RemoteTabsListView"
                android:groupIndicator="@android:color/transparent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

    </org.mozilla.gecko.widget.GeckoSwipeRefreshLayout>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical">

    <FrameLayout android:id="@+id/remote_tabs_container"
                 android:layout_width="match_parent"
                 android:layout_height="0dp"
                 android:layout_weight="1" />

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.home.SearchEngineRow xmlns:android="http://schemas.android.com/apk/res/android"
                                        android:layout_width="match_parent"
                                        android:layout_height="wrap_content"
                                        android:minHeight="@dimen/search_row_height"
                                        android:duplicateParentState="true"
                                        android:paddingTop="7dp"
                                        android:paddingBottom="7dp"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:background="@color/background_light">

    <LinearLayout android:id="@+id/prompt"
                  android:focusable="true"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal"
                  android:minHeight="@dimen/search_row_height"
                  android:gravity="center_vertical"
                  android:padding="10dip">

        <TextView android:id="@+id/suggestions_prompt_title"
                  android:layout_height="wrap_content"
                  android:layout_width="0dp"
                  android:layout_marginLeft="6dip"
                  android:layout_weight="1"
                  android:textAppearance="@style/TextAppearance.Widget.SuggestionsPrompt"/>

        <TextView android:id="@+id/suggestions_prompt_yes"
                  android:layout_height="wrap_content"
                  android:layout_width="wrap_content"
                  android:layout_marginLeft="15dip"
                  android:textAppearance="@style/TextAppearance.Widget.SuggestionsPrompt"
                  android:background="@drawable/suggestion_selector"
                  android:paddingLeft="15dp"
                  android:paddingRight="15dp"
                  android:paddingTop="7dp"
                  android:paddingBottom="7dp"
                  android:focusable="true"
                  android:text="@string/button_yes" />

        <TextView android:id="@+id/suggestions_prompt_no"
                  android:layout_height="wrap_content"
                  android:layout_width="wrap_content"
                  android:layout_marginLeft="6dip"
                  android:textAppearance="@style/TextAppearance.Widget.SuggestionsPrompt"
                  android:background="@drawable/suggestion_selector"
                  android:nextFocusRight="@+id/suggestions_prompt_no"
                  android:paddingLeft="15dp"
                  android:paddingRight="15dp"
                  android:paddingTop="7dp"
                  android:paddingBottom="7dp"
                  android:focusable="true"
                  android:text="@string/button_no" />

    </LinearLayout>

</FrameLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.home.HomeListView xmlns:android="http://schemas.android.com/apk/res/android"
                                     android:id="@+id/list"
                                     style="@style/Widget.TopSitesListView"
                                     android:layout_width="match_parent"
                                     android:layout_height="match_parent"/>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:51 $"/>
        <language type="hr"/>
    </identity>
</ldml>
<html xmlns:py="http://genshi.edgewall.org/">
  <head>
    <meta charset="utf8"/>
    <title>HTML 5 Parser tests ${file_name}</title>
    <meta name="timeout" content="long"/>
  </head>
  <body>
    <h1>html5lib Parser Test</h1>
    <div id="log"></div>
    <script src="common.js"></script>
    <script src="test.js"></script>
    <script src="/resources/testharness.js"></script>
    <script src="/resources/testharnessreport.js"></script>
    <script>

      var num_iframes = 8;

      var order = [<py:for each="test in tests">'${test.id}',</py:for>];
      var tests = {
          <py:for each="test in tests">"${test.id}":[async_test('${file_name} ${test.id}'), ${test.string_uri_encoded_input}, ${test.string_escaped_expected}, '${test.container}'],</py:for>
      }

      init_tests("innerHTML");

    </script>
  </body>
</html>
<html xmlns:py="http://genshi.edgewall.org/">
  <head>
    <meta charset="utf8"/>
    <title>HTML 5 Parser tests ${file_name}</title>
    <meta name="timeout" content="long"/>
  </head>
  <body>
    <h1>html5lib Parser Test</h1>
    <div id="log"></div>
    <script src="common.js"></script>
    <script src="test.js"></script>
    <script src="template.js"></script>
    <script src="/resources/testharness.js"></script>
    <script src="/resources/testharnessreport.js"></script>
    <script>
      var num_iframes = 8;

      var order = [<py:for each="test in tests">'${test.id}',</py:for>];
      var tests = {
          <py:for each="test in tests">"${test.id}":[async_test('${file_name} ${test.id}'), ${test.string_uri_encoded_input}, ${test.string_escaped_expected}],</py:for>
      }
      init_tests(get_type());
    </script>

  </body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - Html</title>
</head>
<body onload="parent.loadComplete()">
<p>Hello, World.</p>
</body>
</html>


<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:52 $"/>
        <language type="hu"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:54 $"/>
        <language type="hy"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">

     <solid android:color="@android:color/transparent"/>

</shape>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">

     <solid android:color="@android:color/transparent"/>

</shape>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">

     <solid android:color="@android:color/transparent"/>

</shape>
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2012 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_focused="true"
          android:state_pressed="true"
          android:drawable="@drawable/grid_icon_bg_focused" />

    <item android:state_activated="true"
          android:drawable="@drawable/grid_icon_bg_activated" />

    <item android:drawable="@android:color/transparent" />

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!--
  //device/apps/common/res/any/layout/resolve_list_item.xml
  Copyright 2006, The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:gravity="center"
              android:orientation="vertical"
              android:layout_height="wrap_content"
              android:layout_width="match_parent"
              android:background="@drawable/icon_grid_item_bg"
              android:padding="16dp">

    <!-- Extended activity info to distinguish between duplicate activity names -->
    <TextView android:id="@android:id/text2"
              android:textAppearance="?android:attr/textAppearance"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:gravity="center"
              android:minLines="2"
              android:maxLines="2"
              android:paddingTop="4dip"
              android:paddingBottom="4dip" />

    <!-- Activity icon when presenting dialog
         Size will be filled in by ResolverActivity -->
    <ImageView android:id="@+id/icon"
               android:layout_width="0dp"
               android:layout_height="0dp"
               android:scaleType="fitCenter" />

    <!-- Activity name -->
    <TextView android:id="@android:id/text1"
              android:textAppearance="?android:attr/textAppearanceSmall"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:gravity="center"
              android:minLines="2"
              android:maxLines="2"
              android:paddingTop="4dip"
              android:paddingBottom="4dip" />
</LinearLayout>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<GridView xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_height="wrap_content"
          android:layout_width="match_parent"
          android:choiceMode="singleChoice"
          android:padding="@dimen/icongrid_padding"/>
<!--
/*
*******************************************************************************
* Copyright (C) 2005-2013, International Business Machines Corporation and    *
* others. All Rights Reserved.	                                         *
*******************************************************************************
*/
-->
<config type="icu-config">
	<!-- This is used by CLDRBuild.java and CLDRConverterTool.java in org/unicode/cldr/ant/ -->
	<locales>
		<include locales="af"/>
		<include locales="af_NA"/>
		<include locales="af_ZA"/>
		<include locales="agq"/>
		<include locales="agq_CM"/>
		<include locales="ak"/>
		<include locales="ak_GH"/>
		<include locales="am"/>
		<include locales="am_ET"/>
		<include locales="ar"/>
		<include locales="ar_001"/>
		<include locales="ar_AE"/>
		<include locales="ar_BH"/>
		<include locales="ar_DJ"/>
		<include locales="ar_DZ"/>
		<include locales="ar_EG"/>
		<include locales="ar_EH"/>
		<include locales="ar_ER"/>
		<include locales="ar_IL"/>
		<include locales="ar_IQ"/>
		<include locales="ar_JO"/>
		<include locales="ar_KM"/>
		<include locales="ar_KW"/>
		<include locales="ar_LB"/>
		<include locales="ar_LY"/>
		<include locales="ar_MA"/>
		<include locales="ar_MR"/>
		<include locales="ar_OM"/>
		<include locales="ar_PS"/>
		<include locales="ar_QA"/>
		<include locales="ar_SA"/>
		<include locales="ar_SD"/>
		<include locales="ar_SO"/>
		<include locales="ar_SS"/>
		<include locales="ar_SY"/>
		<include locales="ar_TD"/>
		<include locales="ar_TN"/>
		<include locales="ar_YE"/>
		<include locales="as"/>
		<include locales="as_IN"/>
		<include locales="asa"/>
		<include locales="asa_TZ"/>
		<include locales="az"/>
		<include locales="az_AZ"/>
		<include locales="az_Cyrl"/>
		<include locales="az_Cyrl_AZ"/>
		<include locales="az_Latn"/>
		<include locales="az_Latn_AZ"/>
		<include locales="bas"/>
		<include locales="bas_CM"/>
		<include locales="be"/>
		<include locales="be_BY"/>
		<include locales="bem"/>
		<include locales="bem_ZM"/>
		<include locales="bez"/>
		<include locales="bez_TZ"/>
		<include locales="bg"/>
		<include locales="bg_BG"/>
		<include locales="bm"/>
		<include locales="bm_ML"/>
		<include locales="bn"/>
		<include locales="bn_BD"/>
		<include locales="bn_IN"/>
		<include locales="bo"/>
		<include locales="bo_CN"/>
		<include locales="bo_IN"/>
		<include locales="br"/>
		<include locales="br_FR"/>
		<include locales="brx"/>
		<include locales="brx_IN"/>
		<include locales="bs"/>
		<include locales="bs_Cyrl"/>
		<include locales="bs_Cyrl_BA"/>
		<include locales="bs_Latn"/>
		<include locales="bs_Latn_BA"/>
		<include locales="bs_BA"/>
		<include locales="ca"/>
		<include locales="ca_AD"/>
		<include locales="ca_ES"/>
		<include locales="ca_FR"/>
		<include locales="ca_IT"/>
		<include locales="cgg"/>
		<include locales="cgg_UG"/>
		<include locales="chr"/>
		<include locales="chr_US"/>
		<include locales="cs"/>
		<include locales="cs_CZ"/>
		<include locales="cy"/>
		<include locales="cy_GB"/>
		<include locales="da"/>
		<include locales="da_DK"/>
		<include locales="da_GL"/>
		<include locales="dav"/>
		<include locales="dav_KE"/>
		<include locales="de"/>
		<include locales="de_AT"/>
		<include locales="de_BE"/>
		<include locales="de_CH"/>
		<include locales="de_DE"/>
		<include locales="de_LI"/>
		<include locales="de_LU"/>
		<include locales="dje"/>
		<include locales="dje_NE"/>
		<include locales="dua"/>
		<include locales="dua_CM"/>
		<include locales="dyo"/>
		<include locales="dyo_SN"/>
		<include locales="dz"/>
		<include locales="dz_BT"/>
		<include locales="ebu"/>
		<include locales="ebu_KE"/>
		<include locales="ee"/>
		<include locales="ee_GH"/>
		<include locales="ee_TG"/>
		<include locales="el"/>
		<include locales="el_CY"/>
		<include locales="el_GR"/>
		<include locales="en"/>
		<include locales="en_001"/>
		<include locales="en_150"/>
		<include locales="en_AG"/>
		<include locales="en_AI"/>
		<include locales="en_AS"/>
		<include locales="en_AU"/>
		<include locales="en_BB"/>
		<include locales="en_BE"/>
		<include locales="en_BM"/>
		<include locales="en_BS"/>
		<include locales="en_BW"/>
		<include locales="en_BZ"/>
		<include locales="en_CA"/>
		<include locales="en_CC"/>
		<include locales="en_CK"/>
		<include locales="en_CM"/>
		<include locales="en_CX"/>
		<include locales="en_DG"/>
		<include locales="en_DM"/>
		<include locales="en_ER"/>
		<include locales="en_FJ"/>
		<include locales="en_FK"/>
		<include locales="en_FM"/>
		<include locales="en_GB"/>
		<include locales="en_GD"/>
		<include locales="en_GG"/>
		<include locales="en_GH"/>
		<include locales="en_GI"/>
		<include locales="en_GM"/>
		<include locales="en_GU"/>
		<include locales="en_GY"/>
		<include locales="en_HK"/>
		<include locales="en_IE"/>
		<include locales="en_IM"/>
		<include locales="en_IN"/>
		<include locales="en_IO"/>
		<include locales="en_JE"/>
		<include locales="en_JM"/>
		<include locales="en_KE"/>
		<include locales="en_KI"/>
		<include locales="en_KN"/>
		<include locales="en_KY"/>
		<include locales="en_LC"/>
		<include locales="en_LR"/>
		<include locales="en_LS"/>
		<include locales="en_MG"/>
		<include locales="en_MH"/>
		<include locales="en_MO"/>
		<include locales="en_MP"/>
		<include locales="en_MS"/>
		<include locales="en_MT"/>
		<include locales="en_MU"/>
		<include locales="en_MW"/>
		<include locales="en_NA"/>
		<include locales="en_NF"/>
		<include locales="en_NG"/>
		<include locales="en_NR"/>
		<include locales="en_NU"/>
		<include locales="en_NZ"/>
		<include locales="en_PG"/>
		<include locales="en_PH"/>
		<include locales="en_PK"/>
		<include locales="en_PN"/>
		<include locales="en_PR"/>
		<include locales="en_PW"/>
		<include locales="en_RH"/>
		<include locales="en_RW"/>
		<include locales="en_SB"/>
		<include locales="en_SC"/>
		<include locales="en_SD"/>
		<include locales="en_SG"/>
		<include locales="en_SH"/>
		<include locales="en_SL"/>
		<include locales="en_SS"/>
		<include locales="en_SX"/>
		<include locales="en_SZ"/>
		<include locales="en_TC"/>
		<include locales="en_TK"/>
		<include locales="en_TO"/>
		<include locales="en_TT"/>
		<include locales="en_TV"/>
		<include locales="en_TZ"/>
		<include locales="en_UG"/>
		<include locales="en_UM"/>
		<include locales="en_US"/>
		<include locales="en_US_POSIX"/>
		<include locales="en_VC"/>
		<include locales="en_VG"/>
		<include locales="en_VI"/>
		<include locales="en_VU"/>
		<include locales="en_WS"/>
		<include locales="en_ZA"/>
		<include locales="en_ZM"/>
		<include locales="en_ZW"/>
		<include locales="eo"/>
		<include locales="es"/>
		<include locales="es_419"/>
		<include locales="es_AR"/>
		<include locales="es_BO"/>
		<include locales="es_CL"/>
		<include locales="es_CO"/>
		<include locales="es_CR"/>
		<include locales="es_CU"/>
		<include locales="es_DO"/>
		<include locales="es_EA"/>
		<include locales="es_EC"/>
		<include locales="es_ES"/>
		<include locales="es_GQ"/>
		<include locales="es_GT"/>
		<include locales="es_HN"/>
		<include locales="es_IC"/>
		<include locales="es_MX"/>
		<include locales="es_NI"/>
		<include locales="es_PA"/>
		<include locales="es_PE"/>
		<include locales="es_PH"/>
		<include locales="es_PR"/>
		<include locales="es_PY"/>
		<include locales="es_SV"/>
		<include locales="es_US"/>
		<include locales="es_UY"/>
		<include locales="es_VE"/>
		<include locales="et"/>
		<include locales="et_EE"/>
		<include locales="eu"/>
		<include locales="eu_ES"/>
		<include locales="ewo"/>
		<include locales="ewo_CM"/>
		<include locales="fa"/>
		<include locales="fa_AF"/>
		<include locales="fa_IR"/>
		<include locales="ff"/>
		<include locales="ff_SN"/>
		<include locales="fi"/>
		<include locales="fi_FI"/>
		<include locales="fil"/>
		<include locales="fil_PH"/>
		<include locales="fo"/>
		<include locales="fo_FO"/>
		<include locales="fr"/>
		<include locales="fr_BE"/>
		<include locales="fr_BF"/>
		<include locales="fr_BI"/>
		<include locales="fr_BJ"/>
		<include locales="fr_BL"/>
		<include locales="fr_CA"/>
		<include locales="fr_CD"/>
		<include locales="fr_CF"/>
		<include locales="fr_CG"/>
		<include locales="fr_CH"/>
		<include locales="fr_CI"/>
		<include locales="fr_CM"/>
		<include locales="fr_DJ"/>
		<include locales="fr_DZ"/>
		<include locales="fr_FR"/>
		<include locales="fr_GA"/>
		<include locales="fr_GF"/>
		<include locales="fr_GN"/>
		<include locales="fr_GP"/>
		<include locales="fr_GQ"/>
		<include locales="fr_HT"/>
		<include locales="fr_KM"/>
		<include locales="fr_LU"/>
		<include locales="fr_MA"/>
		<include locales="fr_MC"/>
		<include locales="fr_MF"/>
		<include locales="fr_MG"/>
		<include locales="fr_ML"/>
		<include locales="fr_MQ"/>
		<include locales="fr_MR"/>
		<include locales="fr_MU"/>
		<include locales="fr_NC"/>
		<include locales="fr_NE"/>
		<include locales="fr_PF"/>
		<include locales="fr_PM"/>
		<include locales="fr_RE"/>
		<include locales="fr_RW"/>
		<include locales="fr_SC"/>
		<include locales="fr_SN"/>
		<include locales="fr_SY"/>
		<include locales="fr_TD"/>
		<include locales="fr_TG"/>
		<include locales="fr_TN"/>
		<include locales="fr_VU"/>
		<include locales="fr_WF"/>
		<include locales="fr_YT"/>
		<include locales="ga"/>
		<include locales="ga_IE"/>
		<include locales="gl"/>
		<include locales="gl_ES"/>
		<include locales="gsw"/>
		<include locales="gsw_CH"/>
		<include locales="gsw_LI"/>
		<include locales="gu"/>
		<include locales="gu_IN"/>
		<include locales="guz"/>
		<include locales="guz_KE"/>
		<include locales="gv"/>
		<include locales="gv_IM"/>
		<include locales="ha"/>
		<include locales="ha_Latn"/>
		<include locales="ha_Latn_GH"/>
		<include locales="ha_Latn_NE"/>
		<include locales="ha_Latn_NG"/>
		<include locales="ha_GH"/>
		<include locales="ha_NE"/>
		<include locales="ha_NG"/>
		<include locales="haw"/>
		<include locales="haw_US"/>
		<include locales="he"/>
		<include locales="he_IL"/>
		<include locales="hi"/>
		<include locales="hi_IN"/>
		<include locales="hr"/>
		<include locales="hr_BA"/>
		<include locales="hr_HR"/>
		<include locales="hu"/>
		<include locales="hu_HU"/>
		<include locales="hy"/>
		<include locales="hy_AM"/>
		<include locales="id"/>
		<include locales="id_ID"/>
		<include locales="ig"/>
		<include locales="ig_NG"/>
		<include locales="ii"/>
		<include locales="ii_CN"/>
		<include locales="in"/>
		<include locales="in_ID"/>
		<include locales="is"/>
		<include locales="is_IS"/>
		<include locales="it"/>
		<include locales="it_CH"/>
		<include locales="it_IT"/>
		<include locales="it_SM"/>
		<include locales="iw"/>
		<include locales="iw_IL"/>
		<include locales="ja"/>
		<include locales="ja_JP"/>
		<include locales="jgo"/>
		<include locales="jgo_CM"/>
		<include locales="jmc"/>
		<include locales="jmc_TZ"/>
		<include locales="ka"/>
		<include locales="ka_GE"/>
		<include locales="kab"/>
		<include locales="kab_DZ"/>
		<include locales="kam"/>
		<include locales="kam_KE"/>
		<include locales="kde"/>
		<include locales="kde_TZ"/>
		<include locales="kea"/>
		<include locales="kea_CV"/>
		<include locales="khq"/>
		<include locales="khq_ML"/>
		<include locales="ki"/>
		<include locales="ki_KE"/>
		<include locales="kk"/>
		<include locales="kk_Cyrl"/>
		<include locales="kk_Cyrl_KZ"/>
		<include locales="kk_KZ"/>
		<include locales="kkj"/>
		<include locales="kkj_CM"/>
		<include locales="kl"/>
		<include locales="kl_GL"/>
		<include locales="kln"/>
		<include locales="kln_KE"/>
		<include locales="km"/>
		<include locales="km_KH"/>
		<include locales="kn"/>
		<include locales="kn_IN"/>
		<include locales="ko"/>
		<include locales="ko_KP"/>
		<include locales="ko_KR"/>
		<include locales="kok"/>
		<include locales="kok_IN"/>
		<include locales="ks"/>
		<include locales="ks_Arab"/>
		<include locales="ks_Arab_IN"/>
		<include locales="ksb"/>
		<include locales="ksb_TZ"/>
		<include locales="ksf"/>
		<include locales="ksf_CM"/>
		<include locales="kw"/>
		<include locales="kw_GB"/>
		<include locales="ky"/>
		<include locales="ky_Cyrl"/>
		<include locales="ky_Cyrl_KG"/>
		<include locales="lag"/>
		<include locales="lag_TZ"/>
		<include locales="lg"/>
		<include locales="lg_UG"/>
		<include locales="lkt"/>
		<include locales="lkt_US"/>
		<include locales="ln"/>
		<include locales="ln_AO"/>
		<include locales="ln_CD"/>
		<include locales="ln_CF"/>
		<include locales="ln_CG"/>
		<include locales="lo"/>
		<include locales="lo_LA"/>
		<include locales="lt"/>
		<include locales="lt_LT"/>
		<include locales="lu"/>
		<include locales="lu_CD"/>
		<include locales="luo"/>
		<include locales="luo_KE"/>
		<include locales="luy"/>
		<include locales="luy_KE"/>
		<include locales="lv"/>
		<include locales="lv_LV"/>
		<include locales="mas"/>
		<include locales="mas_KE"/>
		<include locales="mas_TZ"/>
		<include locales="mer"/>
		<include locales="mer_KE"/>
		<include locales="mfe"/>
		<include locales="mfe_MU"/>
		<include locales="mg"/>
		<include locales="mg_MG"/>
		<include locales="mgh"/>
		<include locales="mgh_MZ"/>
		<include locales="mgo"/>
		<include locales="mgo_CM"/>
		<include locales="mk"/>
		<include locales="mk_MK"/>
		<include locales="ml"/>
		<include locales="ml_IN"/>
		<include locales="mn"/>
		<include locales="mn_Cyrl"/>
		<include locales="mn_Cyrl_MN"/>
		<include locales="mo"/>
		<include locales="mr"/>
		<include locales="mr_IN"/>
		<include locales="ms"/>
		<include locales="ms_BN"/>
		<include locales="ms_Latn"/>
		<include locales="ms_Latn_BN"/>
		<include locales="ms_Latn_MY"/>
		<include locales="ms_Latn_SG"/>
		<include locales="ms_MY"/>
		<include locales="ms_SG"/>
		<include locales="mt"/>
		<include locales="mt_MT"/>
		<include locales="mua"/>
		<include locales="mua_CM"/>
		<include locales="my"/>
		<include locales="my_MM"/>
		<include locales="naq"/>
		<include locales="naq_NA"/>
		<include locales="nb"/>
		<include locales="nb_NO"/>
		<include locales="nb_SJ"/>
		<include locales="nd"/>
		<include locales="nd_ZW"/>
		<include locales="ne"/>
		<include locales="ne_IN"/>
		<include locales="ne_NP"/>
		<include locales="nl"/>
		<include locales="nl_AW"/>
		<include locales="nl_BE"/>
		<include locales="nl_BQ"/>
		<include locales="nl_CW"/>
		<include locales="nl_NL"/>
		<include locales="nl_SR"/>
		<include locales="nl_SX"/>
		<include locales="nmg"/>
		<include locales="nmg_CM"/>
		<include locales="nn"/>
		<include locales="nn_NO"/>
		<include locales="nnh"/>
		<include locales="nnh_CM"/>
		<include locales="no"/>
		<include locales="no_NO"/>
		<include locales="nus"/>
		<include locales="nus_SD"/>
		<include locales="nyn"/>
		<include locales="nyn_UG"/>
		<include locales="om"/>
		<include locales="om_ET"/>
		<include locales="om_KE"/>
		<include locales="or"/>
		<include locales="or_IN"/>
		<include locales="pa"/>
		<include locales="pa_Arab"/>
		<include locales="pa_Arab_PK"/>
		<include locales="pa_Guru"/>
		<include locales="pa_Guru_IN"/>
		<include locales="pa_IN"/>
		<include locales="pa_PK"/>
		<include locales="pl"/>
		<include locales="pl_PL"/>
		<include locales="ps"/>
		<include locales="ps_AF"/>
		<include locales="pt"/>
		<include locales="pt_AO"/>
		<include locales="pt_BR"/>
		<include locales="pt_CV"/>
		<include locales="pt_GW"/>
		<include locales="pt_MO"/>
		<include locales="pt_MZ"/>
		<include locales="pt_PT"/>
		<include locales="pt_ST"/>
		<include locales="pt_TL"/>
		<include locales="rm"/>
		<include locales="rm_CH"/>
		<include locales="rn"/>
		<include locales="rn_BI"/>
		<include locales="ro"/>
		<include locales="ro_MD"/>
		<include locales="ro_RO"/>
		<include locales="rof"/>
		<include locales="rof_TZ"/>
		<include locales="root"/>
		<include locales="ru"/>
		<include locales="ru_BY"/>
		<include locales="ru_KG"/>
		<include locales="ru_KZ"/>
		<include locales="ru_MD"/>
		<include locales="ru_RU"/>
		<include locales="ru_UA"/>
		<include locales="rw"/>
		<include locales="rw_RW"/>
		<include locales="rwk"/>
		<include locales="rwk_TZ"/>
		<include locales="saq"/>
		<include locales="saq_KE"/>
		<include locales="sbp"/>
		<include locales="sbp_TZ"/>
		<include locales="seh"/>
		<include locales="seh_MZ"/>
		<include locales="ses"/>
		<include locales="ses_ML"/>
		<include locales="sg"/>
		<include locales="sg_CF"/>
		<include locales="sh"/>
		<include locales="sh_BA"/>
		<include locales="sh_CS"/>
		<include locales="sh_YU"/>
		<include locales="shi"/>
		<include locales="shi_Latn"/>
		<include locales="shi_Latn_MA"/>
		<include locales="shi_Tfng"/>
		<include locales="shi_Tfng_MA"/>
		<include locales="shi_MA"/>
		<include locales="si"/>
		<include locales="si_LK"/>
		<include locales="sk"/>
		<include locales="sk_SK"/>
		<include locales="sl"/>
		<include locales="sl_SI"/>
		<include locales="sn"/>
		<include locales="sn_ZW"/>
		<include locales="so"/>
		<include locales="so_DJ"/>
		<include locales="so_ET"/>
		<include locales="so_KE"/>
		<include locales="so_SO"/>
		<include locales="sq"/>
		<include locales="sq_AL"/>
		<include locales="sq_MK"/>
		<include locales="sq_XK"/>
		<include locales="sr"/>
		<include locales="sr_Cyrl"/>
		<include locales="sr_Cyrl_BA"/>
		<include locales="sr_Cyrl_ME"/>
		<include locales="sr_Cyrl_RS"/>
		<include locales="sr_Cyrl_CS"/>
		<include locales="sr_Cyrl_XK"/>
		<include locales="sr_Cyrl_YU"/>
		<include locales="sr_Latn"/>
		<include locales="sr_Latn_BA"/>
		<include locales="sr_Latn_ME"/>
		<include locales="sr_Latn_RS"/>
		<include locales="sr_Latn_CS"/>
		<include locales="sr_Latn_XK"/>
		<include locales="sr_Latn_YU"/>
		<include locales="sr_BA"/>
		<include locales="sr_ME"/>
		<include locales="sr_RS"/>
		<include locales="sr_CS"/>
		<include locales="sr_YU"/>
		<include locales="sv"/>
		<include locales="sv_AX"/>
		<include locales="sv_FI"/>
		<include locales="sv_SE"/>
		<include locales="sw"/>
		<include locales="sw_KE"/>
		<include locales="sw_TZ"/>
		<include locales="sw_UG"/>
		<include locales="swc"/>
		<include locales="swc_CD"/>
		<include locales="ta"/>
		<include locales="ta_IN"/>
		<include locales="ta_LK"/>
		<include locales="ta_MY"/>
		<include locales="ta_SG"/>
		<include locales="te"/>
		<include locales="te_IN"/>
		<include locales="teo"/>
		<include locales="teo_KE"/>
		<include locales="teo_UG"/>
		<include locales="th"/>
		<include locales="th_TH"/>
		<include locales="ti"/>
		<include locales="ti_ER"/>
		<include locales="ti_ET"/>
		<include locales="tl"/>
		<include locales="tl_PH"/>
		<include locales="to"/>
		<include locales="to_TO"/>
		<include locales="tr"/>
		<include locales="tr_CY"/>
		<include locales="tr_TR"/>
		<include locales="twq"/>
		<include locales="twq_NE"/>
		<include locales="tzm"/>
		<include locales="tzm_Latn"/>
		<include locales="tzm_Latn_MA"/>
		<include locales="tzm_MA"/>
		<include locales="uk"/>
		<include locales="uk_UA"/>
		<include locales="ur"/>
		<include locales="ur_IN"/>
		<include locales="ur_PK"/>
		<include locales="uz"/>
		<include locales="uz_AF"/>
		<include locales="uz_Arab"/>
		<include locales="uz_Arab_AF"/>
		<include locales="uz_Cyrl"/>
		<include locales="uz_Cyrl_UZ"/>
		<include locales="uz_Latn"/>
		<include locales="uz_Latn_UZ"/>
		<include locales="uz_UZ"/>
		<include locales="vai"/>
		<include locales="vai_Latn"/>
		<include locales="vai_Latn_LR"/>
		<include locales="vai_LR"/>
		<include locales="vai_Vaii"/>
		<include locales="vai_Vaii_LR"/>
		<include locales="vi"/>
		<include locales="vi_VN"/>
		<include locales="vun"/>
		<include locales="vun_TZ"/>
		<include locales="xog"/>
		<include locales="xog_UG"/>
		<include locales="yav"/>
		<include locales="yav_CM"/>
		<include locales="yo"/>
		<include locales="yo_BJ"/>
		<include locales="yo_NG"/>
		<include locales="zgh"/>
		<include locales="zgh_MA"/>
		<include locales="zh"/>
		<include locales="zh_Hans"/>
		<include locales="zh_Hans_CN"/>
		<include locales="zh_Hans_HK"/>
		<include locales="zh_Hans_MO"/>
		<include locales="zh_Hans_SG"/>
		<include locales="zh_Hant"/>
		<include locales="zh_Hant_HK"/>
		<include locales="zh_Hant_MO"/>
		<include locales="zh_Hant_TW"/>
		<include locales="zh_CN"/>
		<include locales="zh_HK"/>
		<include locales="zh_MO"/>
		<include locales="zh_SG"/>
		<include locales="zh_TW"/>
		<include locales="zu"/>
		<include locales="zu_ZA"/>
	</locales>
	<paths>
		<include xpath="//ldml/.*"/>
		<include xpath="//ldml/collations/.*" alt="short"/>
		<include xpath="//ldml/.*" draft="contributed"/>
		<include xpath="//ldml/.*/special/.*"/>
		<include xpath="//supplementalData/.*"/>
		<include xpath="//supplementalMetaData/.*"/>
		<!-- Exclude unusable data -->
		<!-- Need to allow alt=.* for ldml/collations, but exclude for others -->
		<exclude xpath="//ldml/fallback/.*" alt=".*"/>
		<exclude xpath="//ldml/localeDisplayNames/.*" alt=".*"/>
		<exclude xpath="//ldml/layout/.*" alt=".*"/>
		<exclude xpath="//ldml/characters/.*" alt=".*"/>
		<exclude xpath="//ldml/delimiters/.*" alt=".*"/>
		<exclude xpath="//ldml/measurement/.*" alt=".*"/>
		<exclude xpath="//ldml/dates/.*" alt=".*"/>
		<exclude xpath="//ldml/numbers/.*" alt=".*"/>
		<exclude xpath="//ldml/units/.*" alt=".*"/>
		<exclude xpath="//ldml/listPatterns/.*" alt=".*"/>
		<exclude xpath="//ldml/posix/.*" alt=".*"/>
		<exclude xpath="//ldml/segmentations/.*" alt=".*"/>
		<exclude xpath="//ldml/rbnf/.*" alt=".*"/>
		<exclude xpath="//ldml/.*" draft="provisional"/>
		<exclude xpath="//ldml/.*" draft="unconfirmed"/>
		<exclude xpath="//ldml/dates/localizedPatternChars.*"/>
		<exclude xpath="//ldml/posix/messages/.*"/>
	</paths>
</config>
<!--
/*
*******************************************************************************
* Copyright (C) 2009-2013, International Business Machines Corporation and    *
* others. All Rights Reserved.                                                *
*******************************************************************************
*/
-->
<deprecates>
    <alias from="az_AZ" to="az_Latn_AZ"/>
    <alias from="bs_BA" to="bs_Latn_BA" />
    <alias from="en_NH" to="en_VU"/>
    <alias from="en_RH" to="en_ZW"/>
    <alias from="ha_GH" to="ha_Latn_GH"/>
    <alias from="ha_NE" to="ha_Latn_NE"/>
    <alias from="ha_NG" to="ha_Latn_NG"/>
    <alias from="in" to="id"/>
    <alias from="in_ID" to="id_ID"/>
    <alias from="iw" to="he"/>
    <alias from="iw_IL" to="he_IL"/>
    <alias from="ja_JP_TRADITIONAL" to="ja_JP" rbpath="/calendar/default" value="japanese"/>
    <alias from="kk_KZ" to="kk_Cyrl_KZ" />
    <alias from="ky_KG" to="ky_Cyrl_KG" />
    <alias from="ks_IN" to="ks_Arab_IN" />
    <alias from="mo" to="ro_MD"/>
    <alias from="mn_MN" to="mn_Cyrl_MN"/>
    <alias from="ms_BN" to="ms_Latn_BN"/>
    <alias from="ms_MY" to="ms_Latn_MY"/>
    <alias from="ms_SG" to="ms_Latn_SG"/>
    <alias from="no_NO" to="nb_NO"/>
    <alias from="no_NO_NY" to="nn_NO"/>
    <alias from="no" to="nb"/>
    <alias from="pa_IN" to="pa_Guru_IN"/>
    <alias from="pa_PK" to="pa_Arab_PK"/>
    <alias from="sh" to="sr_Latn"/>
    <alias from="sh_BA" to="sr_Latn_BA"/>
    <alias from="sh_CS" to="sr_Latn_RS"/>
    <alias from="sh_YU" to="sr_Latn_RS"/>
    <alias from="shi_MA" to="shi_Tfng_MA"/>
    <alias from="sr_BA" to="sr_Cyrl_BA"/>
    <alias from="sr_CS" to="sr_Cyrl_RS"/>
    <alias from="sr_ME" to="sr_Latn_ME"/>
    <alias from="sr_RS" to="sr_Cyrl_RS"/>
    <alias from="sr_XK" to="sr_Cyrl_XK"/>
    <alias from="sr_YU" to="sr_Cyrl_RS"/>
    <alias from="sr_Cyrl_YU" to="sr_Cyrl_RS"/>
    <alias from="sr_Cyrl_CS" to="sr_Cyrl_RS"/>
    <alias from="sr_Latn_YU" to="sr_Latn_RS"/>
    <alias from="sr_Latn_CS" to="sr_Latn_RS"/>
    <alias from="th_TH_TRADITIONAL" to="th_TH" rbpath="/calendar/default" value="buddhist"/>
    <alias from="tl" to="fil"/>
    <alias from="tl_PH" to="fil_PH"/>
    <alias from="tzm_MA" to="tzm_Latn_MA"/>
    <alias from="uz_AF" to="uz_Arab_AF"/>
    <alias from="uz_UZ" to="uz_Latn_UZ"/>
    <alias from="vai_LR" to="vai_Vaii_LR"/>
    <alias from="zh_CN" to="zh_Hans_CN"/>
    <alias from="zh_HK" to="zh_Hant_HK"/>
    <alias from="zh_MO" to="zh_Hant_MO"/>
    <alias from="zh_SG" to="zh_Hans_SG"/>
    <alias from="zh_TW" to="zh_Hant_TW"/>
</deprecates>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>

    <item type="id" name="guestNotification"/>
    <item type="id" name="original_height"/>
    <item type="id" name="menu_items"/>

</resources>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml"  version="2.0">
  <its:idValueRule selector="//h:p" idValue="@id"/>
   <its:idValueRule selector="//h:b" idValue="@id"/>
  <its:idValueRule selector="//h:var" idValue="@id"/>
</its:rules>

<resource
  xmlns:its="http://www.w3.org/2005/11/its" >
 <its:rules version="2.0">
  <its:idValueRule selector="//text" idValue="../@name"/>
 </its:rules>
<webform>
 <entry name="btn.OK">
    <text>OK</text>
    <pos>1, 1</pos>
    <trig>sendOK</trig>
  </entry>
</webform>
<webform>
  <entry name="btn.CANCEL">
    <text>Cancel</text>
    <pos>2, 1</pos>
    <trig>cancelAll</trig>
  </entry>
</webform>
</resource>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml"  version="2.0">
 <its:param name="idvalueparam">text</its:param>
 <its:idValueRule selector="//h:p" idValue="@id"/>
 <its:idValueRule selector="//h:b[@id=$idvalueparam]" idValue="@id"/>
 <its:idValueRule selector="//h:b[@id='crashtext']" idValue="@id"/>
 <its:idValueRule selector="//h:var" idValue="@id"/>
</its:rules>
<file>
 <res name="retryBtn" xml:id="btnAgain">Try Again</res>
 <res name="retryTip">click this to re-run the process with the current settings.</res>
</file>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
  <its:idValueRule selector="//entry" idValue="@name"/>
 </its:rules>
<resource>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="idvalue3xmlrules.xml"/>
 <entry name="btn.OK">
    <text>OK</text>
    <pos>1, 1</pos>
    <trig>sendOK</trig>
  </entry>
  <entry name="btn.CANCEL">
    <text>Cancel</text>
    <pos>2, 1</pos>
    <trig>cancelAll</trig>
  </entry>
</resource>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
  <its:param name="idvalueParam">1</its:param>
  <its:idValueRule selector="//webform[@id=$idvalueParam]/entry" idValue="@name"/>
 </its:rules>
<resource>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="idvalue4xmlrules.xml"/>
 <webform id="1">
 <entry name="btn.OK">
    <text>OK</text>
    <pos>1, 1</pos>
    <trig>sendOK</trig>
  </entry>
  </webform>
  <webform id="2">
  <entry name="btn.CANCEL">
    <text>Cancel</text>
    <pos>2, 1</pos>
    <trig>cancelAll</trig>
  </entry>
  </webform>
</resource>
<resource>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
  <its:param name="idvalueParam">1</its:param>
  <its:idValueRule selector="//webform[@id=$idvalueParam]/entry" idValue="@name"/>
 </its:rules>
 <webform id="1">
 <entry name="btn.OK">
    <text>OK</text>
    <pos>1, 1</pos>
    <trig>sendOK</trig>
  </entry>
  </webform>
  <webform id="2">
  <entry name="btn.CANCEL">
    <text>Cancel</text>
    <pos>2, 1</pos>
    <trig>cancelAll</trig>
  </entry>
  </webform>
</resource>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:55 $"/>
        <language type="id"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - IFRAME2</title>
<!--  required by frame contents  -->
<script type="text/javascript">function loadComplete() { }</script>
</head>
<body onload="parent.loadComplete()">
<iframe id="Iframe1" name="Iframe1" src="iframe.html">IFRAME1</iframe>
<iframe id="Iframe2" src="frame.html" name="Iframe2">IFRAME2</iframe>
</body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - IFRAME</title>
</head>
<body onload="parent.loadComplete()">
<iframe longdesc="about:blank" marginheight="10" marginwidth="5" width="60" height="50" name="Iframe1" frameborder="1" scrolling="yes" src="right.png" align="top">IFRAME1</iframe>
</body>
</html>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="ig"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.15 $"/>
		<generation date="$Date: 2008/05/25 01:05:49 $"/>
		<language type="ii"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Yiii</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - IMG</title>
</head>
<body onload="parent.loadComplete()">
<p>
<img id="IMAGE-1" name="IMAGE-1" src="./pix/dts.gif" align="middle" alt="DTS IMAGE LOGO" border="0" height="47" hspace="4" longdesc="./files/desc.html" usemap="#DTS-MAP" vspace="10" width="115"/>
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - INPUT</title>
</head>
<body onload="parent.loadComplete()">
<table cellpadding="15" border="border" summary="Table 1">
<tr align="center">
<td valign="top">Under a FORM control
<form id="form1" action="./files/getData.pl" method="post">
<table border="15" summary="Table 2">
<tr>
<td>
<label accesskey="b" for="input1">Enter Your Password:</label>
</td>
<td>
<input dir="ltr" id="input1" tabindex="8" value="Password" type="password" name="Password" size="25" maxlength="5" alt="Password entry" readonly="readonly"/>
</td>
</tr>
<tr>
<td>
<input type="radio" name="Radio1" accesskey="c" value="ReHire"/>
</td>
</tr>
<tr>
<td>
<input type="radio" name="Radio2" value="NewHire" tabindex="9" checked="checked"/>
</td>
</tr>
<tr>
<td>Hours available to work</td>
<td>
<input type="checkbox" name="Check1" align="bottom" tabindex="10" value="EarlyMornings" checked="checked"/>
<br/>
<input id="input5" type="checkbox" name="Check2" tabindex="11" value="AfterNoon" onclick="newId(this)"/>
<br/>
<input type="checkbox" name="Check3" tabindex="12" value="Evenings"/>
<br/>
<input type="checkbox" name="Check4" tabindex="13" value="Closing" disabled="disabled"/>
<br/>
</td>
</tr>
<tr>
<td colspan="2">
<input type="image" tabindex="14" name="SubmitImage" usemap="#submit-map" src="./pix/submit.gif"/>
</td>
</tr>
<tr>
<td colspan="2">
<input title="old_title" type="file" name="FileControl" tabindex="15" accept="GIF,JPEG" onselect="newTitle(this)"/>
</td>
</tr>
</table>
</form>
</td>
</tr>
</table>
</body>
</html>
<bindings xmlns="http://www.mozilla.org/xbl">
  <binding id="test">
    <content>
      <!-- Multiple insertion points to force appends to be handled via
           ContentInserted -->
      <children includes="foo"/>
      <children includes="bar"/>
      <children/>
    </content>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>

    <integer name="number_of_top_sites">9</integer>
    <integer name="number_of_top_sites_cols">3</integer>

</resources>
<?xml version="1.0" encoding="UTF-8"?>
<root>
 <fail> This is an invalid byte in UTF-8:  </fail>
</root>
# An invalid xml engine file.
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:55 $"/>
		<language type="in"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" ?>
<!DOCTYPE Test [
  <!ATTLIST test id ID #REQUIRED>
]>

<root>

  <test id="test_setAttribute">
    <foo/>
    <foo/>
  </test>

  <test id="test_normalization">
    <bar/>
    <bar/>
  </test>

  <test id="test_whitespace">

    <!--
      Tests here consist of isEqualNode comparisons of the first and third
      (zero-indexed) child nodes of each test.

      In the typical case this means that the zeroth, second, and fourth
      children are whitespace and the first and third are the nodes being
      compared for equality or inequality.

      In some cases, however, where either node is a Text node, this pattern
      must of necessity be violated.  Examples of such tests include the
      test_text# tests.

      As a result of this, BE CAREFUL NOT TO INTRODUCE STRAY WHITESPACE WHEN
      EDITING THIS FILE.  You have been warned.
    -->

    <test id="test_pi1">
      <?pi data?>
      <?pi data?>
    </test>
    <test id="test_pi2">
      <?pi data?>
      <?pi     data?>
    </test>
    <test id="test_pi3">
      <?pi data?>
      <?pi     data ?>
    </test>
    <test id="test_pi4">
      <?pi ?>
      <?pi       ?>
    </test>
    <test id="test_pi5">
      <?pi?>
      <?pi ?>
    </test>

    <test id="test_elt1">
      <foo></foo>
      <foo> </foo>
    </test>
    <test id="test_elt2">
      <foo></foo>
      <foo>
</foo>
    </test>
    <test id="test_elt3">
      <foo                                ></foo>
      <foo></foo>
    </test>
    <test id="test_elt4">
      <bar xmlns="http://example.com/"/>
      <bar/>
    </test>
    <test id="test_elt5">
      <bar xmlns="http://example.com/"/>
      <bar xmlns="http://example.com"/>
    </test>

    <test id="test_comment1">
      <!--foo-->
      <!--foo-->
    </test>
    <test id="test_comment2">
      <!--foo-->
      <!--foo -->
    </test>
    <test id="test_comment3">
      <!--foo-->
      <!--foo
-->
    </test>
    <test id="test_comment4">
      <!--
foo-->
      <!--
foo-->
    </test>

    <test id="test_text1"><placeholder-dont-move/>
<placeholder-dont-move/>
<placeholder-dont-move/>
    </test>
    <test id="test_text2"><placeholder-dont-move/>
<placeholder-dont-move/> <placeholder-dont-move/>
    </test>
    <test id="test_text3"><placeholder-dont-move/>
<placeholder-dont-move/><![CDATA[
]]>
    </test>

    <test id="test_cdata1">
      <![CDATA[ ]]><placeholder-dont-move/> <placeholder-dont-move/>
    </test>
    <test id="test_cdata2">
      <![CDATA[ ]]>
      <![CDATA[ ]]>
    </test>
    <test id="test_cdata3">
      <![CDATA[ ]]>
      <![CDATA[  ]]>
    </test>
    <test id="test_cdata4">
      <![CDATA[]]>
      <![CDATA[
]]>
    </test>
    <test id="test_cdata5">
      <![CDATA[ ]]>
      <![CDATA[
]]>
    </test>

  </test>

  <test id="test_namespaces">
    <test id="test_ns1">
      <foo xmlns:quiz="http://example.com/"
           quiz:q="fun"/>
      <foo xmlns:f="http://example.com/"
           f:q="fun"/>
    </test>
    <test id="test_ns2">
      <quiz:foo xmlns:quiz="http://example.com/"
           q="fun"/>
      <f:foo xmlns:f="http://example.com/"
           q="fun"/>
    </test>
  </test>

</root>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - ISINDEX</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" action="./files/getData.pl" method="post">
<isindex prompt="New Employee: "/>
</form>
<isindex prompt="Old Employee: "/>
</body>
</html>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:56 $"/>
        <language type="is"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ item 2 dc:description
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).fields.getProperty('dc:description') == 'XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet 2.'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
  <item>
   <title>XML: A Disruptive Technology</title> 
    <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet.
    </dc:description>
   <!-- <dc:publisher>The O'Reilly Network</dc:publisher>
    <dc:creator>Simon St.Laurent (mailto:simonstl@simonstl.com)</dc:creator>
    <dc:rights>Copyright &#169; 2000 O'Reilly &amp; Associates, Inc.</dc:rights>
    <dc:subject>XML</dc:subject>-->
  </item> 
  <item>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet 2.
    </dc:description>
    <title>XML: A Disruptive Technology</title> 
  </item>
</rdf:RDF><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ item 2 dc:publisher
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).fields.getProperty('dc:publisher') == 'The O\'Reilly Network'

-->
<rdf:RDF 
 xmlns:foo="http://example.org"
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
  <item>
   <title>XML: A Disruptive Technology</title> 
    <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet.
    </dc:description>
   <!--
    <dc:creator>Simon St.Laurent (mailto:simonstl@simonstl.com)</dc:creator>
    <dc:rights>Copyright &#169; 2000 O'Reilly &amp; Associates, Inc.</dc:rights>
    <dc:subject>XML</dc:subject>-->
  </item> 
  <item>
 <dc:publisher foo:bar="baz">The O'Reilly Network</dc:publisher>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet 2.
    </dc:description>
    <title>XML: A Disruptive Technology</title> 
  </item>
</rdf:RDF><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ item 2 dc:publisher
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).fields.getProperty('dc:publisher') == 'The O\'Reilly Network'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
  <item>
   <title>XML: A Disruptive Technology</title> 
    <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet.
    </dc:description>
   <!--
    <dc:creator>Simon St.Laurent (mailto:simonstl@simonstl.com)</dc:creator>
    <dc:rights>Copyright &#169; 2000 O'Reilly &amp; Associates, Inc.</dc:rights>
    <dc:subject>XML</dc:subject>-->
  </item> 
  <item>
 <dc:publisher>The O'Reilly Network</dc:publisher>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet 2.
    </dc:description>
    <title>XML: A Disruptive Technology</title> 
  </item>
</rdf:RDF><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item author works
Expect: var authors = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).authors; var author = authors.queryElementAt(0, Components.interfaces.nsIFeedPerson); ((author.name == 'Joe Bob Briggs'));

-->
<rss version="2.0" >
<channel>
<item>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item category works
Expect: var cats = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('categories'); cats.QueryInterface(Components.interfaces.nsIArray); var cat = cats.queryElementAt(0, Components.interfaces.nsIPropertyBag); ((cat.getProperty('domain') == 'foo') && (cat.getProperty('term') == 'bar'));

-->
<rss version="2.0" >
<channel>
<item>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<category domain="foo">bar</category>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item comments works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('comments') == 'http://example.org'

-->
<rss version="2.0" >
<channel>
<item>
<title>test</title>
<!--<author>jbb@dallas.example.com (Joe Bob Briggs)</author>-->
<comments>http://example.org</comments>

<category domain="foo">bar</category>

</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item title works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).content.plainText() == 'foobar'

-->
<rss version="2.0" >
<channel>
<item xmlns:c="http://purl.org/rss/1.0/modules/content/">
  <title>test</title>
  <c:encoded>foobar</c:encoded>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: items length is correct
Expect:      feed.items.length == 2

-->
<rss version="2.0" 
  xmlns:dc="http://purl.org/dc/elements/1.1/">

<channel>
<title>Items Test</title>
<link>http://mozilla.org/</link>
<description></description>

<dc:language>en-us</dc:language>
<dc:creator>sayrer@gmail.com</dc:creator>
<dc:date>2005-12-07T14:48:03-05:00</dc:date>

<item>
<title>Is the date right?</title>
<link>http://example.org/dc_date.html</link>
</item>
<item>
<title>Is the date right?</title>
<link>http://example.org/dc_date.html</link>
</item>

</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: items length is correct
Expect:      feed.items.length == 1

-->
<rss version="2.0" 
  xmlns:dc="http://purl.org/dc/elements/1.1/">

<channel>
<title>Items Test</title>
<link>http://mozilla.org/</link>
<description></description>

<dc:language>en-us</dc:language>
<dc:creator>sayrer@gmail.com</dc:creator>
<dc:date>2005-12-07T14:48:03-05:00</dc:date>

<item>
<title>Is the date right?</title>
<link>http://example.org/dc_date.html</link>
</item>

</channel>
</rss><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ item dc:description
Expect: var author = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).authors.queryElementAt(0, Components.interfaces.nsIFeedPerson); (author.name == "Simon St.Laurent" && author.email == "simonstl@simonstl.com")

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
  <item>
   <title>XML: A Disruptive Technology</title> 
    <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet.
    </dc:description>
    <dc:creator>Simon St.Laurent (mailto:simonstl@simonstl.com)</dc:creator>
    <dc:rights>Copyright &#169; 2000 O'Reilly &amp; Associates, Inc.</dc:rights>
    <dc:subject>XML</dc:subject>
  </item> 
  <item>
    <dc:publisher>The O'Reilly Network</dc:publisher>
    <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet 2.
    </dc:description>
    <title>XML: A Disruptive Technology</title> 
  </item>
</rdf:RDF><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ item dc:description
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).summary.plainText() == 'XML is...'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
  <item>
 <dc:description>XML is...</dc:description>
   <title>XML: A Disruptive Technology</title> 
    <link>http://c.moreover.com/click/here.pl?r123</link>
   <description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet.
    </description>

   <!--
    <dc:creator>Simon St.Laurent (mailto:simonstl@simonstl.com)</dc:creator>
    <dc:rights>Copyright &#169; 2000 O'Reilly &amp; Associates, Inc.</dc:rights>
    <dc:subject>XML</dc:subject>-->
  </item> 
  <item>
 <dc:publisher>The O'Reilly Network</dc:publisher>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet 2.
    </dc:description>
    <title>XML: A Disruptive Technology</title> 
  </item>
</rdf:RDF>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ item dc:description
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('dc:description') == 'XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet.'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
  <item>
   <title>XML: A Disruptive Technology</title> 
    <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet.
    </dc:description>
   <!--
    <dc:creator>Simon St.Laurent (mailto:simonstl@simonstl.com)</dc:creator>
    <dc:rights>Copyright &#169; 2000 O'Reilly &amp; Associates, Inc.</dc:rights>
    <dc:subject>XML</dc:subject>-->
  </item> 
  <item>
    <dc:publisher>The O'Reilly Network</dc:publisher>
    <dc:description>
      XML is placing increasingly heavy loads on the existing technical infrastructure of the Internet 2.
    </dc:description>
    <title>XML: A Disruptive Technology</title> 
  </item>
</rdf:RDF><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item desc encoded works
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).summary.text == 'I\'m headed for France. I wasn\'t gonna go this year, but then last week <a href="http://www.imdb.com/title/tt0086525/">Valley Girl</a> came out and I said to myself, Joe Bob, you gotta get out of the country for a while.'

-->
<rss version="2.0" >
<channel>
<item>
  <description>hmmm</description>
</item>
<item>
<comments>http://example.org</comments>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item desc CDATA works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).summary.text == 'I\'m headed for France. I wasn\'t gonna go this year, but then last week <a href="http://www.imdb.com/title/tt0086525/">Valley Girl</a> came out and I said to myself, Joe Bob, you gotta get out of the country for a while.'

-->
<rss version="2.0" >
<channel>
<item>

<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>
<description><![CDATA[I'm headed for France. I wasn't gonna go this year, but then last week <a href="http://www.imdb.com/title/tt0086525/">Valley Girl</a> came out and I said to myself, Joe Bob, you gotta get out of the country for a while.]]></description>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: item desc encoded, double-escaped entity
Expect: var summary = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).summary; summary.plainText() == "test D\u00e9sol\u00e9e";

-->
<rss version="2.0" >
<channel>
<item>
<comments>http://example.org</comments>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<category domain="foo">bar</category>

<description>
  &lt;b>test D&amp;eacute;sol&amp;eacute;e&lt;/b> 
</description>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item desc encoded, normalized works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).summary.plainText() == 'I\'m headed for France. I wasn\'t gonna go this year, but then last week Valley Girl came out and I said to myself, Joe Bob, you gotta get out of the country for a while.'

-->
<rss version="2.0" >
<channel>
<item>
<comments>http://example.org</comments>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item desc encoded, normalied works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).summary.text == 'I\'m headed for France. I wasn\'t gonna go this year, but then last week <a href="http://www.imdb.com/title/tt0086525/">Valley Girl</a> came out and I said to myself, Joe Bob, you gotta get out of the country for a while.'

-->
<rss version="2.0" >
<channel>
<item>
<comments>http://example.org</comments>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item desc encoded works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).summary.text == 'I\'m headed for France. I wasn\'t gonna go this year, but then last week <a href="http://www.imdb.com/title/tt0086525/">Valley Girl</a> came out and I said to myself, Joe Bob, you gotta get out of the country for a while.'

-->
<rss version="2.0" >
<channel>
<item>
<comments>http://example.org</comments>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: feed with duplicate enclosures on a single item with different data available
Expect: var enc = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('enclosure'); enc.QueryInterface(Components.interfaces.nsIPropertyBag); ((enc.getProperty('length') == '24986239') && (enc.getProperty('type') == 'video/mpeg') && (feed.type == 4) && (feed.enclosureCount == 1) );

-->
<rss xmlns:media="http://search.yahoo.com/mrss" version="2.0" >
<channel>

<item>
<enclosure url="http://dallas.example.com/joebob_050689.mpeg" /> 
<media:content fileSize="24986239" type="video/mpeg" url="http://dallas.example.com/joebob_050689.mpeg" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test audio</title>

<category domain="foo">bar</category>

<description>Listen to the words that are coming out of my mouth.</description>
</item>

</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: feed with duplicate enclosures on a single item
Expect: ((feed.type == 4) && (feed.enclosureCount == 1));

-->
<rss xmlns:media="http://search.yahoo.com/mrss" version="2.0" >
<channel>

<item>
<enclosure length="24986239" type="video/mpeg" url="http://dallas.example.com/joebob_050689.mpeg" /> 
<media:content fileSize="24986239" type="video/mpeg" url="http://dallas.example.com/joebob_050689.mpeg" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test audio</title>

<category domain="foo">bar</category>

<description>Listen to the words that are coming out of my mouth.</description>
</item>

</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: feed that doesn't have at least one enclosure per entry should be TYPE_FEED (0)
Expect: ((feed.type == 0) && (feed.enclosureCount == 1));

-->
<rss version="2.0" >
<channel>

<item>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>no video this week!</title>

<category domain="foo">bar</category>

<description>I'm on a trip to the moon this week for this year's Spaceshot Vlogger
conference.  No video this week!</description>
</item>

<item>
<enclosure length="3000000" type="video/mpeg" url="http://dallas.example.com/joebob_pants.mpeg" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>orange keyboard</title>

<category domain="foo">bar</category>

<description>Crazy things happen when you paint your keyboard orange.</description>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: feed with different kinds of enclosures that should be TYPE_FEED (0)
Expect: ((feed.type == 0) && (feed.enclosureCount == 2));

-->
<rss version="2.0" >
<channel>

<item>
<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test audio</title>

<category domain="foo">bar</category>

<description>Listen to the words that are coming out of my mouth.</description>
</item>

<item>
<enclosure length="3000000" type="video/mpeg" url="http://dallas.example.com/joebob_pants.mpeg" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test video</title>

<category domain="foo">bar</category>

<description>Look into my eyes....</description>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item enclosure works
Expect: var enc = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('enclosure'); enc.QueryInterface(Components.interfaces.nsIPropertyBag); ((enc.getProperty('length') == '24986239') && (enc.getProperty('type') == 'audio/mpeg') && (enc.getProperty('url') == 'http://dallas.example.com/joebob_050689.mp3') && (feed.type == 1) && (feed.enclosureCount == 1));

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item copes with bogus guid
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link == null;

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>
<guid isPermaLink="true">xorg</guid>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item guid works
Expect: var link = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link; link.spec == 'http://www.example.org/';

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<guid>http://www.example.org/</guid>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item guid should not map to link when isPermaLink=FaLsE
Expect: var link = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link; link == null;

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<guid isPermaLink="FaLsE">http://www.example.org/</guid>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item guid should not map to link when isPermaLink=false
Expect: var link = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link; link == null;

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<guid isPermaLink="false">http://www.example.org/</guid>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item guid should map to link when isPermaLink=TrUe
Expect: var link = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link; link.spec == "http://www.example.org/";

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<guid isPermaLink="TrUe">http://www.example.org/</guid>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item guid should map to link when isPermaLink=meatcake or other unknown values
Expect: var link = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link; link.spec == "http://www.example.org/";

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<guid isPermaLink="meatcake">http://www.example.org/</guid>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item guid works
Expect: var link = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link; link.spec == 'http://www.example.org/';

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<title>test</title>
<guid isPermaLink="true">http://www.example.org/</guid>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item guid works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).id == 'asdf';

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>
<guid>asdf</guid>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item prefers link to guid
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == 'http://link.example.org/';

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>
<guid isPermaLink="true">http://www.example.org</guid>
<link>http://link.example.org/</link>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item guid works
Expect: var guid = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('guid'); guid.QueryInterface(Components.interfaces.nsIPropertyBag2); guid.getProperty('guid') == 'asdf';

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>
<guid>asdf</guid>
<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ item rdf:about
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).id == 'http://example.com/hmm'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
  <item rdf:about="http://example.com/hmm">
   <title>XML: A Disruptive Technology</title> 
   <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical
      infrastructure of the Internet.
    </dc:description>
   <!-- <dc:publisher>The O'Reilly Network</dc:publisher>
    <dc:creator>Simon St.Laurent (mailto:simonstl@simonstl.com)</dc:creator>
    <dc:rights>Copyright &#169; 2000 O'Reilly &amp; Associates, Inc.</dc:rights>
    <dc:subject>XML</dc:subject>-->
  </item> 
  <item>

  </item>
</rdf:RDF>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item link normalized works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).link.spec == 'http://dallas.example.com/1983/05/06/joebob.htm'

-->
<rss version="2.0" >
<channel>
<item>
<title>test</title>
<!--<author>jbb@dallas.example.com (Joe Bob Briggs)</author>-->
<comments>http://example.org</comments>
<link>http://dallas.example.com/1983/05/06/joebob.htm</link>
<category domain="foo">bar</category>

</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item comments works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('link') == 'http://dallas.example.com/1983/05/06/joebob.htm'

-->
<rss version="2.0" >
<channel>
<item>
<title>test</title>
<!--<author>jbb@dallas.example.com (Joe Bob Briggs)</author>-->
<comments>http://example.org</comments>
<link>http://dallas.example.com/1983/05/06/joebob.htm</link>
<category domain="foo">bar</category>

</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item desc plain text works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).summary.text == "I'm headed for France. I wasn't gonna go this year, but then last week \"Valley Girl\" came out and I said to myself, Joe Bob, you gotta get out of the country for a while."

-->
<rss version="2.0" >
<channel>
<item>

<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>
<description>I'm headed for France. I wasn't gonna go this year, but then last week "Valley Girl" came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item enclosure is added to enclosures array
Expect: var encs = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).enclosures; encs.QueryInterface(Components.interfaces.nsIArray); var enc = encs.queryElementAt(0, Components.interfaces.nsIPropertyBag2); ((enc.getProperty('length') == '24986239') && (enc.getProperty('type') == 'audio/mpeg') && (enc.getProperty('url') == 'http://dallas.example.com/joebob_050689.mp3'));

-->
<rss version="2.0" >
<channel>
<item>

<enclosure length="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: entry pubDate works 
Expect:      feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).published == 'Tue, 02 Sep 2003 00:00:01 GMT'

-->
<rss version="2.0" xmlns:dcterms="http://purl.org/dc/terms/">
<channel>
<item>
<pubDate>Tue, 02 Sep 2003 00:00:01 GMT</pubDate>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: entry published works 
Expect:      feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).published == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rss version="2.0" xmlns:dcterms="http://purl.org/dc/terms/">
<channel>
<item>
<dcterms:issued>Sat, 07 Sep 2002 00:00:01 GMT</dcterms:issued>
</item>
</channel>
</rss><?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: 2 items title works
Expect: ((feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).title.text == 'test') && (feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).title.text == 'test #2'))

-->
<rss version="2.0" >
<channel>
<item>
  <title>test</title>
</item>
<item>
  <title>test #2</title>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item title works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).title.text == 'test'

-->
<rss version="2.0" >
<channel>
<item>
  <title>test</title>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: item title works
Expect: feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('title') == 'test'

-->
<rss version="2.0" >
<channel>
<item>
  <title>test</title>
</item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: channel pubDate works 
Expect:      feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).updated == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel>
<item>
<dc:date>Sat, 07 Sep 2002 00:00:01 GMT</dc:date>
</item>
</channel>
</rss><?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed updated
Expect:  feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).updated == 'Sat, 07 Sep 2002 00:00:01 GMT'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'
 xmlns:dcterms='http://purl.org/dc/terms/'>
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
    <dcterms:modified>Sat, 07 Sep 2002 00:00:01 GMT</dcterms:modified>
  </channel>
  <item rdf:about="http://example.com/hmm">
   <title>XML: A Disruptive Technology</title> 
   <link>http://c.moreover.com/click/here.pl?r123</link>
   <dc:description>
      XML is placing increasingly heavy loads on the existing technical
      infrastructure of the Internet.
    </dc:description>
    <dcterms:modified>Sat, 07 Sep 2002 00:00:01 GMT</dcterms:modified>	
  </item> 
</rdf:RDF>
<?xml version="1.0" encoding="utf-8"?>
<!--

Description: RSS1 feed w/ item wiki:importance with extra attribute
Expect: feed.items.queryElementAt(1, Components.interfaces.nsIFeedEntry).fields.getProperty('wiki:importance') == 'major'

-->
<rdf:RDF 
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns="http://purl.org/rss/1.0/"
 xmlns:dc='http://purl.org/dc/elements/1.1/'
 xmlns:w="http://purl.org/rss/1.0/modules/wiki/"
 xmlns:foo="http://example.org">
  <channel rdf:about="http://www.xml.com/xml/news.rss">
    <title>Test</title>
    <link>http://xml.com/pub</link>
    <dc:description>another description</dc:description>  
  </channel>
  <item>
   <title>XML: A Disruptive Technology</title> 
   <!-- <link>http://c.moreover.com/click/here.pl?r123</link>
    <dc:description>
      XML is placing increasingly heavy loads on the existing technical
      infrastructure of the Internet.
    </dc:description>
    <dc:publisher>The O'Reilly Network</dc:publisher>
    <dc:creator>Simon St.Laurent (mailto:simonstl@simonstl.com)</dc:creator>
    <dc:rights>Copyright &#169; 2000 O'Reilly &amp; Associates, Inc.</dc:rights>
    <dc:subject>XML</dc:subject>-->
  </item> 
  <item>
    <w:importance foo:bar="baz">major</w:importance>
  </item>
</rdf:RDF><?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:58 $"/>
        <language type="it"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:52 $"/>
		<language type="iw"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Hebr</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:39:59 $"/>
        <language type="ja"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2012 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 32275 $"/>
		<generation date="$Date: 2012-08-28 14:56:06 -0700 (Tue, 28 Aug 2012) $"/>
		<language type="jgo"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="jmc"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="kab"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="kam"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:00 $"/>
        <language type="ka"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="kde"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="kea"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="@dimen/widget_header_height"
    android:orientation="horizontal"
    android:background="@drawable/widget_bg">

    <ImageView android:id="@+id/logo_button"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:padding="@dimen/widget_padding"
        android:background="@drawable/widget_button_left"
        android:layout_height="match_parent"
        android:src="@drawable/widget_icon"/>

    <LinearLayout android:id="@+id/new_tab_button"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="match_parent"
        android:layout_centerVertical="true"
        android:contentDescription="@string/new_tab"
        android:gravity="center"
        android:orientation="horizontal"
        android:background="@drawable/widget_button_right">

        <TextView android:id="@+id/new_tab_button_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawableLeft="@drawable/ic_widget_new_tab"
            android:drawablePadding="@dimen/widget_padding"
            android:gravity="center"
            android:text="@string/new_tab"
            android:fontFamily="sans-serif"
            android:textSize="@dimen/widget_text_size"
            android:textColor="@color/widget_text_color"/>

    </LinearLayout>

</LinearLayout>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="khq"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="ki"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.22 $"/>
		<generation date="$Date: 2008/05/25 01:05:53 $"/>
		<language type="kk"/> 
		<script type="Cyrl"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cyrl</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 34238 $"/>
		<generation date="$Date: 2013-09-07 20:46:42 +0000 (Sat, 07 Sep 2013) $"/>
		<language type="kkj"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.22 $"/>
		<generation date="$Date: 2008/05/25 01:05:53 $"/>
		<language type="kk"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cyrl</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="kln"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:02 $"/>
        <language type="kl"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2008/05/25 01:05:54 $"/>
		<language type="km"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Khmr</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:54 $"/>
		<language type="kn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Knda</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:54 $"/>
		<language type="kok"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Deva</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:03 $"/>
        <language type="ko"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2012 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 32275 $"/>
		<generation date="$Date: 2012-08-28 14:56:06 -0700 (Tue, 28 Aug 2012) $"/>
		<language type="ks"/> 
		<script type="Arab"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Arab</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="ksb"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="ksf"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2012 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 32275 $"/>
		<generation date="$Date: 2012-08-28 14:56:06 -0700 (Tue, 28 Aug 2012) $"/>
		<language type="ks"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Arab</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:54 $"/>
		<language type="kw"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 34238 $"/>
		<generation date="$Date: 2013-09-07 20:46:42 +0000 (Sat, 07 Sep 2013) $"/>
		<language type="ky"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cyrl</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - LABEL</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" action="./files/getData.pl" method="post">
<p>
<label accesskey="b" for="input1">Enter Your First Password:</label>
<input id="input1" type="password" name="Password1"/>
</p>
</form>
<p>
<label accesskey="c" for="input2">Enter Your Second Password:</label>
<input id="input2" type="password" name="Password2"/>
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="lag"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:langRule selector="/h:*" langPointer="@lang"/>
<its:langRule selector="//h:q" langPointer="@lang"/>
</its:rules>
<?xml version="1.0"?>
<text>
 <head>
  <its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
   <its:langRule selector="//content" langPointer="@language"/>
   <its:langRule selector="//q" langPointer="@language"/>
  </its:rules>
 </head>
 <content language="en">
  <par>The motto of Québec is: <q language="fr-CA">Je me souviens</q>.</par>
  <par>The one of Canada: <q language="la">A mari usque ad mare</q>.</par>
 </content>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:param name="langParam">fr-CA</its:param>
<its:langRule selector="//h:q[@lang=$langParam]" langPointer="@lang"/>
</its:rules>
<?xml version="1.0"?>
<its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
 <its:langRule selector="/text" langPointer="@language"/>
</its:rules>
<?xml version="1.0"?>
<text language="en">
 <head>
  <its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its"
   xmlns:xlink="http://www.w3.org/1999/xlink"  xlink:href="languageinfo2xmlrules.xml">
   <its:langRule selector="//content/item/text" langPointer="../lang"/>
  </its:rules>
 </head>
 <content>
  <item>
   <lang>en</lang>
   <text>The motto of Québec is: <q language="fr-CA">Je me souviens</q>.</text>
  </item>
  <item>
   <lang>fr-CA</lang>
   <text>La devise du Québec est : <q>Je me souviens</q>.</text>
  </item>
 </content>
</text>
<text language="en">
<head>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="langParam">fr-CA</its:param>
<its:langRule selector="//par/q[@language=$langParam]" langPointer="@language"/>
</its:rules>
</head>
<content>
<par>
The motto of Québec is:
<q language="fr-CA">Je me souviens</q>
.
</par>
<par>
The one of Canada:
<q language="la">A mari usque ad mare</q>
.
</par>
</content>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="langParam">fr-CA</its:param>
<its:langRule selector="//q[@language=$langParam]" langPointer="@language"/>
</its:rules>
<text language="en">
<head>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="languageinfo4xmlrules.xml">
</its:rules>
</head>
<content>
<item>
<lang>en</lang>
<text>
The motto of Québec is:
<q language="fr-CA">Je me souviens</q>
.
</text>
</item>
<item>
<lang>fr-CA</lang>
<text>
La devise du Québec est :
<q>Je me souviens</q>
.
</text>
</item>
</content>
</text>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
<assemblyIdentity version="1.0.0.0"
    processorArchitecture="X86"
    name="%(name)s"
    type="win32"/>
    <!-- Identify the application security requirements. -->
    <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
        <requestedPrivileges>
            <requestedExecutionLevel level="asInvoker" uiAccess="false"/>
        </requestedPrivileges>
    </security>
    </trustInfo>
</assembly>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>
    <item type="layout" name="tabs_layout_item_view">@layout/tabs_item_cell</item>
</resources>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - LEGEND</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" action="./files/getData.pl" method="post">
<fieldset>
<legend accesskey="b" align="top">Enter Password1:</legend>
<input id="input1" type="password" name="Password1"/>
</fieldset>
</form>
<fieldset>
<legend accesskey="c" align="bottom">Enter Password2:</legend>
<input id="input2" type="password" name="Password2"/>
</fieldset>
</body>
</html>


<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="lg"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - LINK</title>
<link charset="Latin-1" target="dynamic" href="./files/glossary.html" hreflang="en" media="screen" rel="Glossary" type="text/html"/>
<link charset="Latin-1" href="./files/style1.css" hreflang="en" media="screen" rev="stylesheet" type="text/css"/>
</head>
<body onload="parent.loadComplete()">
<p>
<br/>
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - LINK</title>
<link charset="Latin-1" href="./files/glossary.html" hreflang="en" media="screen" rel="Glossary" type="text/html"/>
<link charset="Latin-1" href="./files/style1.css" hreflang="en" media="screen" rev="stylesheet" type="text/css"/>
</head>
<body onload="parent.loadComplete()">
<p>
<br/>
</p>
</body>
</html>

#filter substitution
<?xml version="1.0" encoding="UTF-8"?>
<lint>
    <issue id="NewApi" severity="ignore" />
</lint>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="listboxBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <!--
    Interface binding that is base for bindings of xul:listbox and
    xul:richlistbox elements. This binding assumes that successors bindings
    will implement the following properties and methods:

    /** Return the number of items */
    readonly itemCount

    /** Return index of given item
    * @param aItem - given item element */
    getIndexOfItem(aItem)

    /** Return item at given index
    * @param aIndex - index of item element */
    getItemAtIndex(aIndex)

    /** Return count of item elements */
    getRowCount()

    /** Return count of visible item elements */
    getNumberOfVisibleRows()

    /** Return index of first visible item element */
    getIndexOfFirstVisibleRow()

    /** Return true if item of given index is visible
     * @param aIndex - index of item element
     *
     * @note XXX: this method should be removed after bug 364612 is fixed
     */
    ensureIndexIsVisible(aIndex)

    /** Return true if item element is visible
     * @param aElement - given item element */
    ensureElementIsVisible(aElement)

    /** Scroll list control to make visible item of given index
     * @param aIndex - index of item element
     *
     * @note XXX: this method should be removed after bug 364612 is fixed
     */
    scrollToIndex(aIndex)

    /** Create item element and append it to the end of listbox
     * @param aLabel - label of new item element
     * @param aValue - value of new item element */
    appendItem(aLabel, aValue)

    /** Create item element and insert it to given position
     * @param aIndex - insertion position
     * @param aLabel - label of new item element
     * @param aValue - value of new item element */
    insertItemAt(aIndex, aLabel, aValue)

    /** Scroll up/down one page
     * @param aDirection - specifies scrolling direction, should be either -1 or 1
     * @return the number of elements the selection scrolled
     */
    scrollOnePage(aDirection)

    /** Fire "select" event */
    _fireOnSelect()
   -->
   <binding id="listbox-base" role="xul:listbox"
            extends="chrome://global/content/bindings/general.xml#basecontrol">

    <implementation implements="nsIDOMXULMultiSelectControlElement">
      <field name="_lastKeyTime">0</field>
      <field name="_incrementalString">""</field>

    <!-- nsIDOMXULSelectControlElement -->
      <property name="selectedItem"
                onset="this.selectItem(val);">
        <getter>
        <![CDATA[
          return this.selectedItems.length > 0 ? this.selectedItems[0] : null;
        ]]>
        </getter>
      </property>

      <property name="selectedIndex">
        <getter>
        <![CDATA[
          if (this.selectedItems.length > 0)
            return this.getIndexOfItem(this.selectedItems[0]);
          return -1;
        ]]>
        </getter>
        <setter>
        <![CDATA[
          if (val >= 0) {
            this.selectItem(this.getItemAtIndex(val));
          } else {
            this.clearSelection();
            this.currentItem = null;
          }
        ]]>
        </setter>
      </property>

      <property name="value">
        <getter>
        <![CDATA[
          if (this.selectedItems.length > 0)
            return this.selectedItem.value;
          return null;
        ]]>
        </getter>
        <setter>
        <![CDATA[
          var kids = this.getElementsByAttribute("value", val);
          if (kids && kids.item(0))
            this.selectItem(kids[0]);
          return val;
        ]]>
        </setter>
      </property>

      <method name="removeItemAt">
        <parameter name="index"/>
        <body>
        <![CDATA[
          var remove = this.getItemAtIndex(index);
          if (remove)
            this.removeChild(remove);
          return remove;
        ]]>
        </body>
      </method>

    <!-- nsIDOMXULMultiSelectControlElement -->
      <property name="selType"
                onget="return this.getAttribute('seltype');"
                onset="this.setAttribute('seltype', val); return val;"/>

      <property name="currentItem" onget="return this._currentItem;">
        <setter>
          if (this._currentItem == val)
            return val;

          if (this._currentItem)
            this._currentItem.current = false;
          this._currentItem = val;

          if (val)
            val.current = true;

          return val;
        </setter>
      </property>

      <property name="currentIndex">
        <getter>
          return this.currentItem ? this.getIndexOfItem(this.currentItem) : -1;
        </getter>
        <setter>
        <![CDATA[
          if (val >= 0)
            this.currentItem = this.getItemAtIndex(val);
          else
            this.currentItem = null;
        ]]>
        </setter>
      </property>

      <field name="selectedItems">[]</field>

      <method name="addItemToSelection">
        <parameter name="aItem"/>
        <body>
        <![CDATA[
          if (this.selType != "multiple" && this.selectedCount)
            return;

          if (aItem.selected)
            return;

          this.selectedItems.push(aItem);
          aItem.selected = true;

          this._fireOnSelect();
        ]]>
        </body>
      </method>

      <method name="removeItemFromSelection">
        <parameter name="aItem"/>
        <body>
        <![CDATA[
          if (!aItem.selected)
            return;

          for (var i = 0; i < this.selectedItems.length; ++i) {
            if (this.selectedItems[i] == aItem) {
              this.selectedItems.splice(i, 1);
              aItem.selected = false;
              break;
            }
          }

          this._fireOnSelect();
        ]]>
        </body>
      </method>

      <method name="toggleItemSelection">
        <parameter name="aItem"/>
        <body>
        <![CDATA[
          if (aItem.selected)
            this.removeItemFromSelection(aItem);
          else
            this.addItemToSelection(aItem);
        ]]>
        </body>
      </method>

      <method name="selectItem">
        <parameter name="aItem"/>
        <body>
        <![CDATA[
          if (!aItem)
            return;

          if (this.selectedItems.length == 1 && this.selectedItems[0] == aItem)
            return;

          this._selectionStart = null;

          var suppress = this._suppressOnSelect;
          this._suppressOnSelect = true;

          this.clearSelection();
          this.addItemToSelection(aItem);
          this.currentItem = aItem;

          this._suppressOnSelect = suppress;
          this._fireOnSelect();
        ]]>
        </body>
      </method>

      <method name="selectItemRange">
        <parameter name="aStartItem"/>
        <parameter name="aEndItem"/>
        <body>
        <![CDATA[
          if (this.selType != "multiple")
            return;

          if (!aStartItem)
            aStartItem = this._selectionStart ?
              this._selectionStart : this.currentItem;

          if (!aStartItem)
            aStartItem = aEndItem;

          var suppressSelect = this._suppressOnSelect;
          this._suppressOnSelect = true;

          this._selectionStart = aStartItem;

          var currentItem;
          var startIndex = this.getIndexOfItem(aStartItem);
          var endIndex = this.getIndexOfItem(aEndItem);
          if (endIndex < startIndex) {
            currentItem = aEndItem;
            aEndItem = aStartItem;
            aStartItem = currentItem;
          } else {
            currentItem = aStartItem;
          }

          while (currentItem) {
            this.addItemToSelection(currentItem);
            if (currentItem == aEndItem) {
              currentItem = this.getNextItem(currentItem, 1);
              break;
            }
            currentItem = this.getNextItem(currentItem, 1);
          }

          // Clear around new selection
          // Don't use clearSelection() because it causes a lot of noise
          // with respect to selection removed notifications used by the
          // accessibility API support.
          var userSelecting = this._userSelecting;
          this._userSelecting = false; // that's US automatically unselecting
          for (; currentItem; currentItem = this.getNextItem(currentItem, 1))
            this.removeItemFromSelection(currentItem);

          for (currentItem = this.getItemAtIndex(0); currentItem != aStartItem;
               currentItem = this.getNextItem(currentItem, 1))
            this.removeItemFromSelection(currentItem);
          this._userSelecting = userSelecting;

          this._suppressOnSelect = suppressSelect;

          this._fireOnSelect();
        ]]>
        </body>
      </method>

      <method name="selectAll">
        <body>
          this._selectionStart = null;

          var suppress = this._suppressOnSelect;
          this._suppressOnSelect = true;

          var item = this.getItemAtIndex(0);
          while (item) {
            this.addItemToSelection(item);
            item = this.getNextItem(item, 1);
          }

          this._suppressOnSelect = suppress;
          this._fireOnSelect();
        </body>
      </method>

      <method name="invertSelection">
        <body>
          this._selectionStart = null;

          var suppress = this._suppressOnSelect;
          this._suppressOnSelect = true;

          var item = this.getItemAtIndex(0);
          while (item) {
            if (item.selected)
              this.removeItemFromSelection(item);
            else
              this.addItemToSelection(item);
            item = this.getNextItem(item, 1);
          }

          this._suppressOnSelect = suppress;
          this._fireOnSelect();
        </body>
      </method>

      <method name="clearSelection">
        <body>
        <![CDATA[
          if (this.selectedItems) {
            for (var i = this.selectedItems.length - 1; i >= 0; --i)
              this.selectedItems[i].selected = false;

            this.selectedItems.length = 0;
          }

          this._selectionStart = null;
          this._fireOnSelect();
        ]]>
        </body>
      </method>

      <property name="selectedCount" readonly="true"
                onget="return this.selectedItems.length;"/>

      <method name="getSelectedItem">
        <parameter name="aIndex"/>
        <body>
        <![CDATA[
          return aIndex < this.selectedItems.length ?
            this.selectedItems[aIndex] : null;
        ]]>
        </body>
      </method>

    <!-- Other public members -->
      <property name="disableKeyNavigation"
                onget="return this.hasAttribute('disableKeyNavigation');">
        <setter>
          if (val)
            this.setAttribute("disableKeyNavigation", "true");
          else
            this.removeAttribute("disableKeyNavigation");
          return val;
        </setter>
      </property>

      <property name="suppressOnSelect"
                onget="return this.getAttribute('suppressonselect') == 'true';"
                onset="this.setAttribute('suppressonselect', val);"/>

      <property name="_selectDelay"
                onset="this.setAttribute('_selectDelay', val);"
                onget="return this.getAttribute('_selectDelay') || 50;"/>

      <method name="timedSelect">
        <parameter name="aItem"/>
        <parameter name="aTimeout"/>
        <body>
        <![CDATA[
          var suppress = this._suppressOnSelect;
          if (aTimeout != -1)
            this._suppressOnSelect = true;

          this.selectItem(aItem);

          this._suppressOnSelect = suppress;

          if (aTimeout != -1) {
            if (this._selectTimeout)
              window.clearTimeout(this._selectTimeout);
            this._selectTimeout =
              window.setTimeout(this._selectTimeoutHandler, aTimeout, this);
          }
        ]]>
        </body>
      </method>

      <method name="moveByOffset">
        <parameter name="aOffset"/>
        <parameter name="aIsSelecting"/>
        <parameter name="aIsSelectingRange"/>
        <body>
        <![CDATA[
          if ((aIsSelectingRange || !aIsSelecting) &&
              this.selType != "multiple")
            return;

          var newIndex = this.currentIndex + aOffset;
          if (newIndex < 0)
            newIndex = 0;

          var numItems = this.getRowCount();
          if (newIndex > numItems - 1)
            newIndex = numItems - 1;

          var newItem = this.getItemAtIndex(newIndex);
          // make sure that the item is actually visible/selectable
          if (this._userSelecting && newItem && !this._canUserSelect(newItem))
            newItem =
              aOffset > 0 ? this.getNextItem(newItem, 1) || this.getPreviousItem(newItem, 1) :
                            this.getPreviousItem(newItem, 1) || this.getNextItem(newItem, 1);
          if (newItem) {
            this.ensureIndexIsVisible(this.getIndexOfItem(newItem));
            if (aIsSelectingRange)
              this.selectItemRange(null, newItem);
            else if (aIsSelecting)
              this.selectItem(newItem);

            this.currentItem = newItem;
          }
        ]]>
        </body>
      </method>

    <!-- Private -->
      <method name="getNextItem">
        <parameter name="aStartItem"/>
        <parameter name="aDelta"/>
        <body>
        <![CDATA[
          while (aStartItem) {
            aStartItem = aStartItem.nextSibling;
            if (aStartItem && aStartItem instanceof
                Components.interfaces.nsIDOMXULSelectControlItemElement &&
                (!this._userSelecting || this._canUserSelect(aStartItem))) {
              --aDelta;
              if (aDelta == 0)
                return aStartItem;
            }
          }
          return null;
        ]]></body>
      </method>

      <method name="getPreviousItem">
        <parameter name="aStartItem"/>
        <parameter name="aDelta"/>
        <body>
        <![CDATA[
          while (aStartItem) {
            aStartItem = aStartItem.previousSibling;
            if (aStartItem && aStartItem instanceof
                Components.interfaces.nsIDOMXULSelectControlItemElement &&
                (!this._userSelecting || this._canUserSelect(aStartItem))) {
              --aDelta;
              if (aDelta == 0)
                return aStartItem;
            }
          }
          return null;
        ]]>
        </body>
      </method>

      <method name="_moveByOffsetFromUserEvent">
        <parameter name="aOffset"/>
        <parameter name="aEvent"/>
        <body>
        <![CDATA[
          if (!aEvent.defaultPrevented) {
            this._userSelecting = true;
            this._mayReverse = true;
            this.moveByOffset(aOffset, !aEvent.ctrlKey, aEvent.shiftKey);
            this._userSelecting = false;
            this._mayReverse = false;
            aEvent.preventDefault();
          }
        ]]>
        </body>
      </method>

      <method name="_canUserSelect">
        <parameter name="aItem"/>
        <body>
        <![CDATA[
          var style = document.defaultView.getComputedStyle(aItem, "");
          return style.display != "none" && style.visibility == "visible";
        ]]>
        </body>
      </method>

      <method name="_selectTimeoutHandler">
        <parameter name="aMe"/>
        <body>
          aMe._fireOnSelect();
          aMe._selectTimeout = null;
        </body>
      </method>

      <field name="_suppressOnSelect">false</field>
      <field name="_userSelecting">false</field>
      <field name="_mayReverse">false</field>
      <field name="_selectTimeout">null</field>
      <field name="_currentItem">null</field>
      <field name="_selectionStart">null</field>
    </implementation>

    <handlers>
      <handler event="keypress" keycode="VK_UP" modifiers="control shift any"
               action="this._moveByOffsetFromUserEvent(-1, event);"
               group="system"/>
      <handler event="keypress" keycode="VK_DOWN" modifiers="control shift any"
               action="this._moveByOffsetFromUserEvent(1, event);"
               group="system"/>
      <handler event="keypress" keycode="VK_HOME" modifiers="control shift any"
               group="system">
        <![CDATA[
          this._mayReverse = true;
          this._moveByOffsetFromUserEvent(-this.currentIndex, event);
          this._mayReverse = false;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_END" modifiers="control shift any"
               group="system">
        <![CDATA[
          this._mayReverse = true;
          this._moveByOffsetFromUserEvent(this.getRowCount() - this.currentIndex - 1, event);
          this._mayReverse = false;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_PAGE_UP" modifiers="control shift any"
               group="system">
        <![CDATA[
          this._mayReverse = true;
          this._moveByOffsetFromUserEvent(this.scrollOnePage(-1), event);
          this._mayReverse = false;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_PAGE_DOWN" modifiers="control shift any"
               group="system">
        <![CDATA[
          this._mayReverse = true;
          this._moveByOffsetFromUserEvent(this.scrollOnePage(1), event);
          this._mayReverse = false;
        ]]>
      </handler>
      <handler event="keypress" key=" " modifiers="control" phase="target">
      <![CDATA[
        if (this.currentItem && this.selType == "multiple")
          this.toggleItemSelection(this.currentItem);
      ]]>
      </handler>
      <handler event="focus">
      <![CDATA[
        if (this.getRowCount() > 0) {
          if (this.currentIndex == -1) {
            this.currentIndex = this.getIndexOfFirstVisibleRow();
          }
          else {
            this.currentItem._fireEvent("DOMMenuItemActive");
          }
        }
        this._lastKeyTime = 0;
      ]]>
      </handler>
      <handler event="keypress" phase="target">
      <![CDATA[
        if (this.disableKeyNavigation || !event.charCode ||
            event.altKey || event.ctrlKey || event.metaKey)
          return;

        if (event.timeStamp - this._lastKeyTime > 1000)
          this._incrementalString = "";

        var key = String.fromCharCode(event.charCode).toLowerCase();
        this._incrementalString += key;
        this._lastKeyTime = event.timeStamp;

        // If all letters in the incremental string are the same, just
        // try to match the first one
        var incrementalString = /^(.)\1+$/.test(this._incrementalString) ?
                                RegExp.$1 : this._incrementalString;
        var length = incrementalString.length;

        var rowCount = this.getRowCount();
        var l = this.selectedItems.length;
        var start = l > 0 ? this.getIndexOfItem(this.selectedItems[l - 1]) : -1;
        // start from the first element if none was selected or from the one
        // following the selected one if it's a new or a repeated-letter search
        if (start == -1 || length == 1)
          start++;

        for (var i = 0; i < rowCount; i++) {
          var k = (start + i) % rowCount;
          var listitem = this.getItemAtIndex(k);
          if (!this._canUserSelect(listitem))
            continue;
          // allow richlistitems to specify the string being searched for
          var searchText = "searchLabel" in listitem ? listitem.searchLabel :
                           listitem.getAttribute("label"); // (see also bug 250123)
          searchText = searchText.substring(0, length).toLowerCase();
          if (searchText == incrementalString) {
            this.ensureIndexIsVisible(k);
            this.timedSelect(listitem, this._selectDelay);
            break;
          }
        }
      ]]>
      </handler>
    </handlers>
  </binding>


  <!-- Binding for xul:listbox element.
  -->
  <binding id="listbox"
           extends="#listbox-base">

    <resources>
      <stylesheet src="chrome://global/skin/listbox.css"/>
    </resources>

    <content>
      <children includes="listcols">
        <xul:listcols>
          <xul:listcol flex="1"/>
        </xul:listcols>
      </children>
      <xul:listrows>
        <children includes="listhead"/>
        <xul:listboxbody xbl:inherits="rows,size,minheight">
          <children includes="listitem"/>
        </xul:listboxbody> 
      </xul:listrows>
    </content>

    <implementation>

      <!-- ///////////////// public listbox members ///////////////// -->

      <property name="listBoxObject"
                onget="return this.boxObject;"
                readonly="true"/>

      <!-- ///////////////// private listbox members ///////////////// -->

      <method name="_fireOnSelect">
        <body>
        <![CDATA[
          if (!this._suppressOnSelect && !this.suppressOnSelect) {
            var event = document.createEvent("Events");
            event.initEvent("select", true, true);
            this.dispatchEvent(event);
          }
        ]]>
        </body>
      </method>

      <constructor>
      <![CDATA[
        var count = this.itemCount;
        for (var index = 0; index < count; index++) {
          var item = this.getItemAtIndex(index);
          if (item.getAttribute("selected") == "true")
            this.selectedItems.push(item);
        }
      ]]>
      </constructor>

      <!-- ///////////////// nsIDOMXULSelectControlElement ///////////////// -->

      <method name="appendItem">
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <body>
          const XULNS =
            "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

          var item = this.ownerDocument.createElementNS(XULNS, "listitem");
          item.setAttribute("label", aLabel);
          item.setAttribute("value", aValue);
          this.appendChild(item);
          return item;
        </body>
      </method>

      <method name="insertItemAt">
        <parameter name="aIndex"/>
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <body>
          const XULNS =
            "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

          var item = this.ownerDocument.createElementNS(XULNS, "listitem");
          item.setAttribute("label", aLabel);
          item.setAttribute("value", aValue);
          var before = this.getItemAtIndex(aIndex);
          if (before)
            this.insertBefore(item, before);
          else
            this.appendChild(item);
          return item;
        </body>
      </method>

      <property name="itemCount" readonly="true"
                onget="return this.listBoxObject.getRowCount()"/>

      <!-- ///////////////// nsIListBoxObject ///////////////// -->
      <method name="getIndexOfItem">
        <parameter name="item"/>
        <body>
          return this.listBoxObject.getIndexOfItem(item);
        </body>
      </method>
      <method name="getItemAtIndex">
        <parameter name="index"/>
        <body>
          return this.listBoxObject.getItemAtIndex(index);
        </body>
      </method>
      <method name="ensureIndexIsVisible">
        <parameter name="index"/>
        <body>
          return this.listBoxObject.ensureIndexIsVisible(index);
        </body>
      </method>
      <method name="ensureElementIsVisible">
        <parameter name="element"/>
        <body>
          return this.ensureIndexIsVisible(this.listBoxObject.getIndexOfItem(element));
        </body>
      </method>
      <method name="scrollToIndex">
        <parameter name="index"/>
        <body>
          return this.listBoxObject.scrollToIndex(index);
        </body>
      </method>
      <method name="getNumberOfVisibleRows">
        <body>
          return this.listBoxObject.getNumberOfVisibleRows();
        </body>
      </method>
      <method name="getIndexOfFirstVisibleRow">
        <body>
          return this.listBoxObject.getIndexOfFirstVisibleRow();
        </body>
      </method>
      <method name="getRowCount">
        <body>
          return this.listBoxObject.getRowCount();
        </body>
      </method>

      <method name="scrollOnePage">
        <parameter name="direction"/>  <!-- Must be -1 or 1 -->
        <body>      
          <![CDATA[
            var pageOffset = this.getNumberOfVisibleRows() * direction;
            // skip over invisible elements - the user won't care about them
            for (var i = 0; i != pageOffset; i += direction) {
              var item = this.getItemAtIndex(this.currentIndex + i);
              if (item && !this._canUserSelect(item))
                pageOffset += direction;
            }
            var newTop = this.getIndexOfFirstVisibleRow() + pageOffset;
            if (direction == 1) {
              var maxTop = this.getRowCount() - this.getNumberOfVisibleRows();
              for (i = this.getRowCount(); i >= 0 && i > maxTop; i--) {
                item = this.getItemAtIndex(i);
                if (item && !this._canUserSelect(item))
                  maxTop--;
              }
              if (newTop >= maxTop)
                newTop = maxTop;
            }
            if (newTop < 0)
              newTop = 0;
            this.scrollToIndex(newTop);
            return pageOffset;          
          ]]>
        </body>
      </method>
    </implementation>
    
    <handlers>
      <handler event="keypress" key=" " phase="target">
        <![CDATA[
          if (this.currentItem) {
            if (this.currentItem.getAttribute("type") != "checkbox")
              this.addItemToSelection(this.currentItem);
            else if (!this.currentItem.disabled) {
              this.currentItem.checked = !this.currentItem.checked;
              this.currentItem.doCommand();
            }
          }
        ]]>
      </handler>

      <handler event="MozSwipeGesture">
        <![CDATA[
          // Figure out which index to show
          let targetIndex = 0;

          // Only handle swipe gestures up and down
          switch (event.direction) {
            case event.DIRECTION_DOWN:
              targetIndex = this.itemCount - 1;
              // Fall through for actual action
            case event.DIRECTION_UP:
              this.ensureIndexIsVisible(targetIndex);
              break;
          }
        ]]>
      </handler>
    </handlers>    
  </binding>

  <binding id="listrows">

    <resources>
      <stylesheet src="chrome://global/skin/listbox.css"/>
    </resources>

    <handlers>
      <handler event="DOMMouseScroll" phase="capturing">
      <![CDATA[
        if (event.axis == event.HORIZONTAL_AXIS)
          return;

        var listBox = this.parentNode.listBoxObject;
        var rows = event.detail;
        if (rows == UIEvent.SCROLL_PAGE_UP)
          rows = -listBox.getNumberOfVisibleRows();
        else if (rows == UIEvent.SCROLL_PAGE_DOWN)
          rows = listBox.getNumberOfVisibleRows();

        listBox.scrollByLines(rows);
        event.preventDefault();
      ]]>
      </handler>

      <handler event="MozMousePixelScroll" phase="capturing">
      <![CDATA[
        if (event.axis == event.HORIZONTAL_AXIS)
          return;

        // shouldn't be scrolled by pixel scrolling events before a line/page
        // scrolling event.
        event.preventDefault();
      ]]>
      </handler>
    </handlers>
  </binding>
  
  <binding id="listitem" role="xul:listitem"
           extends="chrome://global/content/bindings/general.xml#basetext">
    <resources>
      <stylesheet src="chrome://global/skin/listbox.css"/>
    </resources>

    <content>
      <children>
        <xul:listcell xbl:inherits="label,crop,disabled,flexlabel"/>
      </children>
    </content>

    <implementation implements="nsIDOMXULSelectControlItemElement">
      <property name="current" onget="return this.getAttribute('current') == 'true';">
        <setter><![CDATA[
          if (val)
            this.setAttribute("current", "true");
          else
            this.removeAttribute("current");

          this._fireEvent(val ? "DOMMenuItemActive" : "DOMMenuItemInactive");

          return val;
        ]]></setter>
      </property>

      <!-- ///////////////// nsIDOMXULSelectControlItemElement ///////////////// -->
                
      <property name="value" onget="return this.getAttribute('value');"
                             onset="this.setAttribute('value', val); return val;"/>
      <property name="label" onget="return this.getAttribute('label');"
                             onset="this.setAttribute('label', val); return val;"/>
      
      <property name="selected" onget="return this.getAttribute('selected') == 'true';">
        <setter><![CDATA[
          if (val)
            this.setAttribute("selected", "true");
          else
            this.removeAttribute("selected");

          return val;
        ]]></setter>
      </property>

      <property name="control">
        <getter><![CDATA[
          var parent = this.parentNode;
          while (parent) {
            if (parent instanceof Components.interfaces.nsIDOMXULSelectControlElement)
              return parent;
            parent = parent.parentNode;
          }
          return null;
        ]]></getter>
      </property>

      <method name="_fireEvent">
        <parameter name="name"/>
        <body>
        <![CDATA[
          var event = document.createEvent("Events");
          event.initEvent(name, true, true);
          this.dispatchEvent(event);
        ]]>
        </body>
      </method>
    </implementation>
    <handlers>
      <!-- If there is no modifier key, we select on mousedown, not
           click, so that drags work correctly. -->
      <handler event="mousedown">
      <![CDATA[
        var control = this.control;
        if (!control || control.disabled)
          return;
        if ((!event.ctrlKey
#ifdef XP_MACOSX
             || event.button == 2
#endif
            ) && !event.shiftKey && !event.metaKey) {
          if (!this.selected) {
            control.selectItem(this);
          }
          control.currentItem = this;
        }
      ]]>
      </handler>

      <!-- On a click (up+down on the same item), deselect everything
           except this item. -->
      <handler event="click" button="0">
      <![CDATA[
        var control = this.control;
        if (!control || control.disabled)
          return;
        control._userSelecting = true;
        if (control.selType != "multiple") {
          control.selectItem(this);
        }
        else if (event.ctrlKey || event.metaKey) {
          control.toggleItemSelection(this);
          control.currentItem = this;
        }
        else if (event.shiftKey) {
          control.selectItemRange(null, this);
          control.currentItem = this;
        }
        else {
          /* We want to deselect all the selected items except what was
            clicked, UNLESS it was a right-click.  We have to do this
            in click rather than mousedown so that you can drag a
            selected group of items */

          // use selectItemRange instead of selectItem, because this
          // doesn't de- and reselect this item if it is selected
          control.selectItemRange(this, this);
        }
        control._userSelecting = false;
      ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="listitem-iconic"
           extends="chrome://global/content/bindings/listbox.xml#listitem">
    <content>
      <children>
        <xul:listcell class="listcell-iconic" xbl:inherits="label,image,crop,disabled,flexlabel"/>
      </children>
    </content>
  </binding>
  
  <binding id="listitem-checkbox"
           extends="chrome://global/content/bindings/listbox.xml#listitem">
    <content>
      <children>
        <xul:listcell type="checkbox" xbl:inherits="label,crop,checked,disabled,flexlabel"/>
      </children>
    </content>

    <implementation>
      <property name="checked"
                onget="return this.getAttribute('checked') == 'true';">
        <setter><![CDATA[
          if (val)
            this.setAttribute('checked', 'true');
          else
            this.removeAttribute('checked');
          var event = document.createEvent('Events');
          event.initEvent('CheckboxStateChange', true, true);
          this.dispatchEvent(event);
          return val;
        ]]></setter>
      </property>
    </implementation>

    <handlers> 
      <handler event="mousedown" button="0">
      <![CDATA[
        if (!this.disabled && !this.control.disabled) {
          this.checked = !this.checked;
          this.doCommand();
        }
      ]]>
      </handler>
    </handlers>
  </binding>
  
  <binding id="listitem-checkbox-iconic"
           extends="chrome://global/content/bindings/listbox.xml#listitem-checkbox">
    <content>
      <children>
        <xul:listcell type="checkbox" class="listcell-iconic" xbl:inherits="label,image,crop,checked,disabled,flexlabel"/>
      </children>
    </content>
  </binding>
  
  <binding id="listcell" role="xul:listcell"
           extends="chrome://global/content/bindings/general.xml#basecontrol">

    <resources>
      <stylesheet src="chrome://global/skin/listbox.css"/>
    </resources>

    <content>
      <children>
        <xul:label class="listcell-label" xbl:inherits="value=label,flex=flexlabel,crop,disabled" flex="1" crop="right"/>
      </children>
    </content>
  </binding>

  <binding id="listcell-iconic"
           extends="chrome://global/content/bindings/listbox.xml#listcell">
    <content>
      <children>
        <xul:image class="listcell-icon" xbl:inherits="src=image"/>
        <xul:label class="listcell-label" xbl:inherits="value=label,flex=flexlabel,crop,disabled" flex="1" crop="right"/>
      </children>
    </content>
  </binding>

  <binding id="listcell-checkbox"
           extends="chrome://global/content/bindings/listbox.xml#listcell">
    <content>
      <children>
        <xul:image class="listcell-check" xbl:inherits="checked,disabled"/>
        <xul:label class="listcell-label" xbl:inherits="value=label,flex=flexlabel,crop,disabled" flex="1" crop="right"/>
      </children>
    </content>
  </binding>

  <binding id="listcell-checkbox-iconic"
           extends="chrome://global/content/bindings/listbox.xml#listcell-checkbox">
    <content>
      <children>
        <xul:image class="listcell-check" xbl:inherits="checked,disabled"/>
        <xul:image class="listcell-icon" xbl:inherits="src=image"/>
        <xul:label class="listcell-label" xbl:inherits="value=label,flex=flexlabel,crop,disabled" flex="1" crop="right"/>
      </children>
    </content>
  </binding>

  <binding id="listhead" role="xul:listhead">

    <resources>
      <stylesheet src="chrome://global/skin/listbox.css"/>
    </resources>

    <content>
      <xul:listheaditem>
        <children includes="listheader"/>
      </xul:listheaditem>
    </content>
  </binding>

  <binding id="listheader" display="xul:button" role="xul:listheader">

    <resources>
      <stylesheet src="chrome://global/skin/listbox.css"/>
    </resources>

    <content>
      <xul:image class="listheader-icon"/>
      <xul:label class="listheader-label" xbl:inherits="value=label,crop" flex="1" crop="right"/>
      <xul:image class="listheader-sortdirection" xbl:inherits="sortDirection"/>
    </content>
  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<TextView xmlns:android="http://schemas.android.com/apk/res/android"  
    android:id="@android:id/text1"  
    android:layout_width="match_parent"
    android:layout_height="wrap_content"  
    android:paddingTop="2dip"  
    android:paddingBottom="2dip"  
    android:paddingLeft="5dip"  
    style="?android:attr/listSeparatorTextViewStyle" /> 
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - LI</title>
</head>
<body onload="parent.loadComplete()">
<ol>
<li type="square" value="2">EMP0001
<ul>
<li>Margaret Martin
<dl>
<dd>Accountant</dd>
<dd>56,000</dd>
<dd>Female</dd>
</dl>
</li>
</ul>
</li>
</ol>
</body>
</html>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 34238 $"/>
		<generation date="$Date: 2013-09-07 20:46:42 +0000 (Sat, 07 Sep 2013) $"/>
		<language type="lkt"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="ln"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
   <its:localeFilterRule selector="//h:div[@id='Canada']" localeFilterList="en-CA, fr-CA"/>
</its:rules>
<book
  xmlns:its="http://www.w3.org/2005/11/its" 
  its:version="2.0">
 <info>
  <its:rules version="2.0">
   <its:localeFilterRule selector="//legalnotice[@role='Canada']" localeFilterList="en-CA, fr-CA"/>
  </its:rules>
  <legalnotice role="Canada">
   <para>This legal notice is only for Canadian locales.</para>
  </legalnotice>
 </info>
</book>
<book
  xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <info>
  <legalnotice
    its:localeFilterList="en-CA, fr-CA">
   <para>This legal notice is only for Canadian locales.</para>
  </legalnotice>
 </info>
</book>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
   <its:param name="localeParam">Canada</its:param>
   <its:localeFilterRule selector="//h:div[@id=$localeParam]" localeFilterList="en-CA, fr-CA"/>
</its:rules>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:localeFilterRule selector="//legalnotice[@role='Canada']" localeFilterList="en-CA, fr-CA"/>
</its:rules>
<book
  xmlns:its="http://www.w3.org/2005/11/its" 
  its:version="2.0">
 <info>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="locale3xmlrules.xml"/>
  <legalnotice role="Canada">
   <para>This legal notice is only for Canadian locales.</para>
  </legalnotice>
 </info>
</book>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:localeFilterRule selector="//legalnotice[@role='Canada']" localeFilterList="en-CA, fr-CA"/>
</its:rules>
<book
  xmlns:its="http://www.w3.org/2005/11/its" 
  its:version="2.0">
 <info>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="locale4xmlrules.xml"/>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:localeFilterRule selector="//legalnotice[@role='Germany']" localeFilterList="de-DE"/>
</its:rules>
  <legalnotice role="Canada">
   <para>This legal notice is only for Canadian locales.</para>
  </legalnotice>
  <legalnotice role="Germany">
   <para>This legal notice is only for German locales.</para>
  </legalnotice>
 </info>
</book>

<book xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
<info>
<its:span localeFilterList="en-CA, fr-CA">
<para>This legal notice is only for Canadian locales.</para>
</its:span>
</info>
</book>
<book>
 <info>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:param name="localeParam">Germany</its:param>
   <its:localeFilterRule selector="//legalnotice[@role='Germany']" localeFilterList="de-DE"/>
</its:rules>
  <legalnotice role="Canada">
   <para>This legal notice is only for Canadian locales.</para>
  </legalnotice>
  <legalnotice role="Germany">
   <para>This legal notice is only for German locales.</para>
  </legalnotice>
 </info>
</book><its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:param name="localeParam">Germany</its:param>
   <its:localeFilterRule selector="//legalnotice[@role=$localeParam]" localeFilterList="de-DE"/>
</its:rules>
<book
  xmlns:its="http://www.w3.org/2005/11/its" 
  its:version="2.0">
 <info>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="locale7xmlrules.xml"/>
  <legalnotice role="Canada">
   <para>This legal notice is only for Canadian locales.</para>
  </legalnotice>
  <legalnotice role="Germany">
   <para>This legal notice is only for German locales.</para>
  </legalnotice>
 </info>
</book>
<book
  xmlns:its="http://www.w3.org/2005/11/its" 
  its:version="2.0">
 <info>
  <legalnotice its:localeFilterList="*-CA" its:localeFilterType="include">
   <para>Text only for Canadian locales.</para>
  </legalnotice>
  <legalnotice its:localeFilterList="*-CA" its:localeFilterType="exclude">
   <para>Text for non-Canadian locales.</para>
  </legalnotice>
  <legalnotice its:localeFilterList="*" its:localeFilterType="exclude">
   <para>Text for no locales.</para>
  </legalnotice>
  <legalnotice its:localeFilterList="" its:localeFilterType="exclude">
   <para>Text for all locales.</para>
  </legalnotice>
 </info>
</book>
<msgList>
<head>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="DisableInfoParam">DisableInfo</its:param>
<its:locNoteRule selector="//@alt" locNoteType="description">
<its:locNote>This text will be displayed over the image.</its:locNote>
</its:locNoteRule>
<its:locNoteRule selector="//msg[@id='1']/img/@alt" locNoteType="alert">
<its:locNote>Do not translate the word "Chobe"</its:locNote>
</its:locNoteRule>
<its:locNoteRule locNoteType="alert" selector="//msg[@id=$DisableInfoParam]">
<its:locNote>
The variable
{0}
has three possible values: 'printer', 'stacker' and 'stapler options'.
</its:locNote>
</its:locNoteRule>
</its:rules>
</head>
<body>
<msg id="1">
This is a hippoptamus:
<img src="hippo.png" alt="Hippo in the Chobe River"/>
.
</msg>
<msg id="2">
This is an elephant:
<img src="elephants.png" alt="Elephants taking a mud bath"/>
.
</msg>
<msg id="DisableInfo">The {0} has been disabled.</msg>
</body>
</msgList>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="DisableInfoParam">DisableInfo</its:param>
<its:locNoteRule selector="//@alt" locNoteType="description">
<its:locNote>This text will be displayed over the image.</its:locNote>
</its:locNoteRule>
<its:locNoteRule selector="//msg[@id='1']/img/@alt" locNoteType="alert">
<its:locNote>Do not translate the word "Chobe"</its:locNote>
</its:locNoteRule>
<its:locNoteRule locNoteType="alert" selector="//msg[@id=$DisableInfoParam]">
<its:locNote>
The variable
{0}
has three possible values: 'printer', 'stacker' and 'stapler options'.
</its:locNote>
</its:locNoteRule>
</its:rules>
<msgList>
<head>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" xlink:href="locnote11xmlrules.xml"/>
</head>
<body>
<msg id="1">
This is a hippoptamus:
<img src="hippo.png" alt="Hippo in the Chobe River"/>
.
</msg>
<msg id="2">
This is an elephant:
<img src="elephants.png" alt="Elephants taking a mud bath"/>
.
</msg>
<msg id="DisableInfo">The {0} has been disabled.</msg>
</body>
</msgList>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:locNoteRule locNoteType="alert" selector="//h:span[@id='DisableInfo']">
<its:locNote>
The variable {0} has three possible values: 'printer', 'stacker' and 'stapler options'.
</its:locNote>
</its:locNoteRule>
</its:rules>
<myRes>
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:locNoteRule locNoteType="alert" selector="//msg[@id='DisableInfo']">
    <its:locNote>The variable {0} has three possible values: 'printer', 
    'stacker' and 'stapler options'.</its:locNote>
   </its:locNoteRule>
  </its:rules>
 </head>
 <body>
  <msg id="DisableInfo">The {0} has been disabled.</msg>
 </body>
</myRes>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:translateRule selector="//h:section/h:p" translate="no"/>
<its:locNoteRule locNoteType="description" selector="//h:section/h:span" locNotePointer="../h:p"/>
</its:rules>
<Res>
 <prolog>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:translateRule selector="//msg/notes" translate="no"/>
   <its:locNoteRule locNoteType="description" selector="//msg/data"
    locNotePointer="../notes"/>
  </its:rules>
 </prolog>
 <body>
  <msg id="FileNotFound">
   <notes>Indicates that the resource file {0} could not be loaded.</notes>
   <data>Cannot find the file {0}.</data>
  </msg>
  <msg id="DivByZero">
   <notes>A division by 0 was going to be computed.</notes>
   <data>Invalid parameter.</data>
  </msg>
 </body>
</Res>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:locNoteRule locNoteType="description" selector="//h:span[@id='NotFound']" locNoteRef="ErrorsInfo.html/#NotFound"/>
</its:rules>
<myRes>
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:locNoteRule locNoteType="description"
    selector="//msg[@id='NotFound']"
    locNoteRef="ErrorsInfo.html/#NotFound" />
  </its:rules>
 </head>
 <body>
  <msg id="NotFound">Cannot find {0} on {1}.</msg>
 </body>
</myRes>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:locNoteRule locNoteType="description" selector="//h:body/h:p/h:span" locNoteRefPointer="../@title"/>
</its:rules>
<dataFile>
 <prolog>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:locNoteRule locNoteType="description" selector="//body/string/data"
    locNoteRefPointer="../@noteFile" />
  </its:rules>
 </prolog>
 <body>
  <string id="FileNotFound" noteFile="Comments.html#FileNotFound">
   <data>Cannot find the file {0}.</data>
  </string>
  <string id="DivByZero" noteFile="Comments.html#DivByZero">
   <data>Invalid parameter.</data>
  </string>
 </body>
</dataFile>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:locNoteRule selector="//h:p[@id='1']/h:img/@alt" locNoteType="alert">
<its:locNote>Do not translate the word "Chobe"</its:locNote>
</its:locNoteRule>
<its:locNoteRule selector="//h:p[@id='2']/h:img/@alt" locNoteType="description">
<its:locNote>This text will be displayed over the image.</its:locNote>
</its:locNoteRule>
<its:locNoteRule locNoteType="alert" selector="//h:p[@id='DisableInfo']">
<its:locNote>
The variable
{0}
has three possible values: 'printer', 'stacker' and 'stapler options'.
</its:locNote>
</its:locNoteRule>
</its:rules>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
 <its:locNoteRule selector="//@alt" locNoteType="description">
  <its:locNote>This text will be displayed over the image.</its:locNote>
 </its:locNoteRule>
 <its:locNoteRule locNoteType="alert" selector="//msg[@id='DisableInfo']">
  <its:locNote>The variable {0} has three possible values: 'printer', 
  'stacker' and 'stapler options'.</its:locNote>
 </its:locNoteRule>
</its:rules>
<msgList>
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0"
   xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" xlink:href="locnote5xmlrules.xml">
   <its:locNoteRule selector="//msg[@id='1']/img/@alt" locNoteType="alert">
    <its:locNote>Do not translate the word "Chobe"</its:locNote>
   </its:locNoteRule>
  </its:rules>
 </head>
 <body>
  <msg id="1">This is a hippoptamus: <img src="hippo.png" alt="Hippo in the Chobe River"/>.</msg>
  <msg id="2">This is an elephant: <img src="elephants.png" alt="Elephants taking a mud bath"/>.</msg>
  <msg id="DisableInfo">The {0} has been disabled.</msg>
 </body>
</msgList>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:locNoteRule selector="//@alt" locNoteType="description">
<its:locNote>This text will be displayed over the image.</its:locNote>
</its:locNoteRule>
<its:locNoteRule selector="//h:span[@id='1']/h:img/@alt" locNoteType="alert">
<its:locNote>Do not translate the word "Chobe"</its:locNote>
</its:locNoteRule>
<its:locNoteRule locNoteType="alert" selector="//h:span[@id='DisableInfo']">
<its:locNote>
The variable
{0}
has three possible values: 'printer', 'stacker' and 'stapler options'.
</its:locNote>
</its:locNoteRule>
</its:rules>
<msgList>
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:locNoteRule selector="//@alt" locNoteType="description">
    <its:locNote>This text will be displayed over the image.</its:locNote>
   </its:locNoteRule>
   <its:locNoteRule selector="//msg[@id='1']/img/@alt" locNoteType="alert">
    <its:locNote>Do not translate the word "Chobe"</its:locNote>
   </its:locNoteRule>
   <its:locNoteRule locNoteType="alert" selector="//msg[@id='DisableInfo']">
    <its:locNote>The variable {0} has three possible values: 'printer', 
    'stacker' and 'stapler options'.</its:locNote>
   </its:locNoteRule>
  </its:rules>
 </head>
 <body>
  <msg id="1">This is a hippoptamus: <img src="hippo.png" alt="Hippo in the Chobe River"/>.</msg>
  <msg id="2">This is an elephant: <img src="elephants.png" alt="Elephants taking a mud bath"/>.</msg>
  <msg id="DisableInfo">The {0} has been disabled.</msg>
 </body>
</msgList>
<Res>
<prolog>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:translateRule selector="//msg/notes" translate="no"/>
<its:locNoteRule locNoteType="description" selector="//msg/data" locNotePointer="../notes"/>
</its:rules>
</prolog>
<body>
<msg id="FileNotFound">
<notes>
Indicates that the resource file {0} could not be loaded.
</notes>
<data>Cannot find the file {0}.</data>
</msg>
<msg id="DivByZero">
<notes>A division by 0 was going to be computed.</notes>
<data>Invalid parameter.</data>
</msg>
</body>
</Res>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:param name="spanIdParam">DisableInfo</its:param>
<its:locNoteRule selector="//@alt" locNoteType="description">
<its:locNote>This text will be displayed over the image.</its:locNote>
</its:locNoteRule>
<its:locNoteRule selector="//h:span[@id='1']/h:img/@alt" locNoteType="alert">
<its:locNote>Do not translate the word "Chobe"</its:locNote>
</its:locNoteRule>
<its:locNoteRule locNoteType="alert" selector="//h:span[@id=$spanIdParam]">
<its:locNote>
The variable
{0}
has three possible values: 'printer', 'stacker' and 'stapler options'.
</its:locNote>
</its:locNoteRule>
</its:rules>
<?xml version="1.0"?>
<Res xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <body its:locNote="The variable {0} is the name of the host.">
  <msg id="HostNotFound">
   <data>Host {0} cannot be found.</data>
  </msg>
  <msg id="HostDisconnected">
   <data>The connection with {0} has been lost.</data>
  </msg>
  <msg id="FileNotFound">
   <data its:locNote="{0} is a filename" its:locNoteType="alert">{0} not found.</data>
  </msg>
  <msg id="CannotLog">
   <data its:locNoteRef="myLocNotes.htm#CannotLog" its:locNoteType="alert">Cannot log with this username.</data>
  </msg>
 </body>
</Res>
<?xml version="1.0"?>
<Doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <body>
  <p><its:span locNote="If possible keep the non-English terms in the translated version too">Everything started when
   Zebulon discovered that he had a <its:span locNoteRef="http://en.wikipedia.org/wiki/Doppelganger">doppelgänger</its:span>
   who was a <b>serious</b> baseball <its:span locNoteRef="http://en.wikipedia.org/wiki/Aficionado">aficionado</its:span>.</its:span></p>
 </body>
</Doc>
<?xml version="1.0"?>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
<para><its:span locQualityIssueComment="Sentence without capitalization" locQualityIssueSeverity="50" locQualityIssueProfileRef="http://example.org/qaMovel/v1">transport</its:span> or transportation is the movement of people, animals and goods from one location to another.Modes of <its:span locQualityIssueComment="should be 'transport include'" locQualityIssueSeverity="75" locQualityIssueProfileRef="http://example.org/qaMovel/v1">tranport inc.</its:span> air, rail, road, water, cable, pipeline, and space.</para>
</doc>
<?xml version="1.0"?>
<doc>
  <header>
    <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
      <its:param name="locqualityissueParam">q1</its:param>
      <its:locQualityIssueRule selector="//span[@id=$locqualityissueParam]"
        locQualityIssueComment="Sentence without capitalization"
        locQualityIssueSeverity="50"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
	<its:locQualityIssueRule selector="//span[@id='q2']"
        locQualityIssueComment="should be 'transport include'"
	locQualityIssueSeverity="75"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
    </its:rules>
  </header>
  <para>
   <span id="q1">transport</span> or transportation is the movement of people, animals and goods from one location to another.
   Modes of <span id="q2">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.
</para>
</doc>

    <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
      <its:param name="locqualityissueParam">q1</its:param>
      <its:locQualityIssueRule selector="//span[@id=$locqualityissueParam]"
        locQualityIssueComment="Sentence without capitalization"
        locQualityIssueSeverity="50"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
	<its:locQualityIssueRule selector="//span[@id='q2']"
        locQualityIssueComment="should be 'transport include'"
	locQualityIssueSeverity="75"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
    </its:rules>
<?xml version="1.0"?>
<doc>
  <header>
      <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="locqualityissue12xmlrules.xml"/>
  </header>
  <para>
   <span id="q1">transport</span> or transportation is the movement of people, animals and goods from one location to another.
   Modes of <span id="q2">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.
</para>
</doc>

<?xml version="1.0"?>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <file>
    <header>
      <its:rules version="2.0">
        <its:locQualityIssueRule selector="//mrk[@type='x-itslq']"
          locQualityIssuesRefPointer="@ref"/>
      </its:rules>
    </header>
    <unit id="1">
      <segment>
        <source>This is the content</source>
        <target><mrk type="x-itslq" ref="#lq1">c'es</mrk> le contenu</target>
      </segment>
      <its:locQualityIssues xml:id="lq1">
        <its:locQualityIssue
        locQualityIssueComment="'c'es' is unknown. Could be 'c'est'"
	locQualityIssueSeverity="75"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"
	locQualityIssueEnabled="yes"/>
      </its:locQualityIssues>
    </unit>
  </file>
</doc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
  <its:locQualityIssueRule selector="//h:span[@id='q1']"
    locQualityIssueType="typographical"
    locQualityIssueComment="sentence without capitalization"
    locQualityIssueEnabled="yes"/>
  <its:locQualityIssueRule selector="//h:span[@id='q2']"
    locQualityIssueType="misspelling"
    locQualityIssueComment="should be 'Music can'"
    locQualityIssueEnabled="yes"/>
</its:rules>
<?xml version="1.0"?>
<doc>
  <header>
    <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
      <its:locQualityIssueRule selector="//span[@id='q1']"
        locQualityIssueType="typographical"/>
	<its:locQualityIssueRule selector="//span[@id='q2']"
        locQualityIssueType="misspelling"/>
    </its:rules>
  </header>
  <para>
   <span id="q1">transport</span> or transportation is the movement of people, animals and goods from one location to another.
   Modes of <span id="q2">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.
</para>
</doc>



    <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
      <its:locQualityIssueRule selector="//h:span[@id='q1']"
        locQualityIssueType="typographical"
        locQualityIssueComment="sentence without capitalization"
        locQualityIssueSeverity="50"/>
	<its:locQualityIssueRule selector="//h:span[@id='q2']"
         locQualityIssueType="misspelling"
         locQualityIssueComment="should be 'Music can'"
	 locQualityIssueSeverity="75"/>
    </its:rules>
<?xml version="1.0"?>
<doc>
  <header>
    <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
      <its:locQualityIssueRule selector="//span[@id='q1']"
        locQualityIssueComment="Sentence without capitalization"
        locQualityIssueSeverity="50"/>
      <its:locQualityIssueRule selector="//span[@id='q2']"
        locQualityIssueComment="should be 'transport include'"
	locQualityIssueSeverity="75"/>
    </its:rules>
  </header>
  <para>
   <span id="q1">transport</span> or transportation is the movement of people, animals and goods from one location to another.
   Modes of <span id="q2">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.
</para>
</doc>

    <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
      <its:locQualityIssueRule selector="//h:span[@id='q1']"
        locQualityIssueType="typographical"
        locQualityIssueComment="sentence without capitalization"
        locQualityIssueSeverity="50"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
       <its:locQualityIssueRule selector="//h:span[@id='q2']"
        locQualityIssueType="misspelling"
        locQualityIssueComment="should be 'Music can'"
        locQualityIssueSeverity="75"
        locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
    </its:rules><?xml version="1.0"?>
<doc>
  <header>
    <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
      <its:locQualityIssueRule selector="//span[@id='q1']"
        locQualityIssueType="typographical"
        locQualityIssueSeverity="50"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"
	locQualityIssueEnabled="yes"/>
	<its:locQualityIssueRule selector="//span[@id='q2']"
        locQualityIssueType="misspelling"
	locQualityIssueSeverity="75"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"
	locQualityIssueEnabled="yes"/>
    </its:rules>
  </header>
  <para>
   <span id="q1">transport</span> or transportation is the movement of people, animals and goods from one location to another.
   Modes of <span id="q2">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.
</para>
</doc>

<?xml version="1.0"?>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <header>
    <its:rules version="2.0">       
     <its:locQualityIssueRule selector="//span[@id='q1']"
        locQualityIssuesRefPointer="./@issues"/>
     <its:locQualityIssueRule selector="//span[@id='q2']"
        locQualityIssueType="misspelling"
	locQualityIssueSeverity="75"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"
	locQualityIssueEnabled="yes"/>
    </its:rules>
  </header>
  <para>
   <span id="q1" issues="#id1234">transport</span> or transportation is the movement of people, animals and goods from one location to another.
   Modes of <span id="q2">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.
 </para>
 <its:locQualityIssues xml:id="id1234">
  <its:locQualityIssue locQualityIssueType="typographical"
   locQualityIssueSeverity="50"
   locQualityIssueProfileRef="http://example.org/qaMovel/v1"
   locQualityIssueEnabled="no"/>
 </its:locQualityIssues>
</doc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
      <its:locQualityIssueRule selector="//span[@id='q1']"
        locQualityIssueType="typographical"
        locQualityIssueSeverity="50"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
	<its:locQualityIssueRule selector="//span[@id='q2']"
        locQualityIssueComment="should be 'transport include'"
        locQualityIssueSeverity="75"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
    </its:rules>
<?xml version="1.0"?>
<doc>
  <header>
   <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink"
    version="2.0" xlink:type="simple" xlink:href="locqualityissue5xmlrules.xml"/>
  </header>
  <para>
   <span id="q1">transport</span> or transportation is the movement of people, animals and goods from one location to another.
   Modes of <span id="q2">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.
</para>
</doc>
<?xml version="1.0"?>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <para><span its:locQualityIssueType="typographical">transport</span> or transportation is the movement of people, animals and goods from one location to another.Modes of <span its:locQualityIssueType="misspelling">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.</para>
</doc>
<?xml version="1.0"?>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <para><span its:locQualityIssueComment="Sentence without capitalization">transport</span> or transportation is the movement of people, animals and goods from one location to another.Modes of <span its:locQualityIssueComment="should be 'transport include'">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.</para>
</doc>
    <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
      <its:param name="locQualityIssueParam">q1</its:param>
      <its:locQualityIssueRule selector="//h:span[@id=$locQualityIssueParam]"
        locQualityIssueType="typographical"
        locQualityIssueComment="Sentence without capitalization"
        locQualityIssueSeverity="50"
	locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
       <its:locQualityIssueRule selector="//h:span[@id='q2']"
        locQualityIssueType="misspelling"
        locQualityIssueComment="should be 'Music can'"
        locQualityIssueSeverity="75"
        locQualityIssueProfileRef="http://example.org/qaMovel/v1"/>
    </its:rules><?xml version="1.0"?>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
<para><span its:locQualityIssueComment="Sentence without capitalization" its:locQualityIssueSeverity="50">transport</span> or transportation is the movement of people, animals and goods from one location to another.Modes of <span its:locQualityIssueComment="should be 'transport include'" its:locQualityIssueSeverity="75">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.</para>
</doc>
<?xml version="1.0" ?>
<someDataFile xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
<its:locQualityIssues xml:id="lq1">
 <its:locQualityIssue
  locQualityIssueType="misspelling"
  locQualityIssueComment="'c'es' is unknown. Could be 'c'est'"
  locQualityIssueSeverity="50"/>
 <its:locQualityIssue
  locQualityIssueType="grammar"
  locQualityIssueComment="Missing capital on the first word of a sentence."
  locQualityIssueSeverity="30"/>
</its:locQualityIssues>
</someDataFile><?xml version="1.0"?>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
<para><span its:locQualityIssueComment="Sentence without capitalization" its:locQualityIssueSeverity="50" its:locQualityIssueProfileRef="http://example.org/qaMovel/v1">transport</span> or transportation is the movement of people, animals and goods from one location to another.Modes of <span its:locQualityIssueComment="should be 'transport include'" its:locQualityIssueSeverity="75" its:locQualityIssueProfileRef="http://example.org/qaMovel/v1">tranport inc.</span> air, rail, road, water, cable, pipeline, and space.</para>
</doc>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0"
  its:locQualityRatingScore="100"
  its:locQualityRatingScoreThreshold="95"
  its:locQualityRatingProfileRef="http://example.org/qaModel/v13">
  <title>The Adventures of Tom Sawyer</title>
  <para>He got home pretty late that night, and when he climbed cautiously in at
    the window, he uncovered an ambuscade, in the person of his aunt; and when
    she saw the state his clothes were in her resolution to turn his Saturday
    holiday into captivity at hard labor became adamantine in its
    firmness.</para>
</doc>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0"
  its:locQualityRatingVote="-1"
  its:locQualityRatingVoteThreshold="10"
  its:locQualityRatingProfileRef="http://example.org/qaModel/v13">
  <title>The Adventures of Tom Sawyer</title>
  <para>He got home pretty late that night, and when he climbed cautiously in at
    the window, he uncovered an ambuscade, in the person of his aunt; and when
    she saw the state his clothes were in her resolution to turn his Saturday
    holiday into captivity at hard labor became adamantine in its
    firmness.</para>
</doc>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <title>The Adventures of Tom Sawyer</title>
  <its:span locQualityRatingScore="100"
  locQualityRatingScoreThreshold="95"
  locQualityRatingProfileRef="http://example.org/qaModel/v13">
  <para>He got home pretty late that night, and when he climbed cautiously in at
    the window, he uncovered an ambuscade, in the person of his aunt; and when
    she saw the state his clothes were in her resolution to turn his Saturday
    holiday into captivity at hard labor became adamantine in its
    firmness.</para></its:span>
</doc>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <title>The Adventures of Tom Sawyer</title>
  <its:span locQualityRatingVote="-1"
  locQualityRatingVoteThreshold="10"
  locQualityRatingProfileRef="http://example.org/qaModel/v13"><para>He got home pretty late that night, and when he climbed cautiously in at
    the window, he uncovered an ambuscade, in the person of his aunt; and when
    she saw the state his clothes were in her resolution to turn his Saturday
    holiday into captivity at hard labor became adamantine in its
    firmness.</para></its:span>
</doc>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:04 $"/>
        <language type="lo"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:06 $"/>
        <language type="lt"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="luo"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="lu"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="luy"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:07 $"/>
        <language type="lv"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/app_name" />

</LinearLayout>
<foo>This is some invalid xml.
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="softblock1@tests.mozilla.org">
      <versionRange severity="1" minVersion="1" maxVersion="2"/>
    </emItem>
    <emItem id="softblock2@tests.mozilla.org">
      <versionRange severity="1" minVersion="1" maxVersion="2"/>
    </emItem>
    <emItem id="softblock3@tests.mozilla.org">
      <versionRange severity="1" minVersion="1" maxVersion="2"/>
    </emItem>
    <emItem id="softblock4@tests.mozilla.org">
      <versionRange severity="1" minVersion="1" maxVersion="2"/>
    </emItem>
    <emItem id="softblock5@tests.mozilla.org">
      <versionRange severity="1" minVersion="1" maxVersion="2"/>
    </emItem>
    <emItem id="hardblock@tests.mozilla.org">
      <versionRange minVersion="1" maxVersion="2"/>
    </emItem>
    <emItem id="/^RegExp/i">
      <versionRange minVersion="1" maxVersion="2"/>
    </emItem>
  </emItems>
</blocklist>
<?xml version="1.0"?>
<?xml-stylesheet href="link.css" type="text/css"?>
<root xmlns:xlink="http://www.w3.org/1999/xlink">
  <p>Testing manual simple XLinks.</p>
  <mylink xlink:type="simple" xlink:show="new" xlink:href="resource:/res/samples/test0.html">
Must not open, illegal</mylink>
  <mylink xlink:type="simple" xlink:show="new" xlink:href="http://www.mozilla.org">
Must open in new window (www.mozilla.org)</mylink>
  <mylink xlink:type="simple" xlink:show="replace" xlink:href="http://www.mozillazine.org">
Must open in same window (www.mozillazine.org)</mylink>
  <mylink xlink:type="simple" xlink:show="foo" xlink:href="http://www.mozilla.org/">
Foo</mylink>
</root>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - MAP</title>
</head>
<body onload="parent.loadComplete()">
<p>
<map name="mapid" id="mapid">
<area href="./files/dletter1.html" title="Domain1" alt="Domain1"/>
<area href="./files/dletter2.html" title="Domain2" alt="Domain2"/>
<area href="./files/dletter3.html" title="Domain3" alt="Domain3"/>
</map>
</p>
</body>
</html>
<?xml version="1.0"?>

<!--
  This XML file is used to create sequence of accessible name tests. It consist
  of two sections. The first section 'ruledfn' declares name computation rules.
  The second section 'rulesample' defines markup samples we need to check name
  computation rules for.

  <ruledfn>
    <ruleset>
      <rule>

  Section 'ruledfn' contains 'ruleset' elements. Every 'ruleset' element is
  presented by 'rule' elements so that sequence of 'rule' elements gives the
  sequence of name computations rules. Every 'rule' element can be one of four
  types.

   * <rule attr='' type='string'/> used when name is equal to the value of
     attribute presented on the element.

     Example, 'aria-label' attribute. In this case 'rule' element has 'attr'
     attribute pointing to attribute name and 'type' attribute with 'string'
     value. For example, <rule attr="aria-label" type="string"/>.

   * <rule attr='' type='ref'/> used when name is calculated from elements that
     are pointed to by attribute value on the element.

     Example is 'aria-labelledby'. In this case 'rule' element has 'attr'
     attribute holding the sequence of IDs of elements used to compute the name,
     in addition the 'rule' element has 'type' attribute with 'ref' value.
     For example, <rule attr="aria-labelledby" type="ref"/>.

   * <rule elm='' elmattr=''/> used when name is calculated from another
     element. These attributes are used to find an element by tagname and
     attribute with value equaled to ID of the element. If 'elmattr' is missed
     then element from subtree with the given tagname is used.

     Example, html:label@for element, <rule elm="label" elmattr="for"/>.
     Example, html:caption element, <rule elm="caption"/>

   * <rule fromsubtree='true'/> used when name is computed from subtree.

     Example, html:button. In this case 'rule' element has 'fromsubtree'
     attribute with 'true' value.

  <rulesample>
    <markup ruleset=''>

  Section 'rulesample' provides set of markup samples ('markup' elements). Every
  'markup' element contains an element that accessible name will be computed for
  (let's call it test element). In addition the 'markup' element contains some
  other elements from native markup used in name calculation process for test
  element. Test element is pointed to by 'ref' attribute on 'markup' element.
  Also 'markup' element has 'ruleset' attribute to indicate ruleset for the test
  element.

  How does it work? Let's consider simple example:
  <ruledfn>
    <ruleset id="aria">
      <rule attr="aria-label" type="string"/>
      <rule attr="aria-labelledby" type="ref"/>
    </ruleset>
  </ruledfn>
  <rulesample>
    <markup ref="html:div" ruleset="aria">
      <html:span id="label" textequiv="test2">test2</html:span>
      <html:div aria-label="test1"
                aria-labelledby="label">it's a div</html:div>
    </markup>
  </rulesample>

  Initially 'markup' element holds markup for all rules specified by 'ruleset'
  attribute. This allows us to check if the sequence of name computation rules
  is correct. Here 'ruleset' element defines two rules. We get the first rule
  which means accesible name is computed from value of 'aria-label' attribute.
  Then we check accessible name for the test element and remove 'aria-label'
  attribute. After we get the second rule which means we should get IDs from
  'aria-labelledby' attribute and compose accessible name from values of
  'textequiv' attributes (that are supposed to give the desired name for each
  element that is being pointed to by aria-labelledby). Check accessible name
  and finish test.
-->

<rules xmlns:html="http://www.w3.org/1999/xhtml"
       xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <ruledfn>

    <!-- bricks -->
    <ruleset id="ARIA">
      <rule attr="aria-labelledby" type="ref"/>
      <rule attr="aria-label" type="string"/>
    </ruleset>

    <ruleset id="HTMLElm:Head">
      <ruleset ref="ARIA"/>
      <rule elm="label" elmattr="for"/>
    </ruleset>

    <!-- general -->
    <ruleset id="HTMLControl">
      <ruleset ref="ARIA"/>
      <rule elm="label" elmattr="for"/>
      <rule fromsubtree="true"/>
      <rule attr="title" type="string"/>
    </ruleset>

    <ruleset id="HTMLElm">
      <ruleset ref="HTMLElm:Head"/>
      <rule attr="title" type="string"/>
    </ruleset>

    <!-- specific -->
    <ruleset id="HTMLInputButton">
      <ruleset ref="HTMLElm:Head"/>
      <rule attr="value" type="string" explict-name="false" reordered="true"/>
      <rule attr="title" type="string"/>
    </ruleset>

    <ruleset id="HTMLInputSubmit" defaultName="Submit Query">
      <ruleset ref="HTMLElm:Head"/>
      <rule attr="value" type="string" explict-name="false" textchanged="true"/>
    </ruleset>

    <ruleset id="HTMLInputReset" defaultName="Reset">
      <ruleset ref="HTMLElm:Head"/>
      <rule attr="value" type="string" explict-name="false" textchanged="true"/>
    </ruleset>

    <ruleset id="HTMLInputImage">
      <ruleset ref="HTMLElm:Head"/>
      <rule attr="alt" type="string" recreated="true"/>
      <rule attr="value" type="string" recreated="true"/>
      <rule attr="title" type="string"/>
    </ruleset>

    <ruleset id="HTMLInputImageNoValidSrc" defaultName="Submit Query">
      <ruleset ref="HTMLElm:Head"/>
      <rule attr="alt" type="string" explict-name="false" recreated="true"/>
      <rule attr="value" type="string" explict-name="false" recreated="true"/>
    </ruleset>

    <ruleset id="HTMLOption">
      <ruleset ref="ARIA"/>
      <rule attr="label" type="string"/>
      <rule fromsubtree="true"/>
      <rule attr="title" type="string"/>
    </ruleset>

    <ruleset id="HTMLImg">
      <ruleset ref="ARIA"/>
      <rule attr="alt" type="string"/>
      <rule attr="title" type="string"/>
    </ruleset>

    <ruleset id="HTMLImgEmptyAlt">
      <ruleset ref="ARIA"/>
      <rule attr="title" type="string"/>
      <rule attr="alt" type="string"/>
    </ruleset>

    <ruleset id="HTMLTable">
      <ruleset ref="HTMLElm:Head"/>
      <rule elm="caption"/>
      <rule attr="summary" type="string"/>
      <rule attr="title" type="string"/>
    </ruleset>
  </ruledfn>

  <rulesample>

    <markup id="HTMLButtonTest"
            ref="html:button" ruleset="HTMLControl">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:label for="btn" textequiv="test4">test4</html:label>
      <html:button id="btn"
                   aria-label="test1"
                   aria-labelledby="l1 l2"
                   title="test5"
                   textequiv="press me">press me</html:button>
    </markup>

    <markup id="HTMLInputButtonTest"
            ref="html:input" ruleset="HTMLInputButton">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:label for="btn" textequiv="test4">test4</html:label>
      <html:input id="btn"
                  type="button"
                  aria-label="test1"
                  aria-labelledby="l1 l2"
                  value="name from value"
                  alt="no name from al"
                  src="no name from src"
                  data="no name from data"
                  title="name from title"/>
    </markup>

    <markup id="HTMLInputSubmitTest"
            ref="html:input" ruleset="HTMLInputSubmit">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:label for="btn-submit" textequiv="test4">test4</html:label>
      <html:input id="btn-submit"
                  type="submit"
                  aria-label="test1"
                  aria-labelledby="l1 l2"
                  value="name from value"
                  alt="no name from atl"
                  src="no name from src"
                  data="no name from data"
                  title="no name from title"/>
    </markup>

    <markup id="HTMLInputResetTest"
            ref="html:input" ruleset="HTMLInputReset">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:label for="btn-reset" textequiv="test4">test4</html:label>
      <html:input id="btn-reset"
                  type="reset"
                  aria-label="test1"
                  aria-labelledby="l1 l2"
                  value="name from value"
                  alt="no name from alt"
                  src="no name from src"
                  data="no name from data"
                  title="no name from title"/>
    </markup>

    <markup id="HTMLInputImageTest"
            ref="html:input" ruleset="HTMLInputImage">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:label for="btn-image" textequiv="test4">test4</html:label>
      <html:input id="btn-image"
                  type="image"
                  aria-label="test1"
                  aria-labelledby="l1 l2"
                  alt="name from alt"
                  value="name from value"
                  src="../moz.png"
                  data="no name from data"
                  title="name from title"/>
    </markup>

    <markup id="HTMLInputImageNoValidSrcTest"
            ref="html:input" ruleset="HTMLInputImageNoValidSrc">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:label for="btn-image" textequiv="test4">test4</html:label>
      <html:input id="btn-image"
                  type="image"
                  aria-label="test1"
                  aria-labelledby="l1 l2"
                  alt="name from alt"
                  value="name from value"
                  data="no name from data"
                  title="no name from title"/>
    </markup>

    <markup id="HTMLOptionTest"
            ref="html:select/html:option[1]" ruleset="HTMLOption">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:select>
        <html:option id="opt"
                     aria-label="test1"
                     aria-labelledby="l1 l2"
                     label="test4"
                     title="test5"
                     textequiv="option1">option1</html:option>
        <html:option>option2</html:option>
      </html:select>
    </markup>

    <markup id="HTMLImageTest"
            ref="html:img" ruleset="HTMLImg">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:img id="img"
                aria-label="Logo of Mozilla"
                aria-labelledby="l1 l2"
                alt="Mozilla logo"
                title="This is a logo"
                src="../moz.png"/>
    </markup>

    <markup id="HTMLImageEmptyAltTest"
            ref="html:img" ruleset="HTMLImgEmptyAlt">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:img id="imgemptyalt"
                 aria-label="Logo of Mozilla"
                 aria-labelledby="l1 l2"
                 title="This is a logo"
                 alt=""
                 src="../moz.png"/>
    </markup>

    <markup id="HTMLTdTest"
            ref="html:table/html:tr/html:td" ruleset="HTMLElm">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:label for="tc" textequiv="test4">test4</html:label>
      <html:table>
        <html:tr>
          <html:td id="tc"
                   aria-label="test1"
                   aria-labelledby="l1 l2"
                   title="test5">
            <html:p>This is a paragraph</html:p>
            <html:a href="#">This is a link</html:a>
            <html:ul>
              <html:li>This is a list</html:li>
            </html:ul>
          </html:td>
        </html:tr>
      </html:table>
    </markup>

    <markup id="HTMLTdARIAGridCellTest"
            ref="html:table/html:tr/html:td" ruleset="HTMLControl">
      <html:span id="l1" textequiv="test2">test2</html:span>
      <html:span id="l2" textequiv="test3">test3</html:span>
      <html:label for="gc" textequiv="test4">test4</html:label>
      <html:table>
        <html:tr>
          <html:td id="gc"
                   role="gridcell"
                   aria-label="test1"
                   aria-labelledby="l1 l2"
                   textequiv="This is a paragraph This is a link • Listitem1 • Listitem2"
                   title="This is a paragraph This is a link This is a list">
            <html:p>This is a paragraph</html:p>
            <html:a href="#">This is a link</html:a>
            <html:ul>
              <html:li>Listitem1</html:li>
              <html:li>Listitem2</html:li>
            </html:ul>
          </html:td>
        </html:tr>
      </html:table>
    </markup>

    <markup id="HTMLTableTest"
            ref="html:table" ruleset="HTMLTable">
      <html:span id="l1" textequiv="lby_tst6_1">lby_tst6_1</html:span>
      <html:span id="l2" textequiv="lby_tst6_2">lby_tst6_2</html:span>
      <html:label for="t" textequiv="label_tst6">label_tst6</html:label>
      <!-- layout frame are recreated due to varous reasons, here's text frame
          placed after caption frame triggres table frame recreation when
          caption element is removed from DOM; get rid text node after caption
          node to make the test working -->
      <html:table id="t" aria-label="arialabel_tst6"
                  aria-labelledby="l1 l2"
                  summary="summary_tst6"
                  title="title_tst6">
        <html:caption textequiv="caption_tst6">caption_tst6</html:caption><html:tr>
          <html:td>cell1</html:td>
          <html:td>cell2</html:td>
        </html:tr>
      </html:table>
    </markup>

  </rulesample>
</rules>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="mas"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<!-- test mathbackground on a presentation element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow mathbackground="green">
    <mtext>□■□■□■□</mtext>
  </mrow>
</math>

<!-- test mathbackground on a presentation element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow mathbackground="red">
    <mtext>□■□■□■□</mtext>
  </mrow>
</math>

<!-- test mathbackground on mstyle -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mstyle mathbackground="green">
    <mtext>□■□■□■□</mtext>
  </mstyle>
</math>

<!-- test mathbackground on mstyle -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mstyle mathbackground="red">
    <mtext>□■□■□■□</mtext>
  </mstyle>
</math>

<!-- test mathbackground on a token element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mtext mathbackground="green">□■□■□■□</mtext>
</math>

<!-- test mathbackground on a token element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mtext mathbackground="red">□■□■□■□</mtext>
</math>

<!-- test mathbackground on a non-presentation element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <semantics mathbackground="red">
    <mtext>□■□■□■□</mtext>
  </semantics>
</math>

<!-- test mathbackground on a non-presentation element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <semantics mathbackground="green">
    <mtext>□■□■□■□</mtext>
  </semantics>
</math>

<!-- test mathcolor on a presentation element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow mathcolor="green">
    <mtext>□■□■□■□</mtext>
  </mrow>
</math>

<!-- test mathcolor on a presentation element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow mathcolor="red">
    <mtext>□■□■□■□</mtext>
  </mrow>
</math>

<!-- test mathcolor on mstyle -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mstyle mathcolor="green">
    <mtext>□■□■□■□</mtext>
  </mstyle>
</math>

<!-- test mathcolor on mstyle -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mstyle mathcolor="red">
    <mtext>□■□■□■□</mtext>
  </mstyle>
</math>

<!-- test mathcolor on a token element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mtext mathcolor="green">□■□■□■□</mtext>
</math>

<!-- test mathcolor on a token element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mtext mathcolor="red">□■□■□■□</mtext>
</math>

<!-- test mathcolor on a non-presentation element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <semantics mathcolor="red">
    <mtext>□■□■□■□</mtext>
  </semantics>
</math>

<!-- test mathcolor on a non-presentation element -->
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <semantics mathcolor="green">
    <mtext>□■□■□■□</mtext>
  </semantics>
</math>

<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mspace style="position: absolute; top: 0; left: 0; background: green;"
          width="100px" height="100px" depth="0"/>
</math>
<mathml xmlns="http://www.w3.org/1998/Math/MathML"></mathml><?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <RelativeLayout android:id="@+id/media_controls"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true">

        <ImageButton android:id="@+id/media_play"
                     style="@style/FindBar.ImageButton"
                     android:contentDescription="@string/media_play"
                     android:src="@drawable/media_bar_play"
                     android:visibility="gone"/>

        <ImageButton android:id="@+id/media_pause"
                     style="@style/FindBar.ImageButton"
                     android:contentDescription="@string/media_pause"
                     android:src="@drawable/media_bar_pause"/>

    </RelativeLayout>

    <TextView android:id="@+id/media_sending_to"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginLeft="5dip"
              android:layout_marginRight="5dip"
              android:layout_alignParentLeft="true"
              android:layout_toLeftOf="@id/media_controls"
              android:layout_centerVertical="true"
              android:singleLine="true"
              android:ellipsize="end"
              android:textColor="#FFFFFFFF"
              android:contentDescription="@string/media_sending_to"/>

    <ImageButton android:id="@+id/media_stop"
                 style="@style/FindBar.ImageButton"
                 android:contentDescription="@string/media_stop"
                 android:layout_alignParentRight="true"
                 android:src="@drawable/media_bar_stop"/>

</merge>
<?xml version="1.0"?>
<bindings xmlns="http://www.mozilla.org/xbl">
  <binding id="binding">
    <resources>
      <stylesheet src="media_queries_dynamic_xbl_style.css" />
    </resources>
    <content>
      <html:div xmlns:html="http://www.w3.org/1999/xhtml">
        <children/>
      </html:div>
    </content>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!--
     Note: This layout is intended to be used only above 11+.
     android:showDividers are available only 11+
-->
<view xmlns:android="http://schemas.android.com/apk/res/android"
      class="org.mozilla.gecko.menu.GeckoMenu$DefaultActionItemBar"
      android:layout_width="@dimen/menu_item_row_width"
      android:layout_height="@dimen/browser_toolbar_height"
      android:orientation="horizontal"
      android:background="#FFE1E1E6"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Application icons will be added dynamically -->

    <FrameLayout android:layout_width="0dip"
                 android:layout_height="@dimen/menu_item_row_height"
                 android:layout_weight="1.0">

        <org.mozilla.gecko.menu.MenuItemDefault
                android:id="@+id/menu_item"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@drawable/action_bar_button"
                android:clickable="true"
                android:focusable="true"/>

        <org.mozilla.gecko.menu.MenuItemActionBar
                style="@style/Widget.MenuItemSecondaryActionBar"
                android:id="@+id/menu_item_button"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@drawable/action_bar_button"
                android:layout_gravity="center_vertical"
                android:visibility="gone"/>

    </FrameLayout>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item gecko:state_more="true"
          android:drawable="@drawable/menu_item_more"/>

    <item gecko:state_more="false"
          android:state_checkable="true"
          android:state_checked="true"
          android:drawable="@drawable/menu_item_check"/>

    <item gecko:state_more="false"
          android:state_checkable="true"
          android:state_checked="false"
          android:drawable="@drawable/menu_item_uncheck"/>

    <item android:drawable="@android:color/transparent"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<level-list xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item android:maxLevel="1">

        <selector>

            <item gecko:state_private="true" android:drawable="@drawable/menu_pb"/>
            <item android:drawable="@drawable/menu"/>

        </selector>

    </item>

    <item android:maxLevel="2" android:drawable="@android:color/transparent"/>

</level-list>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="menulistBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:html="http://www.w3.org/1999/xhtml"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="menulist-base" extends="chrome://global/content/bindings/general.xml#basecontrol">
    <resources>
      <stylesheet src="chrome://global/content/menulist.css"/>
      <stylesheet src="chrome://global/skin/menulist.css"/>
    </resources>
  </binding>

  <binding id="menulist" display="xul:menu" role="xul:menulist"
           extends="chrome://global/content/bindings/menulist.xml#menulist-base">
    <content sizetopopup="pref">
      <xul:hbox class="menulist-label-box" flex="1">
        <xul:image class="menulist-icon" xbl:inherits="src=image,src"/>
        <xul:label class="menulist-label" xbl:inherits="value=label,crop,accesskey" crop="right" flex="1"/>
      </xul:hbox>
      <xul:dropmarker class="menulist-dropmarker" type="menu" xbl:inherits="disabled,open"/>
      <children includes="menupopup"/>
    </content>

    <handlers>
      <handler event="command" phase="capturing"
        action="if (event.target.parentNode.parentNode == this) this.selectedItem = event.target;"/>

      <handler event="popupshowing">
        <![CDATA[
          if (event.target.parentNode == this) {
            this.menuBoxObject.activeChild = null;
            if (this.selectedItem)
              // Not ready for auto-setting the active child in hierarchies yet.
              // For now, only do this when the outermost menupopup opens.
              this.menuBoxObject.activeChild = this.mSelectedInternal;
          }
        ]]>
      </handler>

      <handler event="keypress" modifiers="shift any" group="system">
        <![CDATA[
          if (!event.defaultPrevented &&
              (event.keyCode == KeyEvent.DOM_VK_UP ||
               event.keyCode == KeyEvent.DOM_VK_DOWN ||
               event.keyCode == KeyEvent.DOM_VK_PAGE_UP ||
               event.keyCode == KeyEvent.DOM_VK_PAGE_DOWN ||
               event.keyCode == KeyEvent.DOM_VK_HOME ||
               event.keyCode == KeyEvent.DOM_VK_END ||
               event.keyCode == KeyEvent.DOM_VK_BACK_SPACE ||
               event.charCode > 0)) {
            // Moving relative to an item: start from the currently selected item
            this.menuBoxObject.activeChild = this.mSelectedInternal;
            if (this.menuBoxObject.handleKeyPress(event)) {
              this.menuBoxObject.activeChild.doCommand();
              event.preventDefault();
            }
          }
        ]]>
      </handler>
    </handlers>

    <implementation implements="nsIDOMXULMenuListElement, nsIDOMEventListener">
      <constructor>
        this.mInputField = null;
        this.mSelectedInternal = null;
        this.menuBoxObject = this.boxObject;
        this.setInitialSelection();
      </constructor>

      <method name="setInitialSelection">
        <body>
          <![CDATA[
            var popup = this.menupopup;
            if (popup) {
              var arr = popup.getElementsByAttribute('selected', 'true');

              var editable = this.editable;
              var value = this.value;
              if (!arr.item(0) && value)
                arr = popup.getElementsByAttribute(editable ? 'label' : 'value', value);

              if (arr.item(0))
                this.selectedItem = arr[0];
              else if (!editable)
                this.selectedIndex = 0;
            }
          ]]>
        </body>
      </method>

      <property name="value" onget="return this.getAttribute('value');">
        <setter>
          <![CDATA[
            // if the new value is null, we still need to remove the old value
            if (val == null)
              return this.selectedItem = val;

            var arr = null;
            var popup = this.menupopup;
            if (popup)
              arr = popup.getElementsByAttribute('value', val);

            if (arr && arr.item(0))
              this.selectedItem = arr[0];
            else {
              this.selectedItem = null;
              this.setAttribute('value', val);
            }

            return val;
          ]]>
        </setter>
      </property>

      <property name="inputField" readonly="true" onget="return null;"/>

      <property name="crop" onset="this.setAttribute('crop',val); return val;"
                            onget="return this.getAttribute('crop');"/>
      <property name="image"  onset="this.setAttribute('image',val); return val;"
                              onget="return this.getAttribute('image');"/>
      <property name="label" readonly="true" onget="return this.getAttribute('label');"/>
      <property name="description" onset="this.setAttribute('description',val); return val;"
                                   onget="return this.getAttribute('description');"/>
      <property name="editable"  onset="this.setAttribute('editable',val); return val;"
                                 onget="return this.getAttribute('editable') == 'true';"/>

      <property name="open" onset="this.menuBoxObject.openMenu(val);
                                   return val;"
                            onget="return this.hasAttribute('open');"/>

      <property name="itemCount" readonly="true"
                onget="return this.menupopup ? this.menupopup.childNodes.length : 0"/>

      <property name="menupopup" readonly="true">
        <getter>
          <![CDATA[
            var popup = this.firstChild;
            while (popup && popup.localName != "menupopup")
              popup = popup.nextSibling;
            return popup;
          ]]>
        </getter>
      </property>

      <method name="contains">
        <parameter name="item"/>
        <body>
          <![CDATA[
            if (!item)
              return false;

            var parent = item.parentNode;
            return (parent && parent.parentNode == this);
          ]]>
        </body>
      </method>

      <property name="selectedIndex">
        <getter>
          <![CDATA[
            // Quick and dirty. We won't deal with hierarchical menulists yet.
            if (!this.selectedItem ||
                !this.mSelectedInternal.parentNode ||
                this.mSelectedInternal.parentNode.parentNode != this)
              return -1;

            var children = this.mSelectedInternal.parentNode.childNodes;
            var i = children.length;
            while (i--)
              if (children[i] == this.mSelectedInternal)
                break;

            return i;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            var popup = this.menupopup;
            if (popup && 0 <= val) {
              if (val < popup.childNodes.length)
                this.selectedItem = popup.childNodes[val];
            }
            else
              this.selectedItem = null;
            return val;
          ]]>
        </setter>
      </property>

      <property name="selectedItem">
        <getter>
          <![CDATA[
            return this.mSelectedInternal;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            var oldval = this.mSelectedInternal;
            if (oldval == val)
              return val;

            if (val && !this.contains(val))
              return val;

            if (oldval) {
              oldval.removeAttribute('selected');
              if (document instanceof Components.interfaces.nsIDOMXULDocument) {
                document.removeBroadcastListenerFor(oldval, this, "value");
                document.removeBroadcastListenerFor(oldval, this, "label");
                document.removeBroadcastListenerFor(oldval, this, "image");
                document.removeBroadcastListenerFor(oldval, this, "description");
              }
              else
                oldval.removeEventListener("DOMAttrModified", this, false);
            }

            this.mSelectedInternal = val;
            if (val) {
              val.setAttribute('selected', 'true');
              this.setAttribute('value', val.getAttribute('value'));
              this.setAttribute('image', val.getAttribute('image'));
              this.setAttribute('label', val.getAttribute('label'));
              this.setAttribute('description', val.getAttribute('description'));
              // DOMAttrModified listeners slow down setAttribute calls within
              // the document, see bug 395496
              if (document instanceof Components.interfaces.nsIDOMXULDocument) {
                document.addBroadcastListenerFor(val, this, "value");
                document.addBroadcastListenerFor(val, this, "label");
                document.addBroadcastListenerFor(val, this, "image");
                document.addBroadcastListenerFor(val, this, "description");
              }
              else
                val.addEventListener("DOMAttrModified", this, false);
            }
            else {
              this.removeAttribute('value');
              this.removeAttribute('image');
              this.removeAttribute('label');
              this.removeAttribute('description');
            }

            var event = document.createEvent("Events");
            event.initEvent("select", true, true);
            this.dispatchEvent(event);

            var event = document.createEvent("Events");
            event.initEvent("ValueChange", true, true);
            this.dispatchEvent(event);

            return val;
          ]]>
        </setter>
      </property>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            if (aEvent.type == "DOMAttrModified" &&
                aEvent.target == this.mSelectedInternal) {
              var attrName = aEvent.attrName;
              switch (attrName) {
                case "value":
                case "label":
                case "image":
                case "description":
                  this.setAttribute(attrName, aEvent.newValue);
              }
            }
          ]]>
        </body>
      </method>

      <method name="getIndexOfItem">
        <parameter name="item"/>
        <body>
        <![CDATA[
          var popup = this.menupopup;
          if (popup) {
            var children = popup.childNodes;
            var i = children.length;
            while (i--)
              if (children[i] == item)
                return i;
          }
          return -1;
        ]]>
        </body>
      </method>

      <method name="getItemAtIndex">
        <parameter name="index"/>
        <body>
        <![CDATA[
          var popup = this.menupopup;
          if (popup) {
            var children = popup.childNodes;
            if (index >= 0 && index < children.length)
              return children[index];
          }
          return null;
        ]]>
        </body>
      </method>

      <method name="appendItem">
        <parameter name="label"/>
        <parameter name="value"/>
        <parameter name="description"/>
        <body>
        <![CDATA[
          const XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          var popup = this.menupopup ||
                      this.appendChild(document.createElementNS(XULNS, "menupopup"));
          var item = document.createElementNS(XULNS, "menuitem");
          item.setAttribute("label", label);
          item.setAttribute("value", value);
          if (description)
            item.setAttribute("description", description);

          popup.appendChild(item);
          return item;
        ]]>
        </body>
      </method>

      <method name="insertItemAt">
        <parameter name="index"/>
        <parameter name="label"/>
        <parameter name="value"/>
        <parameter name="description"/>
        <body>
        <![CDATA[
          const XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          var popup = this.menupopup ||
                      this.appendChild(document.createElementNS(XULNS, "menupopup"));
          var item = document.createElementNS(XULNS, "menuitem");
          item.setAttribute("label", label);
          item.setAttribute("value", value);
          if (description)
            item.setAttribute("description", description);

          if (index >= 0 && index < popup.childNodes.length)
            popup.insertBefore(item, popup.childNodes[index]);
          else
            popup.appendChild(item);
          return item;
        ]]>
        </body>
      </method>

      <method name="removeItemAt">
        <parameter name="index"/>
        <body>
        <![CDATA[
          var popup = this.menupopup;
          if (popup && 0 <= index && index < popup.childNodes.length) {
            var remove = popup.childNodes[index];
            popup.removeChild(remove);
            return remove;
          }
          return null;
        ]]>
        </body>
      </method>

      <method name="removeAllItems">
        <body>
        <![CDATA[
          this.selectedItem = null;
          var popup = this.menupopup;
          if (popup)
            this.removeChild(popup);
        ]]>
        </body>
      </method>

      <destructor>
        <![CDATA[
          if (this.mSelectedInternal) {
            if (document instanceof Components.interfaces.nsIDOMXULDocument) {
              document.removeBroadcastListenerFor(this.mSelectedInternal, this, "value");
              document.removeBroadcastListenerFor(this.mSelectedInternal, this, "label");
              document.removeBroadcastListenerFor(this.mSelectedInternal, this, "image");
              document.removeBroadcastListenerFor(this.mSelectedInternal, this, "description");
            }
            else
              this.mSelectedInternal.removeEventListener("DOMAttrModified", this, false);
          }
        ]]>
      </destructor>
    </implementation>
  </binding>

  <binding id="menulist-editable" extends="chrome://global/content/bindings/menulist.xml#menulist">
    <content sizetopopup="pref">
      <xul:hbox class="menulist-editable-box textbox-input-box" xbl:inherits="context,disabled,readonly,focused" flex="1">
        <html:input class="menulist-editable-input" anonid="input" allowevents="true"
                    xbl:inherits="value=label,value,disabled,tabindex,readonly,placeholder"/>
      </xul:hbox>
      <xul:dropmarker class="menulist-dropmarker" type="menu"
                      xbl:inherits="open,disabled,parentfocused=focused"/>
      <children includes="menupopup"/>
    </content>

    <implementation>
      <method name="_selectInputFieldValueInList">
        <body>
        <![CDATA[
          if (this.hasAttribute("disableautoselect"))
            return;

          // Find and select the menuitem that matches inputField's "value"
          var arr = null;
          var popup = this.menupopup;

          if (popup)
            arr = popup.getElementsByAttribute('label', this.inputField.value);

          this.setSelectionInternal(arr ? arr.item(0) : null);
        ]]>
        </body>
      </method>

      <method name="setSelectionInternal">
        <parameter name="val"/>
        <body>
          <![CDATA[
            // This is called internally to set selected item
            //  without triggering infinite loop
            //  when using selectedItem's setter
            if (this.mSelectedInternal == val)
              return val;

            if (this.mSelectedInternal)
              this.mSelectedInternal.removeAttribute('selected');

            this.mSelectedInternal = val;

            if (val)
              val.setAttribute('selected', 'true');

            //Do NOT change the "value", which is owned by inputField
            return val;
          ]]>
        </body>
      </method>

      <property name="inputField" readonly="true">
        <getter><![CDATA[
          if (!this.mInputField)
            this.mInputField = document.getAnonymousElementByAttribute(this, "anonid", "input");
          return this.mInputField;
        ]]></getter>
      </property>

      <property name="label"      onset="this.inputField.value = val; return val;"
                                  onget="return this.inputField.value;"/>

      <property name="value"      onget="return this.inputField.value;">
        <setter>
        <![CDATA[
          // Override menulist's value setter to refer to the inputField's value
          // (Allows using "menulist.value" instead of "menulist.inputField.value")
          this.inputField.value = val;
          this.setAttribute('value', val);
          this.setAttribute('label', val);
          this._selectInputFieldValueInList();
          return val;
        ]]>
        </setter>
      </property>

      <property name="selectedItem">
        <getter>
          <![CDATA[
            // Make sure internally-selected item
            //  is in sync with inputField.value
            this._selectInputFieldValueInList();
            return this.mSelectedInternal;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            var oldval = this.mSelectedInternal;
            if (oldval == val)
              return val;

            if (val && !this.contains(val))
              return val;

            // This doesn't touch inputField.value or "value" and "label" attributes
            this.setSelectionInternal(val);
            if (val) {
              // Editable menulist uses "label" as its "value"
              var label = val.getAttribute('label');
              this.inputField.value = label;
              this.setAttribute('value', label);
              this.setAttribute('label', label);
            }
            else {
              this.inputField.value = "";
              this.removeAttribute('value');
              this.removeAttribute('label');
            }

            var event = document.createEvent("Events");
            event.initEvent("select", true, true);
            this.dispatchEvent(event);

            var event = document.createEvent("Events");
            event.initEvent("ValueChange", true, true);
            this.dispatchEvent(event);

            return val;
          ]]>
        </setter>
      </property>
      <property name="disableautoselect"
                onset="if (val) this.setAttribute('disableautoselect','true');
                       else this.removeAttribute('disableautoselect'); return val;"
                onget="return this.hasAttribute('disableautoselect');"/>

      <property name="editor" readonly="true">
        <getter><![CDATA[
          const nsIDOMNSEditableElement = Components.interfaces.nsIDOMNSEditableElement;
          return this.inputField.QueryInterface(nsIDOMNSEditableElement).editor;
        ]]></getter>
      </property>

      <property name="readOnly"   onset="this.inputField.readOnly = val;
                                         if (val) this.setAttribute('readonly', 'true');
                                         else this.removeAttribute('readonly'); return val;"
                                  onget="return this.inputField.readOnly;"/>

      <method name="select">
        <body>
          this.inputField.select();
        </body>
      </method>
    </implementation>

    <handlers>
      <handler event="focus" phase="capturing">
        <![CDATA[
          this.setAttribute('focused','true');
        ]]>
      </handler>

      <handler event="blur" phase="capturing">
        <![CDATA[
          this.removeAttribute('focused');
        ]]>
      </handler>

      <handler event="popupshowing">
        <![CDATA[
          // editable menulists elements aren't in the focus order,
          // so when the popup opens we need to force the focus to the inputField
          if (event.target.parentNode == this) {
            if (document.commandDispatcher.focusedElement != this.inputField)
              this.inputField.focus();

            this.menuBoxObject.activeChild = null;
            if (this.selectedItem)
              // Not ready for auto-setting the active child in hierarchies yet.
              // For now, only do this when the outermost menupopup opens.
              this.menuBoxObject.activeChild = this.mSelectedInternal;
          }
        ]]>
      </handler>

      <handler event="keypress">
        <![CDATA[
          // open popup if key is up arrow, down arrow, or F4
          if (!event.ctrlKey && !event.shiftKey) {
            if (event.keyCode == KeyEvent.DOM_VK_UP ||
                event.keyCode == KeyEvent.DOM_VK_DOWN ||
                (event.keyCode == KeyEvent.DOM_VK_F4 && !event.altKey)) {
              event.preventDefault();
              this.open = true;
            }
          }
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="menulist-description" display="xul:menu"
           extends="chrome://global/content/bindings/menulist.xml#menulist">
    <content sizetopopup="pref">
      <xul:hbox class="menulist-label-box" flex="1">
        <xul:image class="menulist-icon" xbl:inherits="src=image,src"/>
        <xul:label class="menulist-label" xbl:inherits="value=label,crop,accesskey" crop="right" flex="1"/>
        <xul:label class="menulist-label menulist-description" xbl:inherits="value=description" crop="right" flex="10000"/>
      </xul:hbox>
      <xul:dropmarker class="menulist-dropmarker" type="menu" xbl:inherits="disabled,open"/>
      <children includes="menupopup"/>
    </content>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/menu_panel"
              android:layout_width="@dimen/menu_popup_width"
              android:layout_height="wrap_content"
              android:layout_alignParentRight="true"
              android:minWidth="@dimen/menu_popup_width"
              android:background="@drawable/menu_popup_bg">

    <!-- MenuPanel will be added here dynamically -->

</LinearLayout>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!--
     Note: This layout is intended to be used only above 11+.
     android:showDividers are available only 11+
-->
<view xmlns:android="http://schemas.android.com/apk/res/android"
      class="org.mozilla.gecko.menu.GeckoMenu$DefaultActionItemBar"
      android:layout_width="@dimen/menu_item_row_width"
      android:layout_height="@dimen/browser_toolbar_height"
      android:orientation="horizontal"
      android:divider="@drawable/divider_vertical"
      android:showDividers="middle"
      android:dividerPadding="0dip"/>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="menuitemBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="menuitem-base" role="xul:menuitem"
           extends="chrome://global/content/bindings/general.xml#control-item">
    <resources>
      <stylesheet src="chrome://global/skin/menu.css"/>
    </resources>
    <implementation implements="nsIDOMXULSelectControlItemElement, nsIDOMXULContainerItemElement">
      <!-- nsIDOMXULSelectControlItemElement -->
      <property name="selected" readonly="true"
                onget="return this.getAttribute('selected') == 'true';"/>
      <property name="control" readonly="true">
        <getter>
          <![CDATA[
            var parent = this.parentNode;
            if (parent &&
                parent.parentNode instanceof Components.interfaces.nsIDOMXULSelectControlElement)
              return parent.parentNode;
            return null;
          ]]>
        </getter>
      </property>

      <!-- nsIDOMXULContainerItemElement -->
      <property name="parentContainer" readonly="true">
        <getter>
          for (var parent = this.parentNode; parent; parent = parent.parentNode) {
            if (parent instanceof Components.interfaces.nsIDOMXULContainerElement)
              return parent;
          }
          return null;
        </getter>
      </property>
    </implementation>
  </binding>

  <binding id="menu-base"
           extends="chrome://global/content/bindings/menu.xml#menuitem-base">

    <implementation implements="nsIDOMXULContainerElement">
      <property name="open" onget="return this.hasAttribute('open');">
        <setter><![CDATA[
          this.boxObject.openMenu(val);
          return val;
        ]]></setter>
      </property>

      <property name="openedWithKey" readonly="true">
        <getter><![CDATA[
          return this.boxObject.openedWithKey;
        ]]></getter>
      </property>

      <!-- nsIDOMXULContainerElement interface -->
      <method name="appendItem">
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <body>
          return this.insertItemAt(-1, aLabel, aValue);
        </body>
      </method>

      <method name="insertItemAt">
        <parameter name="aIndex"/>
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <body>
          const XUL_NS =
            "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

          var menupopup = this.menupopup;
          if (!menupopup) {
            menupopup = this.ownerDocument.createElementNS(XUL_NS, "menupopup");
            this.appendChild(menupopup);
          }

          var menuitem = this.ownerDocument.createElementNS(XUL_NS, "menuitem");
          menuitem.setAttribute("label", aLabel);
          menuitem.setAttribute("value", aValue);

          var before = this.getItemAtIndex(aIndex);
          if (before)
            return menupopup.insertBefore(menuitem, before);
          return menupopup.appendChild(menuitem);
        </body>
      </method>

      <method name="removeItemAt">
        <parameter name="aIndex"/>
        <body>
        <![CDATA[
          var menupopup = this.menupopup;
          if (menupopup) {
            var item = this.getItemAtIndex(aIndex);
            if (item)
              return menupopup.removeChild(item);
          }
          return null;
        ]]>
        </body>
      </method>

      <property name="itemCount" readonly="true">
        <getter>
          var menupopup = this.menupopup;
          return menupopup ? menupopup.childNodes.length : 0;
        </getter>
      </property>

      <method name="getIndexOfItem">
        <parameter name="aItem"/>
        <body>
        <![CDATA[
          var menupopup = this.menupopup;
          if (menupopup) {
            var items = menupopup.childNodes;
            var length = items.length;
            for (var index = 0; index < length; ++index) {
              if (items[index] == aItem)
                return index;
            }
          }
          return -1;
        ]]>
        </body>
      </method>

      <method name="getItemAtIndex">
        <parameter name="aIndex"/>
        <body>
        <![CDATA[
          var menupopup = this.menupopup;
          if (!menupopup || aIndex < 0 || aIndex >= menupopup.childNodes.length)
            return null;

          return menupopup.childNodes[aIndex];
        ]]>
        </body>
      </method>

      <property name="menupopup" readonly="true">
        <getter>
        <![CDATA[
          const XUL_NS =
            "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

          for (var child = this.firstChild; child; child = child.nextSibling) {
            if (child.namespaceURI == XUL_NS && child.localName == "menupopup")
              return child;
          }
          return null;
        ]]>
        </getter>
      </property>
    </implementation>
  </binding>

  <binding id="menu"
           extends="chrome://global/content/bindings/menu.xml#menu-base">
    <content>
      <xul:label class="menu-text" xbl:inherits="value=label,accesskey,crop" crop="right"/>
      <xul:hbox class="menu-accel-container" anonid="accel">
        <xul:label class="menu-accel" xbl:inherits="value=acceltext"/>
      </xul:hbox>
      <xul:hbox align="center" class="menu-right" xbl:inherits="_moz-menuactive,disabled">
        <xul:image/>
      </xul:hbox>
      <children includes="menupopup"/>
    </content>
  </binding>

  <binding id="menuitem" extends="chrome://global/content/bindings/menu.xml#menuitem-base">
    <content>
      <xul:label class="menu-text" xbl:inherits="value=label,accesskey,crop" crop="right"/>
      <xul:hbox class="menu-accel-container" anonid="accel">
        <xul:label class="menu-accel" xbl:inherits="value=acceltext"/>
      </xul:hbox>
    </content>
  </binding>

  <binding id="menu-menubar"
           extends="chrome://global/content/bindings/menu.xml#menu-base">
    <content>
      <xul:label class="menubar-text" xbl:inherits="value=label,accesskey,crop" crop="right"/>
      <children includes="menupopup"/>
    </content>
  </binding>

  <binding id="menu-menubar-iconic"
           extends="chrome://global/content/bindings/menu.xml#menu-base">
    <content>
      <xul:image class="menubar-left" xbl:inherits="src=image"/>
      <xul:label class="menubar-text" xbl:inherits="value=label,accesskey,crop" crop="right"/>
      <children includes="menupopup"/>
    </content>
  </binding>

  <binding id="menuitem-iconic" extends="chrome://global/content/bindings/menu.xml#menuitem">
    <content>
      <xul:hbox class="menu-iconic-left" align="center" pack="center"
                xbl:inherits="selected,_moz-menuactive,disabled,checked">
        <xul:image class="menu-iconic-icon" xbl:inherits="src=image,validate,src"/>
      </xul:hbox>
      <xul:label class="menu-iconic-text" flex="1" xbl:inherits="value=label,accesskey,crop" crop="right"/>
      <xul:hbox class="menu-accel-container" anonid="accel">
        <xul:label class="menu-iconic-accel" xbl:inherits="value=acceltext"/>
      </xul:hbox>
    </content>
  </binding>

  <binding id="menuitem-iconic-noaccel" extends="chrome://global/content/bindings/menu.xml#menuitem">
    <content>
      <xul:hbox class="menu-iconic-left" align="center" pack="center"
                xbl:inherits="selected,disabled,checked">
        <xul:image class="menu-iconic-icon" xbl:inherits="src=image,validate,src"/>
      </xul:hbox>
      <xul:label class="menu-iconic-text" flex="1" xbl:inherits="value=label,accesskey,crop" crop="right"/>
    </content>
  </binding>

  <binding id="menuitem-iconic-desc-noaccel" extends="chrome://global/content/bindings/menu.xml#menuitem">
    <content>
      <xul:hbox class="menu-iconic-left" align="center" pack="center"
                xbl:inherits="selected,disabled,checked">
        <xul:image class="menu-iconic-icon" xbl:inherits="src=image,validate,src"/>
      </xul:hbox>
      <xul:label class="menu-iconic-text" xbl:inherits="value=label,accesskey,crop" crop="right" flex="1"/>
      <xul:label class="menu-iconic-text menu-description" xbl:inherits="value=description" crop="right" flex="10000"/>
    </content>
  </binding>

  <binding id="menu-iconic"
           extends="chrome://global/content/bindings/menu.xml#menu-base">
    <content>
      <xul:hbox class="menu-iconic-left" align="center" pack="center">
        <xul:image class="menu-iconic-icon" xbl:inherits="src=image"/>
      </xul:hbox>
      <xul:label class="menu-iconic-text" flex="1" xbl:inherits="value=label,accesskey,crop" crop="right"/>
      <xul:hbox class="menu-accel-container" anonid="accel">
        <xul:label class="menu-iconic-accel" xbl:inherits="value=acceltext"/>
      </xul:hbox>
      <xul:hbox align="center" class="menu-right" xbl:inherits="_moz-menuactive,disabled">
        <xul:image/>
      </xul:hbox>
      <children includes="menupopup|template"/>
    </content>
  </binding>
  
  <binding id="menubutton-item" extends="chrome://global/content/bindings/menu.xml#menuitem-base">
    <content>
      <xul:label class="menubutton-text" flex="1" xbl:inherits="value=label,accesskey,crop" crop="right"/>
      <children includes="menupopup"/>
    </content>
  </binding>  
  
  <binding id="menuseparator" role="xul:menuseparator"
           extends="chrome://global/content/bindings/menu.xml#menuitem-base">
  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="mer"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<meta name="Meta-Name" http-equiv="Content-Type" content="text/html; CHARSET=utf-8" scheme="NIST"/>
<title>NIST DOM HTML Test - META</title>
</head>
<body onload="parent.loadComplete()">
<p>
<br/>
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="mfe"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="mgh"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2012 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 32275 $"/>
		<generation date="$Date: 2012-08-28 14:56:06 -0700 (Tue, 28 Aug 2012) $"/>
		<language type="mgo"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="mg"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<!doctype html><title></title><?xml version="1.0" encoding="UTF-8"?>
<searchresults total_results="1">
  <addon id="5617">
  <name>Restartless Test Extension</name>
  <type id="1">Extension</type>
  <guid>missing-sourceuri@tests.mozilla.org</guid>
  <slug>missing-sourceuri</slug>
  <version>1.0</version>

  <compatible_applications><application>
      <name>Firefox</name>
      <application_id>1</application_id>
      <min_version>3.6</min_version>
      <max_version>*</max_version>
      <appID>{3e3ba16c-1675-4e88-b9c8-afef81b3d2ef}</appID>
    </application></compatible_applications>
  <all_compatible_os><os>ALL</os></all_compatible_os>

  <install os="ALL" size="485"></install>
  <created epoch="1252903662">
    2009-09-14T04:47:42Z
  </created>
  <last_updated epoch="1315255329">
    2011-09-05T20:42:09Z
  </last_updated>
</addon>
</searchresults>
<?xml version="1.0" encoding="UTF-8"?>
<searchresults total_results="1">
  <addon id="5617">
  <name>Restartless Test Extension</name>
  <type id="1">Extension</type>
  <guid>missing-xpi@tests.mozilla.org</guid>
  <slug>missing-xpi</slug>
  <version>1.0</version>

  <compatible_applications><application>
      <name>Firefox</name>
      <application_id>1</application_id>
      <min_version>3.6</min_version>
      <max_version>*</max_version>
      <appID>{3e3ba16c-1675-4e88-b9c8-afef81b3d2ef}</appID>
    </application></compatible_applications>
  <all_compatible_os><os>ALL</os></all_compatible_os>

  <install os="ALL" size="485">http://127.0.0.1:8888/THIS_DOES_NOT_EXIST.xpi</install>
    <created epoch="1252903662">
      2009-09-14T04:47:42Z
    </created>
    <last_updated epoch="1315255329">
      2011-09-05T20:42:09Z
    </last_updated>
    </addon>
</searchresults>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:09 $"/>
        <language type="mk"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2008/05/25 01:05:54 $"/>
		<language type="ml"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Mlym</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 33355 $"/>
		<generation date="$Date: 2013-03-03 21:34:51 +0000 (Sun, 03 Mar 2013) $"/>
		<language type="mn"/> 
		<script type="Cyrl"/>
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cyrl</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 33355 $"/>
		<generation date="$Date: 2013-03-03 21:34:51 +0000 (Sun, 03 Mar 2013) $"/>
		<language type="mn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cyrl</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="modutil">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>MODUTIL</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>modutil</refname>
    <refpurpose>Manage PKCS #11 module information within the security module database.</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>modutil</command>
      <arg><replaceable>options</replaceable></arg>
      <arg>[<replaceable>arguments</replaceable>]</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection id="description">
    <title>Description</title>
    <para>The Security Module Database Tool, <command>modutil</command>, is a command-line utility for managing PKCS #11 module information both within <filename>secmod.db</filename> files and within hardware tokens. <command>modutil</command> can add and delete PKCS #11 modules, change passwords on security databases, set defaults, list module contents, enable or disable slots, enable or disable FIPS 140-2 compliance, and assign default providers for cryptographic operations. This tool can also create certificate, key, and module security database files.</para>

	<para>The tasks associated with security module database management are part of a process that typically also involves managing key databases and certificate databases.</para>
  </refsection>
  
  <refsection id="options">
    <title>Options</title>
	<para>
		Running <command>modutil</command> always requires one (and only one) option to specify the type of module operation. Each option may take arguments, anywhere from none to multiple arguments.
	</para>
   	<para><command>Options</command></para> 

	<variablelist>

      <varlistentry>
        <term>-add modulename</term>
	  <listitem><para>Add the named PKCS #11 module to the database. Use this option with the <option>-libfile</option>, <option>-ciphers</option>, and <option>-mechanisms</option> arguments.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-changepw tokenname</term>
	  <listitem><para>Change the password on the named token. If the token has not been initialized, this option initializes the password. Use this option with the <option>-pwfile</option> and <option>-newpwfile</option> arguments. A <emphasis>password</emphasis> is equivalent to a personal identification number (PIN).</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-chkfips</term>
	  <listitem><para>Verify whether the module is in the given FIPS mode. <command>true</command> means to verify that the module is in FIPS mode, while <command>false</command> means to verify that the module is not in FIPS mode.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-create</term>
	<listitem><para>Create new certificate, key, and module databases. Use the <option>-dbdir</option> directory argument to specify a directory. If any of these databases already exist in a specified directory, <command>modutil</command> returns an error message.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-default modulename</term>
	  <listitem><para>Specify the security mechanisms for which the named module will be a default provider. The security mechanisms are specified with the <option>-mechanisms</option> argument.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-delete modulename</term>
	  <listitem><para>Delete the named module. The default NSS PKCS #11 module cannot be deleted.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-disable modulename</term>
	  <listitem><para>Disable all slots on the named module. Use the <option>-slot</option> argument to disable a specific slot.</para><para>The internal NSS PKCS #11 module cannot be disabled.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-enable modulename</term>
	  <listitem><para>Enable all slots on the named module. Use the <option>-slot</option> argument to enable a specific slot.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-fips [true | false]</term>
	  <listitem><para>Enable (true) or disable (false) FIPS 140-2 compliance for the default NSS module.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-force</term>
	  <listitem><para>Disable <command>modutil</command>'s interactive prompts so it can be run from a script. Use this option only after manually testing each planned operation to check for warnings and to ensure that bypassing the prompts will cause no security lapses or loss of database integrity.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-jar JAR-file</term>
	  <listitem><para>Add a new PKCS #11 module to the database using the named JAR file. Use this command with the <option>-installdir</option> and <option>-tempdir</option> arguments. The JAR file uses the NSS PKCS #11 JAR format to identify all the files to be installed, the module's name, the mechanism flags, and the cipher flags, as well as any files to be installed on the target machine, including the PKCS #11 module library file and other files such as documentation. This is covered in the JAR installation file section in the man page, which details the special script needed to perform an installation through a server or with <command>modutil</command>. </para></listitem>
      </varlistentry>

      <varlistentry>
          <term>-list [modulename]</term>
	  <listitem><para>Display basic information about the contents of the <filename>secmod.db</filename> file. Specifying a <emphasis>modulename</emphasis> displays detailed information about a particular module and its slots and tokens.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-rawadd</term>
	  <listitem><para>Add the module spec string to the <filename>secmod.db</filename> database.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-rawlist</term>
	  <listitem><para>Display the module specs for a specified module or for all loadable modules.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-undefault modulename</term>
	  <listitem><para>Specify the security mechanisms for which the named module will not be a default provider. The security mechanisms are specified with the <option>-mechanisms</option> argument.</para></listitem>
      </varlistentry>
	</variablelist>

	<para><command>Arguments</command></para>
    <variablelist>

      <varlistentry>
        <term>MODULE</term>
	  <listitem><para>Give the security module to access.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>MODULESPEC</term>
	  <listitem><para>Give the security module spec to load into the security database.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-ciphers cipher-enable-list</term>
	  <listitem><para>Enable specific ciphers in a module that is being added to the database. The <emphasis>cipher-enable-list</emphasis> is a colon-delimited list of cipher names. Enclose this list in quotation marks if it contains spaces.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-dbdir [sql:]directory</term>
	  <listitem><para>Specify the database directory in which to access or create security module database files.</para>
	<para><command>modutil</command> supports two types of databases: the legacy security databases (<filename>cert8.db</filename>, <filename>key3.db</filename>, and <filename>secmod.db</filename>) and new SQLite databases (<filename>cert9.db</filename>, <filename>key4.db</filename>, and <filename>pkcs11.txt</filename>). If the prefix <command>sql:</command> is not used, then the tool assumes that the given databases are in the old format.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>--dbprefix prefix</term>
	  <listitem><para>Specify the prefix used on the database files, such as <filename>my_</filename> for <filename>my_cert8.db</filename>. This option is provided as a special case. Changing the names of the certificate and key databases is not recommended.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-installdir root-installation-directory</term>
	  <listitem><para>Specify the root installation directory relative to which files will be installed by the <option>-jar</option> option. This directory should be one below which it is appropriate to store dynamic library files, such as a server's root directory.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-libfile library-file</term>
	  <listitem><para>Specify a path to a library file containing the implementation of the PKCS #11 interface module that is being added to the database.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-mechanisms mechanism-list</term>
	  <listitem><para>Specify the security mechanisms for which a particular module will be flagged as a default provider. The <emphasis>mechanism-list</emphasis> is a colon-delimited list of mechanism names. Enclose this list in quotation marks if it contains spaces.</para>
	<para>The module becomes a default provider for the listed mechanisms when those mechanisms are enabled. If more than one module claims to be a particular mechanism's default provider, that mechanism's default provider is undefined.</para>
	<para><command>modutil</command> supports several mechanisms: RSA, DSA, RC2, RC4, RC5, AES, DES, DH, SHA1, SHA256, SHA512, SSL, TLS, MD5, MD2, RANDOM (for random number generation), and FRIENDLY (meaning certificates are publicly readable).</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-newpwfile new-password-file</term>
	  <listitem><para>Specify a text file containing a token's new or replacement password so that a password can be entered automatically with the <option>-changepw</option> option.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-nocertdb</term>
	  <listitem><para>Do not open the certificate or key databases. This has several effects:</para>
		<itemizedlist>
		<listitem>
          <para>With the <option>-create</option> command, only a module security file is created; certificate and key databases are not created.</para>
		</listitem>
		<listitem>
          <para>With the <option>-jar</option> command, signatures on the JAR file are not checked.</para>
		</listitem>
		<listitem>
          <para>With the <option>-changepw</option> command, the password on the NSS internal module cannot be set or changed, since this password is stored in the key database.</para></listitem>
		</itemizedlist>
		</listitem>
      </varlistentry>

      <varlistentry>
        <term>-pwfile old-password-file</term>
	  <listitem><para>Specify a text file containing a token's existing password so that a password can be entered automatically when the <option>-changepw</option> option is used to change passwords.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-secmod secmodname</term>
	  <listitem><para>Give the name of the security module database (like <filename>secmod.db</filename>) to load.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-slot slotname</term>
	  <listitem><para>Specify a particular slot to be enabled or disabled with the <option>-enable</option> or <option>-disable</option> options.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-string CONFIG_STRING</term>
	  <listitem><para>Pass a configuration string for the module being added to the database.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-tempdir temporary-directory</term>
	  <listitem><para>Give a directory location where temporary files are created during the installation by the <option>-jar</option> option. If no temporary directory is specified, the current directory is used.</para></listitem>
      </varlistentry>
    </variablelist>
  </refsection>

  <refsection id="usage-and-examples">
    <title>Usage and Examples</title>

    <para><command>Creating Database Files</command></para>
    <para>Before any operations can be performed, there must be a set of security databases available. <command>modutil</command> can be used to create these files. The only required argument is the database that where the databases will be located.</para>
<programlisting>modutil -create -dbdir [sql:]directory</programlisting>

	<para><command>Adding a Cryptographic Module</command></para>
	<para>Adding a PKCS #11 module means submitting a supporting library file, enabling its ciphers, and setting default provider status for various security mechanisms. This can be done by supplying all of the information through <command>modutil</command> directly or by running a JAR file and install script. For the most basic case, simply upload the library:</para>
<programlisting>modutil -add modulename -libfile library-file [-ciphers cipher-enable-list] [-mechanisms mechanism-list] </programlisting>
	<para>For example:
<programlisting>modutil -dbdir sql:/home/my/sharednssdb -add "Example PKCS #11 Module" -libfile "/tmp/crypto.so" -mechanisms RSA:DSA:RC2:RANDOM 

Using database directory ... 
Module "Example PKCS #11 Module" added to database.</programlisting>
        </para>


	<para><command>Installing a Cryptographic Module from a JAR File</command></para>
	<para>PKCS #11 modules can also be loaded using a JAR file, which contains all of the required libraries and an installation script that describes how to install the module. The JAR install script is described in more detail in <xref linkend="jar-install-file" />.</para>
	<para>The JAR installation script defines the setup information for each platform that the module can be installed on. For example:</para>
<programlisting>Platforms { 
   Linux:5.4.08:x86 { 
      ModuleName { "Example PKCS #11 Module" } 
      ModuleFile { crypto.so } 
      DefaultMechanismFlags{0x0000} 
      CipherEnableFlags{0x0000} 
      Files { 
         crypto.so { 
            Path{ /tmp/crypto.so } 
         } 
         setup.sh { 
            Executable 
            Path{ /tmp/setup.sh } 
         } 
      } 
   } 
   Linux:6.0.0:x86 { 
      EquivalentPlatform { Linux:5.4.08:x86 } 
   } 
} </programlisting>
	<para>Both the install script and the required libraries must be bundled in a JAR file, which is specified with the <option>-jar</option> argument.</para>

<programlisting>modutil -dbdir sql:/home/mt"jar-install-filey/sharednssdb -jar install.jar -installdir sql:/home/my/sharednssdb

This installation JAR file was signed by: 
---------------------------------------------- 

**SUBJECT NAME** 

C=US, ST=California, L=Mountain View, CN=Cryptorific Inc., OU=Digital ID
Class 3 - Netscape Object Signing, OU="www.verisign.com/repository/CPS
Incorp. by Ref.,LIAB.LTD(c)9 6", OU=www.verisign.com/CPS Incorp.by Ref
. LIABILITY LTD.(c)97 VeriSign, OU=VeriSign Object Signing CA - Class 3
Organization, OU="VeriSign, Inc.", O=VeriSign Trust Network **ISSUER
NAME**, OU=www.verisign.com/CPS Incorp.by Ref. LIABILITY LTD.(c)97
VeriSign, OU=VeriSign Object Signing CA - Class 3 Organization,
OU="VeriSign, Inc.", O=VeriSign Trust Network 
---------------------------------------------- 

Do you wish to continue this installation? (y/n) y 
Using installer script "installer_script" 
Successfully parsed installation script 
Current platform is Linux:5.4.08:x86 
Using installation parameters for platform Linux:5.4.08:x86 
Installed file crypto.so to /tmp/crypto.so
Installed file setup.sh to ./pk11inst.dir/setup.sh 
Executing "./pk11inst.dir/setup.sh"... 
"./pk11inst.dir/setup.sh" executed successfully 
Installed module "Example PKCS #11 Module" into module database 

Installation completed successfully </programlisting>

	<para><command>Adding Module Spec</command></para>
	<para>Each module has information stored in the security database about its configuration and parameters. These can be added or edited using the <option>-rawadd</option> command. For the current settings or to see the format of the module spec in the database, use the <option>-rawlist</option> option.</para>
<programlisting>modutil -rawadd modulespec</programlisting>


	<para><command>Deleting a Module</command></para>
    <para>A specific PKCS #11 module can be deleted from the <filename>secmod.db</filename> database:</para>
<programlisting>modutil -delete modulename -dbdir [sql:]directory </programlisting>

	<para><command>Displaying Module Information</command></para>
	<para>The <filename>secmod.db</filename> database contains information about the PKCS #11 modules that are available to an application or server to use. The list of all modules, information about specific modules, and database configuration specs for modules can all be viewed. </para>
    <para>To simply get a list of modules in the database, use the <option>-list</option> command.</para>
<programlisting>modutil -list [modulename] -dbdir [sql:]directory </programlisting>
	<para>Listing the modules shows the module name, their status, and other associated security databases for certificates and keys. For example:</para>
   
<programlisting>modutil -list -dbdir sql:/home/my/sharednssdb 

Listing of PKCS #11 Modules
-----------------------------------------------------------
  1. NSS Internal PKCS #11 Module
         slots: 2 slots attached
        status: loaded

         slot: NSS Internal Cryptographic Services                            
        token: NSS Generic Crypto Services

         slot: NSS User Private Key and Certificate Services                  
        token: NSS Certificate DB
-----------------------------------------------------------</programlisting>
	<para>Passing a specific module name with the <option>-list</option> returns details information about the module itself, like supported cipher mechanisms, version numbers, serial numbers, and other information about the module and the token it is loaded on. For example:</para>
<programlisting> modutil -list "NSS Internal PKCS #11 Module" -dbdir sql:/home/my/sharednssdb

-----------------------------------------------------------
Name: NSS Internal PKCS #11 Module
Library file: **Internal ONLY module**
Manufacturer: Mozilla Foundation              
Description: NSS Internal Crypto Services    
PKCS #11 Version 2.20
Library Version: 3.11
Cipher Enable Flags: None
Default Mechanism Flags: RSA:RC2:RC4:DES:DH:SHA1:MD5:MD2:SSL:TLS:AES

  Slot: NSS Internal Cryptographic Services                            
  Slot Mechanism Flags: RSA:RC2:RC4:DES:DH:SHA1:MD5:MD2:SSL:TLS:AES
  Manufacturer: Mozilla Foundation              
  Type: Software
  Version Number: 3.11
  Firmware Version: 0.0
  Status: Enabled
  Token Name: NSS Generic Crypto Services     
  Token Manufacturer: Mozilla Foundation              
  Token Model: NSS 3           
  Token Serial Number: 0000000000000000
  Token Version: 4.0
  Token Firmware Version: 0.0
  Access: Write Protected
  Login Type: Public (no login required)
  User Pin: NOT Initialized

  Slot: NSS User Private Key and Certificate Services                  
  Slot Mechanism Flags: None
  Manufacturer: Mozilla Foundation              
  Type: Software
  Version Number: 3.11
  Firmware Version: 0.0
  Status: Enabled
  Token Name: NSS Certificate DB              
  Token Manufacturer: Mozilla Foundation              
  Token Model: NSS 3           
  Token Serial Number: 0000000000000000
  Token Version: 8.3
  Token Firmware Version: 0.0
  Access: NOT Write Protected
  Login Type: Login required
  User Pin: Initialized</programlisting>
	<para>A related command, <option>-rawlist</option> returns information about the database configuration for the modules. (This information can be edited by loading new specs using the <option>-rawadd</option> command.)</para>
<programlisting> modutil -rawlist -dbdir sql:/home/my/sharednssdb
 name="NSS Internal PKCS #11 Module" parameters="configdir=. certPrefix= keyPrefix= secmod=secmod.db flags=readOnly " NSS="trustOrder=75 cipherOrder=100 slotParams={0x00000001=[slotFlags=RSA,RC4,RC2,DES,DH,SHA1,MD5,MD2,SSL,TLS,AES,RANDOM askpw=any timeout=30 ] }  Flags=internal,critical"</programlisting>

	<para><command>Setting a Default Provider for Security Mechanisms</command></para>
	<para>Multiple security modules may provide support for the same security mechanisms. It is possible to set a specific security module as the default provider for a specific security mechanism (or, conversely, to prohibit a provider from supplying those mechanisms).</para>
<programlisting>modutil -default modulename -mechanisms mechanism-list </programlisting>
	<para>To set a module as the default provider for mechanisms, use the <option>-default</option> command with a colon-separated list of mechanisms. The available mechanisms depend on the module; NSS supplies almost all common mechanisms. For example:</para>
<programlisting>modutil -default "NSS Internal PKCS #11 Module" -dbdir -mechanisms RSA:DSA:RC2 

Using database directory c:\databases...

Successfully changed defaults.</programlisting>

    <para>Clearing the default provider has the same format:</para>
<programlisting>modutil -undefault "NSS Internal PKCS #11 Module" -dbdir -mechanisms MD2:MD5</programlisting>

	<para><command>Enabling and Disabling Modules and Slots</command></para>
	<para>Modules, and specific slots on modules, can be selectively enabled or disabled using <command>modutil</command>. Both commands have the same format:</para>
<programlisting>modutil -enable|-disable modulename [-slot slotname] </programlisting>

    <para>For example:</para>
<programlisting>modutil -enable "NSS Internal PKCS #11 Module" -slot "NSS Internal Cryptographic Services                            " -dbdir .

Slot "NSS Internal Cryptographic Services                            " enabled.</programlisting>
	<para>Be sure that the appropriate amount of trailing whitespace is after the slot name. Some slot names have a significant amount of whitespace that must be included, or the operation will fail.</para>

	<para><command>Enabling and Verifying FIPS Compliance</command></para>
	<para>The NSS modules can have FIPS 140-2 compliance enabled or disabled using <command>modutil</command> with the <option>-fips</option> option. For example:</para>
<programlisting>modutil -fips true -dbdir sql:/home/my/sharednssdb/

FIPS mode enabled.</programlisting>
	<para>To verify that status of FIPS mode, run the <option>-chkfips</option> command with either a true or false flag (it doesn't matter which). The tool returns the current FIPS setting.</para>
<programlisting>modutil -chkfips false -dbdir sql:/home/my/sharednssdb/

FIPS mode enabled.</programlisting>

	<para><command>Changing the Password on a Token</command></para>

    <para>Initializing or changing a token's password:</para>
<programlisting>modutil -changepw tokenname [-pwfile old-password-file] [-newpwfile new-password-file] </programlisting>
<programlisting>modutil -dbdir sql:/home/my/sharednssdb -changepw "NSS Certificate DB" 

Enter old password: 
Incorrect password, try again... 
Enter old password: 
Enter new password: 
Re-enter new password: 
Token "Communicator Certificate DB" password changed successfully.</programlisting>
  </refsection>

  <refsection id="jar-install-file"><title>JAR Installation File Format</title>
     <para>When a JAR file is run by a server, by <command>modutil</command>, or by any program that does not interpret JavaScript, a special information file must be included to install the libraries. There are several things to keep in mind with this file:</para>
	<itemizedlist>
		<listitem>
			<para>
				It must be declared in the JAR archive's manifest file. 
			</para>
		</listitem>
		<listitem>
			<para>
				The script can have any name. 
			</para>
		</listitem>
		<listitem>
			<para>
				The metainfo tag for this is <command>Pkcs11_install_script</command>. To declare meta-information in the manifest file, put it in a file that is passed to <command>signtool</command>.</para>
		</listitem>
	</itemizedlist>

	<para><command>Sample Script</command></para>
	<para>For example, the PKCS #11 installer script could be in the file pk11install. If so, the metainfo file for <command>signtool</command> includes a line such as this:</para>
<programlisting>+ Pkcs11_install_script: pk11install</programlisting>

	<para>The script must define the platform and version number, the module name and file, and any optional information like supported ciphers and mechanisms. Multiple platforms can be defined in a single install file.</para>
<programlisting>ForwardCompatible { IRIX:6.2:mips SUNOS:5.5.1:sparc }
Platforms {
   WINNT::x86 {
      ModuleName { "Example Module" }
      ModuleFile { win32/fort32.dll }
      DefaultMechanismFlags{0x0001}
      DefaultCipherFlags{0x0001}
      Files {
         win32/setup.exe {
            Executable
            RelativePath { %temp%/setup.exe }
         }
         win32/setup.hlp {
            RelativePath { %temp%/setup.hlp }
         }
         win32/setup.cab {
            RelativePath { %temp%/setup.cab }
         }
      }
   }
   WIN95::x86 {
      EquivalentPlatform {WINNT::x86}
   }
   SUNOS:5.5.1:sparc {
      ModuleName { "Example UNIX Module" }
      ModuleFile { unix/fort.so }
      DefaultMechanismFlags{0x0001}
      CipherEnableFlags{0x0001}
      Files {
         unix/fort.so {
            RelativePath{%root%/lib/fort.so}
            AbsolutePath{/usr/local/netscape/lib/fort.so}
            FilePermissions{555}
         }
         xplat/instr.html {
            RelativePath{%root%/docs/inst.html}
            AbsolutePath{/usr/local/netscape/docs/inst.html}
            FilePermissions{555}
         }
      }
   }
   IRIX:6.2:mips {
      EquivalentPlatform { SUNOS:5.5.1:sparc }
   }
}</programlisting>

	<para><command>Script Grammar</command></para>
	<para>The script is basic Java, allowing lists, key-value pairs, strings, and combinations of all of them.</para>
<programlisting>--> valuelist

valuelist --> value valuelist
               &lt;null>

value ---> key_value_pair
            string

key_value_pair --> key { valuelist }

key --> string

string --> simple_string
            "complex_string"

simple_string --> [^ \t\n\""{""}"]+ 

complex_string --> ([^\"\\\r\n]|(\\\")|(\\\\))+ </programlisting>

	<para>Quotes and backslashes must be escaped with a backslash. A complex string must not include newlines or carriage returns.Outside of complex strings, all white space (for example, spaces, tabs, and carriage returns) is considered equal and is used only to delimit tokens.</para>

	<para><command>Keys</command></para>
	<para>The Java install file uses keys to define the platform and module information.</para>
	<para><command>ForwardCompatible</command> gives a list of platforms that are forward compatible. If the current platform cannot be found in the list of supported platforms, then the <command>ForwardCompatible</command> list is checked for any platforms that have the same OS and architecture in an earlier version. If one is found, its attributes are used for the current platform. </para>
	<para><command>Platforms</command> (required) Gives a list of platforms. Each entry in the list is itself a key-value pair: the key is the name of the platform and the value list contains various attributes of the platform. The platform string is in the format <emphasis>system name:OS release:architecture</emphasis>. The installer obtains these values from NSPR. OS release is an empty string on non-Unix operating systems. NSPR supports these platforms:</para>
	<itemizedlist>
	<listitem>
	<para>AIX (rs6000)</para>
	</listitem>
	<listitem>
	<para>BSDI (x86)</para>
	</listitem>
	<listitem>
	<para>FREEBSD (x86)</para>
	</listitem>
	<listitem>
	<para>HPUX (hppa1.1)</para>
	</listitem>
	<listitem>
	<para>IRIX (mips)</para>
	</listitem>
	<listitem>
	<para>LINUX (ppc, alpha, x86)</para>
	</listitem>
	<listitem>
	<para>MacOS (PowerPC)</para>
	</listitem>
	<listitem>
	<para>NCR (x86)</para>
	</listitem>
	<listitem>
	<para>NEC (mips)</para>
	</listitem>
	<listitem>
	<para>OS2 (x86)</para>
	</listitem>
	<listitem>
	<para>OSF (alpha)</para>
	</listitem>
	<listitem>
	<para>ReliantUNIX (mips)</para>
	</listitem>
	<listitem>
	<para>SCO (x86)</para>
	</listitem>
	<listitem>
	<para>SOLARIS (sparc)</para>
	</listitem>
	<listitem>
	<para>SONY (mips)</para>
	</listitem>
	<listitem>
	<para>SUNOS (sparc)</para>
	</listitem>
	<listitem>
	<para>UnixWare (x86)</para>
	</listitem>
	<listitem>
	<para>WIN16 (x86)</para>
	</listitem>
	<listitem>
	<para>WIN95 (x86)</para>
	</listitem>
	<listitem>
	<para>WINNT (x86)</para>
	</listitem>
	</itemizedlist>

	<para>For example:</para>
<programlisting>IRIX:6.2:mips
SUNOS:5.5.1:sparc
Linux:2.0.32:x86
WIN95::x86</programlisting>
	<para>The module information is defined independently for each platform in the <command>ModuleName</command>, <command>ModuleFile</command>, and <command>Files</command> attributes. These attributes must be given unless an <command>EquivalentPlatform</command> attribute is specified. </para>

	<para><command>Per-Platform Keys</command></para>
	<para>Per-platform keys have meaning only within the value list of an entry in the <command>Platforms</command> list.</para>
	<para><command>ModuleName</command> (required) gives the common name for the module. This name is used to reference the module by servers and by the <command>modutil</command> tool. </para>
	<para><command>ModuleFile</command> (required) names the PKCS #11 module file for this platform. The name is given as the relative path of the file within the JAR archive. </para>
	<para><command>Files</command> (required) lists the files that need to be installed for this module. Each entry in the file list is a key-value pair. The key is the path of the file in the JAR archive, and the value list contains attributes of the file. At least <command>RelativePath</command> or <command>AbsolutePath</command> must be specified for each file.</para>
	<para><command>DefaultMechanismFlags</command> specifies mechanisms for which this module is the default provider; this is equivalent to the <option>-mechanism</option> option with the <option>-add</option> command. This key-value pair is a bitstring specified in hexadecimal (0x) format. It is constructed as a bitwise OR. If the DefaultMechanismFlags entry is omitted, the value defaults to 0x0.</para>

<programlisting>RSA:                   0x00000001
DSA:                   0x00000002
RC2:                   0x00000004
RC4:                   0x00000008
DES:                   0x00000010
DH:                    0x00000020
FORTEZZA:              0x00000040
RC5:                   0x00000080
SHA1:                  0x00000100
MD5:                   0x00000200
MD2:                   0x00000400
RANDOM:                0x08000000
FRIENDLY:              0x10000000
OWN_PW_DEFAULTS:       0x20000000
DISABLE:               0x40000000</programlisting>

	<para><command>CipherEnableFlags</command> specifies ciphers that this module provides that NSS does not provide (so that the module enables those ciphers for NSS). This is equivalent to the <option>-cipher</option> argument with the <option>-add</option> command. This key is a bitstring specified in hexadecimal (0x) format. It is constructed as a bitwise OR. If the <command>CipherEnableFlags</command> entry is omitted, the value defaults to 0x0.</para>

	<para><command>EquivalentPlatform</command> specifies that the attributes of the named platform should also be used for the current platform. This makes it easier when more than one platform uses the same settings.</para>

	<para><command>Per-File Keys</command></para>
	<para>Some keys have meaning only within the value list of an entry in a <command>Files</command> list.</para>
	<para>Each file requires a path key the identifies where the file is. Either <command>RelativePath</command> or <command>AbsolutePath</command> must be specified. If both are specified, the relative path is tried first, and the absolute path is used only if no relative root directory is provided by the installer program.</para>
	<para><command>RelativePath</command> specifies the destination directory of the file, relative to some directory decided at install time. Two variables can be used in the relative path: <command>%root%</command> and <command>%temp%</command>. <command>%root%</command> is replaced at run time with the directory relative to which files should be installed; for example, it may be the server's root directory. The <command>%temp%</command> directory is created at the beginning of the installation and destroyed at the end. The purpose of <command>%temp%</command> is to hold executable files (such as setup programs) or files that are used by these programs. Files destined for the temporary directory are guaranteed to be in place before any executable file is run; they are not deleted until all executable files have finished.</para>
	<para><command>AbsolutePath</command> specifies the destination directory of the file as an absolute path. </para>
	<para><command>Executable</command> specifies that the file is to be executed during the course of the installation. Typically, this string is used for a setup program provided by a module vendor, such as a self-extracting setup executable. More than one file can be specified as executable, in which case the files are run in the order in which they are specified in the script file.</para>
	<para><command>FilePermissions</command> sets permissions on any referenced files in a string of octal digits, according to the standard Unix format. This string is a bitwise OR.</para>

<programlisting>
user read:                0400
user write:               0200
user execute:             0100
group read:               0040
group write:              0020
group execute:            0010
other read:               0004
other write:              0002
other execute:            0001
</programlisting>

<para>Some platforms may not understand these permissions. They are applied only insofar as they make sense for the current platform. If this attribute is omitted, a default of 777 is assumed.</para>
  </refsection>

<refsection id="databases"><title>NSS Database Types</title>
<para>NSS originally used BerkeleyDB databases to store security information. 
The last versions of these <emphasis>legacy</emphasis> databases are:</para>
<itemizedlist>
	<listitem>
		<para>
			cert8.db for certificates
		</para>
	</listitem>
	<listitem>
		<para>
			key3.db for keys
		</para>
	</listitem>
	<listitem>
		<para>
			secmod.db for PKCS #11 module information
		</para>
	</listitem>
</itemizedlist>

<para>BerkeleyDB has performance limitations, though, which prevent it from being easily used by multiple applications simultaneously. NSS has 
some flexibility that allows applications to use their own, independent database engine while keeping a shared database and working around the access issues. Still, NSS
requires more flexibility to provide a truly shared security database.</para>

<para>In 2009, NSS introduced a new set of databases that are SQLite databases rather than 
BerkleyDB. These new databases provide more accessibility and performance:</para>
<itemizedlist>
	<listitem>
		<para>
			cert9.db for certificates
		</para>
	</listitem>
	<listitem>
		<para>
			key4.db for keys
		</para>
	</listitem>
	<listitem>
		<para>
			pkcs11.txt, which is listing of all of the PKCS #11 modules contained in a new subdirectory in the security databases directory
		</para>
	</listitem>
</itemizedlist>

<para>Because the SQLite databases are designed to be shared, these are the <emphasis>shared</emphasis> database type. The shared database type is preferred; the legacy format is included for backward compatibility.</para>

<para>By default, the tools (<command>certutil</command>, <command>pk12util</command>, <command>modutil</command>) assume that the given security databases follow the more common legacy type. 
Using the SQLite databases must be manually specified by using the <command>sql:</command> prefix with the given security directory. For example:</para>

<programlisting>modutil -create -dbdir sql:/home/my/sharednssdb</programlisting>

<para>To set the shared database type as the default type for the tools, set the <envar>NSS_DEFAULT_DB_TYPE</envar> environment variable to <envar>sql</envar>:</para>
<programlisting>export NSS_DEFAULT_DB_TYPE="sql"</programlisting>

<para>This line can be added to the <filename>~/.bashrc</filename> file to make the change permanent for the user.</para>

<para>Most applications do not use the shared database by default, but they can be configured to use them. For example, this how-to article covers how to configure Firefox and Thunderbird to use the new shared NSS databases:</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB_Howto</para>
	</listitem>
</itemizedlist>
<para>For an engineering draft on the changes in the shared NSS databases, see the NSS project wiki:</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB
		</para>
	</listitem>
</itemizedlist>
</refsection>

  <refsection id="seealso">
    <title>See Also</title>
    <para>certutil (1)</para>
    <para>pk12util (1)</para>
    <para>signtool (1)</para>

	<para>The NSS wiki has information on the new database design and how to configure applications to use it.</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB_Howto</para>
	</listitem>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB
		</para>
	</listitem>
</itemizedlist>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - MOD</title>
</head>
<body onload="parent.loadComplete()">
<p>
<ins cite="./files/ins-reasons.html" datetime="January 1, 2002">The INS element is used to indicate that a section of a document had been inserted.</ins>
<br/>
<del cite="./files/del-reasons.html" datetime="January 2, 2002">The DEL element is used to indicate that a section of a document had been removed.</del>
</p>
</body>
</html>

<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: mrss content with a thumbnail
Expect: var enc = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getPropertyAsInterface('mediacontent', Components.interfaces.nsIArray).queryElementAt(0, Components.interfaces.nsIPropertyBag); Assert.equal(enc.getProperty('fileSize'), '24986239', 'file size is correct'); Assert.equal(enc.getProperty('type'), 'video/mpeg', 'type is correct'); Assert.equal(enc.getProperty('url'), 'http://dallas.example.com/joebob_050689.mpeg', 'url is correct'); Assert.equal(feed.type, 0, 'Feed type is correct'); Assert.equal(feed.enclosureCount,2, 'Enclosure count is correct'); true;

-->
<rss xmlns:media="http://search.yahoo.com/mrss" version="2.0" >
<channel>
<item>

<media:content fileSize="24986239" type="video/mpeg" url="http://dallas.example.com/joebob_050689.mpeg" />
<media:thumbnail url="http://dallas.example.com/joebob_050689.jpg"  width="75" height="50"/>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: this tests bug 429049.  the item with a valid url is added to the enclosures array and the item with an empty url does not.
Expect: var encs = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).enclosures; encs.QueryInterface(Components.interfaces.nsIArray); (encs.length == 1);

-->
<rss xmlns:media="http://search.yahoo.com/mrss" version="2.0" >
<channel>

<item>
<media:content fileSize="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>
<description>no description</description>
</item>

<item>
<media:content url="" height="" width=""></media:content>
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test empty</title>

<category domain="foo">bar</category>
<description>no description</description>
</item>

</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: mrss content with multiple media:content items works
Expect: var mcs = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('mediacontent'); mcs.QueryInterface(Components.interfaces.nsIArray); var enc1 = mcs.queryElementAt(0, Components.interfaces.nsIPropertyBag); var enc2 = mcs.queryElementAt(1, Components.interfaces.nsIPropertyBag); ((enc1.getProperty('fileSize') == '24986239') && (enc1.getProperty('type') == 'video/mpeg') && (enc1.getProperty('url') == 'http://dallas.example.com/joebob_1.mpeg') && (enc2.getProperty('fileSize') == '30000000') && (enc2.getProperty('type') == 'video/mpeg') && (enc2.getProperty('url') == 'http://dallas.example.com/joebob_2.mpeg') && (feed.type == 4) && (feed.enclosureCount == 2));

-->
<rss xmlns:media="http://search.yahoo.com/mrss" version="2.0" >
<channel>
<item>

<media:content fileSize="24986239" type="video/mpeg" url="http://dallas.example.com/joebob_1.mpeg" /> 
<media:content fileSize="30000000" type="video/mpeg" url="http://dallas.example.com/joebob_2.mpeg" /> 

<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while. Two videos of that.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: mrss content added to enclosures array
Expect: var encs = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).enclosures; encs.QueryInterface(Components.interfaces.nsIArray); var enc = encs.queryElementAt(0, Components.interfaces.nsIPropertyBag); ((enc.getProperty('length') == '24986239') && (enc.getProperty('type') == 'audio/mpeg') && (enc.getProperty('url') == 'http://dallas.example.com/joebob_050689.mp3') && (feed.type == 1) && (feed.enclosureCount == 1));

-->
<rss xmlns:media="http://search.yahoo.com/mrss" version="2.0" >
<channel>
<item>

<media:content fileSize="24986239" type="audio/mpeg" url="http://dallas.example.com/joebob_050689.mp3" /> 
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: mrss content works
Expect: var enc = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getPropertyAsInterface('mediacontent', Components.interfaces.nsIArray).queryElementAt(0, Components.interfaces.nsIPropertyBag); Assert.equal(enc.getProperty('fileSize'), '24986239', 'file size is correct'); Assert.equal(enc.getProperty('type'), 'video/mpeg', 'type is correct'); Assert.equal(enc.getProperty('url'), 'http://dallas.example.com/joebob_050689.mpeg', 'url is correct'); Assert.equal(feed.type, 4, 'Feed type is correct'); Assert.equal(feed.enclosureCount,1, 'Enclosure count is correct'); true;

-->
<rss xmlns:media="http://search.yahoo.com/mrss" version="2.0" >
<channel>
<item>

<media:content fileSize="24986239" type="video/mpeg" url="http://dallas.example.com/joebob_050689.mpeg" />
<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: mrss group content works
Expect: var encs = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).enclosures; encs.QueryInterface(Components.interfaces.nsIArray); var enc1 = encs.queryElementAt(0, Components.interfaces.nsIPropertyBag); var enc2 = encs.queryElementAt(1, Components.interfaces.nsIPropertyBag); ((enc1.getProperty('length') == '400') && (enc1.getProperty('type') == 'audio/mpeg') && (enc1.getProperty('url') == 'http://dallas.example.com/joebob_050689_2.mp3') && (enc2.getProperty('length') == '200') && (enc2.getProperty('type') == 'audio/mpeg') && (enc2.getProperty('url') == 'http://dallas.example.com/joebob_050689_1.mp3'));


-->
<rss xmlns:media="http://search.yahoo.com/mrss" version="2.0" >
<channel>
<item>

<media:group>
  <media:content fileSize="400" type="audio/mpeg" url="http://dallas.example.com/joebob_050689_2.mp3" /> 
  <media:content fileSize="200" type="audio/mpeg" url="http://dallas.example.com/joebob_050689_1.mp3" /> 
</media:group>

<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>
</channel>
</rss>
<?xml version="1.0" encoding="iso-8859-1"?>
<!--

Description: mrss group content works
Expect: var mg = feed.items.queryElementAt(0, Components.interfaces.nsIFeedEntry).fields.getProperty('mediagroup'); mg.QueryInterface(Components.interfaces.nsIPropertyBag); var mcs = mg.getProperty("mediacontent"); mcs.QueryInterface(Components.interfaces.nsIArray); var mc1 = mcs.queryElementAt(0, Components.interfaces.nsIPropertyBag); var mc2 = mcs.queryElementAt(1, Components.interfaces.nsIPropertyBag); ((mc1.getProperty('fileSize') == '400') && (mc1.getProperty('type') == 'audio/mpeg') && (mc1.getProperty('url') == 'http://dallas.example.com/joebob_050689_2.mp3') && (mc2.getProperty('fileSize') == '200') && (mc2.getProperty('type') == 'audio/mpeg') && (mc2.getProperty('url') == 'http://dallas.example.com/joebob_050689_1.mp3'));

-->
<rss xmlns:media="http://search.yahoo.com/mrss" version="2.0" >
<channel>
<item>

<media:group>
  <media:content fileSize="400" type="audio/mpeg" url="http://dallas.example.com/joebob_050689_2.mp3" /> 
  <media:content fileSize="200" type="audio/mpeg" url="http://dallas.example.com/joebob_050689_1.mp3" /> 
</media:group>

<author>jbb@dallas.example.com (Joe Bob Briggs)</author>
<comments>http://example.org</comments>
<title>test</title>

<category domain="foo">bar</category>

<description>I'm headed for France. I wasn't gonna go this year, but then last week &lt;a href="http://www.imdb.com/title/tt0086525/"&gt;Valley Girl&lt;/a&gt; came out and I said to myself, Joe Bob, you gotta get out of the country for a while.</description></item>

</channel>
</rss>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:55 $"/>
		<language type="mr"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Deva</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 33080 $"/>
		<generation date="$Date: 2013-01-25 23:30:00 -0800 (Fri, 25 Jan 2013) $"/>
		<language type="ms"/> 
        <script type="Latn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:10 $"/>
        <language type="ms"/>
    </identity>
</ldml>
<text xmlns:its="http://www.w3.org/2005/11/its">
<head>
    <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:mtConfidenceRule selector="/text/body/p/span[@id='ireland']"
      mtConfidence="0.6982"/>
    <its:mtConfidenceRule selector="/text/body/p/span[@id='england']"
      mtConfidence="0.7982"/>
    <its:mtConfidenceRule selector="/text/body/p/span[@id='spain']"
      mtConfidence="0.8982"/>
     <its:mtConfidenceRule selector="/text/body/p/span[@id='germany']"
      mtConfidence="0.8982"/>
  </its:rules>
</head>
  <body>
    <p>
      <span  its:annotatorsRef="mt-confidence|file:///tools.xml#T1" id="ireland">Dublin is the capital city of Ireland and has the 50th biggest population density in Europe.</span>
      <span  its:annotatorsRef="mt-confidence|file:///tools.xml#T2" id="spain">Madrid is the capital of Spain.</span>
      <span  its:annotatorsRef="mt-confidence|file:///tools.xml#T3" id="germany">Berlin is the capital of Germany.</span>
      <span  its:annotatorsRef="mt-confidence|file:///tools.xml#T4" id="england">London is the capital of England</span>
    </p>
  </body>
</text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
    <its:mtConfidenceRule selector="/h:html/h:body/h:p" mtConfidence="0.8982"/>
  </its:rules>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:mtConfidenceRule selector="/text/body/p/span[@id='ireland']"
      mtConfidence="0.6982"/>
    <its:mtConfidenceRule selector="/text/body/p/span[@id='england']"
      mtConfidence="0.7982"/>
    <its:mtConfidenceRule selector="/text/body/p/span[@id='spain']"
      mtConfidence="0.8982"/>
     <its:mtConfidenceRule selector="/text/body/p/span[@id='germany']"
      mtConfidence="0.5982"/>
  </its:rules>
<text xmlns:its="http://www.w3.org/2005/11/its">
<head>
   <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="mtconfidence2xmlrules.xml"/>
</head>
  <body>
    <p>
      <span  its:annotatorsRef="mt-confidence|file:///tools.xml#T1" id="ireland">Dublin is the capital city of Ireland and has the 50th biggest population density in Europe.</span>
      <span  its:annotatorsRef="mt-confidence|file:///tools.xml#T2" id="spain">Madrid is the capital of Spain.</span>
      <span  its:annotatorsRef="mt-confidence|file:///tools.xml#T3" id="germany">Berlin is the capital of Germany.</span>
      <span  its:annotatorsRef="mt-confidence|file:///tools.xml#T4" id="england">London is the capital of England</span>
    </p>
  </body>
</text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
    <its:param name="mtParam">ireland</its:param>
  <its:mtConfidenceRule selector="/h:html/h:body/h:p/h:span[@id=$mtParam]"
      mtConfidence="0.8982"/>
  </its:rules>
<text xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <body>
    <p>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T1" its:mtConfidence="0.6982">Dublin is the capital city of Ireland and has the 50th biggest population density in Europe.</span>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T2" its:mtConfidence="0.7982">Madrid is the capital of Spain.</span>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T3" its:mtConfidence="0.9982">Berlin is the capital of Germany.</span>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T4" its:mtConfidence="0.6982">London is the capital of England</span>
    </p>
  </body>
</text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
  <its:mtConfidenceRule selector="/h:html/h:body/h:p/h:span[@id='ireland']"
      mtConfidence="0.8982"/>
  </its:rules>
<text xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <body>
    <p>
      <its:span annotatorsRef="mt-confidence|file:///tools.xml#T1" mtConfidence="0.9982">Dublin is the capital city of Ireland.</its:span>
      <its:span annotatorsRef="mt-confidence|file:///tools.xml#T2" mtConfidence="0.8982">Madrid is the capital of Spain.</its:span>
      <its:span annotatorsRef="mt-confidence|file:///tools.xml#T3" mtConfidence="0.7982">Berlin is the capital of Germany.</its:span>
      <its:span annotatorsRef="mt-confidence|file:///tools.xml#T4" mtConfidence="0.6982">London is the capital of England</its:span>
    </p>
  </body>
</text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:param name="mtconfidenceParam">ireland</its:param>
    <its:mtConfidenceRule selector="//span[@id=$mtconfidenceParam]" mtConfidence="0.6982"/>
  </its:rules>
<text xmlns:its="http://www.w3.org/2005/11/its">
<head>
   <its:rules xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="mtconfidence5xmlrules.xml"/>
</head>
  <body>
    <p>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T1" id="ireland">Dublin is the capital city of Ireland and has the 50th biggest population density in Europe.</span>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T2" id="spain">Madrid is the capital of Spain.</span>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T3" id="germany">Berlin is the capital of Germany.</span>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T4" id="england">London is the capital of England</span>
    </p>
  </body>
</text>
<text xmlns:its="http://www.w3.org/2005/11/its">
<head>
     <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:param name="mtconfidenceParam">ireland</its:param>
    <its:mtConfidenceRule selector="//span[@id=$mtconfidenceParam]" mtConfidence="0.6982"/>
  </its:rules>
</head>
  <body>
    <p>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T1" id="ireland">Dublin is the capital city of Ireland and has the 50th biggest population density in Europe.</span>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T2" id="spain">Madrid is the capital of Spain.</span>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T3" id="germany">Berlin is the capital of Germany.</span>
      <span its:annotatorsRef="mt-confidence|file:///tools.xml#T4" id="england">London is the capital of England</span>
    </p>
  </body>
</text>
<text xmlns:its="http://www.w3.org/2005/11/its">
<head>
    <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
     <its:mtConfidenceRule selector="/text/body/p/span[@id='germany']"
      mtConfidence="0.8982"/>
  </its:rules>
</head>
<body its:annotatorsRef="mt-confidence|file:///tools.xml#T1" >
    <p its:annotatorsRef="text-analysis|file:///tools.xml#T2" >
      <span  id="ireland">Dublin is the capital city of Ireland and has the 50th biggest population density in Europe.</span>
      <span id="spain">Madrid is the capital of Spain.</span>
      <span  its:annotatorsRef="mt-confidence|file:///tools.xml#T3" id="germany">Berlin is the capital of Germany.</span>
      <span  id="england">London is the capital of England</span>
    </p>
</body>
</text><?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
	<identity>

		<version number="$Revision: 1.4 $"/>
		<generation date="$Date: 2008/12/08 18:18:44 $"/>
		<language type="mt"/>
	</identity>
    <rbnf>
        <rulesetGrouping type="DurationRules">
            <ruleset type="with-words">
                <rbnfrule value="0">0 sekondi; 1 sekonda; =0= sekondi;</rbnfrule>
                <rbnfrule value="60" radix="60">←%%min←[, →→];</rbnfrule>
                <rbnfrule value="3600" radix="60">←%%hr←[, →→→];</rbnfrule>
            </ruleset>
            <ruleset type="min" access="private">
                <rbnfrule value="0">0 minuti; 1 minuta; =0= minuti;</rbnfrule>
            </ruleset>
            <ruleset type="hr" access="private">
                <rbnfrule value="0">0 siegħat; 1 siegħa; =0= siegħat;</rbnfrule>
            </ruleset>
            <ruleset type="in-numerals">
                <rbnfrule value="0">=0= sek.;</rbnfrule>
                <rbnfrule value="60">=%%min-sec=;</rbnfrule>
                <rbnfrule value="3600">=%%hr-min-sec=;</rbnfrule>
            </ruleset>
            <ruleset type="min-sec" access="private">
                <rbnfrule value="0">:=00=;</rbnfrule>
                <rbnfrule value="60" radix="60">←0←→→;</rbnfrule>
            </ruleset>
            <ruleset type="hr-min-sec" access="private">
                <rbnfrule value="0">:=00=;</rbnfrule>
                <rbnfrule value="60" radix="60">←00←→→;</rbnfrule>
                <rbnfrule value="3600" radix="60">←#,##0←:→→→;</rbnfrule>
            </ruleset>
            <ruleset type="duration">
                <rbnfrule value="0">=%in-numerals=;</rbnfrule>
            </ruleset>
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp; ':' = '.' = ' ' = '-';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="mua"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.15 $"/>
		<generation date="$Date: 2008/05/25 01:05:49 $"/>
		<language type="my"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Mymr</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="naq"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:13 $"/>
        <language type="nb"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:14 $"/>
        <language type="nci"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="nd"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

   <item gecko:state_private="true"
         android:state_pressed="true"
         android:state_enabled="true">

        <inset android:insetTop="@dimen/new_tablet_browser_toolbar_menu_item_inset_vertical"
               android:insetBottom="@dimen/new_tablet_browser_toolbar_menu_item_inset_vertical"
               android:insetLeft="@dimen/new_tablet_browser_toolbar_menu_item_inset_horizontal"
               android:insetRight="@dimen/new_tablet_browser_toolbar_menu_item_inset_horizontal">
            <shape android:shape="rectangle">
                <solid android:color="@color/new_tablet_highlight_pb"/>
                <corners android:radius="@dimen/new_tablet_browser_toolbar_menu_item_corner_radius"/>
            </shape>
        </inset>

    </item>

    <item gecko:state_private="true"
          android:state_focused="true"
          android:state_pressed="false">

        <inset android:insetTop="@dimen/new_tablet_browser_toolbar_menu_item_inset_vertical"
               android:insetBottom="@dimen/new_tablet_browser_toolbar_menu_item_inset_vertical"
               android:insetLeft="@dimen/new_tablet_browser_toolbar_menu_item_inset_horizontal"
               android:insetRight="@dimen/new_tablet_browser_toolbar_menu_item_inset_horizontal">
            <shape android:shape="rectangle">
                <solid android:color="@color/new_tablet_highlight_focused_pb"/>
                <corners android:radius="@dimen/new_tablet_browser_toolbar_menu_item_corner_radius"/>
            </shape>
        </inset>

    </item>

    <item android:state_pressed="true"
          android:state_enabled="true">

        <inset android:insetTop="@dimen/new_tablet_browser_toolbar_menu_item_inset_vertical"
               android:insetBottom="@dimen/new_tablet_browser_toolbar_menu_item_inset_vertical"
               android:insetLeft="@dimen/new_tablet_browser_toolbar_menu_item_inset_horizontal"
               android:insetRight="@dimen/new_tablet_browser_toolbar_menu_item_inset_horizontal">
            <shape android:shape="rectangle">
                <solid android:color="@color/new_tablet_highlight"/>
                <corners android:radius="@dimen/new_tablet_browser_toolbar_menu_item_corner_radius"/>
            </shape>
        </inset>

    </item>

    <item android:state_focused="true"
          android:state_pressed="false">

        <inset android:insetTop="@dimen/new_tablet_browser_toolbar_menu_item_inset_vertical"
               android:insetBottom="@dimen/new_tablet_browser_toolbar_menu_item_inset_vertical"
               android:insetLeft="@dimen/new_tablet_browser_toolbar_menu_item_inset_horizontal"
               android:insetRight="@dimen/new_tablet_browser_toolbar_menu_item_inset_horizontal">
            <shape android:shape="rectangle">
                <solid android:color="@color/new_tablet_highlight_focused"/>
                <corners android:radius="@dimen/new_tablet_browser_toolbar_menu_item_corner_radius"/>
            </shape>
        </inset>

    </item>

    <item>
        <shape android:shape="rectangle">
            <solid android:color="@android:color/transparent"/>
        </shape>
    </item>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <ImageView android:id="@+id/url_bar_entry"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:layout_alignLeft="@+id/back"
               android:layout_toLeftOf="@id/menu_items"
               android:layout_marginLeft="@dimen/new_tablet_nav_button_width_half"
               android:layout_marginTop="10dp"
               android:layout_marginBottom="10dp"
               android:duplicateParentState="true"
               android:clickable="false"
               android:focusable="false"
               android:background="@drawable/url_bar_entry"/>

    <org.mozilla.gecko.toolbar.ForwardButton style="@style/UrlBar.ImageButton.Forward.NewTablet"
                                             android:id="@+id/forward"
                                             android:layout_alignLeft="@id/back"/>

    <org.mozilla.gecko.toolbar.BackButton android:id="@id/back"
                                          style="@style/UrlBar.ImageButton.NewTablet"
                                          android:layout_width="@dimen/new_tablet_nav_button_width"
                                          android:layout_height="@dimen/new_tablet_nav_button_width"
                                          android:layout_centerVertical="true"
                                          android:layout_marginLeft="12dp"
                                          android:layout_alignParentLeft="true"
                                          android:src="@drawable/new_tablet_ic_menu_back"
                                          android:contentDescription="@string/back"
                                          android:background="@drawable/new_tablet_url_bar_nav_button"/>

    <org.mozilla.gecko.toolbar.ToolbarEditLayout android:id="@+id/edit_layout"
                  style="@style/UrlBar.Button"
                  android:paddingLeft="12dp"
                  android:paddingRight="12dp"
                  android:visibility="gone"
                  android:orientation="horizontal"
                  android:layout_toRightOf="@id/back"
                  android:layout_toLeftOf="@id/menu_items"/>

    <!-- Note: we set the padding on the site security icon to increase its tappable area. -->
    <org.mozilla.gecko.toolbar.ToolbarDisplayLayout android:id="@+id/display_layout"
                  style="@style/UrlBar.Button.Container"
                  android:layout_toRightOf="@id/back"
                  android:layout_toLeftOf="@id/menu_items"
                  android:paddingRight="4dip"/>

    <LinearLayout android:id="@+id/menu_items"
                  android:layout_width="wrap_content"
                  android:layout_height="match_parent"
                  android:gravity="center_vertical"
                  android:layout_marginLeft="6dp"
                  android:orientation="horizontal"
                  android:layout_toLeftOf="@id/tabs"/>

    <org.mozilla.gecko.widget.ThemedImageButton
            android:id="@+id/tabs"
            style="@style/UrlBar.ImageButton.NewTablet"
            android:layout_toLeftOf="@id/menu"
            android:layout_alignWithParentIfMissing="true"
            android:background="@drawable/new_tablet_action_bar_button"/>

    <!-- In a 56x60dp space, centering 24dp image will leave 16x18dp. -->
    <org.mozilla.gecko.toolbar.TabCounter android:id="@+id/tabs_counter"
                        style="@style/UrlBar.ImageButton.TabCount.NewTablet"
                        android:layout_alignLeft="@id/tabs"
                        android:layout_alignRight="@id/tabs"
                        android:layout_alignTop="@id/tabs"
                        android:layout_alignBottom="@id/tabs"
                        android:layout_marginTop="18dp"
                        android:layout_marginBottom="18dp"
                        android:layout_marginLeft="16dp"
                        android:layout_marginRight="16dp"
                        android:layout="@layout/new_tablet_tabs_counter"/>

    <org.mozilla.gecko.widget.ThemedImageButton
            android:id="@+id/menu"
            style="@style/UrlBar.ImageButton.NewTablet"
            android:layout_alignParentRight="true"
            android:contentDescription="@string/menu"
            android:background="@drawable/new_tablet_action_bar_button"
            android:visibility="gone"/>

    <org.mozilla.gecko.widget.ThemedImageView
            android:id="@+id/menu_icon"
            style="@style/UrlBar.ImageButton.NewTablet"
            android:layout_alignLeft="@id/menu"
            android:layout_alignRight="@id/menu"
            android:src="@drawable/new_tablet_menu"
            android:visibility="gone"/>

    <!-- We draw after the menu items so when they are hidden, the cancel button,
         which is thus drawn on top, may be pressed. -->
    <org.mozilla.gecko.widget.ThemedImageView
            android:id="@+id/edit_cancel"
            style="@style/UrlBar.ImageButton.Icon"
            android:layout_alignParentRight="true"
            android:src="@drawable/close_edit_mode_selector"
            android:contentDescription="@string/edit_mode_cancel"
            android:visibility="gone"/>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@null"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@null"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@null"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@null"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@null"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<level-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:maxLevel="0" android:drawable="@drawable/new_tablet_site_security_unknown"/>
    <item android:maxLevel="1" android:drawable="@drawable/lock_identified"/>
    <item android:maxLevel="2" android:drawable="@drawable/lock_verified"/>
    <item android:maxLevel="3" android:drawable="@drawable/shield_enabled"/>
    <item android:maxLevel="4" android:drawable="@drawable/shield_disabled"/>

</level-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- The favicon drawable is not the same dimensions as the site security
     lock icons so we offset it using this drawable to compensate. -->
<inset
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/favicon"
    android:insetTop="@dimen/new_tablet_site_security_unknown_inset_top"
    android:insetBottom="@dimen/new_tablet_site_security_unknown_inset_bottom"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- pressed state -->
    <item android:state_pressed="true"
          android:drawable="@drawable/new_tablet_tab_close_active"/>

    <item android:state_checked="true"
          android:drawable="@drawable/new_tablet_tab_close_active"/>

    <!-- normal mode -->
    <item android:drawable="@drawable/new_tablet_tab_close"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_checked="true"
          android:color="@color/text_color_primary_inverse"/>

    <item android:state_pressed="true"
          android:color="@color/text_color_primary_inverse"/>

    <item android:color="@color/new_tablet_tab_grid_text_unselected"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.widget.ThemedTextView xmlns:android="http://schemas.android.com/apk/res/android"
                                         android:layout_width="24dip"
                                         android:layout_height="24dip"
                                         android:paddingTop="3dip"
                                         android:paddingLeft="4dip"
                                         android:background="@drawable/new_tablet_tabs_count_foreground"
                                         android:textAppearance="@style/TextAppearance.Micro"
                                         android:textColor="@color/text_color_primary_inverse"
                                         android:textStyle="bold"
                                         android:duplicateParentState="true"
                                         android:gravity="center"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@null"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.tabs.TabsLayoutItemView xmlns:android="http://schemas.android.com/apk/res/android"
                                           xmlns:gecko="http://schemas.android.com/apk/res-auto"
                                           style="@style/TabsItem"
                                           android:focusable="true"
                                           android:id="@+id/info"
                                           android:layout_width="wrap_content"
                                           android:layout_height="wrap_content"
                                           android:gravity="center"
                                           android:orientation="vertical">

    <LinearLayout android:layout_width="fill_parent"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal"
                  android:duplicateParentState="true"
                  android:paddingLeft="@dimen/new_tablet_tab_highlight_stroke_width"
                  android:paddingRight="@dimen/new_tablet_tab_highlight_stroke_width"
                  android:paddingBottom="@dimen/new_tablet_tab_highlight_stroke_width">

       <org.mozilla.gecko.widget.FadedSingleColorTextView
               android:id="@+id/title"
               android:layout_width="0dip"
               android:layout_height="wrap_content"
               android:layout_weight="1.0"
               style="@style/TabLayoutItemTextAppearance"
               android:textSize="14sp"
               android:textColor="@color/new_tablet_tab_item_title"
               android:singleLine="true"
               android:duplicateParentState="true"
               gecko:fadeWidth="15dp"
               android:paddingRight="5dp"/>


        <!-- Use of baselineAlignBottom only supported from API 11+ - if this needs to work on lower API versions
             we'll need to override getBaseLine() and return image height, but we assume this won't happen -->
        <ImageButton android:id="@+id/close"
                     style="@style/TabsItemClose"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:scaleType="center"
                     android:baselineAlignBottom="true"
                     android:background="@android:color/transparent"
                     android:contentDescription="@string/close_tab"
                     android:src="@drawable/new_tablet_tab_item_close_button"
                     android:duplicateParentState="true"/>

    </LinearLayout>

    <RelativeLayout android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="@dimen/new_tablet_tab_highlight_stroke_width"
                    android:background="@drawable/tab_thumbnail"
                    android:duplicateParentState="true">

        <org.mozilla.gecko.widget.ThumbnailView android:id="@+id/thumbnail"
                                                android:layout_width="@dimen/new_tablet_tab_thumbnail_width"
                                                android:layout_height="@dimen/new_tablet_tab_thumbnail_height"
                                                />

    </RelativeLayout>

</org.mozilla.gecko.tabs.TabsLayoutItemView>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<ImageButton xmlns:android="http://schemas.android.com/apk/res/android"
             android:id="@+id/nav_back"
             android:layout_width="@dimen/tabs_panel_indicator_width"
             android:layout_height="match_parent"
             android:minWidth="@dimen/tabs_panel_indicator_width"
             android:src="@drawable/new_tablet_nav_back"
             android:contentDescription="@string/back"
             android:background="@drawable/action_bar_button_inverse"/>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item gecko:state_private="true"
          android:drawable="@drawable/tab_new_pb"/>

    <item gecko:state_light="true"
          android:drawable="@drawable/new_tablet_tab_new_dark"/>

    <item android:drawable="@drawable/tab_new"/>

</selector>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item android:state_pressed="true"
          android:state_enabled="true">

        <inset android:insetTop="@dimen/new_tablet_tab_strip_button_inset"
               android:insetBottom="@dimen/new_tablet_tab_strip_button_inset"
               android:insetLeft="@dimen/new_tablet_tab_strip_button_inset"
               android:insetRight="@dimen/new_tablet_tab_strip_button_inset">
            <shape android:shape="rectangle">
                <solid android:color="@color/highlight_dark"/>
                <corners android:radius="@dimen/new_tablet_browser_toolbar_menu_item_corner_radius"/>
            </shape>
        </inset>

    </item>

    <item android:state_focused="true"
          android:state_pressed="false">

        <inset android:insetTop="@dimen/new_tablet_tab_strip_button_inset"
               android:insetBottom="@dimen/new_tablet_tab_strip_button_inset"
               android:insetLeft="@dimen/new_tablet_tab_strip_button_inset"
               android:insetRight="@dimen/new_tablet_tab_strip_button_inset">
            <shape android:shape="rectangle">
                <solid android:color="@color/new_tablet_highlight_focused"/>
                <corners android:radius="@dimen/new_tablet_browser_toolbar_menu_item_corner_radius"/>
            </shape>
        </inset>

    </item>

    <item>
        <shape android:shape="rectangle">
            <solid android:color="@android:color/transparent"/>
        </shape>
    </item>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">

    <solid android:color="#555555"/>

    <size android:width="1dp"
          android:height="30dp"/>

    <!-- We draw this ourselves in TabStripView.draw() and to avoid implementing more
         than we have to, only bottom padding is taken into account. -->
    <padding android:bottom="6dp"/>

</shape>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
	      xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item android:state_pressed="true"
          android:state_checked="true"
          gecko:state_private="true"
          android:color="@color/highlight_nav_pb" />

    <item android:state_checked="true"
          gecko:state_private="true"
          android:color="@color/background_private" />

    <item android:state_pressed="true"
          gecko:state_private="true"
          android:color="@color/highlight_dark_focused" />

    <item android:state_pressed="true"
          android:state_checked="true"
          android:color="@color/new_tablet_highlight" />

    <!-- Lightweight Themes -->
    <item android:state_checked="true"
          gecko:state_light="true"
          android:color="@color/background_normal_lwt" />
    <item android:state_checked="true"
          gecko:state_dark="true"
          android:color="@color/background_normal_lwt" />
    <item android:state_pressed="true"
          gecko:state_light="true"
          android:color="@color/new_tablet_highlight_lwt" />
    <item android:state_pressed="true"
          gecko:state_dark="true"
          android:color="@color/new_tablet_highlight_dark_lwt" />

    <item android:state_checked="true"
          android:color="@color/background_normal" />

    <item android:state_pressed="true"
          android:color="@color/new_tablet_highlight_dark" />

    <item android:color="@android:color/transparent"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"
	      xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item android:state_checked="true"
          gecko:state_private="true"
          android:color="@color/text_color_primary_inverse"/>

    <item android:state_checked="true"
          android:color="@color/text_color_secondary"/>

    <item android:state_checked="false"
          gecko:state_dark="true"
          android:color="@color/text_color_primary_inverse"/>

    <item android:color="@color/text_color_secondary"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.tabs.TabStrip
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_tabs"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <!-- private pressed state -->
    <item gecko:state_private="true"
          android:state_pressed="true"
          android:drawable="@color/new_tablet_highlight_pb"/>

    <!-- focused state -->
    <item gecko:state_private="true"
          android:state_focused="true"
          android:state_pressed="false"
          android:drawable="@color/new_tablet_highlight_focused_pb"/>

    <!-- pressed state -->
    <item android:state_pressed="true"
          android:drawable="@color/new_tablet_highlight"/>

    <!-- focused state -->
    <item android:state_focused="true"
          android:state_pressed="false"
          android:drawable="@color/new_tablet_highlight_focused"/>

    <!-- private browsing mode -->
    <item gecko:state_private="true"
          android:drawable="@color/background_private"/>

    <!-- normal mode -->
    <item android:drawable="@color/background_normal"/>

</selector>
<?xml version="1.0"?>
<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist" lastupdate="1396046918000">
  <emItems>
    <emItem  blockID="i454" id="new@tests.mozilla.org">
      <versionRange  minVersion="0" maxVersion="*" severity="3"/>
    </emItem>
  </emItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:52 $"/>
		<language type="ne"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Deva</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:15 $"/>
        <language type="nl"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="nmg"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 34238 $"/>
		<generation date="$Date: 2013-09-07 20:46:42 +0000 (Sat, 07 Sep 2013) $"/>
		<language type="nnh"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:17 $"/>
        <language type="nn"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Node.nodeName</title>
<link rel="author" title="Olli Pettay" href="mailto:Olli@Pettay.fi"/>
<link rel="author" title="Ms2ger" href="mailto:Ms2ger@gmail.com"/>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
</head>
<body>
<div id="log"/>
<div id="test">
  <input type="button" id="testbutton"/>
  <a id="link">Link text</a>
</div>
<script>
<![CDATA[
test(function() {
  assert_throws(new TypeError(), function() {
    document.contains();
  });
  assert_throws(new TypeError(), function() {
    document.contains(9);
  });
}, "Should throw TypeError if the arguments are wrong.");

test(function() {
  assert_equals(document.contains(null), false, "Document shouldn't contain null.");
}, "contains(null) should be false");

test(function() {
  assert_equals(document.contains(document), true, "Document should contain itself!");
  assert_equals(document.contains(document.createElement("foo")), false, "Document shouldn't contain element which is't in the document");
  assert_equals(document.contains(document.createTextNode("foo")), false, "Document shouldn't contain text node which is't in the document");
}, "document.contains");

test(function() {
  var tb = document.getElementById("testbutton");
  assert_equals(tb.contains(tb), true, "Element should contain itself.")
  assert_equals(document.contains(tb), true, "Document should contain element in it!");
  assert_equals(document.documentElement.contains(tb), true, "Element should contain element in it!");
}, "contains with a button");

test(function() {
  var link = document.getElementById("link");
  var text = link.firstChild;
  assert_equals(document.contains(text), true, "Document should contain a text node in it.");
  assert_equals(link.contains(text), true, "Element should contain a text node in it.");
  assert_equals(text.contains(text), true, "Text node should contain itself.");
  assert_equals(text.contains(link), false, "text node shouldn't contain its parent.");
}, "contains with a text node");

test(function() {
  var pi = document.createProcessingInstruction("adf", "asd");
  assert_equals(pi.contains(document), false, "Processing instruction shouldn't contain document");
  assert_equals(document.contains(pi), false, "Document shouldn't contain newly created processing instruction");
  document.documentElement.appendChild(pi);
  document.contains(pi, true, "Document should contain processing instruction");
}, "contains with a processing instruction");

test(function() {
  if ("createContextualFragment" in document.createRange()) {
    var df = document.createRange().createContextualFragment("<div>foo</div>");
    assert_equals(df.contains(df.firstChild), true, "Document fragment should contain its child");
    assert_equals(df.contains(df.firstChild.firstChild), true,
       "Document fragment should contain its descendant");
    assert_equals(df.contains(df), true, "Document fragment should contain itself.");
  }
}, "contains with a document fragment");

test(function() {
  var d = document.implementation.createHTMLDocument("");
  assert_equals(document.contains(d), false,
     "Document shouldn't contain another document.");
  assert_equals(document.contains(d.createElement("div")), false,
     "Document shouldn't contain an element from another document.");
  assert_equals(document.contains(d.documentElement), false,
     "Document shouldn't contain an element from another document.");
}, "contaibs with another document");
]]>
</script>
</body>
</html>
<?xml version="1.0" ?>
<!DOCTYPE Test [
  <!ATTLIST test id ID #REQUIRED>
  <!ATTLIST foo:test id ID #REQUIRED>
  <!ATTLIST foo2:test id ID #REQUIRED>
  <!ATTLIST bar:test id ID #REQUIRED>
]>

<!-- Comment -->

<?This-is-a-PI ?>

<root xmlns:foo="foo"
      xmlns:bar="bar"
      xmlns:foo2="foo">

  <test id="test1">
  </test>

  <test id="test2">
    <!-- Another comment -->
    <test id="test3">
    </test>

    <test id="test4" xmlns="foo">
       <test id="test5">
       </test>

       <bar:test id="test6" />
    </test>

    <foo:test id="test7">
    </foo:test>

    <foo2:test id="test8">
      <?Another-PI ?>
      <baz />
    </foo2:test>

    <bar:test id="test9">
    </bar:test>
  </test>

  <foo:test id="test10">
    <foo2:test id="test11">
      <bar:test id="test12">
      </bar:test>
    </foo2:test>
  </foo:test>

  <foo2:test id="test13">
  </foo2:test>

  <bar:test id="test14">
  </bar:test>

</root>

<?xml version="1.0"?>
<staff>
 <employee>
  <employeeId>EMP0001</employeeId>
  <name>Margaret Martin</name>
  <position>Accountant</position>           
  <salary>56,000</salary>
  <gender>Female</gender>
  <address domestic="Yes">1230 North Ave. Dallas, Texas 98551</address>
 </employee>
</staff>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical"
              android:paddingLeft="5dp">

    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal">

        <ImageView android:id="@+id/notification_image"
                   android:layout_width="25dp"
                   android:layout_height="25dp"
                   android:scaleType="fitCenter"/>

        <TextView android:id="@+id/notification_title"
                  android:textAppearance="@android:style/TextAppearance.StatusBar.EventContent.Title"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:layout_weight="1"
                  android:singleLine="true"
                  android:ellipsize="marquee"
                  android:fadingEdge="horizontal"
                  android:paddingLeft="4dp"/>

    </LinearLayout>

    <TextView android:id="@+id/notification_text"
              android:textAppearance="@android:style/TextAppearance.StatusBar.EventContent"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:paddingLeft="4dp"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical"
              android:paddingLeft="5dp">

    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal">

        <ImageView android:id="@+id/notification_image"
                   android:layout_width="25dp"
                   android:layout_height="25dp"
                   android:scaleType="fitCenter"/>

        <TextView android:id="@+id/notification_title"
                  android:textAppearance="@android:style/TextAppearance.StatusBar.EventContent.Title"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:layout_weight="1"
                  android:singleLine="true"
                  android:ellipsize="marquee"
                  android:fadingEdge="horizontal"
                  android:paddingLeft="4dp"/>

    </LinearLayout>

    <ProgressBar android:id="@+id/notification_progressbar"
                 style="?android:attr/progressBarStyleHorizontal"
                 android:layout_width="match_parent"
                 android:layout_height="16dip"
                 android:layout_marginTop="1dip"
                 android:layout_marginBottom="1dip"
                 android:layout_marginLeft="10dip"
                 android:layout_marginRight="10dip"
                 android:layout_centerHorizontal="true" />

    <TextView android:id="@+id/notification_text"
              android:textAppearance="@android:style/TextAppearance.StatusBar.EventContent"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:paddingLeft="4dp"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:orientation="vertical"
              android:paddingTop="7dp"
              android:paddingLeft="5dp">

    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal">

        <ImageView android:id="@+id/notification_image"
                   android:layout_width="25dp"
                   android:layout_height="25dp"
                   android:scaleType="fitCenter"/>

        <TextView android:id="@+id/notification_title"
                  android:textAppearance="@android:style/TextAppearance.StatusBar.EventContent.Title"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:layout_weight="1"
                  android:singleLine="true"
                  android:ellipsize="marquee"
                  android:fadingEdge="horizontal"
                  android:paddingLeft="10dp"/>

    </LinearLayout>

    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal">
        <TextView android:id="@+id/notification_text"
                  android:textAppearance="@android:style/TextAppearance.StatusBar.EventContent"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:paddingLeft="3dp"/>
        <ProgressBar android:id="@+id/notification_progressbar"
                     style="?android:attr/progressBarStyleHorizontal"
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     android:layout_marginTop="1dip"
                     android:layout_marginBottom="1dip"
                     android:layout_marginLeft="4dip"
                     android:layout_marginRight="10dip"
                     android:layout_centerHorizontal="true"/>
    </LinearLayout>

</LinearLayout>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings [
<!ENTITY % notificationDTD SYSTEM "chrome://global/locale/notification.dtd">
%notificationDTD;
]>

<bindings id="notificationBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xbl="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="notificationbox">
    <content>
      <xul:stack xbl:inherits="hidden=notificationshidden"
                 class="notificationbox-stack">
        <xul:spacer/>
        <children includes="notification"/>
      </xul:stack>
      <children/>
    </content>

    <implementation>
      <field name="PRIORITY_INFO_LOW" readonly="true">1</field>
      <field name="PRIORITY_INFO_MEDIUM" readonly="true">2</field>
      <field name="PRIORITY_INFO_HIGH" readonly="true">3</field>
      <field name="PRIORITY_WARNING_LOW" readonly="true">4</field>
      <field name="PRIORITY_WARNING_MEDIUM" readonly="true">5</field>
      <field name="PRIORITY_WARNING_HIGH" readonly="true">6</field>
      <field name="PRIORITY_CRITICAL_LOW" readonly="true">7</field>
      <field name="PRIORITY_CRITICAL_MEDIUM" readonly="true">8</field>
      <field name="PRIORITY_CRITICAL_HIGH" readonly="true">9</field>
      <field name="PRIORITY_CRITICAL_BLOCK" readonly="true">10</field>

      <field name="currentNotification">null</field>

      <field name="_closedNotification">null</field>
      <field name="_blockingCanvas">null</field>
      <field name="_animating">false</field>

      <property name="notificationsHidden"
                onget="return this.getAttribute('notificationshidden') == 'true';">
        <setter>
          if (val)
            this.setAttribute('notificationshidden', true);
          else this.removeAttribute('notificationshidden');
          return val;
        </setter>
      </property>

      <property name="allNotifications" readonly="true">
        <getter>
        <![CDATA[
          var closedNotification = this._closedNotification;
          var notifications = this.getElementsByTagName('notification');
          return Array.filter(notifications, function(n) n != closedNotification);
        ]]>
        </getter>
      </property>

      <method name="getNotificationWithValue">
        <parameter name="aValue"/>
        <body>
          <![CDATA[
            var notifications = this.allNotifications;
            for (var n = notifications.length - 1; n >= 0; n--) {
              if (aValue == notifications[n].getAttribute("value"))
                return notifications[n];
            }
            return null;
          ]]>
        </body>
      </method>

      <method name="appendNotification">
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <parameter name="aImage"/>
        <parameter name="aPriority"/>
        <parameter name="aButtons"/>
        <parameter name="aEventCallback"/>
        <body>
          <![CDATA[
            if (aPriority < this.PRIORITY_INFO_LOW ||
                aPriority > this.PRIORITY_CRITICAL_BLOCK)
              throw "Invalid notification priority " + aPriority;

            // check for where the notification should be inserted according to
            // priority. If two are equal, the existing one appears on top.
            var notifications = this.allNotifications;
            var insertPos = null;
            for (var n = notifications.length - 1; n >= 0; n--) {
              if (notifications[n].priority < aPriority)
                break;
              insertPos = notifications[n];
            }

            const XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
            var newitem = document.createElementNS(XULNS, "notification");
            newitem.setAttribute("label", aLabel);
            newitem.setAttribute("value", aValue);
            if (aImage)
              newitem.setAttribute("image", aImage);
            newitem.eventCallback = aEventCallback;

            if (aButtons) {
              // The notification-button-default class is added to the button
              // with isDefault set to true. If there is no such button, it is
              // added to the first button (unless that button has isDefault
              // set to false). There cannot be multiple default buttons.
              var defaultElem;

              for (var b = 0; b < aButtons.length; b++) {
                var button = aButtons[b];
                var buttonElem = document.createElementNS(XULNS, "button");
                buttonElem.setAttribute("label", button.label);
                buttonElem.setAttribute("accesskey", button.accessKey);
                buttonElem.classList.add("notification-button");

                if (button.isDefault ||
                    b == 0 && !("isDefault" in button))
                  defaultElem = buttonElem;

                newitem.appendChild(buttonElem);
                buttonElem.buttonInfo = button;
              }

              if (defaultElem)
                defaultElem.classList.add("notification-button-default");
            }

            newitem.setAttribute("priority", aPriority);
            if (aPriority >= this.PRIORITY_CRITICAL_LOW)
              newitem.setAttribute("type", "critical");
            else if (aPriority <= this.PRIORITY_INFO_HIGH)
              newitem.setAttribute("type", "info");
            else
              newitem.setAttribute("type", "warning");

            if (!insertPos) {
              newitem.style.position = "fixed";
              newitem.style.top = "100%";
              newitem.style.marginTop = "-15px";
              newitem.style.opacity = "0";
            }
            this.insertBefore(newitem, insertPos);
            if (!insertPos)
              this._showNotification(newitem, true);

            // Fire event for accessibility APIs
            var event = document.createEvent("Events");
            event.initEvent("AlertActive", true, true);
            newitem.dispatchEvent(event);

            return newitem;
          ]]>
        </body>
      </method>

      <method name="removeNotification">
        <parameter name="aItem"/>
        <parameter name="aSkipAnimation"/>
        <body>
          <![CDATA[
            if (aItem == this.currentNotification)
              this.removeCurrentNotification(aSkipAnimation);
            else if (aItem != this._closedNotification)
              this._removeNotificationElement(aItem);
            return aItem;
          ]]>
        </body>
      </method>

      <method name="_removeNotificationElement">
        <parameter name="aChild"/>
        <body>
          <![CDATA[
            if (aChild.eventCallback)
              aChild.eventCallback("removed");
            this.removeChild(aChild);

            // make sure focus doesn't get lost (workaround for bug 570835)
            let fm = Components.classes["@mozilla.org/focus-manager;1"]
                               .getService(Components.interfaces.nsIFocusManager);
            if (!fm.getFocusedElementForWindow(window, false, {}))
              fm.moveFocus(window, this, fm.MOVEFOCUS_FORWARD, 0);
          ]]>
        </body>
      </method>

      <method name="removeCurrentNotification">
        <parameter name="aSkipAnimation"/>
        <body>
          <![CDATA[
            this._showNotification(this.currentNotification, false, aSkipAnimation);
          ]]>
        </body>
      </method>

      <method name="removeAllNotifications">
        <parameter name="aImmediate"/>
        <body>
          <![CDATA[
            var notifications = this.allNotifications;
            for (var n = notifications.length - 1; n >= 0; n--) {
              if (aImmediate)
                this._removeNotificationElement(notifications[n]);
              else
                this.removeNotification(notifications[n]);
            }
            this.currentNotification = null;

            // Must clear up any currently animating notification
            if (aImmediate)
              this._finishAnimation();
          ]]>
        </body>
      </method>

      <method name="removeTransientNotifications">
        <body>
          <![CDATA[
            var notifications = this.allNotifications;
            for (var n = notifications.length - 1; n >= 0; n--) {
              var notification = notifications[n];
              if (notification.persistence)
                notification.persistence--;
              else if (Date.now() > notification.timeout)
                this.removeNotification(notification);
            }
          ]]>
        </body>
      </method>

      <method name="_showNotification">
        <parameter name="aNotification"/>
        <parameter name="aSlideIn"/>
        <parameter name="aSkipAnimation"/>
        <body>
          <![CDATA[
            this._finishAnimation();

            var height = aNotification.boxObject.height;
            var skipAnimation = aSkipAnimation || (height == 0);

            if (aSlideIn) {
              this.currentNotification = aNotification;
              aNotification.style.removeProperty("position");
              aNotification.style.removeProperty("top");
              aNotification.style.removeProperty("margin-top");
              aNotification.style.removeProperty("opacity");

              if (skipAnimation) {
                this._setBlockingState(this.currentNotification);
                return;
              }
            }
            else {
              this._closedNotification = aNotification;
              var notifications = this.allNotifications;
              var idx = notifications.length - 1;
              this.currentNotification = (idx >= 0) ? notifications[idx] : null;

              if (skipAnimation) {
                this._removeNotificationElement(this._closedNotification);
                this._closedNotification = null;
                this._setBlockingState(this.currentNotification);
                return;
              }

              aNotification.style.marginTop = -height + "px";
              aNotification.style.opacity = 0;
            }

            this._animating = true;
          ]]>
        </body>
      </method>

      <method name="_finishAnimation">
        <body><![CDATA[
          if (this._animating) {
            this._animating = false;
            if (this._closedNotification) {
              this._removeNotificationElement(this._closedNotification);
              this._closedNotification = null;
            }
            this._setBlockingState(this.currentNotification);
          }
        ]]></body>
      </method>

      <method name="_setBlockingState">
        <parameter name="aNotification"/>
        <body>
          <![CDATA[
            var isblock = aNotification &&
                          aNotification.priority == this.PRIORITY_CRITICAL_BLOCK;
            var canvas = this._blockingCanvas;
            if (isblock) {
              if (!canvas)
                canvas = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
              const XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
              var content = this.firstChild;
              if (!content ||
                   content.namespaceURI != XULNS ||
                   content.localName != "browser")
                return;

              var width = content.boxObject.width;
              var height = content.boxObject.height;
              content.collapsed = true;

              canvas.setAttribute("width", width);
              canvas.setAttribute("height", height);
              canvas.setAttribute("flex", "1");

              this.appendChild(canvas);
              this._blockingCanvas = canvas;

              var bgcolor = "white";
              try {
                var prefService = Components.classes["@mozilla.org/preferences-service;1"].
                                    getService(Components.interfaces.nsIPrefBranch);
                bgcolor = prefService.getCharPref("browser.display.background_color");

                var win = content.contentWindow;
                var context = canvas.getContext("2d");
                context.globalAlpha = 0.5;
                context.drawWindow(win, win.scrollX, win.scrollY,
                                   width, height, bgcolor);
              }
              catch(ex) { };
            }
            else if (canvas) {
              canvas.parentNode.removeChild(canvas);
              this._blockingCanvas = null;
              var content = this.firstChild;
              if (content)
                content.collapsed = false;
            }
          ]]>
        </body>
      </method>

    </implementation>

    <handlers>
      <handler event="transitionend"><![CDATA[
        if (event.target.localName == "notification" &&
            event.propertyName == "margin-top")
          this._finishAnimation();
      ]]></handler>
    </handlers>

  </binding>

  <binding id="notification" role="xul:alert">
    <content>
      <xul:hbox class="notification-inner outset" flex="1" xbl:inherits="type">
        <xul:hbox anonid="details" align="center" flex="1"
                  oncommand="this.parentNode.parentNode._doButtonCommand(event);">
          <xul:image anonid="messageImage" class="messageImage" xbl:inherits="src=image,type,value"/>
          <xul:description anonid="messageText" class="messageText" flex="1" xbl:inherits="xbl:text=label"/>
          <xul:spacer flex="1"/>
          <children/>
        </xul:hbox>
        <xul:toolbarbutton ondblclick="event.stopPropagation();"
                           class="messageCloseButton close-icon tabbable"
                           xbl:inherits="hidden=hideclose"
                           tooltiptext="&closeNotification.tooltip;"
                           oncommand="document.getBindingParent(this).close();"/>
      </xul:hbox>
    </content>
    <resources>
      <stylesheet src="chrome://global/skin/notification.css"/>
    </resources>
    <implementation>
      <property name="label" onset="this.setAttribute('label', val); return val;"
                             onget="return this.getAttribute('label');"/>
      <property name="value" onset="this.setAttribute('value', val); return val;"
                             onget="return this.getAttribute('value');"/>
      <property name="image" onset="this.setAttribute('image', val); return val;"
                             onget="return this.getAttribute('image');"/>
      <property name="type" onset="this.setAttribute('type', val); return val;"
                            onget="return this.getAttribute('type');"/>
      <property name="priority" onget="return parseInt(this.getAttribute('priority')) || 0;"
                                onset="this.setAttribute('priority', val); return val;"/>
      <property name="persistence" onget="return parseInt(this.getAttribute('persistence')) || 0;"
                                   onset="this.setAttribute('persistence', val); return val;"/>
      <field name="timeout">0</field>

      <property name="control" readonly="true">
        <getter>
          <![CDATA[
            var parent = this.parentNode;
            while (parent) {
              if (parent.localName == "notificationbox")
                return parent;
              parent = parent.parentNode;
            }
            return null;
          ]]>
        </getter>
      </property>

      <method name="close">
        <body>
          <![CDATA[
            var control = this.control;
            if (control)
              control.removeNotification(this);
            else
              this.hidden = true;
          ]]>
        </body>
      </method>

      <method name="_doButtonCommand">
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            if (!("buttonInfo" in aEvent.target))
              return;

            var button = aEvent.target.buttonInfo;
            if (button.popup) {
              document.getElementById(button.popup).
                openPopup(aEvent.originalTarget, "after_start", 0, 0, false, false, aEvent);
              aEvent.stopPropagation();
            }
            else {
              var callback = button.callback;
              if (callback) {
                var result = callback(this, button);
                if (!result)
                  this.close();
                aEvent.stopPropagation();
              }
            }
          ]]>
        </body>
      </method>
    </implementation>
  </binding>

  <binding id="popup-notification">
    <content align="start">
      <xul:image class="popup-notification-icon"
                 xbl:inherits="popupid,src=icon"/>
      <xul:vbox flex="1">
        <xul:description class="popup-notification-description"
                         xbl:inherits="xbl:text=label"/>
        <children includes="popupnotificationcontent"/>
        <xul:label class="text-link popup-notification-learnmore-link"
               xbl:inherits="href=learnmoreurl">&learnMore;</xul:label>
        <xul:spacer flex="1"/>
        <xul:hbox class="popup-notification-button-container"
                  pack="end" align="center">
          <xul:button anonid="button"
                      class="popup-notification-menubutton"
                      type="menu-button"
                      xbl:inherits="oncommand=buttoncommand,label=buttonlabel,accesskey=buttonaccesskey">
            <xul:menupopup anonid="menupopup"
                           xbl:inherits="oncommand=menucommand">
              <children/>
              <xul:menuitem class="menuitem-iconic popup-notification-closeitem"
                            label="&closeNotificationItem.label;"
                            xbl:inherits="oncommand=closeitemcommand,hidden=hidenotnow"/>
            </xul:menupopup>
          </xul:button>
        </xul:hbox>
      </xul:vbox>
      <xul:vbox pack="start">
        <xul:toolbarbutton anonid="closebutton"
                           class="messageCloseButton close-icon popup-notification-closebutton tabbable"
                           xbl:inherits="oncommand=closebuttoncommand"
                           tooltiptext="&closeNotification.tooltip;"/>
      </xul:vbox>
    </content>
    <resources>
      <stylesheet src="chrome://global/skin/notification.css"/>
    </resources>
    <implementation>
      <field name="closebutton" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "closebutton");
      </field>
      <field name="button" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "button");
      </field>
      <field name="menupopup" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "menupopup");
      </field>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:55 $"/>
		<language type="no"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.15 $"/>
		<generation date="$Date: 2008/05/25 01:05:49 $"/>
		<language type="nr"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="numberboxBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:html="http://www.w3.org/1999/xhtml"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="numberbox"
           extends="chrome://global/content/bindings/textbox.xml#textbox">

    <resources>
      <stylesheet src="chrome://global/skin/numberbox.css"/>
    </resources>

    <content>
      <xul:hbox class="textbox-input-box numberbox-input-box" flex="1" xbl:inherits="context,disabled,focused">
        <html:input class="numberbox-input textbox-input" anonid="input"
                    xbl:inherits="value,maxlength,disabled,size,readonly,placeholder,tabindex,accesskey"/>
      </xul:hbox>
      <xul:spinbuttons anonid="buttons" xbl:inherits="disabled,hidden=hidespinbuttons"/>
    </content>

    <implementation>
      <field name="_valueEntered">false</field>
      <field name="_spinButtons">null</field>
      <field name="_value">0</field>
      <field name="decimalSymbol">"."</field>

      <property name="spinButtons" readonly="true">
        <getter>
          <![CDATA[
            if (!this._spinButtons)
              this._spinButtons = document.getAnonymousElementByAttribute(this, "anonid", "buttons");
            return this._spinButtons;
          ]]>
        </getter>
      </property>

      <property name="value" onget="return '' + this.valueNumber"
                             onset="return this.valueNumber = val;"/>

      <property name="valueNumber">
        <getter>
          if (this._valueEntered) {
            var newval = this.inputField.value;
            newval = newval.replace(this.decimalSymbol, ".");
            this._validateValue(newval, false);
          }
          return this._value;
        </getter>
        <setter>
          this._validateValue(val, false);
          return val;
        </setter>
      </property>

      <property name="wrapAround">
        <getter>
        <![CDATA[
          return (this.getAttribute('wraparound') == 'true')
        ]]>
        </getter>
        <setter>
        <![CDATA[
          if (val)
            this.setAttribute('wraparound', 'true');
          else
            this.removeAttribute('wraparound');
          this._enableDisableButtons();
          return val;
        ]]>
        </setter>
      </property>

      <property name="min">
        <getter>
          var min = this.getAttribute("min");
          return min ? Number(min) : 0;
        </getter>
        <setter>
        <![CDATA[
          if (typeof val == "number") {
            this.setAttribute("min", val);
            if (this.valueNumber < val)
              this._validateValue(val, false);
          }
          return val;
        ]]>
        </setter>
      </property>

      <property name="max">
        <getter>
          var max = this.getAttribute("max");
          return max ? Number(max) : Infinity;
        </getter>
        <setter>
        <![CDATA[
          if (typeof val != "number")
            return val;
          var min = this.min;
          if (val < min)
            val = min;
          this.setAttribute("max", val);
          if (this.valueNumber > val)
            this._validateValue(val, false);
          return val;
        ]]>
        </setter>
      </property>

      <property name="decimalPlaces">
        <getter>
          var places = this.getAttribute("decimalplaces");
          return places ? Number(places) : 0;
        </getter>
        <setter>
          if (typeof val == "number") {
            this.setAttribute("decimalplaces", val);
            this._validateValue(this.valueNumber, false);
          }
          return val;
        </setter>
      </property>

      <property name="increment">
        <getter>
          var increment = this.getAttribute("increment");
          return increment ? Number(increment) : 1;
        </getter>
        <setter>
        <![CDATA[
          if (typeof val == "number")
            this.setAttribute("increment", val);
          return val;
        ]]>
        </setter>
      </property>

      <method name="decrease">
        <body>
          return this._validateValue(this.valueNumber - this.increment, true);
        </body>
      </method>

      <method name="increase">
        <body>
          return this._validateValue(this.valueNumber + this.increment, true);
        </body>
      </method>

      <method name="_modifyUp">
        <body>
          <![CDATA[
            if (this.disabled || this.readOnly)
              return;
            var oldval = this.valueNumber;
            var newval = this.increase();
            this.inputField.select();
            if (oldval != newval)
              this._fireChange();
          ]]>
        </body>
      </method>
      <method name="_modifyDown">
        <body>
          <![CDATA[
            if (this.disabled || this.readOnly)
              return;
            var oldval = this.valueNumber;
            var newval = this.decrease();
            this.inputField.select();
            if (oldval != newval)
              this._fireChange();
          ]]>
        </body>
      </method>

      <method name="_enableDisableButtons">
        <body>
          <![CDATA[
            var buttons = this.spinButtons;
            if (this.wrapAround) {
              buttons.decreaseDisabled = buttons.increaseDisabled = false;
            }
            else if (this.disabled || this.readOnly) {
              buttons.decreaseDisabled = buttons.increaseDisabled = true;
            }
            else {
              buttons.decreaseDisabled = (this.valueNumber <= this.min);
              buttons.increaseDisabled = (this.valueNumber >= this.max);
            }
          ]]>
        </body>
      </method>

      <method name="_validateValue">
        <parameter name="aValue"/>
        <parameter name="aIsIncDec"/>
        <body>
          <![CDATA[
            aValue = Number(aValue) || 0;

            var min = this.min;
            var max = this.max;
            var wrapAround = this.wrapAround &&
                             min != -Infinity && max != Infinity;
            if (aValue < min)
              aValue = (aIsIncDec && wrapAround ? max : min);
            else if (aValue > max)
              aValue = (aIsIncDec && wrapAround ? min : max);

            var places = this.decimalPlaces;
            aValue = (places == Infinity) ? "" + aValue : aValue.toFixed(places);

            this._valueEntered = false;
            this._value = Number(aValue);
            this.inputField.value = aValue.replace(/\./, this.decimalSymbol);

            if (!wrapAround)
              this._enableDisableButtons();

            return aValue;
          ]]>
        </body>
      </method>

      <method name="_fireChange">
        <body>
          var evt = document.createEvent("Events");
          evt.initEvent("change", true, true);
          this.dispatchEvent(evt);
        </body>
      </method>

      <constructor><![CDATA[
        if (this.max < this.min)
          this.max = this.min;

        var dsymbol = (Number(5.4)).toLocaleString().match(/\D/);
        if (dsymbol != null)
          this.decimalSymbol = dsymbol[0];

        var value = this.inputField.value || 0;
        this._validateValue(value, false);
      ]]></constructor>

    </implementation>

    <handlers>
      <handler event="input" phase="capturing">
        this._valueEntered = true;
      </handler>

      <handler event="keypress">
        <![CDATA[
          if (!event.ctrlKey && !event.metaKey && !event.altKey && event.charCode) {
            if (event.charCode == this.decimalSymbol.charCodeAt(0) &&
                this.decimalPlaces &&
                String(this.inputField.value).indexOf(this.decimalSymbol) == -1)
              return;

            if (event.charCode == 45 && this.min < 0)
              return;

            if (event.charCode < 48 || event.charCode > 57)
              event.preventDefault();
          }
        ]]>
      </handler>

      <handler event="keypress" keycode="VK_UP">
        this._modifyUp();
      </handler>

      <handler event="keypress" keycode="VK_DOWN">
        this._modifyDown();
      </handler>

      <handler event="up" preventdefault="true">
        this._modifyUp();
      </handler>

      <handler event="down" preventdefault="true">
        this._modifyDown();
      </handler>

      <handler event="change">
        if (event.originalTarget == this.inputField) {
          var newval = this.inputField.value;
          newval = newval.replace(this.decimalSymbol, ".");
          this._validateValue(newval, false);
        }
      </handler>
    </handlers>

  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="nus"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="nyn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - OBJECT</title>
</head>
<body onload="parent.loadComplete()">
<p>
<object align="middle" archive="" border="0" codebase="http://xw2k.sdct.itl.nist.gov/brady/dom/" data="./pix/logo.gif" height="60" hspace="0" standby="Loading Image ..." tabindex="0" type="image/gif" usemap="#DivLogo-map" vspace="0" width="550"></object>
</p>
<form id="object2" action="./files/getData.pl" method="post">
<p>
<object declare="declare" name="OBJECT2" codetype="image/gif"></object>
</p>
</form>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - OBJECT</title>
</head>
<body onload="parent.loadComplete()">
<p>
<object align="middle" archive="" border="0" codebase="http://xw2k.sdct.itl.nist.gov/brady/dom/" data="./pix/logo.gif" height="60" hspace="0" standby="Loading Image ..." tabindex="0" type="image/gif" usemap="#DivLogo-map" vspace="0" width="550"></object>
</p>
<form name="OBJECT2" action="./files/getData.pl" method="post">
<p>
<object declare="declare" name="OBJECT2" codetype="image/gif"></object>
</p>
</form>
</body>
</html>

<?xml version="1.0"?>
<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist" lastupdate="1296046918000">
  <emItems>
    <emItem  blockID="i454" id="old@tests.mozilla.org">
      <versionRange  minVersion="0" maxVersion="*" severity="3"/>
    </emItem>
  </emItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - OLIST</title>
</head>
<body onload="parent.loadComplete()">
<ol compact="compact" start="1" type="1">
<li>EMP0001
<ul>
<li>Margaret Martin
<dl>
<dd>Accountant</dd>
<dd>56,000</dd>
</dl>
</li>
</ul>
</li>
<li>EMP0002
<ul>
<li>Martha Raynolds
<dl>
<dd>Secretary</dd>
<dd>35,000</dd>
</dl>
</li>
</ul>
</li>
</ol>
</body>
</html>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:55 $"/>
		<language type="om"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="false">
        <shape>
            <solid android:color="@color/onboard_start"/>
        </shape>
    </item>

    <item android:state_pressed="true">
        <shape>
            <solid android:color="@color/onboard_start_highlight"/>
        </shape>
    </item>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_height="match_parent"
              android:layout_width="wrap_content"
              android:orientation="vertical"
              android:background="@color/onboard_start">

    <ScrollView android:id="@+id/onboard_content"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:fillViewport="true" >

        <LinearLayout android:orientation="vertical"
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content">

            <!-- Empty spacer view -->
            <View android:layout_width="0dp"
                  android:layout_height="0dp"
                  android:layout_weight="1"/>

            <RelativeLayout android:layout_width="wrap_content"
                            android:layout_height="match_parent"
                            android:paddingTop="15dp">

                <ImageView android:id="@+id/image_shield"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                           android:layout_alignParentTop="true"
                           android:layout_centerHorizontal="true"
                           android:paddingRight="92dp"
                           android:src="@drawable/onboard_start_shield"
                           android:contentDescription="@string/onboard_empty_contentDescription"/>

                <ImageView android:id="@+id/image_private"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                           android:layout_alignParentTop="true"
                           android:layout_centerHorizontal="true"
                           android:paddingLeft="92dp"
                           android:src="@drawable/onboard_start_private"
                           android:contentDescription="@string/onboard_empty_contentDescription"/>

                <ImageView android:id="@+id/image_logo"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                           android:layout_centerHorizontal="true"
                           android:layout_below="@id/image_shield"
                           android:layout_marginTop="23dp"
                           android:src="@drawable/large_icon"
                           android:contentDescription="@string/onboard_empty_contentDescription"/>

                <ImageView android:id="@+id/image_sync"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                           android:layout_centerHorizontal="true"
                           android:layout_below="@id/image_shield"
                           android:paddingRight="200dp"
                           android:src="@drawable/onboard_start_sync"
                           android:contentDescription="@string/onboard_empty_contentDescription"/>

                <ImageView android:id="@+id/image_addon"
                           android:layout_width="wrap_content"
                           android:layout_height="wrap_content"
                           android:layout_centerHorizontal="true"
                           android:layout_below="@id/image_shield"
                           android:paddingLeft="200dp"
                           android:src="@drawable/onboard_start_addon"
                           android:contentDescription="@string/onboard_empty_contentDescription"/>

                <TextView android:id="@+id/text_message"
                          android:layout_width="match_parent"
                          android:layout_height="wrap_content"
                          android:layout_below="@id/image_logo"
                          android:layout_centerHorizontal="true"
                          android:layout_marginTop="30dp"
                          android:gravity="center"
                          android:padding="10sp"
                          android:text="@string/onboard_start_message"
                          android:textAppearance="@style/OnboardStartTextAppearance"
                          android:textSize="23sp" />

                <TextView android:layout_width="295dp"
                          android:layout_height="match_parent"
                          android:layout_gravity="center"
                          android:gravity="center"
                          android:layout_below="@id/text_message"
                          android:layout_centerHorizontal="true"
                          android:lineSpacingExtra="12sp"
                          android:padding="10sp"
                          android:text="@string/onboard_start_subtext"
                          android:textAppearance="@style/OnboardStartTextAppearance.Subtext" />

            </RelativeLayout>

            <!-- Empty spacer view -->
            <View android:layout_width="0dp"
                  android:layout_height="0dp"
                  android:layout_weight="1"/>

        </LinearLayout>
    </ScrollView>

    <!-- Bottom row of navigation buttons. -->
    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal"
                  android:background="@color/android:white">

        <Button android:id="@+id/button_account"
                style="@style/Widget.Onboard.Start.Button"
                android:layout_marginTop="3px"
                android:layout_marginRight="3px"
                android:text="@string/onboard_start_button_account"/>

        <Button android:id="@+id/button_browser"
                style="@style/Widget.Onboard.Start.Button"
                android:layout_marginTop="3px"
                android:text="@string/onboard_start_button_browser"/>

    </LinearLayout>
</LinearLayout><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - OPTGROUP</title>
</head>
<body onload="parent.loadComplete()">
<form id="Form1" action="test.pl" method="post">
<p>
<select name="select2">
<optgroup label="Regular Employees">
<option>EMP0001</option>
<option>EMP0002</option>
<option>EMP0003A</option>
</optgroup>
<optgroup disabled="disabled" label="Temporary Employees">
<option>EMP0004</option>
<option>EMP0005</option>
</optgroup>
</select>
</p>
</form>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - OPTIONSCOLLECTION</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" action="./files/getData.pl" method="post">
<p>
<select id="selectId" dir="ltr" tabindex="7" name="select1" multiple="multiple" size="1">
<option selected="selected" value="10001">EMP10001</option>
<option label="l1">EMP10002</option>
<option>EMP10003</option>
<option>EMP10004</option>
<option>EMP10005</option>
</select>
</p>
</form>
<p>
<select name="select2" disabled="disabled">
<option>EMP20001</option>
<option>EMP20002</option>
<option>EMP20003</option>
<option>EMP20004</option>
<option disabled="disabled">EMP20005</option>
</select>
</p>
</body>
</html>


<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="optionsDialogBindings" 
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
          
  <binding id="optionsDialog" 
           extends="chrome://global/content/bindings/dialog.xml#dialog">
     <content>
#ifndef XP_MACOSX
       <xul:hbox flex="1">
         <xul:categoryBox anonid="prefsCategories">
           <children/>
         </xul:categoryBox>
         <xul:vbox flex="1">
           <xul:dialogheader id="panelHeader"/>
           <xul:iframe anonid="panelFrame" name="panelFrame" style="width: 0px;" flex="1"/>
         </xul:vbox>
       </xul:hbox>
#else
       <xul:vbox flex="1">
         <xul:categoryBox anonid="prefsCategories">
           <children/>
         </xul:categoryBox>
         <xul:vbox flex="1">
           <xul:iframe anonid="panelFrame" name="panelFrame" style="width: 0px;" flex="1"/>
         </xul:vbox>
       </xul:vbox>
#endif
     </content>
     
     <implementation>
     
     
     </implementation>
                     
  </binding>
          
</bindings><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - OPTION</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" action="./files/getData.pl" method="post">
<p>
<select id="selectId" dir="ltr" tabindex="7" name="select1" multiple="multiple" size="1">
<option selected="selected" value="10001">EMP10001</option>
<option label="l1">EMP10002</option>
<option>EMP10003</option>
<option>EMP10004</option>
<option>EMP10005</option>
</select>
</p>
</form>
<p>
<select name="select2" disabled="disabled">
<option>EMP20001</option>
<option>EMP20002</option>
<option>EMP20003</option>
<option>EMP20004</option>
<option disabled="disabled">EMP20005</option>
</select>
</p>
</body>
</html>


<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="organizerBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="toolbarbutton-dropdown"
           extends="chrome://global/content/bindings/menu.xml#menu-base">
    <content>
      <xul:image class="menubar-left" xbl:inherits="src=image"/>
      <xul:label class="menubar-text" xbl:inherits="value=label,accesskey,crop" crop="right"/>
      <xul:hbox class="menubar-right"/>
      <children includes="menupopup"/>
    </content>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2008/05/25 01:05:55 $"/>
		<language type="or"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Orya</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"><otherdoc/>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="false" android:color="@color/text_color_overlaybtn_disabled" />
    <item android:color="@color/text_color_overlaybtn" />

</selector>
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true" >

    <scale
        android:duration="300"
        android:fromXScale="1"
        android:fromYScale="1"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toXScale="2"
        android:toYScale="2" >
    </scale>

    <scale
        android:duration="300"
        android:fromXScale="1"
        android:fromYScale="1"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toXScale="0.5"
        android:toYScale="0.5" >
    </scale>

</set>
<?xml version="1.0" encoding="utf-8"?>
<!--
  - This Source Code Form is subject to the terms of the Mozilla Public
  - License, v. 2.0. If a copy of the MPL was not distributed with this
  - file, You can obtain one at http://mozilla.org/MPL/2.0/.
  -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:drawable="@color/overlay_share_selected" />
    <item android:drawable="@color/overlay_share_background"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="15dp"
        android:id="@+id/overlaybtn_icon"/>

    <TextView
        style="@style/ShareOverlayButton.Text"
        android:id="@+id/overlaybtn_label"
        android:clickable="false"
        android:enabled="false"/>
</merge>
<?xml version="1.0" encoding="utf-8"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- Serves to position the content on the screen (bottom, centered) and provide the drop-shadow -->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/sharedialog"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:layout_marginBottom="-12dp"
    android:paddingTop="30dp"
    android:layout_gravity="bottom|center"
    android:clipChildren="false"
    android:clipToPadding="false">

    <LinearLayout
        android:id="@+id/share_overlay_content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="8dp"
        android:orientation="vertical"
        android:background="@drawable/share_overlay_background">

        <!-- Header -->
        <LinearLayout
            android:id="@+id/share_overlay_top_bar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="0dp"
            android:background="@color/overlay_share_header_background"
            android:orientation="vertical"
            android:paddingTop="10dp"
            android:paddingBottom="15dp"
            android:paddingLeft="15dp"
            android:paddingRight="15dp"
            android:layout_gravity="center">

            <!-- Title -->
            <TextView
                android:id="@+id/title"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:paddingBottom="7dp"
                android:ellipsize="end"
                android:maxLines="2"
                android:scrollHorizontally="true"
                android:textColor="@color/text_color_primary"
                android:textSize="17sp"/>

            <!-- Subtitle (url) -->
            <TextView
                android:id="@+id/subtitle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textColor="@color/text_color_secondary"/>

        </LinearLayout>

        <!-- Buttons -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@color/overlay_share_background"
            android:orientation="vertical">

            <!-- TODO: Once API 11 is available, stick "showDividers=middle" into the parent and get rid
                       of these evil separator views. -->

            <!-- "Send to Firefox Sync" -->
            <org.mozilla.gecko.overlays.ui.SendTabList
                style="@style/ShareOverlayButton"
                android:id="@+id/overlay_send_tab_btn"
                android:padding="0dp"/>

            <!-- Evil separator -->
            <View
                android:layout_width="match_parent"
                android:layout_height="1dp"
                android:background="@color/background_light"/>

            <!-- "Add to reading list" -->
            <org.mozilla.gecko.overlays.ui.OverlayDialogButton
                style="@style/ShareOverlayButton.Text"
                android:id="@+id/overlay_share_reading_list_btn"
                android:enabled="false"/>

            <!-- Evil separator -->
            <View
                android:layout_width="match_parent"
                android:layout_height="1dp"
                android:background="@color/background_light"/>

            <!-- "Add bookmark" -->
            <org.mozilla.gecko.overlays.ui.OverlayDialogButton
                style="@style/ShareOverlayButton.Text"
                android:id="@+id/overlay_share_bookmark_btn"
                android:enabled="false"/>

        </LinearLayout>
    </LinearLayout>

    <!-- Firefox logo (has to appear higher in the z-order than the content. -->
    <ImageView
        android:id="@+id/share_overlay_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/share_overlay_content"
        android:scaleType="center"
        android:layout_centerHorizontal="true"
        android:src="@drawable/icon"
        android:layout_marginBottom="-6dp"/>
</RelativeLayout>
<?xml version="1.0" encoding="utf-8"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <ListView
        style="@style/ShareOverlayButton"
        android:id="@+id/device_list"
        android:padding="0dp" >
    </ListView>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/ShareOverlayButton.Text"
    android:background="@drawable/overlay_share_button_background"
    android:clickable="true"/>
<?xml version="1.0" encoding="utf-8"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/overlay_share_toast"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@drawable/share_overlay_background"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_gravity="bottom|center">

    <!-- Header -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="0dp"
        android:background="@color/background_light"
        android:orientation="horizontal"
        android:paddingLeft="5dp"
        android:paddingRight="10dp"
        android:paddingTop="5dp"
        android:paddingBottom="5dp">

        <!-- Large attractive green tick with label to the right -->
        <TextView
            style="@style/ShareOverlayButton.Text"
            android:id="@+id/overlay_toast_message"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:maxLines="1"
            android:textColor="@color/text_color_primary"
            android:textSize="14sp"
            android:drawableLeft="@drawable/overlay_check"/>

        <!-- Evil separator -->
        <View
            android:id="@+id/overlay_toast_separator"
            android:layout_marginTop="15dp"
            android:layout_marginBottom="15dp"
            android:layout_height="match_parent"
            android:layout_width="1dp"
            android:background="@color/background_light"/>

        <!-- Retry button -->
        <Button
            android:id="@+id/overlay_toast_retry_btn"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/overlay_share_retry"
            android:onClick="selfDestruct" />

    </LinearLayout>
</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_longAnimTime"
    android:fromYDelta="0"
    android:toYDelta="100%p" />
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_longAnimTime"
    android:fromYDelta="100%p"
    android:toYDelta="0" />
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.2 $"/>
		<generation date="$Date: 2008/05/25 01:05:57 $"/>
		<language type="pa"/> 
	        <script type="Arab"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Arab</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="pageInfoBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <!-- based on preferences.xml paneButton -->
  <binding id="viewbutton" extends="chrome://global/content/bindings/radio.xml#radio" role="xullistitem">
    <content>
      <xul:image class="viewButtonIcon" xbl:inherits="src"/>
      <xul:label class="viewButtonLabel" xbl:inherits="value=label"/>
    </content>
  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.2 $"/>
		<generation date="$Date: 2008/05/25 01:05:57 $"/>
		<language type="pa"/> 
	        <script type="Guru"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Guru</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <ImageView android:id="@+id/image"
               android:layout_width="@dimen/panel_article_item_height"
               android:layout_height="@dimen/panel_article_item_height"
               android:scaleType="centerCrop"/>

    <LinearLayout android:id="@+id/title_desc_container"
                  android:layout_width="match_parent"
                  android:layout_height="@dimen/panel_article_item_height"
                  android:paddingLeft="15dip"
                  android:paddingRight="15dip"
                  android:gravity="center_vertical"
                  android:orientation="vertical">

        <TextView android:id="@+id/title"
                  style="@style/Widget.PanelItemView.Title"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"/>

        <TextView android:id="@+id/description"
                  style="@style/Widget.PanelItemView.Description"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="1dp"
                  android:maxLength="1024"/>

    </LinearLayout>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true">
        <layer-list>
            <item android:left="-2dp"
                  android:right="-2dp"
                  android:top="-2dp">

                <shape android:shape="rectangle" >
                    <stroke android:width="2dp"
                            android:color="#FFE0E4E7" />
                    <solid android:color="#FFC5D0DA" />
                </shape>
            </item>
        </layer-list>
    </item>

    <item>
        <layer-list>
            <item android:left="-2dp"
                  android:right="-2dp"
                  android:top="-2dp">

                <shape android:shape="rectangle" >
                    <stroke android:width="2dp"
                            android:color="#FFE0E4E7" />
                    <solid android:color="@color/background_light" />
                </shape>
            </item>
        </layer-list>
    </item>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Empty spacer view -->
    <View android:layout_width="match_parent"
          android:layout_height="0dip"
          android:layout_weight="1"/>

    <ImageView android:id="@+id/image"
               android:layout_width="match_parent"
               android:layout_height="wrap_content"
               android:gravity="top|center"
               android:scaleType="center"
               android:paddingBottom="10dp"/>

    <TextView android:id="@+id/message"
              android:layout_width="match_parent"
              android:layout_height="0dip"
              android:gravity="top|center"
              android:textAppearance="@style/TextAppearance.EmptyMessage"
              android:paddingLeft="50dp"
              android:paddingRight="50dp"
              android:layout_weight="3"/>

    <Button android:id="@+id/button"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="25dp"
            android:layout_marginRight="25dp"
            android:layout_marginBottom="25dp"
            android:gravity="bottom|center"
            android:textAppearance="@style/TextAppearance.EmptyMessage"
            android:background="@drawable/panel_auth_button"
            android:padding="20dp"/>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <ImageView android:id="@+id/image"
               android:layout_width="54dp"
               android:layout_height="44dp"
               android:layout_marginTop="10dip"
               android:layout_marginLeft="10dip"
               android:scaleType="centerCrop"/>

    <TextView android:id="@+id/title"
              style="@style/Widget.PanelItemView.Title"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:paddingTop="5dip"
              android:paddingBottom="5dip"
              android:paddingLeft="10dip"
              android:paddingRight="10dip"
              android:minHeight="@dimen/page_row_height"
              android:gravity="center_vertical"/>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <org.mozilla.gecko.widget.SquaredImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:scaleType="centerCrop"
        android:adjustViewBounds="true"
        android:background="@color/panel_image_item_background"/>

    <LinearLayout android:id="@+id/title_desc_container"
                  android:layout_width="match_parent"
                  android:layout_height="@dimen/page_row_height"
                  android:paddingTop="7dip"
                  android:paddingBottom="7dip"
                  android:paddingLeft="5dip"
                  android:paddingRight="5dip"
                  android:orientation="vertical">

        <TextView android:id="@+id/title"
                  style="@style/Widget.PanelItemView.Title"
                  android:layout_width="match_parent"
                  android:layout_height="0dp"
                  android:layout_weight="1"
                  android:gravity="center_vertical"
                  android:singleLine="true"/>

        <TextView android:id="@+id/description"
                  style="@style/Widget.PanelItemView.Description"
                  android:layout_width="match_parent"
                  android:layout_height="0dp"
                  android:layout_weight="1"
                  android:gravity="center_vertical"
                  android:singleLine="true"
                  android:maxLength="1024"/>

    </LinearLayout>

</merge>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="browserPanelUIBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="panelmultiview">
    <resources>
      <stylesheet src="chrome://browser/content/customizableui/panelUI.css"/>
    </resources>
    <content>
      <xul:box anonid="viewContainer" class="panel-viewcontainer" xbl:inherits="panelopen,viewtype,transitioning">
        <xul:stack anonid="viewStack" xbl:inherits="viewtype" viewtype="main" class="panel-viewstack">
          <xul:vbox anonid="mainViewContainer" class="panel-mainview"/>

          <!-- Used to capture click events over the PanelUI-mainView if we're in
               subview mode. That way, any click on the PanelUI-mainView causes us
               to revert to the mainView mode, whereupon PanelUI-click-capture then
               allows click events to go through it. -->
          <xul:vbox anonid="clickCapturer" class="panel-clickcapturer"/>

          <!-- We manually set display: none (via a CSS attribute selector) on the
               subviews that are not being displayed. We're using this over a deck
               because a deck assumes the size of its largest child, regardless of
               whether or not it is shown. That's not good for our case, since we
               want to allow each subview to be uniquely sized. -->
          <xul:vbox anonid="subViews" class="panel-subviews" xbl:inherits="panelopen">
            <children includes="panelview"/>
          </xul:vbox>
        </xul:stack>
      </xul:box>
    </content>
    <implementation implements="nsIDOMEventListener">
      <field name="_clickCapturer" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "clickCapturer");
      </field>
      <field name="_viewContainer" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "viewContainer");
      </field>
      <field name="_mainViewContainer" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "mainViewContainer");
      </field>
      <field name="_subViews" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "subViews");
      </field>
      <field name="_viewStack" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "viewStack");
      </field>
      <field name="_panel" readonly="true">
        this.parentNode;
      </field>

      <field name="_currentSubView">null</field>
      <field name="_anchorElement">null</field>
      <field name="_mainViewHeight">0</field>
      <field name="_subViewObserver">null</field>
      <field name="__transitioning">false</field>
      <field name="_ignoreMutations">false</field>

      <property name="showingSubView" readonly="true"
                onget="return this._viewStack.getAttribute('viewtype') == 'subview'"/>
      <property name="_mainViewId" onget="return this.getAttribute('mainViewId');" onset="this.setAttribute('mainViewId', val); return val;"/>
      <property name="_mainView" readonly="true"
                onget="return this._mainViewId ? document.getElementById(this._mainViewId) : null;"/>
      <property name="showingSubViewAsMainView" readonly="true"
                onget="return this.getAttribute('mainViewIsSubView') == 'true'"/>

      <property name="ignoreMutations">
        <getter>
          return this._ignoreMutations;
        </getter>
        <setter><![CDATA[
          this._ignoreMutations = val;
          if (!val && this._panel.state == "open") {
            if (this.showingSubView) {
              this._syncContainerWithSubView();
            } else {
              this._syncContainerWithMainView();
            }
          }
        ]]></setter>
      </property>

      <property name="_transitioning">
        <getter>
          return this.__transitioning;
        </getter>
        <setter><![CDATA[
          this.__transitioning = val;
          if (val) {
            this.setAttribute("transitioning", "true");
          } else {
            this.removeAttribute("transitioning");
          }
        ]]></setter>
      </property>
      <constructor><![CDATA[
        this._clickCapturer.addEventListener("click", this);
        this._panel.addEventListener("popupshowing", this);
        this._panel.addEventListener("popupshown", this);
        this._panel.addEventListener("popuphidden", this);
        this._subViews.addEventListener("overflow", this);
        this._mainViewContainer.addEventListener("overflow", this);

        // Get a MutationObserver ready to react to subview size changes. We
        // only attach this MutationObserver when a subview is being displayed.
        this._subViewObserver =
          new MutationObserver(this._syncContainerWithSubView.bind(this));
        this._mainViewObserver =
          new MutationObserver(this._syncContainerWithMainView.bind(this));

        this._mainViewContainer.setAttribute("panelid",
                                             this._panel.id);

        if (this._mainView) {
          this.setMainView(this._mainView);
        }
        this.setAttribute("viewtype", "main");
      ]]></constructor>

      <destructor><![CDATA[
        if (this._mainView) {
          this._mainView.removeAttribute("mainview");
        }
        this._mainViewObserver.disconnect();
        this._subViewObserver.disconnect();
        this._panel.removeEventListener("popupshowing", this);
        this._panel.removeEventListener("popupshown", this);
        this._panel.removeEventListener("popuphidden", this);
        this._subViews.removeEventListener("overflow", this);
        this._mainViewContainer.removeEventListener("overflow", this);
        this._clickCapturer.removeEventListener("click", this);
      ]]></destructor>

      <method name="setMainView">
        <parameter name="aNewMainView"/>
        <body><![CDATA[
        if (this._mainView) {
          this._mainViewObserver.disconnect();
          this._subViews.appendChild(this._mainView);
          this._mainView.removeAttribute("mainview");
        }
        this._mainViewId = aNewMainView.id;
        aNewMainView.setAttribute("mainview", "true");
        this._mainViewContainer.appendChild(aNewMainView);
        ]]></body>
      </method>

      <method name="showMainView">
        <body><![CDATA[
          if (this.showingSubView) {
            let viewNode = this._currentSubView;
            let evt = document.createEvent("CustomEvent");
            evt.initCustomEvent("ViewHiding", true, true, viewNode);
            viewNode.dispatchEvent(evt);

            viewNode.removeAttribute("current");
            this._currentSubView = null;

            this._subViewObserver.disconnect();

            this._transitioning = true;

            this._viewContainer.addEventListener("transitionend", function trans() {
              this._viewContainer.removeEventListener("transitionend", trans);
              this._transitioning = false;
            }.bind(this));
            this._viewContainer.style.height = this._mainViewHeight + "px";

            this.setAttribute("viewtype", "main");
          }

          this._shiftMainView();
        ]]></body>
      </method>

      <method name="showSubView">
        <parameter name="aViewId"/>
        <parameter name="aAnchor"/>
        <body><![CDATA[
          let viewNode = this.querySelector("#" + aViewId);
          viewNode.setAttribute("current", true);
          // Emit the ViewShowing event so that the widget definition has a chance
          // to lazily populate the subview with things.
          let evt = document.createEvent("CustomEvent");
          evt.initCustomEvent("ViewShowing", true, true, viewNode);
          viewNode.dispatchEvent(evt);
          if (evt.defaultPrevented) {
            return;
          }

          this._currentSubView = viewNode;

          // Now we have to transition the panel. There are a few parts to this:
          //
          // 1) The main view content gets shifted so that the center of the anchor
          //    node is at the left-most edge of the panel.
          // 2) The subview deck slides in so that it takes up almost all of the
          //    panel.
          // 3) If the subview is taller then the main panel contents, then the panel
          //    must grow to meet that new height. Otherwise, it must shrink.
          //
          // All three of these actions make use of CSS transformations, so they
          // should all occur simultaneously.
          this.setAttribute("viewtype", "subview");
          this._shiftMainView(aAnchor);

          this._mainViewHeight = this._viewStack.clientHeight;

          this._transitioning = true;
          this._viewContainer.addEventListener("transitionend", function trans() {
            this._viewContainer.removeEventListener("transitionend", trans);
            this._transitioning = false;
          }.bind(this));

          let newHeight = this._heightOfSubview(viewNode, this._subViews);
          this._viewContainer.style.height = newHeight + "px";

          this._subViewObserver.observe(viewNode, {
            attributes: true,
            characterData: true,
            childList: true,
            subtree: true
          });
        ]]></body>
      </method>

      <method name="_shiftMainView">
        <parameter name="aAnchor"/>
        <body><![CDATA[
          if (aAnchor) {
            // We need to find the edge of the anchor, relative to the main panel.
            // Then we need to add half the width of the anchor. This is the target
            // that we need to transition to.
            let anchorRect = aAnchor.getBoundingClientRect();
            let mainViewRect = this._mainViewContainer.getBoundingClientRect();
            let center = aAnchor.clientWidth / 2;
            let direction = aAnchor.ownerDocument.defaultView.getComputedStyle(aAnchor, null).direction;
            let edge, target;
            if (direction == "ltr") {
              edge = anchorRect.left - mainViewRect.left;
              target = "-" + (edge + center);
            } else {
              edge = mainViewRect.right - anchorRect.right;
              target = edge + center;
            }
            this._mainViewContainer.style.transform = "translateX(" + target + "px)";
            aAnchor.setAttribute("panel-multiview-anchor", true);
          } else {
            this._mainViewContainer.style.transform = "";
            if (this.anchorElement)
              this.anchorElement.removeAttribute("panel-multiview-anchor");
          }
          this.anchorElement = aAnchor;
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (aEvent.type.startsWith("popup") && aEvent.target != this._panel) {
            // Shouldn't act on e.g. context menus being shown from within the panel.
            return;
          }
          switch (aEvent.type) {
            case "click":
              if (aEvent.originalTarget == this._clickCapturer) {
                this.showMainView();
              }
              break;
            case "overflow":
              if (aEvent.target.localName == "vbox") {
                // Resize the right view on the next tick.
                if (this.showingSubView) {
                  setTimeout(this._syncContainerWithSubView.bind(this), 0);
                } else if (!this.transitioning) {
                  setTimeout(this._syncContainerWithMainView.bind(this), 0);
                }
              }
              break;
            case "popupshowing":
              this.setAttribute("panelopen", "true");
              // Bug 941196 - The panel can get taller when opening a subview. Disabling
              // autoPositioning means that the panel won't jump around if an opened
              // subview causes the panel to exceed the dimensions of the screen in the
              // direction that the panel originally opened in. This property resets
              // every time the popup closes, which is why we have to set it each time.
              this._panel.autoPosition = false;
              this._syncContainerWithMainView();

              this._mainViewObserver.observe(this._mainView, {
                attributes: true,
                characterData: true,
                childList: true,
                subtree: true
              });

              break;
            case "popupshown":
              this._setMaxHeight();
              break;
            case "popuphidden":
              this.removeAttribute("panelopen");
              this._mainView.style.removeProperty("height");
              this.showMainView();
              this._mainViewObserver.disconnect();
              break;
          }
        ]]></body>
      </method>

      <method name="_shouldSetHeight">
        <body><![CDATA[
          return this.getAttribute("nosubviews") != "true";
        ]]></body>
      </method>

      <method name="_setMaxHeight">
        <body><![CDATA[
          if (!this._shouldSetHeight())
            return;

          // Ignore the mutation that'll fire when we set the height of
          // the main view.
          this.ignoreMutations = true;
          this._mainView.style.height =
            this.getBoundingClientRect().height + "px";
          this.ignoreMutations = false;
        ]]></body>
      </method>
      <method name="_syncContainerWithSubView">
        <body><![CDATA[
          // Check that this panel is still alive:
          if (!this._panel || !this._panel.parentNode) {
            return;
          }

          if (!this.ignoreMutations && this.showingSubView) {
            let newHeight = this._heightOfSubview(this._currentSubView, this._subViews);
            this._viewContainer.style.height = newHeight + "px";
          }
        ]]></body>
      </method>
      <method name="_syncContainerWithMainView">
        <body><![CDATA[
          // Check that this panel is still alive:
          if (!this._panel || !this._panel.parentNode || !this._shouldSetHeight()) {
            return;
          }

          if (!this.ignoreMutations && !this.showingSubView && !this._transitioning) {
            let height;
            if (this.showingSubViewAsMainView) {
              height = this._heightOfSubview(this._mainView);
            } else {
              height = this._mainView.scrollHeight;
            }
            this._viewContainer.style.height = height + "px";
          }
        ]]></body>
      </method>

      <method name="_heightOfSubview">
        <parameter name="aSubview"/>
        <parameter name="aContainerToCheck"/>
        <body><![CDATA[
          function getFullHeight(element) {
            //XXXgijs: unfortunately, scrollHeight rounds values, and there's no alternative
            // that works with overflow: auto elements. Fortunately for us,
            // we have exactly 1 (potentially) scrolling element in here (the subview body),
            // and rounding 1 value is OK - rounding more than 1 and adding them means we get
            // off-by-1 errors. Now we might be off by a subpixel, but we care less about that.
            // So, use scrollHeight *only* if the element is vertically scrollable.
            let height;
            let elementCS;
            if (element.scrollTopMax) {
              height = element.scrollHeight;
              // Bounding client rects include borders, scrollHeight doesn't:
              elementCS = win.getComputedStyle(element);
              height += parseFloat(elementCS.borderTopWidth) +
                        parseFloat(elementCS.borderBottomWidth);
            } else {
              height = element.getBoundingClientRect().height;
              if (height > 0) {
                elementCS = win.getComputedStyle(element);
              }
            }
            if (elementCS) {
              // Include margins - but not borders or paddings because they
              // were dealt with above.
              height += parseFloat(elementCS.marginTop) + parseFloat(elementCS.marginBottom);
            }
            return height;
          }
          let win = aSubview.ownerDocument.defaultView;
          let body = aSubview.querySelector(".panel-subview-body");
          let height = getFullHeight(body || aSubview);
          if (body) {
            let header = aSubview.querySelector(".panel-subview-header");
            let footer = aSubview.querySelector(".panel-subview-footer");
            height += (header ? getFullHeight(header) : 0) +
                      (footer ? getFullHeight(footer) : 0);
          }
          if (aContainerToCheck) {
            let containerCS = win.getComputedStyle(aContainerToCheck);
            height += parseFloat(containerCS.paddingTop) + parseFloat(containerCS.paddingBottom);
          }
          return Math.ceil(height);
        ]]></body>
      </method>

    </implementation>
  </binding>

  <binding id="panelview">
    <implementation>
      <property name="panelMultiView" readonly="true">
        <getter><![CDATA[
          if (this.parentNode.localName != "panelmultiview") {
            return document.getBindingParent(this.parentNode);
          }

          return this.parentNode;
        ]]></getter>
      </property>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.19 $"/>
		<generation date="$Date: 2008/05/25 01:05:50 $"/>
		<language type="pa"/> 
		<territory type="PK"/> 
	</identity>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - PARAGRAPH</title>
</head>
<body onload="parent.loadComplete()">
<p align="center">
TEXT
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - PARAM</title>
</head>
<body onload="parent.loadComplete()">
<p>
<object>
<param name="image3" type="image/gif" value="image/file.gif" valuetype="ref"/>
</object>
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.22 $"/>
		<generation date="$Date: 2008/05/25 01:05:55 $"/>
		<language type="pa"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Guru</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical">

    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="@dimen/browser_toolbar_height"
                  android:orientation="vertical"
                  android:background="@color/background_normal"
                  android:padding="4dip">

        <EditText android:id="@+id/search"
                  style="@style/UrlBar.Button"
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:padding="6dip"
                  android:hint="@string/pin_site_dialog_hint"
                  android:background="@drawable/url_bar_entry"
                  android:textColor="@color/url_bar_title"
                  android:textColorHint="@color/url_bar_title_hint"
                  android:textColorHighlight="@color/url_bar_text_highlight"
                  android:textSelectHandle="@drawable/handle_middle"
                  android:textSelectHandleLeft="@drawable/handle_start"
                  android:textSelectHandleRight="@drawable/handle_end"
                  android:textCursorDrawable="@null"
                  android:inputType="textUri|textNoSuggestions"
                  android:imeOptions="actionGo|flagNoExtractUi|flagNoFullscreen"
                  android:singleLine="true"
                  android:gravity="center_vertical|left"/>

    </LinearLayout>

    <org.mozilla.gecko.home.HomeListView android:id="@+id/list"
                                         android:layout_width="match_parent"
                                         android:layout_height="0dip"
                                         android:layout_weight="1.0"/>

</LinearLayout>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="pk12util">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>PK12UTIL</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>pk12util</refname>
    <refpurpose>Export and import keys and certificate to or from a PKCS #12 file and the NSS database</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>pk12util</command>
      <arg>-i p12File|-l p12File|-o p12File</arg>
      <arg>-d [sql:]directory</arg>
      <arg>-h tokenname</arg>
      <arg>-P dbprefix</arg>
      <arg>-r</arg>
      <arg>-v</arg>
      <arg>-k slotPasswordFile|-K slotPassword</arg>
      <arg>-w p12filePasswordFile|-W p12filePassword</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection id="description">
    <title>Description</title>
    <para>The PKCS #12 utility, <command>pk12util</command>, enables sharing certificates among any server that supports PKCS#12. The tool can import certificates and keys from PKCS#12 files into security databases, export certificates, and list certificates and keys.</para>
  </refsection>
  
  <refsection id="options">
    <title>Options and Arguments</title>
    <para><command>Options</command></para>
    <variablelist>
      <varlistentry>
        <term>-i p12file</term>
        <listitem><para>Import keys and certificates from a PKCS#12 file into a security database.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-l p12file</term>
        <listitem><para>List the keys and certificates in PKCS#12 file.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-o p12file</term>
        <listitem><para>Export keys and certificates from the security database to a PKCS#12 file.</para></listitem>
      </varlistentry>
    </variablelist>

    <para><command>Arguments</command></para>
    <variablelist>
      <varlistentry>
        <term>-c keyCipher</term>
        <listitem><para>Specify the key encryption algorithm.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-C certCipher</term>
        <listitem><para>Specify the key cert (overall package) encryption algorithm.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-d [sql:]directory</term>
        <listitem><para>Specify the database directory into which to import to or export from certificates and keys.</para>
	<para><command>pk12util</command> supports two types of databases: the legacy security databases (<filename>cert8.db</filename>, <filename>key3.db</filename>, and <filename>secmod.db</filename>) and new SQLite databases (<filename>cert9.db</filename>, <filename>key4.db</filename>, and <filename>pkcs11.txt</filename>). If the prefix <command>sql:</command> is not used, then the tool assumes that the given databases are in the old format.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-h tokenname</term>
        <listitem><para>Specify the name of the token to import into or export from.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-k slotPasswordFile</term>
        <listitem><para>Specify the text file containing the slot's password.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-K slotPassword</term>
        <listitem><para>Specify the slot's password.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-m | --key-len  keyLength</term>
        <listitem><para>Specify the desired length of the symmetric key to be used to encrypt the private key.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-n | --cert-key-len  certKeyLength</term>
        <listitem><para>Specify the desired length of the symmetric key to be used to encrypt the certificates and other meta-data.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-n certname</term>
        <listitem><para>Specify the nickname of the cert and private key to export.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-P prefix</term>
        <listitem><para>Specify the prefix used on the certificate and key databases. This option is provided as a special case. 
          Changing the names of the certificate and key databases is not recommended.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-r</term>
        <listitem><para>Dumps all of the data in raw (binary) form. This must be saved as a DER file. The default is to return information in a pretty-print ASCII format, which displays the information about the certificates and public keys in the p12 file.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-v </term>
        <listitem><para>Enable debug logging when importing.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-w p12filePasswordFile</term>
        <listitem><para>Specify the text file containing the pkcs #12 file password.</para></listitem>
      </varlistentry>

      <varlistentry>
        <term>-W p12filePassword</term>
        <listitem><para>Specify the pkcs #12 file password.</para></listitem>
      </varlistentry>

    </variablelist>
  </refsection>

  <refsection id="return-codes">
    <title>Return Codes</title>
	<itemizedlist>
	<listitem>
        <para> 0 - No error</para>
	</listitem>
	<listitem>
        <para> 1 - User Cancelled</para>
	</listitem>
	<listitem>
        <para> 2 - Usage error</para>
	</listitem>
	<listitem>
        <para> 6 - NLS init error</para>
	</listitem>
	<listitem>
        <para> 8 - Certificate DB open error</para>
	</listitem>
	<listitem>
        <para> 9 - Key DB open error</para>
	</listitem>
	<listitem>
        <para> 10 - File initialization error</para>
	</listitem>
	<listitem>
        <para> 11 - Unicode conversion error</para>
	</listitem>
	<listitem>
        <para> 12 - Temporary file creation error</para>
	</listitem>
	<listitem>
        <para> 13 - PKCS11 get slot error</para>
	</listitem>
	<listitem>
        <para> 14 - PKCS12 decoder start error</para>
	</listitem>
	<listitem>
        <para> 15 - error read from import file</para>
	</listitem>
	<listitem>
        <para> 16 - pkcs12 decode error</para>
	</listitem>
	<listitem>
        <para> 17 - pkcs12 decoder verify error</para>
	</listitem>
	<listitem>
        <para> 18 - pkcs12 decoder validate bags error</para>
	</listitem>
	<listitem>
        <para> 19 - pkcs12 decoder import bags error</para>
	</listitem>
	<listitem>
        <para> 20 - key db conversion version 3 to version 2 error</para>
	</listitem>
	<listitem>
        <para> 21 - cert db conversion version 7 to version 5 error</para>
	</listitem>
	<listitem>
        <para> 22 - cert and key dbs patch error</para>
	</listitem>
	<listitem>
        <para> 23 - get default cert db error</para>
	</listitem>
	<listitem>
        <para> 24 - find cert by nickname error</para>
	</listitem>
	<listitem>
        <para> 25 - create export context error</para>
	</listitem>
	<listitem>
        <para> 26 - PKCS12 add password itegrity error</para>
	</listitem>
	<listitem>
        <para> 27 - cert and key Safes creation error</para>
	</listitem>
	<listitem>
        <para> 28 - PKCS12 add cert and key error</para>
	</listitem>
	<listitem>
        <para> 29 - PKCS12 encode error</para>
	</listitem>
	</itemizedlist>
  </refsection>

  <refsection id="examples">
    <title>Examples</title>
    <para><command>Importing Keys and Certificates</command></para>
    <para>The most basic usage of <command>pk12util</command> for importing a certificate or key is the PKCS#12 input file (<option>-i</option>) and some way to specify the security database being accessed (either <option>-d</option> for a directory or <option>-h</option> for a token).
    </para>
    <para>
    pk12util -i p12File [-h tokenname] [-v] [-d [sql:]directory] [-P dbprefix] [-k slotPasswordFile|-K slotPassword] [-w p12filePasswordFile|-W p12filePassword]
    </para>
    <para>For example:</para>
    <para> </para>
    <programlisting># pk12util -i /tmp/cert-files/users.p12 -d sql:/home/my/sharednssdb

Enter a password which will be used to encrypt your keys.
The password should be at least 8 characters long,
and should contain at least one non-alphabetic character.

Enter new password: 
Re-enter password: 
Enter password for PKCS12 file: 
pk12util: PKCS12 IMPORT SUCCESSFUL</programlisting>

    <para><command>Exporting Keys and Certificates</command></para>
    <para>Using the <command>pk12util</command> command to export certificates and keys requires both the name of the certificate to extract from the database (<option>-n</option>) and the PKCS#12-formatted output file to write to. There are optional parameters that can be used to encrypt the file to protect the certificate material.
    </para>
    <para>pk12util -o p12File -n certname [-c keyCipher] [-C certCipher] [-m|--key_len keyLen] [-n|--cert_key_len certKeyLen] [-d [sql:]directory] [-P dbprefix] [-k slotPasswordFile|-K slotPassword] [-w p12filePasswordFile|-W p12filePassword]</para>
    <para>For example:</para>
    <programlisting># pk12util -o certs.p12 -n Server-Cert -d sql:/home/my/sharednssdb
Enter password for PKCS12 file: 
Re-enter password: </programlisting>

    <para><command>Listing Keys and Certificates</command></para>
    <para>The information in a <filename>.p12</filename> file are not human-readable. The certificates and keys in the file can be printed (listed) in a human-readable pretty-print format that shows information for every certificate and any public keys in the <filename>.p12</filename> file.
    </para>
    <para>pk12util -l p12File [-h tokenname] [-r] [-d [sql:]directory] [-P dbprefix] [-k slotPasswordFile|-K slotPassword] [-w p12filePasswordFile|-W p12filePassword]</para>
    <para>For example, this prints the default ASCII output:</para>
    <programlisting># pk12util -l certs.p12

Enter password for PKCS12 file: 
Key(shrouded):
    Friendly Name: Thawte Freemail Member's Thawte Consulting (Pty) Ltd. ID

    Encryption algorithm: PKCS #12 V2 PBE With SHA-1 And 3KEY Triple DES-CBC
        Parameters:
            Salt:
                45:2e:6a:a0:03:4d:7b:a1:63:3c:15:ea:67:37:62:1f
            Iteration Count: 1 (0x1)
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 13 (0xd)
        Signature Algorithm: PKCS #1 SHA-1 With RSA Encryption
        Issuer: "E=personal-freemail@thawte.com,CN=Thawte Personal Freemail C
            A,OU=Certification Services Division,O=Thawte Consulting,L=Cape T
            own,ST=Western Cape,C=ZA"
    </programlisting>
    <para>Alternatively, the <option>-r</option> prints the certificates and then exports them into separate DER binary files. This allows the certificates to be fed to another application that supports <filename>.p12</filename> files. Each certificate is written to a sequentially-number file, beginning with <filename>file0001.der</filename> and continuing through <filename>file000N.der</filename>, incrementing the number for every certificate:</para>
    <programlisting>pk12util -l test.p12 -r
Enter password for PKCS12 file: 
Key(shrouded):
    Friendly Name: Thawte Freemail Member's Thawte Consulting (Pty) Ltd. ID

    Encryption algorithm: PKCS #12 V2 PBE With SHA-1 And 3KEY Triple DES-CBC
        Parameters:
            Salt:
                45:2e:6a:a0:03:4d:7b:a1:63:3c:15:ea:67:37:62:1f
            Iteration Count: 1 (0x1)
Certificate    Friendly Name: Thawte Personal Freemail Issuing CA - Thawte Consulting

Certificate    Friendly Name: Thawte Freemail Member's Thawte Consulting (Pty) Ltd. ID
    </programlisting>
  </refsection>

  <refsection id="encryption">
    <title>Password Encryption</title>
    <para>PKCS#12 provides for not only the protection of the private keys but also the certificate and meta-data associated with the keys. Password-based encryption is used to protect private keys on export to a PKCS#12 file and, optionally, the entire package. If no algorithm is specified, the tool defaults to using <command>PKCS12 V2 PBE with SHA1 and 3KEY Triple DES-cbc</command> for private key encryption. <command>PKCS12 V2 PBE with SHA1 and 40 Bit RC4</command> is the default for the overall package encryption when not in FIPS mode. When in FIPS mode, there is no package encryption.</para>
    <para>The private key is always protected with strong encryption by default.</para>
    <para>Several types of ciphers are supported.</para>
    <variablelist>
    
      <varlistentry>
        <term>Symmetric CBC ciphers for PKCS#5 V2</term>
        <listitem>
	     <itemizedlist>
	       <listitem><para>DES-CBC</para></listitem>
	       <listitem><para>RC2-CBC</para></listitem>
	       <listitem><para>RC5-CBCPad</para></listitem>
	       <listitem><para>DES-EDE3-CBC (the default for key encryption)</para></listitem>
	       <listitem><para>AES-128-CBC</para></listitem>
	       <listitem><para>AES-192-CBC</para></listitem>
	       <listitem><para>AES-256-CBC</para></listitem>
	       <listitem><para>CAMELLIA-128-CBC</para></listitem>
	       <listitem><para>CAMELLIA-192-CBC</para></listitem>
	       <listitem><para>CAMELLIA-256-CBC</para></listitem>
	     </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>PKCS#12 PBE ciphers</term>
        <listitem>
	     <itemizedlist>
	       <listitem><para>PKCS #12 PBE with Sha1 and 128 Bit RC4</para></listitem>
	       <listitem><para>PKCS #12 PBE with Sha1 and 40 Bit RC4</para></listitem>
	       <listitem><para>PKCS #12 PBE with Sha1 and Triple DES CBC</para></listitem>
	       <listitem><para>PKCS #12 PBE with Sha1 and 128 Bit RC2 CBC</para></listitem>
	       <listitem><para>PKCS #12 PBE with Sha1 and 40 Bit RC2 CBC</para></listitem>
	       <listitem><para>PKCS12 V2 PBE with SHA1 and 128 Bit RC4</para></listitem>
	       <listitem><para>PKCS12 V2 PBE with SHA1 and 40 Bit RC4 (the default for non-FIPS mode)</para></listitem>
	       <listitem><para>PKCS12 V2 PBE with SHA1 and 3KEY Triple DES-cbc</para></listitem>
	       <listitem><para>PKCS12 V2 PBE with SHA1 and 2KEY Triple DES-cbc</para></listitem>
	       <listitem><para>PKCS12 V2 PBE with SHA1 and 128 Bit RC2 CBC</para></listitem>
	       <listitem><para>PKCS12 V2 PBE with SHA1 and 40 Bit RC2 CBC</para></listitem>
	     </itemizedlist>
        </listitem>
      </varlistentry>
        <varlistentry><term>PKCS#5 PBE ciphers</term>
        <listitem>
	     <itemizedlist>
	       <listitem><para>PKCS #5 Password Based Encryption with MD2 and DES CBC</para></listitem>
	       <listitem><para>PKCS #5 Password Based Encryption with MD5 and DES CBC</para></listitem>
	       <listitem><para>PKCS #5 Password Based Encryption with SHA1 and DES CBC</para></listitem>
	     </itemizedlist>
        </listitem>
      </varlistentry>
    </variablelist>
    <para>With PKCS#12, the crypto provider may be the soft token module or an external hardware module. If the cryptographic module does not support the requested algorithm, then the next best fit will be selected (usually the default). If no suitable replacement for the desired algorithm can be found, the tool returns the error <emphasis>no security module can perform the requested operation</emphasis>.</para>
  </refsection>

<refsection id="databases"><title>NSS Database Types</title>
<para>NSS originally used BerkeleyDB databases to store security information. 
The last versions of these <emphasis>legacy</emphasis> databases are:</para>
<itemizedlist>
	<listitem>
		<para>
			cert8.db for certificates
		</para>
	</listitem>
	<listitem>
		<para>
			key3.db for keys
		</para>
	</listitem>
	<listitem>
		<para>
			secmod.db for PKCS #11 module information
		</para>
	</listitem>
</itemizedlist>

<para>BerkeleyDB has performance limitations, though, which prevent it from being easily used by multiple applications simultaneously. NSS has 
some flexibility that allows applications to use their own, independent database engine while keeping a shared database and working around the access issues. Still, NSS
requires more flexibility to provide a truly shared security database.</para>

<para>In 2009, NSS introduced a new set of databases that are SQLite databases rather than 
BerkleyDB. These new databases provide more accessibility and performance:</para>
<itemizedlist>
	<listitem>
		<para>
			cert9.db for certificates
		</para>
	</listitem>
	<listitem>
		<para>
			key4.db for keys
		</para>
	</listitem>
	<listitem>
		<para>
			pkcs11.txt, which is listing of all of the PKCS #11 modules contained in a new subdirectory in the security databases directory
		</para>
	</listitem>
</itemizedlist>

<para>Because the SQLite databases are designed to be shared, these are the <emphasis>shared</emphasis> database type. The shared database type is preferred; the legacy format is included for backward compatibility.</para>

<para>By default, the tools (<command>certutil</command>, <command>pk12util</command>, <command>modutil</command>) assume that the given security databases follow the more common legacy type. 
Using the SQLite databases must be manually specified by using the <command>sql:</command> prefix with the given security directory. For example:</para>

<programlisting># pk12util -i /tmp/cert-files/users.p12 -d sql:/home/my/sharednssdb</programlisting>

<para>To set the shared database type as the default type for the tools, set the <envar>NSS_DEFAULT_DB_TYPE</envar> environment variable to <envar>sql</envar>:</para>
<programlisting>export NSS_DEFAULT_DB_TYPE="sql"</programlisting>

<para>This line can be set added to the <filename>~/.bashrc</filename> file to make the change permanent.</para>

<para>Most applications do not use the shared database by default, but they can be configured to use them. For example, this how-to article covers how to configure Firefox and Thunderbird to use the new shared NSS databases:</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB_Howto</para>
	</listitem>
</itemizedlist>
<para>For an engineering draft on the changes in the shared NSS databases, see the NSS project wiki:</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB
		</para>
	</listitem>
</itemizedlist>
</refsection>

  <refsection id="seealso">
    <title>See Also</title>
    <para>certutil (1)</para>
    <para>modutil (1)</para>

	<para>The NSS wiki has information on the new database design and how to configure applications to use it.</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB_Howto</para>
	</listitem>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB
		</para>
	</listitem>
</itemizedlist>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="htmlBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="inputFields" bindToUntrustedContent="true">
    <handlers>
      <handler event="keypress" key="c" modifiers="accel" command="cmd_copy"/>
      <handler event="keypress" key="x" modifiers="accel" command="cmd_cut"/>
      <handler event="keypress" key="v" modifiers="accel" command="cmd_paste"/>
      <handler event="keypress" key="z" modifiers="accel" command="cmd_undo"/>
      <handler event="keypress" key="z" modifiers="accel,shift" command="cmd_redo"/>
      <handler event="keypress" key="a" modifiers="accel" command="cmd_selectAll"/>
    </handlers>
  </binding>

  <binding id="textAreas" bindToUntrustedContent="true">
    <handlers>
      <handler event="keypress" key="c" modifiers="accel" command="cmd_copy"/>
      <handler event="keypress" key="x" modifiers="accel" command="cmd_cut"/>
      <handler event="keypress" key="v" modifiers="accel" command="cmd_paste"/>
      <handler event="keypress" key="z" modifiers="accel" command="cmd_undo"/>
      <handler event="keypress" key="z" modifiers="accel,shift" command="cmd_redo"/>
      <handler event="keypress" key="a" modifiers="accel" command="cmd_selectAll"/>
    </handlers>
  </binding>

  <binding id="browser">
    <handlers>
      <handler event="keypress" key=" " modifiers="shift" command="cmd_scrollPageUp" />
      <handler event="keypress" key=" " command="cmd_scrollPageDown" />

      <handler event="keypress" keycode="VK_UP" command="cmd_linePrevious" />
      <handler event="keypress" keycode="VK_DOWN" command="cmd_lineNext" />
      <handler event="keypress" keycode="VK_LEFT" command="cmd_charPrevious" />
      <handler event="keypress" keycode="VK_RIGHT" command="cmd_charNext" />

      <handler event="keypress" key="x" command="cmd_cut" modifiers="accel"/>
      <handler event="keypress" key="c" command="cmd_copy" modifiers="accel"/>
      <handler event="keypress" key="v" command="cmd_paste" modifiers="accel"/>
      <handler event="keypress" key="z" command="cmd_undo" modifiers="accel"/>
      <handler event="keypress" key="z" command="cmd_redo" modifiers="accel,shift" />
      <handler event="keypress" key="a" command="cmd_selectAll" modifiers="accel"/>
      <handler event="keypress" keycode="VK_PAGE_UP" command="cmd_scrollPageUp"/>
      <handler event="keypress" keycode="VK_PAGE_DOWN" command="cmd_scrollPageDown"/>
      <handler event="keypress" keycode="VK_HOME" command="cmd_scrollTop" /> 
      <handler event="keypress" keycode="VK_END"  command="cmd_scrollBottom" /> 

      <handler event="keypress" keycode="VK_LEFT" modifiers="alt" command="cmd_wordPrevious" />
      <handler event="keypress" keycode="VK_RIGHT" modifiers="alt" command="cmd_wordNext" />
      <handler event="keypress" keycode="VK_LEFT" modifiers="alt,shift" command="cmd_selectWordPrevious" />
      <handler event="keypress" keycode="VK_RIGHT" modifiers="alt,shift" command="cmd_selectWordNext" />
      <handler event="keypress" keycode="VK_LEFT" modifiers="shift" command="cmd_selectCharPrevious" />
      <handler event="keypress" keycode="VK_RIGHT" modifiers="shift" command="cmd_selectCharNext" />
      <handler event="keypress" keycode="VK_UP" modifiers="shift" command="cmd_selectLinePrevious" />
      <handler event="keypress" keycode="VK_DOWN" modifiers="shift" command="cmd_selectLineNext" />
      <handler event="keypress" keycode="VK_UP" modifiers="accel" command="cmd_moveTop"/>
      <handler event="keypress" keycode="VK_DOWN" modifiers="accel" command="cmd_moveBottom"/>
    </handlers>
  </binding>

  <binding id="editor">
    <handlers>
      <handler event="keypress" key=" " modifiers="shift" command="cmd_scrollPageUp" />
      <handler event="keypress" key=" " command="cmd_scrollPageDown" />

      <handler event="keypress" key="z" command="cmd_undo" modifiers="accel"/>
      <handler event="keypress" key="z" command="cmd_redo" modifiers="accel,shift" />
      <handler event="keypress" key="x" command="cmd_cut" modifiers="accel"/>
      <handler event="keypress" key="c" command="cmd_copy" modifiers="accel"/>
      <handler event="keypress" key="v" command="cmd_paste" modifiers="accel"/>
      <handler event="keypress" key="v" command="cmd_pasteNoFormatting" modifiers="accel,shift"/>
      <handler event="keypress" key="a" command="cmd_selectAll" modifiers="accel"/>
      <handler event="keypress" key="v" command="cmd_pasteNoFormatting" modifiers="accel,alt,shift"/>
    </handlers>
  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
  </emItems>
  <pluginItems>
    <pluginItem blockID="test_plugin_wInfoURL">
      <match name="name" exp="^test_with_infoURL"/>
      <infoURL>http://test.url.com/</infoURL>
    </pluginItem>
    <pluginItem blockID="test_plugin_noInfoURL">
      <match name="name" exp="^test_no_infoURL"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
<!DOCTYPE bindings [
  <!ENTITY % pluginsDTD SYSTEM "chrome://mozapps/locale/plugins/plugins.dtd">
  <!ENTITY % globalDTD SYSTEM "chrome://global/locale/global.dtd">
  <!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd" >
  %pluginsDTD;
  %globalDTD;
  %brandDTD;
]>

<bindings id="pluginBindings"
              xmlns="http://www.mozilla.org/xbl"
              xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
              xmlns:html="http://www.w3.org/1999/xhtml">
<binding id="pluginProblem" inheritstyle="false" chromeOnlyContent="true" bindToUntrustedContent="true">
    <resources>
        <stylesheet src="chrome://mozapps/content/plugins/pluginProblemContent.css"/>
        <stylesheet src="chrome://mozapps/skin/plugins/pluginProblem.css"/>
    </resources>

    <content>
        <html:div class="mainBox" anonid="main" chromedir="&locale.dir;">
            <html:div class="hoverBox">
                <html:label>
                    <html:button class="icon" anonid="icon"/>
                    <html:div class="msg msgVulnerabilityStatus" anonid="vulnerabilityStatus"><!-- set at runtime --></html:div>
                    <html:div class="msg msgTapToPlay">&tapToPlayPlugin;</html:div>
                    <html:div class="msg msgClickToPlay" anonid="clickToPlay">&clickToActivatePlugin;</html:div>
                </html:label>

                <html:div class="msg msgUnsupported">&missingPlugin;</html:div>
                <html:div class="msg msgUnsupportedPlatform">&unsupportedPlatform.pre;<html:a class="unsupportedLearnMoreLink" href="" target="_blank">&unsupportedPlatform.learnMore;</html:a>&unsupportedPlatform.post;</html:div>
                <html:div class="msg msgDisabled">&disabledPlugin;</html:div>
                <html:div class="msg msgBlocked">&blockedPlugin.label;</html:div>
                <html:div class="msg msgCrashed">
                    <html:div class="msgCrashedText" anonid="crashedText"><!-- set at runtime --></html:div>
                    <!-- link href set at runtime -->
                    <html:div class="msgReload">&reloadPlugin.pre;<html:a class="reloadLink" anonid="reloadLink" href="">&reloadPlugin.middle;</html:a>&reloadPlugin.post;</html:div>
                </html:div>

                <html:div class="msg msgManagePlugins"><html:a class="action-link" anonid="managePluginsLink" href="">&managePlugins;</html:a></html:div>
                <html:div class="submitStatus" anonid="submitStatus">
                    <html:div class="msg msgPleaseSubmit" anonid="pleaseSubmit">
                        <html:textarea class="submitComment"
                                       anonid="submitComment"
                                       placeholder="&report.comment;"/>
                        <html:div class="submitURLOptInBox">
                            <html:label><html:input class="submitURLOptIn" anonid="submitURLOptIn" type="checkbox"/> &report.pageURL;</html:label>
                        </html:div>
                        <html:div class="submitButtonBox">
                            <html:span class="helpIcon" anonid="helpIcon" role="link"/>
                            <html:input class="submitButton" type="button"
                                        anonid="submitButton"
                                        value="&report.please;"/>
                        </html:div>
                    </html:div>
                    <html:div class="msg msgSubmitting">&report.submitting;<html:span class="throbber"> </html:span></html:div>
                    <html:div class="msg msgSubmitted">&report.submitted;</html:div>
                    <html:div class="msg msgNotSubmitted">&report.disabled;</html:div>
                    <html:div class="msg msgSubmitFailed">&report.failed;</html:div>
                    <html:div class="msg msgNoCrashReport">&report.unavailable;</html:div>
                </html:div>
                <html:div class="msg msgCheckForUpdates"><html:a class="action-link" anonid="checkForUpdatesLink" href="">&checkForUpdates;</html:a></html:div>
            </html:div>
            <html:button class="closeIcon" anonid="closeIcon" title="&hidePluginBtn.label;"/>
        </html:div>
        <html:div class="previewPluginContent" anonid="previewPluginContent"><!-- iframe and its src will be set at runtime --></html:div>
        <html:div style="display:none;"><children/></html:div>
    </content>
    <implementation>
      <constructor>
        // Notify browser-plugins.js that we were attached, on a delay because
        // this binding doesn't complete layout until the constructor
        // completes.
        this.dispatchEvent(new CustomEvent("PluginBindingAttached"));
      </constructor>
    </implementation>
</binding>
</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:18 $"/>
        <language type="pl"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/decelerate_interpolator"
     android:duration="150">

    <translate android:fromYDelta="-0"
               android:toYDelta="-20"/>

    <alpha android:fromAlpha="1.0"
           android:toAlpha="0.0"/>

</set>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/decelerate_interpolator"
     android:duration="150">

    <translate android:fromYDelta="-20"
               android:toYDelta="0"/>

    <alpha android:fromAlpha="0.0"
           android:toAlpha="1.0"/>

</set>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="popupBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="popup-base">
    <resources>
      <stylesheet src="chrome://global/skin/popup.css"/>
    </resources>

    <implementation implements="nsIDOMXULPopupElement">
      <property name="label" onget="return this.getAttribute('label');"
                             onset="this.setAttribute('label', val); return val;"/>
      <property name="position" onget="return this.getAttribute('position');"
                                onset="this.setAttribute('position', val); return val;"/>
      <property name="popupBoxObject">
        <getter>
          return this.boxObject;
        </getter>
      </property>

      <property name="state" readonly="true"
                onget="return this.popupBoxObject.popupState"/>

      <property name="triggerNode" readonly="true"
                onget="return this.popupBoxObject.triggerNode"/>

      <property name="anchorNode" readonly="true"
                onget="return this.popupBoxObject.anchorNode"/>

      <method name="openPopup">
        <parameter name="aAnchorElement"/>
        <parameter name="aPosition"/>
        <parameter name="aX"/>
        <parameter name="aY"/>
        <parameter name="aIsContextMenu"/>
        <parameter name="aAttributesOverride"/>
        <parameter name="aTriggerEvent"/>
        <body>
        <![CDATA[
          try {
            var popupBox = this.popupBoxObject;
            if (popupBox)
              popupBox.openPopup(aAnchorElement, aPosition, aX, aY,
                                 aIsContextMenu, aAttributesOverride, aTriggerEvent);
          } catch(e) {}
        ]]>
        </body>
      </method>

      <method name="openPopupAtScreen">
        <parameter name="aX"/>
        <parameter name="aY"/>
        <parameter name="aIsContextMenu"/>
        <parameter name="aTriggerEvent"/>
        <body>
        <![CDATA[
          try {
            var popupBox = this.popupBoxObject;
            if (popupBox)
              popupBox.openPopupAtScreen(aX, aY, aIsContextMenu, aTriggerEvent);
          } catch(e) {}
        ]]>
        </body>
      </method>
      
      <method name="showPopup">
        <parameter name="element"/>
        <parameter name="xpos"/>
        <parameter name="ypos"/>
        <parameter name="popuptype"/>
        <parameter name="anchoralignment"/>
        <parameter name="popupalignment"/>
        <body>
        <![CDATA[
          var popupBox = null;
          var menuBox = null;
          try {
            popupBox = this.popupBoxObject;
          } catch(e) {}
          try {
            menuBox = this.parentNode.boxObject;
          } catch(e) {}
          if (menuBox instanceof MenuBoxObject)
            menuBox.openMenu(true);
          else if (popupBox)
            popupBox.showPopup(element, this, xpos, ypos, popuptype, anchoralignment, popupalignment);
        ]]>
        </body>
      </method>
      
      <method name="hidePopup">
        <parameter name="cancel"/>
        <body>
        <![CDATA[
          var popupBox = null;
          var menuBox = null;
          try {
            popupBox = this.popupBoxObject;
          } catch(e) {}
          try {
            menuBox = this.parentNode.boxObject;
          } catch(e) {}
          if (menuBox instanceof MenuBoxObject)
            menuBox.openMenu(false);
          else if (popupBox instanceof PopupBoxObject)
            popupBox.hidePopup(cancel);
        ]]>
        </body>
      </method>

      <property name="autoPosition">
        <getter>
        <![CDATA[
          return this.popupBoxObject.autoPosition;
        ]]>
        </getter>
        <setter>
        <![CDATA[
          return this.popupBoxObject.autoPosition = val;
        ]]>
        </setter>
      </property>

      <property name="alignmentPosition" readonly="true">
        <getter>
        <![CDATA[
          return this.popupBoxObject.alignmentPosition;
        ]]>
        </getter>
      </property>

      <property name="alignmentOffset" readonly="true">
        <getter>
        <![CDATA[
          return this.popupBoxObject.alignmentOffset;
        ]]>
        </getter>
      </property>
      
      <method name="enableKeyboardNavigator">
        <parameter name="aEnableKeyboardNavigator"/>
        <body>
        <![CDATA[
          this.popupBoxObject.enableKeyboardNavigator(aEnableKeyboardNavigator);
        ]]>
        </body>
      </method>
      
      <method name="enableRollup">
        <parameter name="aEnableRollup"/>
        <body>
        <![CDATA[
          this.popupBoxObject.enableRollup(aEnableRollup);
        ]]>
        </body>
      </method>
      
      <method name="sizeTo">
        <parameter name="aWidth"/>
        <parameter name="aHeight"/>
        <body>
        <![CDATA[
          this.popupBoxObject.sizeTo(aWidth, aHeight);
        ]]>
        </body>
      </method>
      
      <method name="moveTo">
        <parameter name="aLeft"/>
        <parameter name="aTop"/>
        <body>
        <![CDATA[
          this.popupBoxObject.moveTo(aLeft, aTop);
        ]]>
        </body>
      </method>

      <method name="moveToAnchor">
        <parameter name="aAnchorElement"/>
        <parameter name="aPosition"/>
        <parameter name="aX"/>
        <parameter name="aY"/>
        <parameter name="aAttributesOverride"/>
        <body>
        <![CDATA[
          this.popupBoxObject.moveToAnchor(aAnchorElement, aPosition, aX, aY, aAttributesOverride);
        ]]>
        </body>
      </method>

      <method name="getOuterScreenRect">
        <body>
        <![CDATA[
          return this.popupBoxObject.getOuterScreenRect();
        ]]>
        </body>
      </method>
    </implementation>     

  </binding>

  <binding id="popup" role="xul:menupopup"
           extends="chrome://global/content/bindings/popup.xml#popup-base">
    
    <content>
      <xul:arrowscrollbox class="popup-internal-box" flex="1" orient="vertical"
                          smoothscroll="false">
        <children/>
      </xul:arrowscrollbox>
    </content>

    <handlers>
      <handler event="popupshowing" phase="target">
        <![CDATA[
          var array = [];
          var width = 0;
          for (var menuitem = this.firstChild; menuitem; menuitem = menuitem.nextSibling) {
            if (menuitem.localName == "menuitem" && menuitem.hasAttribute("acceltext")) {
              var accel = document.getAnonymousElementByAttribute(menuitem, "anonid", "accel");
              if (accel && accel.boxObject) {
                array.push(accel);
                if (accel.boxObject.width > width)
                  width = accel.boxObject.width;
              }
            }
          }
          for (var i = 0; i < array.length; i++)
            array[i].width = width;
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="panel" role="xul:panel"
           extends="chrome://global/content/bindings/popup.xml#popup-base">
    <implementation implements="nsIDOMXULPopupElement">
      <field name="_prevFocus">0</field>
      <field name="_dragBindingAlive">true</field>
      <constructor>
      <![CDATA[
        if (this.getAttribute("backdrag") == "true" && !this._draggableStarted) {
          this._draggableStarted = true;
          try {
            let tmp = {};
            Components.utils.import("resource://gre/modules/WindowDraggingUtils.jsm", tmp);
            let draghandle = new tmp.WindowDraggingElement(this);
            draghandle.mouseDownCheck = function () this._dragBindingAlive;
          } catch (e) {}
        }
      ]]>
      </constructor>
    </implementation>
    
    <handlers>
      <handler event="popupshowing"><![CDATA[
        // Capture the previous focus before has a chance to get set inside the panel
        try {
          this._prevFocus = document.commandDispatcher.focusedElement;
          if (this._prevFocus)
            return;
        } catch (ex) { }

        this._prevFocus = document.activeElement;
      ]]></handler>
      <handler event="popupshown"><![CDATA[
        // Fire event for accessibility APIs
        var alertEvent = document.createEvent("Events");
        alertEvent.initEvent("AlertActive", true, true);
        this.dispatchEvent(alertEvent);
       ]]></handler>
      <handler event="popuphiding"><![CDATA[
        try {
          this._currentFocus = document.commandDispatcher.focusedElement;
        } catch (e) {
          this._currentFocus = document.activeElement;
        }
      ]]></handler>
      <handler event="popuphidden"><![CDATA[
        var currentFocus = this._currentFocus;
        var prevFocus = this._prevFocus;
        this._currentFocus = null;
        this._prevFocus = null;
        if (prevFocus && currentFocus && this.getAttribute("norestorefocus") != "true") {
          // Try to restore focus
          try {
            if (document.commandDispatcher.focusedWindow != window)
              return; // Focus has already been set to a window outside of this panel
          } catch(ex) {}
          while (currentFocus) {
            if (currentFocus == this) {
              // Focus was set on an element inside this panel,
              // so we need to move it back to where it was previously
              try {
                let fm = Components.classes["@mozilla.org/focus-manager;1"]
                                   .getService(Components.interfaces.nsIFocusManager);
                fm.setFocus(prevFocus, fm.FLAG_NOSCROLL);
              } catch(e) {
                prevFocus.focus();
              }
              return;
            }
            currentFocus = currentFocus.parentNode;
          }
        }
      ]]></handler>
    </handlers>
  </binding>

  <binding id="arrowpanel" extends="chrome://global/content/bindings/popup.xml#panel">
    <content flip="both" side="top" position="bottomcenter topleft" consumeoutsideclicks="false">
      <xul:vbox anonid="container" class="panel-arrowcontainer" flex="1"
               xbl:inherits="side,panelopen">
        <xul:box anonid="arrowbox" class="panel-arrowbox">
          <xul:image anonid="arrow" class="panel-arrow" xbl:inherits="side"/>
        </xul:box>
        <xul:box class="panel-arrowcontent" xbl:inherits="side,align,dir,orient,pack" flex="1">
          <children/>
          <xul:box class="panel-inner-arrowcontentfooter" xbl:inherits="footertype" hidden="true"/>
        </xul:box>
      </xul:vbox>
    </content>
    <implementation>
      <field name="_fadeTimer">null</field>
      <method name="sizeTo">
        <parameter name="aWidth"/>
        <parameter name="aHeight"/>
        <body>
        <![CDATA[
          this.popupBoxObject.sizeTo(aWidth, aHeight);
          if (this.state == "open")
            this.adjustArrowPosition();
        ]]>
        </body>
      </method>
      <method name="moveTo">
        <parameter name="aLeft"/>
        <parameter name="aTop"/>
        <body>
        <![CDATA[
          this.popupBoxObject.moveTo(aLeft, aTop);
          if (this.state == "open")
            this.adjustArrowPosition();
        ]]>
        </body>
      </method>
      <method name="moveToAnchor">
        <parameter name="aAnchorElement"/>
        <parameter name="aPosition"/>
        <parameter name="aX"/>
        <parameter name="aY"/>
        <parameter name="aAttributesOverride"/>
        <body>
        <![CDATA[
          this.popupBoxObject.moveToAnchor(aAnchorElement, aPosition, aX, aY, aAttributesOverride);
          if (this.state == "open")
            this.adjustArrowPosition();
        ]]>
        </body>
      </method>
      <method name="adjustArrowPosition">
        <body>
        <![CDATA[
        var arrow = document.getAnonymousElementByAttribute(this, "anonid", "arrow");

        var anchor = this.anchorNode;
        if (!anchor) {
          arrow.hidden = true;
          return;
        }

        var container = document.getAnonymousElementByAttribute(this, "anonid", "container");
        var arrowbox = document.getAnonymousElementByAttribute(this, "anonid", "arrowbox");

        var position = this.alignmentPosition;
        var offset = this.alignmentOffset;

        this.setAttribute("arrowposition", position);

        // if this panel has a "sliding" arrow, we may have previously set margins...
        arrowbox.style.removeProperty("transform");
        if (position.indexOf("start_") == 0 || position.indexOf("end_") == 0) {
          container.orient = "horizontal";
          arrowbox.orient = "vertical";
          if (position.indexOf("_after") > 0) {
            arrowbox.pack = "end";
          } else {
            arrowbox.pack = "start";
          }
          arrowbox.style.transform = "translate(0, " + -offset + "px)";

          // The assigned side stays the same regardless of direction.
          var isRTL = (window.getComputedStyle(this).direction == "rtl");

          if (position.indexOf("start_") == 0) {
            container.dir = "reverse";
            this.setAttribute("side", isRTL ? "left" : "right");
          }
          else {
            container.dir = "";
            this.setAttribute("side", isRTL ? "right" : "left");
          }
        }
        else if (position.indexOf("before_") == 0 || position.indexOf("after_") == 0) {
          container.orient = "";
          arrowbox.orient = "";
          if (position.indexOf("_end") > 0) {
            arrowbox.pack = "end";
          } else {
            arrowbox.pack = "start";
          }
          arrowbox.style.transform = "translate(" + -offset + "px, 0)";

          if (position.indexOf("before_") == 0) {
            container.dir = "reverse";
            this.setAttribute("side", "bottom");
          }
          else {
            container.dir = "";
            this.setAttribute("side", "top");
          }
        }

        arrow.hidden = false;
        ]]>
        </body>
      </method>
    </implementation>
    <handlers>
      <handler event="popupshowing" phase="target">
      <![CDATA[
        this.adjustArrowPosition();
        if (this.getAttribute("animate") != "false") {
          this.setAttribute("animate", "open");
        }

        // set fading
        var fade = this.getAttribute("fade");
        var fadeDelay = (fade == "fast") ? 1 : fade == "slow" ? 4000 : 0;
        if (fadeDelay) {
          this._fadeTimer = setTimeout(() => this.hidePopup(true), fadeDelay, this);
        }
      ]]>
      </handler>
      <handler event="popuphiding" phase="target">
        let animate = (this.getAttribute("animate") != "false");

        if (this._fadeTimer) {
          clearTimeout(this._fadeTimer);
          if (animate) {
            this.setAttribute("animate", "fade");
          }
        }
        else if (animate) {
          this.setAttribute("animate", "cancel");
        }
      </handler>
      <handler event="popupshown" phase="target">
        this.setAttribute("panelopen", "true");
      </handler>
      <handler event="popuphidden" phase="target">
        this.removeAttribute("panelopen");
        if (this.getAttribute("animate") != "false") {
          this.removeAttribute("animate");
        }
      </handler>
    </handlers>
  </binding>

  <binding id="tooltip" role="xul:tooltip"
           extends="chrome://global/content/bindings/popup.xml#popup-base">
    <content>
      <children>
        <xul:label class="tooltip-label" xbl:inherits="xbl:text=label" flex="1"/>
      </children>
    </content>
    
    <implementation>
      <field name="_mouseOutCount">0</field>
      <field name="_isMouseOver">false</field>
      
      <property name="label"
                onget="return this.getAttribute('label');"
                onset="this.setAttribute('label', val); return val;"/>

      <property name="page" onset="if (val) this.setAttribute('page', 'true');
                                   else this.removeAttribute('page');
                                   return val;"
                            onget="return this.getAttribute('page') == 'true';"/>

      <!-- Given the supplied element within a page, set the tooltip's text to the text
           for that element. Returns true if text was assigned, and false if the no text
           is set, which normally would be used to cancel tooltip display.

           Note that DefaultTooltipTextProvider::GetNodeText() from nsDocShellTreeOwner.cpp
           also performs the same function, but for embedded clients that don't use a XUL/JS
           layer. These two should be kept synchronized.
        --> 
      <method name="fillInPageTooltip">
        <parameter name="tipElement"/>
        <body>
        <![CDATA[
          // Don't show the tooltip if the tooltip node is a document or disconnected.
          if (!tipElement || !tipElement.ownerDocument ||
              (tipElement.ownerDocument.compareDocumentPosition(tipElement) & document.DOCUMENT_POSITION_DISCONNECTED)) {
            return false;
          }

          var defView = tipElement.ownerDocument.defaultView;
          // XXX Work around bug 350679:
          // "Tooltips can be fired in documents with no view".
          if (!defView)
            return false;

          const XLinkNS = "http://www.w3.org/1999/xlink";
          const XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

          var titleText = null;
          var XLinkTitleText = null;
          var SVGTitleText = null;
          var XULtooltiptextText = null;
          var lookingForSVGTitle = true;
          var direction = tipElement.ownerDocument.dir;

          // If the element is invalid per HTML5 Forms specifications and has no title,
          // show the constraint validation error message.
          if ((tipElement instanceof HTMLInputElement ||
               tipElement instanceof HTMLTextAreaElement ||
               tipElement instanceof HTMLSelectElement ||
               tipElement instanceof HTMLButtonElement) &&
              !tipElement.hasAttribute('title') &&
              (!tipElement.form || !tipElement.form.noValidate)) {
            // If the element is barred from constraint validation or valid,
            // the validation message will be the empty string.
            titleText = tipElement.validationMessage || null;
          }

          // If the element is an <input type='file'> without a title, we should show
          // the current file selection.
          if (!titleText &&
              tipElement instanceof HTMLInputElement &&
              tipElement.type == 'file' &&
              !tipElement.hasAttribute('title')) {
            let files = tipElement.files;

            try {
              var bundle = Components.classes['@mozilla.org/intl/stringbundle;1']
                                     .getService(Components.interfaces.nsIStringBundleService)
                                     .createBundle("chrome://global/locale/layout/HtmlForm.properties");
              if (files.length == 0) {
                if (tipElement.multiple) {
                  titleText = bundle.GetStringFromName("NoFilesSelected");
                } else {
                  titleText = bundle.GetStringFromName("NoFileSelected");
                }
              } else {
                titleText = files[0].name;
                // For UX and performance (jank) reasons we cap the number of
                // files that we list in the tooltip to 20 plus a "and xxx more"
                // line, or to 21 if exactly 21 files were picked.
                const TRUNCATED_FILE_COUNT = 20;
                let count = Math.min(files.length, TRUNCATED_FILE_COUNT);
                for (let i = 1; i < count; ++i) {
                  titleText += "\n" + files[i].name;
                }
                if (files.length == TRUNCATED_FILE_COUNT + 1) {
                  titleText += "\n" + files[TRUNCATED_FILE_COUNT].name;
                } else if (files.length > TRUNCATED_FILE_COUNT + 1) {
                  let xmoreStr = bundle.GetStringFromName("AndNMoreFiles");
                  let xmoreNum = files.length - TRUNCATED_FILE_COUNT;
                  let tmp = {};
                  Components.utils.import("resource://gre/modules/PluralForm.jsm", tmp);
                  let andXMoreStr = tmp.PluralForm.get(xmoreNum, xmoreStr).replace("#1", xmoreNum);
                  titleText += "\n" + andXMoreStr;
                }
              }
            } catch(e) {}
          }

          // Check texts against null so that title="" can be used to undefine a
          // title on a child element.
          while (tipElement &&
                 (titleText == null) && (XLinkTitleText == null) &&
                 (SVGTitleText == null) && (XULtooltiptextText == null)) {

            if (tipElement.nodeType == Node.ELEMENT_NODE) {
              if (tipElement.namespaceURI == XULNS)
                XULtooltiptextText = tipElement.getAttribute("tooltiptext");
              else
                titleText = tipElement.getAttribute("title");

              if ((tipElement instanceof HTMLAnchorElement ||
                   tipElement instanceof HTMLAreaElement ||
                   tipElement instanceof HTMLLinkElement ||
                   tipElement instanceof SVGAElement) && tipElement.href) {
                XLinkTitleText = tipElement.getAttributeNS(XLinkNS, "title");
              }
              if (lookingForSVGTitle &&
                  (!(tipElement instanceof SVGElement) ||
                   tipElement.parentNode.nodeType == Node.DOCUMENT_NODE)) {
                lookingForSVGTitle = false;
              }
              if (lookingForSVGTitle) {
                for (let childNode of tipElement.childNodes) {
                  if (childNode instanceof SVGTitleElement) {
                    SVGTitleText = childNode.textContent;
                    break;
                  }
                }
              }

              direction = defView.getComputedStyle(tipElement, "")
                                 .getPropertyValue("direction");
            }

            tipElement = tipElement.parentNode;
          }

          this.style.direction = direction;

          return [titleText, XLinkTitleText, SVGTitleText, XULtooltiptextText].some(function (t) {
            if (t && /\S/.test(t)) {
              // Make CRLF and CR render one line break each.
              this.label = t.replace(/\r\n?/g, '\n');
              return true;
            }

            return false;
          }, this);

          return false;
        ]]>
        </body>
      </method>
    </implementation>

    <handlers>
      <handler event="mouseover"><![CDATA[
        var rel = event.relatedTarget;
        //dump("ENTERING " + (rel ? rel.localName : "null") + "\n");
        if (!rel)
          return;
          
        // find out if the node we entered from is one of our anonymous children
        while (rel) {
          if (rel == this)
            break;
          rel = rel.parentNode;
        }

        // if the exited node is not a descendant of ours, we are entering for the first time
        if (rel != this)
          this._isMouseOver = true;
      ]]></handler>

      <handler event="mouseout"><![CDATA[
        var rel = event.relatedTarget;
        //dump("LEAVING " + (rel ? rel.localName : "null") + "\n");

        // relatedTarget is null when the titletip is first shown: a mouseout event fires
        // because the mouse is exiting the main window and entering the titletip "window".
        // relatedTarget is also null when the mouse exits the main window completely,
        // so count how many times relatedTarget was null after titletip is first shown 
        // and hide popup the 2nd time
        if (!rel) {
          ++this._mouseOutCount;
          if (this._mouseOutCount > 1)
            this.hidePopup();
          return;
        }
          
        // find out if the node we are entering is one of our anonymous children
        while (rel) {
          if (rel == this)
            break;
          rel = rel.parentNode;
        }
        
        // if the entered node is not a descendant of ours, hide the tooltip
        if (rel != this && this._isMouseOver) {
          this.hidePopup();
        }        
      ]]></handler>

      <handler event="popupshowing"><![CDATA[
        if (this.page && !this.fillInPageTooltip(this.triggerNode)) {
          event.preventDefault();
        }
      ]]></handler>

      <handler event="popuphiding"><![CDATA[
        this._isMouseOver = false;
        this._mouseOutCount = 0;
      ]]></handler>
    </handlers>
  </binding>

  <binding id="popup-scrollbars" extends="chrome://global/content/bindings/popup.xml#popup">
    <content>
      <xul:hbox class="popup-internal-box" flex="1" orient="vertical" style="overflow: auto;">
        <children/>
      </xul:hbox>
    </content>
  </binding>

</bindings>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/">
  <ShortName>POST Search</ShortName>
  <Url type="text/html" method="POST" template="http://mochi.test:8888/browser/browser/base/content/test/general/print_postdata.sjs">
    <Param name="searchterms" value="{searchTerms}"/>
  </Url>
</OpenSearchDescription>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="pp">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>PP</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>pp</refname>
    <refpurpose>Prints certificates, keys, crls, and pkcs7 files</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>pp -t type [-a] [-i input] [-o output] [-u] [-w]</command>
    </cmdsynopsis>
  </refsynopsisdiv>
  
  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection>
    <title>Description</title>

    <para><command>pp </command>pretty-prints private and public key, certificate, certificate-request,
                     pkcs7 or crl files
    </para>

  </refsection>

<refsection>
    <title>Options</title>
    
    <variablelist>

      <varlistentry>
        <term><option>-t </option> <replaceable>type</replaceable></term>
        <listitem>
          <simpara>specify the input, one of {private-key | public-key | certificate | certificate-request | pkcs7 | crl}</simpara>
          <simpara></simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-a </option></term>
        <listitem>
          <simpara>Input is in ascii encoded form (RFC1113)</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-i </option> <replaceable>inputfile</replaceable></term>
        <listitem>
          <simpara>Define an input file to use (default is stdin)</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-o </option> <replaceable>outputfile</replaceable></term>
        <listitem>
          <simpara>Define an output file to use (default is stdout)</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-u </option> </term>
        <listitem>
          <simpara>Use UTF-8 (default is to show non-ascii as .)</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-w </option> </term>
        <listitem>
          <simpara>Don't wrap long output lines</simpara>
        </listitem>
      </varlistentry>

    </variablelist>
  </refsection>

  <refsection id="resources">
    <title>Additional Resources</title>
    <para>NSS is maintained in conjunction with PKI and security-related projects through Mozilla and Fedora. The most closely-related project is Dogtag PKI, with a project wiki at <ulink url="http://pki.fedoraproject.org/wiki/">PKI Wiki</ulink>. </para>
	<para>For information specifically about NSS, the NSS project wiki is located at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">Mozilla NSS site</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: pki-devel@redhat.com and pki-users@redhat.com</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2006 The Android Open Source Project
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<!-- Layout used by CheckBoxPreference for the checkbox style. This is inflated
     inside android.R.layout.preference. -->
<CheckBox xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/checkbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:focusable="false"
    android:clickable="false" />
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- Tablet only: Sync is nested within the "Customize" header on tablets,
     instead of being a top-level menu item.
     See xml-v11/preferences.xml for single-pane v11+ phone layout. -->

<preference-headers xmlns:android="http://schemas.android.com/apk/res/android">

    <header android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment"
            android:title="@string/pref_header_customize">
        <extra android:name="resource"
               android:value="preferences_customize_tablet"/>
    </header>

    <header android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment"
            android:title="@string/pref_header_display">
        <extra android:name="resource"
               android:value="preferences_display"/>
    </header>

    <header android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment"
            android:title="@string/pref_header_privacy_short">
        <extra android:name="resource"
               android:value="preferences_privacy"/>
    </header>

    <header android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment"
            android:title="@string/pref_header_language"
            android:id="@+id/pref_header_language">
        <extra android:name="resource"
               android:value="preferences_locale" />
    </header>

    <header android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment"
            android:title="@string/pref_header_vendor">
        <extra android:name="resource"
               android:value="preferences_vendor"/>
    </header>

    <header android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment"
            android:title="@string/pref_header_devtools">
        <extra android:name="resource"
               android:value="preferences_devtools"/>
    </header>

</preference-headers>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:minHeight="?android:attr/listPreferredItemHeight"
              android:gravity="center_vertical"
              android:orientation="vertical"
              android:paddingLeft="15dp"
              android:paddingRight="?android:attr/scrollbarSize">

       <TextView android:id="@+android:id/title"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:textAppearance="?android:attr/textAppearanceMedium"
                 android:singleLine="true"
                 android:ellipsize="marquee"
                 android:fadingEdge="horizontal" />

       <TextView android:id="@+android:id/summary"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:textAppearance="?android:attr/textAppearanceSmall"
                 android:maxLines="2" />

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- This custom layout matches the Android layout for preferences in
     padding and margins, so it is visually consistent. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:orientation="horizontal"
      android:paddingRight="?android:attr/scrollbarSize">

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="6dip"
        android:layout_marginTop="6dip"
        android:layout_marginBottom="6dip"
        android:paddingRight="6dip"
        android:layout_weight="1">

        <TextView android:id="@+android:id/title"
            android:layout_gravity="right"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal" />

    </RelativeLayout>

    <ImageView android:src="@drawable/menu_item_more"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_gravity="center_vertical"
               android:paddingRight="16dp" />

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- Tablet only: The contents under the "Customize" header for tablets,
     See xml-v11/preferences.xml for single-pane v11+ phone layout.
     Changes to preferences should be mirrored to preferences_customize.xml. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                  android:title="@string/pref_category_customize"
                  android:enabled="false">

    <org.mozilla.gecko.preferences.SyncPreference android:key="android.not_a_preference.sync"
                                                  android:title="@string/pref_sync"
                                                  android:persistent="false" />

    <PreferenceScreen android:title="@string/pref_category_home"
                      android:summary="@string/pref_category_home_summary"
                      android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment" >
            <extra android:name="resource"
                   android:value="preferences_home" />
    </PreferenceScreen>

    <PreferenceScreen android:title="@string/pref_category_search"
                      android:summary="@string/pref_category_search_summary"
                      android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment" >
        <extra android:name="resource"
               android:value="preferences_search"/>
    </PreferenceScreen>

    <ListPreference android:key="android.not_a_preference.restoreSession3"
                    android:title="@string/pref_restore"
                    android:defaultValue="quit"
                    android:entries="@array/pref_restore_entries"
                    android:entryValues="@array/pref_restore_values"
                    android:persistent="true" />

    <org.mozilla.gecko.preferences.AndroidImportPreference
            android:key="android.not_a_preference.import_android"
            gecko:entries="@array/pref_import_android_entries"
            gecko:entryValues="@array/pref_import_android_values"
            gecko:initialValues="@array/pref_import_android_defaults"
            android:title="@string/pref_import_android"
            android:summary="@string/pref_import_android_summary"
            android:positiveButtonText="@string/bookmarkhistory_button_import"
            android:negativeButtonText="@string/button_cancel"
            android:persistent="false" />

    <ListPreference android:key="app.update.autodownload"
                    android:title="@string/pref_update_autodownload"
                    android:entries="@array/pref_update_autodownload_entries"
                    android:entryValues="@array/pref_update_autodownload_values"
                    android:persistent="false" />

</PreferenceScreen>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- Changes should be mirrored to preferences_customize_tablet.xml. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                  android:enabled="false">

    <PreferenceScreen android:title="@string/pref_category_home"
                      android:summary="@string/pref_category_home_summary"
                      android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment" >
            <extra android:name="resource"
                   android:value="preferences_home" />
    </PreferenceScreen>

     <PreferenceScreen android:title="@string/pref_category_search"
                       android:summary="@string/pref_category_search_summary"
                       android:fragment="org.mozilla.gecko.preferences.GeckoPreferenceFragment" >
         <extra android:name="resource"
                android:value="preferences_search"/>
     </PreferenceScreen>

    <ListPreference android:key="android.not_a_preference.restoreSession3"
                    android:title="@string/pref_restore"
                    android:defaultValue="quit"
                    android:entries="@array/pref_restore_entries"
                    android:entryValues="@array/pref_restore_values"
                    android:persistent="true" />

    <org.mozilla.gecko.preferences.AndroidImportPreference
                  android:key="android.not_a_preference.import_android"
                  gecko:entries="@array/pref_import_android_entries"
                  gecko:entryValues="@array/pref_import_android_values"
                  gecko:initialValues="@array/pref_import_android_defaults"
                  gecko:entryKeys="@array/pref_import_android_keys"
                  android:title="@string/pref_import_android"
                  android:summary="@string/pref_import_android_summary"
                  android:positiveButtonText="@string/bookmarkhistory_button_import"
                  android:negativeButtonText="@string/button_cancel"
                  android:persistent="false" />

   <ListPreference android:key="app.update.autodownload"
                   android:title="@string/pref_update_autodownload"
                   android:entries="@array/pref_update_autodownload_entries"
                   android:entryValues="@array/pref_update_autodownload_values"
                   android:persistent="false" />

</PreferenceScreen>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                  android:title="@string/pref_category_devtools"
                  android:enabled="false">

       <org.mozilla.gecko.preferences.CustomCheckBoxPreference
                           android:key="nglayout.debug.paint_flashing"
                           android:title="@string/pref_developer_paint_flashing" />

       <CheckBoxPreference android:key="devtools.debugger.remote-enabled"
                           android:title="@string/pref_developer_remotedebugging" />

       <org.mozilla.gecko.preferences.AlignRightLinkPreference android:key="android.not_a_preference.remote_debugging.link"
                                                               android:title="@string/pref_learn_more"
                                                               android:persistent="false"
                                                               url="https://developer.mozilla.org/docs/Tools/Remote_Debugging/Debugging_Firefox_for_Android_with_WebIDE" />

</PreferenceScreen>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                  android:title="@string/pref_category_display"
                  android:enabled="false">

    <org.mozilla.gecko.preferences.FontSizePreference
                    android:key="font.size.inflation.minTwips"
                    android:title="@string/pref_text_size"
                    android:positiveButtonText="@string/pref_font_size_set"
                    android:negativeButtonText="@string/button_cancel"
                    android:persistent="false" />

    <CheckBoxPreference android:key="browser.chrome.dynamictoolbar"
                        android:title="@string/pref_scroll_title_bar2"
                        android:summary="@string/pref_scroll_title_bar_summary" />

    <CheckBoxPreference android:key="media.autoplay.enabled"
                        android:title="@string/pref_media_autoplay_enabled"
                        android:summary="@string/pref_media_autoplay_enabled_summary" />

    <PreferenceCategory android:title="@string/pref_category_advanced">

        <CheckBoxPreference
                        android:key="browser.zoom.reflowOnZoom"
                        android:title="@string/pref_reflow_on_zoom"
                        android:defaultValue="false"
                        android:persistent="false" />

        <ListPreference android:key="browser.menu.showCharacterEncoding"
                        android:title="@string/pref_char_encoding"
                        android:entries="@array/pref_char_encoding_entries"
                        android:entryValues="@array/pref_char_encoding_values"
                        android:persistent="false" />

        <ListPreference android:key="plugin.enable"
                        android:title="@string/pref_plugins"
                        android:entries="@array/pref_plugins_entries"
                        android:entryValues="@array/pref_plugins_values"
                        android:persistent="false" />

    </PreferenceCategory>

</PreferenceScreen>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:minHeight="?android:attr/listPreferredItemHeight"
              android:gravity="center_vertical"
              android:paddingLeft="15dp"
              android:paddingRight="?android:attr/scrollbarSize">

    <org.mozilla.gecko.widget.FaviconView
        android:id="@+id/search_engine_icon"
        android:layout_width="@dimen/favicon_bg"
        android:layout_height="@dimen/favicon_bg"
        android:layout_gravity="center"
        android:minWidth="@dimen/favicon_bg"
        android:minHeight="@dimen/favicon_bg" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="6dip"
        android:layout_marginTop="6dip"
        android:layout_marginBottom="6dip">

       <TextView android:id="@+android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:singleLine="true"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal" />

       <TextView android:id="@+android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:maxLines="2" />

   </LinearLayout>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="horizontal"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:paddingRight="?android:attr/scrollbarSize">

    <TextView android:id="@+id/label_search_hint"
              android:layout_height="wrap_content"
              android:layout_width="wrap_content"
              android:text="@string/pref_search_hint"
              android:layout_marginTop="5dip"
              android:layout_marginBottom="6dip"
              android:layout_marginLeft="15dip"
              android:layout_marginRight="6dip"
              android:paddingTop="8dp"
              android:paddingBottom="8dp"
              android:paddingRight="6dip"
              android:layout_weight="1"/>

    <ImageView android:layout_height="wrap_content"
               android:layout_width="wrap_content"
               android:paddingRight="8dp"
               android:paddingTop="12dip"
               android:src="@drawable/tip_addsearch"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                  android:title="@string/pref_category_home"
                  android:enabled="false">

    <org.mozilla.gecko.preferences.PanelsPreferenceCategory
        android:title="@string/pref_category_home_panels"/>

    <PreferenceCategory android:title="@string/pref_category_home_content_settings">

        <CheckBoxPreference android:key="android.not_a_preference.home_suggested_sites"
                            android:title="@string/pref_home_suggested_sites"
                            android:summary="@string/pref_home_suggested_sites_summary"
                            android:defaultValue="true" />

        <ListPreference android:key="home.sync.updateMode"
                        android:title="@string/pref_home_updates"
                        android:entries="@array/pref_home_updates_entries"
                        android:entryValues="@array/pref_home_updates_values"
                        android:persistent="false" />

    </PreferenceCategory>

</PreferenceScreen>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                  android:title="@string/pref_category_language"
                  android:enabled="false">
    <PreferenceCategory android:title="@string/pref_browser_locale">
        <!-- No title set here. We set the title to the current locale in
             GeckoPreferences. -->
        <org.mozilla.gecko.preferences.LocaleListPreference
            android:key="locale"
            android:persistent="true"
            android:defaultValue=""
        />
    </PreferenceCategory>
</PreferenceScreen>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                  android:title="@string/pref_category_privacy_short"
                  android:enabled="false">

    <CheckBoxPreference android:key="privacy.trackingprotection.enabled"
                        android:title="@string/pref_tracking_protection_title"
                        android:summary="@string/pref_tracking_protection_summary"
                        android:persistent="false" />

    <org.mozilla.gecko.preferences.AlignRightLinkPreference
            android:key="android.not_a_preference.trackingprotection.learn_more"
            android:title="@string/pref_learn_more"
            android:persistent="false"
            url="https://support.mozilla.org/kb/firefox-android-tracking-protection" />

    <CheckBoxPreference android:key="privacy.donottrackheader.enabled"
                        android:title="@string/pref_donottrack_title"
                        android:summary="@string/pref_donottrack_summary"
                        android:persistent="false" />

    <org.mozilla.gecko.preferences.AlignRightLinkPreference
            android:key="android.not_a_preference.donottrackheader.learn_more"
            android:title="@string/pref_learn_more"
            android:persistent="false"
            url="https://www.mozilla.org/firefox/dnt/" />

    <ListPreference android:key="network.cookie.cookieBehavior"
                    android:title="@string/pref_cookies_menu"
                    android:entries="@array/pref_cookies_entries"
                    android:entryValues="@array/pref_cookies_values"
                    android:persistent="false" />

    <CheckBoxPreference android:key="signon.rememberSignons"
                        android:title="@string/pref_remember_signons"
                        android:persistent="false" />

    <CheckBoxPreference android:key="privacy.masterpassword.enabled"
                        android:title="@string/pref_use_master_password"
                        android:persistent="false" />

    <!-- keys prefixed with "android.not_a_preference." are not synced with Gecko -->
    <PreferenceCategory android:title="@string/pref_clear_private_data_category">

        <org.mozilla.gecko.preferences.PrivateDataPreference
                            android:key="android.not_a_preference.privacy.clear"
                            android:title="@string/pref_clear_private_data"
                            android:persistent="true"
                            android:positiveButtonText="@string/button_clear_data"
                            gecko:entries="@array/pref_private_data_entries"
                            gecko:entryValues="@array/pref_private_data_values"
                            gecko:entryKeys="@array/pref_private_data_keys"
                            gecko:initialValues="@array/pref_private_data_defaults" />

        <!-- This pref is persisted in both Gecko and Java -->
        <org.mozilla.gecko.preferences.ListCheckboxPreference
                            android:key="android.not_a_preference.history.clear_on_exit"
                            gecko:entries="@array/pref_private_data_entries"
                            gecko:entryValues="@array/pref_private_data_values"
                            gecko:initialValues="@array/pref_clear_on_exit_defaults"

                            android:title="@string/pref_clear_on_exit_title"
                            android:summary="@string/pref_clear_on_exit_summary2"

                            android:dialogTitle="@string/pref_clear_on_exit_dialog_title"
                            android:positiveButtonText="@string/button_set"/>

    </PreferenceCategory>

</PreferenceScreen>


<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<menu xmlns:android="http://schemas.android.com/apk/res/android">
	<item android:id="@+id/restore_defaults"
	      android:drawable="@drawable/menu"
	      android:showAsAction="never"
	      android:title="@string/pref_search_restore_defaults" />
</menu>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                  android:title="@string/pref_category_search"
                  android:enabled="false">

    <CheckBoxPreference android:key="browser.search.suggest.enabled"
                        android:title="@string/pref_search_suggestions"
                        android:defaultValue="false"
                        android:persistent="false" />

    <org.mozilla.gecko.preferences.SearchPreferenceCategory
                        android:title="@string/pref_category_installed_search_engines"/>

    <PreferenceCategory android:title="@string/pref_category_add_search_providers">

        <org.mozilla.gecko.preferences.ModifiableHintPreference
                    android:layout="@layout/preference_search_tip"
                    android:enabled="false"
                    android:selectable="false"/>

    </PreferenceCategory>

</PreferenceScreen>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                  xmlns:gecko="http://schemas.android.com/apk/res-auto"
                  android:title="@string/pref_category_vendor"
                  android:enabled="false">

    <org.mozilla.gecko.preferences.LinkPreference android:key="android.not_a_preference.about.link"
                                                  android:title="@string/pref_about_firefox"
                                                  android:persistent="false"
                                                  url="about:" />

    <org.mozilla.gecko.preferences.LinkPreference android:key="android.not_a_preference.faq.link"
                                                  android:title="@string/pref_vendor_faqs"
                                                  android:persistent="false"
                                                  url="https://support.mozilla.org/kb/firefox-android-faq"/>

    <org.mozilla.gecko.preferences.LinkPreference android:key="android.not_a_preference.feedback.link"
                                                  android:title="@string/pref_vendor_feedback"
                                                  android:persistent="false"
                                                  url="about:feedback" />

    <PreferenceCategory android:key="android.not_a_preference.datareporting.preferences"
                        android:title="@string/pref_category_datareporting">

        <CheckBoxPreference android:key="toolkit.telemetry.enabled"
                            android:title="@string/datareporting_telemetry_title"
                            android:summary="@string/datareporting_telemetry_summary" />

        <CheckBoxPreference android:key="datareporting.crashreporter.submitEnabled"
                            android:title="@string/datareporting_crashreporter_title_short"
                            android:summary="@string/datareporting_crashreporter_summary"
                            android:defaultValue="false" />

        <CheckBoxPreference android:key="android.not_a_preference.app.geo.reportdata"
                            android:title="@string/datareporting_wifi_title"
                            android:summary="@string/datareporting_wifi_geolocation_summary" />

        <org.mozilla.gecko.preferences.AlignRightLinkPreference android:key="android.not_a_preference.geo.learn_more"
                                                                android:title="@string/pref_learn_more"
                                                                android:persistent="false"
                                                                url="https://location.services.mozilla.com/" />

        <CheckBoxPreference android:key="android.not_a_preference.healthreport.uploadEnabled"
                            android:title="@string/datareporting_fhr_title"
                            android:summary="@string/datareporting_fhr_summary2"
                            android:defaultValue="true" />

        <org.mozilla.gecko.preferences.AlignRightLinkPreference android:key="android.not_a_preference.healthreport.link"
                                                                android:title="@string/datareporting_abouthr_title"
                                                                android:persistent="false"
                                                                url="about:healthreport" />

    </PreferenceCategory>

</PreferenceScreen>
<?xml version="1.0"?>

<!DOCTYPE bindings [
  <!ENTITY % preferencesDTD SYSTEM "chrome://global/locale/preferences.dtd">
  %preferencesDTD;
  <!ENTITY % globalKeysDTD SYSTEM "chrome://global/locale/globalKeys.dtd">
  %globalKeysDTD;
]>

<bindings id="preferencesBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xbl="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

#
# = Preferences Window Framework
#
#   The syntax for use looks something like:
#
#   <prefwindow>
#     <prefpane id="prefPaneA">
#       <preferences>
#         <preference id="preference1" name="app.preference1" type="bool" onchange="foo();"/>
#         <preference id="preference2" name="app.preference2" type="bool" useDefault="true"/>
#       </preferences>
#       <checkbox label="Preference" preference="preference1"/>
#     </prefpane>
#   </prefwindow>
#

  <binding id="preferences">
    <implementation implements="nsIObserver">
      <method name="_constructAfterChildren">
      <body>
      <![CDATA[
      // This method will be called after each one of the child
      // <preference> elements is constructed. Its purpose is to propagate
      // the values to the associated form elements

      var elements = this.getElementsByTagName("preference");
      for (let element of elements) {
        if (!element._constructed) {
          return;
        }
      }
      for (let element of elements) {
        element.updateElements();
      }
      ]]>
      </body>
      </method>
      <method name="observe">
        <parameter name="aSubject"/>
        <parameter name="aTopic"/>
        <parameter name="aData"/>
        <body>
        <![CDATA[
          for (var i = 0; i < this.childNodes.length; ++i) {
            var preference = this.childNodes[i];
            if (preference.name == aData) {
              preference.value = preference.valueFromPreferences;
            }
          }
        ]]>
        </body>
      </method>
      
      <method name="fireChangedEvent">
        <parameter name="aPreference"/>
        <body>
        <![CDATA[
          // Value changed, synthesize an event
          try {
            var event = document.createEvent("Events");
            event.initEvent("change", true, true);
            aPreference.dispatchEvent(event);
          }
          catch (e) {
            Components.utils.reportError(e);
          }
        ]]>
        </body>
      </method>
      
      <field name="service">
        Components.classes["@mozilla.org/preferences-service;1"]
                  .getService(Components.interfaces.nsIPrefService);
      </field>
      <field name="rootBranch">
        Components.classes["@mozilla.org/preferences-service;1"]
                  .getService(Components.interfaces.nsIPrefBranch);
      </field>
      <field name="defaultBranch">
        this.service.getDefaultBranch("");
      </field>
      <field name="rootBranchInternal">
        Components.classes["@mozilla.org/preferences-service;1"]
                  .getService(Components.interfaces.nsIPrefBranchInternal);
      </field>
      <property name="type" readonly="true">
        <getter>
          <![CDATA[
            return document.documentElement.type || "";
          ]]>
        </getter>
      </property>
      <property name="instantApply" readonly="true">
        <getter>
          <![CDATA[
            var doc = document.documentElement;
            return this.type == "child" ? doc.instantApply
                                        : doc.instantApply || this.rootBranch.getBoolPref("browser.preferences.instantApply");
          ]]>
        </getter>
      </property>
    </implementation>
  </binding>

  <binding id="preference">
    <implementation>
      <constructor>
      <![CDATA[
        this._constructed = true;

        // if the element has been inserted without the name attribute set,
        // we have nothing to do here
        if (!this.name)
          return;

        this.preferences.rootBranchInternal
            .addObserver(this.name, this.preferences, false);
        // In non-instant apply mode, we must try and use the last saved state
        // from any previous opens of a child dialog instead of the value from
        // preferences, to pick up any edits a user may have made. 
        if (this.preferences.type == "child" && 
            !this.instantApply && window.opener) {
          var pdoc = window.opener.document;

          // Try to find a preference element for the same preference.
          var preference = null;
          var parentPreferences = pdoc.getElementsByTagName("preferences");
          for (var k = 0; (k < parentPreferences.length && !preference); ++k) {
            var parentPrefs = parentPreferences[k]
                                    .getElementsByAttribute("name", this.name);
            for (var l = 0; (l < parentPrefs.length && !preference); ++l) {
              if (parentPrefs[l].localName == "preference")
                preference = parentPrefs[l];
            }
          }

          // Don't use the value setter here, we don't want updateElements to be prematurely fired.
          this._value = preference ? preference.value : this.valueFromPreferences;
        }
        else
          this._value = this.valueFromPreferences;
        this.preferences._constructAfterChildren();
      ]]>
      </constructor>
      <destructor>
        this.preferences.rootBranchInternal
            .removeObserver(this.name, this.preferences);
      </destructor>
      <field name="_constructed">false</field>
      <property name="instantApply">
        <getter>
          return this.getAttribute("instantApply") == "true" || this.preferences.instantApply;
        </getter>
      </property>

      <property name="preferences" onget="return this.parentNode"/>
      <property name="name" onget="return this.getAttribute('name');">
        <setter>
          if (val == this.name)
            return val;
            
          this.preferences.rootBranchInternal
              .removeObserver(this.name, this.preferences);
          this.setAttribute('name', val);
          this.preferences.rootBranchInternal
              .addObserver(val, this.preferences, false);
              
          return val;
        </setter>
      </property>
      <property name="type" onget="return this.getAttribute('type');"
                            onset="this.setAttribute('type', val); return val;"/>
      <property name="inverted" onget="return this.getAttribute('inverted') == 'true';"
                                onset="this.setAttribute('inverted', val); return val;"/>
      <property name="readonly" onget="return this.getAttribute('readonly') == 'true';"
                                onset="this.setAttribute('readonly', val); return val;"/>

      <field name="_value">null</field>
      <method name="_setValue">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          if (this.value !== aValue) {
            this._value = aValue;
            if (this.instantApply)
              this.valueFromPreferences = aValue;
            this.preferences.fireChangedEvent(this);
          }
          return aValue;
        ]]>
        </body>
      </method>
      <property name="value" onget="return this._value" onset="return this._setValue(val);"/>
      
      <property name="locked">
        <getter>
          return this.preferences.rootBranch.prefIsLocked(this.name);
        </getter>
      </property>
      
      <property name="disabled">
        <getter>
          return this.getAttribute("disabled") == "true";
        </getter>
        <setter>
        <![CDATA[
          if (val) 
            this.setAttribute("disabled", "true");
          else
            this.removeAttribute("disabled");

          if (!this.id)
            return val;

          var elements = document.getElementsByAttribute("preference", this.id);
          for (var i = 0; i < elements.length; ++i) {
            elements[i].disabled = val;
            
            var labels = document.getElementsByAttribute("control", elements[i].id);
            for (var j = 0; j < labels.length; ++j)
              labels[j].disabled = val;
          }
            
          return val;
        ]]>
        </setter>
      </property>
      
      <property name="tabIndex">
        <getter>
          return parseInt(this.getAttribute("tabindex"));
        </getter>
        <setter>
        <![CDATA[
          if (val) 
            this.setAttribute("tabindex", val);
          else
            this.removeAttribute("tabindex");

          if (!this.id)
            return val;

          var elements = document.getElementsByAttribute("preference", this.id);
          for (var i = 0; i < elements.length; ++i) {
            elements[i].tabIndex = val;
            
            var labels = document.getElementsByAttribute("control", elements[i].id);
            for (var j = 0; j < labels.length; ++j)
              labels[j].tabIndex = val;
          }
            
          return val;
        ]]>
        </setter>
      </property>

      <property name="hasUserValue">
        <getter>
        <![CDATA[
          return this.preferences.rootBranch.prefHasUserValue(this.name) &&
                 this.value !== undefined;
        ]]>
        </getter>
      </property>
      
      <method name="reset">
        <body>
          // defer reset until preference update
          this.value = undefined;
        </body>
      </method>

      <field name="_useDefault">false</field>      
      <property name="defaultValue">
        <getter>
        <![CDATA[
          this._useDefault = true;
          var val = this.valueFromPreferences;
          this._useDefault = false;
          return val;
        ]]>
        </getter>
      </property>
      
      <property name="_branch">
        <getter>
          return this._useDefault ? this.preferences.defaultBranch : this.preferences.rootBranch;
        </getter>
      </property>
      
      <field name="batching">false</field>
      
      <method name="_reportUnknownType">
        <body>
        <![CDATA[
          var consoleService = Components.classes["@mozilla.org/consoleservice;1"]
                                         .getService(Components.interfaces.nsIConsoleService);
          var msg = "<preference> with id='" + this.id + "' and name='" + 
                    this.name + "' has unknown type '" + this.type + "'.";
          consoleService.logStringMessage(msg);
        ]]>
        </body>
      </method>
      
      <property name="valueFromPreferences">
        <getter>
        <![CDATA[
          try {
            // Force a resync of value with preferences.
            switch (this.type) {
            case "int":
              return this._branch.getIntPref(this.name);
            case "bool":
              var val = this._branch.getBoolPref(this.name);
              return this.inverted ? !val : val;
            case "wstring":
              return this._branch
                         .getComplexValue(this.name, Components.interfaces.nsIPrefLocalizedString)
                         .data;
            case "string":
            case "unichar":
              return this._branch
                         .getComplexValue(this.name, Components.interfaces.nsISupportsString)
                         .data;
            case "fontname":
              var family = this._branch
                               .getComplexValue(this.name, Components.interfaces.nsISupportsString)
                               .data;
              var fontEnumerator = Components.classes["@mozilla.org/gfx/fontenumerator;1"]
                                             .createInstance(Components.interfaces.nsIFontEnumerator);
              return fontEnumerator.getStandardFamilyName(family);
            case "file":
              var f = this._branch
                          .getComplexValue(this.name, Components.interfaces.nsILocalFile);
              return f;
            default:
              this._reportUnknownType();
            }
          }
          catch (e) { }
          return null;
        ]]>
        </getter>
        <setter>
        <![CDATA[
          // Exit early if nothing to do.
          if (this.readonly || this.valueFromPreferences == val)
            return val;

          // The special value undefined means 'reset preference to default'.
          if (val === undefined) {
            this.preferences.rootBranch.clearUserPref(this.name);
            return val;
          }

          // Force a resync of preferences with value.
          switch (this.type) {
          case "int":
            this.preferences.rootBranch.setIntPref(this.name, val);
            break;
          case "bool":
            this.preferences.rootBranch.setBoolPref(this.name, this.inverted ? !val : val);
            break;
          case "wstring":
            var pls = Components.classes["@mozilla.org/pref-localizedstring;1"]
                                .createInstance(Components.interfaces.nsIPrefLocalizedString);
            pls.data = val;
            this.preferences.rootBranch
                .setComplexValue(this.name, Components.interfaces.nsIPrefLocalizedString, pls);
            break;
          case "string":
          case "unichar":
          case "fontname":
            var iss = Components.classes["@mozilla.org/supports-string;1"]
                                .createInstance(Components.interfaces.nsISupportsString);
            iss.data = val;
            this.preferences.rootBranch
                .setComplexValue(this.name, Components.interfaces.nsISupportsString, iss);
            break;
          case "file":
            var lf;
            if (typeof(val) == "string") {
              lf = Components.classes["@mozilla.org/file/local;1"]
                             .createInstance(Components.interfaces.nsILocalFile);
              lf.persistentDescriptor = val;
              if (!lf.exists())
                lf.initWithPath(val);
            }
            else 
              lf = val.QueryInterface(Components.interfaces.nsILocalFile);
            this.preferences.rootBranch
                .setComplexValue(this.name, Components.interfaces.nsILocalFile, lf);
            break;
          default:
            this._reportUnknownType();
          }
          if (!this.batching)
            this.preferences.service.savePrefFile(null);
          return val;
        ]]>
        </setter>
      </property>
      
      <method name="setElementValue">
        <parameter name="aElement"/>
        <body>
        <![CDATA[
          if (this.locked)
            aElement.disabled = true;

          if (!this.isElementEditable(aElement))
            return;

          var rv = undefined;
          if (aElement.hasAttribute("onsyncfrompreference")) {
            // Value changed, synthesize an event
            try {
              var event = document.createEvent("Events");
              event.initEvent("syncfrompreference", true, true);
              var f = new Function ("event", 
                                    aElement.getAttribute("onsyncfrompreference"));
              rv = f.call(aElement, event);
            }
            catch (e) {
              Components.utils.reportError(e);
            }
          }
          var val = rv !== undefined ? rv : (this.instantApply ? this.valueFromPreferences : this.value);
          // if the preference is marked for reset, show default value in UI
          if (val === undefined)
            val = this.defaultValue;

          /**
           * Initialize a UI element property with a value. Handles the case 
           * where an element has not yet had a XBL binding attached for it and
           * the property setter does not yet exist by setting the same attribute
           * on the XUL element using DOM apis and assuming the element's 
           * constructor or property getters appropriately handle this state. 
           */
          function setValue(element, attribute, value) {
            if (attribute in element) 
              element[attribute] = value;
            else
              element.setAttribute(attribute, value);
          }
          if (aElement.localName == "checkbox" ||
              aElement.localName == "listitem")
            setValue(aElement, "checked", val);
          else if (aElement.localName == "colorpicker")
            setValue(aElement, "color", val);
          else if (aElement.localName == "textbox") {
            // XXXmano Bug 303998: Avoid a caret placement issue if either the
            // preference observer or its setter calls updateElements as a result
            // of the input event handler.
            if (aElement.value !== val)
              setValue(aElement, "value", val);
          }
          else
            setValue(aElement, "value", val);
        ]]>
        </body>
      </method>

      <method name="getElementValue">
        <parameter name="aElement"/>
        <body>
        <![CDATA[
          if (aElement.hasAttribute("onsynctopreference")) {
            // Value changed, synthesize an event
            try {
              var event = document.createEvent("Events");
              event.initEvent("synctopreference", true, true);
              var f = new Function ("event", 
                                    aElement.getAttribute("onsynctopreference"));
              var rv = f.call(aElement, event);
              if (rv !== undefined) 
                return rv;
            }
            catch (e) {
              Components.utils.reportError(e);
            }
          }
          
          /**
           * Read the value of an attribute from an element, assuming the 
           * attribute is a property on the element's node API. If the property
           * is not present in the API, then assume its value is contained in
           * an attribute, as is the case before a binding has been attached.
           */
          function getValue(element, attribute) {
            if (attribute in element)
              return element[attribute];
            return element.getAttribute(attribute);
          }
          if (aElement.localName == "checkbox" ||
              aElement.localName == "listitem")
            var value = getValue(aElement, "checked");
          else if (aElement.localName == "colorpicker")
            value = getValue(aElement, "color");
          else
            value = getValue(aElement, "value");

          switch (this.type) {
          case "int":
            return parseInt(value, 10) || 0;
          case "bool":
            return typeof(value) == "boolean" ? value : value == "true";
          }
          return value;
        ]]>
        </body>
      </method>
      
      <method name="isElementEditable">
        <parameter name="aElement"/>
        <body>
        <![CDATA[
          switch (aElement.localName) {
          case "checkbox":
          case "colorpicker":
          case "radiogroup":
          case "textbox":
          case "listitem":
          case "listbox":
          case "menulist":
            return true;
          }
          return aElement.getAttribute("preference-editable") == "true";
        ]]> 
        </body>
      </method>
      
      <method name="updateElements">
        <body>
        <![CDATA[
          if (!this.id)
            return;

          // This "change" event handler tracks changes made to preferences by 
          // sources other than the user in this window. 
          var elements = document.getElementsByAttribute("preference", this.id);
          for (var i = 0; i < elements.length; ++i) 
            this.setElementValue(elements[i]);
        ]]>
        </body>
      </method>
    </implementation>
    
    <handlers>
      <handler event="change">
        this.updateElements();
      </handler>
    </handlers>
  </binding>

  <binding id="prefwindow"
           extends="chrome://global/content/bindings/dialog.xml#dialog">
    <resources>
      <stylesheet src="chrome://global/skin/preferences.css"/>
    </resources>
    <content dlgbuttons="accept,cancel" persist="lastSelected screenX screenY"
             closebuttonlabel="&preferencesCloseButton.label;"
             closebuttonaccesskey="&preferencesCloseButton.accesskey;"
             role="dialog"
#ifdef XP_WIN
             title="&preferencesDefaultTitleWin.title;">
#else
             title="&preferencesDefaultTitleMac.title;">
#endif
      <xul:windowdragbox orient="vertical">
        <xul:radiogroup anonid="selector" orient="horizontal" class="paneSelector chromeclass-toolbar"
                        role="listbox"/> <!-- Expose to accessibility APIs as a listbox -->
      </xul:windowdragbox>
      <xul:hbox flex="1" class="paneDeckContainer">
        <xul:deck anonid="paneDeck" flex="1">
          <children includes="prefpane"/>
        </xul:deck>
      </xul:hbox>
      <xul:hbox anonid="dlg-buttons" class="prefWindow-dlgbuttons" pack="end">
#ifdef XP_UNIX
        <xul:button dlgtype="disclosure" class="dialog-button" hidden="true"/>
        <xul:button dlgtype="help" class="dialog-button" hidden="true" icon="help"/>
        <xul:button dlgtype="extra2" class="dialog-button" hidden="true"/>
        <xul:button dlgtype="extra1" class="dialog-button" hidden="true"/>
        <xul:spacer anonid="spacer" flex="1"/>
        <xul:button dlgtype="cancel" class="dialog-button" icon="cancel"/>
        <xul:button dlgtype="accept" class="dialog-button" icon="accept"/>
#else
        <xul:button dlgtype="extra2" class="dialog-button" hidden="true"/>
        <xul:spacer anonid="spacer" flex="1"/>
        <xul:button dlgtype="accept" class="dialog-button" icon="accept"/>
        <xul:button dlgtype="extra1" class="dialog-button" hidden="true"/>
        <xul:button dlgtype="cancel" class="dialog-button" icon="cancel"/>
        <xul:button dlgtype="help" class="dialog-button" hidden="true" icon="help"/>
        <xul:button dlgtype="disclosure" class="dialog-button" hidden="true"/>
#endif
      </xul:hbox>
      <xul:hbox>
        <children/>
      </xul:hbox>
    </content>
    <implementation implements="nsITimerCallback">
      <constructor>
      <![CDATA[
        if (this.type != "child") {
          var psvc = Components.classes["@mozilla.org/preferences-service;1"]
                               .getService(Components.interfaces.nsIPrefBranch);
          this.instantApply = psvc.getBoolPref("browser.preferences.instantApply");
          if (this.instantApply) {
            var docElt = document.documentElement;
            var acceptButton = docElt.getButton("accept");
            acceptButton.hidden = true;
            var cancelButton  = docElt.getButton("cancel");
#ifdef XP_MACOSX
            // no buttons on Mac except Help
            cancelButton.hidden = true;
            // Move Help button to the end
            document.getAnonymousElementByAttribute(this, "anonid", "spacer").hidden = true;         
            // Also, don't fire onDialogAccept on enter
            acceptButton.disabled = true;
#else
            // morph the Cancel button into the Close button
            cancelButton.setAttribute ("icon", "close");
            cancelButton.label = docElt.getAttribute("closebuttonlabel");
            cancelButton.accesskey = docElt.getAttribute("closebuttonaccesskey");
#endif
          }
        }
        this.setAttribute("animated", this._shouldAnimate ? "true" : "false");
        var panes = this.preferencePanes;

        var lastPane = null;
        if (this.lastSelected) {
          lastPane = document.getElementById(this.lastSelected);
          if (!lastPane) {
            this.lastSelected = "";
          }
        }

        var paneToLoad;
        if ("arguments" in window && window.arguments[0] && document.getElementById(window.arguments[0]) && document.getElementById(window.arguments[0]).nodeName == "prefpane") {
          paneToLoad = document.getElementById(window.arguments[0]);
          this.lastSelected = paneToLoad.id;
        }
        else if (lastPane)
          paneToLoad = lastPane;
        else
          paneToLoad = panes[0];

        for (var i = 0; i < panes.length; ++i) {
          this._makePaneButton(panes[i]);
          if (panes[i].loaded) {
            // Inline pane content, fire load event to force initialization.
            this._fireEvent("paneload", panes[i]);
          }
        }
        this.showPane(paneToLoad);

        if (panes.length == 1)
          this._selector.setAttribute("collapsed", "true");
      ]]>
      </constructor>

      <destructor>
      <![CDATA[
        // Release timers to avoid reference cycles.
        if (this._animateTimer) {
          this._animateTimer.cancel();
          this._animateTimer = null;
        }
        if (this._fadeTimer) {
          this._fadeTimer.cancel();
          this._fadeTimer = null;
        }
      ]]>
      </destructor>

      <field name="instantApply">false</field>
      
      <property name="preferencePanes"
                onget="return this.getElementsByTagName('prefpane');"/>

      <property name="type" onget="return this.getAttribute('type');"/>
      <property name="_paneDeck"
                onget="return document.getAnonymousElementByAttribute(this, 'anonid', 'paneDeck');"/>
      <property name="_paneDeckContainer"
                onget="return document.getAnonymousElementByAttribute(this, 'class', 'paneDeckContainer');"/>
      <property name="_selector"
                onget="return document.getAnonymousElementByAttribute(this, 'anonid', 'selector');"/>
      <property name="lastSelected" 
                onget="return this.getAttribute('lastSelected');">
        <setter>
          this.setAttribute("lastSelected", val); 
          document.persist(this.id, "lastSelected");
          return val;
        </setter>          
      </property>
      <property name="currentPane"
                onset="return this._currentPane = val;">
        <getter>
          if (!this._currentPane)
            this._currentPane = this.preferencePanes[0];
          
          return this._currentPane;
        </getter> 
      </property>
      <field name="_currentPane">null</field>
      
      
      <method name="_makePaneButton">
        <parameter name="aPaneElement"/>
        <body>
        <![CDATA[
          var radio = document.createElement("radio");
          radio.setAttribute("pane", aPaneElement.id);
          radio.setAttribute("label", aPaneElement.label);
          // Expose preference group choice to accessibility APIs as an unchecked list item
          // The parent group is exposed to accessibility APIs as a list
          if (aPaneElement.image)
            radio.setAttribute("src", aPaneElement.image);
          radio.style.listStyleImage = aPaneElement.style.listStyleImage;
          this._selector.appendChild(radio);
          return radio;
        ]]>
        </body>
      </method>

      <method name="showPane">
        <parameter name="aPaneElement"/>
        <body>
        <![CDATA[
          if (!aPaneElement)
            return;

          this._selector.selectedItem = document.getAnonymousElementByAttribute(this, "pane", aPaneElement.id);
          if (!aPaneElement.loaded) {
            let OverlayLoadObserver = function(aPane)
            {
              this._pane = aPane;
            }
            OverlayLoadObserver.prototype = { 
              _outer: this,
              observe: function (aSubject, aTopic, aData) 
              {
                this._pane.loaded = true;
                this._outer._fireEvent("paneload", this._pane);
                this._outer._selectPane(this._pane);
              }
            };
            
            var obs = new OverlayLoadObserver(aPaneElement);
            document.loadOverlay(aPaneElement.src, obs);
          }
          else
            this._selectPane(aPaneElement);
        ]]>
        </body>
      </method>
      
      <method name="_fireEvent">
        <parameter name="aEventName"/>
        <parameter name="aTarget"/>
        <body>
        <![CDATA[
          // Panel loaded, synthesize a load event. 
          try {
            var event = document.createEvent("Events");
            event.initEvent(aEventName, true, true);
            var cancel = !aTarget.dispatchEvent(event);
            if (aTarget.hasAttribute("on" + aEventName)) {
              var fn = new Function ("event", aTarget.getAttribute("on" + aEventName));
              var rv = fn.call(aTarget, event);
              if (rv == false)
                cancel = true;
            }
            return !cancel;  
          }
          catch (e) { 
            Components.utils.reportError(e);
          }
          return false;
        ]]>
        </body>
      </method>
      
      <field name="_initialized">false</field>
      <method name="_selectPane">
        <parameter name="aPaneElement"/>
        <body>
        <![CDATA[
#ifdef XP_MACOSX
          var paneTitle = aPaneElement.label;
          if (paneTitle != "")
            document.title = paneTitle;
#endif
          var helpButton = document.documentElement.getButton("help");
          if (aPaneElement.helpTopic)
            helpButton.hidden = false;
          else
            helpButton.hidden = true;

          // Find this pane's index in the deck and set the deck's 
          // selectedIndex to that value to switch to it.
          var prefpanes = this.preferencePanes;
          for (var i = 0; i < prefpanes.length; ++i) {
            if (prefpanes[i] == aPaneElement) {
              this._paneDeck.selectedIndex = i;
              
              if (this.type != "child") {
                if (aPaneElement.hasAttribute("flex") && this._shouldAnimate &&
                    prefpanes.length > 1)
                  aPaneElement.removeAttribute("flex");
                // Calling sizeToContent after the first prefpane is loaded
                // will size the windows contents so style information is
                // available to calculate correct sizing.
                if (!this._initialized && prefpanes.length > 1) {
                  if (this._shouldAnimate)
                    this.style.minHeight = 0;
                  window.sizeToContent();
                }

                var oldPane = this.lastSelected ? document.getElementById(this.lastSelected) : this.preferencePanes[0];
                oldPane.selected = !(aPaneElement.selected = true);
                this.lastSelected = aPaneElement.id;
                this.currentPane = aPaneElement;
                this._initialized = true;

                // Only animate if we've switched between prefpanes
                if (this._shouldAnimate && oldPane.id != aPaneElement.id) {
                  aPaneElement.style.opacity = 0.0;
                  this.animate(oldPane, aPaneElement);
                }
                else if (!this._shouldAnimate && prefpanes.length > 1) {
                  var targetHeight = parseInt(window.getComputedStyle(this._paneDeckContainer, "").height);
                  var verticalPadding = parseInt(window.getComputedStyle(aPaneElement, "").paddingTop);
                  verticalPadding += parseInt(window.getComputedStyle(aPaneElement, "").paddingBottom);
                  if (aPaneElement.contentHeight > targetHeight - verticalPadding) {
                    // To workaround the bottom border of a groupbox from being
                    // cutoff an hbox with a class of bottomBox may enclose it.
                    // This needs to include its padding to resize properly.
                    // See bug 394433
                    var bottomPadding = 0;
                    var bottomBox = aPaneElement.getElementsByAttribute("class", "bottomBox")[0];
                    if (bottomBox)
                      bottomPadding = parseInt(window.getComputedStyle(bottomBox, "").paddingBottom);
                    window.innerHeight += bottomPadding + verticalPadding + aPaneElement.contentHeight - targetHeight;
                  }

                  // XXX rstrong - extend the contents of the prefpane to
                  // prevent elements from being cutoff (see bug 349098).
                  if (aPaneElement.contentHeight + verticalPadding < targetHeight)
                    aPaneElement._content.style.height = targetHeight - verticalPadding + "px";
                }
              }
              break;
            }
          }
        ]]>
        </body>
      </method>
      
      <property name="_shouldAnimate">
        <getter>
        <![CDATA[
          var psvc = Components.classes["@mozilla.org/preferences-service;1"]
                               .getService(Components.interfaces.nsIPrefBranch);
#ifdef XP_MACOSX
          var animate = true;
#else
          var animate = false;
#endif
          try {
            animate = psvc.getBoolPref("browser.preferences.animateFadeIn");
          }
          catch (e) { }
          return animate;
        ]]>
        </getter>
      </property>
      
      <method name="animate">
        <parameter name="aOldPane"/>
        <parameter name="aNewPane"/>
        <body>
        <![CDATA[
          // if we are already resizing, use currentHeight
          var oldHeight = this._currentHeight ? this._currentHeight : aOldPane.contentHeight;
          
          this._multiplier = aNewPane.contentHeight > oldHeight ? 1 : -1;
          var sizeDelta = Math.abs(oldHeight - aNewPane.contentHeight);
          this._animateRemainder = sizeDelta % this._animateIncrement;

          this._setUpAnimationTimer(oldHeight);
        ]]>
        </body>
      </method>
      
      <property name="_sizeIncrement">
        <getter>
        <![CDATA[
          var lastSelectedPane = document.getElementById(this.lastSelected);
          var increment = this._animateIncrement * this._multiplier;
          var newHeight = this._currentHeight + increment;
          if ((this._multiplier > 0 && this._currentHeight >= lastSelectedPane.contentHeight) ||
              (this._multiplier < 0 && this._currentHeight <= lastSelectedPane.contentHeight))
            return 0;
          
          if ((this._multiplier > 0 && newHeight > lastSelectedPane.contentHeight) ||
              (this._multiplier < 0 && newHeight < lastSelectedPane.contentHeight))
            increment = this._animateRemainder * this._multiplier;
          return increment;
        ]]>
        </getter>
      </property>
      
      <method name="notify">
        <parameter name="aTimer"/>
        <body>
        <![CDATA[
          if (!document)
            aTimer.cancel();
          
          if (aTimer == this._animateTimer) {
            var increment = this._sizeIncrement;
            if (increment != 0) {
              window.innerHeight += increment;
              this._currentHeight += increment;
            }
            else {
              aTimer.cancel();
              this._setUpFadeTimer();
            }
          } else if (aTimer == this._fadeTimer) {
            var elt = document.getElementById(this.lastSelected);
            var newOpacity = parseFloat(window.getComputedStyle(elt, "").opacity) + this._fadeIncrement;
            if (newOpacity < 1.0)
              elt.style.opacity = newOpacity;
            else {
              aTimer.cancel();
              elt.style.opacity = 1.0;
            }
          }
        ]]>
        </body>
      </method>
      
      <method name="_setUpAnimationTimer">
        <parameter name="aStartHeight"/>
        <body>
        <![CDATA[
          if (!this._animateTimer) 
            this._animateTimer = Components.classes["@mozilla.org/timer;1"]
                                           .createInstance(Components.interfaces.nsITimer);
          else
            this._animateTimer.cancel();
          this._currentHeight = aStartHeight;
          
          this._animateTimer.initWithCallback(this, this._animateDelay, 
                                              Components.interfaces.nsITimer.TYPE_REPEATING_SLACK);
        ]]>
        </body>
      </method>
      
      <method name="_setUpFadeTimer">
        <body>
        <![CDATA[
          if (!this._fadeTimer) 
            this._fadeTimer = Components.classes["@mozilla.org/timer;1"]
                                        .createInstance(Components.interfaces.nsITimer);
          else
            this._fadeTimer.cancel();
          
          this._fadeTimer.initWithCallback(this, this._fadeDelay, 
                                           Components.interfaces.nsITimer.TYPE_REPEATING_SLACK);
        ]]>
        </body>
      </method>
      
      <field name="_animateTimer">null</field>
      <field name="_fadeTimer">null</field>
      <field name="_animateDelay">15</field>
      <field name="_animateIncrement">40</field>
      <field name="_fadeDelay">5</field>
      <field name="_fadeIncrement">0.40</field>
      <field name="_animateRemainder">0</field>
      <field name="_currentHeight">0</field>
      <field name="_multiplier">0</field>

      <method name="addPane">
        <parameter name="aPaneElement"/>
        <body>
        <![CDATA[
          this.appendChild(aPaneElement);
          
          // Set up pane button
          this._makePaneButton(aPaneElement);
        ]]>
        </body>
      </method>
      
      <method name="openSubDialog">
        <parameter name="aURL"/>
        <parameter name="aFeatures"/>
        <parameter name="aParams"/>
        <body>
          return openDialog(aURL, "", "modal,centerscreen,resizable=no" + (aFeatures != "" ? ("," + aFeatures) : ""), aParams);
        </body>
      </method>
      
      <method name="openWindow">
        <parameter name="aWindowType"/>
        <parameter name="aURL"/>
        <parameter name="aFeatures"/>
        <parameter name="aParams"/>
        <body>
        <![CDATA[
          var wm = Components.classes["@mozilla.org/appshell/window-mediator;1"]
                             .getService(Components.interfaces.nsIWindowMediator);
          var win = aWindowType ? wm.getMostRecentWindow(aWindowType) : null;
          if (win) {
            if ("initWithParams" in win)
              win.initWithParams(aParams);
            win.focus();
          }
          else {
            var features = "resizable,dialog=no,centerscreen" + (aFeatures != "" ? ("," + aFeatures) : "");
            var parentWindow = (this.instantApply || !window.opener || window.opener.closed) ? window : window.opener;
            win = parentWindow.openDialog(aURL, "_blank", features, aParams);
          }
          return win;
        ]]>
        </body>
      </method>
    </implementation>
    <handlers>
      <handler event="dialogaccept">
      <![CDATA[
        if (!this._fireEvent("beforeaccept", this)){
          return false;
        }

        if (this.type == "child" && window.opener) {
          var psvc = Components.classes["@mozilla.org/preferences-service;1"]
                               .getService(Components.interfaces.nsIPrefBranch);
          var instantApply = psvc.getBoolPref("browser.preferences.instantApply");
          if (instantApply) {
            var panes = this.preferencePanes;
            for (var i = 0; i < panes.length; ++i)
              panes[i].writePreferences(true);
          }
          else {
            // Clone all the preferences elements from the child document and
            // insert them into the pane collection of the parent. 
            var pdoc = window.opener.document;
            if (pdoc.documentElement.localName == "prefwindow") {
              var currentPane = pdoc.documentElement.currentPane;
              var id = window.location.href + "#childprefs";
              var childPrefs = pdoc.getElementById(id);
              if (!childPrefs) {
                var childPrefs = pdoc.createElement("preferences");
                currentPane.appendChild(childPrefs);
                childPrefs.id = id;
              }
              var panes = this.preferencePanes;
              for (var i = 0; i < panes.length; ++i) {
                var preferences = panes[i].preferences;
                for (var j = 0; j < preferences.length; ++j) {
                  // Try to find a preference element for the same preference.
                  var preference = null;
                  var parentPreferences = pdoc.getElementsByTagName("preferences");
                  for (var k = 0; (k < parentPreferences.length && !preference); ++k) {
                    var parentPrefs = parentPreferences[k]
                                         .getElementsByAttribute("name", preferences[j].name);
                    for (var l = 0; (l < parentPrefs.length && !preference); ++l) {
                      if (parentPrefs[l].localName == "preference")
                        preference = parentPrefs[l];
                    }
                  }
                  if (!preference) {
                    // No matching preference in the parent window.
                    preference = pdoc.createElement("preference");
                    childPrefs.appendChild(preference);
                    preference.name     = preferences[j].name;
                    preference.type     = preferences[j].type;
                    preference.inverted = preferences[j].inverted;
                    preference.readonly = preferences[j].readonly;
                    preference.disabled = preferences[j].disabled;
                  }
                  preference.value = preferences[j].value;
                }
              }
            }
          }
        }
        else {
          var panes = this.preferencePanes;
          for (var i = 0; i < panes.length; ++i)
            panes[i].writePreferences(false);

          var psvc = Components.classes["@mozilla.org/preferences-service;1"]
                               .getService(Components.interfaces.nsIPrefService);
          psvc.savePrefFile(null);
        }

        return true;
      ]]>
      </handler>
      <handler event="command">
        if (event.originalTarget.hasAttribute("pane")) {
          var pane = document.getElementById(event.originalTarget.getAttribute("pane"));
          this.showPane(pane);
        }
      </handler>

      <handler event="keypress" key="&windowClose.key;" modifiers="accel" phase="capturing">
      <![CDATA[
        if (this.instantApply)
          window.close();
        event.stopPropagation();
        event.preventDefault();
      ]]>
      </handler>

      <handler event="keypress"
#ifdef XP_MACOSX
               key="&openHelpMac.commandkey;" modifiers="accel"
#else
               keycode="&openHelp.commandkey;"
#endif
               phase="capturing">
      <![CDATA[
        var helpButton = this.getButton("help");
        if (helpButton.disabled || helpButton.hidden)
          return;
        this._fireEvent("dialoghelp", this);
        event.stopPropagation();
        event.preventDefault();
      ]]>
      </handler>
    </handlers>
  </binding>
  
  <binding id="prefpane">
    <resources>
      <stylesheet src="chrome://global/skin/preferences.css"/>
    </resources>
    <content>
      <xul:vbox class="content-box" xbl:inherits="flex">
        <children/>
      </xul:vbox>
    </content>
    <implementation>
      <method name="writePreferences">
        <parameter name="aFlushToDisk"/>
        <body>
        <![CDATA[
          // Write all values to preferences.
          var preferences = this.preferences;
          for (var i = 0; i < preferences.length; ++i) {
            var preference = preferences[i];
            preference.batching = true;
            preference.valueFromPreferences = preference.value;
            preference.batching = false;
          }
          if (aFlushToDisk) {
            var psvc = Components.classes["@mozilla.org/preferences-service;1"]
                                 .getService(Components.interfaces.nsIPrefService);
            psvc.savePrefFile(null);
          }
        ]]>
        </body>
      </method>
      
      <property name="src" 
                onget="return this.getAttribute('src');"
                onset="this.setAttribute('src', val); return val;"/>
      <property name="selected" 
                onget="return this.getAttribute('selected') == 'true';"
                onset="this.setAttribute('selected', val); return val;"/>
      <property name="image" 
                onget="return this.getAttribute('image');"
                onset="this.setAttribute('image', val); return val;"/>
      <property name="label" 
                onget="return this.getAttribute('label');"
                onset="this.setAttribute('label', val); return val;"/>
      
      <property name="preferenceElements"
                onget="return this.getElementsByAttribute('preference', '*');"/>
      <property name="preferences"
                onget="return this.getElementsByTagName('preference');"/>

      <property name="helpTopic">
        <getter>
        <![CDATA[
          // if there are tabs, and the selected tab provides a helpTopic, return that
          var box = this.getElementsByTagName("tabbox");
          if (box[0]) {
            var tab = box[0].selectedTab;
            if (tab && tab.hasAttribute("helpTopic"))
              return tab.getAttribute("helpTopic");
          }

          // otherwise, return the helpTopic of the current panel
          return this.getAttribute("helpTopic");
        ]]>
        </getter>
      </property>

      <field name="_loaded">false</field>
      <property name="loaded" 
                onget="return !this.src ? true : this._loaded;"
                onset="this._loaded = val; return val;"/>
      
      <method name="preferenceForElement">
        <parameter name="aElement"/>
        <body>
          return document.getElementById(aElement.getAttribute("preference"));
        </body>
      </method>
      
      <method name="getPreferenceElement">
        <parameter name="aStartElement"/>
        <body>
        <![CDATA[
          var temp = aStartElement;
          while (temp && temp.nodeType == Node.ELEMENT_NODE && 
                 !temp.hasAttribute("preference"))
            temp = temp.parentNode;
          return temp.nodeType == Node.ELEMENT_NODE ? temp : aStartElement;
        ]]>
        </body>
      </method>
      
      <method name="userChangedValue">
        <parameter name="aElement"/>
        <body>
        <![CDATA[
          var element = this.getPreferenceElement(aElement);
          if (element.hasAttribute("preference")) {
            var preference = document.getElementById(element.getAttribute("preference"));
            var prefVal = preference.getElementValue(element);
            preference.value = prefVal;
          }
        ]]>
        </body>
      </method>
      
      <property name="contentHeight">
        <getter>
          var targetHeight = parseInt(window.getComputedStyle(this._content, "").height);
          targetHeight += parseInt(window.getComputedStyle(this._content, "").marginTop);
          targetHeight += parseInt(window.getComputedStyle(this._content, "").marginBottom);
          return targetHeight;
        </getter>
      </property>
      <field name="_content">
        document.getAnonymousElementByAttribute(this, "class", "content-box");
      </field>
    </implementation>
    <handlers>
      <handler event="command">
        // This "command" event handler tracks changes made to preferences by 
        // the user in this window.
        if (event.sourceEvent)
          event = event.sourceEvent;
        this.userChangedValue(event.target);
      </handler>
      <handler event="select">
        // This "select" event handler tracks changes made to colorpicker 
        // preferences by the user in this window.
        if (event.target.localName == "colorpicker") 
          this.userChangedValue(event.target);
      </handler>
      <handler event="change">
        // This "change" event handler tracks changes made to preferences by 
        // the user in this window. 
        this.userChangedValue(event.target);
      </handler>
      <handler event="input">
        // This "input" event handler tracks changes made to preferences by 
        // the user in this window.
        this.userChangedValue(event.target);
      </handler>
      <handler event="paneload">
      <![CDATA[
        // Initialize all values from preferences.
        var elements = this.preferenceElements;
        for (var i = 0; i < elements.length; ++i) {
          try {
            var preference = this.preferenceForElement(elements[i]);
            preference.setElementValue(elements[i]);
          }
          catch (e) {
            dump("*** No preference found for " + elements[i].getAttribute("preference") + "\n");
          }
        }
      ]]>      
      </handler>
    </handlers>
  </binding>
          
  <binding id="panebutton" role="xul:listitem"
           extends="chrome://global/content/bindings/radio.xml#radio">
    <resources>
      <stylesheet src="chrome://global/skin/preferences.css"/>
    </resources>
    <content>
      <xul:image class="paneButtonIcon" xbl:inherits="src"/>
      <xul:label class="paneButtonLabel" xbl:inherits="value=label"/>
    </content>
  </binding>

</bindings>

# -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

#
# This is PrefWindow 6. The Code Could Well Be Ready, Are You?
#
#    Historical References:
#    PrefWindow V   (February 1, 2003)
#    PrefWindow IV  (April 24, 2000)
#    PrefWindow III (January 6, 2000)
#    PrefWindow II  (???)
#    PrefWindow I   (June 4, 1999)
#
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#prefixes"/>
  <link rel="match" href="reftest/ref-lime-1.xml"/>
  <title>CSS Namespaces Test Suite: prefix case-sensitivity</title>
  <style>
   @namespace Foo "y";
   @namespace foo "x";
   test { background:red }
   Foo|test { background:lime }
   foo|test { background:red }
   FOO|test { background:red }
  </style>
 </head>
 <body>
  <p><test xmlns="y">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#prefixes"/>
  <link rel="match" href="reftest/ref-lime-1.xml"/>
  <title>CSS Namespaces Test Suite: empty string prefix (Explicit element namespace)</title>
  <style>
   @namespace foo "";
   t { background:red }
   foo|t { background:lime }
  </style>
 </head>
 <body>
  <p><t xmlns="">This sentence should have a green background.</t></p>
 </body>
</html>
<root>
 <head xmlns="http://www.w3.org/1999/xhtml">
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#prefixes"/>
  <link rel="match" href="reftest/ref-lime-1-generic.xml"/>
  <title>CSS Namespaces Test Suite: empty string prefix (Implied element namespace)</title>
  <style>
   @namespace foo "";
   t { background:red }
   foo|t { background:lime }
  </style>
 </head>
 <t>This sentence should have a green background.</t>
</root>
<root>
 <head xmlns="http://www.w3.org/1999/xhtml">
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#prefixes"/>
  <link rel="match" href="reftest/ref-lime-2-generic.xml"/>
  <title>CSS Namespaces Test Suite: empty string default namespace</title>
  <style>
   @namespace "";
   @namespace x "test";
   *|t, *|root { display:block }
   *|t, t[x] { background:lime }
   t { background:red }
  </style>
 </head>
 <t x="">This sentence should have a green background.</t>
 <t xmlns="test">This sentence should have a green background.</t>
</root>
<root>
 <head xmlns="http://www.w3.org/1999/xhtml">
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="author" title="Boris Zbarsky" href="https://bugzilla.mozilla.org/show_bug.cgi?id=458381#c4"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#prefixes"/>
  <link rel="match" href="reftest/ref-lime-2-generic.xml"/>
  <title>CSS Namespaces Test Suite: no default namespace</title>
  <style>
   @namespace x "test";
   root *|* { background:red; display:block }
   head { display:none }
   t { background: lime }
  </style>
 </head>
 <t>This sentence should have a green background.</t>
 <t xmlns="test">This sentence should have a green background.</t>
</root>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#prefixes"/>
  <link rel="match" href="reftest/ref-lime-2.xml"/>
  <title>CSS Namespaces Test Suite: no prefix</title>
  <style>
   @namespace "test";
   |t { background:lime }
   t { background:red }
  </style>
  <style>
   @namespace "test";
   t2 { background:lime }
   |t2 { background:red }
  </style>
 </head>
 <body>
  <p><t xmlns="">This sentence should have a green background.</t></p>
  <p><t2 xmlns="test">This sentence should have a green background.</t2></p>
 </body>
</html>
<book xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <info>
  <its:rules version="2.0">
   <its:preserveSpaceRule selector="//verse" space="preserve"/>
  </its:rules>
 </info>
 <verse>
 'Twas brillig, and the slithy toves
  Did gyre and gimble in the wabe;
 All mimsy were the borogoves,
  And the mome raths outgrabe.
 </verse>
</book>
<book xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <verse xml:space="preserve">
 'Twas brillig, and the slithy toves
  Did gyre and gimble in the wabe;
 All mimsy were the borogoves,
  And the mome raths outgrabe.
 </verse>
</book>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:preserveSpaceRule selector="//verse" space="preserve"/>
  </its:rules>
<book xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0" >
 <info>
   <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0"  xlink:href="preservespace3xmlrules.xml"/>
 </info>
 <verse>
'Twas brillig, and the slithy toves
  Did gyre and gimble in the wabe;
 All mimsy were the borogoves,
  And the mome raths outgrabe.
 </verse>
</book>
<book xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <its:span xml:space="preserve">
 'Twas brillig, and the slithy toves
  Did gyre and gimble in the wabe;
 All mimsy were the borogoves,
  And the mome raths outgrabe.
 </its:span >
</book>
<book xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0"> 
 <info> 
  <its:rules version="2.0"> 
   <its:param name="preserverspaceParam">firstverse</its:param>
   <its:preserveSpaceRule selector="//verse[@id=$preserverspaceParam]" space="preserve"/> 
  </its:rules> 
 </info> 
 <verse id="firstverse"> 
 'Twas brillig, and the slithy toves
  Did gyre and gimble in the wabe;
 All mimsy were the borogoves,
  And the mome raths outgrabe.
 </verse> 
</book> 
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:param name="preserverspaceParam">firstverse</its:param>
   <its:preserveSpaceRule selector="//verse[@id=$preserverspaceParam]" space="preserve"/> 
  </its:rules> 
<book xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0"> 
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="preservespace6xmlrules.xml"/>
 <verse id="firstverse"> 
 'Twas brillig, and the slithy toves
  Did gyre and gimble in the wabe;
 All mimsy were the borogoves,
  And the mome raths outgrabe.
 </verse> 
</book> 
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - PRE</title>
</head>
<body onload="parent.loadComplete()">
<pre>The PRE is used to indicate pre-formatted text.  Visual agents may:

                leave white space intact.
                May render text with a fixed-pitch font.
                May disable automatic word wrap.
                Must not disable bidirectional processing.
</pre>
</body>
</html>

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<resources>
	<index root="\" startIndexAt="layout.resfiles">
		<default>
			<qualifier name="Language" value="en-US"/>
      <!--
			<qualifier name="Contrast" value="standard"/>
			<qualifier name="Scale" value="100"/>
			<qualifier name="HomeRegion" value="001"/>
			<qualifier name="TargetSize" value="256"/>
			<qualifier name="LayoutDirection" value="LTR"/>
			<qualifier name="Configuration" value=""/>
			<qualifier name="AlternateForm" value=""/>
      -->
		</default>
    <indexer-config type="RESFILES" qualifierDelimiter="." />
    <!--
		<indexer-config type="folder" foldernameAsQualifier="true" filenameAsQualifier="true" qualifierDelimiter="."/>

		<indexer-config type="PRI"/>
    -->
	</index>

  <index root="\" startIndexAt="resources.resfiles">
    <default>
      <qualifier name="language" value="en-US" />
    </default>
    <indexer-config type="RESW" convertDotsToSlashes="true" />
    <indexer-config type="RESJSON" />
    <indexer-config type="RESFILES" qualifierDelimiter="." />
  </index>
  <index root="\" startIndexAt="pri.resfiles">
    <default>
      <qualifier name="language" value="en-US" />
    </default>
    <indexer-config type="PRI" />
    <indexer-config type="RESFILES" qualifierDelimiter="." />
  </index>
  
	<!--<index startIndexAt="Start Index Here" root="Root Here">-->
	<!--        <indexer-config type="resfiles" qualifierDelimiter="."/>-->
	<!--        <indexer-config type="priinfo" emitStrings="true" emitPaths="true"/>-->
	<!--</index>-->
</resources>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="false" android:color="@color/text_color_primary_disable_only" />
    <item android:color="@color/text_color_primary_inverse"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="false" android:color="@color/text_color_primary_disable_only" />
    <item android:color="@color/text_color_primary"/>

</selector>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- this file depends on printUtils.js -->

<!DOCTYPE bindings [
<!ENTITY % printPreviewDTD SYSTEM "chrome://global/locale/printPreview.dtd" >
%printPreviewDTD;
]>

<bindings id="printPreviewBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="printpreviewtoolbar" 
           extends="chrome://global/content/bindings/toolbar.xml#toolbar">
    <resources>
      <stylesheet src="chrome://global/skin/printPreview.css"/>
    </resources>

    <content>
      <xul:button label="&print.label;" accesskey="&print.accesskey;"
        oncommand="this.parentNode.print();" icon="print"/>

      <xul:button label="&pageSetup.label;" accesskey="&pageSetup.accesskey;"
        oncommand="this.parentNode.doPageSetup();"/>

      <xul:vbox align="center" pack="center">
        <xul:label value="&page.label;" accesskey="&page.accesskey;" control="pageNumber"/>
      </xul:vbox>
      <xul:toolbarbutton class="home-arrow tabbable"
        oncommand="parentNode.navigate(0, 0, 'home');" tooltiptext="&homearrow.tooltip;"/>
      <xul:toolbarbutton class="previous-arrow tabbable"
        oncommand="parentNode.navigate(-1, 0, 0);" tooltiptext="&previousarrow.tooltip;"/>
      <xul:hbox align="center" pack="center">
        <xul:textbox id="pageNumber" size="3" value="1" min="1" type="number"
          hidespinbuttons="true" onchange="navigate(0, this.valueNumber, 0);"/>
        <xul:label value="&of.label;"/>
        <xul:label value="1"/>
      </xul:hbox>
      <xul:toolbarbutton class="next-arrow tabbable"
        oncommand="parentNode.navigate(1, 0, 0);" tooltiptext="&nextarrow.tooltip;"/>
      <xul:toolbarbutton class="end-arrow tabbable"
        oncommand="parentNode.navigate(0, 0, 'end');" tooltiptext="&endarrow.tooltip;"/>

      <xul:toolbarseparator class="toolbarseparator-primary"/>
      <xul:vbox align="center" pack="center">
        <xul:label value="&scale.label;" accesskey="&scale.accesskey;" control="scale"/>
      </xul:vbox>

      <xul:hbox align="center" pack="center">
        <xul:menulist id="scale" crop="none" 
          oncommand="parentNode.parentNode.scale(this.selectedItem.value);">
          <xul:menupopup>
            <xul:menuitem value="0.3" label="&p30.label;"/>
            <xul:menuitem value="0.4" label="&p40.label;"/>
            <xul:menuitem value="0.5" label="&p50.label;"/>
            <xul:menuitem value="0.6" label="&p60.label;"/>
            <xul:menuitem value="0.7" label="&p70.label;"/>
            <xul:menuitem value="0.8" label="&p80.label;"/>
            <xul:menuitem value="0.9" label="&p90.label;"/>
            <xul:menuitem value="1" label="&p100.label;"/>
            <xul:menuitem value="1.25" label="&p125.label;"/>
            <xul:menuitem value="1.5" label="&p150.label;"/>
            <xul:menuitem value="1.75" label="&p175.label;"/>
            <xul:menuitem value="2" label="&p200.label;"/>
            <xul:menuseparator/>
            <xul:menuitem flex="1" value="ShrinkToFit" 
              label="&ShrinkToFit.label;"/>
            <xul:menuitem value="Custom" label="&Custom.label;"/>
          </xul:menupopup>
        </xul:menulist>
      </xul:hbox>

      <xul:toolbarseparator class="toolbarseparator-primary"/>
      <xul:hbox align="center" pack="center">
        <xul:toolbarbutton label="&portrait.label;" checked="true"
          accesskey="&portrait.accesskey;"
          type="radio" group="orient" class="toolbar-portrait-page tabbable"
          oncommand="parentNode.parentNode.orient('portrait');"/>
        <xul:toolbarbutton label="&landscape.label;" 
          accesskey="&landscape.accesskey;"
          type="radio" group="orient" class="toolbar-landscape-page tabbable"
          oncommand="parentNode.parentNode.orient('landscape');"/>
      </xul:hbox>

      <xul:toolbarseparator class="toolbarseparator-primary"/>
      <xul:button label="&close.label;" accesskey="&close.accesskey;"
        oncommand="PrintUtils.exitPrintPreview();" icon="close"/>
      <xul:data value="&customPrompt.title;"/>
    </content>

    <implementation implements="nsIMessageListener">
      <field name="mPrintButton">
        document.getAnonymousNodes(this)[0]
      </field>
      <field name="mPageTextBox">
        document.getAnonymousNodes(this)[5].childNodes[0]
      </field>
      <field name="mTotalPages">
        document.getAnonymousNodes(this)[5].childNodes[2]
      </field>
      <field name="mScaleLabel">
        document.getAnonymousNodes(this)[9].firstChild
      </field>
      <field name="mScaleCombobox">
        document.getAnonymousNodes(this)[10].firstChild
      </field>
      <field name="mOrientButtonsBox">
        document.getAnonymousNodes(this)[12]
      </field>
      <field name="mPortaitButton">
        this.mOrientButtonsBox.childNodes[0]
      </field>
      <field name="mLandscapeButton">
        this.mOrientButtonsBox.childNodes[1]
      </field>
      <field name="mCustomTitle">
        document.getAnonymousNodes(this)[15].firstChild
      </field>
      <field name="mPrintPreviewObs">
      </field>
      <field name="mWebProgress">
      </field>
      <field name="mPPBrowser">
        null
      </field>
      <field name="mMessageManager">
        null
      </field>

      <method name="initialize">
        <parameter name="aPPBrowser"/>
        <body>
        <![CDATA[
          this.mPPBrowser = aPPBrowser;
          this.mMessageManager = aPPBrowser.messageManager;
          this.mMessageManager.addMessageListener("Printing:Preview:UpdatePageCount", this);
          this.updateToolbar();
        ]]>
        </body>
      </method>

      <method name="doPageSetup">
        <body>
        <![CDATA[
          var didOK = PrintUtils.showPageSetup();
          if (didOK) {
            // the changes that effect the UI
            this.updateToolbar();

            // Now do PrintPreview
            PrintUtils.printPreview();
          }
        ]]>
        </body>
      </method>

      <method name="navigate">
        <parameter name="aDirection"/>
        <parameter name="aPageNum"/>
        <parameter name="aHomeOrEnd"/>
        <body>
        <![CDATA[
          const nsIWebBrowserPrint = Components.interfaces.nsIWebBrowserPrint;
          let navType, pageNum;

          // we use only one of aHomeOrEnd, aDirection, or aPageNum
          if (aHomeOrEnd) {
            // We're going to either the very first page ("home"), or the
            // very last page ("end").
            if (aHomeOrEnd == "home") {
              navType = nsIWebBrowserPrint.PRINTPREVIEW_HOME;
              this.mPageTextBox.value = 1;
            } else {
              navType = nsIWebBrowserPrint.PRINTPREVIEW_END;
              this.mPageTextBox.value = this.mPageTextBox.max;
            }
            pageNum = 0;
          } else if (aDirection) {
            // aDirection is either +1 or -1, and allows us to increment
            // or decrement our currently viewed page.
            this.mPageTextBox.valueNumber += aDirection;
            navType = nsIWebBrowserPrint.PRINTPREVIEW_GOTO_PAGENUM;
            pageNum = this.mPageTextBox.value;  // TODO: back to valueNumber?
          } else {
            // We're going to a specific page (aPageNum)
            navType = nsIWebBrowserPrint.PRINTPREVIEW_GOTO_PAGENUM;
            pageNum = aPageNum;
          }

          this.mMessageManager.sendAsyncMessage("Printing:Preview:Navigate", {
            navType: navType,
            pageNum: pageNum,
          });
        ]]>
        </body>
      </method>

      <method name="print">
        <body>
        <![CDATA[
          let contentWindow = this.mPPBrowser.contentWindowAsCPOW;
          PrintUtils.print(contentWindow, this.mPPBrowser);
        ]]>
        </body>
      </method>

      <method name="promptForScaleValue">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          var value = Math.round(aValue);
          var promptService = Components.classes["@mozilla.org/embedcomp/prompt-service;1"].getService(Components.interfaces.nsIPromptService);
          var promptStr = this.mScaleLabel.value;
          var renameTitle = this.mCustomTitle;
          var result = {value:value};
          var confirmed = promptService.prompt(window, renameTitle, promptStr, result, null, {value:value});
          if (!confirmed || (!result.value) || (result.value == "") || result.value == value) {
            return(-1);
          }
          return result.value;
        ]]>
        </body>
      </method>

      <method name="setScaleCombobox">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          var scaleValues = [0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.25, 1.5, 1.75, 2];

          aValue = new Number(aValue);

          for (var i = 0; i < scaleValues.length; i++) {
            if (aValue == scaleValues[i]) {
              this.mScaleCombobox.selectedIndex = i;
              return;
            }
          }
          this.mScaleCombobox.value = "Custom";
        ]]>
        </body>
      </method>

      <method name="scale">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          var settings = PrintUtils.getPrintSettings();
          if (aValue == "ShrinkToFit") {
            if (!settings.shrinkToFit) {
              settings.shrinkToFit = true;
              this.savePrintSettings(settings, settings.kInitSaveShrinkToFit | settings.kInitSaveScaling);
              PrintUtils.printPreview();
            }
            return;
          }

          if (aValue == "Custom") {
            aValue = this.promptForScaleValue(settings.scaling * 100.0);
            if (aValue >= 10) {
              aValue /= 100.0;
            } else {
              if (this.mScaleCombobox.hasAttribute('lastValidInx')) {
                this.mScaleCombobox.selectedIndex = this.mScaleCombobox.getAttribute('lastValidInx');
              }
              return;
            }
          }

          this.setScaleCombobox(aValue);
          this.mScaleCombobox.setAttribute('lastValidInx', this.mScaleCombobox.selectedIndex);

          if (settings.scaling != aValue || settings.shrinkToFit)
          {
            settings.shrinkToFit = false;
            settings.scaling = aValue;
            this.savePrintSettings(settings, settings.kInitSaveShrinkToFit | settings.kInitSaveScaling);
            PrintUtils.printPreview();
          }
        ]]>
        </body>
      </method>

      <method name="orient">
        <parameter name="aOrientation"/>
        <body>
        <![CDATA[
          const kIPrintSettings = Components.interfaces.nsIPrintSettings;
          var orientValue = (aOrientation == "portrait") ? kIPrintSettings.kPortraitOrientation :
                                                           kIPrintSettings.kLandscapeOrientation;
          var settings = PrintUtils.getPrintSettings();
          if (settings.orientation != orientValue)
          {
            settings.orientation = orientValue;
            this.savePrintSettings(settings, settings.kInitSaveOrientation);
            PrintUtils.printPreview();
          }
        ]]>
        </body>
      </method>

      <method name="updateToolbar">
        <body>
        <![CDATA[
          var settings = PrintUtils.getPrintSettings();

          var isPortrait = settings.orientation == Components.interfaces.nsIPrintSettings.kPortraitOrientation;

          this.mPortaitButton.checked = isPortrait;
          this.mLandscapeButton.checked = !isPortrait;

          if (settings.shrinkToFit) {
            this.mScaleCombobox.value = "ShrinkToFit";
          } else {
            this.setScaleCombobox(settings.scaling);
          }

          this.mPageTextBox.value = 1;

          this.mMessageManager.sendAsyncMessage("Printing:Preview:UpdatePageCount");
        ]]>
        </body>
      </method>

      <method name="savePrintSettings">
        <parameter name="settings"/>
        <parameter name="flags"/>
        <body><![CDATA[
          var PSSVC = Components.classes["@mozilla.org/gfx/printsettings-service;1"]
                                .getService(Components.interfaces.nsIPrintSettingsService);
          PSSVC.savePrintSettingsToPrefs(settings, true, flags);
        ]]></body>
      </method>

      <!-- nsIMessageListener -->
      <method name="receiveMessage">
        <parameter name="message"/>
        <body>
        <![CDATA[
          if (message.name == "Printing:Preview:UpdatePageCount") {
            let numPages = message.data.numPages;
            this.mTotalPages.value = numPages;
            this.mPageTextBox.max = numPages;
          }
        ]]>
        </body>
      </method>
    </implementation>
  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <ScrollView android:layout_width="match_parent"
                android:layout_height="match_parent">

        <LinearLayout android:id="@+id/private_tabs_empty"
                      style="@style/TabsPanelFrame.PrivateTabs"
                      android:layout_width="match_parent"
                      android:layout_height="match_parent">

            <LinearLayout style="@style/TabsPanelSection.PrivateTabs.Header"
                          android:layout_width="match_parent"
                          android:layout_height="wrap_content">

                <TextView android:id="@+id/private_tabs_empty_header"
                          style="@style/TabsPanelItem.TextAppearance.Header.PrivateTabs"
                          android:layout_width="match_parent"
                          android:layout_height="wrap_content"
                          android:text="@string/private_browsing_title"/>

                <TextView style="@style/TabsPanelItem.TextAppearance"
                          android:layout_width="match_parent"
                          android:layout_height="wrap_content"
                          android:text="@string/private_tabs_panel_empty_desc"/>

            </LinearLayout>

            <LinearLayout style="@style/TabsPanelSection.PrivateTabs"
                          android:layout_width="match_parent"
                          android:layout_height="match_parent">

                <TextView android:id="@+id/private_tabs_learn_more"
                          style="@style/TabsPanelItem.TextAppearance.Linkified.LearnMore"
                          android:layout_width="match_parent"
                          android:text="@string/private_tabs_panel_learn_more"/>

            </LinearLayout>

        </LinearLayout>

    </ScrollView>

    <!-- Note: for an unknown reason, scrolling in the TabsLayout
         does not work unless it is laid out after the empty view. -->
    <view class="org.mozilla.gecko.tabs.TabsPanel$TabsLayout"
          android:id="@+id/private_tabs_layout"
          style="@style/TabsLayout"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:choiceMode="singleChoice"
          gecko:tabs="tabs_private"/>

</merge>
<?xml version="1.0"?>
<root>
    <head xmlns="http://www.w3.org/1999/xhtml">
        <title> ProcessingInstruction.data and DOMCharacterDataModified event </title> 
    </head>

    <p xmlns="http://www.w3.org/1999/xhtml">
        <h3>DOM Events</h3>
        <h4>
            Test Description: DOMCharacterDataModified event fires after ProcessingInstruction.data have been modified, 
            but the node itself has not been inserted or deleted. The proximal event target of this event shall be the 
            ProcessingInstruction node.
        </h4>

        <pi><?foo bar?></pi>

        <p>Test passes if the word "PASS" appears below.</p>
        <div>Test result: </div>
        <div><testresult>FAIL</testresult></div>

        <script type="text/javascript" xmlns="http://www.w3.org/1999/xhtml">
            <![CDATA[
                var PassTest = function()
                {
                    document.getElementsByTagName("testresult")[0].firstChild.data = "PASS";
                    TestResult = true;
                }
                
                var FailTest = function()
                {
                    document.getElementsByTagName("testresult")[0].firstChild.data = "FAIL";
                    TestResult = false;
                }
                
                var EVENT = "DOMCharacterDataModified";
                var TARGET = document.getElementsByTagName('pi')[0].firstChild;
                var TestResult = false;
                
                try
                {
                    TARGET.addEventListener(EVENT, TestEvent, false);
                    TARGET.data = "new" + TARGET.data;
                }
                catch(ex)
                {
                    FailTest();
                }
                
                function TestEvent(evt)
                {
                    if ((EVENT == evt.type) && (TARGET == evt.target) && ("newbar" == evt.newValue))
                    {
                        PassTest();
                    }
                    else
                    {
                        FailTest();
                    }
                }
            ]]>
        </script>
    </p>
</root><layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <solid android:color="@color/highlight_orange"/>
            </shape>
        </clip>
    </item>
</layer-list>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="progressmeterBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="progressmeter" role="xul:progressmeter">
    <resources>
      <stylesheet src="chrome://global/skin/progressmeter.css"/>
    </resources>

    <content>
      <xul:spacer class="progress-bar" xbl:inherits="mode"/>
      <xul:spacer class="progress-remainder" xbl:inherits="mode"/>
    </content>
    
    <implementation>
      <property name="mode" onset="if (this.mode != val) this.setAttribute('mode', val); return val;"
                            onget="return this.getAttribute('mode');"/>

      <property name="value" onget="return this.getAttribute('value') || '0';">
        <setter><![CDATA[
          var p = Math.round(val);
          var max = Math.round(this.max);
          if (p < 0)
            p = 0;
          else if (p > max)
            p = max;
          var c = this.value; 
          if (p != c) {
            var delta = p - c;
            if (delta < 0)
              delta = -delta;
            if (delta > 3 || p == 0 || p == max) {
              this.setAttribute("value", p);
              // Fire DOM event so that accessible value change events occur
              var event = document.createEvent('Events');
              event.initEvent('ValueChange', true, true);
              this.dispatchEvent(event);
            }
          }
          
          return val;
        ]]></setter>
      </property>
      <property name="max"
                onget="return this.getAttribute('max') || '100';"
                onset="this.setAttribute('max', isNaN(val) ? 100 : Math.max(val, 1));
                       this.value = this.value;
                       return val;" />
    </implementation>
  </binding>

  <binding id="progressmeter-undetermined"
           extends="chrome://global/content/bindings/progressmeter.xml#progressmeter">
    <content>
      <xul:stack class="progress-remainder" flex="1" anonid="stack" style="overflow: -moz-hidden-unscrollable;">
        <xul:spacer class="progress-bar" anonid="spacer" top="0" style="margin-right: -1000px;"/>
      </xul:stack>
    </content>

    <implementation>
      <field name="_alive">true</field>
      <method name="_init">
        <body><![CDATA[
          var stack =
            document.getAnonymousElementByAttribute(this, "anonid", "stack");
          var spacer =
            document.getAnonymousElementByAttribute(this, "anonid", "spacer");
          var isLTR =
           document.defaultView.getComputedStyle(this, null).direction == "ltr";
          var startTime = window.mozAnimationStartTime;
          var self = this;

          function nextStep(t) {
            try {
              var width = stack.boxObject.width;
              if (!width) {
                // Maybe we've been removed from the document.
                if (self._alive)
                  mozRequestAnimationFrame(nextStep);
                return;
              }

              var elapsedTime = t - startTime;

              // Width of chunk is 1/5 (determined by the ratio 2000:400) of the
              // total width of the progress bar. The left edge of the chunk
              // starts at -1 and moves all the way to 4. It covers the distance
              // in 2 seconds.
              var position = isLTR ? ((elapsedTime % 2000) / 400) - 1 :
                                     ((elapsedTime % 2000) / -400) + 4;

              width = width >> 2;
              spacer.height = stack.boxObject.height;
              spacer.width = width;
              spacer.left = width * position;

              mozRequestAnimationFrame(nextStep);
            } catch (e) {
            }
          }
          mozRequestAnimationFrame(nextStep);
        ]]></body>
      </method>

      <constructor>this._init();</constructor>
    </implementation>
  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/linear_interpolator">

    <rotate android:duration="1200"
            android:fromDegrees="0"
            android:pivotX="50%"
            android:pivotY="50%"
            android:repeatCount="infinite"
            android:toDegrees="360"/>

</set>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:h="http://www.w3.org/1999/xhtml">
	<its:provRule selector="//*[@class='prov-records-ref']" provenanceRecordsRefPointer="h:a/@href"/>
</its:rules>
<text xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <dc:creator>John Doe</dc:creator>
  <its:provenanceRecords xml:id="pr1">
    <its:provenanceRecord
      tool="onlinemtex"
      revPerson="James Joyce"
      revTool="mycat-v1.0"
      revOrg="acme-CAT-v2.3"
      provRef="http://www.examplelsp.com/excontent987/production/prov/e6354"/>
  </its:provenanceRecords>
  <its:provenanceRecords xml:id="pr2">
    <its:provenanceRecord
      person="John Doe"
      org="legaltrans-ex"
      revPerson="Tommy Atkins"
      revOrg="vistatec"
      provRef="http://www.examplelsp.com/excontent987/legal/prov/e6354 http://www.vistatec.com/job-12-7-15-X31/reviewed/prov/re8573469"/>
  </its:provenanceRecords>
  <its:rules version="2.0">
    <its:provRule selector="//*[@ref]" provenanceRecordsRefPointer="@ref"/>
  </its:rules>
  <title>Translation Revision Provenance Agent: Global Test in XML</title>
  <body>
    <par ref="#pr1"> This paragraph was translated from the machine.</par>
    <legalnotice ref="#pr2">This text was translated directly by a person.</legalnotice>
  </body>
</text>
<text xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <dc:creator>John Doe</dc:creator>
  <its:provenanceRecords xml:id="pr1">
    <its:provenanceRecord
      toolRef="http://www.provdata.com/tool/#onlinemtex"
      revPerson="James Joyce"
      revToolRef="http://www.provdata.com/RevTool/#mycat-v1"
      revOrg="acme-CAT-v2.3"
      provRef="http://www.examplelsp.com/excontent987/production/prov/e6354"/>
  </its:provenanceRecords>
  <its:provenanceRecords xml:id="pr2">
    <its:provenanceRecord
      personRef="http://www.provdata.com/person/#John_Doe"
      orgRef="http://www.provdata.com/org/#legaltrans-ex"
      revPersonRef="http://www.provdata.com/RevPerson/#Tommy_Atkins"
      revOrgRef="http://www.provdata.com/RevOrg/#vistatec"
      provRef="http://www.examplelsp.com/excontent987/legal/prov/e6354 http://www.vistatec.com/job-12-7-15-X31/reviewed/prov/re8573469"/>
  </its:provenanceRecords>
  <its:rules version="2.0">
    <its:provRule selector="//*[@ref]" provenanceRecordsRefPointer="@ref"/>
  </its:rules>
  <title>Translation Revision Provenance Agent: Global Test in XML</title>
  <body>
    <par ref="#pr1"> This paragraph was translated from the machine.</par>
    <legalnotice ref="#pr2">This text was
      translated directly by a person.</legalnotice>
  </body>
</text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:provRule selector="//*[@ref]" provenanceRecordsRefPointer="@ref"/>
  </its:rules>
<text xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <dc:creator>John Doe</dc:creator>
  <its:provenanceRecords xml:id="pr1">
    <its:provenanceRecord
      tool="onlinemtex"
      revPerson="James Joyce"
      revTool="mycat-v1.0"
      revOrg="acme-CAT-v2.3"
      provRef="http://www.examplelsp.com/excontent987/production/prov/e6354"/>
  </its:provenanceRecords>
  <its:provenanceRecords xml:id="pr2">
    <its:provenanceRecord
      person="John Doe"
      org="legaltrans-ex"
      revPerson="Tommy Atkins"
      revOrg="vistatec"
      provRef="http://www.examplelsp.com/excontent987/legal/prov/e6354 http://www.vistatec.com/job-12-7-15-X31/reviewed/prov/re8573469"/>
  </its:provenanceRecords>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="provenance3xmlrules.xml"/>
  <title>Translation Revision Provenance Agent: Global Test in XML</title>
  <body>
    <par ref="#pr1"> This paragraph was translated from the machine.</par>
    <legalnotice ref="#pr2">This text was
      translated directly by a person.</legalnotice>
  </body>
</text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
     <its:provRule selector="//*[@ref]" provenanceRecordsRefPointer="@ref"/>
  </its:rules>
<text xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <dc:creator>John Doe</dc:creator>
  <its:provenanceRecords xml:id="pr1">
    <its:provenanceRecord
      toolRef="http://www.provdata.com/tool/#onlinemtex"
      revPerson="James Joyce"
      revToolRef="http://www.provdata.com/RevTool/#mycat-v1"
      revOrg="acme-CAT-v2.3"
      provRef="http://www.examplelsp.com/excontent987/production/prov/e6354"/>
  </its:provenanceRecords>
  <its:provenanceRecords xml:id="pr2">
    <its:provenanceRecord
      personRef="http://www.provdata.com/person/#John_Doe"
      orgRef="http://www.provdata.com/org/#legaltrans-ex"
      revPersonRef="http://www.provdata.com/RevPerson/#Tommy_Atkins"
      revOrgRef="http://www.provdata.com/RevOrg/#vistatec"
      provRef="http://www.examplelsp.com/excontent987/legal/prov/e6354 http://www.vistatec.com/job-12-7-15-X31/reviewed/prov/re8573469"/>
  </its:provenanceRecords>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="provenance4xmlrules.xml"/>
  <title>Translation Revision Provenance Agent: Global Test in XML</title>
  <body>
    <par ref="#pr1"> This paragraph was translated from the machine.</par>
    <legalnotice ref="#pr2">This text was
      translated directly by a person.</legalnotice>
  </body>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:h="http://www.w3.org/1999/xhtml">
	<its:param name="provenanceParam">prov-records-ref1</its:param>
	<its:provRule selector="//*[@class=$provenanceParam]" provenanceRecordsRefPointer="h:a/@href"/>
</its:rules>
<text xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <dc:creator>John Doe</dc:creator>
  <its:provenanceRecords xml:id="pr1">
    <its:provenanceRecord
      tool="onlinemtex"
      revPerson="James Joyce"
      revTool="mycat-v1.0"
      revOrg="acme-CAT-v2.3"
      provRef="http://www.examplelsp.com/excontent987/production/prov/e6354"/>
  </its:provenanceRecords>
  <its:provenanceRecords xml:id="pr2">
    <its:provenanceRecord
      person="John Doe"
      org="legaltrans-ex"
      revPerson="Tommy Atkins"
      revOrg="vistatec"
      provRef="http://www.examplelsp.com/excontent987/legal/prov/e6354 http://www.vistatec.com/job-12-7-15-X31/reviewed/prov/re8573469"/>
  </its:provenanceRecords>
  <its:rules version="2.0">
    <its:param name="provenanceParam">#pr1</its:param>
    <its:provRule selector="//*[@ref=$provenanceParam]" provenanceRecordsRefPointer="@ref"/> 
  </its:rules>
  <title>Translation Revision Provenance Agent: Global Test in XML</title>
  <body>
    <par ref="#pr1"> This paragraph was translated from the machine.</par>
    <legalnotice ref="#pr2">This text was
      translated directly by a person.</legalnotice>
  </body>
</text>
<?xml version="1.0" ?>
<someDataFile xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
<its:provenanceRecords xml:id="pr1">
        <its:provenanceRecord
            toolRef="http://www.provdata.com/tool/#onlinemtex"
            revPerson="James Joyce"
            revToolRef="http://www.provdata.com/RevTool/#mycat-v1"
            revOrg="acme-CAT-v2.3"
            provRef="http://www.examplelsp.com/excontent987/production/prov/e6354"/>
		<its:provenanceRecord
			revPerson="John Smith" 
			revOrg="Linguaserve I.S. S.A." />
    </its:provenanceRecords>
</someDataFile>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:param name="provenanceParam">#pr1</its:param>
    <its:provRule selector="//*[@ref=$provenanceParam]" provenanceRecordsRefPointer="@ref"/> 
  </its:rules>
<text xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <dc:creator>John Doe</dc:creator>
  <its:provenanceRecords xml:id="pr1">
    <its:provenanceRecord
      tool="onlinemtex"
      revPerson="James Joyce"
      revTool="mycat-v1.0"
      revOrg="acme-CAT-v2.3"
      provRef="http://www.examplelsp.com/excontent987/production/prov/e6354"/>
  </its:provenanceRecords>
  <its:provenanceRecords xml:id="pr2">
    <its:provenanceRecord
      person="John Doe"
      org="legaltrans-ex"
      revPerson="Tommy Atkins"
      revOrg="vistatec"
      provRef="http://www.examplelsp.com/excontent987/legal/prov/e6354 http://www.vistatec.com/job-12-7-15-X31/reviewed/prov/re8573469"/>
  </its:provenanceRecords>
   <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="provenance6xmlrules.xml"/>
  <title>Translation Revision Provenance Agent: Global Test in XML</title>
  <body>
    <par ref="#pr1"> This paragraph was translated from the machine.</par>
    <legalnotice ref="#pr2">This text was
      translated directly by a person.</legalnotice>
  </body>
</text>
<text xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <title>Translation Revision Provenance Agent: Local Test in XML</title>
  <body>
    <par its:personRef="http://www.provdata.com/person/#John_Doe" 
      its:toolRef="http://www.onlinemtex.com/2012/7/25/wsdl/"
      its:org="acme-CAT-v2.3"
      its:revToolRef="http://www.mycat.com/v1.0/download"
      its:revOrg="acme-CAT-v2.3"
      its:provRef="http://www.examplelsp.com/excontent987/production/prov/e6354"
      >This paragraph was translated from the machine.</par>
    <legalnotice its:tool="onlinemtex"
      its:person="John Doe"
      its:orgRef="http://www.legaltrans-ex.com/"
      its:revPerson="Tommy Atkins"
      its:revOrgRef="http://www.vistatec.com/"
      its:provRef="http://www.examplelsp.com/excontent987/legal/prov/e6354 http://www.vistatec.com/job-12-7-15-X31/reviewed/prov/re8573469"
      >This text was translated directly by a person.</legalnotice>
  </body>
</text>
<text xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <title>Translation Revision Provenance Agent: Local Test in XML</title>
  <body>
    <its:span personRef="http://www.provdata.com/person/#John_Doe" 
      toolRef="http://www.onlinemtex.com/2012/7/25/wsdl/"
      org="acme-CAT-v2.3"
      revToolRef="http://www.mycat.com/v1.0/download"
      revOrg="acme-CAT-v2.3"
      provRef="http://www.examplelsp.com/excontent987/production/prov/e6354"
      >This paragraph was translated from the machine.</its:span>
    <its:span tool="onlinemtex"
      person="John Doe"
      orgRef="http://www.legaltrans-ex.com/"
      revPerson="Tommy Atkins"
      revOrgRef="http://www.vistatec.com/"
      provRef="http://www.examplelsp.com/excontent987/legal/prov/e6354 http://www.vistatec.com/job-12-7-15-X31/reviewed/prov/re8573469"
      >This text was translated directly by a person.</its:span>
  </body>
</text>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.15 $"/>
		<generation date="$Date: 2008/05/25 01:05:56 $"/>
		<language type="ps"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Arab</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:21 $"/>
        <language type="pt"/>
        <territory type="PT"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:19 $"/>
        <language type="pt"/>
    </identity>
</ldml>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>CSS and Quotes: Counting Right (Slightly Simpler Version)</title>
  <style type="text/css">
  <![CDATA[
     .test { margin-left: 2em; }
  ]]>
  </style>
 </head>
 <body>
  <div class="test">Isn't it wonderful to see CSS quotes work!!!</div>
 </body>
</html>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
   
<!--

Test originally from
http://www.hixie.ch/tests/adhoc/css/quotes/001.xml ,
relicensed to MPL/LGPL/GPL tri-license per Hixie's permission on IRC,
March 5, 2009, and upgraded to MPL 2.

-->
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>CSS and Quotes: Counting Right (Slightly Simpler Version)</title>
  <link rel="author" title="Ian Hickson" href="mailto:ian@hixie.ch" />
  <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#quotes"/>
  <meta name="flags" content="" />
  <style type="text/css">
  <![CDATA[
     .party1 * { display: inline; }
     .party1 .a { quotes: "Isn"        "'"
                          "t"          "FAIL!"
                          "FAIL!"      " i"; }
     .party1 .b { quotes: ""           "FAIL!!" 
                          " wonderful" "!!!"
                          " to "       " work"
                          "see "       " [FAIL to]"
                          "C"          "quotes"
                          "S"          " "; }
     .party1 .c { quotes: none; }
     .party1 .d { quotes: "FAIL!"      "FAIL!"
                          "FAIL!"      "FAIL!"
                          ""           ""; }
     .test { margin-left: 2em; }
     .test .no-open:before { content: no-open-quote; }
     .test .open:before { content: open-quote; }
     .test .triple-open:before { content: open-quote open-quote open-quote; }
     .test .no-close:after { content: no-close-quote; }
     .test .triple-no-close:after { content: no-close-quote no-close-quote no-close-quote; }
     .test .close:after { content: close-quote; }
     .test .triple-close:after { content: close-quote close-quote close-quote; }
     .test .no-close-open:before { content: no-close-quote open-quote; }

  ]]>
  </style>
 </head>
 <body>

  <!-- this is the same as the 002.xml version except the <br> and <hr> nodes are <div>s. -->

    <!--                                               Isn't it wonderful to see CSS quotes work!!! 
    --><div class="test c party1"><!--               c 0
     --><div class="a open close"><!-- open          a 1 isn                     
     --></div><!-- close                             a 0 '                       
     --><div class="a"><!--                          a 0                         
      --><div class="c open"><!-- open               c 1                         
       --><div class="a open"><!-- open              a 2 t                       
       --></div><!--                                 a 2                         
      --></div><!--                                  c 2                         
      --><div class="no-open close"><!--             a 3 [FAIL!]                   
      --></div><!-- close                            a 2 i                       
     --></div><!--                                   a 2                         
     --><div class="no-close-open no-close a"><!--   a 2 [FAIL!] t                         
     --></div><!-- close                             a 1
     --><div class="d no-open no-close"><!-- open    d 2 [FAIL!]                 
      --><div class="open close"><!-- open           d 3                          
       --><div class="open close"><!-- open          d 4                         
       --></div><!-- close                           d 3                         
      --></div><!-- close                            d 2                         
     --></div><!-- close                             d 1 [FAIL!] 
     --><div class="b no-close"><!--                 b 1                         
      --><div class="triple-no-close"/><!-- close    b 0 [FAIL!!]   
      --><div class="triple-open"/><!-- open x 3     b 3 "", "wonderful ", "to "
      --><div class="triple-open"/><!-- open x 3     b 6 "see ", "C", "S"       
      --><div class="open close"><!-- open           b 7 S                       
       --><div class="close"><!--                    b 7
        --><div class="no-close"><!--                b 7                          
         --><div class="close"><!--                  b 7                          
          --><div class="no-close"><!--              b 7                           
           --><div class="close"><!--                b 7                         
           --></div><!-- close                       b 6 " "
          --></div><!-- close                        b 5 [" "]                   
         --></div><!-- close                         b 4  quotes                 
        --></div><!-- close                          b 3 [ FAIL to]              
       --></div><!-- close                           b 2  work                   
      --></div><!-- close                            b 1 !!!                     
     --></div><!-- close                             b 0 [FAIL!!]                  
    --></div><!--                                    b 0
    -->

 </body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - QUOTE</title>
</head>
<body onload="parent.loadComplete()">
<p>
<q cite="./files/Q.html">The Q element is intended for short quotations</q>
</p>
<blockquote cite="./files/BLOCKQUOTE.html">
<p>The BLOCKQUOTE element is used for long quotations.</p>
</blockquote>
</body>
</html>

<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="radioBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="radiogroup" role="xul:radiogroup"
           extends="chrome://global/content/bindings/general.xml#basecontrol">
    <resources>
      <stylesheet src="chrome://global/skin/radio.css"/>
    </resources>

    <implementation implements="nsIDOMXULSelectControlElement">
      <constructor>
        <![CDATA[
          if (this.getAttribute("disabled") == "true")
            this.disabled = true;

          var children = this._getRadioChildren();
          var length = children.length;
          for (var i = 0; i < length; i++) {
            if (children[i].getAttribute("selected") == "true") {
              this.selectedIndex = i;
              return;
            }
          }

          var value = this.value;
          if (value)
            this.value = value;
          else
            this.selectedIndex = 0;
        ]]>
      </constructor>

      <property name="value" onget="return this.getAttribute('value');">
        <setter>
          <![CDATA[
            this.setAttribute("value", val);
            var children = this._getRadioChildren();
            for (var i = 0; i < children.length; i++) {
              if (String(children[i].value) == String(val)) {
                this.selectedItem = children[i];
                break;
              }
            }
            return val;
          ]]>
        </setter>
      </property>
      <property name="disabled">
        <getter>
        <![CDATA[
          if (this.getAttribute('disabled') == 'true')
            return true;
          var children = this._getRadioChildren();
          for (var i = 0; i < children.length; ++i) {
            if (!children[i].hidden && !children[i].collapsed && !children[i].disabled)
              return false;
          }
          return true;
        ]]>
        </getter>
        <setter>
        <![CDATA[
          if (val)
            this.setAttribute('disabled', 'true');
          else
            this.removeAttribute('disabled');
          var children = this._getRadioChildren();
          for (var i = 0; i < children.length; ++i) {
            children[i].disabled = val;
          }
          return val;
        ]]>
        </setter>
      </property>

      <property name="itemCount" readonly="true"
                onget="return this._getRadioChildren().length"/>

      <property name="selectedIndex">
        <getter>
        <![CDATA[
          var children = this._getRadioChildren();
          for (var i = 0; i < children.length; ++i) {
            if (children[i].selected)
              return i;
          }
          return -1;
        ]]>
        </getter>
        <setter>
        <![CDATA[
          this.selectedItem = this._getRadioChildren()[val];
          return val;
        ]]>
        </setter>
      </property>

      <property name="selectedItem">
        <getter>
        <![CDATA[
          var children = this._getRadioChildren();
          for (var i = 0; i < children.length; ++i) {
            if (children[i].selected)
              return children[i];
          }
          return null;
        ]]>
        </getter>
        <setter>
        <![CDATA[
          var focused = this.getAttribute("focused") == "true";
          var alreadySelected = false;

          if (val) {
            alreadySelected = val.getAttribute("selected") == "true";
            val.setAttribute("focused", focused);
            val.setAttribute("selected", "true");
            this.setAttribute("value", val.value);
          }
          else {
            this.removeAttribute("value");
          }

          // uncheck all other group nodes
          var children = this._getRadioChildren();
          var previousItem = null;
          for (var i = 0; i < children.length; ++i) {
            if (children[i] != val) {
              if (children[i].getAttribute("selected") == "true")
                previousItem = children[i];

              children[i].removeAttribute("selected");
              children[i].removeAttribute("focused");
            }
          }

          var event = document.createEvent("Events");
          event.initEvent("select", false, true);
          this.dispatchEvent(event);

          if (!alreadySelected && focused) {
            // Only report if actual change
            var myEvent;
            if (val) {
              myEvent = document.createEvent("Events");
              myEvent.initEvent("RadioStateChange", true, true);
              val.dispatchEvent(myEvent);
            }

            if (previousItem) {
              myEvent = document.createEvent("Events");
              myEvent.initEvent("RadioStateChange", true, true);
              previousItem.dispatchEvent(myEvent);
            }
          }

          return val;
        ]]>
        </setter>        
      </property>
      
      <property name="focusedItem">
        <getter>
        <![CDATA[
          var children = this._getRadioChildren();
          for (var i = 0; i < children.length; ++i) {
            if (children[i].getAttribute("focused") == "true")
              return children[i];
          }
          return null;
        ]]>
        </getter>
        <setter>
        <![CDATA[
          if (val) val.setAttribute("focused", "true");
          
          // unfocus all other group nodes
          var children = this._getRadioChildren();
          for (var i = 0; i < children.length; ++i) {
            if (children[i] != val)
              children[i].removeAttribute("focused");
          }
          return val;
        ]]>
        </setter>
      </property>
      
      <method name="checkAdjacentElement">
        <parameter name="aNextFlag"/>
        <body>
        <![CDATA[
          var currentElement = this.focusedItem || this.selectedItem;
          var i;
          var children = this._getRadioChildren();
          for (i = 0; i < children.length; ++i ) {
            if (children[i] == currentElement) 
              break;
          }
          var index = i;

          if (aNextFlag) {
            do {
              if (++i == children.length)
                i = 0;
              if (i == index)
                break;
            }
            while (children[i].hidden || children[i].collapsed || children[i].disabled);
            // XXX check for display/visibility props too

            this.selectedItem = children[i];
            children[i].doCommand();
          }
          else {              
            do {
              if (i == 0)
                i = children.length;
              if (--i == index)
                break;
            }
            while (children[i].hidden || children[i].collapsed || children[i].disabled);
            // XXX check for display/visibility props too

            this.selectedItem = children[i];
            children[i].doCommand();
          }
        ]]>
        </body>
      </method>
      <field name="_radioChildren">null</field>
      <method name="_getRadioChildren">
        <body>
        <![CDATA[
          if (this._radioChildren)
            return this._radioChildren;

          var radioChildren = [];
          var doc = this.ownerDocument;

          if (this.hasChildNodes()) {
            // Don't store the collected child nodes immediately,
            // collecting the child nodes could trigger constructors
            // which would blow away our list.

            const nsIDOMNodeFilter = Components.interfaces.nsIDOMNodeFilter;
            var iterator = doc.createTreeWalker(this,
                                                nsIDOMNodeFilter.SHOW_ELEMENT,
                                                this._filterRadioGroup);
            while (iterator.nextNode())
              radioChildren.push(iterator.currentNode);
            return this._radioChildren = radioChildren;
          }

          // We don't have child nodes.
          const XUL_NS = "http://www.mozilla.org/keymaster/"
                       + "gatekeeper/there.is.only.xul";
          var elems = doc.getElementsByAttribute("group", this.id);
          for (var i = 0; i < elems.length; i++) {
            if ((elems[i].namespaceURI == XUL_NS) &&
                (elems[i].localName == "radio")) {
              radioChildren.push(elems[i]);
            }
          }
          return this._radioChildren = radioChildren;
        ]]>
        </body>
      </method>
      <method name="_filterRadioGroup">
        <parameter name="node"/>
        <body>
        <![CDATA[
          switch (node.localName) {
            case "radio": return NodeFilter.FILTER_ACCEPT;
            case "template":
            case "radiogroup": return NodeFilter.FILTER_REJECT;
            default: return NodeFilter.FILTER_SKIP;
          }
        ]]>
        </body>
      </method>

      <method name="getIndexOfItem">
        <parameter name="item"/>
        <body>
          return this._getRadioChildren().indexOf(item);
        </body>
      </method>

      <method name="getItemAtIndex">
        <parameter name="index"/>
        <body>
        <![CDATA[
          var children = this._getRadioChildren();
          return (index >= 0 && index < children.length) ? children[index] : null;
        ]]>
        </body>
      </method>

      <method name="appendItem">
        <parameter name="label"/>
        <parameter name="value"/>
        <body>
        <![CDATA[
          var XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          var radio = document.createElementNS(XULNS, "radio");
          radio.setAttribute("label", label);
          radio.setAttribute("value", value);
          this.appendChild(radio);
          this._radioChildren = null;
          return radio;
        ]]>
        </body>
      </method>
      
      <method name="insertItemAt">
        <parameter name="index"/>
        <parameter name="label"/>
        <parameter name="value"/>
        <body>
        <![CDATA[
          var XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          var radio = document.createElementNS(XULNS, "radio");
          radio.setAttribute("label", label);
          radio.setAttribute("value", value);
          var before = this.getItemAtIndex(index);
          if (before)
            before.parentNode.insertBefore(radio, before);
          else
            this.appendChild(radio);
          this._radioChildren = null;
          return radio;
        ]]>
        </body>
      </method>

      <method name="removeItemAt">
        <parameter name="index"/>
        <body>
        <![CDATA[
          var remove = this.getItemAtIndex(index);
          if (remove) {
            remove.parentNode.removeChild(remove);
            this._radioChildren = null;
          }
          return remove;
        ]]>
        </body>
      </method>
    </implementation>
    
    <handlers>
      <handler event="mousedown">
        if (this.disabled)
          event.preventDefault();
       </handler>
     
      <!-- keyboard navigation -->
      <!-- Here's how keyboard navigation works in radio groups on Windows:
           The group takes 'focus'
           The user is then free to navigate around inside the group
           using the arrow keys. Accessing previous or following radio buttons
           is done solely through the arrow keys and not the tab button. Tab
           takes you to the next widget in the tab order -->
      <handler event="keypress" key=" " phase="target">
         this.selectedItem = this.focusedItem;
         this.selectedItem.doCommand();
      </handler>
      <handler event="keypress" keycode="VK_UP" phase="target">
        this.checkAdjacentElement(false);
        event.stopPropagation();
        event.preventDefault();
      </handler>
      <handler event="keypress" keycode="VK_LEFT" phase="target">
        // left arrow goes back when we are ltr, forward when we are rtl
        this.checkAdjacentElement(document.defaultView.getComputedStyle(
                                    this, "").direction == "rtl");
        event.stopPropagation();
        event.preventDefault();
      </handler>
      <handler event="keypress" keycode="VK_DOWN" phase="target">
        this.checkAdjacentElement(true);
        event.stopPropagation();
        event.preventDefault();
      </handler>
      <handler event="keypress" keycode="VK_RIGHT" phase="target">
        // right arrow goes forward when we are ltr, back when we are rtl
        this.checkAdjacentElement(document.defaultView.getComputedStyle(
                                    this, "").direction == "ltr");
        event.stopPropagation();
        event.preventDefault();
      </handler>

      <!-- set a focused attribute on the selected item when the group
           receives focus so that we can style it as if it were focused even though
           it is not (Windows platform behaviour is for the group to receive focus,
           not the item -->
      <handler event="focus" phase="target">
        <![CDATA[
          this.setAttribute("focused", "true");
          if (this.focusedItem)
            return;

          var val = this.selectedItem;
          if (!val || val.disabled || val.hidden || val.collapsed) {
            var children = this._getRadioChildren();
            for (var i = 0; i < children.length; ++i) {
              if (!children[i].hidden && !children[i].collapsed && !children[i].disabled) {
                val = children[i];
                break;
              }
            }
          }
          this.focusedItem = val;
        ]]>
      </handler>
      <handler event="blur" phase="target">
        this.removeAttribute("focused");
        this.focusedItem = null;
      </handler>
    </handlers>
  </binding>

  <binding id="radio" role="xul:radiobutton"
    extends="chrome://global/content/bindings/general.xml#control-item">
    <resources>
      <stylesheet src="chrome://global/skin/radio.css"/>
    </resources>

    <content>
      <xul:image class="radio-check" xbl:inherits="disabled,selected"/>
      <xul:hbox class="radio-label-box" align="center" flex="1">
        <xul:image class="radio-icon" xbl:inherits="src"/>
        <xul:label class="radio-label" xbl:inherits="xbl:text=label,accesskey,crop" flex="1"/>
      </xul:hbox>
    </content>

    <implementation implements="nsIDOMXULSelectControlItemElement">
      <constructor>
        <![CDATA[
          // Just clear out the parent's cached list of radio children
          var control = this.control;
          if (control)
            control._radioChildren = null;
        ]]>
      </constructor>
      <destructor>
        <![CDATA[
          if (!this.control)
            return;

          var radioList = this.control._radioChildren;
          if (!radioList)
            return;
          for (var i = 0; i < radioList.length; ++i) {
            if (radioList[i] == this) {
              radioList.splice(i, 1);
              return;
            }
          }
        ]]>
      </destructor>
      <property name="selected" readonly="true">
        <getter>
          <![CDATA[
            return this.hasAttribute('selected');
          ]]>
        </getter>
      </property>
      <property name="radioGroup" readonly="true" onget="return this.control"/>
      <property name="control" readonly="true">
        <getter>
        <![CDATA[
          const XUL_NS = "http://www.mozilla.org/keymaster/"
                       + "gatekeeper/there.is.only.xul";
          var parent = this.parentNode;
          while (parent) {
            if ((parent.namespaceURI == XUL_NS) &&
                (parent.localName == "radiogroup")) {
              return parent;
            }
            parent = parent.parentNode;
          }

          var group = this.getAttribute("group");
          if (!group) {
            return null;
          }

          parent = this.ownerDocument.getElementById(group);
          if (!parent ||
              (parent.namespaceURI != XUL_NS) ||
              (parent.localName != "radiogroup")) {
            parent = null;
          }
          return parent;
        ]]>
        </getter>
      </property>
    </implementation>
    <handlers>
      <handler event="click" button="0">
        <![CDATA[
          if (!this.disabled)
            this.control.selectedItem = this;
         ]]>
      </handler>

      <handler event="mousedown" button="0">
        <![CDATA[
          if (!this.disabled)
            this.control.focusedItem = this;
         ]]>
      </handler>
    </handlers>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.home.ReadingListRow xmlns:android="http://schemas.android.com/apk/res/android"
                                       android:layout_width="match_parent"
                                       android:layout_height="@dimen/reading_list_row_height"
                                       android:layout_gravity="center_vertical"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:paddingLeft="@dimen/reading_list_row_padding_left"
        android:paddingRight="@dimen/reading_list_row_padding_right"
        android:orientation="vertical"
        android:gravity="center_vertical">

        <TextView
            android:id="@+id/title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="4dp"
            style="@style/Widget.ReadingListRow.Title" />

        <TextView
            android:id="@+id/excerpt"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            style="@style/Widget.ReadingListRow.Description" />

    </LinearLayout>

    <TextView
        android:id="@+id/read_time"
        android:layout_width="64dp"
        android:layout_height="match_parent"
        android:gravity="center"
        android:visibility="gone"
        style="@style/Widget.ReadingListRow.ReadTime" />

</merge>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="L. David Baron" href="http://dbaron.org/"/>
  <link rel="author" title="Mozilla Foundation" href="http://mozilla.org/"/>
  <title>CSS Namespaces Test Suite reference</title>
 </head>
 <body>
  <p style="background: lime">This sentence should have a green background.</p>
 </body>
</html>
<root>
 <head xmlns="http://www.w3.org/1999/xhtml">
  <link rel="author" title="L. David Baron" href="http://dbaron.org/"/>
  <link rel="author" title="Mozilla Foundation" href="http://mozilla.org/"/>
  <title>CSS Namespaces Test Suite reference</title>
  <style>
   t { background:lime }
  </style>
 </head>
 <t>This sentence should have a green background.</t>
</root>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="L. David Baron" href="http://dbaron.org/"/>
  <link rel="author" title="Mozilla Foundation" href="http://mozilla.org/"/>
  <title>CSS Namespaces Test Suite reference</title>
 </head>
 <body>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
 </body>
</html>
<root>
 <head xmlns="http://www.w3.org/1999/xhtml">
  <link rel="author" title="L. David Baron" href="http://dbaron.org/"/>
  <link rel="author" title="Mozilla Foundation" href="http://mozilla.org/"/>
  <title>CSS Namespaces Test Suite reference</title>
  <style>
   t, root { display:block }
   t { background:lime }
  </style>
 </head>
 <t>This sentence should have a green background.</t>
 <t>This sentence should have a green background.</t>
</root>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="L. David Baron" href="http://dbaron.org/"/>
  <link rel="author" title="Mozilla Foundation" href="http://mozilla.org/"/>
  <title>CSS Namespaces Test Suite reference</title>
 </head>
 <body>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="L. David Baron" href="http://dbaron.org/"/>
  <link rel="author" title="Mozilla Foundation" href="http://mozilla.org/"/>
  <title>CSS Namespaces Test Suite reference</title>
 </head>
 <body>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="L. David Baron" href="http://dbaron.org/"/>
  <link rel="author" title="Mozilla Foundation" href="http://mozilla.org/"/>
  <title>CSS Namespaces Test Suite reference</title>
 </head>
 <body>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="L. David Baron" href="http://dbaron.org/"/>
  <link rel="author" title="Mozilla Foundation" href="http://mozilla.org/"/>
  <title>CSS Namespaces Test Suite reference</title>
 </head>
 <body>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
  <p><test style="background: lime">This sentence should have a green background.</test></p>
 </body>
</html>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="firefoxBrowserBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="remote-browser" extends="chrome://global/content/bindings/browser.xml#browser">

    <implementation type="application/javascript"
                    implements="nsIObserver, nsIDOMEventListener, nsIMessageListener, nsIRemoteBrowser">

      <field name="_securityUI">null</field>

      <property name="securityUI"
                readonly="true">
        <getter><![CDATA[
          if (!this._securityUI) {
            let jsm = "resource://gre/modules/RemoteSecurityUI.jsm";
            let RemoteSecurityUI = Components.utils.import(jsm, {}).RemoteSecurityUI;
            this._securityUI = new RemoteSecurityUI();
          }

          // We want to double-wrap the JS implemented interface, so that QI and instanceof works.
          var ptr = Cc["@mozilla.org/supports-interface-pointer;1"].
                        createInstance(Ci.nsISupportsInterfacePointer);
          ptr.data = this._securityUI;
          return ptr.data.QueryInterface(Ci.nsISecureBrowserUI);
        ]]></getter>
      </property>

      <method name="adjustPriority">
        <parameter name="adjustment"/>
        <body><![CDATA[
          this.messageManager.sendAsyncMessage("NetworkPrioritizer:AdjustPriority",
                                               {adjustment: adjustment});
        ]]></body>
      </method>

      <field name="_remoteWebNavigation">null</field>

      <property name="webNavigation"
                onget="return this._remoteWebNavigation;"
                readonly="true"/>

      <field name="_remoteWebProgress">null</field>

      <property name="webProgress" readonly="true">
      	<getter>
      	  <![CDATA[
            if (!this._remoteWebProgress) {
              let jsm = "resource://gre/modules/RemoteWebProgress.jsm";
              let RemoteWebProgressManager = Cu.import(jsm, {}).RemoteWebProgressManager;
              this._remoteWebProgressManager = new RemoteWebProgressManager(this);
              this._remoteWebProgress = this._remoteWebProgressManager.topLevelWebProgress;
            }
            return this._remoteWebProgress;
      	  ]]>
      	</getter>
      </property>

      <field name="_remoteFinder">null</field>

      <property name="finder" readonly="true">
        <getter><![CDATA[
          if (!this._remoteFinder) {
            let jsm = "resource://gre/modules/RemoteFinder.jsm";
            let RemoteFinder = Cu.import(jsm, {}).RemoteFinder;
            this._remoteFinder = new RemoteFinder(this);
          }
          return this._remoteFinder;
        ]]></getter>
      </property>

      <field name="_documentURI">null</field>

      <field name="_documentContentType">null</field>

      <!--
        Used by session restore to ensure that currentURI is set so
        that switch-to-tab works before the tab is fully
        restored. This function also invokes onLocationChanged
        listeners in tabbrowser.xml.
      -->
      <method name="_setCurrentURI">
        <parameter name="aURI"/>
        <body><![CDATA[
          this._remoteWebProgressManager.setCurrentURI(aURI);
        ]]></body>
      </method>

      <property name="documentURI"
                onget="return this._documentURI;"
                readonly="true"/>

      <property name="documentContentType"
                onget="return this._documentContentType;"
                readonly="true"/>

      <field name="_contentTitle">""</field>

      <property name="contentTitle"
                onget="return this._contentTitle"
                readonly="true"/>

      <field name="_characterSet">""</field>

      <property name="characterSet"
                onget="return this._characterSet">
        <setter><![CDATA[
          this.messageManager.sendAsyncMessage("UpdateCharacterSet", {value: val});
          this._characterSet = val;
        ]]></setter>
      </property>

      <field name="_mayEnableCharacterEncodingMenu">null</field>

      <property name="mayEnableCharacterEncodingMenu"
                onget="return this._mayEnableCharacterEncodingMenu;"
                readonly="true"/>

      <field name="_contentWindow">null</field>

      <property name="contentWindow"
                onget="return null"
                readonly="true"/>

      <property name="contentWindowAsCPOW"
                onget="return this._contentWindow"
                readonly="true"/>

      <property name="contentDocument"
                onget="return null"
                readonly="true"/>

      <field name="_contentPrincipal">null</field>

      <property name="contentPrincipal"
                onget="return this._contentPrincipal"
                readonly="true"/>

      <property name="contentDocumentAsCPOW"
                onget="return this.contentWindowAsCPOW ? this.contentWindowAsCPOW.document : null"
                readonly="true"/>

      <field name="_syncHandler">null</field>

      <property name="syncHandler"
                onget="return this._syncHandler"
                readonly="true"/>

      <field name="_imageDocument">null</field>

      <property name="imageDocument"
                onget="return this._imageDocument"
                readonly="true"/>

      <field name="_fullZoom">1</field>
      <property name="fullZoom">
        <getter><![CDATA[
          return this._fullZoom;
        ]]></getter>
        <setter><![CDATA[
          this._fullZoom = val;
          this.messageManager.sendAsyncMessage("FullZoom", {value: val});
        ]]></setter>
      </property>

      <field name="_textZoom">1</field>
      <property name="textZoom">
        <getter><![CDATA[
          return this._textZoom;
        ]]></getter>
        <setter><![CDATA[
          this._textZoom = val;
          this.messageManager.sendAsyncMessage("TextZoom", {value: val});
        ]]></setter>
      </property>

      <field name="_isSyntheticDocument">false</field>
      <property name="isSyntheticDocument">
        <getter><![CDATA[
          return this._isSyntheticDocument;
        ]]></getter>
      </property>

      <property name="autoCompletePopup"
                onget="return document.getElementById(this.getAttribute('autocompletepopup'))"
                readonly="true"/>

      <property name="docShellIsActive">
        <getter>
          <![CDATA[
            throw new Error("not supported");
          ]]>
        </getter>
        <setter>
          <![CDATA[
            let {frameLoader} = this.QueryInterface(Ci.nsIFrameLoaderOwner);
            frameLoader.tabParent.setIsDocShellActive(val);
            return val;
          ]]>
        </setter>
      </property>

      <constructor>
        <![CDATA[
          /*
           * Don't try to send messages from this function. The message manager for
           * the <browser> element may not be initialized yet.
           */

          let jsm = "resource://gre/modules/RemoteWebNavigation.jsm";
          let RemoteWebNavigation = Cu.import(jsm, {}).RemoteWebNavigation;
          this._remoteWebNavigation = new RemoteWebNavigation(this);

          this.messageManager.addMessageListener("Browser:Init", this);
          this.messageManager.addMessageListener("DOMTitleChanged", this);
          this.messageManager.addMessageListener("ImageDocumentLoaded", this);
          this.messageManager.addMessageListener("SetSyncHandler", this);
          this.messageManager.addMessageListener("DocumentInserted", this);
          this.messageManager.addMessageListener("FullZoomChange", this);
          this.messageManager.addMessageListener("TextZoomChange", this);
          this.messageManager.addMessageListener("ZoomChangeUsingMouseWheel", this);
          this.messageManager.addMessageListener("DOMFullscreen:RequestExit", this);
          this.messageManager.addMessageListener("DOMFullscreen:RequestRollback", this);
          this.messageManager.loadFrameScript("chrome://global/content/browser-child.js", true);

          if (this.hasAttribute("selectpopup")) {
            this.messageManager.addMessageListener("Forms:ShowDropDown", this);
            this.messageManager.addMessageListener("Forms:HideDropDown", this);
            this.messageManager.loadFrameScript("chrome://global/content/select-child.js", true);
          }

          jsm = "resource://gre/modules/RemoteController.jsm";
          let RemoteController = Components.utils.import(jsm, {}).RemoteController;
          this._controller = new RemoteController(this);
          this.controllers.appendController(this._controller);

          Services.obs.addObserver(this, "ask-children-to-exit-fullscreen", false);
        ]]>
      </constructor>

      <destructor>
        <![CDATA[
          Services.obs.removeObserver(this, "ask-children-to-exit-fullscreen");
        ]]>
      </destructor>

      <method name="receiveMessage">
        <parameter name="aMessage"/>
        <body><![CDATA[
          let data = aMessage.data;
          switch (aMessage.name) {
            case "Browser:Init":
              let result = {};
              result.useGlobalHistory = !this.hasAttribute("disableglobalhistory");
              result.initPopup = this.autoCompletePopup != null;
              return result;
              break;
            case "DOMTitleChanged":
              this._contentTitle = data.title;
              break;
            case "ImageDocumentLoaded":
              this._imageDocument = {
                width: data.width,
                height: data.height
              };
              break;

            case "SetSyncHandler":
              this._syncHandler = aMessage.objects.handler;
              break;

            case "Forms:ShowDropDown": {
              Cu.import("resource://gre/modules/SelectParentHelper.jsm");
              let dropdown = document.getElementById(this.getAttribute("selectpopup"));
              SelectParentHelper.populate(dropdown, data.options, data.selectedIndex);
              SelectParentHelper.open(this, dropdown, data.rect);
              break;
            }

            case "DocumentInserted":
              this._isSyntheticDocument = data.synthetic;
              break;

            case "FullZoomChange": {
              this._fullZoom = data.value;
              let event = document.createEvent("Events");
              event.initEvent("FullZoomChange", true, false);
              this.dispatchEvent(event);
              break;
            }

            case "TextZoomChange": {
              this._textZoom = data.value;
              let event = document.createEvent("Events");
              event.initEvent("TextZoomChange", true, false);
              this.dispatchEvent(event);
              break;
            }

            case "ZoomChangeUsingMouseWheel": {
              let event = document.createEvent("Events");
              event.initEvent("ZoomChangeUsingMouseWheel", true, false);
              this.dispatchEvent(event);
              break;
            }

            case "Forms:HideDropDown": {
              Cu.import("resource://gre/modules/SelectParentHelper.jsm");
              let dropdown = document.getElementById(this.getAttribute("selectpopup"));
              SelectParentHelper.hide(dropdown);
              break;
            }

            case "DOMFullscreen:RequestExit": {
              let windowUtils = window.QueryInterface(Ci.nsIInterfaceRequestor)
                                      .getInterface(Ci.nsIDOMWindowUtils);
              windowUtils.exitFullscreen();
              break;
            }

            case "DOMFullscreen:RequestRollback": {
              let windowUtils = window.QueryInterface(Ci.nsIInterfaceRequestor)
                                      .getInterface(Ci.nsIDOMWindowUtils);
              windowUtils.remoteFrameFullscreenReverted();
              break;
            }

            default:
              // Delegate to browser.xml.
              return this._receiveMessage(aMessage);
              break;
          }
        ]]></body>
      </method>

      <method name="observe">
        <parameter name="aSubject"/>
        <parameter name="aTopic"/>
        <parameter name="aData"/>
        <body><![CDATA[
          if (aTopic == "ask-children-to-exit-fullscreen") {
            if (aSubject == window.document) {
              this.messageManager.sendAsyncMessage("DOMFullscreen:ChildrenMustExit");
            }
          }
        ]]></body>
      </method>

      <!--
        For out-of-process code, event.screen[XY] is relative to the
        left/top of the content view. For in-process code,
        event.screen[XY] is relative to the left/top of the screen. We
        use this method to map screen coordinates received from a
        (possibly out-of-process) <browser> element to coordinates
        that are relative to the screen. This code handles the
        out-of-process case, where we need to translate by the screen
        position of the <browser> element.
      -->
      <method name="mapScreenCoordinatesFromContent">
        <parameter name="aScreenX"/>
        <parameter name="aScreenY"/>
        <body>
        <![CDATA[
          return { x: aScreenX + this.boxObject.screenX,
                   y: aScreenY + this.boxObject.screenY };
        ]]>
        </body>
      </method>

      <method name="enableDisableCommands">
        <parameter name="aAction"/>
        <parameter name="aEnabledLength"/>
        <parameter name="aEnabledCommands"/>
        <parameter name="aDisabledLength"/>
        <parameter name="aDisabledCommands"/>
        <body>
          if (this._controller) {
            this._controller.enableDisableCommands(aAction,
                                                   aEnabledLength, aEnabledCommands,
                                                   aDisabledLength, aDisabledCommands);
          }
        </body>
      </method>

    </implementation>

  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout style="@style/RemoteTabsPanelFrame" >

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance.Header"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_finish_migrating_header" />

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/home_remote_tabs_need_to_finish_migrating" />

        <Button
            android:id="@+id/remote_tabs_needs_finish_migrating_sign_in"
            style="@style/RemoteTabsPanelItem.Button"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_finish_migrating_button_label" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout style="@style/RemoteTabsPanelFrame" >

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance.Header"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/home_remote_tabs_unable_to_connect" />

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/home_remote_tabs_need_to_sign_in" />

        <Button
            android:id="@+id/remote_tabs_needs_password_sign_in"
            style="@style/RemoteTabsPanelItem.Button"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_sign_in_button_label" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout style="@style/RemoteTabsPanelFrame" >

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance.Header"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/home_remote_tabs_unable_to_connect" />

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_status_needs_upgrade" />
    </LinearLayout>

</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout style="@style/RemoteTabsPanelFrame" >

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance.Header"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_confirm_account_header" />

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/home_remote_tabs_need_to_verify" />

        <Button
            android:id="@+id/remote_tabs_needs_verification_resend_email"
            style="@style/RemoteTabsPanelItem.Button"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_confirm_account_resend_email" />

        <TextView
            android:id="@+id/remote_tabs_needs_verification_help"
            style="@style/RemoteTabsPanelItem.TextAppearance.Linkified"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/home_remote_tabs_trouble_verifying" />
    </LinearLayout>
</ScrollView>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <shape android:shape="rectangle">
            <solid android:color="@color/remote_tabs_setup_button_background_hit"/>
            <corners android:radius="@dimen/fxaccount_corner_radius"/>
        </shape>
    </item>

    <item>
        <shape android:shape="rectangle">
            <solid android:color="@color/remote_tabs_setup_button_background"/>
            <corners android:radius="@dimen/fxaccount_corner_radius"/>
        </shape>
    </item>
</selector>
<?xml version="1.0" encoding="utf-8"?>
<!--
   This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        style="@style/RemoteTabsPanelFrame">

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance.Header"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_getting_started_welcome_to_sync" />

        <TextView
            style="@style/RemoteTabsPanelItem.TextAppearance"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_getting_started_description" />

        <Button
            android:id="@+id/remote_tabs_setup_get_started"
            style="@style/RemoteTabsPanelItem.Button"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_getting_started_get_started" />

        <TextView
            android:id="@+id/remote_tabs_setup_old_sync_link"
            style="@style/RemoteTabsPanelItem.TextAppearance.Linkified"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/fxaccount_getting_started_old_firefox" />
    </LinearLayout>

</ScrollView><?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="resizerBindings"
   xmlns="http://www.mozilla.org/xbl">

  <binding id="resizer">
    <resources>
      <stylesheet src="chrome://global/skin/resizer.css"/>
    </resources>
    <implementation>
      <constructor>
      <![CDATA[
        // don't do this for viewport resizers; causes a crash related to
        // bugs 563665 and 581536 otherwise
        if (this.parentNode == this.ownerDocument.documentElement)
          return;

        // if the direction is rtl, set the rtl attribute so that the
        // stylesheet can use this to make the cursor appear properly
        var cs = window.getComputedStyle(this, "");
        if (cs.writingMode === undefined || cs.writingMode == "horizontal-tb") {;
          if (cs.direction == "rtl") {
            this.setAttribute("rtl", "true");
          }
        } else {
          if (cs.writingMode == "vertical-rl") {
            this.setAttribute("rtl", "true");
          }
        }
      ]]>
      </constructor>
    </implementation>
  </binding>

</bindings>
<?xml version="1.0" encoding="ISO-8859-1"?>
<TESTDATA>
    <ITEM>
        <DATA>Test XML Data</DATA>
    </ITEM>
</TESTDATA>
<?xml version="1.0" encoding="UTF-8"?>
<searchresults total_results="1">
  <addon id="5617">
  <name>Restartless Test XPI</name>
  <type id="1">Extension</type>
  <guid>restartless-xpi@tests.mozilla.org</guid>
  <slug>restartless-xpi</slug>
  <version>1.0</version>

  <compatible_applications><application>
      <name>Firefox</name>
      <application_id>1</application_id>
      <min_version>3.6</min_version>
      <max_version>*</max_version>
      <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
    </application></compatible_applications>
  <all_compatible_os><os>ALL</os></all_compatible_os>

  <install os="ALL" size="485">http://127.0.0.1:4567/addons/restartless.xpi</install>
    <created epoch="1252903662">
      2009-09-14T04:47:42Z
    </created>
    <last_updated epoch="1315255329">
      2011-09-05T20:42:09Z
    </last_updated>
    </addon>
</searchresults>
<?xml version="1.0" encoding="UTF-8"?>
<searchresults total_results="1">
  <addon id="5617">
  <name>Rewrite Test Extension</name>
  <type id="1">Extension</type>
  <guid>rewrite@tests.mozilla.org</guid>
  <slug>rewrite</slug>
  <version>1.0</version>

  <compatible_applications><application>
      <name>Firefox</name>
      <application_id>1</application_id>
      <min_version>3.6</min_version>
      <max_version>*</max_version>
      <appID>xpcshell@tests.mozilla.org</appID>
    </application></compatible_applications>
  <all_compatible_os><os>ALL</os></all_compatible_os>

  <install os="ALL" size="485">http://127.0.0.1:8888/require.xpi?src=api</install>
    <created epoch="1252903662">
      2009-09-14T04:47:42Z
    </created>
    <last_updated epoch="1315255329">
      2011-09-05T20:42:09Z
    </last_updated>
    </addon>
</searchresults>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="richlistboxBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="richlistbox"
           extends="chrome://global/content/bindings/listbox.xml#listbox-base">
    <resources>
      <stylesheet src="chrome://global/skin/richlistbox.css"/>
    </resources>

    <content>
      <children includes="listheader"/>
      <xul:scrollbox allowevents="true" orient="vertical" anonid="main-box"
                     flex="1" style="overflow: auto;" xbl:inherits="dir,pack">
        <children/>
      </xul:scrollbox>
    </content>

    <implementation>
      <field name="_scrollbox">
        document.getAnonymousElementByAttribute(this, "anonid", "main-box");
      </field>
      <field name="scrollBoxObject">
        this._scrollbox.boxObject;
      </field>
      <constructor>
        <![CDATA[
          // add a template build listener
          if (this.builder)
            this.builder.addListener(this._builderListener);
          else
            this._refreshSelection();
        ]]>
      </constructor>

      <destructor>
        <![CDATA[
          // remove the template build listener
          if (this.builder)
            this.builder.removeListener(this._builderListener);
        ]]>
      </destructor>

    <!-- Overriding baselistbox -->
      <method name="_fireOnSelect">
        <body>
          <![CDATA[
            // make sure not to modify last-selected when suppressing select events
            // (otherwise we'll lose the selection when a template gets rebuilt)
            if (this._suppressOnSelect || this.suppressOnSelect)
              return;

            // remember the current item and all selected items with IDs
            var state = this.currentItem ? this.currentItem.id : "";
            if (this.selType == "multiple" && this.selectedCount) {
              let getId = function getId(aItem) { return aItem.id; }
              state += " " + this.selectedItems.filter(getId).map(getId).join(" ");
            }
            if (state)
              this.setAttribute("last-selected", state);
            else
              this.removeAttribute("last-selected");

            // preserve the index just in case no IDs are available
            if (this.currentIndex > -1)
              this._currentIndex = this.currentIndex + 1;

            var event = document.createEvent("Events");
            event.initEvent("select", true, true);
            this.dispatchEvent(event);

            // always call this (allows a commandupdater without controller)
            document.commandDispatcher.updateCommands("richlistbox-select");
          ]]>
        </body>
      </method>

      <!-- We override base-listbox here because those methods don't take dir
           into account on listbox (which doesn't support dir yet) -->
      <method name="getNextItem">
        <parameter name="aStartItem"/>
        <parameter name="aDelta"/>
        <body>
        <![CDATA[
          var prop = this.dir == "reverse" && this._mayReverse ?
                                                "previousSibling" :
                                                "nextSibling";
          while (aStartItem) {
            aStartItem = aStartItem[prop];
            if (aStartItem && aStartItem instanceof
                Components.interfaces.nsIDOMXULSelectControlItemElement &&
                (!this._userSelecting || this._canUserSelect(aStartItem))) {
              --aDelta;
              if (aDelta == 0)
                return aStartItem;
            }
          }
          return null;
        ]]></body>
      </method>

      <method name="getPreviousItem">
        <parameter name="aStartItem"/>
        <parameter name="aDelta"/>
        <body>
        <![CDATA[
          var prop = this.dir == "reverse" && this._mayReverse ?
                                                "nextSibling" :
                                                "previousSibling";
          while (aStartItem) {
            aStartItem = aStartItem[prop];
            if (aStartItem && aStartItem instanceof
                Components.interfaces.nsIDOMXULSelectControlItemElement &&
                (!this._userSelecting || this._canUserSelect(aStartItem))) {
              --aDelta;
              if (aDelta == 0)
                return aStartItem;
            }
          }
          return null;
        ]]>
        </body>
      </method>

      <method name="appendItem">
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <body>
          return this.insertItemAt(-1, aLabel, aValue);
        </body>
      </method>

      <method name="insertItemAt">
        <parameter name="aIndex"/>
        <parameter name="aLabel"/>
        <parameter name="aValue"/>
        <body>
          const XULNS =
            "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

          var item =
            this.ownerDocument.createElementNS(XULNS, "richlistitem");
          item.setAttribute("value", aValue);

          var label = this.ownerDocument.createElementNS(XULNS, "label");
          label.setAttribute("value", aLabel);
          label.setAttribute("flex", "1");
          label.setAttribute("crop", "end");
          item.appendChild(label);

          var before = this.getItemAtIndex(aIndex);
          if (!before)
            this.appendChild(item);
          else
            this.insertBefore(item, before);

          return item;
        </body>
      </method>

      <property name="itemCount" readonly="true"
                onget="return this.children.length"/>

      <method name="getIndexOfItem">
        <parameter name="aItem"/>
        <body>
          <![CDATA[
            // don't search the children, if we're looking for none of them
            if (aItem == null)
              return -1;

            return this.children.indexOf(aItem);
          ]]>
        </body>
      </method>

      <method name="getItemAtIndex">
        <parameter name="aIndex"/>
        <body>
          return this.children[aIndex] || null;
        </body>
      </method>

      <method name="ensureIndexIsVisible">
        <parameter name="aIndex"/>
        <body>
          <![CDATA[
            // work around missing implementation in scrollBoxObject
            return this.ensureElementIsVisible(this.getItemAtIndex(aIndex));
          ]]>
        </body>
      </method>

      <method name="ensureElementIsVisible">
        <parameter name="aElement"/>
        <body>
          <![CDATA[
            if (!aElement)
              return;
            var targetRect = aElement.getBoundingClientRect();
            var scrollRect = this._scrollbox.getBoundingClientRect();
            var offset = targetRect.top - scrollRect.top;
            if (offset >= 0) {
              // scrollRect.bottom wouldn't take a horizontal scroll bar into account
              let scrollRectBottom = scrollRect.top + this._scrollbox.clientHeight;
              offset = targetRect.bottom - scrollRectBottom;
              if (offset <= 0)
                return;
            }
            this._scrollbox.scrollTop += offset;
          ]]>
        </body>
      </method>

      <method name="scrollToIndex">
        <parameter name="aIndex"/>
        <body>
          <![CDATA[
            var item = this.getItemAtIndex(aIndex);
            if (item)
              this.scrollBoxObject.scrollToElement(item);
          ]]>
        </body>
      </method>

      <method name="getNumberOfVisibleRows">
        <!-- returns the number of currently visible rows                -->
        <!-- don't rely on this function, if the items' height can vary! -->
        <body>
          <![CDATA[
            var children = this.children;

            for (var top = 0; top < children.length && !this._isItemVisible(children[top]); top++);
            for (var ix = top; ix < children.length && this._isItemVisible(children[ix]); ix++);

            return ix - top;
          ]]>
        </body>
      </method>

      <method name="getIndexOfFirstVisibleRow">
        <body>
          <![CDATA[
            var children = this.children;

            for (var ix = 0; ix < children.length; ix++)
              if (this._isItemVisible(children[ix]))
                return ix;

            return -1;
          ]]>
        </body>
      </method>

      <method name="getRowCount">
        <body>
          <![CDATA[
            return this.children.length;
          ]]>
        </body>
      </method>

      <method name="scrollOnePage">
        <parameter name="aDirection"/> <!-- Must be -1 or 1 -->
        <body>
          <![CDATA[
            var children = this.children;

            if (children.length == 0)
              return 0;

            // If nothing is selected, we just select the first element
            // at the extreme we're moving away from
            if (!this.currentItem)
              return aDirection == -1 ? children.length : 0;

            // If the current item is visible, scroll by one page so that
            // the new current item is at approximately the same position as
            // the existing current item.
            if (this._isItemVisible(this.currentItem))
              this.scrollBoxObject.scrollBy(0, this.scrollBoxObject.height * aDirection);

            // Figure out, how many items fully fit into the view port
            // (including the currently selected one), and determine
            // the index of the first one lying (partially) outside
            var height = this.scrollBoxObject.height;
            var startBorder = this.currentItem.boxObject.y;
            if (aDirection == -1)
              startBorder += this.currentItem.boxObject.height;

            var index = this.currentIndex;
            for (var ix = index; 0 <= ix && ix < children.length; ix += aDirection) {
              var boxObject = children[ix].boxObject;
              if (boxObject.height == 0)
                continue; // hidden children have a y of 0
              var endBorder = boxObject.y + (aDirection == -1 ? boxObject.height : 0);
              if ((endBorder - startBorder) * aDirection > height)
                break; // we've reached the desired distance
              index = ix;
            }

            return index != this.currentIndex ? index - this.currentIndex : aDirection;
          ]]>
        </body>
      </method>

    <!-- richlistbox specific -->
      <property name="children" readonly="true">
        <getter>
          <![CDATA[
            var childNodes = [];
            var isReverse = this.dir == "reverse" && this._mayReverse;
            var child = isReverse ? this.lastChild : this.firstChild;
            var prop = isReverse ? "previousSibling" : "nextSibling";
            while (child) {
              if (child instanceof Components.interfaces.nsIDOMXULSelectControlItemElement)
                childNodes.push(child);
              child = child[prop];
            }
            return childNodes;
          ]]>
        </getter>
      </property>

      <field name="_builderListener" readonly="true">
        <![CDATA[
          ({
            mOuter: this,
            item: null,
            willRebuild: function(builder) { },
            didRebuild: function(builder) {
              this.mOuter._refreshSelection();
            }
          });
        ]]>
      </field>

      <method name="_refreshSelection">
        <body>
          <![CDATA[
            // when this method is called, we know that either the currentItem
            // and selectedItems we have are null (ctor) or a reference to an
            // element no longer in the DOM (template).

            // first look for the last-selected attribute
            var state = this.getAttribute("last-selected");
            if (state) {
              var ids = state.split(" ");

              var suppressSelect = this._suppressOnSelect;
              this._suppressOnSelect = true;
              this.clearSelection();
              for (var i = 1; i < ids.length; i++) {
                var selectedItem = document.getElementById(ids[i]);
                if (selectedItem)
                  this.addItemToSelection(selectedItem);
              }

              var currentItem = document.getElementById(ids[0]);
              if (!currentItem && this._currentIndex)
                currentItem = this.getItemAtIndex(Math.min(
                  this._currentIndex - 1, this.getRowCount()));
              if (currentItem) {
                this.currentItem = currentItem;
                if (this.selType != "multiple" && this.selectedCount == 0)
                  this.selectedItem = currentItem;

                if (this.scrollBoxObject.height) {
                  this.ensureElementIsVisible(currentItem);
                }
                else {
                  // XXX hack around a bug in ensureElementIsVisible as it will
                  // scroll beyond the last element, bug 493645.
                  var previousElement = this.dir == "reverse" ? currentItem.nextSibling :
                                                                currentItem.previousSibling;
                  this.ensureElementIsVisible(previousElement);
                }
              }
              this._suppressOnSelect = suppressSelect;
              // XXX actually it's just a refresh, but at least
              // the Extensions manager expects this:
              this._fireOnSelect();
              return;
            }

            // try to restore the selected items according to their IDs
            // (applies after a template rebuild, if last-selected was not set)
            if (this.selectedItems) {
              for (i = this.selectedCount - 1; i >= 0; i--) {
                if (this.selectedItems[i] && this.selectedItems[i].id)
                  this.selectedItems[i] = document.getElementById(this.selectedItems[i].id);
                else
                  this.selectedItems[i] = null;
                if (!this.selectedItems[i])
                  this.selectedItems.splice(i, 1);
              }
            }
            if (this.currentItem && this.currentItem.id)
              this.currentItem = document.getElementById(this.currentItem.id);
            else
              this.currentItem = null;

            // if we have no previously current item or if the above check fails to
            // find the previous nodes (which causes it to clear selection)
            if (!this.currentItem && this.selectedCount == 0) {
              this.currentIndex = this._currentIndex ? this._currentIndex - 1 : 0;

              // cf. listbox constructor:
              // select items according to their attributes
              var children = this.children;
              for (var i = 0; i < children.length; ++i) {
                if (children[i].getAttribute("selected") == "true")
                  this.selectedItems.push(children[i]);
              }
            }

            if (this.selType != "multiple" && this.selectedCount == 0)
              this.selectedItem = this.currentItem;
          ]]>
        </body>
      </method>

      <method name="_isItemVisible">
        <parameter name="aItem"/>
        <body>
          <![CDATA[
            if (!aItem)
              return false;

            var y = this.scrollBoxObject.positionY + this.scrollBoxObject.y;

            // Partially visible items are also considered visible
            return (aItem.boxObject.y + aItem.boxObject.height > y) &&
                   (aItem.boxObject.y < y + this.scrollBoxObject.height);
          ]]>
        </body>
      </method>

      <field name="_currentIndex">null</field>

      <!-- For backwards-compatibility and for convenience.
        Use getIndexOfItem instead. -->
      <method name="getIndexOf">
        <parameter name="aElement"/>
        <body>
          <![CDATA[
            return this.getIndexOfItem(aElement);
          ]]>
        </body>
      </method>

      <!-- For backwards-compatibility and for convenience.
        Use ensureElementIsVisible instead -->
      <method name="ensureSelectedElementIsVisible">
        <body>
          <![CDATA[
            return this.ensureElementIsVisible(this.selectedItem);
          ]]>
        </body>
      </method>

      <!-- For backwards-compatibility and for convenience.
        Use moveByOffset instead. -->
      <method name="goUp">
        <body>
          <![CDATA[
            var index = this.currentIndex;
            this.moveByOffset(-1, true, false);
            return index != this.currentIndex;
          ]]>
        </body>
      </method>
      <method name="goDown">
        <body>
          <![CDATA[
            var index = this.currentIndex;
            this.moveByOffset(1, true, false);
            return index != this.currentIndex;
          ]]>
        </body>
      </method>

      <!-- deprecated (is implied by currentItem and selectItem) -->
      <method name="fireActiveItemEvent"><body/></method>
    </implementation>

    <handlers>
      <handler event="click">
        <![CDATA[
          // clicking into nothing should unselect
          if (event.originalTarget == this._scrollbox) {
            this.clearSelection();
            this.currentItem = null;
          }
        ]]>
      </handler>

      <handler event="MozSwipeGesture">
        <![CDATA[
          // Only handle swipe gestures up and down
          switch (event.direction) {
            case event.DIRECTION_DOWN:
              this._scrollbox.scrollTop = this._scrollbox.scrollHeight;
              break;
            case event.DIRECTION_UP:
              this._scrollbox.scrollTop = 0;
              break;
          }
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="richlistitem"
           extends="chrome://global/content/bindings/listbox.xml#listitem">
    <content>
      <children/>
    </content>

    <resources>
      <stylesheet src="chrome://global/skin/richlistbox.css"/>
    </resources>

    <implementation>
      <destructor>
        <![CDATA[
          var control = this.control;
          if (!control)
            return;
          // When we are destructed and we are current or selected, unselect ourselves
          // so that richlistbox's selection doesn't point to something not in the DOM.
          // We don't want to reset last-selected, so we set _suppressOnSelect.
          if (this.selected) {
            var suppressSelect = control._suppressOnSelect;
            control._suppressOnSelect = true;
            control.removeItemFromSelection(this);
            control._suppressOnSelect = suppressSelect;
          }
          if (this.current)
            control.currentItem = null;
        ]]>
      </destructor>

      <property name="label" readonly="true">
        <!-- Setter purposely not implemented; the getter returns a
             concatentation of label text to expose via accessibility APIs -->
        <getter>
          <![CDATA[
            const XULNS =
              "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
            return Array.map(this.getElementsByTagNameNS(XULNS, "label"),
                             function (label) label.value)
                        .join(" ");
          ]]>
        </getter>
      </property>

      <property name="searchLabel">
        <getter>
          <![CDATA[
            return this.hasAttribute("searchlabel") ?
                   this.getAttribute("searchlabel") : this.label;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            if (val !== null)
              this.setAttribute("searchlabel", val);
            else
              // fall back to the label property (default value)
              this.removeAttribute("searchlabel");
            return val;
          ]]>
        </setter>
      </property>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0"?>
<!-- Our script expects the book.css stylesheet first -->
<?xml-stylesheet href="book.css" type="text/css"?>
<?xml-stylesheet href="toc.css" type="text/css"?>
<!DOCTYPE book [
<!ATTLIST book    id ID #IMPLIED>
<!ATTLIST chapter id ID #IMPLIED>
<!ATTLIST section id ID #IMPLIED>
]>
<book id="book" xmlns:html="http://www.w3.org/1999/xhtml"
                xmlns:xlink="http://www.w3.org/1999/xlink">
 <html:a name="book"/>                
 <html:script src="toc.js"/>
 <html:img src="irslogo.gif"/>
 <navbar>
   <title>Table of contents</title>
   <content>
   To toggle the Table of Contents, click on this button
   <html:input type="button" value="Contents" onclick="createToc();"/>
   </content>
 </navbar>

  <title>Highlights of 1999 Tax Changes</title>
  <subtitle>(Rev. December 1999)</subtitle>

  <chapter id="chap1">
    <html:a name="chap1"/>
    <title>Tax Changes for Individuals</title>
    <contents>
      <section id="chap1sec1">
         <html:a name="chap1sec1"/>
         <title>Child Tax Credit Increased</title>
         <contents>
            <para>
The maximum child tax credit for each qualifying child will increase from $400 to $500 in 1999. 
            </para>
         </contents>
      </section>
      <section id="chap1sec2">
         <html:a name="chap1sec2"/>      
         <title>Standard Mileage Rate</title>
         <contents>
            <para>
Beginning April 1, 1999, the optional standard mileage rate for operating your carfor business decreases to 31 cents a mile for each business mile. Until then, the business standard mileage rate of 32 1/2 cents per mile that was in effect for 1998 will continue to apply. 
            </para>
         </contents>
      </section>
      <section id="chap1sec3">
         <html:a name="chap1sec3"/>      
         <title>Estimated Tax Safe Harbor for Higher Income Individuals</title>
         <contents>
            <para>
For estimated tax payments for tax years beginning in 1999, the safe harbor for higher income individuals (other than farmers and fishermen) has been modified. If your 1998 adjusted gross income was more than $150,000 ($75,000 if you aremarried filing a separate return for 1999), you will have to pay the smaller of 90% of your expected tax for 1999 or 105% (up from 100%) of the tax shown on your 1998 return (provided your 1998 return covered all 12 months) to avoid an estimated tax penalty. 
            </para>
            <para>
For more information on estimated tax, see 
            <link xlink:type="simple" xlink:href="http://www.irs.ustreas.gov/prod/forms_pubs/pubs/p505toc.htm" xlink:show="replace" xlink:actuate="user">Publication 505</link>. 
            </para>
         </contents>
      </section>
      <section id="chap1sec4">
         <html:a name="chap1sec4"/>      
         <title>Self-Employed Health Insurance Deduction</title>
         <contents>
            <para>
For 1999, the health insurance deduction for the self-employed is increased from 45% to 60% of the amount you pay for medical insurance for yourself and your family. For more information, see chapter 10 in 
              <link xlink:type="simple" xlink:href="http://www.irs.ustreas.gov/prod/forms_pubs/pubs/p535toc.htm" xlink:show="replace" xlink:actuate="user">Publication 535</link>. 
            </para>
         </contents>
      </section>
      <section id="chap1sec5">
         <html:a name="chap1sec5"/>      
         <title>Social Security and Medicare Taxes</title>
         <contents>
            <para>
For 1999, the employer and employee will continue to pay: 
              <list>
                <listitem>
1.6.2% each for social security tax (old-age, survivors, and disability insurance), and
                </listitem>
                <listitem>
2.1.45% each for Medicare tax (hospital insurance). 
                </listitem>
              </list>
            </para>
            <para>
               <heading>Wage limits.</heading>
For social security tax, the maximum amount of 1999 wages subject to the tax has increased to $72,600. For Medicare tax, all covered 1999 wages are subject to the tax. There is no wage base limit. For information about these taxes, see 
              <link xlink:type="simple" xlink:href="http://www.irs.ustreas.gov/prod/forms_pubs/pubs/p15toc.htm" xlink:show="replace" xlink:actuate="user">Publication 15</link>, <ref>Circular E, Employer's Tax Guide</ref>. 
            </para>
         </contents>
      </section>
      <section id="chap1sec6">
         <html:a name="chap1sec6"/>      
         <title>Self-Employment Tax</title>
         <contents>
            <para>
The self-employment tax rate on net earnings remains the same for calendar year1999. This rate, 15.3%, is a total of 12.4% for social security (old-age, survivors, and disability insurance), and 2.9% for Medicare (hospital insurance). 
            </para>
            <para>
The maximum amount subject to the social security part for tax years beginning in 1999 has increased to $72,600. All net earnings of at least $400 are subject to the Medicare part. 
            </para>
         </contents>
      </section>
    </contents>
  </chapter>

  <chapter id="chap2">
    <html:a name="chap2"/>        
    <title>Tax Changes for Businesses</title>
    <contents>
      <section id="chap2sec1">
        <html:a name="chap2sec1"/>      
        <title>Social Security and Medicare Taxes</title>
        <contents>
          <para>
For 1999, the employer and employee will continue to pay: 
            <list>
              <listitem>
6.2% each for social security tax (old-age, survivors, and disability insurance), and 
              </listitem>
              <listitem>
1.45% each for Medicare tax (hospital insurance). 
              </listitem>
            </list>
          </para>
          <para>
<heading>Wage limits.</heading> For social security tax, the maximum amount of 1999 wages subject to the tax has increased to $72,600. For Medicare tax, all covered 1999 wages are subject to the tax. There is no wage base limit. For information about these taxes and amounts to withhold, see 
<link xlink:type="simple" xlink:href="http://www.irs.ustreas.gov/prod/forms_pubs/pubs/p15toc.htm" xlink:show="replace" xlink:actuate="user">Publication 15</link>, <ref>Circular E, Employer's TaxGuide</ref>. 
          </para>
        </contents>
      </section>
      <section  id="chap2sec2">
        <html:a name="chap2sec2"/>      
        <title>Employment Tax Deposits</title>
        <contents>
          <para>
Under certain circumstances, the IRS can waive the penalty for a first-time depositor's inadvertent failure to timely deposit employment taxes. For deposits required to be made after January 18, 1999, this waiver is expanded to include the first deposit required to be made after a required change in frequency of a taxpayer's deposits. 
          </para>
        </contents>
      </section>
      <section id="chap2sec3">
        <html:a name="chap2sec3"/>      
        <title>Electronic Deposit of Taxes</title>
        <contents>
          <para>
If you were first required to deposit taxes by electronic funds transfer after June 30, 1997, the IRS will not impose the penalty for not doing so before July 1, 1999. Previously, the IRS had waived the penalty through December 31, 1998. For information about depositing taxes electronically, see <link xlink:type="simple" xlink:href="http://www.irs.ustreas.gov/prod/forms_pubs/pubs/p15toc.htm" xlink:show="replace" xlink:actuate="user">Publication 15</link>. 
          </para>
        </contents>
      </section>
      <section id="chap2sec4">
        <html:a name="chap2sec4"/>      
        <title>941 TeleFile</title>
        <contents>
          <para>
Beginning with the first quarter of 1998, many employers were able to file Form941 by phone, toll free. If you receive 941 TeleFile with your Form 941 package, check page TEL-1 of the <ref>941 TeleFile Instructions</ref> to see if you qualify for this quick, convenient, and easy method of filing. 
          </para>
        </contents>
      </section>
      <section id="chap2sec5">
        <html:a name="chap2sec5"/>            
        <title>941 On-Line</title>
        <contents>
          <para>
In 1998, a limited number of employers were allowed to file Form 941 using commercially available software to create the return and then transmitting the return electronically to IRS through a third party. 941 On-Line uses Electronic Data Interchange (EDI) format. In 1999, IRS expects to make the 941 On-Line filing option available nationwide. 
          </para>
        </contents>
      </section>
      <section id="chap2sec6">
        <html:a name="chap2sec6"/>      
        <title>Self-Employment Tax </title>
        <contents>
          <para>
The self-employment tax rate on net earnings remains the same for calendar year 1999. This rate, 15.3%, is a total of 12.4% for social security (old-age, survivors,and disability insurance), and 2.9% for Medicare (hospital insurance). 
          </para>
          <para>
The maximum amount subject to the social security part for tax years beginning in 1999 has increased to $72,600. All net earnings of at least $400 are subject to the Medicare part. 
          </para>
        </contents>
      </section>
    </contents>
  </chapter>

  <chapter id="chap3">
    <html:a name="chap3"/>      
    <title>IRA and other Retirement Plans</title>
    <contents>
      <section id="chap3sec1">
        <html:a name="chap3sec1"/>      
        <title>Hardship Distributions</title>
        <contents>
          <para>
Beginning in 1999, hardship distributions from 401(k) plans and 403(b) plans are not eligible rollover distributions. They cannot be rolled over into a traditional IRA. For more information on traditional IRAs, see <link xlink:type="simple" xlink:href="http://www.irs.ustreas.gov/prod/forms_pubs/pubs/p590toc.htm" xlink:show="replace" xlink:actuate="user">Publication 590</link>. 
          </para>
        </contents>
      </section>
    </contents>
  </chapter>

  <chapter id="chap4">
    <html:a name="chap4"/>      
    <title>Gift and Estate Taxes</title>
    <contents>
      <section id="chap4sec1">
        <html:a name="chap4sec1"/>      
        <title>New Deduction From Gross Estate</title>
        <contents>
          <para>
For estates of decedents dying after 1997, the executor can elect to deduct the adjusted value of a qualified family-owned business interest, up to a limited amount, from the gross estate. For more information, see section 2057 of the Internal Revenue Code and the instructions for Schedule T, Form 706, <ref>United States Estate (and Generation-Skipping Transfer) Tax Return</ref>. 
          </para>
        </contents>
      </section>
      <section id="chap4sec2">
        <html:a name="chap4sec2"/>      
        <title>Suit for Refund</title>
        <contents>
          <para>
Effective July 23, 1998, an executor no longer needs to wait until all the installment payments have been made before filing a suit for refund with a federal district court or the U.S. Court of Federal Claims if the following conditions are met.
            <list>
              <listitem>
The estate consists largely of an interest in a closely-held business. 
              </listitem>
              <listitem>
The estate elected to make tax payments through the installment method. 
              </listitem>
            </list>
          </para>
          <para>
However, all of the following must be true before a suit can be filed. 
            <list>
              <listitem>
All installment payments due on or before the date the suit is filed have been made.
              </listitem>           
              <listitem>
No accelerated installment payments have been made. 
              </listitem>           
              <listitem>
No Tax Court case is pending with respect to any estate tax liability. 
              </listitem>           
              <listitem>
The time for petitioning the Tax Court has passed if a notice of deficiency was issued to the estate regarding its liability for estate tax. 
              </listitem>           
              <listitem>
No proceeding is pending for a declaratory judgment by the Tax Court on whether the estate is eligible to pay tax in installments. 
              </listitem>  
            </list>         
          </para>
          <para>
In addition, the executor must <emph>not</emph>: 
            <list>
              <listitem>
Include any previously litigated issues in the current suit for refund, and 
              </listitem>
              <listitem>
Discontinue making timely installment payments while the court considers the suit for refund. 
              </listitem>
            </list>
          </para>
        </contents>
      </section>
    </contents>
  </chapter>

  <chapter id="chap5">
    <html:a name="chap5"/>      
    <title>Excise Tax</title>
    <contents>
      <section id="chap5sec1">
        <html:a name="chap5sec1"/>      
        <title>Air Transportation Taxes</title>
        <contents>
          <para>
For 1999, the tax on the use of international air travel facilities will be $12.20 for both arrivals and departures. In the case of air transportation between the continental United States and Alaska or between Alaska and Hawaii, the use-of-international-facilities tax on departures will be $6.10.           
          </para>
        </contents>
      </section>
      <section id="chap5sec2">
        <html:a name="chap5sec2"/>      
        <title>Luxury Tax</title>
        <contents>
          <para>
For 1999, the luxury tax on a passenger vehicle is reduced from 7% to 6% of the amount of the sales price that exceeds the base amount. The base amount for 1999 is $36,000. 
          </para>
          <para>
The base amount is increased for electric vehicles and clean-fuel vehicles. See <link xlink:type="simple" xlink:href="http://www.irs.ustreas.gov/prod/forms_pubs/pubs/p510toc.htm" xlink:show="replace" xlink:actuate="user">Publication 510</link> for information on these amounts. 
          </para>
        </contents>
      </section>
    </contents>
  </chapter>

</book>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="rm"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="rn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="rof"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
	<identity>
		<version number="$Revision: 1.4 $"/>
		<generation date="$Date: 2008/12/08 18:18:44 $"/>
		<language type="root"/>
	</identity>
    <rbnf>
        <rulesetGrouping type="DurationRules">
            <ruleset type="duration">
                <rbnfrule value="0">=#,##0=;</rbnfrule>
            </ruleset>
        </rulesetGrouping>
    </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:22 $"/>
        <language type="ro"/>
    </identity>
</ldml>
<?xml version="1.0"?>
<!--

Description: RSS 0.90 works
Expect: feed.title.plainText() == "Mozilla Dot Org" && result.version == "rss090"

-->
<!-- The very first RSS file, circa 1999 -->
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns="http://my.netscape.com/rdf/simple/0.9/">

  <channel>
    <title>Mozilla Dot Org</title>
    <link>http://www.mozilla.org</link>
    <description>the Mozilla Organization web site</description>
  </channel>

  <image>
    <title>Mozilla</title>
    <url>http://www.mozilla.org/images/moz.gif</url>
    <link>http://www.mozilla.org</link>
  </image>

  <item>
    <title>New Status Updates</title>
    <link>http://www.mozilla.org/status/</link>
  </item>

  <item>
    <title>Bugzilla Reorganized</title>
    <link>http://www.mozilla.org/bugs/</link>
  </item>

  <item>
    <title>Mozilla Party, 2.0!</title>
    <link>http://www.mozilla.org/party/1999/</link>
  </item>

  <item>
    <title>Unix Platform Parity</title>
    <link>http://www.mozilla.org/build/unix.html</link>
  </item>

  <item>
    <title>NPL 1.0M published</title>
    <link>http://www.mozilla.org/NPL/NPL-1.0M.html</link>
  </item>

</rdf:RDF> <?xml version="1.0"?>
<!DOCTYPE rss SYSTEM "http://my.netscape.com/publish/formats/rss-0.91.dtd"> 
<!--

Description: RSS 0.91 works
Expect: feed.title.plainText() == "Scripting News" && result.version == "rss091"

-->
<rss version="0.91" xmlns="http://backend.userland.com/RsS2"> 
  <channel> 
  <language>en</language> 
  <description>
     News and commentary from the cross-platform scripting community.
  </description>
  <link>http://www.scripting.com/</link> 
  <title>Scripting News</title> 
  <image> 
    <link>http://www.scripting.com/</link> 
    <title>Scripting News</title> 
    <url>http://www.scripting.com/gifs/tinyScriptingNews.gif</url> 
  </image>
  <item> 
    <title>stuff</title>
    <link>http://bar.example.com</link>
    <description>This is an article about some stuff</description>
  </item> 
  </channel> 
</rss><?xml version="1.0"?>
<!DOCTYPE rss SYSTEM "http://my.netscape.com/publish/formats/rss-0.91.dtd"> 
<!--

Description: RSS 0.91 works
Expect: feed.title.plainText() == "Scripting News" && result.version == "rss091"

-->
<rss version="0.91"> 
  <channel> 
  <language>en</language> 
  <description>
     News and commentary from the cross-platform scripting community.
  </description>
  <link>http://www.scripting.com/</link> 
  <title>Scripting News</title> 
  <image> 
    <link>http://www.scripting.com/</link> 
    <title>Scripting News</title> 
    <url>http://www.scripting.com/gifs/tinyScriptingNews.gif</url> 
  </image>
  <item> 
    <title>stuff</title>
    <link>http://bar.example.com</link>
    <description>This is an article about some stuff</description>
  </item> 
  </channel> 
</rss><?xml version="1.0"?>
<!--

Description: RSS 0.92 works
Expect: feed.title.plainText() == "Scripting News" && result.version == "rss092"

-->
<rss version="0.92"> 
  <channel> 
  <language>en</language> 
  <description>
     News and commentary from the cross-platform scripting community.
  </description>
  <link>http://www.scripting.com/</link> 
  <title>Scripting News</title> 
  <image> 
    <link>http://www.scripting.com/</link> 
    <title>Scripting News</title> 
    <url>http://www.scripting.com/gifs/tinyScriptingNews.gif</url> 
  </image>
  <item> 
    <title>stuff</title>
    <link>http://bar.example.com</link>
    <description>This is an article about some stuff</description>
  </item> 
  </channel> 
</rss><?xml version="1.0"?>
<!--

Description: RSS 0.93 works
Expect: feed.title.plainText() == "Scripting News" && result.version == "rss093"

-->
<rss version="0.93"> 
  <channel> 
  <language>en</language> 
  <description>
     News and commentary from the cross-platform scripting community.
  </description>
  <link>http://www.scripting.com/</link> 
  <title>Scripting News</title> 
  <image> 
    <link>http://www.scripting.com/</link> 
    <title>Scripting News</title> 
    <url>http://www.scripting.com/gifs/tinyScriptingNews.gif</url> 
  </image>
  <item> 
    <title>stuff</title>
    <link>http://bar.example.com</link>
    <description>This is an article about some stuff</description>
  </item> 
  </channel> 
</rss><?xml version="1.0"?>
<!--

Description: RSS 0.94 works
Expect: feed.title.plainText() == "Scripting News" && result.version == "rss094"

-->
<rss version="0.94"> 
  <channel> 
  <language>en</language> 
  <description>
     News and commentary from the cross-platform scripting community.
  </description>
  <link>http://www.scripting.com/</link> 
  <title>Scripting News</title> 
  <image> 
    <link>http://www.scripting.com/</link> 
    <title>Scripting News</title> 
    <url>http://www.scripting.com/gifs/tinyScriptingNews.gif</url> 
  </image>
  <item> 
    <title>stuff</title>
    <link>http://bar.example.com</link>
    <description>This is an article about some stuff</description>
  </item> 
  </channel> 
</rss><?xml version="1.0"?>
<!--

Description: RSS unknown version works
Expect: feed.title.plainText() == "Scripting News" && result.version == "rssUnknown"

-->
<rss version="0.95"> 
  <channel> 
  <language>en</language> 
  <description>
     News and commentary from the cross-platform scripting community.
  </description>
  <link>http://www.scripting.com/</link> 
  <title>Scripting News</title> 
  <image> 
    <link>http://www.scripting.com/</link> 
    <title>Scripting News</title> 
    <url>http://www.scripting.com/gifs/tinyScriptingNews.gif</url> 
  </image>
  <item> 
    <title>stuff</title>
    <link>http://bar.example.com</link>
    <description>This is an article about some stuff</description>
  </item> 
  </channel> 
</rss><?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:25 $"/>
        <language type="ru"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="rwk"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="rw"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="saq"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="sbp"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="scaleBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">
  
  <binding id="scalethumb" extends="xul:button" role="xul:thumb">
    <resources>
      <stylesheet src="chrome://global/skin/scale.css"/>
    </resources>
  </binding>

  <binding id="scaleslider" display="xul:slider"
           extends="chrome://global/content/bindings/general.xml#basecontrol">
    <resources>
      <stylesheet src="chrome://global/skin/scale.css"/>
    </resources>
  </binding>

  <binding id="scale" role="xul:scale"
           extends="chrome://global/content/bindings/general.xml#basecontrol">
    <resources>
      <stylesheet src="chrome://global/skin/scale.css"/>
    </resources>

    <content align="center" pack="center">
      <xul:slider anonid="slider" class="scale-slider" snap="true" flex="1"
                  xbl:inherits="disabled,orient,dir,curpos=value,minpos=min,maxpos=max,increment,pageincrement,movetoclick">
        <xul:thumb class="scale-thumb" xbl:inherits="disabled,orient"/>
      </xul:slider>
    </content>
    
    <implementation implements="nsISliderListener">
      <property name="value" onget="return this._getIntegerAttribute('curpos', 0);"
                             onset="return this._setIntegerAttribute('curpos', val);"/>
      <property name="min" onget="return this._getIntegerAttribute('minpos', 0);"
                           onset="return this._setIntegerAttribute('minpos', val);"/>
      <property name="max" onget="return this._getIntegerAttribute('maxpos', 100);"
                           onset="return this._setIntegerAttribute('maxpos', val);"/>
      <property name="increment" onget="return this._getIntegerAttribute('increment', 1);"
                                 onset="return this._setIntegerAttribute('increment', val);"/>
      <property name="pageIncrement" onget="return this._getIntegerAttribute('pageincrement', 10);"
                                     onset="return this._setIntegerAttribute('pageincrement', val);"/>

      <property name="_slider" readonly="true">
        <getter>
          if (!this._sliderElement)
            this._sliderElement = document.getAnonymousElementByAttribute(this, "anonid", "slider");
          return this._sliderElement;
        </getter>
      </property>

      <constructor>
        <![CDATA[
          this._userChanged = false;
          var value = parseInt(this.getAttribute("value"), 10);
          if (!isNaN(value))
            this.value = value;
          else if (this.min > 0)
            this.value = this.min;
          else if (this.max < 0)
            this.value = this.max;
        ]]>
      </constructor>

      <method name="_getIntegerAttribute">
        <parameter name="aAttr"/>
        <parameter name="aDefaultValue"/>
        <body>
          var value = this._slider.getAttribute(aAttr);
          var intvalue = parseInt(value, 10);
          if (!isNaN(intvalue))
            return intvalue;
          return aDefaultValue;
        </body>
      </method>

      <method name="_setIntegerAttribute">
        <parameter name="aAttr"/>
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          var intvalue = parseInt(aValue, 10);
          if (!isNaN(intvalue)) {
            if (aAttr == "curpos") {
              if (intvalue < this.min)
                intvalue = this.min;
              else if (intvalue > this.max)
                intvalue = this.max;
            }
            this._slider.setAttribute(aAttr, intvalue);
          }
          return aValue;
        ]]>
        </body>
      </method>

      <method name="decrease">
        <body>
        <![CDATA[
          var newpos = this.value - this.increment;
          var startpos = this.min;
          this.value = (newpos > startpos) ? newpos : startpos;
        ]]>
        </body>
      </method>
      <method name="increase">
        <body>
        <![CDATA[
          var newpos = this.value + this.increment;
          var endpos = this.max;
          this.value = (newpos < endpos) ? newpos : endpos;
        ]]>
        </body>
      </method>

      <method name="decreasePage">
        <body>
        <![CDATA[
          var newpos = this.value - this.pageIncrement;
          var startpos = this.min;
          this.value = (newpos > startpos) ? newpos : startpos;
        ]]>
        </body>
      </method>
      <method name="increasePage">
        <body>
        <![CDATA[
          var newpos = this.value + this.pageIncrement;
          var endpos = this.max;
          this.value = (newpos < endpos) ? newpos : endpos;
        ]]>
        </body>
      </method>

      <method name="valueChanged">
        <parameter name="which"/>
        <parameter name="newValue"/>
        <parameter name="userChanged"/>
        <body>
        <![CDATA[
          switch (which) {
            case "curpos":
              this.setAttribute("value", newValue);

              // in the future, only fire the change event when userChanged
              // or _userChanged is true
              var changeEvent = document.createEvent("Events");
              changeEvent.initEvent("change", true, true);
              this.dispatchEvent(changeEvent);
              break;

            case "minpos":
              this.setAttribute("min", newValue);
              break;

            case "maxpos":
              this.setAttribute("max", newValue);
              break;
          }
        ]]>
        </body>
      </method>

      <method name="dragStateChanged">
        <parameter name="isDragging"/>
        <body/>
      </method>
    </implementation>

    <handlers>
      <handler event="keypress" keycode="VK_LEFT" preventdefault="true">
        <![CDATA[
          this._userChanged = true;
          (this.orient != "vertical" && this.dir == "reverse") ? this.increase() : this.decrease();
          this._userChanged = false;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_RIGHT" preventdefault="true">
        <![CDATA[
          this._userChanged = true;
          (this.orient != "vertical" && this.dir == "reverse") ? this.decrease() : this.increase();
          this._userChanged = false;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_UP" preventdefault="true">
        <![CDATA[
          this._userChanged = true;
          (this.orient == "vertical" && this.dir != "reverse") ? this.decrease() : this.increase();
          this._userChanged = false;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_DOWN" preventdefault="true">
        <![CDATA[
          this._userChanged = true;
          (this.orient == "vertical" && this.dir != "reverse") ? this.increase() : this.decrease();
          this._userChanged = false;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_PAGE_UP" preventdefault="true">
        <![CDATA[
          this._userChanged = true;
          (this.orient == "vertical" && this.dir != "reverse") ? this.decreasePage() : this.increasePage();
          this._userChanged = false;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_PAGE_DOWN" preventdefault="true">
        <![CDATA[
          this._userChanged = true;
          (this.orient == "vertical" && this.dir != "reverse") ? this.increasePage() : this.decreasePage();
          this._userChanged = false;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_HOME" preventdefault="true">
        this._userChanged = true;
        this.value = (this.dir == "reverse") ? this.max : this.min;
        this._userChanged = false;
      </handler>
      <handler event="keypress" keycode="VK_END" preventdefault="true">
        this._userChanged = true;
        this.value = (this.dir == "reverse") ? this.min : this.max;
        this._userChanged = false;
      </handler>
    </handlers>

  </binding>
</bindings>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#scope"/>
  <link rel="match" href="reftest/ref-lime-1.xml"/>
  <meta name="flags" content="invalid"/>
  <title>CSS Namespaces Test Suite: scope &lt;style></title>
  <style>
   @namespace x url("test");
   test { background:lime }
  </style>
  <style>
   x|test { background:red }
  </style>
 </head>
 <body>
  <p><test xmlns="test">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#scope"/>
  <link rel="match" href="reftest/ref-lime-1.xml"/>
  <title>CSS Namespaces Test Suite: scope @import</title>
  <style>
   test { background:lime }
  </style>
  <style>
   @import url("support/scope-002a.css");
   @import url("support/scope-002b.css");
   @namespace w "test";
   x|test { background:red }
  </style>
 </head>
 <body>
  <p><test xmlns="test">This sentence should have a green background.</test></p>
 </body>
</html>
<?xml version="1.0"?>
<?xml-stylesheet href="docbook.css" type="text/css"?>
<!DOCTYPE Book System "file:///E|/Program%20Files/SoftQuad/XMetaL/Rules/docbook.dtd">
<Book xmlns:html="http://www.w3.org/1999/xhtml">
  <Title>The Book</Title>
  <Chapter>
    <Title>Chapter 1.</Title>
    <Para>Yada yada <html:img src="mzcolor.gif"/> yada.</Para>
  </Chapter>
  <html:script>
<![CDATA[
function list(node)
{
    var type = node.nodeType;
    if (type == Node.ELEMENT_NODE) {

        // open tag
        dump("\<" + node.tagName);

        // dump the attributes if any
        attributes = node.attributes;
        if (null != attributes) {
            var countAttrs = attributes.length;
            var index = 0;
            while(index < countAttrs) {
                att = attributes[index];
                if (null != att) {
                    dump(" " + att.name + "=" + att.value);
                }
                index++;
            }
        }

        // recursively dump the children
        if (node.hasChildNodes()) {
	    // close tag
            dump(">");

            // get the children
            var children = node.childNodes;
            var length = children.length;
            var count = 0;
            while(count < length) {
                child = children[count];
                list(child);
                count++;
            }
            dump("</" + node.tagName + ">");
        }
	else {
	    // close tag
            dump("/>");
        }

        
    }
    // if it's a piece of text just dump the text
    else if (type == Node.TEXT_NODE) {
        dump(node.data);
    }
}

list(document.documentElement);
dump("\n");
]]>
  </html:script>	
</Book>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="scrollbarBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">
  
  <binding id="thumb" extends="xul:button" />

  <binding id="scrollbar-base" bindToUntrustedContent="true">
    <handlers>
      <handler event="contextmenu" preventdefault="true" action="event.stopPropagation();"/>
      <handler event="click" preventdefault="true" action="event.stopPropagation();"/>
      <handler event="dblclick" action="event.stopPropagation();"/>
      <handler event="command" action="event.stopPropagation();"/>
    </handlers>
  </binding>

  <binding id="scrollbar" bindToUntrustedContent="true" extends="chrome://global/content/bindings/scrollbar.xml#scrollbar-base">
    <content clickthrough="always">
      <xul:scrollbarbutton sbattr="scrollbar-up-top" type="decrement" xbl:inherits="curpos,maxpos,disabled,sborient=orient"/>
      <xul:scrollbarbutton sbattr="scrollbar-down-top" type="increment" xbl:inherits="curpos,maxpos,disabled,sborient=orient"/>
      <xul:slider flex="1" xbl:inherits="disabled,curpos,maxpos,pageincrement,increment,orient,sborient=orient">
        <xul:thumb sbattr="scrollbar-thumb" xbl:inherits="orient,sborient=orient,collapsed=disabled" 
                   align="center" pack="center"/>
      </xul:slider>
      <xul:scrollbarbutton sbattr="scrollbar-up-bottom" type="decrement" xbl:inherits="curpos,maxpos,disabled,sborient=orient"/>
      <xul:scrollbarbutton sbattr="scrollbar-down-bottom" type="increment" xbl:inherits="curpos,maxpos,disabled,sborient=orient"/>
    </content>
  </binding>
</bindings>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="arrowscrollboxBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="scrollbox-base" extends="chrome://global/content/bindings/general.xml#basecontrol">
    <resources>
      <stylesheet src="chrome://global/skin/scrollbox.css"/>
    </resources>
  </binding>

  <binding id="scrollbox" extends="chrome://global/content/bindings/scrollbox.xml#scrollbox-base">
    <content>
      <xul:box class="box-inherit scrollbox-innerbox" xbl:inherits="orient,align,pack,dir" flex="1">
        <children/>
      </xul:box>
    </content>
  </binding>

  <binding id="arrowscrollbox" extends="chrome://global/content/bindings/scrollbox.xml#scrollbox-base">
    <content>
      <xul:autorepeatbutton class="autorepeatbutton-up"
                            anonid="scrollbutton-up"
                            xbl:inherits="orient,collapsed=notoverflowing,disabled=scrolledtostart"
                            oncommand="_autorepeatbuttonScroll(event);"/>
      <xul:spacer class="arrowscrollbox-overflow-start-indicator"
                  xbl:inherits="collapsed=scrolledtostart"/>
      <xul:scrollbox class="arrowscrollbox-scrollbox"
                     anonid="scrollbox"
                     flex="1"
                     xbl:inherits="orient,align,pack,dir">
        <children/>
      </xul:scrollbox>
      <xul:spacer class="arrowscrollbox-overflow-end-indicator"
                  xbl:inherits="collapsed=scrolledtoend"/>
      <xul:autorepeatbutton class="autorepeatbutton-down"
                            anonid="scrollbutton-down"
                            xbl:inherits="orient,collapsed=notoverflowing,disabled=scrolledtoend"
                            oncommand="_autorepeatbuttonScroll(event);"/>
    </content>

    <implementation>
      <constructor><![CDATA[
        this.setAttribute("notoverflowing", "true");
        this._updateScrollButtonsDisabledState();
      ]]></constructor>

      <destructor><![CDATA[
        this._stopSmoothScroll();
      ]]></destructor>

      <field name="_scrollbox">
        document.getAnonymousElementByAttribute(this, "anonid", "scrollbox");
      </field>
      <field name="_scrollButtonUp">
        document.getAnonymousElementByAttribute(this, "anonid", "scrollbutton-up");
      </field>
      <field name="_scrollButtonDown">
        document.getAnonymousElementByAttribute(this, "anonid", "scrollbutton-down");
      </field>

      <field name="__prefBranch">null</field>
      <property name="_prefBranch" readonly="true">
        <getter><![CDATA[
          if (this.__prefBranch === null) {
            this.__prefBranch = Components.classes['@mozilla.org/preferences-service;1']
                                          .getService(Components.interfaces.nsIPrefBranch);
          }
          return this.__prefBranch;
        ]]></getter>
      </property>

      <field name="_scrollIncrement">null</field>
      <property name="scrollIncrement" readonly="true">
        <getter><![CDATA[
          if (this._scrollIncrement === null) {
            try {
              this._scrollIncrement = this._prefBranch
                                          .getIntPref("toolkit.scrollbox.scrollIncrement");
            }
            catch (ex) {
              this._scrollIncrement = 20;
            }
          }
          return this._scrollIncrement;
        ]]></getter>
      </property>

      <field name="_smoothScroll">null</field>
      <property name="smoothScroll">
        <getter><![CDATA[
          if (this._smoothScroll === null) {
            if (this.hasAttribute("smoothscroll")) {
              this._smoothScroll = (this.getAttribute("smoothscroll") == "true");
            } else {
              try {
                this._smoothScroll = this._prefBranch
                                         .getBoolPref("toolkit.scrollbox.smoothScroll");
              }
              catch (ex) {
                this._smoothScroll = true;
              }
            }
          }
          return this._smoothScroll;
        ]]></getter>
        <setter><![CDATA[
          this._smoothScroll = val;
          return val;
        ]]></setter>
      </property>

      <field name="_scrollBoxObject">null</field>
      <property name="scrollBoxObject" readonly="true">
        <getter><![CDATA[
          if (!this._scrollBoxObject) {
            this._scrollBoxObject = this._scrollbox.boxObject;
          }
          return this._scrollBoxObject;
        ]]></getter>
      </property>

      <property name="scrollClientRect" readonly="true">
        <getter><![CDATA[
          return this._scrollbox.getBoundingClientRect();
        ]]></getter>
      </property>

      <property name="scrollClientSize" readonly="true">
        <getter><![CDATA[
          return this.orient == "vertical" ?
                 this._scrollbox.clientHeight :
                 this._scrollbox.clientWidth;
        ]]></getter>
      </property>

      <property name="scrollSize" readonly="true">
        <getter><![CDATA[
          return this.orient == "vertical" ?
                 this._scrollbox.scrollHeight :
                 this._scrollbox.scrollWidth;
        ]]></getter>
      </property>
      <property name="scrollPaddingRect" readonly="true">
        <getter><![CDATA[
          // This assumes that this._scrollbox doesn't have any border.
          var outerRect = this.scrollClientRect;
          var innerRect = {};
          innerRect.left = outerRect.left - this._scrollbox.scrollLeft;
          innerRect.top = outerRect.top - this._scrollbox.scrollTop;
          innerRect.right = innerRect.left + this._scrollbox.scrollWidth;
          innerRect.bottom = innerRect.top + this._scrollbox.scrollHeight;
          return innerRect;
        ]]></getter>
      </property>
      <property name="scrollboxPaddingStart" readonly="true">
        <getter><![CDATA[
          var ltr = (window.getComputedStyle(this, null).direction == "ltr");
          var paddingStartName = ltr ? "padding-left" : "padding-right";
          var scrollboxStyle = window.getComputedStyle(this._scrollbox, null);
          return parseFloat(scrollboxStyle.getPropertyValue(paddingStartName));
        ]]></getter>
      </property>
      <property name="scrollPosition">
        <getter><![CDATA[
          return this.orient == "vertical" ?
                 this._scrollbox.scrollTop :
                 this._scrollbox.scrollLeft;
        ]]></getter>
        <setter><![CDATA[
          if (this.orient == "vertical")
            this._scrollbox.scrollTop = val;
          else
            this._scrollbox.scrollLeft = val;
          return val;
        ]]></setter>
      </property>

      <property name="_startEndProps" readonly="true">
        <getter><![CDATA[
          return this.orient == "vertical" ?
                 ["top", "bottom"] : ["left", "right"];
        ]]></getter>
      </property>

      <field name="_isRTLScrollbox"><![CDATA[
        this.orient != "vertical" &&
        document.defaultView.getComputedStyle(this._scrollbox, "").direction == "rtl";
      ]]></field>

      <field name="_scrollTarget">null</field>

      <method name="_canScrollToElement">
        <parameter name="element"/>
        <body><![CDATA[
          return window.getComputedStyle(element).display != "none";
        ]]></body>
      </method>

      <method name="ensureElementIsVisible">
        <parameter name="element"/>
        <parameter name="aSmoothScroll"/>
        <body><![CDATA[
          if (!this._canScrollToElement(element))
            return;

          var vertical = this.orient == "vertical";
          var rect = this.scrollClientRect;
          var containerStart = vertical ? rect.top : rect.left;
          var containerEnd = vertical ? rect.bottom : rect.right;
          rect = element.getBoundingClientRect();
          var elementStart = vertical ? rect.top : rect.left;
          var elementEnd = vertical ? rect.bottom : rect.right;

          var scrollPaddingRect = this.scrollPaddingRect;
          let style = window.getComputedStyle(this._scrollbox, null);
          var scrollContentRect = {
            left: scrollPaddingRect.left + parseFloat(style.paddingLeft),
            top: scrollPaddingRect.top + parseFloat(style.paddingTop),
            right: scrollPaddingRect.right - parseFloat(style.paddingRight),
            bottom: scrollPaddingRect.bottom - parseFloat(style.paddingBottom)
          };

          // Provide an entry point for derived bindings to adjust these values.
          if (this._adjustElementStartAndEnd) {
            [elementStart, elementEnd] =
              this._adjustElementStartAndEnd(element, elementStart, elementEnd);
          }

          if (elementStart <= (vertical ? scrollContentRect.top : scrollContentRect.left)) {
            elementStart = vertical ? scrollPaddingRect.top : scrollPaddingRect.left;
          }
          if (elementEnd >= (vertical ? scrollContentRect.bottom : scrollContentRect.right)) {
            elementEnd = vertical ? scrollPaddingRect.bottom : scrollPaddingRect.right;
          }

          var amountToScroll;

          if (elementStart < containerStart) {
            amountToScroll = elementStart - containerStart;
          } else if (containerEnd < elementEnd) {
            amountToScroll = elementEnd - containerEnd;
          } else if (this._isScrolling) {
            // decelerate if a currently-visible element is selected during the scroll
            const STOP_DISTANCE = 15;
            if (this._isScrolling == -1 && elementStart - STOP_DISTANCE < containerStart)
              amountToScroll = elementStart - containerStart;
            else if (this._isScrolling == 1 && containerEnd - STOP_DISTANCE < elementEnd)
              amountToScroll = elementEnd - containerEnd;
            else
              amountToScroll = this._isScrolling * STOP_DISTANCE;
          } else {
            return;
          }

          this._stopSmoothScroll();

          if (aSmoothScroll != false && this.smoothScroll) {
            this._smoothScrollByPixels(amountToScroll, element);
          } else {
            this.scrollByPixels(amountToScroll);
          }
        ]]></body>
      </method>

      <method name="_smoothScrollByPixels">
        <parameter name="amountToScroll"/>
        <parameter name="element"/><!-- optional -->
        <body><![CDATA[
          this._stopSmoothScroll();
          if (amountToScroll == 0)
            return;

          this._scrollTarget = element;
          // Positive amountToScroll makes us scroll right (elements fly left), negative scrolls left.
          this._isScrolling = amountToScroll < 0 ? -1 : 1;

          this._scrollAnim.start(amountToScroll);
        ]]></body>
      </method>

      <field name="_scrollAnim"><![CDATA[({
        scrollbox: this,
        requestHandle: 0, /* 0 indicates there is no pending request */
        start: function scrollAnim_start(distance) {
          this.distance = distance;
          this.startPos = this.scrollbox.scrollPosition;
          this.duration = Math.min(1000, Math.round(50 * Math.sqrt(Math.abs(distance))));
          this.startTime = window.mozAnimationStartTime;

          if (!this.requestHandle)
            this.requestHandle = window.mozRequestAnimationFrame(this);
        },
        stop: function scrollAnim_stop() {
          window.mozCancelAnimationFrame(this.requestHandle);
          this.requestHandle = 0;
        },
        sample: function scrollAnim_handleEvent(timeStamp) {
          const timePassed = timeStamp - this.startTime;
          const pos = timePassed >= this.duration ? 1 :
                      1 - Math.pow(1 - timePassed / this.duration, 4);

          this.scrollbox.scrollPosition = this.startPos + (this.distance * pos);

          if (pos == 1)
            this.scrollbox._stopSmoothScroll();
          else
            this.requestHandle = window.mozRequestAnimationFrame(this);
        }
      })]]></field>

      <method name="scrollByIndex">
        <parameter name="index"/>
        <parameter name="aSmoothScroll"/>
        <body><![CDATA[
          if (index == 0)
            return;

          // Each scrollByIndex call is expected to scroll the given number of
          // items. If a previous call is still in progress because of smooth
          // scrolling, we need to complete it before starting a new one.
          if (this._scrollTarget) {
            let elements = this._getScrollableElements();
            if (this._scrollTarget != elements[0] &&
                this._scrollTarget != elements[elements.length - 1])
              this.ensureElementIsVisible(this._scrollTarget, false);
          }

          var rect = this.scrollClientRect;
          var [start, end] = this._startEndProps;
          var x = index > 0 ? rect[end] + 1 : rect[start] - 1;
          var nextElement = this._elementFromPoint(x, index);
          if (!nextElement)
            return;

          var targetElement;
          if (this._isRTLScrollbox)
            index *= -1;
          while (index < 0 && nextElement) {
            if (this._canScrollToElement(nextElement))
              targetElement = nextElement;
            nextElement = nextElement.previousSibling;
            index++;
          }
          while (index > 0 && nextElement) {
            if (this._canScrollToElement(nextElement))
              targetElement = nextElement;
            nextElement = nextElement.nextSibling;
            index--;
          }
          if (!targetElement)
            return;

          this.ensureElementIsVisible(targetElement, aSmoothScroll);
        ]]></body>
      </method>

      <method name="_getScrollableElements">
        <body><![CDATA[
          var nodes = this.childNodes;
          if (nodes.length == 1 &&
              nodes[0].localName == "children" &&
              nodes[0].namespaceURI == "http://www.mozilla.org/xbl") {
            nodes = document.getBindingParent(this).childNodes;
          }

          return Array.filter(nodes, this._canScrollToElement, this);
        ]]></body>
      </method>

      <method name="_elementFromPoint">
        <parameter name="aX"/>
        <parameter name="aPhysicalScrollDir"/>
        <body><![CDATA[
          var elements = this._getScrollableElements();
          if (!elements.length)
            return null;

          if (this._isRTLScrollbox)
            elements.reverse();

          var [start, end] = this._startEndProps;
          var low = 0;
          var high = elements.length - 1;

          if (aX < elements[low].getBoundingClientRect()[start] ||
              aX > elements[high].getBoundingClientRect()[end])
            return null;

          var mid, rect;
          while (low <= high) {
            mid = Math.floor((low + high) / 2);
            rect = elements[mid].getBoundingClientRect();
            if (rect[start] > aX)
              high = mid - 1; 
            else if (rect[end] < aX)
              low = mid + 1;
            else
              return elements[mid];
          }

          // There's no element at the requested coordinate, but the algorithm
          // from above yields an element next to it, in a random direction.
          // The desired scrolling direction leads to the correct element.

          if (!aPhysicalScrollDir)
            return null;

          if (aPhysicalScrollDir < 0 && rect[start] > aX)
            mid = Math.max(mid - 1, 0);
          else if (aPhysicalScrollDir > 0 && rect[end] < aX)
            mid = Math.min(mid + 1, elements.length - 1);

          return elements[mid];
        ]]></body>
      </method>

      <method name="_autorepeatbuttonScroll">
        <parameter name="event"/>
        <body><![CDATA[
          var dir = event.originalTarget == this._scrollButtonUp ? -1 : 1;
          if (this._isRTLScrollbox)
            dir *= -1;

          this.scrollByPixels(this.scrollIncrement * dir);

          event.stopPropagation();
        ]]></body>
      </method>

      <method name="scrollByPixels">
        <parameter name="px"/>
        <body><![CDATA[
          this.scrollPosition += px;
        ]]></body>
      </method>

      <!-- 0: idle
           1: scrolling right
          -1: scrolling left -->
      <field name="_isScrolling">0</field>
      <field name="_prevMouseScrolls">[null, null]</field>

      <method name="_stopSmoothScroll">
        <body><![CDATA[
          if (this._isScrolling) {
            this._scrollAnim.stop();
            this._isScrolling = 0;
            this._scrollTarget = null;
          }
        ]]></body>
      </method>

      <method name="_updateScrollButtonsDisabledState">
        <body><![CDATA[
          var scrolledToStart = false;
          var scrolledToEnd = false;

          if (this.hasAttribute("notoverflowing")) {
            scrolledToStart = true;
            scrolledToEnd = true;
          }
          else if (this.scrollPosition == 0) {
            // In the RTL case, this means the _last_ element in the
            // scrollbox is visible
            if (this._isRTLScrollbox) 
              scrolledToEnd = true;
            else
              scrolledToStart = true;
          }
          else if (this.scrollClientSize + this.scrollPosition == this.scrollSize) {
            // In the RTL case, this means the _first_ element in the
            // scrollbox is visible
            if (this._isRTLScrollbox)
              scrolledToStart = true;
            else
              scrolledToEnd = true;
          }

          if (scrolledToEnd)
            this.setAttribute("scrolledtoend", "true");
          else
            this.removeAttribute("scrolledtoend");

          if (scrolledToStart)
            this.setAttribute("scrolledtostart", "true");
          else
            this.removeAttribute("scrolledtostart");
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="DOMMouseScroll"><![CDATA[
        if (this.orient == "vertical") {
          // prevent horizontal scrolling from scrolling a vertical scrollbox
          if (event.axis == event.HORIZONTAL_AXIS)
            return;
          this.scrollByIndex(event.detail);
        }
        // We allow vertical scrolling to scroll a horizontal scrollbox
        // because many users have a vertical scroll wheel but no
        // horizontal support.
        // Because of this, we need to avoid scrolling chaos on trackpads
        // and mouse wheels that support simultaneous scrolling in both axes.
        // We do this by scrolling only when the last two scroll events were
        // on the same axis as the current scroll event.
        else {
          let isVertical = event.axis == event.VERTICAL_AXIS;

          if (this._prevMouseScrolls.every(function(prev) prev == isVertical))
            this.scrollByIndex(isVertical && this._isRTLScrollbox ? -event.detail :
                                                                    event.detail);

          if (this._prevMouseScrolls.length > 1)
            this._prevMouseScrolls.shift();
          this._prevMouseScrolls.push(isVertical);
        }

        event.stopPropagation();
        event.preventDefault();
      ]]></handler>

      <handler event="MozMousePixelScroll"><![CDATA[
        event.stopPropagation();
        event.preventDefault();
      ]]></handler>

      <handler event="underflow" phase="capturing"><![CDATA[
        // filter underflow events which were dispatched on nested scrollboxes
        if (event.target != this)
          return;

        // Ignore events that doesn't match our orientation.
        // Scrollport event orientation:
        //   0: vertical
        //   1: horizontal
        //   2: both
        if (this.orient == "vertical") {
          if (event.detail == 1)
            return;
        }
        else {    // horizontal scrollbox
          if (event.detail == 0)
            return;
        }

        this.setAttribute("notoverflowing", "true");

        try {
          // See bug 341047 and comments in overflow handler as to why 
          // try..catch is needed here
          this._updateScrollButtonsDisabledState();

          let childNodes = this._getScrollableElements();
          if (childNodes && childNodes.length)
            this.ensureElementIsVisible(childNodes[0], false);
        }
        catch(e) {
          this.removeAttribute("notoverflowing");
        }
      ]]></handler>

      <handler event="overflow" phase="capturing"><![CDATA[
        // filter underflow events which were dispatched on nested scrollboxes
        if (event.target != this)
          return;

        // Ignore events that doesn't match our orientation.
        // Scrollport event orientation:
        //   0: vertical
        //   1: horizontal
        //   2: both
        if (this.orient == "vertical") {
          if (event.detail == 1)
            return;
        }
        else {    // horizontal scrollbox
          if (event.detail == 0)
            return;
        }

        this.removeAttribute("notoverflowing");

        try {
          // See bug 341047, the overflow event is dispatched when the 
          // scrollbox already is mostly destroyed. This causes some code in
          // _updateScrollButtonsDisabledState() to throw an error. It also
          // means that the notoverflowing attribute was removed erroneously,
          // as the whole overflow event should not be happening in that case.
          this._updateScrollButtonsDisabledState();
        } 
        catch(e) {
          this.setAttribute("notoverflowing", "true");
        }
      ]]></handler>

      <handler event="scroll" action="this._updateScrollButtonsDisabledState()"/>
    </handlers>
  </binding>

  <binding id="autorepeatbutton" extends="chrome://global/content/bindings/scrollbox.xml#scrollbox-base">
    <content repeat="hover">
      <xul:image class="autorepeatbutton-icon"/>
    </content>
  </binding>

  <binding id="arrowscrollbox-clicktoscroll" extends="chrome://global/content/bindings/scrollbox.xml#arrowscrollbox">
    <content>
      <xul:toolbarbutton class="scrollbutton-up"
                         xbl:inherits="orient,collapsed=notoverflowing,disabled=scrolledtostart"
                         anonid="scrollbutton-up"
                         onclick="_distanceScroll(event);"
                         onmousedown="if (event.button == 0) _startScroll(-1);"
                         onmouseup="if (event.button == 0) _stopScroll();"
                         onmouseover="_continueScroll(-1);"
                         onmouseout="_pauseScroll();"/>
      <xul:spacer class="arrowscrollbox-overflow-start-indicator"
                  xbl:inherits="collapsed=scrolledtostart"/>
      <xul:scrollbox class="arrowscrollbox-scrollbox"
                     anonid="scrollbox"
                     flex="1"
                     xbl:inherits="orient,align,pack,dir">
        <children/>
      </xul:scrollbox>
      <xul:spacer class="arrowscrollbox-overflow-end-indicator"
                  xbl:inherits="collapsed=scrolledtoend"/>
      <xul:toolbarbutton class="scrollbutton-down"
                         xbl:inherits="orient,collapsed=notoverflowing,disabled=scrolledtoend"
                         anonid="scrollbutton-down"
                         onclick="_distanceScroll(event);"
                         onmousedown="if (event.button == 0) _startScroll(1);"
                         onmouseup="if (event.button == 0) _stopScroll();"
                         onmouseover="_continueScroll(1);"
                         onmouseout="_pauseScroll();"/>
    </content>
    <implementation implements="nsITimerCallback, nsIDOMEventListener">
      <constructor><![CDATA[
        try {
          this._scrollDelay = this._prefBranch
                                  .getIntPref("toolkit.scrollbox.clickToScroll.scrollDelay");
        }
        catch (ex) {
        }
      ]]></constructor>

      <destructor><![CDATA[
        // Release timer to avoid reference cycles.
        if (this._scrollTimer) {
          this._scrollTimer.cancel();
          this._scrollTimer = null;
        }
      ]]></destructor>

      <field name="_scrollIndex">0</field>
      <field name="_scrollDelay">150</field>

      <method name="notify">
        <parameter name="aTimer"/>
        <body>
        <![CDATA[
          if (!document)
            aTimer.cancel();

          this.scrollByIndex(this._scrollIndex);
        ]]>
        </body>
      </method>

      <field name="_arrowScrollAnim"><![CDATA[({
        scrollbox: this,
        requestHandle: 0, /* 0 indicates there is no pending request */
        start: function arrowSmoothScroll_start() {
          this.lastFrameTime = window.mozAnimationStartTime;
          if (!this.requestHandle)
            this.requestHandle = window.mozRequestAnimationFrame(this);
        },
        stop: function arrowSmoothScroll_stop() {
          window.mozCancelAnimationFrame(this.requestHandle);
          this.requestHandle = 0;
        },
        sample: function arrowSmoothScroll_handleEvent(timeStamp) {
          const scrollIndex = this.scrollbox._scrollIndex;
          const timePassed = timeStamp - this.lastFrameTime;
          this.lastFrameTime = timeStamp;
          
          const scrollDelta = 0.5 * timePassed * scrollIndex;
          this.scrollbox.scrollPosition += scrollDelta;

          this.requestHandle = window.mozRequestAnimationFrame(this);
        }
      })]]></field>

      <method name="_startScroll">
        <parameter name="index"/>
        <body><![CDATA[
          if (this._isRTLScrollbox)
            index *= -1;
          this._scrollIndex = index;
          this._mousedown = true;
          if (this.smoothScroll) {
            this._arrowScrollAnim.start();
            return;
          }

          if (!this._scrollTimer)
            this._scrollTimer =
              Components.classes["@mozilla.org/timer;1"]
                        .createInstance(Components.interfaces.nsITimer);
          else
            this._scrollTimer.cancel();

          this._scrollTimer.initWithCallback(this, this._scrollDelay,
                                             this._scrollTimer.TYPE_REPEATING_SLACK);
          this.notify(this._scrollTimer);
        ]]>
        </body>
      </method>

      <method name="_stopScroll">
        <body><![CDATA[
          if (this._scrollTimer)
            this._scrollTimer.cancel();
          this._mousedown = false;
          if (!this._scrollIndex || !this.smoothScroll)
            return;

          this.scrollByIndex(this._scrollIndex);
          this._scrollIndex = 0;
          this._arrowScrollAnim.stop();
        ]]></body>
      </method>

      <method name="_pauseScroll">
        <body><![CDATA[
          if (this._mousedown) {
            this._stopScroll();
            this._mousedown = true;
            document.addEventListener("mouseup", this, false);
            document.addEventListener("blur", this, true);
          }
        ]]></body>
      </method>

      <method name="_continueScroll">
        <parameter name="index"/>
        <body><![CDATA[
          if (this._mousedown)
            this._startScroll(index);
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (aEvent.type == "mouseup" ||
              aEvent.type == "blur" && aEvent.target == document) {
            this._mousedown = false;
            document.removeEventListener("mouseup", this, false);
            document.removeEventListener("blur", this, true);
          }
        ]]></body>
      </method>

      <method name="_distanceScroll">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (aEvent.detail < 2 || aEvent.detail > 3)
            return;

          var scrollBack = (aEvent.originalTarget == this._scrollButtonUp);
          var scrollLeftOrUp = this._isRTLScrollbox ? !scrollBack : scrollBack;
          var targetElement;

          if (aEvent.detail == 2) {
            // scroll by the size of the scrollbox
            let [start, end] = this._startEndProps;
            let x;
            if (scrollLeftOrUp)
              x = this.scrollClientRect[start] - this.scrollClientSize;
            else
              x = this.scrollClientRect[end] + this.scrollClientSize;
            targetElement = this._elementFromPoint(x, scrollLeftOrUp ? -1 : 1);

            // the next partly-hidden element will become fully visible,
            // so don't scroll too far
            if (targetElement)
              targetElement = scrollBack ?
                              targetElement.nextSibling :
                              targetElement.previousSibling;
          }

          if (!targetElement) {
            // scroll to the first resp. last element
            let elements = this._getScrollableElements();
            targetElement = scrollBack ?
                            elements[0] :
                            elements[elements.length - 1];
          }

          this.ensureElementIsVisible(targetElement);
        ]]></body>
      </method>

    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright (c) 2012 The Chromium Authors. All rights reserved.
  Use of this source code is governed by a BSD-style license that can be
  found in the LICENSE file.
-->
<project name="chrome_sdk_overrides" >
  <!--
    Redefinition of targets used by SDK tools.
    Supported version: SDK tools revision 20.

    SDK tools do not allow easy way of extending classpaths
    for aidl and javac. This file defines targets which can be used to
    override targets used by tools.
  -->
  <target name="-pre-compile">
    <!--
      Remove all .class files from the output directory. This prevents inclusion of incorrect .class
      files in the final apk. For example, if a .java file was deleted, the apk should not contain
      the .class files for that .java from previous builds.
    -->
    <delete>
      <fileset dir="${out.classes.absolute.dir}" includes="**/*.class"/>
    </delete>
  </target>

  <!--
    Override the -compile target.
    This target requires 'javac.custom.classpath' to be set to reference
    of classpath to be used for javac. Also accepts custom path for
    sources: 'javac.custom.sourcepath'.
  -->
  <target
      name="-compile"
      depends="-build-setup, -pre-build, -code-gen, -pre-compile">
    <do-only-if-manifest-hasCode elseText="hasCode = false. Skipping..." >
      <!-- If javac.srcdirs.additional isn't set, set it to an empty path. -->
      <if>
        <condition>
          <not>
            <isreference refid="javac.srcdirs.additional"/>
          </not>
        </condition>
        <then>
          <path id="javac.srcdirs.additional"/>
        </then>
      </if>
      <javac
          bootclasspathref="project.target.class.path"
          classpathref="javac.custom.classpath"
          debug="true"
          destdir="${out.classes.absolute.dir}"
          encoding="${java.encoding}"
          extdirs=""
          fork="${need.javac.fork}"
          includeantruntime="false"
          source="${java.source}"
          target="${java.target}"
          verbose="${verbose}">
        <src path="${source.absolute.dir}"/>
        <src path="${gen.absolute.dir}"/>
        <src>
          <path refid="javac.srcdirs.additional"/>
        </src>
        <compilerarg line="${java.compilerargs}"/>
      </javac>
      <!--
        If the project is instrumented, then instrument the classes
        TODO(shashishekhar): Add option to override emma filter.
      -->
      <if condition="${build.is.instrumented}">
        <then>
          <echo level="info">
            Instrumenting classes from ${out.absolute.dir}/classes...
          </echo>
          <!-- build the default filter to remove R, Manifest, BuildConfig -->
          <getemmafilter
              appPackage="${project.app.package}"
              filterOut="emma.default.filter"
              libraryPackagesRefId="project.library.packages"/>
          <!--
            Define where the .em file is output.
            This may have been setup already if this is a library.
          -->
          <property name="emma.coverage.absolute.file"
              location="${out.absolute.dir}/coverage.em"/>
          <!-- It only instruments class files, not any external libs -->

          <emma enabled="true">
            <instr
                instrpath="${out.absolute.dir}/classes"
                metadatafile="${emma.coverage.absolute.file}"
                mode="overwrite"
                outdir="${out.absolute.dir}/classes"
                verbosity="${verbosity}">
              <filter excludes="${emma.default.filter}"/>
              <filter value="${emma.filter}"/>
            </instr>
          </emma>
        </then>
      </if>
      <!--
        If the project needs a test jar then generate a jar containing
        all compiled classes and referenced jars.
        project.is.testapp is set by Android's ant build system based on the
        target's manifest. It is true only for instrumentation apks.
      -->
      <if condition="${project.is.testapp}">
        <then>
          <echo level="info">Creating test jar file:
              ${ant.project.name}-debug.jar</echo>
          <property-location name="create.test.jar.file"
              location="${CHROMIUM_SRC}/build/android/ant/create-test-jar.js"/>
          <script language="javascript" src="${create.test.jar.file}"/>
        </then>
      </if>

    </do-only-if-manifest-hasCode>
  </target>

  <!--
    For debug builds, the Android SDK tools create a key in ~/.android and sign the build with it.
    This has caused all kinds of issues. Instead, the debug build should be signed with a key in
    build/android/ant. The SDK tools do not provide any support for overriding that behavior and so
    instead one must use the hack below.
  -->

  <!-- Disables automatic signing. -->
  <property name="build.is.signing.debug" value="false"/>

  <!-- TODO(cjhopman): Remove this property when all gyp files define the CHROMIUM_SRC property. -->
  <property name="CHROMIUM_SRC" value="${PRODUCT_DIR}/../.." />

  <property name="key.store" value="${CHROMIUM_SRC}/build/android/ant/chromium-debug.keystore"/>
  <property name="key.store.password" value="chromium"/>
  <property name="key.alias" value="chromiumdebugkey"/>
  <property name="key.alias.password" value="chromium"/>

  <!-- SDK tools assume that out.packaged.file is signed and name it "...-unaligned" -->
  <property name="out.packaged.file"
    value="${apks.dir}/${ant.project.name}-debug-unsigned.apk" />
  <property name="out.unaligned.file"
    value="${apks.dir}/${ant.project.name}-debug-unaligned.apk" />

  <!-- By default, the SDK tools build only aligns the APK in the -do-debug target. -->
  <target name="-do-debug"
      depends="-set-debug-mode, -debug-obfuscation-check, -package, -post-package">
    <!-- only create apk if *not* a library project -->
    <do-only-if-not-library elseText="Library project: do not create apk..." >
      <sequential>
        <!-- Signs the APK -->
        <echo level="info">Signing final apk...</echo>
        <signapk
          input="${out.packaged.file}"
          output="${out.unaligned.file}"
          keystore="${key.store}"
          storepass="${key.store.password}"
          alias="${key.alias}"
          keypass="${key.alias.password}"/>

        <!-- Zip aligns the APK -->
        <zipalign-helper
          in.package="${out.unaligned.file}"
          out.package="${out.final.file}" />
        <echo level="info">Release Package: ${out.final.file}</echo>
      </sequential>
    </do-only-if-not-library>
    <record-build-info />
  </target>

  <path id="native.libs.gdbserver">
    <fileset file="${android.gdbserver}"/>
  </path>

  <target name="-post-compile">
    <!--
      Copy gdbserver to main libs directory if building a non-instrumentation debug apk.
      TODO(jrg): For now, Chrome on Android always builds native code
      as Release and java/ant as Debug, which means we always install
      gdbserver.  Resolve this discrepancy, possibly by making this
      Release Official build java/ant as Release.
    -->
    <if>
      <condition>
        <and>
          <equals arg1="${build.target}" arg2="debug"/>
          <isfalse value="${project.is.testapp}"/>
        </and>
      </condition>
      <then>
        <echo message="Copying gdbserver to the apk to enable native debugging"/>
        <copy todir="${out.dir}/libs/${target.abi}">
          <path refid="native.libs.gdbserver"/>
        </copy>
      </then>
    </if>

    <!-- Package all the compiled .class files into a .jar. -->
    <jar
      jarfile="${lib.java.dir}/chromium_apk_${PACKAGE_NAME}.jar"
      basedir="${out.classes.absolute.dir}"
    />
  </target>

  <!--
    Override obfuscate target to pass javac.custom.classpath to Proguard. SDK tools do not provide
    any way to pass custom class paths to Proguard.
   -->
  <target name="-obfuscate">
    <if condition="${proguard.enabled}">
      <then>
        <property name="obfuscate.absolute.dir" location="${out.absolute.dir}/proguard"/>
        <property name="preobfuscate.jar.file" value="${obfuscate.absolute.dir}/original.jar"/>
        <property name="obfuscated.jar.file" value="${obfuscate.absolute.dir}/obfuscated.jar"/>
        <!-- input for dex will be proguard's output -->
        <property name="out.dex.input.absolute.dir" value="${obfuscated.jar.file}"/>

        <!-- Add Proguard Tasks -->
        <property name="proguard.jar" location="${android.tools.dir}/proguard/lib/proguard.jar"/>
        <taskdef name="proguard" classname="proguard.ant.ProGuardTask" classpath="${proguard.jar}"/>

        <!-- Set the android classpath Path object into a single property. It'll be
                 all the jar files separated by a platform path-separator.
                 Each path must be quoted if it contains spaces.
        -->
        <pathconvert property="project.target.classpath.value" refid="project.target.class.path">
          <firstmatchmapper>
            <regexpmapper from='^([^ ]*)( .*)$$' to='"\1\2"'/>
            <identitymapper/>
          </firstmatchmapper>
        </pathconvert>

        <!-- Build a path object with all the jar files that must be obfuscated.
             This include the project compiled source code and any 3rd party jar
             files. -->
        <path id="project.all.classes.path">
          <pathelement location="${preobfuscate.jar.file}"/>
          <path refid="project.all.jars.path"/>
          <!-- Pass javac.custom.classpath for apks. -->
          <path refid="javac.custom.classpath"/>
        </path>
        <!-- Set the project jar files Path object into a single property. It'll be
             all the jar files separated by a platform path-separator.
             Each path must be quoted if it contains spaces.
        -->
        <pathconvert property="project.all.classes.value" refid="project.all.classes.path">
          <firstmatchmapper>
            <regexpmapper from='^([^ ]*)( .*)$$' to='"\1\2"'/>
            <identitymapper/>
          </firstmatchmapper>
        </pathconvert>

        <!-- Turn the path property ${proguard.config} from an A:B:C property
             into a series of includes: -include A -include B -include C
             suitable for processing by the ProGuard task. Note - this does
             not include the leading '-include "' or the closing '"'; those
             are added under the <proguard> call below.
        -->
        <path id="proguard.configpath">
          <pathelement path="${proguard.config}"/>
        </path>
        <pathconvert pathsep='" -include "' property="proguard.configcmd"
          refid="proguard.configpath"/>

        <mkdir   dir="${obfuscate.absolute.dir}"/>
        <delete file="${preobfuscate.jar.file}"/>
        <delete file="${obfuscated.jar.file}"/>
        <jar basedir="${out.classes.absolute.dir}"
          destfile="${preobfuscate.jar.file}"/>
        <proguard>
          -include      "${proguard.configcmd}"
          -include      "${out.absolute.dir}/proguard.txt"
          -injars       ${project.all.classes.value}
          -outjars      "${obfuscated.jar.file}"
          -libraryjars  ${project.target.classpath.value}
          -dump         "${obfuscate.absolute.dir}/dump.txt"
          -printseeds   "${obfuscate.absolute.dir}/seeds.txt"
          -printusage   "${obfuscate.absolute.dir}/usage.txt"
          -printmapping "${obfuscate.absolute.dir}/mapping.txt"
        </proguard>
      </then>
    </if>
  </target>
</project>
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
            android:label="@string/moz_app_displayname"
            android:searchSuggestAuthority="@string/content_authority_db_browser"
            android:searchSuggestIntentAction="android.intent.action.SEARCH"
            android:searchSettingsDescription="@string/searchable_description"
            android:includeInGlobalSearch="true"/>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    tools:context=".SearchActivity">

    <org.mozilla.search.autocomplete.SearchBar
        android:id="@+id/search_bar"
        android:layout_width="match_parent"
        android:layout_height="@dimen/search_bar_height"
        android:paddingTop="@dimen/search_bar_padding_y"
        android:paddingBottom="@dimen/search_bar_padding_y"
        android:paddingLeft="@dimen/search_row_padding"
        android:paddingRight="@dimen/search_row_padding"
        android:layout_gravity="top"/>

    <fragment
        android:id="@+id/postsearch"
        android:name="org.mozilla.search.PostSearchFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="@dimen/search_bar_height"
        android:layout_gravity="top"
        android:visibility="invisible"/>

    <fragment
        android:id="@+id/presearch"
        android:name="org.mozilla.search.PreSearchFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="@dimen/search_bar_height"
        android:layout_gravity="top"/>

    <fragment
        android:id="@+id/suggestions"
        android:name="org.mozilla.search.autocomplete.SuggestionsFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="@dimen/search_bar_height"
        android:layout_gravity="top"/>


    <ImageButton
        android:id="@+id/settings_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:color/transparent"
        android:padding="15dp"
        android:src="@drawable/ic_action_settings"
        android:layout_gravity="bottom|right"
        android:contentDescription="@string/search_pref_button_content_description"/>

    <View
        android:id="@+id/animation_card"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="@dimen/search_bar_height"
        android:background="@color/row_background"
        android:visibility="invisible"
        android:layout_gravity="top"/>

</merge>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>
    <declare-styleable name="FacetButton"/>

    <!--This attribute is required so that we can create a facet button-->
    <!--pragmatically. The defStyle param used in the View constructor-->
    <!--must be an attr, see: https://code.google.com/p/android/issues/detail?id=12683-->
    <attr name="facetButtonStyle" />
</resources>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <org.mozilla.search.ui.BackCaptureEditText
        android:id="@+id/edit_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:imeOptions="actionSearch"
        android:inputType="textNoSuggestions"
        android:drawableLeft="@drawable/search_icon_inactive"
        android:drawablePadding="5dp"
        android:textSize="@dimen/query_text_size"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:textColorHighlight="@color/highlight_orange"
        android:textSelectHandle="@drawable/handle_middle"
        android:textSelectHandleLeft="@drawable/handle_start"
        android:textSelectHandleRight="@drawable/handle_end" />

    <ImageButton
        android:id="@+id/clear_button"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:paddingLeft="10dp"
        android:layout_gravity="right|center_vertical"
        android:background="@android:color/transparent"
        android:src="@drawable/search_clear"
        android:scaleType="centerInside"
        android:visibility="gone"/>

    <ImageView
        android:id="@+id/engine_icon"
        android:layout_width="24dp"
        android:layout_height="24dp"
        android:layout_gravity="right|center_vertical"
        android:background="@android:color/transparent"
        android:visibility="gone"/>

</merge>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>

    <color name="global_background_color">#EBEBF0</color>

    <color name="highlight_orange">#FF9500</color>

    <color name="edit_text_default">#AFB1B3</color>

    <!-- card colors -->
    <color name="row_background">#ffffff</color>
    <color name="row_background_pressed">#DCDCE1</color>

    <color name="widget_logo_default">#EBEBF0</color>
    <color name="widget_button_pressed">#33000000</color>
    <color name="widget_text_color">#5F6368</color>

    <!--Facet button colors-->
    <color name="facet_button_background_color_default">@android:color/white</color>
    <color name="facet_button_background_color_pressed">#FAFAFA</color>

    <color name="facet_button_text_color_default">#ADB0B1</color>
    <color name="facet_button_text_color_selected">#383E42</color>

    <color name="network_error_link">#0092DB</color>

    <!-- Suggestion highlight color -->
    <color name="suggestion_highlight">#FF999999</color>
</resources>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>
    <!-- The height of the search bar is also used to offset the PreSearchFragment
         and PostSearchFragment contents -->
    <dimen name="search_bar_height">65dp</dimen>
    <dimen name="progress_bar_height">3dp</dimen>

    <!-- Size of the text for query input and suggestions -->
    <dimen name="query_text_size">16sp</dimen>

    <dimen name="search_row_padding">15dp</dimen>
    <dimen name="search_bar_padding_y">10dp</dimen>

    <!-- Padding to account for search engine icon/clear button -->
    <dimen name="search_bar_padding_right">25dp</dimen>

    <dimen name="search_history_drawable_padding">10dp</dimen>

    <!-- Widget Buttons -->
    <dimen name="widget_header_height">70dp</dimen>
    <dimen name="widget_button_offset">-50dp</dimen>
    <dimen name="widget_button_padding">45dp</dimen>
    <dimen name="widget_text_size">14sp</dimen>
    <dimen name="widget_padding">7dp</dimen>
    <dimen name="widget_drawable_corner_radius">4dp</dimen>
    <dimen name="widget_bg_border_offset">3dp</dimen>

    <dimen name="facet_bar_height">50dp</dimen>
    <dimen name="facet_button_underline_thickness">5dp</dimen>
</resources>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:paddingLeft="50dp"
    android:paddingRight="50dp">

    <!-- Empty spacer view -->
    <View
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1"/>

    <ImageView
        android:id="@+id/empty_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="15dp"
        android:gravity="top|center"
        android:scaleType="fitCenter"/>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:orientation="vertical"
        android:layout_weight="3">

        <TextView
            android:id="@+id/empty_title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="15dp"
            style="@style/TextAppearance.EmptyView.Title"
            android:gravity="center"/>

        <TextView
            android:id="@+id/empty_message"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            style="@style/TextAppearance.EmptyView.Message"
            android:gravity="center"/>

    </LinearLayout>

</LinearLayout>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>browser_newtab_search searchEngine1x2xLogo.xml</ShortName>
<Url type="text/html" method="GET" template="http://browser-newtab-search.com/1x2xlogo" rel="searchform"/>
<!-- #00FF00 -->
<Image width="65" height="26">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAIAAABn3KYmAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gkTADIGr0+8uwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAL0lEQVRYw+3PAREAAAQEsKd/Z3I4W4NVJtd14uDg4ODg4ODg4ODg4ODg4ODg8Pqw7M0BM+n9I0oAAAAASUVORK5CYII=</Image>
<!-- #00FFFF -->
<Image width="130" height="52">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAIAAADJ8nfCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gkTADMoaoKANQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAYklEQVR42u3RQQ0AAAjEMMC/58MECZ9OwtqVlL4bCzAIAwZhwCAMGIQBgzBgEAYMwoBBGDAIAwZhwCAMGIQBgzBgEAYMwoBBGIQBgzBgEAYMwoBBGDAIAwZhwCAMGIQBg+5ar7sCZiri9VUAAAAASUVORK5CYII=</Image>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>browser_newtab_search searchEngine1xLogo.xml</ShortName>
<Url type="text/html" method="GET" template="http://browser-newtab-search.com/1xlogo" rel="searchform"/>
<!-- #FF0000 -->
<Image width="65" height="26">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAIAAABn3KYmAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gkTADEwS9h64QAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAL0lEQVRYw+3PAREAAAQEsKd/Z3I4W4PV5LyOg4ODg4ODg4ODg4ODg4ODg4PD78MC7cwBM02qquMAAAAASUVORK5CYII=</Image>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>browser_newtab_search searchEngine2xLogo.xml</ShortName>
<Url type="text/html" method="GET" template="http://browser-newtab-search.com/2xlogo" rel="searchform"/>
<!-- #0000FF -->
<Image width="130" height="52">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAIAAADJ8nfCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gkTADMURe38sgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAYklEQVR42u3RQQ0AAAjEsAP/nsEECZ9OwlrJRN+1BRiEAYMwYBAGDMKAQRgwCAMGYcAgDBiEAYMwYBAGDMKAQRgwCAMGYcAgDMKAQRgwCAMGYcAgDBiEAYMwYBAGDMKAQXctkIQBZ/1YP3YAAAAASUVORK5CYII=</Image>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>browser_newtab_search searchEngineFavicon.xml</ShortName>
<Url type="text/html" method="GET" template="http://browser-newtab-search.com/1xlogo" rel="searchform"/>
<Image width="16" height="16">data:application/ico;base64,AAABAAIAICAAAAEAIACoEAAAJgAAABAQAAABACAAaAQAAM4QAAAoAAAAIAAAAEAAAAABACAAAAAAAAAQAAATCwAAEwsAAAAAAAAAAAAA/wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAABAAAAAgAAAAAQAgAAAAAAAABAAAEwsAABMLAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</Image>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8"?>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>browser_newtab_search searchEngineNoLogo.xml</ShortName>
<Url type="text/html" method="GET" template="http://browser-newtab-search.com/nologo" rel="searchform"/>
</SearchPlugin>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <org.mozilla.gecko.widget.FaviconView android:id="@+id/suggestion_icon"
                                          android:layout_width="@dimen/favicon_bg"
                                          android:layout_height="@dimen/favicon_bg"
                                          android:layout_marginLeft="10dip"
                                          android:layout_marginRight="10dip"
                                          android:layout_centerVertical="true"
                                          android:minWidth="@dimen/favicon_bg"
                                          android:minHeight="@dimen/favicon_bg"/>

    <org.mozilla.gecko.widget.FlowLayout android:id="@+id/suggestion_layout"
                                         android:layout_toRightOf="@id/suggestion_icon"
                                         android:layout_centerVertical="true"
                                         android:layout_width="wrap_content"
                                         android:layout_height="wrap_content"
                                         android:layout_marginRight="10dip"
                                         android:duplicateParentState="true">

        <include layout="@layout/suggestion_item"
                 android:id="@+id/suggestion_user_entered"/>

    </org.mozilla.gecko.widget.FlowLayout>

</merge>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ProgressBar
        android:id="@+id/progress_bar"
        style="@android:style/Widget.ProgressBar.Horizontal"
        android:layout_width="match_parent"
        android:layout_height="@dimen/progress_bar_height"
        android:progressDrawable="@drawable/progressbar"/>

    <WebView
        android:id="@+id/webview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

    <ViewStub
        android:id="@+id/error_view_stub"
        android:layout="@layout/search_empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="gone"/>

</LinearLayout>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/global_background_color">

    <ViewStub android:id="@+id/empty_view_stub"
        android:layout="@layout/search_empty"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

    <ListView
        android:id="@+id/list_view"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:scrollbarStyle="outsideOverlay"
        android:paddingLeft="@dimen/search_row_padding"
        android:paddingRight="@dimen/search_row_padding"/>

</LinearLayout>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/site_name"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/search_row_background"
    android:drawableLeft="@drawable/search_history"
    android:drawablePadding="@dimen/search_history_drawable_padding"
    android:padding="@dimen/search_row_padding"
    android:textSize="@dimen/query_text_size"/>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <Preference
        android:key="search.not_a_preference.clear_history"
        android:title="@string/pref_clearHistory_title"/>
</PreferenceScreen>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:drawable="@color/row_background_pressed" />
    <item android:drawable="@color/row_background"/>

</selector>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>

    <style name="TextAppearance.EmptyView.Title" parent="@android:style/TextAppearance.Small">
        <item name="android:textColor">#363B40</item>
        <item name="android:textSize">20sp</item>
        <item name="android:fontFamily">sans-serif-light</item>
    </style>

    <style name="TextAppearance.EmptyView.Message" parent="@android:style/TextAppearance.Small">
        <item name="android:textColor">#777777</item>
        <item name="android:textSize">16sp</item>
        <item name="android:lineSpacingExtra">4sp</item>
    </style>

</resources>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/global_background_color"
    android:paddingLeft="@dimen/search_row_padding"
    android:paddingRight="@dimen/search_row_padding"
    android:visibility="invisible"/>
<?xml version="1.0" encoding="UTF-8"?>
<!-- Any copyright is dedicated to the Public Domain.
   - http://creativecommons.org/publicdomain/zero/1.0/ -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>browser_searchSuggestionEngine searchSuggestionEngine.xml</ShortName>
<Url type="application/x-suggestions+json" method="GET" template="http://mochi.test:8888/browser/browser/base/content/test/general/searchSuggestionEngine.sjs?{searchTerms}"/>
<Url type="text/html" method="GET" template="http://www.browser-searchSuggestionEngine.com/searchSuggestionEngine" rel="searchform"/>
</SearchPlugin>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/search_row_background"
    android:padding="@dimen/search_row_padding"
    android:descendantFocusability="blocksDescendants"
    android:orientation="horizontal">

    <TextView
        android:id="@+id/auto_complete_row_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="@dimen/query_text_size"/>

    <ImageButton
        android:id="@+id/auto_complete_row_jump_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right|center_vertical"
        android:paddingLeft="@dimen/search_row_padding"
        android:src="@drawable/search_plus"
        android:contentDescription="@string/search_plus_content_description"
        android:background="@android:color/transparent" />

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="250dp"
    android:minHeight="40dp"
    android:label="@string/search_widget_name"
    android:widgetCategory="home_screen"
    android:previewImage="@drawable/launcher_widget"
    android:initialLayout="@layout/search_widget"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- A homescreen widget for launching Fennec or the search activity. We can't use styles in here
     so make sure any changes you make are also made to launch_widget.xml which doesn't have
     the search widget button. -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="@dimen/widget_header_height"
    android:orientation="horizontal"
    android:background="@drawable/widget_bg">

    <ImageView android:id="@+id/logo_button"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:padding="@dimen/widget_padding"
        android:background="@drawable/widget_button_left"
        android:layout_height="match_parent"
        android:src="@drawable/widget_icon"/>

    <LinearLayout android:id="@+id/search_button"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:contentDescription="@string/search_widget_button_label"
        android:orientation="horizontal"
        android:background="@drawable/widget_button_middle">

        <TextView android:id="@+id/search_button_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawableLeft="@drawable/ic_widget_search"
            android:drawablePadding="@dimen/widget_padding"
            android:text="@string/search_widget_button_label"
            android:gravity="center"
            android:fontFamily="sans-serif"
            android:textSize="@dimen/widget_text_size"
            android:textColor="@color/widget_text_color"/>

    </LinearLayout>

    <LinearLayout android:id="@+id/new_tab_button"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="match_parent"
        android:layout_centerVertical="true"
        android:contentDescription="@string/new_tab"
        android:gravity="center"
        android:orientation="horizontal"
        android:background="@drawable/widget_button_right">

        <TextView android:id="@+id/new_tab_button_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawableLeft="@drawable/ic_widget_new_tab"
            android:drawablePadding="@dimen/widget_padding"
            android:gravity="center"
            android:text="@string/new_tab"
            android:fontFamily="sans-serif"
            android:textSize="@dimen/widget_text_size"
            android:textColor="@color/widget_text_color"/>

    </LinearLayout>

</LinearLayout>
<?xml version="1.0"?>

<!DOCTYPE bindings [
<!ENTITY % searchBarDTD SYSTEM "chrome://browser/locale/searchbar.dtd" >
%searchBarDTD;
<!ENTITY % browserDTD SYSTEM "chrome://browser/locale/browser.dtd">
%browserDTD;
]>

<bindings id="SearchBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="searchbar">
    <resources>
      <stylesheet src="chrome://browser/content/search/searchbarBindings.css"/>
      <stylesheet src="chrome://browser/skin/searchbar.css"/>
    </resources>
    <content>
      <xul:stringbundle src="chrome://browser/locale/search.properties"
                        anonid="searchbar-stringbundle"/>
      <!--
      There is a dependency between "maxrows" attribute and
      "SuggestAutoComplete._historyLimit" (nsSearchSuggestions.js). Changing
      one of them requires changing the other one.
      -->
      <xul:textbox class="searchbar-textbox"
                   anonid="searchbar-textbox"
                   type="autocomplete"
                   flex="1"
                   autocompletepopup="PopupAutoComplete"
                   autocompletesearch="search-autocomplete"
                   autocompletesearchparam="searchbar-history"
                   maxrows="10"
                   completeselectedindex="true"
                   showcommentcolumn="true"
                   tabscrolling="true"
                   xbl:inherits="disabled,disableautocomplete,searchengine,src,newlines">
        <!--
        Empty <box> to properly position the icon within the autocomplete
        binding's anonymous children (the autocomplete binding positions <box>
        children differently)
        -->
        <xul:box>
          <xul:button class="searchbar-engine-button"
                      type="menu"
                      anonid="searchbar-engine-button">
            <xul:image class="searchbar-engine-image" xbl:inherits="src"/>
            <xul:image class="searchbar-dropmarker-image"/>
            <xul:menupopup class="searchbar-popup"
                           anonid="searchbar-popup">
              <xul:menuseparator/>
              <xul:menuitem class="open-engine-manager"
                            anonid="open-engine-manager"
                            label="&cmd_engineManager.label;"
                            oncommand="openManager(event);"/>
            </xul:menupopup>
          </xul:button>
        </xul:box>
        <xul:hbox class="search-go-container">
          <xul:image class="search-go-button"
                     anonid="search-go-button"
                     onclick="handleSearchCommand(event);"
                     tooltiptext="&searchEndCap.label;"/>
        </xul:hbox>
      </xul:textbox>
    </content>

    <implementation implements="nsIObserver">
      <constructor><![CDATA[
        if (this.parentNode.parentNode.localName == "toolbarpaletteitem")
          return;
        // Make sure we rebuild the popup in onpopupshowing
        this._needToBuildPopup = true;

        var os =
               Components.classes["@mozilla.org/observer-service;1"]
                         .getService(Components.interfaces.nsIObserverService);
        os.addObserver(this, "browser-search-engine-modified", false);

        this._initialized = true;

        this.searchService.init((function search_init_cb(aStatus) {
          // Bail out if the binding's been destroyed
          if (!this._initialized)
            return;

          if (Components.isSuccessCode(aStatus)) {
            // Refresh the display (updating icon, etc)
            this.updateDisplay();
          } else {
            Components.utils.reportError("Cannot initialize search service, bailing out: " + aStatus);
          }
        }).bind(this));
      ]]></constructor>

      <destructor><![CDATA[
        if (this._initialized) {
          this._initialized = false;

          var os = Components.classes["@mozilla.org/observer-service;1"]
                             .getService(Components.interfaces.nsIObserverService);
          os.removeObserver(this, "browser-search-engine-modified");
        }

        // Make sure to break the cycle from _textbox to us. Otherwise we leak
        // the world. But make sure it's actually pointing to us.
        if (this._textbox.mController.input == this)
          this._textbox.mController.input = null;
      ]]></destructor>

      <field name="_stringBundle">document.getAnonymousElementByAttribute(this,
          "anonid", "searchbar-stringbundle");</field>
      <field name="_textbox">document.getAnonymousElementByAttribute(this,
          "anonid", "searchbar-textbox");</field>
      <field name="_popup">document.getAnonymousElementByAttribute(this,
          "anonid", "searchbar-popup");</field>
      <field name="_ss">null</field>
      <field name="_engines">null</field>
      <field name="FormHistory" readonly="true">
        (Components.utils.import("resource://gre/modules/FormHistory.jsm", {})).FormHistory;
      </field>
      <field name="PlacesUtils" readonly="true">
        (Components.utils.import("resource://gre/modules/PlacesUtils.jsm", {})).PlacesUtils;
      </field>

      <property name="engines" readonly="true">
        <getter><![CDATA[
          if (!this._engines)
            this._engines = this.searchService.getVisibleEngines();
          return this._engines;
        ]]></getter>
      </property>

      <field name="searchButton">document.getAnonymousElementByAttribute(this,
          "anonid", "searchbar-engine-button");</field>

      <property name="currentEngine">
        <setter><![CDATA[
          let ss = this.searchService;
          ss.defaultEngine = ss.currentEngine = val;
          return val;
        ]]></setter>
        <getter><![CDATA[
          var currentEngine = this.searchService.currentEngine;
          // Return a dummy engine if there is no currentEngine
          return currentEngine || {name: "", uri: null};
        ]]></getter>
      </property>

      <!-- textbox is used by sanitize.js to clear the undo history when
           clearing form information. -->
      <property name="textbox" readonly="true"
                onget="return this._textbox;"/>

      <property name="searchService" readonly="true">
        <getter><![CDATA[
          if (!this._ss) {
            const nsIBSS = Components.interfaces.nsIBrowserSearchService;
            this._ss =
                 Components.classes["@mozilla.org/browser/search-service;1"]
                           .getService(nsIBSS);
          }
          return this._ss;
        ]]></getter>
      </property>

      <property name="value" onget="return this._textbox.value;"
                             onset="return this._textbox.value = val;"/>

      <method name="focus">
        <body><![CDATA[
          this._textbox.focus();
        ]]></body>
      </method>

      <method name="select">
        <body><![CDATA[
          this._textbox.select();
        ]]></body>
      </method>

      <method name="observe">
        <parameter name="aEngine"/>
        <parameter name="aTopic"/>
        <parameter name="aVerb"/>
        <body><![CDATA[
          if (aTopic == "browser-search-engine-modified") {
            switch (aVerb) {
            case "engine-removed":
              this.offerNewEngine(aEngine);
              break;
            case "engine-added":
              this.hideNewEngine(aEngine);
              break;
            case "engine-current":
              // The current engine was changed.  Rebuilding the menu appears to
              // confuse its idea of whether it should be open when it's just
              // been clicked, so we force it to close now.
              this._popup.hidePopup();
              break;
            case "engine-changed":
              // An engine was removed (or hidden) or added, or an icon was
              // changed.  Do nothing special.
            }

            // Make sure the engine list is refetched next time it's needed
            this._engines = null;

            // Rebuild the popup and update the display after any modification.
            this.rebuildPopup();
            this.updateDisplay();
          }
        ]]></body>
      </method>

      <!-- There are two seaprate lists of search engines, whose uses intersect
      in this file.  The search service (nsIBrowserSearchService and
      nsSearchService.js) maintains a list of Engine objects which is used to
      populate the searchbox list of available engines and to perform queries.
      That list is accessed here via this.SearchService, and it's that sort of
      Engine that is passed to this binding's observer as aEngine.

      In addition, browser.js fills two lists of autodetected search engines
      (browser.engines and browser.hiddenEngines) as properties of
      mCurrentBrowser.  Those lists contain unnamed JS objects of the form
      { uri:, title:, icon: }, and that's what the searchbar uses to determine
      whether to show any "Add <EngineName>" menu items in the drop-down.

      The two types of engines are currently related by their identifying
      titles (the Engine object's 'name'), although that may change; see bug
      335102.  -->

      <!-- If the engine that was just removed from the searchbox list was
      autodetected on this page, move it to each browser's active list so it
      will be offered to be added again. -->
      <method name="offerNewEngine">
        <parameter name="aEngine"/>
        <body><![CDATA[
          var allbrowsers = getBrowser().mPanelContainer.childNodes;
          for (var tab = 0; tab < allbrowsers.length; tab++) {
            var browser = getBrowser().getBrowserAtIndex(tab);
            if (browser.hiddenEngines) {
              // XXX This will need to be changed when engines are identified by
              // URL rather than title; see bug 335102.
              var removeTitle = aEngine.wrappedJSObject.name;
              for (var i = 0; i < browser.hiddenEngines.length; i++) {
                if (browser.hiddenEngines[i].title == removeTitle) {
                  if (!browser.engines)
                    browser.engines = [];
                  browser.engines.push(browser.hiddenEngines[i]);
                  browser.hiddenEngines.splice(i, 1);
                  break;
                }
              }
            }
          }
        ]]></body>
      </method>

      <!-- If the engine that was just added to the searchbox list was
      autodetected on this page, move it to each browser's hidden list so it is
      no longer offered to be added. -->
      <method name="hideNewEngine">
        <parameter name="aEngine"/>
        <body><![CDATA[
          var allbrowsers = getBrowser().mPanelContainer.childNodes;
          for (var tab = 0; tab < allbrowsers.length; tab++) {
            var browser = getBrowser().getBrowserAtIndex(tab);
            if (browser.engines) {
              // XXX This will need to be changed when engines are identified by
              // URL rather than title; see bug 335102.
              var removeTitle = aEngine.wrappedJSObject.name;
              for (var i = 0; i < browser.engines.length; i++) {
                if (browser.engines[i].title == removeTitle) {
                  if (!browser.hiddenEngines)
                    browser.hiddenEngines = [];
                  browser.hiddenEngines.push(browser.engines[i]);
                  browser.engines.splice(i, 1);
                  break;
                }
              }
            }
          }
        ]]></body>
      </method>

      <method name="setIcon">
        <parameter name="element"/>
        <parameter name="uri"/>
        <body><![CDATA[
          if (uri) {
            uri = this.PlacesUtils.getImageURLForResolution(window, uri);
          }
          element.setAttribute("src", uri);
        ]]></body>
      </method>

      <method name="updateDisplay">
        <body><![CDATA[
          var uri = this.currentEngine.iconURI;
          this.setIcon(this, uri ? uri.spec : "");

          var name = this.currentEngine.name;
          var text = this._stringBundle.getFormattedString("searchtip", [name]);
          this._textbox.placeholder = name;
          this._textbox.label = text;
          this._textbox.tooltipText = text;
        ]]></body>
      </method>

      <!-- Rebuilds the dynamic portion of the popup menu (i.e., the menu items
           for new search engines that can be added to the available list).  This
           is called each time the popup is shown.
      -->
      <method name="rebuildPopupDynamic">
        <body><![CDATA[
          // We might not have added the main popup items yet, do that first
          // if needed.
          if (this._needToBuildPopup)
            this.rebuildPopup();

          var popup = this._popup;
          // Clear any addengine menuitems, including addengine-item entries and
          // the addengine-separator.  Work backward to avoid invalidating the
          // indexes as items are removed.
          var items = popup.childNodes;
          for (var i = items.length - 1; i >= 0; i--) {
            if (items[i].classList.contains("addengine-item") ||
                items[i].classList.contains("addengine-separator"))
              popup.removeChild(items[i]);
          }

          var addengines = getBrowser().mCurrentBrowser.engines;
          if (addengines && addengines.length > 0) {
            const kXULNS =
               "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

            // Find the (first) separator in the remaining menu, or the first item
            // if no separators are present.
            var insertLocation = popup.firstChild;
            while (insertLocation.nextSibling &&
                   insertLocation.localName != "menuseparator") {
              insertLocation = insertLocation.nextSibling;
            }
            if (insertLocation.localName != "menuseparator")
              insertLocation = popup.firstChild;

            var separator = document.createElementNS(kXULNS, "menuseparator");
            separator.setAttribute("class", "addengine-separator");
            popup.insertBefore(separator, insertLocation);

            // Insert the "add this engine" items.
            for (var i = 0; i < addengines.length; i++) {
              var menuitem = document.createElement("menuitem");
              var engineInfo = addengines[i];
              var labelStr =
                  this._stringBundle.getFormattedString("cmd_addFoundEngine",
                                                        [engineInfo.title]);
              menuitem = document.createElementNS(kXULNS, "menuitem");
              menuitem.setAttribute("class", "menuitem-iconic addengine-item");
              menuitem.setAttribute("label", labelStr);
              menuitem.setAttribute("tooltiptext", engineInfo.uri);
              menuitem.setAttribute("uri", engineInfo.uri);
              if (engineInfo.icon)
                this.setIcon(menuitem, engineInfo.icon);
              menuitem.setAttribute("title", engineInfo.title);
              popup.insertBefore(menuitem, insertLocation);
            }
          }
        ]]></body>
      </method>

      <!-- Rebuilds the list of visible search engines in the menu.  Does not remove
           or update any dynamic entries (i.e., "Add this engine" items) nor the
           Manage Engines item.  This is called by the observer when the list of
           visible engines, or the currently selected engine, has changed.
      -->
      <method name="rebuildPopup">
        <body><![CDATA[
          var popup = this._popup;

          // Clear the popup, down to the first separator
          while (popup.firstChild && popup.firstChild.localName != "menuseparator")
            popup.removeChild(popup.firstChild);

          const kXULNS =
               "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

          var engines = this.engines;
          for (var i = engines.length - 1; i >= 0; --i) {
            var menuitem = document.createElementNS(kXULNS, "menuitem");
            var name = engines[i].name;
            menuitem.setAttribute("label", name);
            menuitem.setAttribute("class", "menuitem-iconic searchbar-engine-menuitem menuitem-with-favicon");
            // Since this menu is rebuilt by the observer method whenever a new
            // engine is selected, the "selected" attribute does not need to be
            // explicitly cleared anywhere.
            if (engines[i] == this.currentEngine)
              menuitem.setAttribute("selected", "true");
            var tooltip = this._stringBundle.getFormattedString("searchtip", [name]);
            menuitem.setAttribute("tooltiptext", tooltip);
            if (engines[i].iconURI)
              this.setIcon(menuitem, engines[i].iconURI.spec);
            popup.insertBefore(menuitem, popup.firstChild);
            menuitem.engine = engines[i];
          }

          this._needToBuildPopup = false;
        ]]></body>
      </method>

      <method name="openManager">
        <parameter name="aEvent"/>
        <body><![CDATA[
          var wm =
                Components.classes["@mozilla.org/appshell/window-mediator;1"]
                          .getService(Components.interfaces.nsIWindowMediator);

          var window = wm.getMostRecentWindow("Browser:SearchManager");
          if (window)
            window.focus()
          else {
            setTimeout(function () {
              openDialog("chrome://browser/content/search/engineManager.xul",
                         "_blank", "chrome,dialog,modal,centerscreen,resizable");
            }, 0);
          }
        ]]></body>
      </method>

      <method name="selectEngine">
        <parameter name="aEvent"/>
        <parameter name="isNextEngine"/>
        <body><![CDATA[
          // Find the new index
          var newIndex = this.engines.indexOf(this.currentEngine);
          newIndex += isNextEngine ? 1 : -1;

          if (newIndex >= 0 && newIndex < this.engines.length) {
            this.currentEngine = this.engines[newIndex];
          }

          aEvent.preventDefault();
          aEvent.stopPropagation();
        ]]></body>
      </method>

      <method name="handleSearchCommand">
        <parameter name="aEvent"/>
        <body><![CDATA[
          var textBox = this._textbox;
          var textValue = textBox.value;

          var where = "current";
          if (aEvent && aEvent.originalTarget.getAttribute("anonid") == "search-go-button") {
            if (aEvent.button == 2)
              return;
            where = whereToOpenLink(aEvent, false, true);
          }
          else {
            var newTabPref = textBox._prefBranch.getBoolPref("browser.search.openintab");
            if ((aEvent && aEvent.altKey) ^ newTabPref)
              where = "tab";
          }

          this.doSearch(textValue, where);
        ]]></body>
      </method>

      <method name="doSearch">
        <parameter name="aData"/>
        <parameter name="aWhere"/>
        <body><![CDATA[
          var textBox = this._textbox;
        
          // Save the current value in the form history
          if (aData && !PrivateBrowsingUtils.isWindowPrivate(window)) {
            this.FormHistory.update(
              { op : "bump",
                fieldname : textBox.getAttribute("autocompletesearchparam"),
                value : aData },
              { handleError : function(aError) {
                  Components.utils.reportError("Saving search to form history failed: " + aError.message);
              }});
          }
          
          // null parameter below specifies HTML response for search
          var submission = this.currentEngine.getSubmission(aData, null, "searchbar");
          BrowserSearch.recordSearchInHealthReport(this.currentEngine, "searchbar");
          openUILinkIn(submission.uri.spec, aWhere, null, submission.postData);
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="command"><![CDATA[
        const target = event.originalTarget;
        if (target.engine) {
          this.currentEngine = target.engine;
        } else if (target.classList.contains("addengine-item")) {
          var searchService =
            Components.classes["@mozilla.org/browser/search-service;1"]
                      .getService(Components.interfaces.nsIBrowserSearchService);
          // We only detect OpenSearch files
          var type = Components.interfaces.nsISearchEngine.DATA_XML;
          // Select the installed engine if the installation succeeds
          var installCallback = {
            onSuccess: engine => this.currentEngine = engine
          }
          searchService.addEngine(target.getAttribute("uri"), type,
                                  target.getAttribute("src"), false,
                                  installCallback);
        }
        else
          return;

        this.focus();
        this.select();
      ]]></handler>

      <handler event="popupshowing" action="this.rebuildPopupDynamic();"/>

      <handler event="DOMMouseScroll"
               phase="capturing"
               modifiers="accel"
               action="this.selectEngine(event, (event.detail > 0));"/>

      <handler event="focus">
      <![CDATA[
        // Speculatively connect to the current engine's search URI (and
        // suggest URI, if different) to reduce request latency
        this.currentEngine.speculativeConnect({window: window});
      ]]></handler>
    </handlers>
  </binding>

  <binding id="searchbar-textbox"
      extends="chrome://global/content/bindings/autocomplete.xml#autocomplete">
    <implementation implements="nsIObserver">
      <constructor><![CDATA[
        const kXULNS =
          "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

        if (document.getBindingParent(this).parentNode.parentNode.localName ==
            "toolbarpaletteitem")
          return;

        // Initialize fields
        this._stringBundle = document.getBindingParent(this)._stringBundle;
        this._prefBranch =
                  Components.classes["@mozilla.org/preferences-service;1"]
                            .getService(Components.interfaces.nsIPrefBranch);
        this._suggestEnabled =
            this._prefBranch.getBoolPref("browser.search.suggest.enabled");

        if (this._prefBranch.getBoolPref("browser.urlbar.clickSelectsAll"))
          this.setAttribute("clickSelectsAll", true);

        // Add items to context menu and attach controller to handle them
        var textBox = document.getAnonymousElementByAttribute(this,
                                              "anonid", "textbox-input-box");
        var cxmenu = document.getAnonymousElementByAttribute(textBox,
                                          "anonid", "input-box-contextmenu");
        var pasteAndSearch;
        cxmenu.addEventListener("popupshowing", function() {
          if (!pasteAndSearch)
            return;
          var controller = document.commandDispatcher.getControllerForCommand("cmd_paste");
          var enabled = controller.isCommandEnabled("cmd_paste");
          if (enabled)
            pasteAndSearch.removeAttribute("disabled");
          else
            pasteAndSearch.setAttribute("disabled", "true");
        }, false);

        var element, label, akey;

        element = document.createElementNS(kXULNS, "menuseparator");
        cxmenu.appendChild(element);

        var insertLocation = cxmenu.firstChild;
        while (insertLocation.nextSibling &&
               insertLocation.getAttribute("cmd") != "cmd_paste")
          insertLocation = insertLocation.nextSibling;
        if (insertLocation) {
          element = document.createElementNS(kXULNS, "menuitem");
          label = this._stringBundle.getString("cmd_pasteAndSearch");
          element.setAttribute("label", label);
          element.setAttribute("anonid", "paste-and-search");
          element.setAttribute("oncommand",
              "BrowserSearch.searchBar.select(); goDoCommand('cmd_paste'); BrowserSearch.searchBar.handleSearchCommand();");
          cxmenu.insertBefore(element, insertLocation.nextSibling);
          pasteAndSearch = element;
        }

        element = document.createElementNS(kXULNS, "menuitem");
        label = this._stringBundle.getString("cmd_clearHistory");
        akey = this._stringBundle.getString("cmd_clearHistory_accesskey");
        element.setAttribute("label", label);
        element.setAttribute("accesskey", akey);
        element.setAttribute("cmd", "cmd_clearhistory");
        cxmenu.appendChild(element);

        element = document.createElementNS(kXULNS, "menuitem");
        label = this._stringBundle.getString("cmd_showSuggestions");
        akey = this._stringBundle.getString("cmd_showSuggestions_accesskey");
        element.setAttribute("anonid", "toggle-suggest-item");
        element.setAttribute("label", label);
        element.setAttribute("accesskey", akey);
        element.setAttribute("cmd", "cmd_togglesuggest");
        element.setAttribute("type", "checkbox");
        element.setAttribute("checked", this._suggestEnabled);
        element.setAttribute("autocheck", "false");
        this._suggestMenuItem = element;
        cxmenu.appendChild(element);

        this.controllers.appendController(this.searchbarController);

        // Add observer for suggest preference
        var prefs = Components.classes["@mozilla.org/preferences-service;1"]
                            .getService(Components.interfaces.nsIPrefBranch);
        prefs.addObserver("browser.search.suggest.enabled", this, false);
      ]]></constructor>

      <destructor><![CDATA[
          var prefs = Components.classes["@mozilla.org/preferences-service;1"]
                              .getService(Components.interfaces.nsIPrefBranch);
          prefs.removeObserver("browser.search.suggest.enabled", this);

        // Because XBL and the customize toolbar code interacts poorly,
        // there may not be anything to remove here
        try {
          this.controllers.removeController(this.searchbarController);
        } catch (ex) { }
      ]]></destructor>

      <field name="_stringBundle"/>
      <field name="_prefBranch"/>
      <field name="_suggestMenuItem"/>
      <field name="_suggestEnabled"/>

      <!--
        This overrides the searchParam property in autocomplete.xml.  We're
        hijacking this property as a vehicle for delivering the privacy
        information about the window into the guts of nsSearchSuggestions.

        Note that the setter is the same as the parent.  We were not sure whether
        we can override just the getter.  If that proves to be the case, the setter
        can be removed.
      -->
      <property name="searchParam"
                onget="return this.getAttribute('autocompletesearchparam') +
                       (PrivateBrowsingUtils.isWindowPrivate(window) ? '|private' : '');"
                onset="this.setAttribute('autocompletesearchparam', val); return val;"/>

      <!--
        This method overrides the autocomplete binding's openPopup (essentially
        duplicating the logic from the autocomplete popup binding's
        openAutocompletePopup method), modifying it so that the popup is aligned with
        the inner textbox, but sized to not extend beyond the search bar border.
      -->
      <method name="openPopup">
        <body><![CDATA[
          var popup = this.popup;
          if (!popup.mPopupOpen) {
            // Initially the panel used for the searchbar (PopupAutoComplete
            // in browser.xul) is hidden to avoid impacting startup / new
            // window performance. The base binding's openPopup would normally
            // call the overriden openAutocompletePopup in urlbarBindings.xml's
            // browser-autocomplete-result-popup binding to unhide the popup,
            // but since we're overriding openPopup we need to unhide the panel
            // ourselves.
            popup.hidden = false;

            popup.mInput = this;
            popup.view = this.controller.QueryInterface(Components.interfaces.nsITreeView);
            popup.invalidate();

            popup.showCommentColumn = this.showCommentColumn;
            popup.showImageColumn = this.showImageColumn;

            document.popupNode = null;

            const isRTL = getComputedStyle(this, "").direction == "rtl";

            var outerRect = this.getBoundingClientRect();
            var innerRect = this.inputField.getBoundingClientRect();
            if (isRTL) {
              var width = innerRect.right - outerRect.left;
            } else {
              var width = outerRect.right - innerRect.left;
            }
            popup.setAttribute("width", width > 100 ? width : 100);

            var yOffset = outerRect.bottom - innerRect.bottom;
            popup.openPopup(this.inputField, "after_start", 0, yOffset, false, false);
          }
        ]]></body>
      </method>

      <method name="observe">
        <parameter name="aSubject"/>
        <parameter name="aTopic"/>
        <parameter name="aData"/>
        <body><![CDATA[
          if (aTopic == "nsPref:changed") {
            this._suggestEnabled =
              this._prefBranch.getBoolPref("browser.search.suggest.enabled");
            this._suggestMenuItem.setAttribute("checked", this._suggestEnabled);
          }
        ]]></body>
      </method>

      <method name="openSearch">
        <body>
          <![CDATA[
            // Don't open search popup if history popup is open
            if (!this.popupOpen) {
              document.getBindingParent(this).searchButton.open = true;
              return false;
            }
            return true;
          ]]>
        </body>
      </method>

      <!-- override |onTextEntered| in autocomplete.xml -->
      <method name="onTextEntered">
        <parameter name="aEvent"/>
        <body><![CDATA[
          var evt = aEvent || this.mEnterEvent;
          document.getBindingParent(this).handleSearchCommand(evt);
          this.mEnterEvent = null;
        ]]></body>
      </method>

      <!-- nsIController -->
      <field name="searchbarController" readonly="true"><![CDATA[({
        _self: this,
        supportsCommand: function(aCommand) {
          return aCommand == "cmd_clearhistory" ||
                 aCommand == "cmd_togglesuggest";
        },

        isCommandEnabled: function(aCommand) {
          return true;
        },

        doCommand: function (aCommand) {
          switch (aCommand) {
            case "cmd_clearhistory":
              var param = this._self.getAttribute("autocompletesearchparam");

              let searchBar = this._self.parentNode;

              BrowserSearch.searchBar.FormHistory.update({ op : "remove", fieldname : param }, null);
              this._self.value = "";
              break;
            case "cmd_togglesuggest":
              // The pref observer will update _suggestEnabled and the menu
              // checkmark.
              this._self._prefBranch.setBoolPref("browser.search.suggest.enabled",
                                                 !this._self._suggestEnabled);
              break;
            default:
              // do nothing with unrecognized command
          }
        }
      })]]></field>
    </implementation>

    <handlers>
      <handler event="keypress" keycode="VK_UP" modifiers="accel"
               phase="capturing"
               action="document.getBindingParent(this).selectEngine(event, false);"/>

      <handler event="keypress" keycode="VK_DOWN" modifiers="accel"
               phase="capturing"
               action="document.getBindingParent(this).selectEngine(event, true);"/>

      <handler event="keypress" keycode="VK_DOWN" modifiers="alt"
               phase="capturing"
               action="return this.openSearch();"/>

      <handler event="keypress" keycode="VK_UP" modifiers="alt"
               phase="capturing"
               action="return this.openSearch();"/>


      <handler event="dragover">
      <![CDATA[
        var types = event.dataTransfer.types;
        if (types.contains("text/plain") || types.contains("text/x-moz-text-internal"))
          event.preventDefault();
      ]]>
      </handler>

      <handler event="drop">
      <![CDATA[
        var dataTransfer = event.dataTransfer;
        var data = dataTransfer.getData("text/plain");
        if (!data)
          data = dataTransfer.getData("text/x-moz-text-internal");
        if (data) {
          event.preventDefault();
          this.value = data;
          this.onTextEntered(event);
        }
      ]]>
      </handler>

    </handlers>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="false" android:color="@color/text_color_primary_disable_only" />
    <item android:color="@color/text_color_secondary_inverse"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="false" android:color="@color/text_color_primary_disable_only" />
    <item android:color="@color/text_color_secondary"/>

</selector>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="seh"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE window [
<!ENTITY % updateDTD SYSTEM "chrome://mozapps/locale/extensions/selectAddons.dtd">
<!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd">
%updateDTD;
%brandDTD;
]>

<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="addon-select">
    <content>
      <xul:hbox class="select-keep select-cell">
        <xul:checkbox class="addon-keep-checkbox" anonid="keep"
                      xbl:inherits="tooltiptext=name"
                      oncommand="document.getBindingParent(this).keepChanged();"/>
      </xul:hbox>
      <xul:hbox class="select-icon select-cell">
        <xul:image class="addon-icon" xbl:inherits="type"/>
      </xul:hbox>
      <xul:hbox class="select-name select-cell">
        <xul:label class="addon-name" crop="end" style="&select.name.style;"
                   xbl:inherits="xbl:text=name"/>
      </xul:hbox>
      <xul:hbox class="select-action select-cell">
        <xul:label class="addon-action-message" style="&select.action.style;"
                   xbl:inherits="xbl:text=action"/>
        <xul:checkbox anonid="update" checked="true" class="addon-action-update"
                      oncommand="document.getBindingParent(this).updateChanged();"
                      style="&select.action.style;" xbl:inherits="label=action"/>
      </xul:hbox>
      <xul:hbox class="select-source select-cell">
        <xul:label class="addon-source" xbl:inherits="xbl:text=source"/>
      </xul:hbox>
    </content>

    <implementation>
      <field name="_addon"/>
      <field name="_disabled"/>
      <field name="_install"/>
      <field name="_wasActive"/>
      <field name="_keep">document.getAnonymousElementByAttribute(this, "anonid", "keep");</field>
      <field name="_update">document.getAnonymousElementByAttribute(this, "anonid", "update");</field>
      <field name="_strings">document.getElementById("strings");</field>

      <property name="action" readonly="true">
        <getter><![CDATA[
          if (!this._keep.checked) {
            if (this._wasActive)
              return "disable";
            else
              return null;
          }

          if (this._addon.appDisabled && !this._install)
            return "incompatible";

          if (this._install && (AddonManager.shouldAutoUpdate(this._addon) || this._update.checked))
            return "update";

          if (this._addon.permissions & AddonManager.PERM_CAN_ENABLE)
            return "enable";

          return null;
        ]]></getter>
      </property>

      <method name="setAddon">
        <parameter name="aAddon"/>
        <parameter name="aInstall"/>
        <parameter name="aWasActive"/>
        <parameter name="aDistroInstalled"/>
        <body><![CDATA[
          this._addon = aAddon;
          this._install = aInstall;
          this._wasActive = aWasActive;

          this.setAttribute("name", aAddon.name);
          this.setAttribute("type", aAddon.type);

          // User and bundled add-ons default to staying enabled,
          // others default to disabled.
          switch (aAddon.scope) {
            case AddonManager.SCOPE_PROFILE:
              this._keep.checked = !aAddon.userDisabled;
              if (aDistroInstalled)
                this.setAttribute("source", this._strings.getString("source.bundled"));
              else
                this.setAttribute("source", this._strings.getString("source.profile"));
              break;
            default:
              this._keep.checked = false;
              this.setAttribute("source", this._strings.getString("source.other"));
          }

          this.updateAction();
        ]]></body>
      </method>

      <method name="setActionMessage">
        <body><![CDATA[
          if (!this._keep.checked) {
            // If the user no longer wants this add-on then it is either being
            // disabled or nothing is changing. Don't complicate matters by
            // talking about updates for this case

            if (this._wasActive)
              this.setAttribute("action", this._strings.getString("action.disabled"));
            else
              this.setAttribute("action", "");

            this.removeAttribute("optionalupdate");
            return;
          }

          if (this._addon.appDisabled && !this._install) {
            // If the add-on is incompatible and there is no update available
            // then it will remain disabled

            this.setAttribute("action", this._strings.getString("action.incompatible"));

            this.removeAttribute("optionalupdate");
            return;
          }

          if (this._install) {
            if (!AddonManager.shouldAutoUpdate(this._addon)) {
              this.setAttribute("optionalupdate", "true");

              // If manual updating for the add-on then display the right
              // text depending on whether the update is required to make
              // the add-on work or not
              if (this._addon.appDisabled)
                this.setAttribute("action", this._strings.getString("action.neededupdate"));
              else
                this.setAttribute("action", this._strings.getString("action.unneededupdate"));
              return;
            }

            this.removeAttribute("optionalupdate");

            // If the update is needed to make the add-on compatible then
            // say so otherwise just say nothing about it
            if (this._addon.appDisabled) {
              this.setAttribute("action", this._strings.getString("action.autoupdate"));
              return;
            }
          }
          else {
            this.removeAttribute("optionalupdate");
          }

          // If the add-on didn't used to be active and it now is (via a
          // compatibility update) or it can be enabled then the action is to
          // enable the add-on
          if (!this._wasActive && (this._addon.isActive || this._addon.permissions & AddonManager.PERM_CAN_ENABLE)) {
            this.setAttribute("action", this._strings.getString("action.enabled"));
            return;
          }

          // In all other cases the add-on is simply remaining enabled
          this.setAttribute("action", "");
        ]]></body>
      </method>

      <method name="updateAction">
        <body><![CDATA[
          this.setActionMessage();
          let installingUpdate = this._install &&
                                 (AddonManager.shouldAutoUpdate(this._addon) || 
                                  this._update.checked);

          if (this._keep.checked && (!this._addon.appDisabled || installingUpdate))
            this.setAttribute("active", "true");
          else
            this.removeAttribute("active");

          gSelect.updateButtons();
        ]]></body>
      </method>

      <method name="updateChanged">
        <body><![CDATA[
          this.updateAction();
        ]]></body>
      </method>

      <method name="keepChanged">
        <body><![CDATA[
          this.updateAction();
        ]]></body>
      </method>

      <method name="keep">
        <body><![CDATA[
          this._keep.checked = true;
          this.keepChanged();
        ]]></body>
      </method>

      <method name="disable">
        <body><![CDATA[
          this._keep.checked = false;
          this.keepChanged();
        ]]></body>
      </method>

      <method name="apply">
        <body><![CDATA[
          this._addon.userDisabled = !this._keep.checked;

          if (!this._install || !this._keep.checked)
            return;

          if (AddonManager.shouldAutoUpdate(this._addon) || this._update.checked)
            this._install.install();
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="addon-confirm">
    <content>
      <xul:image class="addon-icon" xbl:inherits="type"/>
      <xul:label class="addon-name" xbl:inherits="xbl:text=name"/>
    </content>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- This is used for select lists for multiple selection enabled -->
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/select_list"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:cacheColorHint="@null"
          android:scrollbars="vertical"
          android:overScrollMode="ifContentScrolls" />
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2008 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
  
          http://www.apache.org/licenses/LICENSE-2.0
  
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="@style/TextAppearance.Widget.TextView"
    style="@style/Widget.ListItem"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2008 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
  
          http://www.apache.org/licenses/LICENSE-2.0
  
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="@style/TextAppearance.Widget.TextView"
    style="@style/Widget.ListItem"
    android:checkMark="?android:attr/listChoiceIndicatorSingle"
    android:ellipsize="marquee"/>
<?xml version="1.0"?>
<bindings xmlns="http://www.mozilla.org/xbl">
  <binding id="binding">
    <content>
      <html:div xmlns:html="http://www.w3.org/1999/xhtml">
        <p>xxxxxxx xxxxxxx xxxxxxx</p>
        <children/>
      </html:div>
    </content>
  </binding>
</bindings>
<?xml version="1.0"?>

<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    xmlns:html="http://www.w3.org/1999/xhtml">
  <binding id="selection-binding">  
    <content>
      <html:div flex="1" class="selection-overlay-inner window-width window-height" anonid="selection-overlay-inner">
        <xul:stack>
          <html:div anonid="selection-overlay-debug" class="window-width window-height"/>
          <xul:toolbarbutton anonid="selectionhandle-mark1" class="selectionhandle" label="^" left="10" top="10" hidden="true"/>
          <xul:toolbarbutton anonid="selectionhandle-mark2" class="selectionhandle" label="^" left="10" top="10" hidden="true"/>
          <xul:toolbarbutton anonid="selectionhandle-mark3" class="selectionhandle" label="^" left="10" top="10" hidden="true"/>
        </xul:stack>
      </html:div>
    </content>

    <implementation implements="nsIDOMEventListener">
      <field name="_selectionOverlay" readonly="true">document.getAnonymousElementByAttribute(this, "anonid", "selection-overlay-inner").parentNode;</field>
      <field name="_selectionDebugOverlay" readonly="true">document.getAnonymousElementByAttribute(this, "anonid", "selection-overlay-debug");</field>

      <property name="enabled">
        <setter>
          <![CDATA[
            if (val) {
              this._selectionOverlay.setAttribute("class", "selection-overlay window-width window-height");
            } else {
              this._selectionOverlay.setAttribute("class", "selection-overlay-hidden");
            }
            return val;
          ]]>
        </setter>
        <getter>
          <![CDATA[
          return (this._selectionOverlay.getAttribute("class") == "selection-overlay");
        ]]>
        </getter>
      </property>

      <property name="displayDebugLayer">
        <setter>
          <![CDATA[
            if (val) {
              this._selectionDebugOverlay.style.display = "block";
              this._debugLayerVisible = true;
            } else {
              this._selectionDebugOverlay.style.display = "none";
              this._debugLayerVisible = false;
              while(this._selectionDebugOverlay.hasChildNodes()) this._selectionDebugOverlay.removeChild(this._selectionDebugOverlay.firstChild);
            }
            return this._debugLayerVisible;
          ]]>
        </setter>
        <getter>
          <![CDATA[
          if (this._debugLayerVisible == "undefined")
            this._debugLayerVisible = false;
          return this._debugLayerVisible;
        ]]>
        </getter>
      </property>

      <method name="getMarker">
        <parameter name="aMarkerId"/>
        <body>
          <![CDATA[
            return document.getAnonymousElementByAttribute(this, "anonid", aMarkerId);
          ]]>
        </body>
      </method>

      <method name="addDebugRect">
        <parameter name="aLeft"/>
        <parameter name="aTop"/>
        <parameter name="aRight"/>
        <parameter name="aBottom"/>
        <parameter name="aColor"/>
        <parameter name="aFill"/>
        <parameter name="aId"/>
        <body>
          <![CDATA[
            let e = document.createElement("div");
            this._selectionDebugOverlay.appendChild(e);
            e.style.position = "fixed";
            e.style.left = aLeft +"px";
            e.style.top = aTop +"px";
            e.style.right = aRight +"px";
            e.style.bottom = aBottom +"px";
            e.style.maxWidth = (aRight - aLeft) +"px";
            e.style.width = (aRight - aLeft) +"px";
            e.style.maxHeight = (aBottom - aTop) +"px";
            e.style.height = (aBottom - aTop) +"px";
            e.style.pointerEvents = "none";
            if (aFill == undefined) {
              e.style.backgroundColor = aColor;
            } else {
              if (aFill) {
                e.style.backgroundColor = aColor;
              } else {
                e.style.border = "2px solid " + aColor;
              }
            }
            e.style.opacity = "0.5";
          ]]>
        </body>
      </method>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="false" android:color="#999" />
    <item android:color="#000"/>

</selector>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - SELECT</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" action="./files/getData.pl" method="post">
<p>
<select id="selectId" dir="ltr" tabindex="7" name="select1" multiple="multiple" size="1">
<option selected="selected" value="EMP1">EMP10001</option>
<option>EMP10002</option>
<option>EMP10003</option>
<option>EMP10004</option>
<option>EMP10005</option>
</select>
</p>
</form>
<p>
<select name="select2">
<option>EMP20001</option>
<option>EMP20002</option>
<option>EMP20003</option>
<option>EMP20004</option>
<option>EMP20005</option>
</select>
</p>
<p>
<select name="select3" disabled="disabled" tabindex="1">
<option>EMP30001</option>
<option>EMP30002</option>
<option>EMP30003</option>
<option>EMP30004</option>
<option>EMP30005</option>
</select>
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="ses"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="setting-fulltoggle-bool" extends="chrome://mozapps/content/extensions/setting.xml#setting-bool">
    <handlers>
      <handler event="command" button="0" phase="capturing">
        <![CDATA[
        event.stopPropagation();
        ]]>
      </handler>
      <handler event="click" button="0" phase="capturing">
        <![CDATA[
        event.stopPropagation();
        this.input.checked = !this.input.checked;
        this.inputChanged();
        this.fireEvent("oncommand");
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="setting-fulltoggle-boolint" extends="chrome://mozapps/content/extensions/setting.xml#setting-boolint">
    <handlers>
      <handler event="command" button="0" phase="capturing">
        <![CDATA[
        event.stopPropagation();
        ]]>
      </handler>
      <handler event="click" button="0" phase="capturing">
        <![CDATA[
        event.stopPropagation();
        this.input.checked = !this.input.checked;
        this.inputChanged();
        this.fireEvent("oncommand");
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="setting-fulltoggle-localized-bool" extends="chrome://mozapps/content/extensions/setting.xml#setting-localized-bool">
    <handlers>
      <handler event="command" button="0" phase="capturing">
        <![CDATA[
        event.stopPropagation();
        ]]>
      </handler>
      <handler event="click" button="0" phase="capturing">
        <![CDATA[
        event.stopPropagation();
        this.input.checked = !this.input.checked;
        this.inputChanged();
        this.fireEvent("oncommand");
        ]]>
      </handler>
    </handlers>
  </binding>
</bindings>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE page [
<!ENTITY % extensionsDTD SYSTEM "chrome://mozapps/locale/extensions/extensions.dtd">
%extensionsDTD;
]>

<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:xbl="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="settings">
    <content orient="vertical">
      <xul:label class="settings-title" xbl:inherits="xbl:text=label" flex="1"/>
      <children/>
    </content>
  </binding>

  <binding id="setting-base">
    <implementation>
      <constructor><![CDATA[
        this.preferenceChanged();

        this.addEventListener("keypress", function(event) {
          event.stopPropagation();
        }, false);
        
        if (this.usePref)
          Services.prefs.addObserver(this.pref, this._observer, true);
      ]]></constructor>

      <field name="_observer"><![CDATA[({
        _self: this,

        QueryInterface: function(aIID) {
          const Ci = Components.interfaces;
          if (aIID.equals(Ci.nsIObserver) ||
              aIID.equals(Ci.nsISupportsWeakReference) ||
              aIID.equals(Ci.nsISupports))
            return this;

          throw Components.Exception("No interface", Components.results.NS_ERROR_NO_INTERFACE);
        },

        observe: function(aSubject, aTopic, aPrefName) {
          if (aTopic != "nsPref:changed")
            return;

          if (this._self.pref == aPrefName)
            this._self.preferenceChanged();
        }
      })]]>
      </field>

      <method name="fireEvent">
        <parameter name="eventName"/>
        <parameter name="funcStr"/>
        <body>
          <![CDATA[
            let body = funcStr || this.getAttribute(eventName);
            if (!body)
              return;

            try {
              let event = document.createEvent("Events");
              event.initEvent(eventName, true, true);
              let f = new Function("event", body);
              f.call(this, event);
            }
            catch (e) {
              Cu.reportError(e);
            }
          ]]>
        </body>
      </method>

      <method name="valueFromPreference">
        <body>
        <![CDATA[
          // Should be code to set the from the preference input.value
          throw Components.Exception("No valueFromPreference implementation",
                                     Components.results.NS_ERROR_NOT_IMPLEMENTED);
        ]]>
        </body>
      </method>

      <method name="valueToPreference">
        <body>
        <![CDATA[
          // Should be code to set the input.value from the preference
          throw Components.Exception("No valueToPreference implementation",
                                     Components.results.NS_ERROR_NOT_IMPLEMENTED);
        ]]>
        </body>
      </method>

      <method name="inputChanged">
        <body>
        <![CDATA[
          if (this.usePref && !this._updatingInput) {
            this.valueToPreference();
            this.fireEvent("oninputchanged");
          }
        ]]>
        </body>
      </method>

      <method name="preferenceChanged">
        <body>
        <![CDATA[
          if (this.usePref) {
            this._updatingInput = true;
            try {
              this.valueFromPreference();
              this.fireEvent("onpreferencechanged");
            } catch (e) {}
            this._updatingInput = false;
          }
        ]]>
        </body>
      </method>

      <property name="usePref" readonly="true" onget="return this.hasAttribute('pref');"/>
      <property name="pref" readonly="true" onget="return this.getAttribute('pref');"/>
      <property name="type" readonly="true" onget="return this.getAttribute('type');"/>
      <property name="value" onget="return this.input.value;" onset="return this.input.value = val;"/>

      <field name="_updatingInput">false</field>
      <field name="input">document.getAnonymousElementByAttribute(this, "anonid", "input");</field>
      <field name="settings">
        this.parentNode.localName == "settings" ? this.parentNode : null;
      </field>
    </implementation>
  </binding>

  <binding id="setting-bool" extends="chrome://mozapps/content/extensions/setting.xml#setting-base">
    <content>
      <xul:vbox>
        <xul:hbox class="preferences-alignment">
          <xul:label class="preferences-title" flex="1" xbl:inherits="xbl:text=title"/>
        </xul:hbox>
        <xul:description class="preferences-description" flex="1" xbl:inherits="xbl:text=desc"/>
      </xul:vbox>
      <xul:hbox class="preferences-alignment">
        <xul:checkbox anonid="input" xbl:inherits="disabled,onlabel,offlabel,label=checkboxlabel" oncommand="inputChanged();"/>
      </xul:hbox>
    </content>

    <implementation>
      <method name="valueFromPreference">
        <body>
        <![CDATA[
          let val = Services.prefs.getBoolPref(this.pref);
          this.value = this.inverted ? !val : val;
         ]]>
        </body>
      </method>

      <method name="valueToPreference">
        <body>
        <![CDATA[
          let val = this.value;
          Services.prefs.setBoolPref(this.pref, this.inverted ? !val : val);
        ]]>
        </body>
      </method>

      <property name="value" onget="return this.input.checked;" onset="return this.input.setChecked(val);"/>
      <property name="inverted" readonly="true" onget="return this.getAttribute('inverted');"/>
    </implementation>
  </binding>

  <binding id="setting-boolint" extends="chrome://mozapps/content/extensions/setting.xml#setting-bool">
    <implementation>
      <method name="valueFromPreference">
        <body>
        <![CDATA[
          let val = Services.prefs.getIntPref(this.pref);
          this.value = (val == this.getAttribute("on"));
         ]]>
        </body>
      </method>

      <method name="valueToPreference">
        <body>
        <![CDATA[
          Services.prefs.setIntPref(this.pref, this.getAttribute(this.value ? "on" : "off"));
        ]]>
        </body>
      </method>
    </implementation>
  </binding>

  <binding id="setting-localized-bool" extends="chrome://mozapps/content/extensions/setting.xml#setting-bool">
    <implementation>
      <method name="valueFromPreference">
        <body>
        <![CDATA[
          let val = Services.prefs.getComplexValue(this.pref, Components.interfaces.nsIPrefLocalizedString).data;
          if(this.inverted) val = !val;
          this.value = (val == "true");
         ]]>
        </body>
      </method>

      <method name="valueToPreference">
        <body>
        <![CDATA[
          let val = this.value;
          if(this.inverted) val = !val;
          let pref = Components.classes["@mozilla.org/pref-localizedstring;1"].createInstance(Components.interfaces.nsIPrefLocalizedString);
          pref.data = this.inverted ? (!val).toString() : val.toString();
          Services.prefs.setComplexValue(this.pref, Components.interfaces.nsIPrefLocalizedString, pref);
        ]]>
        </body>
      </method>
    </implementation>
  </binding>

  <binding id="setting-integer" extends="chrome://mozapps/content/extensions/setting.xml#setting-base">
    <content>
      <xul:vbox>
        <xul:hbox class="preferences-alignment">
          <xul:label class="preferences-title" flex="1" xbl:inherits="xbl:text=title"/>
        </xul:hbox>
        <xul:description class="preferences-description" flex="1" xbl:inherits="xbl:text=desc"/>
      </xul:vbox>
      <xul:hbox class="preferences-alignment">
        <xul:textbox type="number" anonid="input" oninput="inputChanged();" onchange="inputChanged();"
                     xbl:inherits="disabled,emptytext,min,max,increment,hidespinbuttons,wraparound,size"/>
      </xul:hbox>
    </content>

    <implementation>
      <method name="valueFromPreference">
        <body>
        <![CDATA[
          let val = Services.prefs.getIntPref(this.pref);
          this.value = val;
         ]]>
        </body>
      </method>

      <method name="valueToPreference">
        <body>
        <![CDATA[
          Services.prefs.setIntPref(this.pref, this.value);
        ]]>
        </body>
      </method>
    </implementation>
  </binding>

  <binding id="setting-control" extends="chrome://mozapps/content/extensions/setting.xml#setting-base">
    <content>
      <xul:vbox>
        <xul:hbox class="preferences-alignment">
          <xul:label class="preferences-title" flex="1" xbl:inherits="xbl:text=title"/>
        </xul:hbox>
        <xul:description class="preferences-description" flex="1" xbl:inherits="xbl:text=desc"/>
      </xul:vbox>
      <xul:hbox class="preferences-alignment">
        <children/>
      </xul:hbox>
    </content>
  </binding>

  <binding id="setting-string" extends="chrome://mozapps/content/extensions/setting.xml#setting-base">
    <content>
      <xul:vbox>
        <xul:hbox class="preferences-alignment">
          <xul:label class="preferences-title" flex="1" xbl:inherits="xbl:text=title"/>
        </xul:hbox>
        <xul:description class="preferences-description" flex="1" xbl:inherits="xbl:text=desc"/>
      </xul:vbox>
      <xul:hbox class="preferences-alignment">
        <xul:textbox anonid="input" flex="1" oninput="inputChanged();"
                     xbl:inherits="disabled,emptytext,type=inputtype,min,max,increment,hidespinbuttons,decimalplaces,wraparound"/>
      </xul:hbox>
    </content>

    <implementation>
      <method name="valueFromPreference">
        <body>
        <![CDATA[
          const nsISupportsString = Components.interfaces.nsISupportsString;
          this.value = Services.prefs.getComplexValue(this.pref, nsISupportsString).data;
         ]]>
        </body>
      </method>

      <method name="valueToPreference">
        <body>
        <![CDATA[
          const nsISupportsString = Components.interfaces.nsISupportsString;
          let iss = Components.classes["@mozilla.org/supports-string;1"].createInstance(nsISupportsString);
          iss.data = this.value;
          Services.prefs.setComplexValue(this.pref, nsISupportsString, iss);
        ]]>
        </body>
      </method>
    </implementation>
  </binding>

  <binding id="setting-color" extends="chrome://mozapps/content/extensions/setting.xml#setting-base">
    <content>
      <xul:vbox>
        <xul:hbox class="preferences-alignment">
          <xul:label class="preferences-title" flex="1" xbl:inherits="xbl:text=title"/>
        </xul:hbox>
        <xul:description class="preferences-description" flex="1" xbl:inherits="xbl:text=desc"/>
      </xul:vbox>
      <xul:hbox class="preferences-alignment">
        <xul:colorpicker type="button" anonid="input" xbl:inherits="disabled" onchange="document.getBindingParent(this).inputChanged();"/>
      </xul:hbox>
    </content>

    <implementation>
      <method name="valueFromPreference">
        <body>
        <![CDATA[
          // We must wait for the colorpicker's binding to be applied before setting the value
          if (!this.input.color)
            this.input.initialize();
          this.value = Services.prefs.getCharPref(this.pref);
        ]]>
        </body>
      </method>

      <method name="valueToPreference">
        <body>
        <![CDATA[
          Services.prefs.setCharPref(this.pref, this.value);
        ]]>
        </body>
      </method>

      <property name="value" onget="return this.input.color;" onset="return this.input.color = val;"/>
    </implementation>
  </binding>

  <binding id="setting-path" extends="chrome://mozapps/content/extensions/setting.xml#setting-base">
    <content>
      <xul:vbox>
        <xul:hbox class="preferences-alignment">
          <xul:label class="preferences-title" flex="1" xbl:inherits="xbl:text=title"/>
        </xul:hbox>
        <xul:description class="preferences-description" flex="1" xbl:inherits="xbl:text=desc"/>
      </xul:vbox>
      <xul:hbox class="preferences-alignment">
        <xul:button type="button" anonid="button" label="&settings.path.button.label;" xbl:inherits="disabled" oncommand="showPicker();"/>
        <xul:label anonid="input" flex="1" crop="center" xbl:inherits="disabled"/>
      </xul:hbox>
    </content>

    <implementation>
      <method name="showPicker">
        <body>
        <![CDATA[
          var filePicker = Cc["@mozilla.org/filepicker;1"].createInstance(Ci.nsIFilePicker);
          filePicker.init(window, this.getAttribute("title"),
                          this.type == "file" ? Ci.nsIFilePicker.modeOpen : Ci.nsIFilePicker.modeGetFolder);
          if (this.value) {
            try {
              let file = Cc["@mozilla.org/file/local;1"].createInstance(Ci.nsIFile);
              file.initWithPath(this.value);
              filePicker.displayDirectory = this.type == "file" ? file.parent : file;
              if (this.type == "file") {
                filePicker.defaultString = file.leafName;
              }
            } catch (e) {}
          }
          if (filePicker.show() != Ci.nsIFilePicker.returnCancel) {
            this.value = filePicker.file.path;
            this.inputChanged();
          }
        ]]>
        </body>
      </method>

      <method name="valueFromPreference">
        <body>
        <![CDATA[
          this.value = Services.prefs.getCharPref(this.pref);
        ]]>
        </body>
      </method>

      <method name="valueToPreference">
        <body>
        <![CDATA[
          Services.prefs.setCharPref(this.pref, this.value);
        ]]>
        </body>
      </method>

      <field name="_value"></field>

      <property name="value">
        <getter>
        <![CDATA[
          return this._value;
        ]]>
        </getter>
        <setter>
        <![CDATA[
          this._value = val;
          let label = "";
          if (val) {
            try {
              let file = Cc["@mozilla.org/file/local;1"].createInstance(Ci.nsIFile);
              file.initWithPath(val);
              label = this.hasAttribute("fullpath") ? file.path : file.leafName;
            } catch (e) {}
          }
          this.input.tooltipText = val;
          return this.input.value = label;
       ]]>
        </setter>
      </property>
    </implementation>
  </binding>

  <binding id="setting-multi" extends="chrome://mozapps/content/extensions/setting.xml#setting-base">
    <content>
      <xul:vbox>
        <xul:hbox class="preferences-alignment">
          <xul:label class="preferences-title" flex="1" xbl:inherits="xbl:text=title"/>
        </xul:hbox>
        <xul:description class="preferences-description" flex="1" xbl:inherits="xbl:text=desc"/>
      </xul:vbox>
      <xul:hbox class="preferences-alignment">
        <children includes="radiogroup|menulist"/>
      </xul:hbox>
    </content>

    <implementation>
      <constructor>
      <![CDATA[
        this.control.addEventListener("command", this.inputChanged.bind(this), false);
      ]]>
      </constructor>

      <method name="valueFromPreference">
        <body>
        <![CDATA[
          let val;
          switch (Services.prefs.getPrefType(this.pref)) {
            case Ci.nsIPrefBranch.PREF_STRING:
              val = Services.prefs.getCharPref(this.pref);
              break;
            case Ci.nsIPrefBranch.PREF_INT:
              val = Services.prefs.getIntPref(this.pref);
              break;
            case Ci.nsIPrefBranch.PREF_BOOL:
              val = Services.prefs.getBoolPref(this.pref).toString();
              break;
            default:
              return;
          }

          if ("itemCount" in this.control) {
            for (let i = 0; i < this.control.itemCount; i++) {
              if (this.control.getItemAtIndex(i).value == val) {
                this.control.selectedIndex = i;
                break;
              }
            }
          } else {
            this.control.setAttribute("value", val);
          }
        ]]>
        </body>
      </method>

      <method name="valueToPreference">
        <body>
        <![CDATA[
          // We might not have a pref already set, so we guess the type from the value attribute
          let val = this.control.selectedItem.value;
          if (val == "true" || val == "false")
            Services.prefs.setBoolPref(this.pref, val == "true");
          else if (/^-?\d+$/.test(val))
            Services.prefs.setIntPref(this.pref, val);
          else
            Services.prefs.setCharPref(this.pref, val);
        ]]>
        </body>
      </method>

      <field name="control">this.getElementsByTagName(this.getAttribute("type") == "radio" ? "radiogroup" : "menulist")[0];</field>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:26 $"/>
        <language type="se"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="sg"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"
          android:drawable="@color/highlight_shaped"/>

    <item android:state_focused="true"
          android:state_pressed="false"
          android:drawable="@color/highlight_shaped_focused"/>
 
    <item android:drawable="@color/background_tabs"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- This file is used to include shared UI components in different gecko app
     layouts, such as gecko_app.xml and web_app.xml -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <org.mozilla.gecko.GeckoView android:id="@+id/layer_view"
                                 gecko:doinit="false"
                                 android:layout_width="match_parent"
                                 android:layout_height="match_parent"/>

    <AbsoluteLayout android:id="@+id/plugin_container"
                    android:background="@android:color/transparent"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"/>

    <org.mozilla.gecko.FormAssistPopup android:id="@+id/form_assist_popup"
                                       android:layout_width="match_parent"
                                       android:layout_height="match_parent"
                                       android:visibility="gone"/>

    <include layout="@layout/text_selection_handles"/>

    <FrameLayout android:id="@+id/camera_layout"
                 android:layout_height="wrap_content"
                 android:layout_width="wrap_content"
                 android:layout_alignParentRight="true"
                 android:layout_alignParentBottom="true">
    </FrameLayout>

</merge>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2012 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 32275 $"/>
		<generation date="$Date: 2012-08-28 14:56:06 -0700 (Tue, 28 Aug 2012) $"/>
		<language type="shi"/> 
		<script type="Latn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="shi"/> 
		<script type="Tfng"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Tfng</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2012 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 32275 $"/>
		<generation date="$Date: 2012-08-28 14:56:06 -0700 (Tue, 28 Aug 2012) $"/>
		<language type="shi"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Tfng</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>

<!--
  This XML file describes the encryption applied to short-cenc.mp4. To generate
  short-cenc, run the following command:

    MP4Box -crypt short-cenc.xml -out short-cenc.mp4 short.mp4
-->

<GPACDRM type="CENC AES-CTR">

  <DRMInfo type="pssh" version="1">
    <!--
    SystemID specified in
    https://dvcs.w3.org/hg/html-media/raw-file/tip/encrypted-media/cenc-format.html
    -->
    <BS ID128="1077efecc0b24d02ace33c1e52e2fb4b" />
    <!-- Number of KeyIDs = 2 -->
    <BS bits="32" value="2" />
    <!-- KeyID -->
    <BS ID128="0x7e571d017e571d017e571d017e571d01" />
    <BS ID128="0x7e571d027e571d027e571d027e571d02" />
  </DRMInfo>

  <CrypTrack trackID="1" isEncrypted="1" IV_size="16" saiSavedBox="senc"
    first_IV="0x00000000000000000000000000000000">
    <key KID="0x7e571d017e571d017e571d017e571d01"
      value="0x7e5711117e5711117e5711117e571111" />
  </CrypTrack>

  <CrypTrack trackID="2" isEncrypted="1" IV_size="16" saiSavedBox="senc"
    first_IV="0x00000000000000000000000000000000">
    <key KID="0x7e571d027e571d027e571d027e571d02"
      value="0x7e5722227e5722227e5722227e572222" />
  </CrypTrack>

</GPACDRM>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<set xmlns:android="http://schemas.android.com/apk/res/android">

    <scale android:fromXScale="1.0"
           android:toXScale="1.0"
           android:fromYScale="1.0"
           android:toYScale="0.3"
           android:pivotX="0%"
           android:pivotY="0%"
           android:duration="150"/>

    <alpha android:interpolator="@android:anim/accelerate_interpolator"
           android:fromAlpha="1.0"
           android:toAlpha="0.0"
           android:duration="150"/>

</set>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:56 $"/>
		<language type="sh"/> 
	</identity>
</ldml>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="signtool">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>signtool</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>signtool</refname>
    <refpurpose>Digitally sign objects and files.</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>signtool</command>
      <arg>[-b basename]</arg>
      <arg>[-c Compression Level] </arg>
      <arg>[-d cert-dir] </arg>
      <arg>[-e extension] </arg>
      <arg>[-f filename] </arg>
      <arg>[-i installer script] </arg>
      <arg>[-h]</arg>
      <arg>[-H]</arg>
      <arg>[-v]</arg>
      <arg>[-w]</arg>
      <arg>[-G nickname]</arg>
      <arg>[-J]</arg>
      <arg>[-j directory] </arg>
      <arg>-k keyName</arg>
      <arg>[--keysize | -s size]</arg>
      <arg>[-l]</arg>
      <arg>[-L]</arg>
      <arg>[-M]</arg>
      <arg>[-m metafile] </arg>
      <arg>[--norecurse] </arg>
      <arg>[-O] </arg>
      <arg>[-o] </arg>
      <arg>[--outfile] </arg>
      <arg>[-p password] </arg>
      <arg>[-t|--token tokenname] </arg>
      <arg>[-z] </arg>
      <arg>[-X] </arg>
      <arg>[-x name] </arg>
      <arg>[--verbose value] </arg>
      <arg>[--leavearc] </arg>
      <arg>[-Z jarfile] </arg>
      <arg>directory-tree</arg>
      <arg>archive</arg>
<!-- this isn't the ideal formatting, since docbook can handle reqiored/optional formatting automatically, but let's make it explicit -->
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection id="description">
    <title>Description</title>

    <para>The Signing Tool, <command>signtool</command>, creates digital signatures and uses a Java Archive (JAR) file to associate the signatures with files in a directory. Electronic software distribution over any network involves potential security problems. To help address some of these problems, you can associate digital signatures with the files in a JAR archive. Digital signatures allow SSL-enabled clients to perform two important operations:</para>
    <para>* Confirm the identity of the individual, company, or other entity whose digital signature is associated with the files</para>
    <para>* Check whether the files have been tampered with since being signed</para>
    <para>If you have a signing certificate, you can use Netscape Signing Tool to digitally sign files and package them as a JAR file. An object-signing certificate is a special kind of certificate that allows you to associate your digital signature with one or more files.</para>
    <para>An individual file can potentially be signed with multiple digital signatures. For example, a commercial software developer might sign the files that constitute a software product to prove that the files are indeed from a particular company. A network administrator manager might sign the same files with an additional digital signature based on a company-generated certificate to indicate that the product is approved for use within the company.</para>
   <para>The significance of a digital signature is comparable to the significance of a handwritten signature. Once you have signed a file, it is difficult to claim later that you didn't sign it. In some situations, a digital signature may be considered as legally binding as a handwritten signature. Therefore, you should take great care to ensure that you can stand behind any file you sign and distribute.</para>
   <para>For example, if you are a software developer, you should test your code to make sure it is virus-free before signing it. Similarly, if you are a network administrator, you should make sure, before signing any code, that it comes from a reliable source and will run correctly with the software installed on the machines to which you are distributing it.</para>
    <para>Before you can use Netscape Signing Tool to sign files, you must have an object-signing certificate, which is a special certificate whose associated private key is used to create digital signatures. For testing purposes only, you can create an object-signing certificate with Netscape Signing Tool 1.3. When testing is finished and you are ready to disitribute your software, you should obtain an object-signing certificate from one of two kinds of sources:</para>
    <para>* An independent certificate authority (CA) that authenticates your identity and charges you a fee. You typically get a certificate from an independent CA if you want to sign software that will be distributed over the Internet.</para>
    <para>* CA server software running on your corporate intranet or extranet. Netscape Certificate Management System provides a complete management solution for creating, deploying, and managing certificates, including CAs that issue object-signing certificates.</para>
    <para>You must also have a certificate for the CA that issues your signing certificate before you can sign files. If the certificate authority's certificate isn't already installed in your copy of Communicator, you typically install it by clicking the appropriate link on the certificate authority's web site, for example on the page from which you initiated enrollment for your signing certificate. This is the case for some test certificates, as well as certificates issued by Netscape Certificate Management System: you must download the the CA certificate in addition to obtaining your own signing certificate. CA certificates for several certificate authorities are preinstalled in the Communicator certificate database.</para>
    <para>When you receive an object-signing certificate for your own use, it is automatically installed in your copy of the Communicator client software. Communicator supports the public-key cryptography standard known as PKCS #12, which governs key portability. You can, for example, move an object-signing certificate and its associated private key from one computer to another on a credit-card-sized device called a smart card.</para>
  </refsection>
  
  <refsection id="options">
    <title>Options</title>

<!-- for the moment, I can't find a way for italics and bold tags to work in varlist entries --> 
    <variablelist>
      <varlistentry>
        <term>-b basename</term>
        <listitem><para>Specifies the base filename for the .rsa and .sf files in the META-INF directory to conform with the JAR format. For example, <emphasis>-b signatures</emphasis> causes the files to be named signatures.rsa and signatures.sf. The default is signtool.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-c#</term>
	<listitem><para>
	Specifies the compression level for the -J or -Z option. The symbol # represents a number from 0 to 9, where 0 means no compression and 9 means maximum compression. The higher the level of compression, the smaller the output but the longer the operation takes.

If the -c# option is not used with either the -J or the -Z option, the default compression value used by both the -J and -Z options is 6.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-d certdir</term>
			<listitem><para>
	Specifies your certificate database directory; that is, the directory in which you placed your key3.db and cert7.db files. To specify the current directory, use "-d." (including the period).

The Unix version of signtool assumes ~/.netscape unless told otherwise. The NT version of signtool always requires the use of the -d option to specify where the database files are located.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-e extension</term>
			<listitem><para>
	Tells signtool to sign only files with the given extension; for example, use -e".class" to sign only Java class files. Note that with Netscape Signing Tool version 1.1 and later this option can appear multiple times on one command line, making it possible to specify multiple file types or classes to include.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-f commandfile</term>
			<listitem><para>
	Specifies a text file containing Netscape Signing Tool options and arguments in keyword=value format. All options and arguments can be expressed through this file. For more information about the syntax used with this file, see "Tips and Techniques".
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-G nickname</term>
        <listitem><para>
	Generates a new private-public key pair and corresponding object-signing certificate with the given nickname.

The newly generated keys and certificate are installed into the key and certificate databases in the directory specified by the -d option. With the NT version of Netscape Signing Tool, you must use the -d option with the -G option. With the Unix version of Netscape Signing Tool, omitting the -d option causes the tool to install the keys and certificate in the Communicator key and certificate databases. If you are installing the keys and certificate in the Communicator databases, you must exit Communicator before using this option; otherwise, you risk corrupting the databases. In all cases, the certificate is also output to a file named x509.cacert, which has the MIME-type application/x-x509-ca-cert.

Unlike certificates normally used to sign finished code to be distributed over a network, a test certificate created with -G is not signed by a recognized certificate authority. Instead, it is self-signed. In addition, a single test signing certificate functions as both an object-signing certificate and a CA. When you are using it to sign objects, it behaves like an object-signing certificate. When it is imported into browser software such as Communicator, it behaves like an object-signing CA and cannot be used to sign objects.

The -G option is available in Netscape Signing Tool 1.0 and later versions only. By default, it produces only RSA certificates with 1024-byte keys in the internal token. However, you can use the -s option specify the required key size and the -t option to specify the token.
        </para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-i scriptname</term>
        <listitem><para>
Specifies the name of an installer script for SmartUpdate. This script installs files from the JAR archive in the local system after SmartUpdate has validated the digital signature. For more details, see the description of -m that follows. The -i option provides a straightforward way to provide this information if you don't need to specify any metadata other than an installer script.
        </para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-J</term>
        <listitem>
          <para>
Signs a directory of HTML files containing JavaScript and creates as many archive files as are specified in the HTML tags. Even if signtool creates more than one archive file, you need to supply the key database password only once.

The -J option is available only in Netscape Signing Tool 1.0 and later versions. The -J option cannot be used at the same time as the -Z option.

If the -c# option is not used with the -J option, the default compression value is 6.

Note that versions 1.1 and later of Netscape Signing Tool correctly recognizes the CODEBASE attribute, allows paths to be expressed for the CLASS and SRC attributes instead of filenames only, processes LINK tags and parses HTML correctly, and offers clearer error messages.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>-j directory</term>
			<listitem><para>
	Specifies a special JavaScript directory. This option causes the specified directory to be signed and tags its entries as inline JavaScript. This special type of entry does not have to appear in the JAR file itself. Instead, it is located in the HTML page containing the inline scripts. When you use signtool -v, these entries are displayed with the string NOT PRESENT.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-k key ... directory</term>
			<listitem><para>
	Specifies the nickname (key) of the certificate you want to sign with and signs the files in the specified directory. The directory to sign is always specified as the last command-line argument. Thus, it is possible to write

signtool -k MyCert -d . signdir

You may have trouble if the nickname contains a single quotation mark. To avoid problems, escape the quotation mark using the escape conventions for your platform.

It's also possible to use the -k option without signing any files or specifying a directory. For example, you can use it with the -l option to get detailed information about a particular signing certificate.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-l</term>
			<listitem><para>
	Lists signing certificates, including issuing CAs. If any of your certificates are expired or invalid, the list will so specify. This option can be used with the -k option to list detailed information about a particular signing certificate.

The -l option is available in Netscape Signing Tool 1.0 and later versions only.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-L</term>
			<listitem><para>
	Lists the certificates in your database. An asterisk appears to the left of the nickname for any certificate that can be used to sign objects with signtool.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>--leavearc</term>
			<listitem><para>
	Retains the temporary .arc (archive) directories that the -J option creates. These directories are automatically erased by default. Retaining the temporary directories can be an aid to debugging.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-m metafile</term>
			<listitem><para>
	Specifies the name of a metadata control file. Metadata is signed information attached either to the JAR archive itself or to files within the archive. This metadata can be any ASCII string, but is used mainly for specifying an installer script.

The metadata file contains one entry per line, each with three fields:

field #1: file specification, or + if you want to specify global metadata (that is, metadata about the JAR archive itself or all entries in the archive)
field #2: the name of the data you are specifying; for example: Install-Script
field #3: data corresponding to the name in field #2

For example, the -i option uses the equivalent of this line:

+ Install-Script: script.js


This example associates a MIME type with a file:

movie.qt MIME-Type: video/quicktime

For information about the way installer script information appears in the manifest file for a JAR archive, see The JAR Format on Netscape DevEdge.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-M</term>
			<listitem><para>
	Lists the PKCS #11 modules available to signtool, including smart cards.

The -M option is available in Netscape Signing Tool 1.0 and later versions only.

For information on using Netscape Signing Tool with smart cards, see "Using Netscape Signing Tool with Smart Cards".

For information on using the -M option to verify FIPS-140-1 validated mode, see "Netscape Signing Tool and FIPS-140-1".
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>--norecurse</term>
			<listitem><para>
	Blocks recursion into subdirectories when signing a directory's contents or when parsing HTML.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-o</term>
			<listitem><para>
	Optimizes the archive for size. Use this only if you are signing very large archives containing hundreds of files. This option makes the manifest files (required by the JAR format) considerably smaller, but they contain slightly less information.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>--outfile outputfile</term>
			<listitem><para>
	Specifies a file to receive redirected output from Netscape Signing Tool.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-p password</term>
			<listitem><para>
	Specifies a password for the private-key database. Note that the password entered on the command line is displayed as plain text.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-s keysize</term>
			<listitem><para>
	Specifies the size of the key for generated certificate. Use the -M option to find out what tokens are available.

The -s option can be used with the -G option only.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-t token</term>
			<listitem><para>
	Specifies which available token should generate the key and receive the certificate. Use the -M option to find out what tokens are available.

The -t option can be used with the -G option only.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-v archive</term>
			<listitem><para>
	Displays the contents of an archive and verifies the cryptographic integrity of the digital signatures it contains and the files with which they are associated. This includes checking that the certificate for the issuer of the object-signing certificate is listed in the certificate database, that the CA's digital signature on the object-signing certificate is valid, that the relevant certificates have not expired, and so on.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>--verbosity value</term>
			<listitem><para>
	Sets the quantity of information Netscape Signing Tool generates in operation. A value of 0 (zero) is the default and gives full information. A value of -1 suppresses most messages, but not error messages.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-w archive</term>
			<listitem><para>
	Displays the names of signers of any files in the archive.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-x directory</term>
			<listitem><para>
	Excludes the specified directory from signing. Note that with Netscape Signing Tool version 1.1 and later this option can appear multiple times on one command line, making it possible to specify several particular directories to exclude.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-z</term>
			<listitem><para>
	Tells signtool not to store the signing time in the digital signature. This option is useful if you want the expiration date of the signature checked against the current date and time rather than the time the files were signed.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-Z jarfile</term>
			<listitem><para>
	Creates a JAR file with the specified name. You must specify this option if you want signtool to create the JAR file; it does not do so automatically. If you don't specify -Z, you must use an external ZIP tool to create the JAR file.

The -Z option cannot be used at the same time as the -J option.

If the -c# option is not used with the -Z option, the default compression value is 6.</para></listitem>
      </varlistentry>
    </variablelist>
  </refsection>

  <refsection id="command-file">
    <title>The Command File Format</title>
    <para>Entries in a Netscape Signing Tool command file have this general format:
keyword=value

Everything before the = sign on a single line is a keyword, and everything from the = sign to the end of line is a value. The value may include = signs; only the first = sign on a line is interpreted. Blank lines are ignored, but white space on a line with keywords and values is assumed to be part of the keyword (if it comes before the equal sign) or part of the value (if it comes after the first equal sign). Keywords are case insensitive, values are generally case sensitive. Since the = sign and newline delimit the value, it should not be quoted. </para>
<!-- i'm working on a decent way to do embedded subsections; for now, just use a bold tag to show a new section -->
	<para><command>Subsection</command></para>
	<variablelist>
		<varlistentry>
			<term>basename</term>
			<listitem><para>Same as -b option.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>compression</term>
			<listitem><para>
	Same as -c option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>certdir</term>
			<listitem><para>
	Same as -d option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>extension</term>
			<listitem><para>
	Same as -e option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>generate</term>
			<listitem><para>
	Same as -G option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>installscript</term>
			<listitem><para>
	Same as -i option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>javascriptdir</term>
			<listitem><para>
	Same as -j option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>htmldir</term>
			<listitem><para>
	Same as -J option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>certname</term>
			<listitem><para>
	Nickname of certificate, as with -k and -l -k options.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>signdir</term>
			<listitem><para>
	The directory to be signed, as with -k option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>list</term>
			<listitem><para>
	Same as -l option. Value is ignored, but = sign must be present.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>listall</term>
			<listitem><para>
	Same as -L option. Value is ignored, but = sign must be present.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>metafile</term>
			<listitem><para>
	Same as -m option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>modules</term>
			<listitem><para>
	Same as -M option. Value is ignored, but = sign must be present.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>optimize</term>
			<listitem><para>
	Same as -o option. Value is ignored, but = sign must be present.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>password</term>
			<listitem><para>
	Same as -p option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>keysize</term>
			<listitem><para>
	Same as -s option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>token</term>
			<listitem><para>
	Same as -t option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>verify</term>
			<listitem><para>
	Same as -v option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>who</term>
			<listitem><para>
	Same as -w option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>exclude</term>
			<listitem><para>
	Same as -x option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>notime</term>
			<listitem><para>
	Same as -z option. value is ignored, but = sign must be present.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>jarfile</term>
			<listitem><para>
	Same as -Z option.
</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>outfile</term>
			<listitem><para>
	Name of a file to which output and error messages will be redirected. This option has no command-line equivalent.
	</para></listitem></varlistentry></variablelist>
  </refsection>

  <refsection id="examples">
    <title>Extended Examples</title>
    <para>The following example will do this and that
    </para>
	<para><command>Listing Available Signing Certificates</command></para>
	<para>You use the -L option to list the nicknames for all available certificates and check which ones are signing certificates.</para>
<programlisting >signtool -L 

using certificate directory: /u/jsmith/.netscape 
S Certificates 
- ------------ 
  BBN Certificate Services CA Root 1 
  IBM World Registry CA 
  VeriSign Class 1 CA - Individual Subscriber - VeriSign, Inc. 
  GTE CyberTrust Root CA 
  Uptime Group Plc. Class 4 CA 
* Verisign Object Signing Cert 
  Integrion CA 
  GTE CyberTrust Secure Server CA 
  AT&amp;T Directory Services 
* test object signing cert 
  Uptime Group Plc. Class 1 CA 
  VeriSign Class 1 Primary CA 
- ------------

Certificates that can be used to sign objects have *'s to their left. </programlisting>
	<para>Two signing certificates are displayed: Verisign Object Signing Cert and test object signing cert.</para>
	<para>You use the -l option to get a list of signing certificates only, including the signing CA for each.</para>
<programlisting >signtool -l

using certificate directory: /u/jsmith/.netscape
Object signing certificates
---------------------------------------

Verisign Object Signing Cert
    Issued by: VeriSign, Inc. - Verisign, Inc.
    Expires: Tue May 19, 1998
test object signing cert
    Issued by: test object signing cert (Signtool 1.0 Testing 
Certificate (960187691))
    Expires: Sun May 17, 1998
---------------------------------------</programlisting>
	<para>For a list including CAs, use the <option>-L</option> option.</para>

	<para><command>Signing a File</command></para>
	<para>1. Create an empty directory.</para>
<programlisting >mkdir signdir</programlisting>

	<para>2. Put some file into it.</para>
<programlisting >echo boo > signdir/test.f</programlisting>

	<para>3. Specify the name of your object-signing certificate and sign the directory.</para>
<programlisting >signtool -k MySignCert -Z testjar.jar signdir

using key "MySignCert"
using certificate directory: /u/jsmith/.netscape
Generating signdir/META-INF/manifest.mf file..
--> test.f
adding signdir/test.f to testjar.jar
Generating signtool.sf file..
Enter Password or Pin for "Communicator Certificate DB":

adding signdir/META-INF/manifest.mf to testjar.jar
adding signdir/META-INF/signtool.sf to testjar.jar
adding signdir/META-INF/signtool.rsa to testjar.jar

tree "signdir" signed successfully</programlisting>
	<para>4. Test the archive you just created.</para>
<programlisting >signtool -v testjar.jar

using certificate directory: /u/jsmith/.netscape
archive "testjar.jar" has passed crypto verification.
           status   path
     ------------   -------------------
         verified   test.f</programlisting>

	<para><command>Using Netscape Signing Tool with a ZIP Utility</command></para>
	<para>To use Netscape Signing Tool with a ZIP utility, you must have the utility in your path environment variable. You should use the zip.exe utility rather than pkzip.exe, which cannot handle long filenames. You can use a ZIP utility instead of the -Z option to package a signed archive into a JAR file after you have signed it:</para>
<programlisting >cd signdir 

  zip -r ../myjar.jar * 
  adding: META-INF/ (stored 0%) 
  adding: META-INF/manifest.mf (deflated 15%) 
  adding: META-INF/signtool.sf (deflated 28%) 
  adding: META-INF/signtool.rsa (stored 0%) 
  adding: text.txt (stored 0%)</programlisting>

	<para><command>Generating the Keys and Certificate</command></para>
	<para>The signtool option -G generates a new public-private key pair and certificate. It takes the nickname of the new certificate as an argument. The newly generated keys and certificate are installed into the key and certificate databases in the directory specified by the -d option. With the NT version of Netscape Signing Tool, you must use the -d option with the -G option. With the Unix version of Netscape Signing Tool, omitting the -d option causes the tool to install the keys and certificate in the Communicator key and certificate databases. In all cases, the certificate is also output to a file named x509.cacert, which has the MIME-type application/x-x509-ca-cert.</para>
	<para>Certificates contain standard information about the entity they identify, such as the common name and organization name. Netscape Signing Tool prompts you for this information when you run the command with the -G option. However, all of the requested fields are optional for test certificates. If you do not enter a common name, the tool provides a default name. In the following example, the user input is in boldface:</para>
<programlisting >signtool -G MyTestCert

using certificate directory: /u/someuser/.netscape
Enter certificate information. All fields are optional. Acceptable
characters are numbers, letters, spaces, and apostrophes.
certificate common name: Test Object Signing Certificate
organization: Netscape Communications Corp.
organization unit: Server Products Division
state or province: California
country (must be exactly 2 characters): US
username: someuser
email address: someuser@netscape.com
Enter Password or Pin for "Communicator Certificate DB": [Password will not echo]
generated public/private key pair
certificate request generated
certificate has been signed
certificate "MyTestCert" added to database
Exported certificate to x509.raw and x509.cacert.</programlisting>
	<para>The certificate information is read from standard input. Therefore, the information can be read from a file using the redirection operator (&lt;) in some operating systems. To create a file for this purpose, enter each of the seven input fields, in order, on a separate line. Make sure there is a newline character at the end of the last line. Then run signtool with standard input redirected from your file as follows:</para>
<programlisting >signtool -G MyTestCert inputfile</programlisting>
	<para>The prompts show up on the screen, but the responses will be automatically read from the file. The password will still be read from the console unless you use the -p option to give the password on the command line.</para>

	<para><command>Using the -M Option to List Smart Cards</command></para>
	<para>You can use the -M option to list the PKCS #11 modules, including smart cards, that are available to signtool:</para>
<programlisting >signtool -d "c:\netscape\users\jsmith" -M

using certificate directory: c:\netscape\users\username
Listing of PKCS11 modules 
----------------------------------------------- 
	1. Netscape Internal PKCS #11 Module 
			  (this module is internally loaded) 
			  slots: 2 slots attached 
			  status: loaded 
	  slot: Communicator Internal Cryptographic Services Version 4.0 
	 token: Communicator Generic Crypto Svcs 
	  slot: Communicator User Private Key and Certificate Services 
	 token: Communicator Certificate DB 
	2. CryptOS 
			  (this is an external module) 
 DLL name: core32 
	 slots: 1 slots attached 
	status: loaded 
	  slot: Litronic 210 
	 token: 
	----------------------------------------------- </programlisting>

	<para><command>Using Netscape Signing Tool and a Smart Card to Sign Files</command></para>
	<para>The signtool command normally takes an argument of the -k option to specify a signing certificate. To sign with a smart card, you supply only the fully qualified name of the certificate.</para>
	<para>To see fully qualified certificate names when you run Communicator, click the Security button in Navigator, then click Yours under Certificates in the left frame. Fully qualified names are of the format smart card:certificate, for example "MyCard:My Signing Cert". You use this name with the -k argument as follows:</para>
<programlisting >signtool -k "MyCard:My Signing Cert" directory</programlisting>


	<para><command>Verifying FIPS Mode</command></para>
	<para>Use the -M option to verify that you are using the FIPS-140-1 module.</para>
<programlisting >signtool -d "c:\netscape\users\jsmith" -M

using certificate directory: c:\netscape\users\jsmith
Listing of PKCS11 modules
-----------------------------------------------
  1. Netscape Internal PKCS #11 Module
          (this module is internally loaded)
          slots: 2 slots attached
          status: loaded
    slot: Communicator Internal Cryptographic Services Version 4.0
   token: Communicator Generic Crypto Svcs
    slot: Communicator User Private Key and Certificate Services
   token: Communicator Certificate DB
-----------------------------------------------</programlisting>
	<para>This Unix example shows that Netscape Signing Tool is using a FIPS-140-1 module:</para>
<programlisting >signtool -d "c:\netscape\users\jsmith" -M
using certificate directory: c:\netscape\users\jsmith
Enter Password or Pin for "Communicator Certificate DB": [password will not echo]
Listing of PKCS11 modules
-----------------------------------------------
1. Netscape Internal FIPS PKCS #11 Module
(this module is internally loaded)
slots: 1 slots attached
status: loaded
slot: Netscape Internal FIPS-140-1 Cryptographic Services
token: Communicator Certificate DB
-----------------------------------------------</programlisting>
  </refsection>

  <refsection id="seealso">
    <title>See Also</title>
    <para>signver (1)</para>

	<para>The NSS wiki has information on the new database design and how to configure applications to use it.</para>
	<itemizedlist>
		<listitem>
			<para>
				https://wiki.mozilla.org/NSS_Shared_DB_Howto</para>
		</listitem>
		<listitem>
			<para>
				https://wiki.mozilla.org/NSS_Shared_DB
			</para>
		</listitem>
	</itemizedlist>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="signver">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>SIGNVER</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>signver</refname>
    <refpurpose>Verify a detached PKCS#7 signature for a file.</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>signtool</command>
	<group choice="plain">
		<arg choice="plain">-A</arg>
		<arg choice="plain">-V</arg>
	</group>
      <arg choice="plain">-d <replaceable>directory</replaceable></arg>
      <arg>-a</arg>
	<arg>-i <replaceable>input_file</replaceable></arg>
	<arg>-o <replaceable>output_file</replaceable></arg>
	<arg>-s <replaceable>signature_file</replaceable></arg>
      <arg>-v</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection id="description">
    <title>Description</title>

    <para>The Signature Verification Tool, <command>signver</command>, is a simple command-line utility that unpacks a base-64-encoded PKCS#7 signed object and verifies the digital signature using standard cryptographic techniques. The Signature Verification Tool can also display the contents of the signed object.</para>
  </refsection>
  
  <refsection id="options">
    <title>Options</title>
    <variablelist>
      <varlistentry>
        <term>-A</term>
        <listitem><para>Displays all of the information in the PKCS#7 signature.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-V</term>
        <listitem><para>Verifies the digital signature.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-d [sql:]<emphasis>directory</emphasis></term>
        <listitem><para>Specify the database directory which contains the certificates and keys.</para>
	<para><command>signver</command> supports two types of databases: the legacy security databases (<filename>cert8.db</filename>, <filename>key3.db</filename>, and <filename>secmod.db</filename>) and new SQLite databases (<filename>cert9.db</filename>, <filename>key4.db</filename>, and <filename>pkcs11.txt</filename>). If the prefix <command>sql:</command> is not used, then the tool assumes that the given databases are in the old format.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-a</term>
        <listitem><para>Sets that the given signature file is in ASCII format.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-i <emphasis>input_file</emphasis></term>
        <listitem><para>Gives the input file for the object with signed data.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-o <emphasis>output_file</emphasis></term>
        <listitem><para>Gives the output file to which to write the results.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-s <emphasis>signature_file</emphasis></term>
        <listitem><para>Gives the input file for the digital signature.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-v</term>
        <listitem><para>Enables verbose output.</para></listitem>
      </varlistentry>
    </variablelist>
  </refsection>

  <refsection id="examples">
    <title>Extended Examples</title>
	<refsection><title>Verifying a Signature</title>
	<para>The <option>-V</option> option verifies that the signature in a given signature file is valid when used to sign the given object (from the input file).</para>
<programlisting>signver -V -s <replaceable>signature_file</replaceable> -i <replaceable>signed_file</replaceable> -d sql:/home/my/sharednssdb

signatureValid=yes</programlisting>
	</refsection>

	<refsection><title>Printing Signature Data</title>
		<para>
			The <option>-A</option> option prints all of the information contained in a signature file. Using the <option>-o</option> option prints the signature file information to the given output file rather than stdout.
		</para>
<programlisting>signver -A -s <replaceable>signature_file</replaceable> -o <replaceable>output_file</replaceable></programlisting>
	</refsection>
  </refsection>

<refsection id="databases"><title>NSS Database Types</title>
<para>NSS originally used BerkeleyDB databases to store security information. 
The last versions of these <emphasis>legacy</emphasis> databases are:</para>
<itemizedlist>
	<listitem>
		<para>
			cert8.db for certificates
		</para>
	</listitem>
	<listitem>
		<para>
			key3.db for keys
		</para>
	</listitem>
	<listitem>
		<para>
			secmod.db for PKCS #11 module information
		</para>
	</listitem>
</itemizedlist>

<para>BerkeleyDB has performance limitations, though, which prevent it from being easily used by multiple applications simultaneously. NSS has 
some flexibility that allows applications to use their own, independent database engine while keeping a shared database and working around the access issues. Still, NSS
requires more flexibility to provide a truly shared security database.</para>

<para>In 2009, NSS introduced a new set of databases that are SQLite databases rather than 
BerkleyDB. These new databases provide more accessibility and performance:</para>
<itemizedlist>
	<listitem>
		<para>
			cert9.db for certificates
		</para>
	</listitem>
	<listitem>
		<para>
			key4.db for keys
		</para>
	</listitem>
	<listitem>
		<para>
			pkcs11.txt, which is listing of all of the PKCS #11 modules contained in a new subdirectory in the security databases directory
		</para>
	</listitem>
</itemizedlist>

<para>Because the SQLite databases are designed to be shared, these are the <emphasis>shared</emphasis> database type. The shared database type is preferred; the legacy format is included for backward compatibility.</para>

<para>By default, the tools (<command>certutil</command>, <command>pk12util</command>, <command>modutil</command>) assume that the given security databases follow the more common legacy type. 
Using the SQLite databases must be manually specified by using the <command>sql:</command> prefix with the given security directory. For example:</para>

<programlisting># signver -A -s <replaceable>signature</replaceable> -d sql:/home/my/sharednssdb</programlisting>

<para>To set the shared database type as the default type for the tools, set the <envar>NSS_DEFAULT_DB_TYPE</envar> environment variable to <envar>sql</envar>:</para>
<programlisting>export NSS_DEFAULT_DB_TYPE="sql"</programlisting>

<para>This line can be added to the <filename>~/.bashrc</filename> file to make the change permanent for the user.</para>

<para>Most applications do not use the shared database by default, but they can be configured to use them. For example, this how-to article covers how to configure Firefox and Thunderbird to use the new shared NSS databases:</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB_Howto</para>
	</listitem>
</itemizedlist>
<para>For an engineering draft on the changes in the shared NSS databases, see the NSS project wiki:</para>
<itemizedlist>
	<listitem>
		<para>
			https://wiki.mozilla.org/NSS_Shared_DB
		</para>
	</listitem>
</itemizedlist>
</refsection>

  <refsection id="seealso">
    <title>See Also</title>
    <para>signtool (1)</para>

	<para>The NSS wiki has information on the new database design and how to configure applications to use it.</para>
	<itemizedlist>
		<listitem>
			<para>Setting up the shared NSS database</para>
			<para>https://wiki.mozilla.org/NSS_Shared_DB_Howto</para>
		</listitem>
		<listitem>
			<para>
				Engineering and technical information about the shared NSS database
			</para>
			<para>
				https://wiki.mozilla.org/NSS_Shared_DB
			</para>
		</listitem>
	</itemizedlist>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2008 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at
  
          http://www.apache.org/licenses/LICENSE-2.0
  
     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="?android:attr/dropDownItemStyle"
    android:textAppearance="@style/TextAppearance.Widget.TextView"
    android:singleLine="true"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeightSmall"
    android:ellipsize="marquee"/>
<?xml version="1.0"?>
<root xmlns="urn:schemas-upnp-org:device-1-0">
  <specVersion>
    <major>1</major>
    <minor>0</minor>
  </specVersion>
  <URLBase>http://example.com</URLBase>
  <device>
    <deviceType>urn:dial-multiscreen-org:device:dial:1</deviceType>
    <friendlyName>Pretend Device</friendlyName>
    <manufacturer>Copy Cat Inc.</manufacturer>
    <modelName>Eureka Dongle</modelName>
    <UDN>uuid:5ec9ff92-e8b2-4a94-a72c-76b34e6dabb1</UDN>
  </device>
</root>
<?xml version="1.0"?>
<?xml-stylesheet href="docbook.css" type="text/css"?>
<!DOCTYPE Book SYSTEM "file:///E|/Program%20Files/SoftQuad/XMetaL/Rules/docbook.dtd">
<Book xmlns:html="http://www.w3.org/1999/xhtml">
  <Title>The Book</Title>
  <Chapter>
    <Title>Chapter 1.</Title>
    <Para>Yada yada <html:img src="mzcolor.gif"/> yada.</Para>
  </Chapter>
</Book>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/site_identity_unknown_container"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical"
              android:visibility="gone">

    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:textSize="14sp"
              android:textColor="@color/doorhanger_text"
              android:text="@string/identity_no_info"/>

    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:textSize="14sp"
              android:textColor="@color/doorhanger_text"
              android:text="@string/identity_not_encrypted"
              android:paddingTop="12dip"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:orientation="horizontal"
              android:padding="@dimen/doorhanger_padding">

    <ImageView android:id="@+id/larry"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:src="@drawable/larry"
               android:paddingRight="@dimen/doorhanger_padding"/>

    <FrameLayout android:layout_width="0dip"
                 android:layout_height="wrap_content"
                 android:layout_weight="1.0">

        <include layout="@layout/site_identity_unknown" />

        <LinearLayout android:id="@+id/site_identity_known_container"
                      android:layout_width="match_parent"
                      android:layout_height="wrap_content"
                      android:orientation="vertical">

            <TextView android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textSize="14sp"
                      android:textColor="@color/doorhanger_text"
                      android:text="@string/identity_connected_to"/>

            <TextView android:id="@+id/host"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textSize="20sp"
                      android:textColor="@color/doorhanger_text"
                      android:textStyle="bold"/>

            <TextView android:id="@+id/owner_label"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textSize="14sp"
                      android:textColor="@color/doorhanger_text"
                      android:text="@string/identity_run_by"
                      android:paddingTop="12dip"/>

            <TextView android:id="@+id/owner"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textColor="@color/doorhanger_text"
                      android:textSize="16sp"
                      android:textStyle="bold"/>

            <TextView android:id="@+id/verifier"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:textSize="14sp"
                      android:textColor="@color/doorhanger_text"
                      android:paddingTop="12dip"/>

        </LinearLayout>

     </FrameLayout>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<level-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:maxLevel="0" android:drawable="@android:color/transparent"/>
    <item android:maxLevel="1" android:drawable="@drawable/lock_identified"/>
    <item android:maxLevel="2" android:drawable="@drawable/lock_verified"/>
    <item android:maxLevel="3" android:drawable="@drawable/shield_enabled"/>
    <item android:maxLevel="4" android:drawable="@drawable/shield_disabled"/>

</level-list>
<?xml version="1.0" encoding="utf-8"?>

<org.mozilla.gecko.widget.CheckableLinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:gravity="center_vertical"
    android:paddingLeft="16dip"
    android:paddingRight="12dip"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:focusable="false">

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical"
        android:gravity="center_vertical"
        android:focusable="false">

        <TextView
            android:id="@+id/setting"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceMedium"
            style="Widget.ListItem"
            android:gravity="center_vertical|left"
            android:singleLine="true"
            android:ellipsize="marquee"/>

        <TextView
            android:id="@+id/value"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceSmall"
            style="Widget.ListItem"
            android:gravity="center_vertical|left"
            android:singleLine="true"
            android:ellipsize="marquee"/>

    </LinearLayout>

    <CheckBox
        android:id="@+id/checkbox"
        android:layout_width="35dip"
        android:layout_height="wrap_content"
        android:paddingRight="12dip"
        android:gravity="center_vertical"
        android:focusable="false"
        android:clickable="false"/>

</org.mozilla.gecko.widget.CheckableLinearLayout>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:layout_weight="1"
              android:orientation="vertical"
              android:gravity="center_vertical">

    <TextView android:id="@+id/title"
              style="@style/GeckoDialogTitle"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:paddingTop="6dip"
              android:paddingBottom="0dip"
              android:paddingLeft="10dip"
              android:paddingRight="10dip"/>

    <TextView android:id="@+id/host"
              style="@style/GeckoDialogTitle.SubTitle"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:paddingTop="2dip"
              android:paddingBottom="6dip"
              android:paddingLeft="10dip"
              android:paddingRight="10dip"
              android:textSize="14sp"/>

</LinearLayout>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.22 $"/>
		<generation date="$Date: 2008/05/25 01:05:53 $"/>
		<language type="si"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Sinh</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:27 $"/>
        <language type="sk"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:29 $"/>
        <language type="sl"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="sn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>

<bindings id="socialChatBindings"
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="chatbox">
    <content orient="vertical" mousethrough="never">
      <xul:hbox class="chat-titlebar" xbl:inherits="minimized,selected,activity" align="baseline">
        <xul:hbox flex="1" onclick="document.getBindingParent(this).onTitlebarClick(event);">
          <xul:image class="chat-status-icon" xbl:inherits="src=image"/>
          <xul:label class="chat-title" flex="1" xbl:inherits="value=label" crop="center"/>
        </xul:hbox>
        <xul:toolbarbutton anonid="notification-icon" class="notification-anchor-icon chat-toolbarbutton"
                           oncommand="document.getBindingParent(this).showNotifications(); event.stopPropagation();"/>
        <xul:toolbarbutton anonid="minimize" class="chat-minimize-button chat-toolbarbutton"
                           oncommand="document.getBindingParent(this).toggle();"/>
        <xul:toolbarbutton anonid="swap" class="chat-swap-button chat-toolbarbutton"
                           oncommand="document.getBindingParent(this).swapWindows();"/>
        <xul:toolbarbutton anonid="close" class="chat-close-button chat-toolbarbutton"
                           oncommand="document.getBindingParent(this).close();"/>
      </xul:hbox>
      <xul:browser anonid="content" class="chat-frame" flex="1"
                  context="contentAreaContextMenu"
                  disableglobalhistory="true"
                  tooltip="aHTMLTooltip"
                  xbl:inherits="src,origin" type="content"/>
    </content>

    <implementation implements="nsIDOMEventListener">
      <constructor><![CDATA[
        this.content.__defineGetter__("popupnotificationanchor",
                                      () => document.getAnonymousElementByAttribute(this, "anonid", "notification-icon"));

        if (!this.chatbar) {
          document.getAnonymousElementByAttribute(this, "anonid", "minimize").hidden = true;
          document.getAnonymousElementByAttribute(this, "anonid", "close").hidden = true;
        }
        let contentWindow = this.contentWindow;
        // process this._callbacks, then set to null so the chatbox creator
        // knows to make new callbacks immediately.
        if (this._callbacks) {
          for (let callback of this._callbacks) {
            callback(this);
          }
          this._callbacks = null;
        }
        this.addEventListener("DOMContentLoaded", function DOMContentLoaded(event) {
          if (event.target != this.contentDocument)
            return;
          this.removeEventListener("DOMContentLoaded", DOMContentLoaded, true);
          this.isActive = !this.minimized;
          this._deferredChatLoaded.resolve(this);
        }, true);

        // load content.js to support webrtc, fullscreen, etc.
        this.addEventListener("load", function loaded(event) {
          this.removeEventListener("load", loaded, true);
          let mm = this.content.messageManager;
          mm.loadFrameScript("chrome://browser/content/content.js", true);
        }, true);

        if (this.src)
          this.setAttribute("src", this.src);
      ]]></constructor>

      <field name="_deferredChatLoaded" readonly="true">
        Promise.defer();
      </field>

      <property name="promiseChatLoaded">
        <getter>
          return this._deferredChatLoaded.promise;
        </getter>
      </property>

      <field name="content" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "content");
      </field>

      <property name="contentWindow">
        <getter>
          return this.content.contentWindow;
        </getter>
      </property>

      <property name="contentDocument">
        <getter>
          return this.content.contentDocument;
        </getter>
      </property>

      <property name="minimized">
        <getter>
          return this.getAttribute("minimized") == "true";
        </getter>
        <setter><![CDATA[
          // Note that this.isActive is set via our transitionend handler so
          // the content doesn't see intermediate values.
          let parent = this.chatbar;
          if (val) {
            this.setAttribute("minimized", "true");
            // If this chat is the selected one a new one needs to be selected.
            if (parent && parent.selectedChat == this)
              parent._selectAnotherChat();
          } else {
            this.removeAttribute("minimized");
            // this chat gets selected.
            if (parent)
              parent.selectedChat = this;
          }
        ]]></setter>
      </property>

      <property name="chatbar">
        <getter>
          if (this.parentNode.nodeName == "chatbar")
            return this.parentNode;
          return null;
        </getter>
      </property>

      <property name="isActive">
        <getter>
          return this.content.docShell.isActive;
        </getter>
        <setter>
          this.content.docShell.isActive = !!val;

          // let the chat frame know if it is being shown or hidden
          let evt = this.contentDocument.createEvent("CustomEvent");
          evt.initCustomEvent(val ? "socialFrameShow" : "socialFrameHide", true, true, {});
          this.contentDocument.documentElement.dispatchEvent(evt);
        </setter>
      </property>

      <method name="showNotifications">
        <body><![CDATA[
        PopupNotifications._reshowNotifications(this.content.popupnotificationanchor,
                                                this.content);
        ]]></body>
      </method>

      <method name="swapDocShells">
        <parameter name="aTarget"/>
        <body><![CDATA[
          aTarget.setAttribute("label", this.contentDocument.title);
          if (this.getAttribute("dark") == "true")
            aTarget.setAttribute("dark", "true");
          aTarget.src = this.src;
          aTarget.content.setAttribute("origin", this.content.getAttribute("origin"));
          aTarget.content.popupnotificationanchor.className = this.content.popupnotificationanchor.className;
          this.content.swapDocShells(aTarget.content);
        ]]></body>
      </method>

      <method name="onTitlebarClick">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (!this.chatbar)
            return;
          if (aEvent.button == 0) { // left-click: toggle minimized.
            this.toggle();
            // if we restored it, we want to focus it.
            if (!this.minimized)
              this.chatbar.focus();
          } else if (aEvent.button == 1) // middle-click: close chat
            this.close();
        ]]></body>
      </method>

      <method name="close">
        <body><![CDATA[
        if (this.chatbar)
          this.chatbar.remove(this);
        else
          window.close();
        ]]></body>
      </method>

      <method name="swapWindows">
        <body><![CDATA[
        let deferred = Promise.defer();
        let title = this.getAttribute("label");
        if (this.chatbar) {
          this.chatbar.detachChatbox(this, { "centerscreen": "yes" }).then(
            chatbox => {
              chatbox.contentWindow.document.title = title;
              deferred.resolve(chatbox);
            }
          );
        } else {
          // attach this chatbox to the topmost browser window
          let Chat = Cu.import("resource:///modules/Chat.jsm").Chat;
          let win = Chat.findChromeWindowForChats();
          let chatbar = win.document.getElementById("pinnedchats");
          let origin = this.content.getAttribute("origin");
          let cb = chatbar.openChat(origin, title, "about:blank");
          cb.promiseChatLoaded.then(
            () => {
              this.swapDocShells(cb);

              chatbar.focus();
              this.close();

              // chatboxForURL is a map of URL -> chatbox used to avoid opening
              // duplicate chat windows. Ensure reattached chat windows aren't
              // registered with about:blank as their URL, otherwise reattaching
              // more than one chat window isn't possible.
              chatbar.chatboxForURL.delete("about:blank");
              chatbar.chatboxForURL.set(this.src, Cu.getWeakReference(cb));

              deferred.resolve(cb);
            }
          );
        }
        return deferred.promise;
        ]]></body>
      </method>

      <method name="toggle">
        <body><![CDATA[
          this.minimized = !this.minimized;
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="focus" phase="capturing">
        if (this.chatbar)
          this.chatbar.selectedChat = this;
      </handler>
      <handler event="DOMTitleChanged"><![CDATA[
        this.setAttribute('label', this.contentDocument.title);
        if (this.chatbar)
          this.chatbar.updateTitlebar(this);
      ]]></handler>
      <handler event="DOMLinkAdded"><![CDATA[
        // much of this logic is from DOMLinkHandler in browser.js
        // this sets the presence icon for a chat user, we simply use favicon style updating
        let link = event.originalTarget;
        let rel = link.rel && link.rel.toLowerCase();
        if (!link || !link.ownerDocument || !rel || !link.href)
          return;
        if (link.rel.indexOf("icon") < 0)
          return;

        let ContentLinkHandler = Cu.import("resource:///modules/ContentLinkHandler.jsm", {}).ContentLinkHandler;
        let uri = ContentLinkHandler.getLinkIconURI(link);
        if (!uri)
          return;

        // we made it this far, use it
        this.setAttribute('image', uri.spec);
        if (this.chatbar)
          this.chatbar.updateTitlebar(this);
      ]]></handler>
      <handler event="transitionend">
        if (this.isActive == this.minimized)
          this.isActive = !this.minimized;
      </handler>
    </handlers>
  </binding>

  <binding id="chatbar">
    <content>
      <xul:hbox align="end" pack="end" anonid="innerbox" class="chatbar-innerbox" mousethrough="always" flex="1">
        <xul:spacer flex="1" anonid="spacer" class="chatbar-overflow-spacer"/>
        <xul:toolbarbutton anonid="nub" class="chatbar-button" type="menu" collapsed="true" mousethrough="never">
          <xul:menupopup anonid="nubMenu" oncommand="document.getBindingParent(this).showChat(event.target.chat)"/>
        </xul:toolbarbutton>
        <children/>
      </xul:hbox>
    </content>

    <implementation implements="nsIDOMEventListener">
      <constructor>
        // to avoid reflows we cache the width of the nub.
        this.cachedWidthNub = 0;
        this._selectedChat = null;
      </constructor>

      <field name="innerbox" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "innerbox");
      </field>

      <field name="menupopup" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "nubMenu");
      </field>

      <field name="nub" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "nub");
      </field>

      <method name="focus">
        <body><![CDATA[
          if (!this.selectedChat)
            return;
          Services.focus.focusedWindow = this.selectedChat.contentWindow;
        ]]></body>
      </method>

      <method name="_isChatFocused">
        <parameter name="aChatbox"/>
        <body><![CDATA[
          // If there are no XBL bindings for the chat it can't be focused.
          if (!aChatbox.content)
            return false;
          let fw = Services.focus.focusedWindow;
          if (!fw)
            return false;
          // We want to see if the focused window is in the subtree below our browser...
          let containingBrowser = fw.QueryInterface(Ci.nsIInterfaceRequestor)
                                    .getInterface(Ci.nsIWebNavigation)
                                    .QueryInterface(Ci.nsIDocShell)
                                    .chromeEventHandler;
          return containingBrowser == aChatbox.content;
        ]]></body>
      </method>

      <property name="selectedChat">
        <getter><![CDATA[
          return this._selectedChat;
        ]]></getter>
        <setter><![CDATA[
          // this is pretty horrible, but we:
          // * want to avoid doing touching 'selected' attribute when the
          //   specified chat is already selected.
          // * remove 'activity' attribute on newly selected tab *even if*
          //   newly selected is already selected.
          // * need to handle either current or new being null.
          if (this._selectedChat != val) {
            if (this._selectedChat) {
              this._selectedChat.removeAttribute("selected");
            }
            this._selectedChat = val;
            if (val) {
              this._selectedChat.setAttribute("selected", "true");
            }
          }
          if (val) {
            this._selectedChat.removeAttribute("activity");
          }
        ]]></setter>
      </property>

      <field name="menuitemMap">new WeakMap()</field>
      <field name="chatboxForURL">new Map();</field>

      <property name="hasCollapsedChildren">
        <getter><![CDATA[
          return !!this.querySelector("[collapsed]");
        ]]></getter>
      </property>

      <property name="collapsedChildren">
        <getter><![CDATA[
          // A generator yielding all collapsed chatboxes, in the order in
          // which they should be restored.
          let child = this.lastElementChild;
          while (child) {
            if (child.collapsed)
              yield child;
            child = child.previousElementSibling;
          }
        ]]></getter>
      </property>

      <property name="visibleChildren">
        <getter><![CDATA[
          // A generator yielding all non-collapsed chatboxes.
          let child = this.firstElementChild;
          while (child) {
            if (!child.collapsed)
              yield child;
            child = child.nextElementSibling;
          }
        ]]></getter>
      </property>

      <property name="collapsibleChildren">
        <getter><![CDATA[
          // A generator yielding all children which are able to be collapsed
          // in the order in which they should be collapsed.
          // (currently this is all visible ones other than the selected one.)
          for (let child of this.visibleChildren)
            if (child != this.selectedChat)
              yield child;
        ]]></getter>
      </property>

      <method name="_selectAnotherChat">
        <body><![CDATA[
          // Select a different chat (as the currently selected one is no
          // longer suitable as the selection - maybe it is being minimized or
          // closed.)  We only select non-minimized and non-collapsed chats,
          // and if none are found, set the selectedChat to null.
          // It's possible in the future we will track most-recently-selected
          // chats or similar to find the "best" candidate - for now though
          // the choice is somewhat arbitrary.
          let moveFocus = this.selectedChat && this._isChatFocused(this.selectedChat);
          for (let other of this.children) {
            if (other != this.selectedChat && !other.minimized && !other.collapsed) {
              this.selectedChat = other;
              if (moveFocus)
                this.focus();
              return;
            }
          }
          // can't find another - so set no chat as selected.
          this.selectedChat = null;
        ]]></body>
      </method>

      <method name="updateTitlebar">
        <parameter name="aChatbox"/>
        <body><![CDATA[
          if (aChatbox.collapsed) {
            let menuitem = this.menuitemMap.get(aChatbox);
            if (aChatbox.getAttribute("activity")) {
              menuitem.setAttribute("activity", true);
              this.nub.setAttribute("activity", true);
            }
            menuitem.setAttribute("label", aChatbox.getAttribute("label"));
            menuitem.setAttribute("image", aChatbox.getAttribute("image"));
          }
        ]]></body>
      </method>

      <method name="calcTotalWidthOf">
        <parameter name="aElement"/>
        <body><![CDATA[
          let cs = document.defaultView.getComputedStyle(aElement);
          let margins = parseInt(cs.marginLeft) + parseInt(cs.marginRight);
          return aElement.getBoundingClientRect().width + margins;
        ]]></body>
      </method>

      <method name="getTotalChildWidth">
        <parameter name="aChatbox"/>
        <body><![CDATA[
          // These are from the CSS for the chatbox and must be kept in sync.
          // We can't use calcTotalWidthOf due to the transitions...
          const CHAT_WIDTH_OPEN = 260;
          const CHAT_WIDTH_MINIMIZED = 160;
          return aChatbox.minimized ? CHAT_WIDTH_MINIMIZED : CHAT_WIDTH_OPEN;
        ]]></body>
      </method>

      <method name="collapseChat">
        <parameter name="aChatbox"/>
        <body><![CDATA[
          // we ensure that the cached width for a child of this type is
          // up-to-date so we can use it when resizing.
          this.getTotalChildWidth(aChatbox);
          aChatbox.collapsed = true;
          aChatbox.isActive = false;
          let menu = document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul", "menuitem");
          menu.setAttribute("class", "menuitem-iconic");
          menu.setAttribute("label", aChatbox.contentDocument.title);
          menu.setAttribute("image", aChatbox.getAttribute("image"));
          menu.chat = aChatbox;
          this.menuitemMap.set(aChatbox, menu);
          this.menupopup.appendChild(menu);
          this.nub.collapsed = false;
        ]]></body>
      </method>

      <method name="showChat">
        <parameter name="aChatbox"/>
        <parameter name="aMode"/>
        <body><![CDATA[
          if ((aMode != "minimized") && aChatbox.minimized)
            aChatbox.minimized = false;
          if (this.selectedChat != aChatbox)
            this.selectedChat = aChatbox;
          if (!aChatbox.collapsed)
            return; // already showing - no more to do.
          this._showChat(aChatbox);
          // showing a collapsed chat might mean another needs to be collapsed
          // to make room...
          this.resize();
        ]]></body>
      </method>

      <method name="_showChat">
        <parameter name="aChatbox"/>
        <body><![CDATA[
          // the actual implementation - doesn't check for overflow, assumes
          // collapsed, etc.
          let menuitem = this.menuitemMap.get(aChatbox);
          this.menuitemMap.delete(aChatbox);
          this.menupopup.removeChild(menuitem);
          aChatbox.collapsed = false;
          aChatbox.isActive = !aChatbox.minimized;
        ]]></body>
      </method>

      <method name="remove">
        <parameter name="aChatbox"/>
        <body><![CDATA[
          this._remove(aChatbox);
          // The removal of a chat may mean a collapsed one can spring up,
          // or that the popup should be hidden.  We also defer the selection
          // of another chat until after a resize, as a new candidate may
          // become uncollapsed after the resize.
          this.resize();
          if (this.selectedChat == aChatbox) {
            this._selectAnotherChat();
          }
        ]]></body>
      </method>

      <method name="_remove">
        <parameter name="aChatbox"/>
        <body><![CDATA[
          this.removeChild(aChatbox);
          // child might have been collapsed.
          let menuitem = this.menuitemMap.get(aChatbox);
          if (menuitem) {
            this.menuitemMap.delete(aChatbox);
            this.menupopup.removeChild(menuitem);
          }
          this.chatboxForURL.delete(aChatbox.src);
        ]]></body>
      </method>

      <method name="openChat">
        <parameter name="aOrigin"/>
        <parameter name="aTitle"/>
        <parameter name="aURL"/>
        <parameter name="aMode"/>
        <parameter name="aCallback"/>
        <body><![CDATA[
          let cb = this.chatboxForURL.get(aURL);
          if (cb) {
            cb = cb.get();
            // A chatbox is still alive to us when it's parented and still has
            // content.
            if (cb.parentNode && cb.contentWindow) {
              this.showChat(cb, aMode);
              if (aCallback) {
                if (cb._callbacks == null) {
                  // Chatbox has already been created, so callback now.
                  aCallback(cb);
                } else {
                  // Chatbox is yet to have bindings created...
                  cb._callbacks.push(aCallback);
                }
              }
              return cb;
            }
            this.chatboxForURL.delete(aURL);
          }
          cb = document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul", "chatbox");
          cb._callbacks = [];
          if (aCallback) {
            // _callbacks is a javascript property instead of a <field> as it
            // must exist before the (possibly delayed) bindings are created.
            cb._callbacks.push(aCallback);
          }
          // src also a javascript property; the src attribute is set in the ctor.
          cb.src = aURL;
          if (aMode == "minimized")
            cb.setAttribute("minimized", "true");
          cb.setAttribute("origin", aOrigin);
          cb.setAttribute("label", aTitle);
          this.insertBefore(cb, this.firstChild);
          this.selectedChat = cb;
          this.chatboxForURL.set(aURL, Cu.getWeakReference(cb));
          this.resize();
          return cb;
        ]]></body>
      </method>

      <method name="resize">
        <body><![CDATA[
        // Checks the current size against the collapsed state of children
        // and collapses or expands as necessary such that as many as possible
        // are shown.
        // So 2 basic strategies:
        // * Collapse/Expand one at a time until we can't collapse/expand any
        //   more - but this is one reflow per change.
        // * Calculate the dimensions ourself and choose how many to collapse
        //   or expand based on this, then do them all in one go.  This is one
        //   reflow regardless of how many we change.
        // So we go the more complicated but more efficient second option...
        let availWidth = this.getBoundingClientRect().width;
        let currentWidth = 0;
        if (!this.nub.collapsed) { // the nub is visible.
          if (!this.cachedWidthNub)
            this.cachedWidthNub = this.calcTotalWidthOf(this.nub);
          currentWidth += this.cachedWidthNub;
        }
        for (let child of this.visibleChildren) {
          currentWidth += this.getTotalChildWidth(child);
        }

        if (currentWidth > availWidth) {
          // we need to collapse some.
          let toCollapse = [];
          for (let child of this.collapsibleChildren) {
            if (currentWidth <= availWidth)
              break;
            toCollapse.push(child);
            currentWidth -= this.getTotalChildWidth(child);
          }
          if (toCollapse.length) {
            for (let child of toCollapse)
              this.collapseChat(child);
          }
        } else if (currentWidth < availWidth) {
          // we *might* be able to expand some - see how many.
          // XXX - if this was clever, it could know when removing the nub
          // leaves enough space to show all collapsed
          let toShow = [];
          for (let child of this.collapsedChildren) {
            currentWidth += this.getTotalChildWidth(child);
            if (currentWidth > availWidth)
              break;
            toShow.push(child);
          }
          for (let child of toShow)
            this._showChat(child);

          // If none remain collapsed remove the nub.
          if (!this.hasCollapsedChildren) {
            this.nub.collapsed = true;
          }
        }
        // else: achievement unlocked - we are pixel-perfect!
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (aEvent.type == "resize") {
            this.resize();
          }
        ]]></body>
      </method>

      <method name="_getDragTarget">
        <parameter name="event"/>
        <body><![CDATA[
          return event.target.localName == "chatbox" ? event.target : null;
        ]]></body>
      </method>

      <!-- Moves a chatbox to a new window. Returns a promise that is resolved
           once the move to the other window is complete.
      -->
      <method name="detachChatbox">
        <parameter name="aChatbox"/>
        <parameter name="aOptions"/>
        <body><![CDATA[
          let deferred = Promise.defer();
          let chatbar = this;
          let options = "";
          for (let name in aOptions)
            options += "," + name + "=" + aOptions[name];

          let otherWin = window.openDialog("chrome://browser/content/chatWindow.xul",
                                           "_blank", "chrome,all,dialog=no" + options);

          otherWin.addEventListener("load", function _chatLoad(event) {
            if (event.target != otherWin.document)
              return;

            let detachEvent = new aChatbox.contentWindow.CustomEvent("socialFrameDetached", {
              bubbles: true,
              cancelable: true,
            });
            aChatbox.contentDocument.dispatchEvent(detachEvent);

            otherWin.removeEventListener("load", _chatLoad, true);
            let otherChatbox = otherWin.document.getElementById("chatter");
            aChatbox.swapDocShells(otherChatbox);
            aChatbox.close();
            chatbar.chatboxForURL.set(aChatbox.src, Cu.getWeakReference(otherChatbox));

            deferred.resolve(otherChatbox);
          }, true);
          return deferred.promise;
        ]]></body>
      </method>

    </implementation>

    <handlers>
      <handler event="popupshown"><![CDATA[
        this.nub.removeAttribute("activity");
      ]]></handler>
      <handler event="load"><![CDATA[
        window.addEventListener("resize", this, true);
      ]]></handler>
      <handler event="unload"><![CDATA[
        window.removeEventListener("resize", this, true);
      ]]></handler>

      <handler event="dragstart"><![CDATA[
        // chat window dragging is essentially duplicated from tabbrowser.xml
        // to acheive the same visual experience
        let chatbox = this._getDragTarget(event);
        if (!chatbox) {
          return;
        }

        let dt = event.dataTransfer;
        // we do not set a url in the drag data to prevent moving to tabbrowser
        // or otherwise having unexpected drop handlers do something with our
        // chatbox
        dt.mozSetDataAt("application/x-moz-chatbox", chatbox, 0);

        // Set the cursor to an arrow during tab drags.
        dt.mozCursor = "default";

        // Create a canvas to which we capture the current tab.
        // Until canvas is HiDPI-aware (bug 780362), we need to scale the desired
        // canvas size (in CSS pixels) to the window's backing resolution in order
        // to get a full-resolution drag image for use on HiDPI displays.
        let windowUtils = window.getInterface(Ci.nsIDOMWindowUtils);
        let scale = windowUtils.screenPixelsPerCSSPixel / windowUtils.fullZoom;
        let canvas = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
        canvas.mozOpaque = true;
        canvas.width = 160 * scale;
        canvas.height = 90 * scale;
        PageThumbs.captureToCanvas(chatbox, canvas);
        dt.setDragImage(canvas, -16 * scale, -16 * scale);

        event.stopPropagation();
      ]]></handler>

      <handler event="dragend"><![CDATA[
        let dt = event.dataTransfer;
        let draggedChat = dt.mozGetDataAt("application/x-moz-chatbox", 0);
        if (dt.mozUserCancelled || dt.dropEffect != "none") {
          return;
        }

        let eX = event.screenX;
        let eY = event.screenY;
        // screen.availLeft et. al. only check the screen that this window is on,
        // but we want to look at the screen the tab is being dropped onto.
        let sX = {}, sY = {}, sWidth = {}, sHeight = {};
        Cc["@mozilla.org/gfx/screenmanager;1"]
          .getService(Ci.nsIScreenManager)
          .screenForRect(eX, eY, 1, 1)
          .GetAvailRect(sX, sY, sWidth, sHeight);
        // default size for the chat window as used in chatWindow.xul, use them
        // here to attempt to keep the window fully within the screen when
        // opening at the drop point. If the user has resized the window to
        // something larger (which gets persisted), at least a good portion of
        // the window should still be within the screen.
        let winWidth = 400;
        let winHeight = 420;
        // ensure new window entirely within screen
        let left = Math.min(Math.max(eX, sX.value),
                            sX.value + sWidth.value - winWidth);
        let top = Math.min(Math.max(eY, sY.value),
                           sY.value + sHeight.value - winHeight);

        let title = draggedChat.content.getAttribute("title");
        this.detachChatbox(draggedChat, { screenX: left, screenY: top }).then(
          chatbox => {
            chatbox.contentWindow.document.title = title;
          }
        );
        event.stopPropagation();
      ]]></handler>
    </handlers>
  </binding>

</bindings>
<?xml version="1.0"?>

<bindings id="socialMarkBindings"
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">


  <binding id="toolbarbutton-marks" display="xul:button"
           extends="chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton">
    <content>
      <xul:panel anonid="panel" hidden="true" type="arrow" class="social-panel"/>
      <xul:image class="toolbarbutton-icon" xbl:inherits="validate,src=image,label"/>
      <xul:label class="toolbarbutton-text" crop="right" flex="1"
                 xbl:inherits="value=label,accesskey,crop,wrap"/>
      <xul:label class="toolbarbutton-multiline-text" flex="1"
                 xbl:inherits="xbl:text=label,accesskey,wrap"/>
    </content>
    <implementation implements="nsIDOMEventListener, nsIObserver">
      <constructor>
        // if we overflow, we have to reset the button. unfortunately we cannot
        // use a widget listener because we need to do this *after* the node is
        // moved, and the event happens before the node is moved.
        this.update();
      </constructor>
      <property name="_anchor">
        <getter>
          let widgetGroup = CustomizableUI.getWidget(this.getAttribute("id"));
          return widgetGroup.forWindow(window).anchor;
        </getter>
      </property>
      <property name="_useDynamicResizer">
        <getter>
          let provider = Social._getProviderFromOrigin(this.getAttribute("origin"));
          return !provider.getPageSize("marks");
        </getter>
      </property>

      <property name="panel">
        <getter>
          return document.getAnonymousElementByAttribute(this, "anonid", "panel");
        </getter>
      </property>

      <property name="content">
        <getter><![CDATA[
          if (this._frame)
            return this._frame;
          let provider = Social._getProviderFromOrigin(this.getAttribute("origin"));
          let size = provider.getPageSize("marks");
          let {width, height} = size ? size : {width: 330, height: 100};

          let iframe = this._frame = document.createElement("iframe");
          iframe.setAttribute("type", "content");
          iframe.setAttribute("class", "social-panel-frame");
          iframe.setAttribute("flex", "1");
          iframe.setAttribute("tooltip", "aHTMLTooltip");
          iframe.setAttribute("context", "contentAreaContextMenu");
          iframe.setAttribute("origin", provider.origin);
          iframe.setAttribute("style", "width: " + width + "px; height: " + height + "px;");
          this.panel.appendChild(iframe);

          this._frame.addEventListener("DOMLinkAdded", this);
          return this._frame;
        ]]></getter>
      </property>

      <property name="contentWindow">
        <getter>
          return this.content.contentWindow;
        </getter>
      </property>

      <property name="contentDocument">
        <getter>
          return this.content.contentDocument;
        </getter>
      </property>

      <property name="provider">
        <getter>
          return Social._getProviderFromOrigin(this.getAttribute("origin"));
        </getter>
      </property>

      <property name="isMarked">
        <setter><![CDATA[
          this._isMarked = val;
          let provider = this.provider;
          // we cannot size the image when we apply it via listStyleImage, so
          // use the toolbar image
          let widgetGroup = CustomizableUI.getWidget(this.getAttribute("id"));
          val = val && !!widgetGroup.areaType;
          let icon = val ? provider.markedIcon : provider.unmarkedIcon;
          let iconURL = icon || provider.icon32URL || provider.iconURL;
          this.setAttribute("image", iconURL);
        ]]></setter>
        <getter>
          return this._isMarked;
        </getter>
      </property>

      <method name="update">
        <body><![CDATA[
        // update the button for use with the current tab
        let provider = this.provider;
        if (this._dynamicResizer) {
          this._dynamicResizer.stop();
          this._dynamicResizer = null;
        }
        this.content.setAttribute("src", "about:blank");
        // called during onhidden, make sure the docshell is updated
        if (this._frame.docShell)
          this._frame.docShell.createAboutBlankContentViewer(null);

        // disabled attr is set by Social:PageShareOrMark command
        if (this.hasAttribute("disabled")) {
          this.isMarked = false;
        } else {
          Social.isURIMarked(provider.origin, gBrowser.currentURI, (isMarked) => {
            this.isMarked = isMarked;
          });
        }

        this.content.setAttribute("origin", provider.origin);

        let panel = this.panel;
        // if customization is currently happening, we may not have a panel
        // that we can hide
        if (panel.hidePopup) {
          panel.hidePopup();
          panel.hidden = true;
        }
        this.pageData = null;
        ]]></body>
      </method>

      <method name="loadPanel">
        <parameter name="pageData"/>
        <parameter name="target"/>
        <body><![CDATA[
        let provider = this.provider;
        let panel = this.panel;
        panel.hidden = false;

        // reparent the iframe if we've been customized to a new location
        if (this.content.parentNode != panel)
          panel.appendChild(this.content);

        let URLTemplate = provider.markURL;
        let _dataFn;
        if (!pageData) {
          messageManager.addMessageListener("Social:PageDataResult", _dataFn = (msg) => {
            messageManager.removeMessageListener("Social:PageDataResult", _dataFn);
            this.loadPanel(msg.json, target);
          });
          gBrowser.selectedBrowser.messageManager.sendAsyncMessage("Social:GetPageData");
          return;
        }
        // if this is a share of a selected item, get any microdata
        if (!pageData.microdata && target) {
          messageManager.addMessageListener("Social:PageDataResult", _dataFn = (msg) => {
            messageManager.removeMessageListener("Social:PageDataResult", _dataFn);
            pageData.microdata = msg.data;
            this.loadPanel(pageData, target);
          });
          gBrowser.selectedBrowser.messageManager.sendAsyncMessage("Social:GetMicrodata", null, target);
          return;
        }
        this.pageData = pageData;

        let endpoint = OpenGraphBuilder.generateEndpointURL(URLTemplate, this.pageData);

        // setup listeners
        let DOMContentLoaded = (event) => {
          if (event.target != this.contentDocument)
            return;
          this._loading = false;
          this.content.removeEventListener("DOMContentLoaded", DOMContentLoaded, true);
          // add our resizer after the dom is ready
          if (this._useDynamicResizer) {
            let DynamicResizeWatcher = Cu.import("resource:///modules/Social.jsm", {}).DynamicResizeWatcher;
            this._dynamicResizer = new DynamicResizeWatcher();
            this._dynamicResizer.start(this.panel, this.content);
          } else if (this._dynamicResizer) {
            this._dynamicResizer.stop();
            this._dynamicResizer = null;
          }
          // send the opengraph data
          let evt = this.contentDocument.createEvent("CustomEvent");
          evt.initCustomEvent("OpenGraphData", true, true, JSON.stringify(this.pageData));
          this.contentDocument.documentElement.dispatchEvent(evt);

          let contentWindow = this.contentWindow;
          let markUpdate = function(event) {
            // update the annotation based on this event, then update the
            // icon as well
            this.isMarked = JSON.parse(event.detail).marked;
            if (this.isMarked) {
              Social.markURI(provider.origin, gBrowser.currentURI);
            } else {
              Social.unmarkURI(provider.origin, gBrowser.currentURI, () => {
                this.update();
              });
            }
          }.bind(this);
          let unload = () => {
            contentWindow.removeEventListener("unload", unload);
            contentWindow.removeEventListener("socialMarkUpdate", markUpdate);
            if (this.content.socialErrorListener)
              this.content.socialErrorListener.remove();
          }
          contentWindow.addEventListener("socialMarkUpdate", markUpdate);
          contentWindow.addEventListener("unload", unload);
        }
        this.content.addEventListener("DOMContentLoaded", DOMContentLoaded, true);
        Social.setErrorListener(this.content, this.setErrorMessage.bind(this));
        this._loading = true;
        this.content.setAttribute("src", endpoint);
        ]]></body>
      </method>

      <method name="setErrorMessage">
        <parameter name="aNotificationFrame"/>
        <body><![CDATA[
        if (!aNotificationFrame)
          return;

        let src = aNotificationFrame.getAttribute("src");
        aNotificationFrame.removeAttribute("src");
        let origin = aNotificationFrame.getAttribute("origin");
        aNotificationFrame.webNavigation.loadURI("about:socialerror?mode=tryAgainOnly&url=" +
                                                encodeURIComponent(src) + "&origin=" +
                                                encodeURIComponent(origin),
                                                null, null, null, null);
        // ensure the panel is open if error occurs on first click
        this.openPanel();
        ]]></body>
      </method>

      <method name="openPanel">
        <parameter name="aResetOnClose"/>
        <body><![CDATA[
        let panel = this.panel;
        let anchor = document.getAnonymousElementByAttribute(this._anchor, "class", "toolbarbutton-icon");
        // Bug 849216 - open the popup in a setTimeout so we avoid the auto-rollup
        // handling from preventing it being opened in some cases.
        setTimeout(() => {
          panel.openPopup(anchor, "bottomcenter topright", 0, 0, false, false);
        }, 0);
        Services.telemetry.getHistogramById("SOCIAL_TOOLBAR_BUTTONS").add(2);
        ]]></body>
       </method>

      <method name="markCurrentPage">
        <parameter name="aOpenPanel"/>
        <body><![CDATA[
        // we always set the src on click if it has not been set for this tab,
        // but we only want to open the panel if it was previously annotated.
        let openPanel = this.isMarked || aOpenPanel || !this.provider.haveLoggedInUser();
        let src = this.content.getAttribute("src");
        if (!src || src == "about:blank") {
          this.loadPanel();
        }
        if (openPanel)
          this.openPanel();
        ]]></body>
      </method>

      <method name="markLink">
        <parameter name="aUrl"/>
        <parameter name="aTarget"/>
        <body><![CDATA[
        if (!aUrl) {
          this.markCurrentPage(true);
          return;
        }
        // initiated form an external source, such as gContextMenu, where
        // pageData is passed into us. In this case, we always load the iframe
        // and show it since the url may not be the browser tab, but an image,
        // link, etc. inside the page. We also "update" the iframe to the
        // previous url when it is closed.
        this.content.setAttribute("src", "about:blank");
        this.loadPanel({ url: aUrl }, aTarget);
        this.openPanel(true);
        ]]></body>
      </method>

      <method name="dispatchPanelEvent">
        <parameter name="name"/>
        <body><![CDATA[
        let evt = this.contentDocument.createEvent("CustomEvent");
        evt.initCustomEvent(name, true, true, {});
        this.contentDocument.documentElement.dispatchEvent(evt);
        ]]></body>
      </method>

      <method name="onShown">
        <body><![CDATA[
        // because the panel may be preloaded, we need to size the panel when
        // showing as well as after load
        let sizeSocialPanelToContent = Cu.import("resource:///modules/Social.jsm", {}).sizeSocialPanelToContent;
        if (!this._loading && this.contentDocument &&
            this.contentDocument.readyState == "complete") {
          this.dispatchPanelEvent("socialFrameShow");
          if (this._useDynamicResizer)
            sizeSocialPanelToContent(this.panel, this.content);
        } else {
          let panelBrowserOnload = (e) => {
            this.content.removeEventListener("load", panelBrowserOnload, true);
            this.dispatchPanelEvent("socialFrameShow");
            if (this._useDynamicResizer)
              sizeSocialPanelToContent(this.panel, this.content);
          };
          this.content.addEventListener("load", panelBrowserOnload, true);
        }
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
        if (aEvent.eventPhase != aEvent.BUBBLING_PHASE)
          return;
        switch(aEvent.type) {
          case "DOMLinkAdded": {
            // much of this logic is from DOMLinkHandler in browser.js, this sets
            // the presence icon for a chat user, we simply use favicon style
            // updating
            let link = aEvent.originalTarget;
            let rel = link.rel && link.rel.toLowerCase();
            if (!link || !link.ownerDocument || !rel || !link.href)
              return;
            if (link.rel.indexOf("icon") < 0)
              return;

            let ContentLinkHandler = Cu.import("resource:///modules/ContentLinkHandler.jsm", {}).ContentLinkHandler;
            let uri = ContentLinkHandler.getLinkIconURI(link);
            if (!uri)
              return;

            // we cannot size the image when we apply it via listStyleImage, so
            // use the toolbar image
            this.setAttribute("image", uri.spec);
            }
            break;
          case "click":
            Services.telemetry.getHistogramById("SOCIAL_PANEL_CLICKS").add(2);
            break;
        }
        ]]></body>
      </method>

    </implementation>
    <handlers>
      <handler event="popupshowing"><![CDATA[
        this._anchor.setAttribute("open", "true");
        this.content.addEventListener("click", this);
      ]]></handler>
      <handler event="popupshown"><![CDATA[
        this.onShown();
      ]]></handler>
      <handler event="popuphidden"><![CDATA[
        this.dispatchPanelEvent("socialFrameHide");
        this._anchor.removeAttribute("open");
        this.update();
        this.content.removeEventListener("click", this);
      ]]></handler>
      <handler event="command"><![CDATA[
        this.markCurrentPage();
      ]]></handler>
    </handlers>
  </binding>

</bindings>
<?xml version="1.0" ?><manifest>
  <!--original fetch url was https://android.googlesource.com/-->
  <remote fetch="https://git.mozilla.org/external/aosp" name="aosp"/>
  <!--original fetch url was git://github.com/mozilla-b2g/-->
  <remote fetch="https://git.mozilla.org/b2g" name="b2g"/>
  <!--original fetch url was git://github.com/mozilla/-->
  <remote fetch="https://git.mozilla.org/b2g" name="mozilla"/>
  <!--original fetch url was git://codeaurora.org/-->
  <remote fetch="https://git.mozilla.org/external/caf" name="caf"/>
  <!--original fetch url was https://git.mozilla.org/releases-->
  <remote fetch="https://git.mozilla.org/releases" name="mozillaorg"/>
  <!--original fetch url was git://github.com/apitrace/-->
  <remote fetch="https://git.mozilla.org/external/apitrace" name="apitrace"/>
  <default remote="caf" revision="ics_chocolate_rb4.2" sync-j="4"/>
  <!-- Gonk specific things and forks -->
  <project name="platform_build" path="build" remote="b2g" revision="df362ace56338da8173d30d3e09e08c42c1accfa">
    <copyfile dest="Makefile" src="core/root.mk"/>
  </project>
  <project name="fake-dalvik" path="dalvik" remote="b2g" revision="ca1f327d5acc198bb4be62fa51db2c039032c9ce"/>
  <project name="gaia.git" path="gaia" remote="mozillaorg" revision="4ceeff19086b2a2955f044ad923dcfa63a293de3"/>
  <project name="gonk-misc" path="gonk-misc" remote="b2g" revision="8aee09c106f479f36c57b2a29af72d455e359211"/>
  <project name="rilproxy" path="rilproxy" remote="b2g" revision="827214fcf38d6569aeb5c6d6f31cb296d1f09272"/>
  <project name="librecovery" path="librecovery" remote="b2g" revision="891e5069c0ad330d8191bf8c7b879c814258c89f"/>
  <project name="moztt" path="external/moztt" remote="b2g" revision="fe893bb760a3bb64375f62fdf4762a58c59df9ef"/>
  <project name="apitrace" path="external/apitrace" remote="apitrace" revision="5ddb92ff090d40d2d5339e5f07b3a0ce10885462"/>
  <project name="gonk-patches" path="patches" remote="b2g" revision="223a2421006e8f5da33f516f6891c87cae86b0f6"/>
  <!-- Stock Android things -->
  <project name="platform/abi/cpp" path="abi/cpp" revision="6426040f1be4a844082c9769171ce7f5341a5528"/>
  <project name="platform/bionic" path="bionic" revision="cd5dfce80bc3f0139a56b58aca633202ccaee7f8"/>
  <project name="platform/bootable/recovery" path="bootable/recovery" revision="e0a9ac010df3afaa47ba107192c05ac8b5516435"/>
  <project name="platform/development" path="development" revision="a384622f5fcb1d2bebb9102591ff7ae91fe8ed2d"/>
  <project name="device/common" path="device/common" revision="7c65ea240157763b8ded6154a17d3c033167afb7"/>
  <project name="device/sample" path="device/sample" revision="c328f3d4409db801628861baa8d279fb8855892f"/>
  <project name="platform_external_apriori" path="external/apriori" remote="b2g" revision="11816ad0406744f963537b23d68ed9c2afb412bd"/>
  <project name="platform/external/bluetooth/bluez" path="external/bluetooth/bluez" revision="1023c91c66e9c3bd1132480051993bf7827770f6"/>
  <project name="platform/external/bluetooth/glib" path="external/bluetooth/glib" revision="c6b49241cc1a8950723a5f74f8f4b4f4c3fa970e"/>
  <project name="platform/external/bluetooth/hcidump" path="external/bluetooth/hcidump" revision="02b1eb24fbb3d0135a81edb4a2175b1397308d7d"/>
  <project name="platform/external/bsdiff" path="external/bsdiff" revision="81872540236d9bb15cccf963d05b9de48baa5375"/>
  <project name="platform/external/bzip2" path="external/bzip2" revision="048dacdca43eed1534689ececcf2781c63e1e4ba"/>
  <project name="platform/external/dbus" path="external/dbus" revision="c7517b6195dc6926728352113e6cc335da3f9c9e"/>
  <project name="platform/external/dhcpcd" path="external/dhcpcd" revision="1e00fb67022d0921af0fead263f81762781b9ffa"/>
  <project name="platform/external/dnsmasq" path="external/dnsmasq" revision="f621afad94df46204c25fc2593a19d704d2637f5"/>
  <project name="platform_external_elfcopy" path="external/elfcopy" remote="b2g" revision="62c1bed1c4505369cac2e72fbe30452a598fb690"/>
  <project name="platform_external_elfutils" path="external/elfutils" remote="b2g" revision="72940dec691fa3255e13df01f8c53b620e446066"/>
  <project name="platform/external/e2fsprogs" path="external/e2fsprogs" revision="d5f550bb2f556c5d287f7c8d2b77223654bcec37"/>
  <project name="platform/external/expat" path="external/expat" revision="6df134250feab71edb5915ecaa6268210bca76c5"/>
  <project name="platform/external/fdlibm" path="external/fdlibm" revision="988ffeb12a6e044ae3504838ef1fee3fe0716934"/>
  <project name="platform/external/flac" path="external/flac" revision="5893fbe890f5dab8e4146d2baa4bd2691c0739e0"/>
  <project name="platform/external/freetype" path="external/freetype" revision="aeb407daf3711a10a27f3bc2223c5eb05158076e"/>
  <project name="platform/external/giflib" path="external/giflib" revision="b2597268aef084202a8c349d1cc072c03c6e22eb"/>
  <project name="platform/external/gtest" path="external/gtest" revision="8c212ebe53bb2baab3575f03069016f1fb11e449"/>
  <project name="platform/external/harfbuzz" path="external/harfbuzz" revision="116610d63a859521dacf00fb6818ee9ab2e666f6"/>
  <project name="platform/external/icu4c" path="external/icu4c" revision="0fa67b93b831c6636ca18b152a1b1b14cc99b034"/>
  <project name="platform/external/iptables" path="external/iptables" revision="3b2deb17f065c5664bb25e1a28489e5792eb63ff"/>
  <project name="platform/external/jpeg" path="external/jpeg" revision="a62e464d672a4623233180e4023034bf825f066e"/>
  <project name="platform/external/libgsm" path="external/libgsm" revision="5e4516958690b9a1b2c98f88eeecba3edd2dbda4"/>
  <project name="platform/external/liblzf" path="external/liblzf" revision="6946aa575b0949d045722794850896099d937cbb"/>
  <project name="platform/external/libnfc-nxp" path="external/libnfc-nxp" revision="3a912b065a31a72c63ad56ac224cfeaa933423b6"/>
  <project name="platform/external/libnl-headers" path="external/libnl-headers" revision="6ccf7349d61f73ac26a0675d735d903ab919c658"/>
  <project name="platform/external/libpng" path="external/libpng" revision="9c3730f0efa69f580f03463c237cd928f3196404"/>
  <project name="platform/external/libvpx" path="external/libvpx" revision="3a40da0d96da5c520e7707aa14f48a80956e20d7"/>
  <project name="platform/external/llvm" path="external/llvm" revision="bff5923831940309f7d8ddbff5826ca6ed2dc050"/>
  <project name="platform/external/mksh" path="external/mksh" revision="ec646e8f5e7dac9a77d1de549c6ed92c04d0cd4b"/>
  <project name="platform_external_opensans" path="external/opensans" remote="b2g" revision="b5b4c226ca1d71e936153cf679dda6d3d60e2354"/>
  <project name="platform/external/openssl" path="external/openssl" revision="27d333cce9a31c806b4bfa042925f045c727aecd"/>
  <project name="platform/external/protobuf" path="external/protobuf" revision="e217977611c52bccde7f7c78e1d3c790c6357431"/>
  <project name="platform/external/safe-iop" path="external/safe-iop" revision="07073634e2e3aa4f518e36ed5dec3aabc549d5fb"/>
  <project name="screencap-gonk" path="external/screencap-gonk" remote="b2g" revision="e6403c71e9eca8cb943739d5a0a192deac60fc51"/>
  <project name="platform/external/skia" path="external/skia" revision="7d90c85f2c0e3b747f7c7eff8bc9253b0063b439"/>
  <project name="platform/external/sonivox" path="external/sonivox" revision="7c967779dfc61ac1f346e972de91d4bfce7dccbb"/>
  <project name="platform/external/speex" path="external/speex" revision="ebe6230a7f7c69f5a4389f2b09b7b19ef9e94f32"/>
  <project name="platform/external/sqlite" path="external/sqlite" revision="fb30e613139b8836fdc8e81e166cf3a76e5fa17f"/>
  <project name="platform/external/stlport" path="external/stlport" revision="a6734e0645fce81c9610de0488b729207bfa576e"/>
  <project name="platform/external/strace" path="external/strace" revision="c9fd2e5ef7d002e12e7cf2512506c84a9414b0fd"/>
  <project name="platform/external/svox" path="external/svox" revision="bd1c06681030164268172ead2eb39b86425624bf"/>
  <project name="platform/external/tagsoup" path="external/tagsoup" revision="68c2ec9e0acdb3214b7fb91dbab8c9fab8736817"/>
  <project name="platform/external/tinyalsa" path="external/tinyalsa" revision="06cc244ee512c1352215e543615738bc8ac82814"/>
  <project name="platform/external/tremolo" path="external/tremolo" revision="25bd78d2392dbdc879ae53382cde9d019f79cf6f"/>
  <project name="unbootimg" path="external/unbootimg" remote="b2g" revision="9464623d92eb8668544916dc5a8f4f6337d0bc08"/>
  <project name="platform/external/webp" path="external/webp" revision="88fe2b83c4b9232cd08729556fd0485d6a6a92cd"/>
  <project name="platform/external/webrtc" path="external/webrtc" revision="137024dc8a2e9251a471e20518a9c3ae06f81f23"/>
  <project name="platform/external/wpa_supplicant" path="external/wpa_supplicant" revision="a01d37870bbf9892d43e792e5de0683ca41c5497"/>
  <project name="platform/external/hostap" path="external/hostap" revision="bf04b0faadbdeb4b7943f2e2c4c5aa59df872bb1"/>
  <project name="platform/external/zlib" path="external/zlib" revision="f96a1d1ebfdf1cd582210fd09c23d8f59e0ae094"/>
  <project name="platform/external/yaffs2" path="external/yaffs2" revision="0afa916204c664b3114429637b63af1321a0aeca"/>
  <project name="platform/frameworks/base" path="frameworks/base" revision="eb2bc75803ca179353c24c364a9c8a8ce23e8b78"/>
  <project name="platform/frameworks/opt/emoji" path="frameworks/opt/emoji" revision="a95d8db002770469d72dfaf59ff37ac96db29a87"/>
  <project name="platform/frameworks/support" path="frameworks/support" revision="27208692b001981f1806f4f396434f4eac78b909"/>
  <project name="platform/hardware/libhardware" path="hardware/libhardware" revision="4a619901847621f8a7305edf42dd07347a140484"/>
  <project name="platform/hardware/libhardware_legacy" path="hardware/libhardware_legacy" revision="87b4d7afa8f854b445e2d0d95091f6f6069f2b30"/>
  <project name="platform/hardware/ril" path="hardware/ril" revision="d65f556f96bf5421f1f8db36b81706c8c3cb53c3"/>
  <project name="platform/libcore" path="libcore" revision="30841f9fba9ccd5c54f4f079f495994db97f283e"/>
  <project name="platform/ndk" path="ndk" revision="9f555971e1481854d5b4dc11b3e6af9fff4f241f"/>
  <project name="platform/prebuilt" path="prebuilt" revision="447ea790fcc957dde59730ecc2a65ca263bdc733"/>
  <project name="platform/system/bluetooth" path="system/bluetooth" revision="7772cad4823f1f427ce1d4df84a55982386d6d18"/>
  <project name="platform/system/core" path="system/core" revision="bf1970408676ce570b8f4dc3efa038e47552137f"/>
  <project name="platform/system/extras" path="system/extras" revision="01db6c1254e1407740a543f24317fc540fc4c049"/>
  <project name="platform/system/media" path="system/media" revision="7f71c7fd362bbd992ff2e0e80f7af5859ad116ad"/>
  <project name="platform/system/netd" path="system/netd" revision="306e765248e3900041bf2737e9f57b1b5694a4ce"/>
  <project name="platform/system/vold" path="system/vold" revision="99fff257d53cc045d1460841edca5d901dacfcf5"/>
  <!-- Wasabi specific things -->
  <project name="device/qcom/common" path="device/qcom/common" revision="b9cdab8e1e1a215a8c65b8d5816f666bec7be205"/>
  <project name="platform/vendor/qcom/msm8960" path="device/qcom/msm8960" revision="58786a6a6f16384a7770f92081a5d8f7b1a067ae"/>
  <project name="device-wasabi" path="device/qcom/wasabi" remote="b2g" revision="75c4cf201326edcd909502aa52febc96bf553104"/>
  <project name="codeaurora_kernel_msm" path="kernel" remote="b2g" revision="0a01247e4b0880f93424b27251cd3a1f6b19dbb2"/>
  <project name="platform/hardware/qcom/camera" path="hardware/qcom/camera" revision="1acf77a75e30f3fc8b1eed2057c97adf1cb1633f"/>
  <project name="hardware_qcom_display" path="hardware/qcom/display" remote="b2g" revision="6405d30f2fac7d8a1f2cb17b99fb7dd0a8bcfdac"/>
  <project name="platform/hardware/qcom/media" path="hardware/qcom/media" revision="552c3ddb7174a01f3508782d40c4d8c845ab441a"/>
  <project name="platform/hardware/qcom/gps" path="hardware/qcom/gps" revision="23d5707b320d7fc69f8ba3b7d84d78a1c5681708"/>
  <project name="platform/vendor/qcom-opensource/omx/mm-core" path="vendor/qcom/opensource/omx/mm-core" revision="ab17ac9a074b4bb69986a8436336bdfbbaf9cd39"/>
</manifest>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:56 $"/>
		<language type="so"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="spinbuttonsBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="spinbuttons"
           extends="chrome://global/content/bindings/general.xml#basecontrol">

    <resources>
      <stylesheet src="chrome://global/skin/spinbuttons.css"/>
    </resources>

    <content>
      <xul:vbox class="spinbuttons-box" flex="1">
        <xul:button anonid="increaseButton" type="repeat" flex="1"
                    class="spinbuttons-button spinbuttons-up"
                    xbl:inherits="disabled,disabled=increasedisabled"/>
        <xul:button anonid="decreaseButton" type="repeat" flex="1"
                    class="spinbuttons-button spinbuttons-down"
                    xbl:inherits="disabled,disabled=decreasedisabled"/>
      </xul:vbox>
    </content>

    <implementation>
      <property name="_increaseButton" readonly="true">
        <getter>
          return document.getAnonymousElementByAttribute(this, "anonid", "increaseButton");
        </getter>
      </property>
      <property name="_decreaseButton" readonly="true">
        <getter>
          return document.getAnonymousElementByAttribute(this, "anonid", "decreaseButton");
        </getter>
      </property>

      <property name="increaseDisabled"
                onget="return this._increaseButton.getAttribute('disabled') == 'true';"
                onset="if (val) this._increaseButton.setAttribute('disabled', 'true');
                       else this._increaseButton.removeAttribute('disabled'); return val;"/>
      <property name="decreaseDisabled"
                onget="return this._decreaseButton.getAttribute('disabled') == 'true';"
                onset="if (val) this._decreaseButton.setAttribute('disabled', 'true');
                       else this._decreaseButton.removeAttribute('disabled'); return val;"/>
    </implementation>

    <handlers>
      <handler event="mousedown">
        <![CDATA[
          // on the Mac, the native theme draws the spinbutton as a single widget
          // so a state attribute is set based on where the mouse button was pressed
          if (event.originalTarget == this._increaseButton)
            this.setAttribute("state", "up");
          else if (event.originalTarget == this._decreaseButton)
            this.setAttribute("state", "down");
        ]]>
      </handler>
      
      <handler event="mouseup">
        this.removeAttribute("state");
      </handler>
      <handler event="mouseout">
        this.removeAttribute("state");
      </handler>

      <handler event="command">
        <![CDATA[
          var eventname;
          if (event.originalTarget == this._increaseButton)
            eventname = "up";
          else if (event.originalTarget == this._decreaseButton)
            eventname = "down";

          var evt = document.createEvent("Events");
          evt.initEvent(eventname, true, true);
          var cancel = this.dispatchEvent(evt);
          
          if (this.hasAttribute("on" + eventname)) {
            var fn = new Function("event", this.getAttribute("on" + eventname));
            if (fn.call(this, event) == false)
              cancel = true;
          }

          return !cancel;
        ]]>
      </handler>

    </handlers>
  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"
          android:drawable="@drawable/spinner_pressed"/>

    <item android:state_pressed="false"
          android:state_focused="true"
          android:drawable="@drawable/spinner_focused"/>

    <item android:drawable="@drawable/spinner_default"/>

</selector>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="splitterBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="splitter" extends="xul:splitter">
    <resources>
      <stylesheet src="chrome://global/skin/splitter.css"/>
    </resources>
  </binding>

  <binding id="grippy" extends="xul:button">
    <resources>
      <stylesheet src="chrome://global/skin/splitter.css"/>
    </resources>
    <handlers>
      <handler event="command">
        <![CDATA[
          var splitter = this.parentNode;
          if (splitter) {
            var state = splitter.getAttribute("state");
            if (state == "collapsed")
              splitter.setAttribute("state", "open");
            else
              splitter.setAttribute("state", "collapsed");
          }
        ]]>
      </handler>
    </handlers>
  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:30 $"/>
        <language type="sq"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.2 $"/>
		<generation date="$Date: 2008/05/25 01:05:57 $"/>
		<language type="sr"/> 
        <script type="Cyrl"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cyrl</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:33 $"/>
        <language type="sr"/>
        <script type="Latn"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:32 $"/>
        <language type="sr"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="ssltap">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>SSLTAP</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>ssltap</refname>
    <refpurpose>Tap into SSL connections and display the data going by </refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <cmdsynopsis>
      <command>ssltap</command>
      <arg choice="opt">-fhlsvx</arg>
      <arg choice="opt">-p port</arg>
      <arg choice="opt">hostname:port</arg>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection id="description">
    <title>Description</title>
    <para>The SSL Debugging Tool <command>ssltap</command> is an SSL-aware command-line proxy. It watches TCP connections and displays the data going by. If a connection is SSL, the data display includes interpreted SSL records and handshaking</para>
  </refsection>

  <refsection id="options">
    <title>Options</title>
    <variablelist>
      <varlistentry>
        <term>-f </term>
        <listitem><para>
Turn on fancy printing. Output is printed in colored HTML. Data sent from the client to the server is in blue; the server's reply is in red. When used with looping mode, the different connections are separated with horizontal lines. You can use this option to upload the output into a browser. 
        </para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-h </term>
        <listitem><para>
Turn on hex/ASCII printing. Instead of outputting raw data, the command interprets each record as a numbered line of hex values, followed by the same data as ASCII characters. The two parts are separated by a vertical bar. Nonprinting characters are replaced by dots. 
        </para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-l  prefix</term>
        <listitem>
          <para>
Turn on looping; that is, continue to accept connections rather than stopping after the first connection is complete.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>-p  port</term>
        <listitem>
          <para>Change the default rendezvous port (1924) to another port.</para>
          <para>The following are well-known port numbers:</para>
	      <para>
          * HTTP   80
          </para>
	      <para>
	      * HTTPS  443
	      </para>
          <para>
          * SMTP   25
          </para>
          <para>
          * FTP    21
          </para>
          <para>
          * IMAP   143
          </para>
          <para>
          * IMAPS  993 (IMAP over SSL)
          </para>
          <para>
          * NNTP   119
          </para>
          <para>
          * NNTPS  563 (NNTP over SSL) 
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>-s </term>
        <listitem>
          <para>
Turn on SSL parsing and decoding. The tool does not automatically detect SSL sessions. If you are intercepting an SSL connection, use this option so that the tool can detect and decode SSL structures.
	  </para>
	  <para>
If the tool detects a certificate chain, it saves the DER-encoded certificates into files in the current directory. The files are named cert.0x, where x is the sequence number of the certificate.
	  </para>
	  <para>
If the -s option is used with -h, two separate parts are printed for each record: the plain hex/ASCII output, and the parsed SSL output.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>-v </term>
        <listitem><para>Print a version string for the tool.</para></listitem>
      </varlistentry>
      <varlistentry>
        <term>-x </term>
        <listitem><para>Turn on extra SSL hex dumps.</para></listitem>
      </varlistentry>
    </variablelist>
  </refsection>

  <refsection id="basic-usage">
    <title>Usage and Examples</title>
      <para>
You can use the SSL Debugging Tool to intercept any connection information. Although you can run the tool at its most basic by issuing the ssltap command with no options other than hostname:port, the information you get in this way is not very useful. For example, assume your development machine is called intercept. The simplest way to use the debugging tool is to execute the following command from a command shell:
      </para>
<programlisting>$ ssltap www.netscape.com</programlisting>
      <para>
The program waits for an incoming connection on the default port 1924. In your browser window, enter the URL http://intercept:1924. The browser retrieves the requested page from the server at www.netscape.com, but the page is intercepted and passed on to the browser by the debugging tool on intercept. On its way to the browser, the data is printed to the command shell from which you issued the command. Data sent from the client to the server is surrounded by the following symbols: --> [ data ] Data sent from the server to the client is surrounded by the following symbols: 
"left arrow"-- [ data ] The raw data stream is sent to standard output and is not interpreted in any way. This can result in peculiar effects, such as sounds, flashes, and even crashes of the command shell window. To output a basic, printable interpretation of the data, use the -h option, or, if you are looking at an SSL connection, the -s option. You will notice that the page you retrieved looks incomplete in the browser. This is because, by default, the tool closes down after the first connection is complete, so the browser is not able to load images. To make the tool 
continue to accept connections, switch on looping mode with the -l option. The following examples show the output from commonly used combinations of options.
      </para>
	
      <para>Example 1 </para>
<programlisting>$ ssltap.exe -sx -p 444 interzone.mcom.com:443 > sx.txt</programlisting>
	  <para>Output </para>
<programlisting>
Connected to interzone.mcom.com:443
-->; [
alloclen = 66 bytes
   [ssl2]  ClientHelloV2 {
            version = {0x03, 0x00}
            cipher-specs-length = 39 (0x27)
            sid-length = 0 (0x00)
            challenge-length = 16 (0x10)
            cipher-suites = {

                (0x010080) SSL2/RSA/RC4-128/MD5
                  (0x020080) SSL2/RSA/RC4-40/MD5
                  (0x030080) SSL2/RSA/RC2CBC128/MD5
                  (0x040080) SSL2/RSA/RC2CBC40/MD5
                  (0x060040) SSL2/RSA/DES64CBC/MD5
                  (0x0700c0) SSL2/RSA/3DES192EDE-CBC/MD5
                  (0x000004) SSL3/RSA/RC4-128/MD5
                  (0x00ffe0) SSL3/RSA-FIPS/3DES192EDE-CBC/SHA
                  (0x00000a) SSL3/RSA/3DES192EDE-CBC/SHA
                  (0x00ffe1) SSL3/RSA-FIPS/DES64CBC/SHA
                  (0x000009) SSL3/RSA/DES64CBC/SHA
                  (0x000003) SSL3/RSA/RC4-40/MD5
                  (0x000006) SSL3/RSA/RC2CBC40/MD5
                  }
            session-id = { }
            challenge = { 0xec5d 0x8edb 0x37c9 0xb5c9 0x7b70 0x8fe9 0xd1d3

0x2592 }
}
]
&lt;-- [
SSLRecord {
   0: 16 03 00 03  e5                                   |.....
   type    = 22 (handshake)
   version = { 3,0 }
   length  = 997 (0x3e5)
   handshake {
   0: 02 00 00 46                                      |...F
      type = 2 (server_hello)
      length = 70 (0x000046)
            ServerHello {
            server_version = {3, 0}
            random = {...}
   0: 77 8c 6e 26  6c 0c ec c0  d9 58 4f 47  d3 2d 01 45  |
wn&amp;l.ì..XOG.-.E
   10: 5c 17 75 43  a7 4c 88 c7  88 64 3c 50  41 48 4f 7f  |

\.uC§L.Ç.d&lt;PAHO.
                  session ID = {
                  length = 32

                contents = {..}
   0: 14 11 07 a8  2a 31 91 29  11 94 40 37  57 10 a7 32  | ...¨*1.)..@7W.§2
   10: 56 6f 52 62  fe 3d b3 65  b1 e4 13 0f  52 a3 c8 f6  | VoRbþ=³e±...R£È.
         }
               cipher_suite = (0x0003) SSL3/RSA/RC4-40/MD5
         }
   0: 0b 00 02 c5                                      |...Å
      type = 11 (certificate)
      length = 709 (0x0002c5)
            CertificateChain {
            chainlength = 706 (0x02c2)
               Certificate {
            size = 703 (0x02bf)
               data = { saved in file 'cert.001' }
            }
         }
   0: 0c 00 00 ca                                      |....
         type = 12 (server_key_exchange)
         length = 202 (0x0000ca)
   0: 0e 00 00 00                                      |....
         type = 14 (server_hello_done)
         length = 0 (0x000000)
   }
}
]
--> [
SSLRecord {
   0: 16 03 00 00  44                                   |....D
   type    = 22 (handshake)
   version = { 3,0 }
   length  = 68 (0x44)
   handshake {
   0: 10 00 00 40                                      |...@
   type = 16 (client_key_exchange)
   length = 64 (0x000040)
         ClientKeyExchange {
            message = {...}
         }
   }
}
]
--> [
SSLRecord {
   0: 14 03 00 00  01                                   |.....
   type    = 20 (change_cipher_spec)
   version = { 3,0 }
   length  = 1 (0x1)
   0: 01                                               |.
}
SSLRecord {
   0: 16 03 00 00  38                                   |....8
   type    = 22 (handshake)
   version = { 3,0 }
   length  = 56 (0x38)
               &lt; encrypted >

}
]
&lt;-- [
SSLRecord {
   0: 14 03 00 00  01                                   |.....
   type    = 20 (change_cipher_spec)
   version = { 3,0 }
   length  = 1 (0x1)
   0: 01                                               |.
}
]
&lt;-- [
SSLRecord {
   0: 16 03 00 00  38                                   |....8
   type    = 22 (handshake)
   version = { 3,0 }
   length  = 56 (0x38)
                  &lt; encrypted >

}
]
--> [
SSLRecord {
   0: 17 03 00 01  1f                                   |.....
   type    = 23 (application_data)
   version = { 3,0 }
   length  = 287 (0x11f)
               &lt; encrypted >
}
]
&lt;-- [
SSLRecord {
   0: 17 03 00 00  a0                                   |....
   type    = 23 (application_data)
   version = { 3,0 }
   length  = 160 (0xa0)
               &lt; encrypted >

}
]
&lt;-- [
SSLRecord {
0: 17 03 00 00  df                                   |....ß
   type    = 23 (application_data)
   version = { 3,0 }
   length  = 223 (0xdf)
               &lt; encrypted >

}
SSLRecord {
   0: 15 03 00 00  12                                   |.....
   type    = 21 (alert)
   version = { 3,0 }
   length  = 18 (0x12)
               &lt; encrypted >
}
]
Server socket closed.
</programlisting>


      <para>Example 2</para>
      <para>
The -s option turns on SSL parsing. Because the -x option is not used in this example, undecoded values are output as raw data. The output is routed to a text file.
    </para>
<programlisting>$ ssltap -s  -p 444 interzone.mcom.com:443 > s.txt</programlisting>
	  <para>Output </para>
<programlisting>
Connected to interzone.mcom.com:443
--> [
alloclen = 63 bytes
   [ssl2]  ClientHelloV2 {
            version = {0x03, 0x00}
            cipher-specs-length = 36 (0x24)
            sid-length = 0 (0x00)
            challenge-length = 16 (0x10)
            cipher-suites = {
                  (0x010080) SSL2/RSA/RC4-128/MD5
                  (0x020080) SSL2/RSA/RC4-40/MD5
                  (0x030080) SSL2/RSA/RC2CBC128/MD5
                  (0x060040) SSL2/RSA/DES64CBC/MD5
                  (0x0700c0) SSL2/RSA/3DES192EDE-CBC/MD5
                  (0x000004) SSL3/RSA/RC4-128/MD5
                  (0x00ffe0) SSL3/RSA-FIPS/3DES192EDE-CBC/SHA
                  (0x00000a) SSL3/RSA/3DES192EDE-CBC/SHA
                  (0x00ffe1) SSL3/RSA-FIPS/DES64CBC/SHA
                  (0x000009) SSL3/RSA/DES64CBC/SHA
                  (0x000003) SSL3/RSA/RC4-40/MD5
                  }
               session-id = { }
            challenge = { 0x713c 0x9338 0x30e1 0xf8d6 0xb934 0x7351 0x200c
0x3fd0 }
]
&gt;-- [
SSLRecord {
   type    = 22 (handshake)
   version = { 3,0 }
   length  = 997 (0x3e5)
   handshake {
         type = 2 (server_hello)
         length = 70 (0x000046)
            ServerHello {
            server_version = {3, 0}
            random = {...}
            session ID = {
               length = 32
               contents = {..}
               }
               cipher_suite = (0x0003) SSL3/RSA/RC4-40/MD5
            }
         type = 11 (certificate)
         length = 709 (0x0002c5)
            CertificateChain {
               chainlength = 706 (0x02c2)
               Certificate {
                  size = 703 (0x02bf)
                  data = { saved in file 'cert.001' }
               }
            }
         type = 12 (server_key_exchange)
         length = 202 (0x0000ca)
         type = 14 (server_hello_done)
         length = 0 (0x000000)
   }
}
]
--> [
SSLRecord {
   type    = 22 (handshake)
   version = { 3,0 }
   length  = 68 (0x44)
   handshake {
         type = 16 (client_key_exchange)
         length = 64 (0x000040)
            ClientKeyExchange {
               message = {...}
            }
   }
}
]
--> [
SSLRecord {
   type    = 20 (change_cipher_spec)
   version = { 3,0 }
   length  = 1 (0x1)
}
SSLRecord {
   type    = 22 (handshake)
   version = { 3,0 }
   length  = 56 (0x38)
               &gt; encrypted >
}
]
&gt;-- [
SSLRecord {
   type    = 20 (change_cipher_spec)
   version = { 3,0 }
   length  = 1 (0x1)
}
]
&gt;-- [
SSLRecord {
   type    = 22 (handshake)
   version = { 3,0 }
   length  = 56 (0x38)
               &gt; encrypted >
}
]
--> [
SSLRecord {
   type    = 23 (application_data)
   version = { 3,0 }
   length  = 287 (0x11f)
               &gt; encrypted >
}
]
[
SSLRecord {
   type    = 23 (application_data)
   version = { 3,0 }
   length  = 160 (0xa0)
               &gt; encrypted >
}
]
&gt;-- [
SSLRecord {
   type    = 23 (application_data)
   version = { 3,0 }
   length  = 223 (0xdf)
               &gt; encrypted >
}
SSLRecord {
   type    = 21 (alert)
   version = { 3,0 }
   length  = 18 (0x12)
               &gt; encrypted >
}
]
Server socket closed.
</programlisting>

      <para>Example 3</para>
      <para>
In this example, the -h option turns hex/ASCII format. There is no SSL parsing or decoding. The output is routed to a text file.
    </para>
<programlisting>$ ssltap -h  -p 444 interzone.mcom.com:443 > h.txt</programlisting>
	  <para>Output </para>
<programlisting>
Connected to interzone.mcom.com:443
--&gt; [
   0: 80 40 01 03  00 00 27 00  00 00 10 01  00 80 02 00  | .@....'.........
   10: 80 03 00 80  04 00 80 06  00 40 07 00  c0 00 00 04  | .........@......
   20: 00 ff e0 00  00 0a 00 ff  e1 00 00 09  00 00 03 00  | ........á.......
   30: 00 06 9b fe  5b 56 96 49  1f 9f ca dd  d5 ba b9 52  | ..þ[V.I.\xd9 ...º¹R
   40: 6f 2d                                            |o-
]
&lt;-- [
   0: 16 03 00 03  e5 02 00 00  46 03 00 7f  e5 0d 1b 1d  | ........F.......
   10: 68 7f 3a 79  60 d5 17 3c  1d 9c 96 b3  88 d2 69 3b  | h.:y`..&lt;..³.Òi;
   20: 78 e2 4b 8b  a6 52 12 4b  46 e8 c2 20  14 11 89 05  | x.K.¦R.KFè. ...
   30: 4d 52 91 fd  93 e0 51 48  91 90 08 96  c1 b6 76 77  | MR.ý..QH.....¶vw
   40: 2a f4 00 08  a1 06 61 a2  64 1f 2e 9b  00 03 00 0b  | *ô..¡.a¢d......
   50: 00 02 c5 00  02 c2 00 02  bf 30 82 02  bb 30 82 02  | ..Å......0...0..
   60: 24 a0 03 02  01 02 02 02  01 36 30 0d  06 09 2a 86  | $ .......60...*.
   70: 48 86 f7 0d  01 01 04 05  00 30 77 31  0b 30 09 06  | H.÷......0w1.0..
   80: 03 55 04 06  13 02 55 53  31 2c 30 2a  06 03 55 04  | .U....US1,0*..U.
   90: 0a 13 23 4e  65 74 73 63  61 70 65 20  43 6f 6d 6d  | ..#Netscape Comm
   a0: 75 6e 69 63  61 74 69 6f  6e 73 20 43  6f 72 70 6f  | unications Corpo
   b0: 72 61 74 69  6f 6e 31 11  30 0f 06 03  55 04 0b 13  | ration1.0...U...
   c0: 08 48 61 72  64 63 6f 72  65 31 27 30  25 06 03 55  | .Hardcore1'0%..U
   d0: 04 03 13 1e  48 61 72 64  63 6f 72 65  20 43 65 72  | ....Hardcore Cer
   e0: 74 69 66 69  63 61 74 65  20 53 65 72  76 65 72 20  | tificate Server
   f0: 49 49 30 1e  17 0d 39 38  30 35 31 36  30 31 30 33  | II0...9805160103
&lt;additional data lines&gt;
]
&lt;additional records in same format&gt;
Server socket closed.
</programlisting>

      <para>Example 4</para>
      <para>
In this example, the -s option turns on SSL parsing, and the -h option turns on hex/ASCII format. 
Both formats are shown for each record. The output is routed to a text file.
      </para>
<programlisting>$ ssltap -hs -p 444 interzone.mcom.com:443 > hs.txt</programlisting>
	  <para>Output </para>
<programlisting>
Connected to interzone.mcom.com:443
--> [
   0: 80 3d 01 03  00 00 24 00  00 00 10 01  00 80 02 00  | .=....$.........
   10: 80 03 00 80  04 00 80 06  00 40 07 00  c0 00 00 04  | .........@......
   20: 00 ff e0 00  00 0a 00 ff  e1 00 00 09  00 00 03 03  | ........á.......
   30: 55 e6 e4 99  79 c7 d7 2c  86 78 96 5d  b5 cf e9     |U..yÇ\xb0 ,.x.]µÏé
alloclen = 63 bytes
   [ssl2]  ClientHelloV2 {
            version = {0x03, 0x00}
            cipher-specs-length = 36 (0x24)
            sid-length = 0 (0x00)
            challenge-length = 16 (0x10)
            cipher-suites = {
                  (0x010080) SSL2/RSA/RC4-128/MD5
                  (0x020080) SSL2/RSA/RC4-40/MD5
                  (0x030080) SSL2/RSA/RC2CBC128/MD5
                  (0x040080) SSL2/RSA/RC2CBC40/MD5
                  (0x060040) SSL2/RSA/DES64CBC/MD5
                  (0x0700c0) SSL2/RSA/3DES192EDE-CBC/MD5
                  (0x000004) SSL3/RSA/RC4-128/MD5
                  (0x00ffe0) SSL3/RSA-FIPS/3DES192EDE-CBC/SHA
                  (0x00000a) SSL3/RSA/3DES192EDE-CBC/SHA
                  (0x00ffe1) SSL3/RSA-FIPS/DES64CBC/SHA
                  (0x000009) SSL3/RSA/DES64CBC/SHA
                  (0x000003) SSL3/RSA/RC4-40/MD5
                  }
            session-id = { }
            challenge = { 0x0355 0xe6e4 0x9979 0xc7d7 0x2c86 0x7896 0x5db

0xcfe9 }
}
]
&lt;additional records in same formats&gt;
Server socket closed.
</programlisting>



    </refsection>

    <refsection id="usage-tips">
    <title>Usage Tips</title>
      <para>
When SSL restarts a previous session, it makes use of cached information to do a partial handshake. 
If you wish to capture a full SSL handshake, restart the browser to clear the session id cache.
      </para>
      <para>
If you run the tool on a machine other than the SSL server to which you are trying to connect, 
the browser will complain that the host name you are trying to connect to is different from the certificate. 
If you are using the default BadCert callback, you can still connect through a dialog. If you are not using 
the default BadCert callback, the one you supply must allow for this possibility.
      </para>
    </refsection>
  
  <refsection id="seealso">
    <title>See Also</title>
	<para>The NSS Security Tools are also documented at <ulink url="http://www.mozilla.org/projects/security/pki/nss/tools">http://www.mozilla.org/projects/security/pki/nss/</ulink>.</para>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0"?><?TEST-STYLE PIDATA?>
<!DOCTYPE staff SYSTEM "staff2.dtd" []>
<!-- This is comment number 1.-->
<staff>
 <employee>
  <employeeId>EMP0001</employeeId>
  <name>Margaret Martin</name>
  <position>Accountant</position>           
  <salary>56,000</salary>
  <gender>Female</gender>
  <address>1230 North Ave. Dallas, Texas 98551</address>
 </employee>
 </staff>
<?xml version="1.0"?><?TEST-STYLE PIDATA?>
<!DOCTYPE staff PUBLIC "STAFF" "staffNS.dtd" 
[
   <!ENTITY ent1 "es">
   <!ENTITY ent2 "1900 Dallas Road">
   <!ENTITY ent3 "Texas">
   <!ENTITY ent4 "<entElement1 xmlns:local1='www.xyz.com'>Element data</entElement1><?PItarget PIdata?>">
   <!ENTITY ent5 PUBLIC "entityURI" "entityFile" NDATA notation1>
   <!ENTITY ent6 PUBLIC "uri" "file" NDATA notation2>
   <!ENTITY ent1 "This entity should be discarded">
   <!NOTATION notation1 PUBLIC "notation1File">
   <!NOTATION notation2 SYSTEM "notation2File">
]>
<!-- This is comment number 1.-->
<staff>
 <employee xmlns="http://www.nist.gov" xmlns:dmstc="http://www.usa.com">
  <employeeId>EMP0001</employeeId>
  <name>Margaret Martin</name>
  <position>Accountant</position>           
  <salary>56,000</salary>
  <gender>Female</gender>
  <address dmstc:domestic="Yes">1230 North Ave. Dallas, Texas 98551</address>
 </employee>
 <employee xmlns:dmstc="http://www.usa.com">
  <employeeId>EMP0002</employeeId>
  <name>Martha Raynolds
<![CDATA[This is a CDATASection with EntityReference number 2 &ent2;]]>
<![CDATA[This is an adjacent CDATASection with a reference to a tab &tab;]]></name>
  <position>Secretary</position>
  <salary>35,000</salary>
  <gender>Female</gender>
  <address dmstc:domestic="Yes" street="Yes">&ent2; Dallas, &ent3;
 98554</address>
 </employee>
 <employee xmlns:dmstc="http://www.netzero.com">
  <employeeId>EMP0003</employeeId>
  <name>Roger
 Jones</name>
  <position>Department Manager</position>
  <salary>100,000</salary>
  <gender>&ent4;</gender>
  <address dmstc:domestic="Yes" street="No">PO Box 27 Irving, texas 98553</address>
 </employee>
 <emp:employee xmlns:emp="http://www.nist.gov" xmlns:nm="http://www.altavista.com" >    <emp:employeeId>EMP0004</emp:employeeId>
  <nm:name>Jeny Oconnor</nm:name>
  <emp:position>Personnel Director</emp:position>
  <emp:salary>95,000</emp:salary>
  <emp:gender>Female</emp:gender>
  <emp:address emp:domestic="Yes" street="Y&ent1;" emp:zone="CANADA" emp:local1="TRUE">27 South Road. Dallas, texas 98556</emp:address>
 </emp:employee>
 <employee xmlns:emp2="http://www.nist.gov">
  <employeeId>EMP0005</employeeId>
  <name>Robert Myers</name>
  <position>Computer Specialist</position>
  <salary>90,000</salary>
  <gender>male</gender>
  <address street="Yes" xmlns="http://www.nist.gov">1821 Nordic. Road, Irving Texas 98558</address>
 </employee>
 </staff>
<?xml version="1.0"?><?TEST-STYLE PIDATA?>
<!DOCTYPE staff SYSTEM "staff.dtd" [
   <!ENTITY ent1 "es">
   <!ENTITY ent2 "1900 Dallas Road">
   <!ENTITY ent3 "Texas">
   <!ENTITY ent4 "<entElement domestic='Yes'>Element data</entElement><?PItarget PIdata?>">
   <!ENTITY ent5 PUBLIC "entityURI" "entityFile" NDATA notation1>
   <!ENTITY ent1 "This entity should be discarded">
   <!NOTATION notation1 PUBLIC "notation1File">
   <!NOTATION notation2 SYSTEM "notation2File">
]>
<!-- This is comment number 1.-->
<staff>
 <employee>
  <employeeId>EMP0001</employeeId>
  <name>Margaret Martin</name>
  <position>Accountant</position>           
  <salary>56,000</salary>
  <gender>Female</gender>
  <address domestic="Yes">1230 North Ave. Dallas, Texas 98551</address>
 </employee>
 <employee>
  <employeeId>EMP0002</employeeId>
  <name>Martha Raynolds<![CDATA[This is a CDATASection with EntityReference number 2 &ent2;]]>
<![CDATA[This is an adjacent CDATASection with a reference to a tab &tab;]]></name>
  <position>Secretary</position>
  <salary>35,000</salary>
  <gender>Female</gender>
  <address domestic="Yes" street="Yes">&ent2; Dallas, &ent3;
 98554</address>
 </employee>
 <employee>
  <employeeId>EMP0003</employeeId>
  <name>Roger
 Jones</name>
  <position>Department Manager</position>
  <salary>100,000</salary>
  <gender>&ent4;</gender>
  <address domestic="Yes" street="No">PO Box 27 Irving, texas 98553</address>
 </employee>
 <employee>
  <employeeId>EMP0004</employeeId>
  <name>Jeny Oconnor</name>
  <position>Personnel Director</position>
  <salary>95,000</salary>
  <gender>Female</gender>
  <address domestic="Yes" street="Y&ent1;">27 South Road. Dallas, Texas 98556</address>
 </employee>
 <employee>
  <employeeId>EMP0005</employeeId>
  <name>Robert Myers</name>
  <position>Computer Specialist</position>
  <salary>90,000</salary>
  <gender>male</gender>
  <address street="Yes">1821 Nordic. Road, Irving Texas 98558</address>
 </employee>
 </staff>
<db>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:storageSizeRule selector="//country" storageSize="25" storageEncoding="ISO-8859-1"/>
  </its:rules>
  <data>
    <country id="123">Papouasie-Nouvelle-Guinée</country>
    <country id="139">République Dominicaine</country>
  </data>
</db>

<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
    <its:storageSizeRule selector="//h:p" storageSize="25" storageEncoding="ISO-8859-1"/>
  </its:rules>
<fields>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:storageSizeRule selector="//field" storageSizePointer="@max" storageEncodingPointer="@encoding"/>
  </its:rules>
  <field type="country" id="123" max="25" encoding="ISO-8859-1">Papouasie-Nouvelle-Guinée</field>
  <field type="country" id="139" max="25" encoding="ISO-8859-1">République Dominicaine</field>
</fields>

<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
    <its:param name="storagesizeParam">123</its:param>
    <its:storageSizeRule selector="//h:p[@id=$storagesizeParam]" storageSize="25" storageEncoding="ISO-8859-1"/>
  </its:rules>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:storageSizeRule selector="//country" storageSize="25" storageEncoding="ISO-8859-1"/>
  </its:rules>
<db>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="storagesize3xmlrules.xml"/>
  <data>
    <country id="123">Papouasie-Nouvelle-Guinée</country>
    <country id="139">République Dominicaine</country>
  </data>
</db>

  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:storageSizeRule selector="//field" storageSizePointer="@max" storageEncodingPointer="@encoding"/>
  </its:rules>
<fields>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="storagesize4xmlrules.xml"/>
  <field type="country" id="123" max="25" encoding="ISO-8859-1">Papouasie-Nouvelle-Guinée</field>
  <field type="country" id="139" max="25" encoding="ISO-8859-1">République Dominicaine</field>
</fields>

<messages xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <var num="panelA1_Continue" its:storageSize="8" its:storageEncoding="UTF-16">CONTINUE</var>
  <var num="panelA1_Stop" its:storageSize="8" its:storageEncoding="UTF-16">STOP</var>
  <var num="panelB5_Cancel" its:storageSize="12" its:storageEncoding="UTF-16">CANCEL</var>
</messages>
<messages xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <var num="panelA1_Continue" its:storageSize="8" its:storageEncoding="UTF-16" its:lineBreakType="lf">CONTINUE</var>
  <var num="panelA1_Stop" its:storageSize="8" its:storageEncoding="UTF-16" its:lineBreakType="lf">STOP</var>
  <var num="panelB5_Cancel" its:storageSize="12" its:storageEncoding="UTF-16" its:lineBreakType="lf">CANCEL</var>
</messages>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:param name="storagesizeParam">123</its:param>
    <its:storageSizeRule selector="//country[@id=$storagesizeParam]" storageSize="25" storageEncoding="ISO-8859-1"/>
  </its:rules>
<db>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="storagesize7xmlrules.xml"/>
  <data>
    <country id="123">Papouasie-Nouvelle-Guinée</country>
    <country id="139">République Dominicaine</country>
  </data>
</db>

<db>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:param name="storagesizeParam">123</its:param>
    <its:storageSizeRule selector="//country[@id=$storagesizeParam]" storageSize="25" storageEncoding="ISO-8859-1"/>
  </its:rules>
  <data>
    <country id="123">Papouasie-Nouvelle-Guinée</country>
    <country id="139">République Dominicaine</country>
  </data>
</db>

<messages xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
  <its:span storageSize="8" storageEncoding="UTF-16" lineBreakType="lf">CONTINUE</its:span>
  <its:span storageSize="8" storageEncoding="UTF-16" lineBreakType="lf">STOP</its:span>
  <its:span storageSize="12" storageEncoding="UTF-16" lineBreakType="lf">CANCEL</its:span>
</messages>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="stringBundleBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="stringbundleset" extends="xul:box"/>

  <binding id="stringbundle" extends="xul:spacer">
    <implementation name="XStringBundle">

      <method name="getString">
        <parameter name="aStringKey"/>
        <body>
          <![CDATA[
            try {
              return this.stringBundle.GetStringFromName(aStringKey);
            }
            catch (e) {
              dump("*** Failed to get string " + aStringKey + " in bundle: " + this.src + "\n");
              throw e;
            }
          ]]>
        </body>
      </method>

      <method name="getFormattedString">
        <parameter name="aStringKey"/>
        <parameter name="aStringsArray"/>
        <body>
          <![CDATA[
            try {
              return this.stringBundle.formatStringFromName(aStringKey, aStringsArray, aStringsArray.length);
            }
            catch (e) {
              dump("*** Failed to format string " + aStringKey + " in bundle: " + this.src + "\n");
              throw e;
            }
          ]]>
        </body>
      </method>

      <property name="stringBundle" readonly="true">
        <getter>
          <![CDATA[
            if (!this._bundle) {
              try {
                this._bundle = Components.classes["@mozilla.org/intl/stringbundle;1"]
                                         .getService(Components.interfaces.nsIStringBundleService)
                                         .createBundle(this.src);
              }
              catch (e) {
                dump("Failed to get stringbundle:\n");
                dump(e + "\n");
              }
            }
            return this._bundle;
          ]]>
        </getter>
      </property>

      <property name="src">
        <getter>
          <![CDATA[
            return this.getAttribute("src");
          ]]>
        </getter>
        <setter>
          <![CDATA[
            this._bundle = null;
            this.setAttribute("src", val);
            return val;
          ]]>
        </setter>
      </property>

      <property name="strings">
        <getter>
          <![CDATA[
            // Note: this is a sucky method name! Should be:
            //       readonly attribute nsISimpleEnumerator strings;
            return this.stringBundle.getSimpleEnumeration();
          ]]>
        </getter>
      </property>

      <field name="_bundle">null</field>

    </implementation>
  </binding>

</bindings>
<string name="label">main1</string>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources>

    <!--
        Only overriden styles for Honeycomb/Ice cream sandwich XLARGE tablets are specified here.
        Please refer to values/styles.xml for default styles.
    -->

    <!-- TabWidget --> 
    <style name="TabWidget">
        <item name="android:layout_width">300dip</item>
        <item name="android:layout_height">48dip</item>
    </style>

    <!-- Tabs panel -->
    <style name="TabsPanelFrame.RemoteTabs" parent="TabsPanelFrameBase">
        <item name="android:paddingLeft">212dp</item>
        <item name="android:paddingRight">212dp</item>
    </style>

    <style name="Widget.TopSitesListView" parent="Widget.BookmarksListView">
        <item name="android:paddingTop">30dp</item>
        <item name="android:paddingLeft">32dp</item>
        <item name="android:paddingRight">32dp</item>
        <item name="android:clipToPadding">false</item>
        <item name="topDivider">false</item>
    </style>

</resources>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<style media="screen" type="text/css"></style>
<title>NIST DOM HTML Test - BR</title>
</head>
<body onload="parent.loadComplete()">
<p>Hello, World.</p>
</body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
  <!ENTITY % feedDTD
    SYSTEM "chrome://browser/locale/feeds/subscribe.dtd">
  %feedDTD;
]>
<bindings id="feedBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  <binding id="feedreaderUI" bindToUntrustedContent="true">
    <content>
      <xul:vbox>
        <xul:hbox align="center">
          <xul:description anonid="subscribeUsingDescription" class="subscribeUsingDescription"/>
          <xul:menulist anonid="handlersMenuList" class="handlersMenuList" aria-labelledby="subscribeUsingDescription">
            <xul:menupopup anonid="handlersMenuPopup" class="handlersMenuPopup">
              <xul:menuitem anonid="liveBookmarksMenuItem" label="&feedLiveBookmarks;" class="menuitem-iconic liveBookmarksMenuItem" image="chrome://browser/skin/page-livemarks.png" selected="true"/>
              <xul:menuseparator/>
            </xul:menupopup>
          </xul:menulist>
        </xul:hbox>
        <xul:hbox>
          <xul:checkbox anonid="alwaysUse" class="alwaysUse" checked="false"/>
        </xul:hbox>
        <xul:hbox align="center">
          <xul:spacer flex="1"/>
          <xul:button label="&feedSubscribeNow;" anonid="subscribeButton" class="subscribeButton"/>
        </xul:hbox>
      </xul:vbox>
    </content>
    <resources>
      <stylesheet src="chrome://browser/skin/feeds/subscribe-ui.css"/>
    </resources>
  </binding>
</bindings>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:orientation="horizontal"
              android:background="@drawable/suggestion_selector"
              android:gravity="center_vertical"
              android:clickable="true"
              android:padding="7dp">

    <ImageView android:id="@+id/suggestion_magnifier"
               android:src="@drawable/suggestion_item_search"
               android:layout_marginRight="3dip"
               android:layout_width="16dip"
               android:layout_height="16dip"/>

    <TextView android:id="@+id/suggestion_text"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:textColor="#222222"
              android:textSize="14sp"
              android:gravity="center_vertical"
              android:layout_gravity="center_vertical"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true">
        <shape>
            <gradient android:angle="90"
                      android:startColor="#E66000"
                      android:endColor="#FF9500"
                      android:type="linear"/>

            <corners android:radius="4dp"/>
        </shape>
    </item>

    <item android:state_focused="true"
          android:state_enabled="true">
        <shape>
            <gradient android:angle="90"
                      android:startColor="#D2DAE2"
                      android:endColor="#E3E8ED"
                      android:type="linear"/>

            <stroke android:width="2dp"
                    android:color="#E66000" />

            <corners android:radius="4dp"/>
        </shape>
    </item>

    <item android:state_enabled="true">
        <shape>
            <gradient android:angle="90"
                      android:startColor="#D2DAE2"
                      android:endColor="#E3E8ED"
                      android:type="linear"/>

            <corners android:radius="4dp"/>
        </shape>
    </item>
</selector>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- NOTE: This file is currently unused, but it's still in the tree because
     bug 163068 will likely involve adding content to it. -->
<bindings id="svgBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xbl="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink" >
</bindings>
<svg xmlns="http://www.w3.org/2000/svg"></svg><?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:34 $"/>
        <language type="sv"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="swc"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:57 $"/>
		<language type="sw"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncContainer" >

  <TextView
      style="@style/SyncTop"
      android:text="@string/sync_title_connect" />

  <ScrollView
    style="@style/SyncMiddle" >

	<LinearLayout
      style="@style/SyncLayout.Vertical" >

	  <TextView
	    style="@style/SyncTextItem"
	    android:text="@string/sync_subtitle_account"
	    android:paddingBottom="@dimen/SyncSpace" />

	  <EditText android:id="@+id/usernameInput"
	    style="@style/SyncEditItem"
      android:state_focused="true"
	    android:hint="@string/sync_input_username" />

	  <EditText android:id="@+id/passwordInput"
	    style="@style/SyncEditItem"
	    android:inputType="textPassword"
	    android:hint="@string/sync_input_password" />

	  <EditText android:id="@+id/keyInput"
	    style="@style/SyncEditItem"
	    android:hint="@string/sync_input_key" />

	  <TextView android:id="@+id/cred_error"
	    style="@style/SyncTextError"
	    android:text="@string/sync_invalidcreds_label" />

	  <CheckBox android:id="@+id/checkbox_server"
	    android:layout_width="wrap_content"
	    android:layout_height="wrap_content"
	    android:layout_gravity="left"
	    android:text="@string/sync_checkbox_server" />

	  <EditText android:id="@+id/serverInput"
	    style="@style/SyncEditItem"
	    android:visibility="gone"
	    android:hint="@string/sync_input_server" />

	  <TextView android:id="@+id/server_error"
	    style="@style/SyncTextError"
	    android:text="@string/sync_invalidserver_label" />

	</LinearLayout>
  </ScrollView>

  <LinearLayout
    style="@style/SyncBottomContainer" >

    <LinearLayout
      style="@style/SyncBottom" >
      <Button
        android:id="@+id/accountCancelButton"
        style="@style/SyncButton"
        android:onClick="cancelClickHandler"
        android:text="@string/sync_button_cancel" />

      <Button
        style="@style/SyncButton"
        android:id="@+id/accountConnectButton"
        android:onClick="connectClickHandler"
        android:clickable="false"
        android:enabled="false"
        android:text="@string/sync_button_connect" />
    </LinearLayout>

  </LinearLayout>
</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<account-authenticator xmlns:android="http://schemas.android.com/apk/res/android"
    android:accountType="@string/moz_android_shared_account_type"
    android:icon="@drawable/icon"
    android:smallIcon="@drawable/icon"
    android:label="@string/sync_account_label"
    android:accountPreferences="@xml/sync_options" />
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:gravity="center_vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:orientation="horizontal"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dp"
        android:layout_marginRight="10dip" />

    <TextView
        android:id="@+id/client_name"
        android:layout_gravity="center"
        android:layout_width="0dp"
        android:layout_weight="0.5"
        android:layout_height="wrap_content" />

    <CheckBox
        android:id="@+id/check"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_marginLeft="10dip" />

</LinearLayout>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
  <PreferenceCategory
    android:title="@string/sync_settings_options" />
  <PreferenceScreen
    android:key="sync_options"
    android:title="@string/sync_title_pair"
    android:summary="@string/sync_settings_summary_pair">
    <intent
      android:action="android.intent.action.MAIN"
      android:targetPackage="@string/android_package_name"
      android:targetClass="org.mozilla.gecko.sync.setup.activities.SetupSyncActivity">
      <extra
        android:name="isSetup"
        android:value="false" />
    </intent>
  </PreferenceScreen>
  <PreferenceScreen
    android:key="sync_configure_engines"
    android:title="@string/sync_configure_engines_title">
    <intent
      android:action="android.intent.action.MAIN"
      android:targetPackage="@string/android_package_name"
      android:targetClass="org.mozilla.gecko.sync.config.activities.SelectEnginesActivity">
    </intent>
  </PreferenceScreen>
</PreferenceScreen>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android">
  <solid android:color="#FFF" />
  <stroke android:width="1dp" android:color="#000" />
  <padding
    android:left="1dp"
    android:top="1dp"
    android:right="1dp"
    android:bottom="1dp" />
</shape>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncContainer" >

  <TextView
      style="@style/SyncTop"
      android:text="@string/sync_title_redirect_to_set_up_sync" />

  <ScrollView
    style="@style/SyncMiddle" >

    <TextView
      style="@style/SyncTextItem"
      android:text="@string/sync_text_redirect_to_set_up_sync" />
  </ScrollView>

  <LinearLayout
    style="@style/SyncBottomContainer" >

    <LinearLayout
      style="@style/SyncBottom" >

      <Button
        style="@style/SyncButton"
        android:onClick="redirectToSetupHandler"
        android:text="@string/sync_button_set_up_sync" />
      <Button
        style="@style/SyncButton"
        android:onClick="cancelClickHandler"
        android:text="@string/sync_button_cancel" />
    </LinearLayout>

  </LinearLayout>
</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncContainer" >

  <TextView
      style="@style/SyncTop"
      android:text="@string/sync_title_send_tab" />

  <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="@dimen/SyncSpace" >

    <TextView
      android:id="@+id/title"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:textAppearance="?android:attr/textAppearanceMedium"
      android:text="@string/sync_title_send_tab" />
    <TextView
      android:id="@+id/uri"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:textAppearance="?android:attr/textAppearanceSmall"
      android:text="@string/sync_title_send_tab" />
  </LinearLayout>

  <ListView
    android:id="@+id/device_list"
    style="@style/SyncMiddle"
    android:padding="0dp" >
  </ListView>

  <LinearLayout
    style="@style/SyncBottomContainer" >

    <LinearLayout
      style="@style/SyncBottom" >

      <Button
        style="@style/SyncButton"
        android:id="@+id/send_button"
        android:onClick="sendClickHandler"
        android:clickable="false"
        android:enabled="false"
        android:text="@string/sync_button_send" />
    </LinearLayout>

  </LinearLayout>
</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncContainer" >

  <TextView
    style="@style/SyncTop"
    android:text="@string/sync_title_fail" />

  <ScrollView
    style="@style/SyncMiddle" >

      <LinearLayout
        style="@style/SyncLayout.Vertical" >
        <TextView android:id="@+id/failure_subtitle1"
          style="@style/SyncTextItem"
          android:paddingBottom="@dimen/SyncSpace"
          android:text="@string/sync_subtitle_fail" />

        <TextView android:id="@+id/failure_subtitle2"
          style="@style/SyncTextItem"
          android:text="@string/sync_subtitle_failmultiple" />
      </LinearLayout>
    </ScrollView>

  <LinearLayout
    style="@style/SyncBottomContainer" >

    <LinearLayout
      style="@style/SyncBottom" >

      <Button
        style="@style/SyncButton"
        android:onClick="tryAgainClickHandler"
        android:text="@string/sync_button_tryagain" />

      <Button
        style="@style/SyncButton"
        android:onClick="manualClickHandler"
        android:text="@string/sync_button_manual" />

       <Button
        style="@style/SyncButton"
        android:onClick="cancelClickHandler"
        android:text="@string/sync_button_cancel" />
    </LinearLayout>

  </LinearLayout>
</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncContainer" >

  <TextView
    style="@style/SyncTop"
    android:text="@string/sync_title_connect" />

  <ScrollView
    style="@style/SyncMiddle" >

    <LinearLayout
      style="@style/SyncLayout.Vertical" >

      <ProgressBar
        android:id="@+id/waiting_content1"
        style="@style/Widget.ProgressBar.Horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:indeterminateOnly="true"
        android:padding="@dimen/SyncSpace" />

      <TextView
        style="@style/SyncTextItem"
        android:gravity="center"
        android:text="@string/sync_jpake_subtitle_waiting" />
    </LinearLayout>
  </ScrollView>

  <LinearLayout
    style="@style/SyncBottomContainer">

    <LinearLayout
      style="@style/SyncBottom">

      <Button
        style="@style/SyncButton"
        android:onClick="cancelClickHandler"
        android:text="@string/sync_button_cancel" />
    </LinearLayout>

  </LinearLayout>
</LinearLayout>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncContainer" >

  <TextView
    style="@style/SyncTop"
    android:text="@string/sync_title_fail" />

  <ScrollView
    style="@style/SyncMiddle" >

    <TextView
      style="@style/SyncTextItem"
      android:gravity="center"
      android:text="@string/sync_subtitle_nointernet" />
  </ScrollView>

  <LinearLayout
    style="@style/SyncBottomContainer" >

    <LinearLayout
      style="@style/SyncBottom" >

      <Button
        style="@style/SyncButton"
        android:onClick="cancelClickHandler"
        android:text="@string/sync_button_ok" />
    </LinearLayout>

  </LinearLayout>
</LinearLayout>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncContainer" >

  <TextView
    style="@style/SyncTop"
    android:text="@string/sync_title_pair" />

  <ScrollView
    style="@style/SyncMiddle" >

    <LinearLayout
      style="@style/SyncLayout.Vertical"
      android:gravity="center" >
      <TextView
        android:id="@+id/setup_subtitle"
        style="@style/SyncTextItem"
        android:text="@string/sync_subtitle_pair" />

      <TextView
        style="@style/SyncLinkItem"
        android:paddingBottom="@dimen/SyncSpace"
        android:onClick="showClickHandler"
        android:text="@string/sync_link_show" />

      <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingBottom="@dimen/SyncSpace"
        android:gravity="center"
        android:orientation="vertical" >

        <EditText
          android:id="@+id/pair_row1"
          style="@style/SyncEditPin"
          android:state_focused="true" />
        <EditText
          android:id="@+id/pair_row2"
          style="@style/SyncEditPin" />
        <EditText
          android:id="@+id/pair_row3"
          style="@style/SyncEditPin"
          android:imeOptions="actionDone|flagNoExtractUi" />
      </LinearLayout>

      <LinearLayout
        android:id="@+id/pair_error"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingBottom="@dimen/SyncSpace"
        android:gravity="center"
        android:orientation="horizontal"
        android:visibility="invisible" >

        <TextView
          style="@style/SyncTextError"
          android:text="@string/sync_pair_tryagain"
          android:textSize="10dp" />
      </LinearLayout>
    </LinearLayout>
  </ScrollView>

  <LinearLayout
    style="@style/SyncBottomContainer" >

    <LinearLayout
      style="@style/SyncBottom"
      android:orientation="horizontal" >

      <Button
        style="@style/SyncButton"
        android:onClick="cancelClickHandler"
        android:text="@string/sync_button_cancel" />

      <Button
        android:id="@+id/pair_button_connect"
        style="@style/SyncButton"
        android:onClick="connectClickHandler"
        android:clickable="false"
        android:enabled="false"
        android:text="@string/sync_button_connect" />
    </LinearLayout>

  </LinearLayout>
</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncContainer" >

	<TextView
		style="@style/SyncTop"
		android:text="@string/sync_title_success" />

	<ScrollView
		style="@style/SyncMiddle" >

		<TextView
			android:id="@+id/setup_success_subtitle"
			style="@style/SyncTextItem"
			android:layout_width="wrap_content"
			android:layout_height="wrap_content"
			android:gravity="left"
			android:text="@string/sync_subtitle_success" />
	</ScrollView>

  <LinearLayout
    style="@style/SyncBottomContainer" >

    <LinearLayout
      style="@style/SyncBottom" >

      <Button
        style="@style/SyncButton"
        android:onClick="settingsClickHandler"
        android:text="@string/sync_settings" />

      <Button
        style="@style/SyncButton"
        android:onClick="launchBrowser"
        android:text="@string/brand_short_name" />
    </LinearLayout>

  </LinearLayout>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncLayout" >
  <WebView android:id="@+id/web_engine"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  style="@style/SyncContainer" >

  <TextView
      style="@style/SyncTop"
      android:text="@string/sync_title_connect" />

  <ScrollView
    style="@style/SyncMiddle"
    android:padding="@dimen/SyncSpace" >

    <LinearLayout
        style="@style/SyncLayout.Vertical" >

      <TextView
        android:id="@+id/setup_header"
        style="@style/SyncTextItem"
        android:gravity="left"
        android:paddingBottom="@dimen/SyncSpace"
        android:text="@string/sync_subtitle_header"
        android:textStyle="bold"
        android:focusable="true"
        android:nextFocusDown="@+id/setup_subtitle" />

      <TextView
        android:id="@id/setup_subtitle"
        style="@style/SyncTextItem"
        android:gravity="left"
        android:text="@string/sync_subtitle_connect"
        android:focusable="true"
        android:nextFocusDown="@+id/setup_showme"
        android:nextFocusUp="@id/setup_header" />

      <TextView
        android:id="@id/setup_showme"
        style="@style/SyncLinkItem"
        android:paddingBottom="@dimen/SyncSpace"
        android:onClick="showClickHandler"
        android:text="@string/sync_link_show"
        android:focusable="true"
        android:nextFocusDown="@+id/text_pin1"
        android:nextFocusUp="@id/setup_subtitle" />

      <LinearLayout
        style="@style/SyncLayout"
        android:layout_height="wrap_content"
        android:paddingBottom="@dimen/SyncSpace"
        android:orientation="vertical" >
        <TextView
          android:id="@id/text_pin1"
          style="@style/SyncPinText"
          android:focusable="true"
          android:nextFocusDown="@+id/text_pin2"
          android:nextFocusUp="@id/setup_showme" />
        <TextView
          android:id="@id/text_pin2"
          style="@style/SyncPinText"
          android:focusable="true"
          android:nextFocusDown="@+id/text_pin3"
          android:nextFocusUp="@id/text_pin1" />
        <TextView
          android:id="@id/text_pin3"
          style="@style/SyncPinText"
          android:focusable="true"
          android:nextFocusDown="@+id/link_nodevice"
          android:nextFocusUp="@id/text_pin2" />
      </LinearLayout>
      <TextView
        android:id="@id/link_nodevice"
        style="@style/SyncLinkItem"
        android:gravity="center"
        android:onClick="manualClickHandler"
        android:text="@string/sync_link_advancedsetup"
        android:focusable="true"
        android:nextFocusUp="@id/text_pin3" />
    </LinearLayout>
  </ScrollView>

  <LinearLayout
    style="@style/SyncBottomContainer" >

    <LinearLayout
      style="@style/SyncBottom"
      android:orientation="horizontal" >

      <Button
        style="@style/SyncButton"
        android:onClick="cancelClickHandler"
        android:text="@string/sync_button_cancel" />
    </LinearLayout>

  </LinearLayout>
</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources xmlns:android="http://schemas.android.com/apk/res/android">
  <!-- Top title bar: a text view with the Sync icon to the left. -->
  <style name="SyncTop" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:textAppearance">@android:style/TextAppearance.Holo.Widget.ActionBar.Title</item>
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:gravity">center_vertical|left</item>
    <item name="android:drawableLeft">@drawable/icon</item>
    <item name="android:padding">4dp</item>
    <item name="android:drawablePadding">4dp</item>
  </style>

  <!-- Bottom bar: a horizontal linear layout with buttons in it. -->
  <style name="SyncBottom" parent="@android:style/Holo.Light.ButtonBar">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
  </style>

  <style name="SyncButton" parent="@android:style/Widget.Holo.Light.Button.Small">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_weight">1</item>
    <item name="android:background">?android:attr/selectableItemBackground</item>
  </style>

</resources>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
    android:contentAuthority="@string/content_authority_db_browser"
    android:accountType="@string/moz_android_shared_account_type"
    android:supportsUploading="true"
    android:userVisible="true"
/>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-1-block.xml"/>
  <title>CSS Namespaces Test Suite: @namespace case-insensitivity</title>
  <style>
   @NAmespace x "http://www.w3.org/1999/xhtml";
   x|p { background: lime }
  </style>
 </head>
 <body>
  <p>This sentence should have a green background.</p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-1-block.xml"/>
  <title>CSS Namespaces Test Suite: @namespace syntax with escapes</title>
  <style>
   @\N\000041 mes\pac\65  x "http://www.w3.org/1999/xhtml";
   x|p { background: lime }
  </style>
 </head>
 <body>
  <p>This sentence should have a green background.</p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-5.xml"/>
  <title>CSS Namespaces Test Suite: @namespace default namespace syntax</title>
  <style>
   *|test { background:red }
  </style>
  <style>
   @namespace url(test-a);
   test { background:lime }
  </style>
  <style>
   @namespace url('test-b');
   test { background:lime }
  </style>
  <style>
   @namespace url("test-c");
   test { background:lime }
  </style>
  <style>
   @namespace 'test-d';
   test { background:lime }
  </style>
  <style>
   @namespace "test-e";
   test { background:lime }
  </style>
 </head>
 <body>
  <p><test xmlns="test-a">This sentence should have a green background.</test></p>
  <p><test xmlns="test-b">This sentence should have a green background.</test></p>
  <p><test xmlns="test-c">This sentence should have a green background.</test></p>
  <p><test xmlns="test-d">This sentence should have a green background.</test></p>
  <p><test xmlns="test-e">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-1.xml"/>
  <title>CSS Namespaces Test Suite: @namespace url() with escape</title>
  <style>
   @namespace u\00072l("test");
   *|test { background:red }
   test { background: lime }
  </style>
 </head>
 <body>
  <p><test xmlns="test">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-5.xml"/>
  <title>CSS Namespaces Test Suite: @namespace string and url() syntax</title>
  <style>
   test { background:red }
  </style>
  <style>
   @namespace a url(test-a);
   @namespace b url('test-b');
   @namespace c url("test-c");
   @namespace d 'test-d';
   @namespace e "test-e";
   a|test, b|test, c|test, d|test, e|test { background:lime }
  </style>
 </head>
 <body>
  <p><test xmlns="test-a">This sentence should have a green background.</test></p>
  <p><test xmlns="test-b">This sentence should have a green background.</test></p>
  <p><test xmlns="test-c">This sentence should have a green background.</test></p>
  <p><test xmlns="test-d">This sentence should have a green background.</test></p>
  <p><test xmlns="test-e">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-1.xml"/>
  <meta name="flags" content="invalid"/>
  <title>CSS Namespaces Test Suite: invalid ordering of @namespace and @import</title>
  <style>
   @namespace x u\00072l("test");
   @import url("support/fail.css");
   @namespace url("test2");
   x|test { background:lime }
   test { background:red }
  </style>
 </head>
 <body>
  <p><test xmlns="test">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-1.xml"/>
  <title>CSS Namespaces Test Suite: @namespace and @charset</title>
  <link rel="stylesheet" href="support/syntax-007.css"/>
 </head>
 <body>
  <p><test xmlns="test">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-2.xml"/>
  <title>CSS Namespaces Test Suite: escapes in prefix</title>
  <style>
   @namespace \72x url("test");
   t { background:red }
   r\78|t { background:lime }
  </style>
  <style>
   @namespace \032  url("test"); /* two spaces, see CSS 2.1, 4.1.3 */
   t2 { background:red }
   \32|t2 { background:lime }
  </style>
 </head>
 <body>
  <p><t xmlns="test">This sentence should have a green background.</t></p>
  <p><t2 xmlns="test">This sentence should have a green background.</t2></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-1.xml"/>
  <title>CSS Namespaces Test Suite: escaped vertical bar in qualified name</title>
  <style>
   @namespace x "test";
   test { background:red }
   x|test { background:lime }
   x\00007Ctest { background:red }
  </style>
 </head>
 <body>
  <p><test xmlns="test">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-3.xml"/>
  <meta name="flags" content="invalid"/>
  <title>CSS Namespaces Test Suite: duplicate @namespace declarations</title>
  <style>
   @namespace "1";
   @namespace dummy "yummy";
   @namespace "2";
   *|t { background:lime }
   t { background:red }
  </style>
  <style>
   @namespace "1";
   @namespace dummy "yummy";
   @namespace "2";
   *|t2 { background:red }
   t2 { background:lime }
  </style>
  <style>
   @namespace x "1";
   @namespace dummy "yummy";
   @namespace x "2";
   *|t3 { background:red }
   x|t3 { background:lime }
  </style>
 </head>
 <body>
  <p><t xmlns="1">This sentence should have a green background.</t></p>
  <p><t2 xmlns="2">This sentence should have a green background.</t2></p>
  <p><t3 xmlns="2">This sentence should have a green background.</t3></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-6.xml"/>
  <title>CSS Namespaces Test Suite: string comparison (no URI resolving)</title>
  <style>
   @namespace url("http://example.com/");
   *|t { background:lime }
   t { background:red }
  </style>
  <style>
   @namespace url("http://example.com/");
   *|t2 { background:lime }
   t2 { background:red }
  </style>
  <style>
   @namespace url("HTTP://example.com/");
   *|t3 { background:lime }
   t3 { background:red }
  </style>
  <style>
   @namespace url("http://example.COM/");
   *|t4 { background:lime }
   t4 { background:red }
  </style>
  <style>
   @namespace url("%41");
   *|t5 { background:lime }
   t5 { background:red }
  </style>
  <style>
   @namespace url("A");
   *|t6 { background:lime }
   t6 { background:red }
  </style>
 </head>
 <body>
  <p><t xmlns="HTTP://example.com/">This sentence should have a green background.</t></p>
  <p><t2 xmlns="http://example.COM/">This sentence should have a green background.</t2></p>
  <p><t3 xmlns="http://example.com/">This sentence should have a green background.</t3></p>
  <p><t4 xmlns="http://example.com/">This sentence should have a green background.</t4></p>
  <p><t5 xmlns="A">This sentence should have a green background.</t5></p>
  <p><t6 xmlns="%41">This sentence should have a green background.</t6></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-3.xml"/>
  <title>CSS Namespaces Test Suite: whitespace and comment handling</title>
  <style>
   test { background:red }
  </style>
  <style>
   @namespace/* test */
   a
   url(
test-a );

   @namespace/**/b/**/url(	'test-b'
);

   @namespace	c	url("test-c"	
);

   a|test, b|test, c|test { background:lime }
  </style>
 </head>
 <body>
  <p><test xmlns="test-a">This sentence should have a green background.</test></p>
  <p><test xmlns="test-b">This sentence should have a green background.</test></p>
  <p><test xmlns="test-c">This sentence should have a green background.</test></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="author" title="Elika J. Etemad" href="http://fantasai.inkedblade.net/contact"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-5.xml"/>
  <meta name="flags" content="invalid"/>
  <title>CSS Namespaces Test Suite: @namespace error handling</title>
  <style>
   t, t2, t3, t4, t5 { background:red }
  </style>
  <style>
   @namespace "test" {}
   t { background:lime }
  </style>
  <style id="a">@namespace x "test</style>
  <script>
   document.getElementById("a").sheet.insertRule("x|t2 {background:lime }", 1)
  </script>
  <style>
   @namespace "fail;
   ; t3 { background:lime }
  </style>
  <style>
   @namespace url('fail);
     t4 { background:red !important; }
   );
   t4 { background:lime }
  </style>
  <style>
   @namespace url(test);
   @namespace url('test' x);
   t5 { background:lime }
  </style>
 </head>
 <body>
  <p><t>This sentence should have a green background.</t></p>
  <p><t2 xmlns="test">This sentence should have a green background.</t2></p>
  <p><t3>This sentence should have a green background.</t3></p>
  <p><t4>This sentence should have a green background.</t4></p>
  <p><t5 xmlns="test">This sentence should have a green background.</t5></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-3.xml"/>
  <meta name="flags" content="invalid"/>
  <title>CSS Namespaces Test Suite: @namespace and invalid at-rules</title>
  <style>
   t, t2, t3 { background:red }
  </style>
  <style>
   @import x {}
   @namespace x "test";
   x|t { background:lime }
  </style>
  <style>
   @namespace x "test-top";
   @foobar this is funny { not:sure }
   @namespace "test";
   @foobar this is funner;
   t2 { background:lime }
   x|t3 { background:lime }
   </style>
 </head>
 <body>
  <p><t xmlns="test">This sentence should have a green background.</t></p>
  <p><t2 xmlns="test">This sentence should have a green background.</t2></p>
  <p><t3 xmlns="test-top">This sentence should have a green background.</t3></p>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <link rel="author" title="Anne van Kesteren" href="http://annevankesteren.nl/"/>
  <link rel="author" title="Opera Software ASA" href="http://opera.com/"/>
  <link rel="help" href="http://www.w3.org/TR/css3-namespace/#syntax"/>
  <link rel="match" href="reftest/ref-lime-1.xml"/>
  <title>CSS Namespaces Test Suite: invalid URI</title>
  <style>
   @namespace x url("test");
   @namespace x url("}x&lt; >x{");
   t { background:lime }
   x|t { background:red }
  </style>
 </head>
 <body>
  <p><t xmlns="test">This sentence should have a green background.</t></p>
 </body>
</html>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="tabBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="tab-base">
    <resources>
      <stylesheet src="chrome://global/skin/tabbox.css"/>
    </resources>
  </binding>

  <binding id="tabbox"
           extends="chrome://global/content/bindings/tabbox.xml#tab-base">
    <implementation implements="nsIDOMEventListener">
      <property name="handleCtrlTab">
        <setter>
        <![CDATA[
          this.setAttribute("handleCtrlTab", val);
          return val;
        ]]>
        </setter>
        <getter>
        <![CDATA[
          return (this.getAttribute("handleCtrlTab") != "false");
        ]]>
        </getter>
      </property>
      
      <property name="handleCtrlPageUpDown">
        <setter>
        <![CDATA[
          this.setAttribute("handleCtrlPageUpDown", val);
          return val;
        ]]>
        </setter>
        <getter>
        <![CDATA[
          return (this.getAttribute("handleCtrlPageUpDown") != "false");
        ]]>
        </getter>
      </property>

      <field name="_handleMetaAltArrows" readonly="true">
#ifdef XP_MACOSX
        true
#else
        false
#endif
      </field>

      <!-- _tabs and _tabpanels are deprecated, they exist only for
           backwards compatibility. -->
      <property name="_tabs" readonly="true" onget="return this.tabs;"/>
      <property name="_tabpanels" readonly="true" onget="return this.tabpanels;"/>

      <property name="tabs" readonly="true">
        <getter>
        <![CDATA[
          return this.getElementsByTagNameNS(
              "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",
              "tabs").item(0);
        ]]>
        </getter>
      </property>

      <property name="tabpanels" readonly="true">
        <getter>
        <![CDATA[
          return this.getElementsByTagNameNS(
              "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",
              "tabpanels").item(0);
        ]]>
        </getter>
      </property>
      
      <property name="selectedIndex">
        <getter>
        <![CDATA[
          var tabs = this.tabs;
          return tabs ? tabs.selectedIndex : -1;
        ]]>
        </getter>

        <setter>
        <![CDATA[
          var tabs = this.tabs;
          if (tabs)
            tabs.selectedIndex = val;
          this.setAttribute("selectedIndex", val);
          return val;
        ]]>
        </setter>
      </property>

      <property name="selectedTab">
        <getter>
        <![CDATA[
          var tabs = this.tabs;
          return tabs && tabs.selectedItem;
        ]]>
        </getter>

        <setter>
        <![CDATA[
          if (val) {
            var tabs = this.tabs;
            if (tabs)
              tabs.selectedItem = val;
          }
          return val;
        ]]>
        </setter>
      </property>

      <property name="selectedPanel">
        <getter>
        <![CDATA[
          var tabpanels = this.tabpanels;
          return tabpanels && tabpanels.selectedPanel;
        ]]>
        </getter>

        <setter>
        <![CDATA[
          if (val) {
            var tabpanels = this.tabpanels;
            if (tabpanels)
              tabpanels.selectedPanel = val;
          }
          return val;
        ]]>
        </setter>
      </property>

      <method name="handleEvent">
        <parameter name="event"/>
        <body>
        <![CDATA[
          if (!event.isTrusted) {
            // Don't let untrusted events mess with tabs.
            return;
          }

          // Don't check if the event was already consumed because tab
          // navigation should always work for better user experience.

          switch (event.keyCode) {
            case event.DOM_VK_TAB:
              if (event.ctrlKey && !event.altKey && !event.metaKey)
                if (this.tabs && this.handleCtrlTab) {
                  this.tabs.advanceSelectedTab(event.shiftKey ? -1 : 1, true);
                  event.preventDefault();
                }
              break;
            case event.DOM_VK_PAGE_UP:
              if (event.ctrlKey && !event.shiftKey && !event.altKey && !event.metaKey)
                if (this.tabs && this.handleCtrlPageUpDown) {
                  this.tabs.advanceSelectedTab(-1, true);
                  event.preventDefault();
                }
              break;
            case event.DOM_VK_PAGE_DOWN:
              if (event.ctrlKey && !event.shiftKey && !event.altKey && !event.metaKey)
                if (this.tabs && this.handleCtrlPageUpDown) {
                  this.tabs.advanceSelectedTab(1, true);
                  event.preventDefault();
                }
              break;
            case event.DOM_VK_LEFT:
              if (event.metaKey && event.altKey && !event.shiftKey && !event.ctrlKey)
                if (this.tabs && this._handleMetaAltArrows) {
                  var offset = window.getComputedStyle(this, "")
                                     .direction == "ltr" ? -1 : 1;
                  this.tabs.advanceSelectedTab(offset, true);
                  event.preventDefault();
                }
              break;
            case event.DOM_VK_RIGHT:
              if (event.metaKey && event.altKey && !event.shiftKey && !event.ctrlKey)
                if (this.tabs && this._handleMetaAltArrows) {
                  var offset = window.getComputedStyle(this, "")
                                     .direction == "ltr" ? 1 : -1;
                  this.tabs.advanceSelectedTab(offset, true);
                  event.preventDefault();
                }
              break;
          }
        ]]>
        </body>
      </method>

      <field name="_eventNode">this</field>

      <property name="eventNode" onget="return this._eventNode;">
        <setter>
          <![CDATA[
            if (val != this._eventNode) {
              const nsIEventListenerService =
                Components.interfaces.nsIEventListenerService;
              let els = Components.classes["@mozilla.org/eventlistenerservice;1"]
                                  .getService(nsIEventListenerService);
              els.addSystemEventListener(val, "keydown", this, false);
              els.removeSystemEventListener(this._eventNode, "keydown", this, false);
              this._eventNode = val;
            }
            return val;
          ]]>
        </setter>
      </property>

      <constructor>
        switch (this.getAttribute("eventnode")) {
          case "parent": this._eventNode = this.parentNode; break;
          case "window": this._eventNode = window; break;
          case "document": this._eventNode = document; break;
        }
        const nsIEventListenerService =
          Components.interfaces.nsIEventListenerService;
        let els = Components.classes["@mozilla.org/eventlistenerservice;1"]
                            .getService(nsIEventListenerService);
        els.addSystemEventListener(this._eventNode, "keydown", this, false);
      </constructor>

      <destructor>
        const nsIEventListenerService =
          Components.interfaces.nsIEventListenerService;
        let els = Components.classes["@mozilla.org/eventlistenerservice;1"]
                            .getService(nsIEventListenerService);
        els.removeSystemEventListener(this._eventNode, "keydown", this, false);
      </destructor>
    </implementation>
  </binding>

  <binding id="tabs" role="xul:tabs"
           extends="chrome://global/content/bindings/general.xml#basecontrol">
    <resources>
      <stylesheet src="chrome://global/skin/tabbox.css"/>
    </resources>

    <content>
      <xul:spacer class="tabs-left"/>
      <children/>
      <xul:spacer class="tabs-right" flex="1"/>
    </content>
    
    <implementation implements="nsIDOMXULSelectControlElement, nsIDOMXULRelatedElement">
      <constructor>
      <![CDATA[
        // first and last tabs need to be able to have unique styles
        // and also need to select first tab on startup.
        if (this.firstChild)
          this.firstChild.setAttribute("first-tab", "true");
        if (this.lastChild)
          this.lastChild.setAttribute("last-tab", "true");

        if (!this.hasAttribute("orient"))
          this.setAttribute("orient", "horizontal");

        if (this.tabbox && this.tabbox.hasAttribute("selectedIndex")) {
          let selectedIndex = parseInt(this.tabbox.getAttribute("selectedIndex"));
          this.selectedIndex = selectedIndex > 0 ? selectedIndex : 0;
          return;
        }

        var children = this.childNodes;
        var length = children.length;
        for (var i = 0; i < length; i++) {
          if (children[i].getAttribute("selected") == "true") {
            this.selectedIndex = i;
            return;
          }
        }

        var value = this.value;
        if (value)
          this.value = value;
        else
          this.selectedIndex = 0;
      ]]>
      </constructor>

      <!-- nsIDOMXULRelatedElement -->
      <method name="getRelatedElement">
        <parameter name="aTabElm"/>
        <body>
        <![CDATA[
          if (!aTabElm)
            return null;

          let tabboxElm = this.tabbox;
          if (!tabboxElm)
            return null;

          let tabpanelsElm = tabboxElm.tabpanels;
          if (!tabpanelsElm)
            return null;

          // Get linked tab panel by 'linkedpanel' attribute on the given tab
          // element.
          let linkedPanelElm = null;

          let linkedPanelId = aTabElm.linkedPanel;
          if (linkedPanelId) {
            let ownerDoc = this.ownerDocument;

            // XXX bug 565858: if XUL tab element is anonymous element then
            // suppose linked tab panel is hosted within the same XBL binding
            // and search it by ID attribute inside an anonymous content of
            // the binding. This is not robust assumption since tab elements may
            // live outside a tabbox element so that for example tab elements
            // can be explicit content but tab panels can be anonymous.

            let bindingParent = ownerDoc.getBindingParent(aTabElm);
            if (bindingParent)
              return ownerDoc.getAnonymousElementByAttribute(bindingParent,
                                                             "id",
                                                             linkedPanelId);

            return ownerDoc.getElementById(linkedPanelId);
          }

          // otherwise linked tabpanel element has the same index as the given
          // tab element.
          let tabElmIdx = this.getIndexOfItem(aTabElm);
          return tabpanelsElm.childNodes[tabElmIdx];
        ]]>
        </body>
      </method>

      <!-- nsIDOMXULSelectControlElement -->
      <property name="itemCount" readonly="true"
                onget="return this.childNodes.length"/>

      <property name="value" onget="return this.getAttribute('value');">
        <setter>
          <![CDATA[
            this.setAttribute("value", val);
            var children = this.childNodes;
            for (var c = children.length - 1; c >= 0; c--) {
              if (children[c].value == val) {
                this.selectedIndex = c;
                break;
              }
            }
            return val;
          ]]>
        </setter>
      </property>

      <field name="tabbox" readonly="true"><![CDATA[
        var parent = this.parentNode;
        while (parent) {
          if (parent.localName == "tabbox")
            break;
          parent = parent.parentNode;
        }
        parent;
      ]]></field>

      <!-- _tabbox is deprecated, it exists only for backwards compatibility. -->
      <field name="_tabbox" readonly="true"><![CDATA[
        this.tabbox;
      ]]></field>

      <property name="selectedIndex">
        <getter>
        <![CDATA[
          const tabs = this.childNodes;
          for (var i = 0; i < tabs.length; i++) {
            if (tabs[i].selected)
              return i;
          }
          return -1;
        ]]>
        </getter>
        
        <setter>
        <![CDATA[
          var tab = this.getItemAtIndex(val);
          if (tab) {
            var alreadySelected = tab.selected;

            Array.forEach(this.childNodes, function (aTab) {
              if (aTab.selected && aTab != tab)
                aTab._selected = false;
            });
            tab._selected = true;

            this.setAttribute("value", tab.value);

            let linkedPanel = this.getRelatedElement(tab);
            if (linkedPanel) {
              this.tabbox.setAttribute("selectedIndex", val);

              // This will cause an onselect event to fire for the tabpanel
              // element.
              this.tabbox.tabpanels.selectedPanel = linkedPanel;
            }

            if (!alreadySelected) {
              // Fire an onselect event for the tabs element.
              var event = document.createEvent('Events');
              event.initEvent('select', true, true);
              this.dispatchEvent(event);
            }
          }
          return val;
        ]]>
        </setter>
      </property>

      <property name="selectedItem">
        <getter>
        <![CDATA[
          const tabs = this.childNodes;
          for (var i = 0; i < tabs.length; i++) {
            if (tabs[i].selected)
              return tabs[i];
          }
          return null;
        ]]>
        </getter>

        <setter>
        <![CDATA[
          if (val && !val.selected)
            // The selectedIndex setter ignores invalid values
            // such as -1 if |val| isn't one of our child nodes.
            this.selectedIndex = this.getIndexOfItem(val);
          return val;
        ]]>
        </setter>
      </property>

      <method name="getIndexOfItem">
        <parameter name="item"/>
        <body>
        <![CDATA[
          return Array.indexOf(this.childNodes, item);
        ]]>
        </body>
      </method>

      <method name="getItemAtIndex">
        <parameter name="index"/>
        <body>
        <![CDATA[
          return this.childNodes.item(index);
        ]]>
        </body>
      </method>

      <method name="_selectNewTab">
        <parameter name="aNewTab"/>
        <parameter name="aFallbackDir"/>
        <parameter name="aWrap"/>
        <body>
        <![CDATA[
          var requestedTab = aNewTab;
          while (aNewTab.hidden || aNewTab.disabled || !this._canAdvanceToTab(aNewTab)) {
            aNewTab = aFallbackDir == -1 ? aNewTab.previousSibling : aNewTab.nextSibling;
            if (!aNewTab && aWrap)
              aNewTab = aFallbackDir == -1 ? this.childNodes[this.childNodes.length - 1] :
                                             this.childNodes[0];
            if (!aNewTab || aNewTab == requestedTab)
              return;
          }

          var isTabFocused = false;
          try {
            isTabFocused =
              (document.commandDispatcher.focusedElement == this.selectedItem);
          } catch (e) {}
          this.selectedItem = aNewTab;
          if (isTabFocused) {
            aNewTab.focus();
          }
          else if (this.getAttribute("setfocus") != "false") {
            let selectedPanel = this.tabbox.selectedPanel;
            document.commandDispatcher.advanceFocusIntoSubtree(selectedPanel);

            // Make sure that the focus doesn't move outside the tabbox
            if (this.tabbox) {
              try {
                let el = document.commandDispatcher.focusedElement;
                while (el && el != this.tabbox.tabpanels) {
                  if (el == this.tabbox || el == selectedPanel)
                    return;
                  el = el.parentNode;
                }
                aNewTab.focus();
              } catch(e) {
              }
            }
          }
        ]]>
        </body>
      </method>

      <method name="_canAdvanceToTab">
        <parameter name="aTab"/>
        <body>
        <![CDATA[
          return true;
        ]]>
        </body>
      </method>

      <method name="advanceSelectedTab">
        <parameter name="aDir"/>
        <parameter name="aWrap"/>
        <body>
        <![CDATA[
          var startTab = this.selectedItem;
          var next = startTab[aDir == -1 ? "previousSibling" : "nextSibling"];
          if (!next && aWrap) {
            next = aDir == -1 ? this.childNodes[this.childNodes.length - 1] :
                                this.childNodes[0];
          }
          if (next && next != startTab) {
            this._selectNewTab(next, aDir, aWrap);
          }
        ]]>
        </body>
      </method>

      <method name="appendItem">
        <parameter name="label"/>
        <parameter name="value"/>
        <body>
        <![CDATA[
          var XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          var tab = document.createElementNS(XULNS, "tab");
          tab.setAttribute("label", label);
          tab.setAttribute("value", value);
          this.appendChild(tab);
          return tab;
        ]]>
        </body>
      </method>
      
      <method name="insertItemAt">
        <parameter name="index"/>
        <parameter name="label"/>
        <parameter name="value"/>
        <body>
        <![CDATA[
          var XULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          var tab = document.createElementNS(XULNS, "tab");
          tab.setAttribute("label", label);
          tab.setAttribute("value", value);
          var before = this.getItemAtIndex(index);
          if (before)
            this.insertBefore(tab, before);
          else
            this.appendChild(tab);
          return tab;
        ]]>
        </body>
      </method>

      <method name="removeItemAt">
        <parameter name="index"/>
        <body>
        <![CDATA[
          var remove = this.getItemAtIndex(index);
          if (remove)
            this.removeChild(remove);
          return remove;
        ]]>
        </body>
      </method>
    </implementation>

#ifdef MOZ_WIDGET_GTK
    <handlers>
      <handler event="DOMMouseScroll">
      <![CDATA[
        if (event.detail > 0)
          this.advanceSelectedTab(1, false);
        else
          this.advanceSelectedTab(-1, false);

        event.stopPropagation();
      ]]>
      </handler>
    </handlers>
#endif
  </binding>

  <binding id="tabpanels" role="xul:tabpanels"
           extends="chrome://global/content/bindings/tabbox.xml#tab-base">
    <implementation implements="nsIDOMXULRelatedElement">
      <!-- nsIDOMXULRelatedElement -->
      <method name="getRelatedElement">
        <parameter name="aTabPanelElm"/>
        <body>
        <![CDATA[
          if (!aTabPanelElm)
            return null;

          let tabboxElm = this.tabbox;
          if (!tabboxElm)
            return null;

          let tabsElm = tabboxElm.tabs;
          if (!tabsElm)
            return null;

          // Return tab element having 'linkedpanel' attribute equal to the id
          // of the tab panel or the same index as the tab panel element.
          let tabpanelIdx = Array.indexOf(this.childNodes, aTabPanelElm);
          if (tabpanelIdx == -1)
            return null;

          let tabElms = tabsElm.childNodes;
          let tabElmFromIndex = tabElms[tabpanelIdx];

          let tabpanelId = aTabPanelElm.id;
          if (tabpanelId) {
            for (let idx = 0; idx < tabElms.length; idx++) {
              var tabElm = tabElms[idx];
              if (tabElm.linkedPanel == tabpanelId)
                return tabElm;
            }
          }

          return tabElmFromIndex;
        ]]>
        </body>
      </method>

      <!-- public -->
      <field name="tabbox" readonly="true"><![CDATA[
        var parent = this.parentNode;
        while (parent) {
          if (parent.localName == "tabbox")
            break;
          parent = parent.parentNode;
        }
        parent;
      ]]></field>

      <field name="_selectedPanel">this.childNodes.item(this.selectedIndex)</field>

      <property name="selectedIndex">
        <getter>
        <![CDATA[
          var indexStr = this.getAttribute("selectedIndex");
          return indexStr ? parseInt(indexStr) : -1;
        ]]>
        </getter>

        <setter>
        <![CDATA[
          if (val < 0 || val >= this.childNodes.length)
            return val;
          var panel = this._selectedPanel;
          this._selectedPanel = this.childNodes[val];
          this.setAttribute("selectedIndex", val);
          if (this._selectedPanel != panel) {
            var event = document.createEvent("Events");
            event.initEvent("select", true, true);
            this.dispatchEvent(event);
          }
          return val;
        ]]>
        </setter>
      </property>

      <property name="selectedPanel">
        <getter>
          <![CDATA[
            return this._selectedPanel;
          ]]>
        </getter>

        <setter>
          <![CDATA[
            var selectedIndex = -1;
            for (var panel = val; panel != null; panel = panel.previousSibling)
              ++selectedIndex;
            this.selectedIndex = selectedIndex;
            return val;
          ]]>
        </setter>
      </property>
    </implementation>
  </binding>

  <binding id="tab" display="xul:button" role="xul:tab"
           extends="chrome://global/content/bindings/general.xml#control-item">
    <resources>
      <stylesheet src="chrome://global/skin/tabbox.css"/>
    </resources>

    <content>
      <xul:hbox class="tab-middle box-inherit" xbl:inherits="align,dir,pack,orient,selected" flex="1">
        <xul:image class="tab-icon"
                   xbl:inherits="validate,src=image"
                   role="presentation"/>
        <xul:label class="tab-text"
                   xbl:inherits="value=label,accesskey,crop,disabled"
                   flex="1"
                   role="presentation"/>
      </xul:hbox>
    </content>

    <implementation implements="nsIDOMXULSelectControlItemElement">
      <property name="control" readonly="true">
        <getter>
          <![CDATA[
            var parent = this.parentNode;
            if (parent instanceof Components.interfaces.nsIDOMXULSelectControlElement)
              return parent;
            return null;
          ]]>
        </getter>
      </property>

      <property name="selected" readonly="true"
                onget="return this.getAttribute('selected') == 'true';"/>

      <property name="_selected">
        <setter>
          <![CDATA[
          if (val)
            this.setAttribute("selected", "true");
          else
            this.removeAttribute("selected");

          if (this.previousSibling && this.previousSibling.localName == "tab") {
            if (val)
              this.previousSibling.setAttribute("beforeselected", "true");
            else
              this.previousSibling.removeAttribute("beforeselected");
            this.removeAttribute("first-tab");
          }
          else
            this.setAttribute("first-tab", "true");

          if (this.nextSibling && this.nextSibling.localName == "tab") {
            if (val)
              this.nextSibling.setAttribute("afterselected", "true");
            else
              this.nextSibling.removeAttribute("afterselected");
            this.removeAttribute("last-tab");
          }
          else
            this.setAttribute("last-tab", "true");
          return val;
        ]]>
        </setter>
      </property>

      <property name="linkedPanel" onget="return this.getAttribute('linkedpanel')"
                                   onset="this.setAttribute('linkedpanel', val); return val;"/>

      <field name="arrowKeysShouldWrap" readonly="true">
#ifdef XP_MACOSX
        true
#else
        false
#endif
      </field>
      <field name="TelemetryStopwatch" readonly="true">
        let tmp = {};
        Cu.import("resource://gre/modules/TelemetryStopwatch.jsm", tmp);
        tmp.TelemetryStopwatch;
      </field>
    </implementation>

    <handlers>
      <handler event="mousedown" button="0">
      <![CDATA[
        if (this.disabled)
          return;

        if (this != this.parentNode.selectedItem) { // Not selected yet
          let stopwatchid = this.parentNode.getAttribute("stopwatchid");
          if (stopwatchid) {
            this.TelemetryStopwatch.start(stopwatchid);
          }

          // Call this before setting the 'ignorefocus' attribute because this
          // will pass on focus if the formerly selected tab was focused as well.
          this.parentNode._selectNewTab(this);

          var isTabFocused = false;
          try {
            isTabFocused = (document.commandDispatcher.focusedElement == this);
          } catch (e) {}

          // Set '-moz-user-focus' to 'ignore' so that PostHandleEvent() can't
          // focus the tab; we only want tabs to be focusable by the mouse if
          // they are already focused. After a short timeout we'll reset
          // '-moz-user-focus' so that tabs can be focused by keyboard again.
          if (!isTabFocused) {
            this.setAttribute("ignorefocus", "true");
            setTimeout(function (tab) tab.removeAttribute("ignorefocus"), 0, this);
          }

          if (stopwatchid) {
            this.TelemetryStopwatch.finish(stopwatchid);
          }
        }
        // Otherwise this tab is already selected and we will fall
        // through to mousedown behavior which sets focus on the current tab,
        // Only a click on an already selected tab should focus the tab itself.
      ]]>
      </handler>

      <handler event="keydown" keycode="VK_LEFT" group="system" preventdefault="true">
      <![CDATA[
        var direction = window.getComputedStyle(this.parentNode, null).direction;
        this.parentNode.advanceSelectedTab(direction == 'ltr' ? -1 : 1, this.arrowKeysShouldWrap);
      ]]>
      </handler>

      <handler event="keydown" keycode="VK_RIGHT" group="system" preventdefault="true">
      <![CDATA[
        var direction = window.getComputedStyle(this.parentNode, null).direction;
        this.parentNode.advanceSelectedTab(direction == 'ltr' ? 1 : -1, this.arrowKeysShouldWrap);
      ]]>
      </handler>

      <handler event="keydown" keycode="VK_UP" group="system" preventdefault="true">
      <![CDATA[
        this.parentNode.advanceSelectedTab(-1, this.arrowKeysShouldWrap);
      ]]>
      </handler>

      <handler event="keydown" keycode="VK_DOWN" group="system" preventdefault="true">
      <![CDATA[
        this.parentNode.advanceSelectedTab(1, this.arrowKeysShouldWrap);
      ]]>
      </handler>

      <handler event="keydown" keycode="VK_HOME" group="system" preventdefault="true">
      <![CDATA[
        this.parentNode._selectNewTab(this.parentNode.childNodes[0]);
      ]]>
      </handler>

      <handler event="keydown" keycode="VK_END" group="system" preventdefault="true">
      <![CDATA[
        var tabs = this.parentNode.childNodes;
        this.parentNode._selectNewTab(tabs[tabs.length - 1], -1);
      ]]>
      </handler>
    </handlers>
  </binding>

</bindings>

<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
<!ENTITY % tabBrowserDTD SYSTEM "chrome://browser/locale/tabbrowser.dtd" >
%tabBrowserDTD;
]>

<bindings id="tabBrowserBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="tabbrowser">
    <resources>
      <stylesheet src="chrome://browser/content/tabbrowser.css"/>
    </resources>

    <content>
      <xul:stringbundle anonid="tbstringbundle" src="chrome://browser/locale/tabbrowser.properties"/>
      <xul:tabbox anonid="tabbox" class="tabbrowser-tabbox"
                  flex="1" eventnode="document" xbl:inherits="handleCtrlPageUpDown"
                  onselect="if (event.target.localName == 'tabpanels') this.parentNode.updateCurrentBrowser();">
        <xul:tabpanels flex="1" class="plain" selectedIndex="0" anonid="panelcontainer">
          <xul:notificationbox flex="1">
            <xul:hbox flex="1" class="browserSidebarContainer">
              <xul:vbox flex="1" class="browserContainer">
                <xul:stack flex="1" class="browserStack" anonid="browserStack">
                  <xul:browser anonid="initialBrowser" type="content-primary" message="true" messagemanagergroup="browsers"
                               xbl:inherits="tooltip=contenttooltip,contextmenu=contentcontextmenu,autocompletepopup,selectpopup"/>
                </xul:stack>
              </xul:vbox>
            </xul:hbox>
          </xul:notificationbox>
        </xul:tabpanels>
      </xul:tabbox>
      <children/>
    </content>
    <implementation implements="nsIDOMEventListener, nsIMessageListener">

      <property name="tabContextMenu" readonly="true"
                onget="return this.tabContainer.contextMenu;"/>

      <field name="tabContainer" readonly="true">
        document.getElementById(this.getAttribute("tabcontainer"));
      </field>
      <field name="tabs" readonly="true">
        this.tabContainer.childNodes;
      </field>

      <property name="visibleTabs" readonly="true">
        <getter><![CDATA[
          if (!this._visibleTabs)
            this._visibleTabs = Array.filter(this.tabs,
                                             function (tab) !tab.hidden && !tab.closing);
          return this._visibleTabs;
        ]]></getter>
      </property>

      <field name="closingTabsEnum" readonly="true">({ ALL: 0, OTHER: 1, TO_END: 2 });</field>

      <field name="_visibleTabs">null</field>

      <field name="mURIFixup" readonly="true">
        Components.classes["@mozilla.org/docshell/urifixup;1"]
                  .getService(Components.interfaces.nsIURIFixup);
      </field>
      <field name="mFaviconService" readonly="true">
        Components.classes["@mozilla.org/browser/favicon-service;1"]
                  .getService(Components.interfaces.nsIFaviconService);
      </field>
      <field name="_placesAutocomplete" readonly="true">
         Components.classes["@mozilla.org/autocomplete/search;1?name=history"]
                   .getService(Components.interfaces.mozIPlacesAutoComplete);
      </field>
      <field name="_unifiedComplete" readonly="true">
         Components.classes["@mozilla.org/autocomplete/search;1?name=unifiedcomplete"]
                   .getService(Components.interfaces.mozIPlacesAutoComplete);
      </field>
      <field name="PlacesUtils" readonly="true">
        (Components.utils.import("resource://gre/modules/PlacesUtils.jsm", {})).PlacesUtils;
      </field>
      <field name="mTabBox" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "tabbox");
      </field>
      <field name="mPanelContainer" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "panelcontainer");
      </field>
      <field name="mStringBundle">
        document.getAnonymousElementByAttribute(this, "anonid", "tbstringbundle");
      </field>
      <field name="mCurrentTab">
        null
      </field>
      <field name="_lastRelatedTab">
        null
      </field>
      <field name="mCurrentBrowser">
        null
      </field>
      <field name="mProgressListeners">
        []
      </field>
      <field name="mTabsProgressListeners">
        []
      </field>
      <field name="mTabListeners">
        []
      </field>
      <field name="mTabFilters">
        []
      </field>
      <field name="mIsBusy">
        false
      </field>
      <field name="arrowKeysShouldWrap" readonly="true">
        true
      </field>

      <field name="_autoScrollPopup">
        null
      </field>

      <field name="_previewMode">
        false
      </field>

      <field name="_lastFindValue">
        ""
      </field>

      <property name="_numPinnedTabs" readonly="true">
        <getter><![CDATA[
          for (var i = 0; i < this.tabs.length; i++) {
            if (!this.tabs[i].pinned)
              break;
          }
          return i;
        ]]></getter>
      </property>

      <property name="formValidationAnchor" readonly="true">
        <getter><![CDATA[
        if (this.mCurrentTab._formValidationAnchor) {
          return this.mCurrentTab._formValidationAnchor;
        }
        let stack = this.mCurrentBrowser.parentNode;
        // Create an anchor for the form validation popup
        const NS_XUL = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
        let formValidationAnchor = document.createElementNS(NS_XUL, "hbox");
        formValidationAnchor.className = "form-validation-anchor";
        formValidationAnchor.hidden = true;
        stack.appendChild(formValidationAnchor);
        return this.mCurrentTab._formValidationAnchor = formValidationAnchor;
        ]]></getter>
      </property>

      <method name="isFindBarInitialized">
        <parameter name="aTab"/>
        <body><![CDATA[
          return (aTab || this.selectedTab)._findBar != undefined;
        ]]></body>
      </method>

      <method name="getFindBar">
        <parameter name="aTab"/>
        <body><![CDATA[
          if (!aTab)
            aTab = this.selectedTab;

          if (aTab._findBar)
            return aTab._findBar;

          let findBar = document.createElementNS(this.namespaceURI, "findbar");
          let browser = this.getBrowserForTab(aTab);
          let browserContainer = this.getBrowserContainer(browser);
          browserContainer.appendChild(findBar);

          // Force a style flush to ensure that our binding is attached.
          findBar.clientTop;

          findBar.browser = browser;
          findBar._findField.value = this._lastFindValue;

          aTab._findBar = findBar;

          let event = document.createEvent("Events");
          event.initEvent("TabFindInitialized", true, false);
          aTab.dispatchEvent(event);

          return findBar;
        ]]></body>
      </method>

      <method name="getStatusPanel">
        <body><![CDATA[
          if (!this._statusPanel) {
            this._statusPanel = document.createElementNS(this.namespaceURI, "statuspanel");
            this._statusPanel.setAttribute("inactive", "true");
            this._statusPanel.setAttribute("layer", "true");
            this._appendStatusPanel();
          }
          return this._statusPanel;
        ]]></body>
      </method>

      <method name="_appendStatusPanel">
        <body><![CDATA[
          if (this._statusPanel) {
            let browser = this.selectedBrowser;
            let browserContainer = this.getBrowserContainer(browser);
            browserContainer.insertBefore(this._statusPanel, browser.parentNode.nextSibling);
          }
        ]]></body>
      </method>

      <method name="updateWindowResizers">
        <body><![CDATA[
          if (!window.gShowPageResizers)
            return;

          var show = window.windowState == window.STATE_NORMAL;
          for (let i = 0; i < this.browsers.length; i++) {
            this.browsers[i].showWindowResizer = show;
          }
        ]]></body>
      </method>

      <method name="_setCloseKeyState">
        <parameter name="aEnabled"/>
        <body><![CDATA[
          let keyClose = document.getElementById("key_close");
          let closeKeyEnabled = keyClose.getAttribute("disabled") != "true";
          if (closeKeyEnabled == aEnabled)
            return;

          if (aEnabled)
            keyClose.removeAttribute("disabled");
          else
            keyClose.setAttribute("disabled", "true");

          // We also want to remove the keyboard shortcut from the file menu
          // when the shortcut is disabled, and bring it back when it's
          // renabled.
          //
          // Fixing bug 630826 could make that happen automatically.
          // Fixing bug 630830 could avoid the ugly hack below.

          let closeMenuItem = document.getElementById("menu_close");
          let parentPopup = closeMenuItem.parentNode;
          let nextItem = closeMenuItem.nextSibling;
          let clonedItem = closeMenuItem.cloneNode(true);

          parentPopup.removeChild(closeMenuItem);

          if (aEnabled)
            clonedItem.setAttribute("key", "key_close");
          else
            clonedItem.removeAttribute("key");

          parentPopup.insertBefore(clonedItem, nextItem);
        ]]></body>
      </method>

      <method name="pinTab">
        <parameter name="aTab"/>
        <body><![CDATA[
          if (aTab.pinned)
            return;

          if (aTab.hidden)
            this.showTab(aTab);

          this.moveTabTo(aTab, this._numPinnedTabs);
          aTab.setAttribute("pinned", "true");
          this.tabContainer._unlockTabSizing();
          this.tabContainer._positionPinnedTabs();
          this.tabContainer.adjustTabstrip();

          this.getBrowserForTab(aTab).messageManager.sendAsyncMessage("Browser:AppTab", { isAppTab: true })

          if (aTab.selected)
            this._setCloseKeyState(false);

          let event = document.createEvent("Events");
          event.initEvent("TabPinned", true, false);
          aTab.dispatchEvent(event);
        ]]></body>
      </method>

      <method name="unpinTab">
        <parameter name="aTab"/>
        <body><![CDATA[
          if (!aTab.pinned)
            return;

          this.moveTabTo(aTab, this._numPinnedTabs - 1);
          aTab.removeAttribute("pinned");
          aTab.style.MozMarginStart = "";
          this.tabContainer._unlockTabSizing();
          this.tabContainer._positionPinnedTabs();
          this.tabContainer.adjustTabstrip();

          this.getBrowserForTab(aTab).messageManager.sendAsyncMessage("Browser:AppTab", { isAppTab: false })

          if (aTab.selected)
            this._setCloseKeyState(true);

          let event = document.createEvent("Events");
          event.initEvent("TabUnpinned", true, false);
          aTab.dispatchEvent(event);
        ]]></body>
      </method>

      <method name="previewTab">
        <parameter name="aTab"/>
        <parameter name="aCallback"/>
        <body>
          <![CDATA[
            let currentTab = this.selectedTab;
            try {
              // Suppress focus, ownership and selected tab changes
              this._previewMode = true;
              this.selectedTab = aTab;
              aCallback();
            } finally {
              this.selectedTab = currentTab;
              this._previewMode = false;
            }
          ]]>
        </body>
      </method>

      <method name="getBrowserAtIndex">
        <parameter name="aIndex"/>
        <body>
          <![CDATA[
            return this.browsers[aIndex];
          ]]>
        </body>
      </method>

      <method name="getBrowserIndexForDocument">
        <parameter name="aDocument"/>
        <body>
          <![CDATA[
            var tab = this._getTabForContentWindow(aDocument.defaultView);
            return tab ? tab._tPos : -1;
          ]]>
        </body>
      </method>

      <method name="getBrowserForDocument">
        <parameter name="aDocument"/>
        <body>
          <![CDATA[
            var tab = this._getTabForContentWindow(aDocument.defaultView);
            return tab ? tab.linkedBrowser : null;
          ]]>
        </body>
      </method>

      <method name="getBrowserForContentWindow">
        <parameter name="aWindow"/>
        <body>
          <![CDATA[
            var tab = this._getTabForContentWindow(aWindow);
            return tab ? tab.linkedBrowser : null;
          ]]>
        </body>
      </method>

      <method name="_getTabForContentWindow">
        <parameter name="aWindow"/>
        <body>
        <![CDATA[
          // When not using remote browsers, we can take a fast path by getting
          // directly from the content window to the browser without looping
          // over all browsers.
          if (!gMultiProcessBrowser) {
            let browser = aWindow.QueryInterface(Ci.nsIInterfaceRequestor)
                                 .getInterface(Ci.nsIWebNavigation)
                                 .QueryInterface(Ci.nsIDocShell)
                                 .chromeEventHandler;
            return this._getTabForBrowser(browser);
          }

          for (let i = 0; i < this.browsers.length; i++) {
            // NB: We use contentWindowAsCPOW so that this code works both
            // for remote browsers as well. aWindow may be a CPOW.
            if (this.browsers[i].contentWindowAsCPOW == aWindow)
              return this.tabs[i];
          }
          return null;
        ]]>
        </body>
      </method>

      <!-- Binding from browser to tab -->
      <field name="_tabForBrowser" readonly="true">
      <![CDATA[
        new WeakMap();
      ]]>
      </field>

      <method name="_getTabForBrowser">
        <parameter name="aBrowser" />
        <body>
        <![CDATA[
          let Deprecated = Components.utils.import("resource://gre/modules/Deprecated.jsm", {}).Deprecated;
          let text = "_getTabForBrowser` is now deprecated, please use `getTabForBrowser";
          let url = "https://developer.mozilla.org/docs/Mozilla/Tech/XUL/Method/getTabForBrowser";
          Deprecated.warning(text, url);
          return this.getTabForBrowser(aBrowser);
        ]]>
        </body>
      </method>

      <method name="getTabForBrowser">
        <parameter name="aBrowser"/>
        <body>
        <![CDATA[
          return this._tabForBrowser.get(aBrowser);
        ]]>
        </body>
      </method>

      <method name="getNotificationBox">
        <parameter name="aBrowser"/>
        <body>
          <![CDATA[
            return this.getSidebarContainer(aBrowser).parentNode;
          ]]>
        </body>
      </method>

      <method name="getSidebarContainer">
        <parameter name="aBrowser"/>
        <body>
          <![CDATA[
            return this.getBrowserContainer(aBrowser).parentNode;
          ]]>
        </body>
      </method>

      <method name="getBrowserContainer">
        <parameter name="aBrowser"/>
        <body>
          <![CDATA[
            return (aBrowser || this.mCurrentBrowser).parentNode.parentNode;
          ]]>
        </body>
      </method>

      <method name="getTabModalPromptBox">
        <parameter name="aBrowser"/>
        <body>
          <![CDATA[
            const XUL_NS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
            let browser = (aBrowser || this.mCurrentBrowser);
            let stack = browser.parentNode;
            let self = this;

            let promptBox = {
              appendPrompt : function(args, onCloseCallback) {
                let newPrompt = document.createElementNS(XUL_NS, "tabmodalprompt");
                stack.appendChild(newPrompt);
                browser.setAttribute("tabmodalPromptShowing", true);

                newPrompt.clientTop; // style flush to assure binding is attached

                let tab = self.getTabForBrowser(browser);
                newPrompt.init(args, tab, onCloseCallback);
                return newPrompt;
              },

              removePrompt : function(aPrompt) {
                stack.removeChild(aPrompt);

                let prompts = this.listPrompts();
                if (prompts.length) {
                  let prompt = prompts[prompts.length - 1];
                  prompt.Dialog.setDefaultFocus();
                } else {
                  browser.removeAttribute("tabmodalPromptShowing");
                  browser.focus();
                }
              },

              listPrompts : function(aPrompt) {
                let els = stack.getElementsByTagNameNS(XUL_NS, "tabmodalprompt");
                // NodeList --> real JS array
                let prompts = Array.slice(els);
                return prompts;
              },
            };

            return promptBox;
          ]]>
        </body>
      </method>

      <method name="_callProgressListeners">
        <parameter name="aBrowser"/>
        <parameter name="aMethod"/>
        <parameter name="aArguments"/>
        <parameter name="aCallGlobalListeners"/>
        <parameter name="aCallTabsListeners"/>
        <body><![CDATA[
          var rv = true;

          if (!aBrowser)
            aBrowser = this.mCurrentBrowser;

          if (aCallGlobalListeners != false &&
              aBrowser == this.mCurrentBrowser) {
            this.mProgressListeners.forEach(function (p) {
              if (aMethod in p) {
                try {
                  if (!p[aMethod].apply(p, aArguments))
                    rv = false;
                } catch (e) {
                  // don't inhibit other listeners
                  Components.utils.reportError(e);
                }
              }
            });
          }

          if (aCallTabsListeners != false) {
            aArguments.unshift(aBrowser);

            this.mTabsProgressListeners.forEach(function (p) {
              if (aMethod in p) {
                try {
                  if (!p[aMethod].apply(p, aArguments))
                    rv = false;
                } catch (e) {
                  // don't inhibit other listeners
                  Components.utils.reportError(e);
                }
              }
            });
          }

          return rv;
        ]]></body>
      </method>

      <!-- A web progress listener object definition for a given tab. -->
      <method name="mTabProgressListener">
        <parameter name="aTab"/>
        <parameter name="aBrowser"/>
        <parameter name="aStartsBlank"/>
        <body>
        <![CDATA[
          return ({
            mTabBrowser: this,
            mTab: aTab,
            mBrowser: aBrowser,
            mBlank: aStartsBlank,

            // cache flags for correct status UI update after tab switching
            mStateFlags: 0,
            mStatus: 0,
            mMessage: "",
            mTotalProgress: 0,

            // count of open requests (should always be 0 or 1)
            mRequestCount: 0,

            destroy: function () {
              delete this.mTab;
              delete this.mBrowser;
              delete this.mTabBrowser;
            },

            _callProgressListeners: function () {
              Array.unshift(arguments, this.mBrowser);
              return this.mTabBrowser._callProgressListeners.apply(this.mTabBrowser, arguments);
            },

            _shouldShowProgress: function (aRequest) {
              if (this.mBlank)
                return false;

              // Don't show progress indicators in tabs for about: URIs
              // pointing to local resources.
              try {
                let channel = aRequest.QueryInterface(Ci.nsIChannel);
                if (channel.originalURI.schemeIs("about") &&
                    (channel.URI.schemeIs("jar") || channel.URI.schemeIs("file")))
                  return false;
              } catch (e) {}

              return true;
            },

            onProgressChange: function (aWebProgress, aRequest,
                                        aCurSelfProgress, aMaxSelfProgress,
                                        aCurTotalProgress, aMaxTotalProgress) {
              this.mTotalProgress = aMaxTotalProgress ? aCurTotalProgress / aMaxTotalProgress : 0;

              if (!this._shouldShowProgress(aRequest))
                return;

              if (this.mTotalProgress)
                this.mTab.setAttribute("progress", "true");

              this._callProgressListeners("onProgressChange",
                                          [aWebProgress, aRequest,
                                           aCurSelfProgress, aMaxSelfProgress,
                                           aCurTotalProgress, aMaxTotalProgress]);
            },

            onProgressChange64: function (aWebProgress, aRequest,
                                          aCurSelfProgress, aMaxSelfProgress,
                                          aCurTotalProgress, aMaxTotalProgress) {
              return this.onProgressChange(aWebProgress, aRequest,
                aCurSelfProgress, aMaxSelfProgress, aCurTotalProgress,
                aMaxTotalProgress);
            },

            onStateChange: function (aWebProgress, aRequest, aStateFlags, aStatus) {
              if (!aRequest)
                return;

              var oldBlank = this.mBlank;

              const nsIWebProgressListener = Components.interfaces.nsIWebProgressListener;
              const nsIChannel = Components.interfaces.nsIChannel;

              if (aStateFlags & nsIWebProgressListener.STATE_START) {
                this.mRequestCount++;
              }
              else if (aStateFlags & nsIWebProgressListener.STATE_STOP) {
                const NS_ERROR_UNKNOWN_HOST = 2152398878;
                if (--this.mRequestCount > 0 && aStatus == NS_ERROR_UNKNOWN_HOST) {
                  // to prevent bug 235825: wait for the request handled
                  // by the automatic keyword resolver
                  return;
                }
                // since we (try to) only handle STATE_STOP of the last request,
                // the count of open requests should now be 0
                this.mRequestCount = 0;
              }

              if (aStateFlags & nsIWebProgressListener.STATE_START &&
                  aStateFlags & nsIWebProgressListener.STATE_IS_NETWORK) {
                // It's okay to clear what the user typed when we start
                // loading a document. If the user types, this counter gets
                // set to zero, if the document load ends without an
                // onLocationChange, this counter gets decremented
                // (so we keep it while switching tabs after failed loads)
                // We need to add 2 because loadURIWithFlags may have
                // cancelled a pending load which would have cleared
                // its anchor scroll detection temporary increment.
                if (aWebProgress.isTopLevel)
                  this.mBrowser.userTypedClear += 2;

                if (this._shouldShowProgress(aRequest)) {
                  if (!(aStateFlags & nsIWebProgressListener.STATE_RESTORING)) {
                    this.mTab.setAttribute("busy", "true");
                    if (!(aWebProgress.loadType & Ci.nsIDocShell.LOAD_CMD_RELOAD))
                      this.mTabBrowser.setTabTitleLoading(this.mTab);
                  }

                  if (this.mTab.selected)
                    this.mTabBrowser.mIsBusy = true;
                }
              }
              else if (aStateFlags & nsIWebProgressListener.STATE_STOP &&
                       aStateFlags & nsIWebProgressListener.STATE_IS_NETWORK) {

                if (this.mTab.hasAttribute("busy")) {
                  this.mTab.removeAttribute("busy");
                  this.mTabBrowser._tabAttrModified(this.mTab);
                  if (!this.mTab.selected)
                    this.mTab.setAttribute("unread", "true");
                }
                this.mTab.removeAttribute("progress");

                if (aWebProgress.isTopLevel) {
                  if (!Components.isSuccessCode(aStatus) &&
                      !isTabEmpty(this.mTab)) {
                    // Restore the current document's location in case the
                    // request was stopped (possibly from a content script)
                    // before the location changed.

                    this.mBrowser.userTypedValue = null;

                    if (this.mTab.selected && gURLBar)
                      URLBarSetURI();
                  } else {
                    // The document is done loading, we no longer want the
                    // value cleared.

                    if (this.mBrowser.userTypedClear > 1)
                      this.mBrowser.userTypedClear -= 2;
                    else if (this.mBrowser.userTypedClear > 0)
                      this.mBrowser.userTypedClear--;
                  }

                  if (!this.mBrowser.mIconURL)
                    this.mTabBrowser.useDefaultIcon(this.mTab);
                }

                if (this.mBlank)
                  this.mBlank = false;

                var location = aRequest.QueryInterface(nsIChannel).URI;

                // For keyword URIs clear the user typed value since they will be changed into real URIs
                if (location.scheme == "keyword")
                  this.mBrowser.userTypedValue = null;

                if (this.mTab.label == this.mTabBrowser.mStringBundle.getString("tabs.connecting"))
                  this.mTabBrowser.setTabTitle(this.mTab);

                if (this.mTab.selected)
                  this.mTabBrowser.mIsBusy = false;
              }

              if (oldBlank) {
                this._callProgressListeners("onUpdateCurrentBrowser",
                                            [aStateFlags, aStatus, "", 0],
                                            true, false);
              } else {
                this._callProgressListeners("onStateChange",
                                            [aWebProgress, aRequest, aStateFlags, aStatus],
                                            true, false);
              }

              this._callProgressListeners("onStateChange",
                                          [aWebProgress, aRequest, aStateFlags, aStatus],
                                          false);

              if (aStateFlags & (nsIWebProgressListener.STATE_START |
                                 nsIWebProgressListener.STATE_STOP)) {
                // reset cached temporary values at beginning and end
                this.mMessage = "";
                this.mTotalProgress = 0;
              }
              this.mStateFlags = aStateFlags;
              this.mStatus = aStatus;
            },

            onLocationChange: function (aWebProgress, aRequest, aLocation,
                                        aFlags) {
              // OnLocationChange is called for both the top-level content
              // and the subframes.
              let topLevel = aWebProgress.isTopLevel;

              if (topLevel) {
                // If userTypedClear > 0, the document loaded correctly and we should be
                // clearing the user typed value. We also need to clear the typed value
                // if the document failed to load, to make sure the urlbar reflects the
                // failed URI (particularly for SSL errors). However, don't clear the value
                // if the error page's URI is about:blank, because that causes complete
                // loss of urlbar contents for invalid URI errors (see bug 867957).
                if (this.mBrowser.userTypedClear > 0 ||
                    ((aFlags & Ci.nsIWebProgressListener.LOCATION_CHANGE_ERROR_PAGE) &&
                     aLocation.spec != "about:blank"))
                  this.mBrowser.userTypedValue = null;

                if (this.mTabBrowser.isFindBarInitialized(this.mTab)) {
                  let findBar = this.mTabBrowser.getFindBar(this.mTab);

                  // Close the Find toolbar if we're in old-style TAF mode
                  if (findBar.findMode != findBar.FIND_NORMAL)
                    findBar.close();

                  // fix bug 253793 - turn off highlight when page changes
                  findBar.getElement("highlight").checked = false;
                }

                // Don't clear the favicon if this onLocationChange was
                // triggered by a pushState or a replaceState.  See bug 550565.
                if (aWebProgress.isLoadingDocument &&
                    !(aWebProgress.loadType & Ci.nsIDocShell.LOAD_CMD_PUSHSTATE)) {
                  this.mBrowser.mIconURL = null;
                }

                let autocomplete = this.mTabBrowser._placesAutocomplete;
                let unifiedComplete = this.mTabBrowser._unifiedComplete;
                if (this.mBrowser.registeredOpenURI) {
                  autocomplete.unregisterOpenPage(this.mBrowser.registeredOpenURI);
                  unifiedComplete.unregisterOpenPage(this.mBrowser.registeredOpenURI);
                  delete this.mBrowser.registeredOpenURI;
                }
                // Tabs in private windows aren't registered as "Open" so
                // that they don't appear as switch-to-tab candidates.
                if (!isBlankPageURL(aLocation.spec) &&
                    (!PrivateBrowsingUtils.isWindowPrivate(window) ||
                    PrivateBrowsingUtils.permanentPrivateBrowsing)) {
                  autocomplete.registerOpenPage(aLocation);
                  unifiedComplete.registerOpenPage(aLocation);
                  this.mBrowser.registeredOpenURI = aLocation;
                }
              }

              if (!this.mBlank) {
                this._callProgressListeners("onLocationChange",
                                            [aWebProgress, aRequest, aLocation,
                                             aFlags]);
              }

              if (topLevel) {
                this.mBrowser.lastURI = aLocation;
                this.mBrowser.lastLocationChange = Date.now();
              }
            },

            onStatusChange: function (aWebProgress, aRequest, aStatus, aMessage) {
              if (this.mBlank)
                return;

              this._callProgressListeners("onStatusChange",
                                          [aWebProgress, aRequest, aStatus, aMessage]);

              this.mMessage = aMessage;
            },

            onSecurityChange: function (aWebProgress, aRequest, aState) {
              this._callProgressListeners("onSecurityChange",
                                          [aWebProgress, aRequest, aState]);
            },

            onRefreshAttempted: function (aWebProgress, aURI, aDelay, aSameURI) {
              return this._callProgressListeners("onRefreshAttempted",
                                                 [aWebProgress, aURI, aDelay, aSameURI]);
            },

            QueryInterface: function (aIID) {
              if (aIID.equals(Components.interfaces.nsIWebProgressListener) ||
                  aIID.equals(Components.interfaces.nsIWebProgressListener2) ||
                  aIID.equals(Components.interfaces.nsISupportsWeakReference) ||
                  aIID.equals(Components.interfaces.nsISupports))
                return this;
              throw Components.results.NS_NOINTERFACE;
            }
          });
        ]]>
        </body>
      </method>

      <method name="setIcon">
        <parameter name="aTab"/>
        <parameter name="aURI"/>
        <body>
          <![CDATA[
            var browser = this.getBrowserForTab(aTab);
            browser.mIconURL = aURI instanceof Ci.nsIURI ? aURI.spec : aURI;

            if (aURI && this.mFaviconService) {
              if (!(aURI instanceof Ci.nsIURI))
                aURI = makeURI(aURI);
              this.mFaviconService.setAndFetchFaviconForPage(browser.currentURI,
                                                             aURI, false,
                                                             PrivateBrowsingUtils.isWindowPrivate(window) ?
                                                               this.mFaviconService.FAVICON_LOAD_PRIVATE :
                                                               this.mFaviconService.FAVICON_LOAD_NON_PRIVATE);
            }

            let sizedIconUrl = browser.mIconURL || "";
            if (sizedIconUrl) {
              sizedIconUrl = this.PlacesUtils.getImageURLForResolution(window, sizedIconUrl);
            }
            if (sizedIconUrl != aTab.getAttribute("image")) {
              if (sizedIconUrl)
                aTab.setAttribute("image", sizedIconUrl);
              else
                aTab.removeAttribute("image");
              this._tabAttrModified(aTab);
            }

            this._callProgressListeners(browser, "onLinkIconAvailable", [browser.mIconURL]);
          ]]>
        </body>
      </method>

      <method name="getIcon">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            let browser = aTab ? this.getBrowserForTab(aTab) : this.selectedBrowser;
            return browser.mIconURL;
          ]]>
        </body>
      </method>

      <method name="shouldLoadFavIcon">
        <parameter name="aURI"/>
        <body>
          <![CDATA[
            return (aURI &&
                    Services.prefs.getBoolPref("browser.chrome.site_icons") &&
                    Services.prefs.getBoolPref("browser.chrome.favicons") &&
                    ("schemeIs" in aURI) && (aURI.schemeIs("http") || aURI.schemeIs("https")));
          ]]>
        </body>
      </method>

      <method name="useDefaultIcon">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            var browser = this.getBrowserForTab(aTab);
            var documentURI = browser.documentURI;
            var icon = null;

            if (browser.imageDocument) {
              if (Services.prefs.getBoolPref("browser.chrome.site_icons")) {
                let sz = Services.prefs.getIntPref("browser.chrome.image_icons.max_size");
                if (browser.imageDocument.width <= sz &&
                    browser.imageDocument.height <= sz) {
                  icon = browser.currentURI;
                }
              }
            }

            // Use documentURIObject in the check for shouldLoadFavIcon so that we
            // do the right thing with about:-style error pages.  Bug 453442
            if (!icon && this.shouldLoadFavIcon(documentURI)) {
              let url = documentURI.prePath + "/favicon.ico";
              if (!this.isFailedIcon(url))
                icon = url;
            }
            this.setIcon(aTab, icon);
          ]]>
        </body>
      </method>

      <method name="isFailedIcon">
        <parameter name="aURI"/>
        <body>
          <![CDATA[
            if (this.mFaviconService) {
              if (!(aURI instanceof Ci.nsIURI))
                aURI = makeURI(aURI);
              return this.mFaviconService.isFailedFavicon(aURI);
            }
            return null;
          ]]>
        </body>
      </method>

      <method name="getWindowTitleForBrowser">
        <parameter name="aBrowser"/>
        <body>
          <![CDATA[
            var newTitle = "";
            var docElement = this.ownerDocument.documentElement;
            var sep = docElement.getAttribute("titlemenuseparator");

            // Strip out any null bytes in the content title, since the
            // underlying widget implementations of nsWindow::SetTitle pass
            // null-terminated strings to system APIs.
            var docTitle = aBrowser.contentTitle.replace("\0", "", "g");

            if (!docTitle)
              docTitle = docElement.getAttribute("titledefault");

            var modifier = docElement.getAttribute("titlemodifier");
            if (docTitle) {
              newTitle += docElement.getAttribute("titlepreface");
              newTitle += docTitle;
              if (modifier)
                newTitle += sep;
            }
            newTitle += modifier;

            // If location bar is hidden and the URL type supports a host,
            // add the scheme and host to the title to prevent spoofing.
            // XXX https://bugzilla.mozilla.org/show_bug.cgi?id=22183#c239
            try {
              if (docElement.getAttribute("chromehidden").contains("location")) {
                var uri = this.mURIFixup.createExposableURI(
                            aBrowser.currentURI);
                if (uri.scheme == "about")
                  newTitle = uri.spec + sep + newTitle;
                else
                  newTitle = uri.prePath + sep + newTitle;
              }
            } catch (e) {}

            return newTitle;
          ]]>
        </body>
      </method>

      <method name="updateTitlebar">
        <body>
          <![CDATA[
            if ("TabView" in window && TabView.isVisible()) {
              // ToDo: this will be removed when we gain ability to draw to the menu bar.
              // Bug 586175
              this.ownerDocument.title = TabView.windowTitle;
            }
            else {
              this.ownerDocument.title = this.getWindowTitleForBrowser(this.mCurrentBrowser);
            }
          ]]>
        </body>
      </method>

      <method name="updateCurrentBrowser">
        <parameter name="aForceUpdate"/>
        <body>
          <![CDATA[
            var newBrowser = this.getBrowserAtIndex(this.tabContainer.selectedIndex);
            if (this.mCurrentBrowser == newBrowser && !aForceUpdate)
              return;

            if (!aForceUpdate) {
              TelemetryStopwatch.start("FX_TAB_SWITCH_UPDATE_MS");
              window.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIDOMWindowUtils)
                                                             .beginTabSwitch();
            }

            var oldTab = this.mCurrentTab;

            // Preview mode should not reset the owner
            if (!this._previewMode && !oldTab.selected)
              oldTab.owner = null;

            if (this._lastRelatedTab) {
              if (!this._lastRelatedTab.selected)
                this._lastRelatedTab.owner = null;
              this._lastRelatedTab = null;
            }

            var oldBrowser = this.mCurrentBrowser;

            if (!gMultiProcessBrowser) {
              oldBrowser.setAttribute("type", "content-targetable");
              oldBrowser.docShellIsActive = false;
              newBrowser.setAttribute("type", "content-primary");
              newBrowser.docShellIsActive =
                (window.windowState != window.STATE_MINIMIZED);
            }

            var updateBlockedPopups = false;
            if ((oldBrowser.blockedPopups && !newBrowser.blockedPopups) ||
                (!oldBrowser.blockedPopups && newBrowser.blockedPopups))
              updateBlockedPopups = true;

            this.mCurrentBrowser = newBrowser;
            this.mCurrentTab = this.tabContainer.selectedItem;
            this.showTab(this.mCurrentTab);

            var forwardButtonContainer = document.getElementById("urlbar-wrapper");
            if (forwardButtonContainer) {
              forwardButtonContainer.setAttribute("switchingtabs", "true");
              window.addEventListener("MozAfterPaint", function removeSwitchingtabsAttr() {
                window.removeEventListener("MozAfterPaint", removeSwitchingtabsAttr);
                forwardButtonContainer.removeAttribute("switchingtabs");
              });
            }

            this._appendStatusPanel();

            if (updateBlockedPopups)
              this.mCurrentBrowser.updateBlockedPopups();

            // Update the URL bar.
            var loc = this.mCurrentBrowser.currentURI;

            // Bug 666809 - SecurityUI support for e10s
            var webProgress = this.mCurrentBrowser.webProgress;
            var securityUI = this.mCurrentBrowser.securityUI;

            this._callProgressListeners(null, "onLocationChange",
                                        [webProgress, null, loc, 0], true,
                                        false);

            if (securityUI) {
              this._callProgressListeners(null, "onSecurityChange",
                                          [webProgress, null, securityUI.state], true, false);
            }

            var listener = this.mTabListeners[this.tabContainer.selectedIndex] || null;
            if (listener && listener.mStateFlags) {
              this._callProgressListeners(null, "onUpdateCurrentBrowser",
                                          [listener.mStateFlags, listener.mStatus,
                                           listener.mMessage, listener.mTotalProgress],
                                          true, false);
            }

            if (!this._previewMode) {
              this.mCurrentTab.removeAttribute("unread");
              oldTab.lastAccessed = Date.now();

              let oldFindBar = oldTab._findBar;
              if (oldFindBar &&
                  oldFindBar.findMode == oldFindBar.FIND_NORMAL &&
                  !oldFindBar.hidden)
                this._lastFindValue = oldFindBar._findField.value;

              this.updateTitlebar();

              this.mCurrentTab.removeAttribute("titlechanged");
            }

            // If the new tab is busy, and our current state is not busy, then
            // we need to fire a start to all progress listeners.
            const nsIWebProgressListener = Components.interfaces.nsIWebProgressListener;
            if (this.mCurrentTab.hasAttribute("busy") && !this.mIsBusy) {
              this.mIsBusy = true;
              this._callProgressListeners(null, "onStateChange",
                                          [webProgress, null,
                                           nsIWebProgressListener.STATE_START |
                                           nsIWebProgressListener.STATE_IS_NETWORK, 0],
                                          true, false);
            }

            // If the new tab is not busy, and our current state is busy, then
            // we need to fire a stop to all progress listeners.
            if (!this.mCurrentTab.hasAttribute("busy") && this.mIsBusy) {
              this.mIsBusy = false;
              this._callProgressListeners(null, "onStateChange",
                                          [webProgress, null,
                                           nsIWebProgressListener.STATE_STOP |
                                           nsIWebProgressListener.STATE_IS_NETWORK, 0],
                                          true, false);
            }

            this._setCloseKeyState(!this.mCurrentTab.pinned);

            // TabSelect events are suppressed during preview mode to avoid confusing extensions and other bits of code
            // that might rely upon the other changes suppressed.
            // Focus is suppressed in the event that the main browser window is minimized - focusing a tab would restore the window
            if (!this._previewMode) {
              // We've selected the new tab, so go ahead and notify listeners.
              let event = new CustomEvent("TabSelect", {
                bubbles: true,
                cancelable: false,
                detail: {
                  previousTab: oldTab
                }
              });
              this.mCurrentTab.dispatchEvent(event);

              this._tabAttrModified(oldTab);
              this._tabAttrModified(this.mCurrentTab);

              if (oldBrowser != newBrowser &&
                  oldBrowser.docShell &&
                  oldBrowser.docShell.contentViewer.inPermitUnload) {
                // Since the user is switching away from a tab that has
                // a beforeunload prompt active, we remove the prompt.
                // This prevents confusing user flows like the following:
                //   1. User attempts to close Firefox
                //   2. User switches tabs (ingoring a beforeunload prompt)
                //   3. User returns to tab, presses "Leave page"
                let promptBox = this.getTabModalPromptBox(oldBrowser);
                let prompts = promptBox.listPrompts();
                // NB: This code assumes that the beforeunload prompt
                //     is the top-most prompt on the tab.
                promptBox.removePrompt(prompts[prompts.length - 1]);
              }

              if (!gMultiProcessBrowser)
                this._adjustFocusAfterTabSwitch(this.mCurrentTab, oldTab);
            }

            this.tabContainer._setPositionalAttributes();

            if (!aForceUpdate)
              TelemetryStopwatch.finish("FX_TAB_SWITCH_UPDATE_MS");
          ]]>
        </body>
      </method>

      <method name="_adjustFocusAfterTabSwitch">
        <parameter name="newTab"/>
        <parameter name="oldTab"/>
        <body><![CDATA[
        let newBrowser = this.getBrowserForTab(newTab);
        let oldBrowser = this.getBrowserForTab(oldTab);

        if (oldBrowser) {
          oldBrowser._urlbarFocused = (gURLBar && gURLBar.focused);
          if (this.isFindBarInitialized(oldTab)) {
            let findBar = this.getFindBar(oldTab);
            oldTab._findBarFocused = (!findBar.hidden &&
              findBar._findField.getAttribute("focused") == "true");
          }
        }

        // When focus is in the tab bar, retain it there.
        if (document.activeElement == oldTab) {
          // We need to explicitly focus the new tab, because
          // tabbox.xml does this only in some cases.
          this.mCurrentTab.focus();
          return;
        }

        // If there's a tabmodal prompt showing, focus it.
        if (newBrowser.hasAttribute("tabmodalPromptShowing")) {
          let XUL_NS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          let prompts = newBrowser.parentNode.getElementsByTagNameNS(XUL_NS, "tabmodalprompt");
          let prompt = prompts[prompts.length - 1];
          prompt.Dialog.setDefaultFocus();
          return;
        }

        // Focus the location bar if it was previously focused for that tab.
        // In full screen mode, only bother making the location bar visible
        // if the tab is a blank one.
        if (newBrowser._urlbarFocused && gURLBar) {

          // Explicitly close the popup if the URL bar retains focus
          gURLBar.closePopup();

          if (!window.fullScreen) {
            gURLBar.focus();
            return;
          }

          if (isTabEmpty(this.mCurrentTab)) {
            focusAndSelectUrlBar();
            return;
          }
        }

        // Focus the find bar if it was previously focused for that tab.
        if (gFindBarInitialized && !gFindBar.hidden &&
            this.selectedTab._findBarFocused) {
          gFindBar._findField.focus();
          return;
        }

        // Otherwise, focus the content area. If we're not using remote tabs, we
        // can focus the content area right away, since tab switching is synchronous.
        // If we're using remote tabs, we have to wait until after we've finalized
        // switching the tabs.

        if (newTab._skipContentFocus) {
          // It's possible the tab we're switching to is ready to focus asynchronously,
          // when we've already focused something else. In that case, this
          // _skipContentFocus property can be set so that we skip focusing the
          // content after we switch tabs.
          delete newTab._skipContentFocus;
          return;
        }

        let fm = Cc["@mozilla.org/focus-manager;1"].getService(Ci.nsIFocusManager);
        let focusFlags = fm.FLAG_NOSCROLL;

        if (!gMultiProcessBrowser) {
          let newFocusedElement = fm.getFocusedElementForWindow(window.content, true, {});

          // for anchors, use FLAG_SHOWRING so that it is clear what link was
          // last clicked when switching back to that tab
          if (newFocusedElement &&
              (newFocusedElement instanceof HTMLAnchorElement ||
               newFocusedElement.getAttributeNS("http://www.w3.org/1999/xlink", "type") == "simple"))
            focusFlags |= fm.FLAG_SHOWRING;
        }

        fm.setFocus(newBrowser, focusFlags);
        ]]></body>
      </method>

      <method name="_tabAttrModified">
        <parameter name="aTab"/>
        <body><![CDATA[
          if (aTab.closing)
            return;

          // This event should be dispatched when any of these attributes change:
          // label, crop, busy, image, selected
          var event = document.createEvent("Events");
          event.initEvent("TabAttrModified", true, false);
          aTab.dispatchEvent(event);
        ]]></body>
      </method>

      <method name="setTabTitleLoading">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            aTab.label = this.mStringBundle.getString("tabs.connecting");
            aTab.crop = "end";
            this._tabAttrModified(aTab);
          ]]>
        </body>
      </method>

      <method name="setTabTitle">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            var browser = this.getBrowserForTab(aTab);
            var crop = "end";
            var title = browser.contentTitle;

            if (!title) {
              if (browser.currentURI.spec) {
                try {
                  title = this.mURIFixup.createExposableURI(browser.currentURI).spec;
                } catch(ex) {
                  title = browser.currentURI.spec;
                }
              }

              if (title && !isBlankPageURL(title)) {
                // At this point, we now have a URI.
                // Let's try to unescape it using a character set
                // in case the URI is not ASCII.
                try {
                  var characterSet = browser.characterSet;
                  const textToSubURI = Components.classes["@mozilla.org/intl/texttosuburi;1"]
                                                 .getService(Components.interfaces.nsITextToSubURI);
                  title = textToSubURI.unEscapeNonAsciiURI(characterSet, title);
                } catch(ex) { /* Do nothing. */ }

                crop = "center";

              } else // Still no title?  Fall back to our untitled string.
                title = this.mStringBundle.getString("tabs.emptyTabTitle");
            }

            if (aTab.label == title &&
                aTab.crop == crop)
              return false;

            aTab.label = title;
            aTab.crop = crop;
            this._tabAttrModified(aTab);

            if (aTab.selected)
              this.updateTitlebar();

            return true;
          ]]>
        </body>
      </method>

      <method name="loadOneTab">
        <parameter name="aURI"/>
        <parameter name="aReferrerURI"/>
        <parameter name="aCharset"/>
        <parameter name="aPostData"/>
        <parameter name="aLoadInBackground"/>
        <parameter name="aAllowThirdPartyFixup"/>
        <body>
          <![CDATA[
            var aFromExternal;
            var aRelatedToCurrent;
            var aAllowMixedContent;
            var aSkipAnimation;
            if (arguments.length == 2 &&
                typeof arguments[1] == "object" &&
                !(arguments[1] instanceof Ci.nsIURI)) {
              let params = arguments[1];
              aReferrerURI          = params.referrerURI;
              aCharset              = params.charset;
              aPostData             = params.postData;
              aLoadInBackground     = params.inBackground;
              aAllowThirdPartyFixup = params.allowThirdPartyFixup;
              aFromExternal         = params.fromExternal;
              aRelatedToCurrent     = params.relatedToCurrent;
              aAllowMixedContent    = params.allowMixedContent;
              aSkipAnimation        = params.skipAnimation;
            }

            var bgLoad = (aLoadInBackground != null) ? aLoadInBackground :
                         Services.prefs.getBoolPref("browser.tabs.loadInBackground");
            var owner = bgLoad ? null : this.selectedTab;
            var tab = this.addTab(aURI, {
                                  referrerURI: aReferrerURI,
                                  charset: aCharset,
                                  postData: aPostData,
                                  ownerTab: owner,
                                  allowThirdPartyFixup: aAllowThirdPartyFixup,
                                  fromExternal: aFromExternal,
                                  relatedToCurrent: aRelatedToCurrent,
                                  skipAnimation: aSkipAnimation,
                                  allowMixedContent: aAllowMixedContent });
            if (!bgLoad)
              this.selectedTab = tab;

            return tab;
         ]]>
        </body>
      </method>

      <method name="loadTabs">
        <parameter name="aURIs"/>
        <parameter name="aLoadInBackground"/>
        <parameter name="aReplace"/>
        <body><![CDATA[
          if (!aURIs.length)
            return;

          // The tab selected after this new tab is closed (i.e. the new tab's
          // "owner") is the next adjacent tab (i.e. not the previously viewed tab)
          // when several urls are opened here (i.e. closing the first should select
          // the next of many URLs opened) or if the pref to have UI links opened in
          // the background is set (i.e. the link is not being opened modally)
          //
          // i.e.
          //    Number of URLs    Load UI Links in BG       Focus Last Viewed?
          //    == 1              false                     YES
          //    == 1              true                      NO
          //    > 1               false/true                NO
          var multiple = aURIs.length > 1;
          var owner = multiple || aLoadInBackground ? null : this.selectedTab;
          var firstTabAdded = null;

          if (aReplace) {
            try {
              this.loadURI(aURIs[0], null, null);
            } catch (e) {
              // Ignore failure in case a URI is wrong, so we can continue
              // opening the next ones.
            }
          }
          else
            firstTabAdded = this.addTab(aURIs[0], {ownerTab: owner, skipAnimation: multiple});

          var tabNum = this.tabContainer.selectedIndex;
          for (let i = 1; i < aURIs.length; ++i) {
            let tab = this.addTab(aURIs[i], {skipAnimation: true});
            if (aReplace)
              this.moveTabTo(tab, ++tabNum);
          }

          if (!aLoadInBackground) {
            if (firstTabAdded) {
              // .selectedTab setter focuses the content area
              this.selectedTab = firstTabAdded;
            }
            else
              this.selectedBrowser.focus();
          }
        ]]></body>
      </method>

      <method name="updateBrowserRemoteness">
        <parameter name="aBrowser"/>
        <parameter name="aShouldBeRemote"/>
        <body>
          <![CDATA[
            let isRemote = aBrowser.getAttribute("remote") == "true";
            if (isRemote == aShouldBeRemote)
              return false;

            let wasActive = document.activeElement == aBrowser;

            // Unhook our progress listener.
            let tab = this.getTabForBrowser(aBrowser);
            let index = tab._tPos;
            let filter = this.mTabFilters[index];
            aBrowser.webProgress.removeProgressListener(filter);

            // Change the "remote" attribute.
            let parent = aBrowser.parentNode;
            let permanentKey = aBrowser.permanentKey;
            parent.removeChild(aBrowser);
            aBrowser.setAttribute("remote", aShouldBeRemote ? "true" : "false");
            // Tearing down the browser gives a new permanentKey but we want to
            // keep the old one. Re-set it explicitly after unbinding from DOM.
            aBrowser.permanentKey = permanentKey;
            parent.appendChild(aBrowser);

            // Restore the progress listener.
            aBrowser.webProgress.addProgressListener(filter, Ci.nsIWebProgress.NOTIFY_ALL);

            if (aShouldBeRemote)
              tab.setAttribute("remote", "true");
            else
              tab.removeAttribute("remote");

            if (wasActive)
              aBrowser.focus();

            return true;
          ]]>
        </body>
      </method>

      <method name="updateBrowserRemotenessByURL">
        <parameter name="aBrowser"/>
        <parameter name="aURL"/>
        <body>
          <![CDATA[
            let shouldBeRemote = gMultiProcessBrowser &&
                                 E10SUtils.shouldBrowserBeRemote(aURL);
            return this.updateBrowserRemoteness(aBrowser, shouldBeRemote);
          ]]>
        </body>
      </method>

      <method name="addTab">
        <parameter name="aURI"/>
        <parameter name="aReferrerURI"/>
        <parameter name="aCharset"/>
        <parameter name="aPostData"/>
        <parameter name="aOwner"/>
        <parameter name="aAllowThirdPartyFixup"/>
        <body>
          <![CDATA[
            const NS_XUL = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
            var aFromExternal;
            var aRelatedToCurrent;
            var aSkipAnimation;
            var aAllowMixedContent;
            if (arguments.length == 2 &&
                typeof arguments[1] == "object" &&
                !(arguments[1] instanceof Ci.nsIURI)) {
              let params = arguments[1];
              aReferrerURI          = params.referrerURI;
              aCharset              = params.charset;
              aPostData             = params.postData;
              aOwner                = params.ownerTab;
              aAllowThirdPartyFixup = params.allowThirdPartyFixup;
              aFromExternal         = params.fromExternal;
              aRelatedToCurrent     = params.relatedToCurrent;
              aSkipAnimation        = params.skipAnimation;
              aAllowMixedContent    = params.allowMixedContent;
            }

            // if we're adding tabs, we're past interrupt mode, ditch the owner
            if (this.mCurrentTab.owner)
              this.mCurrentTab.owner = null;

            var t = document.createElementNS(NS_XUL, "tab");

            var uriIsAboutBlank = !aURI || aURI == "about:blank";

            t.setAttribute("crop", "end");
            t.setAttribute("onerror", "this.removeAttribute('image');");
            t.className = "tabbrowser-tab";

            let remote = gMultiProcessBrowser && E10SUtils.shouldBrowserBeRemote(aURI);
            if (remote)
              t.setAttribute("remote", "true");

            this.tabContainer._unlockTabSizing();

            // When overflowing, new tabs are scrolled into view smoothly, which
            // doesn't go well together with the width transition. So we skip the
            // transition in that case.
            let animate = !aSkipAnimation &&
                          this.tabContainer.getAttribute("overflow") != "true" &&
                          Services.prefs.getBoolPref("browser.tabs.animate");
            if (!animate) {
              t.setAttribute("fadein", "true");
              setTimeout(function (tabContainer) {
                tabContainer._handleNewTab(t);
              }, 0, this.tabContainer);
            }

            // invalidate caches
            this._browsers = null;
            this._visibleTabs = null;

            this.tabContainer.appendChild(t);

            // If this new tab is owned by another, assert that relationship
            if (aOwner)
              t.owner = aOwner;

            var b = document.createElementNS(
              "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",
                                             "browser");
            b.setAttribute("type", "content-targetable");
            b.setAttribute("message", "true");
            b.setAttribute("messagemanagergroup", "browsers");
            b.setAttribute("contextmenu", this.getAttribute("contentcontextmenu"));
            b.setAttribute("tooltip", this.getAttribute("contenttooltip"));

            if (remote)
              b.setAttribute("remote", "true");

            if (window.gShowPageResizers && window.windowState == window.STATE_NORMAL) {
              b.setAttribute("showresizer", "true");
            }

            if (this.hasAttribute("autocompletepopup"))
              b.setAttribute("autocompletepopup", this.getAttribute("autocompletepopup"));

            if (this.hasAttribute("selectpopup"))
              b.setAttribute("selectpopup", this.getAttribute("selectpopup"));

            b.setAttribute("autoscrollpopup", this._autoScrollPopup.id);

            // Create the browserStack container
            var stack = document.createElementNS(NS_XUL, "stack");
            stack.className = "browserStack";
            stack.appendChild(b);
            stack.setAttribute("flex", "1");

            // Create the browserContainer
            var browserContainer = document.createElementNS(NS_XUL, "vbox");
            browserContainer.className = "browserContainer";
            browserContainer.appendChild(stack);
            browserContainer.setAttribute("flex", "1");

            // Create the sidebar container
            var browserSidebarContainer = document.createElementNS(NS_XUL,
                                                                   "hbox");
            browserSidebarContainer.className = "browserSidebarContainer";
            browserSidebarContainer.appendChild(browserContainer);
            browserSidebarContainer.setAttribute("flex", "1");

            // Add the Message and the Browser to the box
            var notificationbox = document.createElementNS(NS_XUL,
                                                           "notificationbox");
            notificationbox.setAttribute("flex", "1");
            notificationbox.appendChild(browserSidebarContainer);

            var position = this.tabs.length - 1;
            var uniqueId = this._generateUniquePanelID();
            notificationbox.id = uniqueId;
            t.linkedPanel = uniqueId;
            t.linkedBrowser = b;
            this._tabForBrowser.set(b, t);
            t._tPos = position;
            this.tabContainer._setPositionalAttributes();

            // Prevent the superfluous initial load of a blank document
            // if we're going to load something other than about:blank.
            if (!uriIsAboutBlank) {
              b.setAttribute("nodefaultsrc", "true");
            }

            // NB: this appendChild call causes us to run constructors for the
            // browser element, which fires off a bunch of notifications. Some
            // of those notifications can cause code to run that inspects our
            // state, so it is important that the tab element is fully
            // initialized by this point.
            this.mPanelContainer.appendChild(notificationbox);

            // We've waited until the tab is in the DOM to set the label. This
            // allows the TabLabelModified event to be properly dispatched.
            if (!aURI || isBlankPageURL(aURI)) {
              t.label = this.mStringBundle.getString("tabs.emptyTabTitle");
            }

            this.tabContainer.updateVisibility();

            // wire up a progress listener for the new browser object.
            var tabListener = this.mTabProgressListener(t, b, uriIsAboutBlank);
            const filter = Components.classes["@mozilla.org/appshell/component/browser-status-filter;1"]
                                     .createInstance(Components.interfaces.nsIWebProgress);
            filter.addProgressListener(tabListener, Components.interfaces.nsIWebProgress.NOTIFY_ALL);
            b.webProgress.addProgressListener(filter, Components.interfaces.nsIWebProgress.NOTIFY_ALL);
            this.mTabListeners[position] = tabListener;
            this.mTabFilters[position] = filter;

            b.droppedLinkHandler = handleDroppedLink;

            // If we just created a new tab that loads the default
            // newtab url, swap in a preloaded page if possible.
            // Do nothing if we're a private window.
            let docShellsSwapped = false;
            if (aURI == BROWSER_NEW_TAB_URL &&
                !PrivateBrowsingUtils.isWindowPrivate(window) &&
                !gMultiProcessBrowser) {
              docShellsSwapped = gBrowserNewTabPreloader.newTab(t);
            } else if (aURI == "about:customizing") {
              docShellsSwapped = gCustomizationTabPreloader.newTab(t);
            }

            // Dispatch a new tab notification.  We do this once we're
            // entirely done, so that things are in a consistent state
            // even if the event listener opens or closes tabs.
            var evt = document.createEvent("Events");
            evt.initEvent("TabOpen", true, false);
            t.dispatchEvent(evt);

            // If we didn't swap docShells with a preloaded browser
            // then let's just continue loading the page normally.
            if (!docShellsSwapped && !uriIsAboutBlank) {
              // pretend the user typed this so it'll be available till
              // the document successfully loads
              if (aURI && gInitialPages.indexOf(aURI) == -1)
                b.userTypedValue = aURI;

              let flags = Ci.nsIWebNavigation.LOAD_FLAGS_NONE;
              if (aAllowThirdPartyFixup) {
                flags |= Ci.nsIWebNavigation.LOAD_FLAGS_ALLOW_THIRD_PARTY_FIXUP;
                flags |= Ci.nsIWebNavigation.LOAD_FLAGS_FIXUP_SCHEME_TYPOS;
              }
              if (aFromExternal)
                flags |= Ci.nsIWebNavigation.LOAD_FLAGS_FROM_EXTERNAL;
              if (aAllowMixedContent)
                flags |= Ci.nsIWebNavigation.LOAD_FLAGS_ALLOW_MIXED_CONTENT;
              try {
                b.loadURIWithFlags(aURI, flags, aReferrerURI, aCharset, aPostData);
              } catch (ex) {
                Cu.reportError(ex);
              }
            }

            // We start our browsers out as inactive, and then maintain
            // activeness in the tab switcher.
            b.docShellIsActive = false;

            // Check if we're opening a tab related to the current tab and
            // move it to after the current tab.
            // aReferrerURI is null or undefined if the tab is opened from
            // an external application or bookmark, i.e. somewhere other
            // than the current tab.
            if ((aRelatedToCurrent == null ? aReferrerURI : aRelatedToCurrent) &&
                Services.prefs.getBoolPref("browser.tabs.insertRelatedAfterCurrent")) {
              let newTabPos = (this._lastRelatedTab ||
                               this.selectedTab)._tPos + 1;
              if (this._lastRelatedTab)
                this._lastRelatedTab.owner = null;
              else
                t.owner = this.selectedTab;
              this.moveTabTo(t, newTabPos);
              this._lastRelatedTab = t;
            }

            if (animate) {
              mozRequestAnimationFrame(function () {
                this.tabContainer._handleTabTelemetryStart(t, aURI);

                // kick the animation off
                t.setAttribute("fadein", "true");
              }.bind(this));
            }

            return t;
          ]]>
        </body>
      </method>

      <method name="warnAboutClosingTabs">
      <parameter name="aCloseTabs"/>
      <parameter name="aTab"/>
      <body>
        <![CDATA[
          var tabsToClose;
          switch (aCloseTabs) {
            case this.closingTabsEnum.ALL:
              tabsToClose = this.tabs.length - this._removingTabs.length -
                            gBrowser._numPinnedTabs;
              break;
            case this.closingTabsEnum.OTHER:
              tabsToClose = this.visibleTabs.length - 1 - gBrowser._numPinnedTabs;
              break;
            case this.closingTabsEnum.TO_END:
              if (!aTab)
                throw new Error("Required argument missing: aTab");

              tabsToClose = this.getTabsToTheEndFrom(aTab).length;
              break;
            default:
              throw new Error("Invalid argument: " + aCloseTabs);
          }

          if (tabsToClose <= 1)
            return true;

          const pref = aCloseTabs == this.closingTabsEnum.ALL ?
                       "browser.tabs.warnOnClose" : "browser.tabs.warnOnCloseOtherTabs";
          var shouldPrompt = Services.prefs.getBoolPref(pref);
          if (!shouldPrompt)
            return true;

          var ps = Services.prompt;

          // default to true: if it were false, we wouldn't get this far
          var warnOnClose = { value: true };
          var bundle = this.mStringBundle;

          // focus the window before prompting.
          // this will raise any minimized window, which will
          // make it obvious which window the prompt is for and will
          // solve the problem of windows "obscuring" the prompt.
          // see bug #350299 for more details
          window.focus();
          var warningMessage =
            PluralForm.get(tabsToClose, bundle.getString("tabs.closeWarningMultiple"))
                      .replace("#1", tabsToClose);
          var buttonPressed =
            ps.confirmEx(window,
                         bundle.getString("tabs.closeWarningTitle"),
                         warningMessage,
                         (ps.BUTTON_TITLE_IS_STRING * ps.BUTTON_POS_0)
                         + (ps.BUTTON_TITLE_CANCEL * ps.BUTTON_POS_1),
                         bundle.getString("tabs.closeButtonMultiple"),
                         null, null,
                         aCloseTabs == this.closingTabsEnum.ALL ?
                           bundle.getString("tabs.closeWarningPromptMe") : null,
                         warnOnClose);
          var reallyClose = (buttonPressed == 0);

          // don't set the pref unless they press OK and it's false
          if (aCloseTabs == this.closingTabsEnum.ALL && reallyClose && !warnOnClose.value)
            Services.prefs.setBoolPref(pref, false);

          return reallyClose;
        ]]>
      </body>
      </method>

      <method name="getTabsToTheEndFrom">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            var tabsToEnd = [];
            let tabs = this.visibleTabs;
            for (let i = tabs.length - 1; tabs[i] != aTab && i >= 0; --i) {
              tabsToEnd.push(tabs[i]);
            }
            return tabsToEnd.reverse();
          ]]>
        </body>
      </method>

      <method name="removeTabsToTheEndFrom">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            if (this.warnAboutClosingTabs(this.closingTabsEnum.TO_END, aTab)) {
              let tabs = this.getTabsToTheEndFrom(aTab);
              for (let i = tabs.length - 1; i >= 0; --i) {
                this.removeTab(tabs[i], {animate: true});
              }
            }
          ]]>
        </body>
      </method>

      <method name="removeAllTabsBut">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            if (aTab.pinned)
              return;

            if (this.warnAboutClosingTabs(this.closingTabsEnum.OTHER)) {
              let tabs = this.visibleTabs;
              this.selectedTab = aTab;

              for (let i = tabs.length - 1; i >= 0; --i) {
                if (tabs[i] != aTab && !tabs[i].pinned)
                  this.removeTab(tabs[i], {animate: true});
              }
            }
          ]]>
        </body>
      </method>

      <method name="removeCurrentTab">
        <parameter name="aParams"/>
        <body>
          <![CDATA[
            this.removeTab(this.mCurrentTab, aParams);
          ]]>
        </body>
      </method>

      <field name="_removingTabs">
        []
      </field>

      <method name="removeTab">
        <parameter name="aTab"/>
        <parameter name="aParams"/>
        <body>
          <![CDATA[
            if (aParams) {
              var animate = aParams.animate;
              var byMouse = aParams.byMouse;
            }

            // Handle requests for synchronously removing an already
            // asynchronously closing tab.
            if (!animate &&
                aTab.closing) {
              this._endRemoveTab(aTab);
              return;
            }

            var isLastTab = (this.tabs.length - this._removingTabs.length == 1);

            if (!this._beginRemoveTab(aTab, false, null, true))
              return;

            if (!aTab.pinned && !aTab.hidden && aTab._fullyOpen && byMouse)
              this.tabContainer._lockTabSizing(aTab);
            else
              this.tabContainer._unlockTabSizing();

            if (!animate /* the caller didn't opt in */ ||
                isLastTab ||
                aTab.pinned ||
                aTab.hidden ||
                this._removingTabs.length > 3 /* don't want lots of concurrent animations */ ||
                aTab.getAttribute("fadein") != "true" /* fade-in transition hasn't been triggered yet */ ||
                window.getComputedStyle(aTab).maxWidth == "0.1px" /* fade-in transition hasn't moved yet */ ||
                !Services.prefs.getBoolPref("browser.tabs.animate")) {
              this._endRemoveTab(aTab);
              return;
            }

            this.tabContainer._handleTabTelemetryStart(aTab);

            this._blurTab(aTab);
            aTab.style.maxWidth = ""; // ensure that fade-out transition happens
            aTab.removeAttribute("fadein");

            setTimeout(function (tab, tabbrowser) {
              if (tab.parentNode &&
                  window.getComputedStyle(tab).maxWidth == "0.1px") {
                NS_ASSERT(false, "Giving up waiting for the tab closing animation to finish (bug 608589)");
                tabbrowser._endRemoveTab(tab);
              }
            }, 3000, aTab, this);
          ]]>
        </body>
      </method>

      <!-- Tab close requests are ignored if the window is closing anyway,
           e.g. when holding Ctrl+W. -->
      <field name="_windowIsClosing">
        false
      </field>

      <method name="_beginRemoveTab">
        <parameter name="aTab"/>
        <parameter name="aTabWillBeMoved"/>
        <parameter name="aCloseWindowWithLastTab"/>
        <parameter name="aCloseWindowFastpath"/>
        <body>
          <![CDATA[
            if (aTab.closing ||
                aTab._pendingPermitUnload ||
                this._windowIsClosing)
              return false;

            var browser = this.getBrowserForTab(aTab);

            if (!aTabWillBeMoved) {
              let ds = browser.docShell;
              if (ds && ds.contentViewer) {
                // We need to block while calling permitUnload() because it
                // processes the event queue and may lead to another removeTab()
                // call before permitUnload() even returned.
                aTab._pendingPermitUnload = true;
                let permitUnload = ds.contentViewer.permitUnload();
                delete aTab._pendingPermitUnload;

                if (!permitUnload) {
                  return false;
                }
              }
            }

            var closeWindow = false;
            var newTab = false;
            if (this.tabs.length - this._removingTabs.length == 1) {
              closeWindow = aCloseWindowWithLastTab != null ? aCloseWindowWithLastTab :
                            !window.toolbar.visible ||
                              Services.prefs.getBoolPref("browser.tabs.closeWindowWithLastTab");

              // Closing the tab and replacing it with a blank one is notably slower
              // than closing the window right away. If the caller opts in, take
              // the fast path.
              if (closeWindow &&
                  aCloseWindowFastpath &&
                  this._removingTabs.length == 0) {
                // This call actually closes the window, unless the user
                // cancels the operation.  We are finished here in both cases.
                this._windowIsClosing = window.closeWindow(true, window.warnAboutClosingWindow);
                return null;
              }

              newTab = true;
            }

            aTab.closing = true;
            this._removingTabs.push(aTab);
            this._visibleTabs = null; // invalidate cache

            // Invalidate hovered tab state tracking for this closing tab.
            if (this.tabContainer._hoveredTab == aTab)
              aTab._mouseleave();

            if (newTab)
              this.addTab(BROWSER_NEW_TAB_URL, {skipAnimation: true});
            else
              this.tabContainer.updateVisibility();

            // We're committed to closing the tab now.
            // Dispatch a notification.
            // We dispatch it before any teardown so that event listeners can
            // inspect the tab that's about to close.
            var evt = document.createEvent("UIEvent");
            evt.initUIEvent("TabClose", true, false, window, aTabWillBeMoved ? 1 : 0);
            aTab.dispatchEvent(evt);

            if (!aTabWillBeMoved && !gMultiProcessBrowser) {
              // Prevent this tab from showing further dialogs, since we're closing it
              var windowUtils = browser.contentWindow.QueryInterface(Ci.nsIInterfaceRequestor).
                                getInterface(Ci.nsIDOMWindowUtils);
              windowUtils.disableDialogs();
            }

            // Remove the tab's filter and progress listener.
            const filter = this.mTabFilters[aTab._tPos];

            browser.webProgress.removeProgressListener(filter);

            filter.removeProgressListener(this.mTabListeners[aTab._tPos]);
            this.mTabListeners[aTab._tPos].destroy();

            if (browser.registeredOpenURI && !aTabWillBeMoved) {
              this._placesAutocomplete.unregisterOpenPage(browser.registeredOpenURI);
              this._unifiedComplete.unregisterOpenPage(browser.registeredOpenURI);
              delete browser.registeredOpenURI;
            }

            // We are no longer the primary content area.
            browser.setAttribute("type", "content-targetable");

            // Remove this tab as the owner of any other tabs, since it's going away.
            Array.forEach(this.tabs, function (tab) {
              if ("owner" in tab && tab.owner == aTab)
                // |tab| is a child of the tab we're removing, make it an orphan
                tab.owner = null;
            });

            aTab._endRemoveArgs = [closeWindow, newTab];
            return true;
          ]]>
        </body>
      </method>

      <method name="_endRemoveTab">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            if (!aTab || !aTab._endRemoveArgs)
              return;

            var [aCloseWindow, aNewTab] = aTab._endRemoveArgs;
            aTab._endRemoveArgs = null;

            if (this._windowIsClosing) {
              aCloseWindow = false;
              aNewTab = false;
            }

            this._lastRelatedTab = null;

            // update the UI early for responsiveness
            aTab.collapsed = true;
            this.tabContainer._fillTrailingGap();
            this._blurTab(aTab);

            this._removingTabs.splice(this._removingTabs.indexOf(aTab), 1);

            if (aCloseWindow) {
              this._windowIsClosing = true;
              while (this._removingTabs.length)
                this._endRemoveTab(this._removingTabs[0]);
            } else if (!this._windowIsClosing) {
              if (aNewTab)
                focusAndSelectUrlBar();

              // workaround for bug 345399
              this.tabContainer.mTabstrip._updateScrollButtonsDisabledState();
            }

            // We're going to remove the tab and the browser now.
            // Clean up mTabFilters and mTabListeners now rather than in
            // _beginRemoveTab, so that their size is always in sync with the
            // number of tabs and browsers (the xbl destructor depends on this).
            this.mTabFilters.splice(aTab._tPos, 1);
            this.mTabListeners.splice(aTab._tPos, 1);

            var browser = this.getBrowserForTab(aTab);

            // Because of the way XBL works (fields just set JS
            // properties on the element) and the code we have in place
            // to preserve the JS objects for any elements that have
            // JS properties set on them, the browser element won't be
            // destroyed until the document goes away.  So we force a
            // cleanup ourselves.
            // This has to happen before we remove the child so that the
            // XBL implementation of nsIObserver still works.
            browser.destroy();

            var wasPinned = aTab.pinned;

            // Invalidate browsers cache, as the tab is removed from the
            // tab container.
            this._browsers = null;

            // Remove the tab ...
            this.tabContainer.removeChild(aTab);

            // ... and fix up the _tPos properties immediately.
            for (let i = aTab._tPos; i < this.tabs.length; i++)
              this.tabs[i]._tPos = i;

            if (!this._windowIsClosing) {
              if (wasPinned)
                this.tabContainer._positionPinnedTabs();

              // update tab close buttons state
              this.tabContainer.adjustTabstrip();

              setTimeout(function(tabs) {
                tabs._lastTabClosedByMouse = false;
              }, 0, this.tabContainer);
            }

            // update tab positional properties and attributes
            this.selectedTab._selected = true;
            this.tabContainer._setPositionalAttributes();

            // Removing the panel requires fixing up selectedPanel immediately
            // (see below), which would be hindered by the potentially expensive
            // browser removal. So we remove the browser and the panel in two
            // steps.

            var panel = this.getNotificationBox(browser);

            // This will unload the document. An unload handler could remove
            // dependant tabs, so it's important that the tabbrowser is now in
            // a consistent state (tab removed, tab positions updated, etc.).
            browser.parentNode.removeChild(browser);

            // Release the browser in case something is erroneously holding a
            // reference to the tab after its removal.
            this._tabForBrowser.delete(aTab.linkedBrowser);
            aTab.linkedBrowser = null;

            // As the browser is removed, the removal of a dependent document can
            // cause the whole window to close. So at this point, it's possible
            // that the binding is destructed.
            if (this.mTabBox) {
              this.mPanelContainer.removeChild(panel);
            }

            if (aCloseWindow)
              this._windowIsClosing = closeWindow(true, window.warnAboutClosingWindow);
          ]]>
        </body>
      </method>

      <method name="_blurTab">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            if (!aTab.selected)
              return;

            if (aTab.owner &&
                !aTab.owner.hidden &&
                !aTab.owner.closing &&
                Services.prefs.getBoolPref("browser.tabs.selectOwnerOnClose")) {
              this.selectedTab = aTab.owner;
              return;
            }

            // Switch to a visible tab unless there aren't any others remaining
            let remainingTabs = this.visibleTabs;
            let numTabs = remainingTabs.length;
            if (numTabs == 0 || numTabs == 1 && remainingTabs[0] == aTab) {
              remainingTabs = Array.filter(this.tabs, function(tab) {
                return !tab.closing;
              }, this);
            }

            // Try to find a remaining tab that comes after the given tab
            var tab = aTab;
            do {
              tab = tab.nextSibling;
            } while (tab && remainingTabs.indexOf(tab) == -1);

            if (!tab) {
              tab = aTab;

              do {
                tab = tab.previousSibling;
              } while (tab && remainingTabs.indexOf(tab) == -1);
            }

            this.selectedTab = tab;
          ]]>
        </body>
      </method>

      <method name="swapNewTabWithBrowser">
        <parameter name="aNewTab"/>
        <parameter name="aBrowser"/>
        <body>
          <![CDATA[
            // The browser must be standalone.
            if (aBrowser.getTabBrowser())
              throw Cr.NS_ERROR_INVALID_ARG;

            // The tab is definitely not loading.
            aNewTab.removeAttribute("busy");
            if (aNewTab.selected) {
              this.mIsBusy = false;
            }

            this._swapBrowserDocShells(aNewTab, aBrowser);

            // Update the new tab's title.
            this.setTabTitle(aNewTab);

            if (aNewTab.selected) {
              this.updateCurrentBrowser(true);
            }
          ]]>
        </body>
      </method>

      <method name="swapBrowsersAndCloseOther">
        <parameter name="aOurTab"/>
        <parameter name="aOtherTab"/>
        <body>
          <![CDATA[
            // Do not allow transfering a private tab to a non-private window
            // and vice versa.
            if (PrivateBrowsingUtils.isWindowPrivate(window) !=
                PrivateBrowsingUtils.isWindowPrivate(aOtherTab.ownerDocument.defaultView))
              return;

            // That's gBrowser for the other window, not the tab's browser!
            var remoteBrowser = aOtherTab.ownerDocument.defaultView.gBrowser;
            var isPending = aOtherTab.hasAttribute("pending");

            // First, start teardown of the other browser.  Make sure to not
            // fire the beforeunload event in the process.  Close the other
            // window if this was its last tab.
            if (!remoteBrowser._beginRemoveTab(aOtherTab, true, true))
              return;

            let ourBrowser = this.getBrowserForTab(aOurTab);
            let otherBrowser = aOtherTab.linkedBrowser;

            // If the other tab is pending (i.e. has not been restored, yet)
            // then do not switch docShells but retrieve the other tab's state
            // and apply it to our tab.
            if (isPending) {
              SessionStore.setTabState(aOurTab, SessionStore.getTabState(aOtherTab));

              // Make sure to unregister any open URIs.
              this._swapRegisteredOpenURIs(ourBrowser, otherBrowser);
            } else {
              // Workarounds for bug 458697
              // Icon might have been set on DOMLinkAdded, don't override that.
              if (!ourBrowser.mIconURL && otherBrowser.mIconURL)
                this.setIcon(aOurTab, otherBrowser.mIconURL);
              var isBusy = aOtherTab.hasAttribute("busy");
              if (isBusy) {
                aOurTab.setAttribute("busy", "true");
                this._tabAttrModified(aOurTab);
                if (aOurTab.selected)
                  this.mIsBusy = true;
              }

              this._swapBrowserDocShells(aOurTab, otherBrowser);
            }

            // Handle findbar data (if any)
            let otherFindBar = aOtherTab._findBar;
            if (otherFindBar &&
                otherFindBar.findMode == otherFindBar.FIND_NORMAL) {
              let ourFindBar = this.getFindBar(aOurTab);
              ourFindBar._findField.value = otherFindBar._findField.value;
              if (!otherFindBar.hidden)
                ourFindBar.onFindCommand();
            }

            // Finish tearing down the tab that's going away.
            remoteBrowser._endRemoveTab(aOtherTab);

            if (isBusy)
              this.setTabTitleLoading(aOurTab);
            else
              this.setTabTitle(aOurTab);

            // If the tab was already selected (this happpens in the scenario
            // of replaceTabWithWindow), notify onLocationChange, etc.
            if (aOurTab.selected)
              this.updateCurrentBrowser(true);
          ]]>
        </body>
      </method>

      <method name="_swapBrowserDocShells">
        <parameter name="aOurTab"/>
        <parameter name="aOtherBrowser"/>
        <body>
          <![CDATA[
            // Unhook our progress listener
            let index = aOurTab._tPos;
            const filter = this.mTabFilters[index];
            let tabListener = this.mTabListeners[index];
            let ourBrowser = this.getBrowserForTab(aOurTab);
            ourBrowser.webProgress.removeProgressListener(filter);
            filter.removeProgressListener(tabListener);

            // Make sure to unregister any open URIs.
            this._swapRegisteredOpenURIs(ourBrowser, aOtherBrowser);

            // Give others a chance to swap state.
            let event = new CustomEvent("SwapDocShells", {"detail": aOtherBrowser});
            ourBrowser.dispatchEvent(event);
            event = new CustomEvent("SwapDocShells", {"detail": ourBrowser});
            aOtherBrowser.dispatchEvent(event);

            // Swap the docshells
            ourBrowser.swapDocShells(aOtherBrowser);

            // Restore the progress listener
            this.mTabListeners[index] = tabListener =
              this.mTabProgressListener(aOurTab, ourBrowser, false);

            const notifyAll = Ci.nsIWebProgress.NOTIFY_ALL;
            filter.addProgressListener(tabListener, notifyAll);
            ourBrowser.webProgress.addProgressListener(filter, notifyAll);
          ]]>
        </body>
      </method>

      <method name="_swapRegisteredOpenURIs">
        <parameter name="aOurBrowser"/>
        <parameter name="aOtherBrowser"/>
        <body>
          <![CDATA[
            // If the current URI is registered as open remove it from the list.
            if (aOurBrowser.registeredOpenURI) {
              this._placesAutocomplete.unregisterOpenPage(aOurBrowser.registeredOpenURI);
              this._unifiedComplete.unregisterOpenPage(aOurBrowser.registeredOpenURI);
              delete aOurBrowser.registeredOpenURI;
            }

            // If the other/new URI is registered as open then copy it over.
            if (aOtherBrowser.registeredOpenURI) {
              aOurBrowser.registeredOpenURI = aOtherBrowser.registeredOpenURI;
              delete aOtherBrowser.registeredOpenURI;
            }
          ]]>
        </body>
      </method>

      <method name="reloadAllTabs">
        <body>
          <![CDATA[
            let tabs = this.visibleTabs;
            let l = tabs.length;
            for (var i = 0; i < l; i++) {
              try {
                this.getBrowserForTab(tabs[i]).reload();
              } catch (e) {
                // ignore failure to reload so others will be reloaded
              }
            }
          ]]>
        </body>
      </method>

      <method name="reloadTab">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            this.getBrowserForTab(aTab).reload();
          ]]>
        </body>
      </method>

      <method name="addProgressListener">
        <parameter name="aListener"/>
        <body>
          <![CDATA[
            if (arguments.length != 1) {
              Components.utils.reportError("gBrowser.addProgressListener was " +
                                           "called with a second argument, " +
                                           "which is not supported. See bug " +
                                           "608628. Call stack: " + new Error().stack);
            }

            this.mProgressListeners.push(aListener);
          ]]>
        </body>
      </method>

      <method name="removeProgressListener">
        <parameter name="aListener"/>
        <body>
          <![CDATA[
            this.mProgressListeners =
              this.mProgressListeners.filter(function (l) l != aListener);
         ]]>
        </body>
      </method>

      <method name="addTabsProgressListener">
        <parameter name="aListener"/>
        <body>
          this.mTabsProgressListeners.push(aListener);
        </body>
      </method>

      <method name="removeTabsProgressListener">
        <parameter name="aListener"/>
        <body>
        <![CDATA[
          this.mTabsProgressListeners =
            this.mTabsProgressListeners.filter(function (l) l != aListener);
        ]]>
        </body>
      </method>

      <method name="getBrowserForTab">
        <parameter name="aTab"/>
        <body>
        <![CDATA[
          return aTab.linkedBrowser;
        ]]>
        </body>
      </method>

      <method name="showOnlyTheseTabs">
        <parameter name="aTabs"/>
        <body>
        <![CDATA[
          Array.forEach(this.tabs, function(tab) {
            if (aTabs.indexOf(tab) == -1)
              this.hideTab(tab);
            else
              this.showTab(tab);
          }, this);

          this.tabContainer._handleTabSelect(false);
        ]]>
        </body>
      </method>

      <method name="showTab">
        <parameter name="aTab"/>
        <body>
        <![CDATA[
          if (aTab.hidden) {
            aTab.removeAttribute("hidden");
            this._visibleTabs = null; // invalidate cache

            this.tabContainer.adjustTabstrip();

            this.tabContainer._setPositionalAttributes();

            let event = document.createEvent("Events");
            event.initEvent("TabShow", true, false);
            aTab.dispatchEvent(event);
          }
        ]]>
        </body>
      </method>

      <method name="hideTab">
        <parameter name="aTab"/>
        <body>
        <![CDATA[
          if (!aTab.hidden && !aTab.pinned && !aTab.selected &&
              !aTab.closing) {
            aTab.setAttribute("hidden", "true");
            this._visibleTabs = null; // invalidate cache

            this.tabContainer.adjustTabstrip();

            this.tabContainer._setPositionalAttributes();

            let event = document.createEvent("Events");
            event.initEvent("TabHide", true, false);
            aTab.dispatchEvent(event);
          }
        ]]>
        </body>
      </method>

      <method name="selectTabAtIndex">
        <parameter name="aIndex"/>
        <parameter name="aEvent"/>
        <body>
        <![CDATA[
          let tabs = this.visibleTabs;

          // count backwards for aIndex < 0
          if (aIndex < 0)
            aIndex += tabs.length;

          if (aIndex >= 0 && aIndex < tabs.length)
            this.selectedTab = tabs[aIndex];

          if (aEvent) {
            aEvent.preventDefault();
            aEvent.stopPropagation();
          }
        ]]>
        </body>
      </method>

      <property name="selectedTab">
        <getter>
          return this.mCurrentTab;
        </getter>
        <setter>
          <![CDATA[
          // Update the tab
          this.mTabBox.selectedTab = val;
          return val;
          ]]>
        </setter>
      </property>

      <property name="selectedBrowser"
                onget="return this.mCurrentBrowser;"
                readonly="true"/>

      <property name="browsers" readonly="true">
       <getter>
          <![CDATA[
            return this._browsers ||
                   (this._browsers = Array.map(this.tabs, function (tab) tab.linkedBrowser));
          ]]>
        </getter>
      </property>
      <field name="_browsers">null</field>

      <!-- Moves a tab to a new browser window, unless it's already the only tab
           in the current window, in which case this will do nothing. -->
      <method name="replaceTabWithWindow">
        <parameter name="aTab"/>
        <parameter name="aOptions"/>
        <body>
          <![CDATA[
            if (this.tabs.length == 1)
              return null;

            let event = new CustomEvent("TabBecomingWindow", {
              bubbles: true,
              cancelable: true
            });
            aTab.dispatchEvent(event);
            if (event.defaultPrevented) {
              return null;
            }

            var options = "chrome,dialog=no,all";
            for (var name in aOptions)
              options += "," + name + "=" + aOptions[name];

            // tell a new window to take the "dropped" tab
            return window.openDialog(getBrowserURL(), "_blank", options, aTab);
          ]]>
        </body>
      </method>

      <!-- Opens a given tab to a non-remote window. -->
      <method name="openNonRemoteWindow">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            let url = aTab.linkedBrowser.currentURI.spec;
            return window.openDialog("chrome://browser/content/", "_blank", "chrome,all,dialog=no,non-remote", url);
          ]]>
        </body>
      </method>

      <method name="moveTabTo">
        <parameter name="aTab"/>
        <parameter name="aIndex"/>
        <body>
        <![CDATA[
          var oldPosition = aTab._tPos;
          if (oldPosition == aIndex)
            return;

          // Don't allow mixing pinned and unpinned tabs.
          if (aTab.pinned)
            aIndex = Math.min(aIndex, this._numPinnedTabs - 1);
          else
            aIndex = Math.max(aIndex, this._numPinnedTabs);
          if (oldPosition == aIndex)
            return;

          this._lastRelatedTab = null;

          this.mTabFilters.splice(aIndex, 0, this.mTabFilters.splice(aTab._tPos, 1)[0]);
          this.mTabListeners.splice(aIndex, 0, this.mTabListeners.splice(aTab._tPos, 1)[0]);

          let wasFocused = (document.activeElement == this.mCurrentTab);

          aIndex = aIndex < aTab._tPos ? aIndex: aIndex+1;
          this.mCurrentTab._selected = false;

          // invalidate caches
          this._browsers = null;
          this._visibleTabs = null;

          // use .item() instead of [] because dragging to the end of the strip goes out of
          // bounds: .item() returns null (so it acts like appendChild), but [] throws
          this.tabContainer.insertBefore(aTab, this.tabs.item(aIndex));

          for (let i = 0; i < this.tabs.length; i++) {
            this.tabs[i]._tPos = i;
            this.tabs[i]._selected = false;
          }
          this.mCurrentTab._selected = true;

          if (wasFocused)
            this.mCurrentTab.focus();

          this.tabContainer._handleTabSelect(false);

          if (aTab.pinned)
            this.tabContainer._positionPinnedTabs();

          this.tabContainer._setPositionalAttributes();

          var evt = document.createEvent("UIEvents");
          evt.initUIEvent("TabMove", true, false, window, oldPosition);
          aTab.dispatchEvent(evt);
        ]]>
        </body>
      </method>

      <method name="moveTabForward">
        <body>
          <![CDATA[
            let nextTab = this.mCurrentTab.nextSibling;
            while (nextTab && nextTab.hidden)
              nextTab = nextTab.nextSibling;

            if (nextTab)
              this.moveTabTo(this.mCurrentTab, nextTab._tPos);
            else if (this.arrowKeysShouldWrap)
              this.moveTabToStart();
          ]]>
        </body>
      </method>

      <method name="moveTabBackward">
        <body>
          <![CDATA[
            let previousTab = this.mCurrentTab.previousSibling;
            while (previousTab && previousTab.hidden)
              previousTab = previousTab.previousSibling;

            if (previousTab)
              this.moveTabTo(this.mCurrentTab, previousTab._tPos);
            else if (this.arrowKeysShouldWrap)
              this.moveTabToEnd();
          ]]>
        </body>
      </method>

      <method name="moveTabToStart">
        <body>
          <![CDATA[
            var tabPos = this.mCurrentTab._tPos;
            if (tabPos > 0)
              this.moveTabTo(this.mCurrentTab, 0);
          ]]>
        </body>
      </method>

      <method name="moveTabToEnd">
        <body>
          <![CDATA[
            var tabPos = this.mCurrentTab._tPos;
            if (tabPos < this.browsers.length - 1)
              this.moveTabTo(this.mCurrentTab, this.browsers.length - 1);
          ]]>
        </body>
      </method>

      <method name="moveTabOver">
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            var direction = window.getComputedStyle(this.parentNode, null).direction;
            if ((direction == "ltr" && aEvent.keyCode == KeyEvent.DOM_VK_RIGHT) ||
                (direction == "rtl" && aEvent.keyCode == KeyEvent.DOM_VK_LEFT))
              this.moveTabForward();
            else
              this.moveTabBackward();
          ]]>
        </body>
      </method>

      <method name="duplicateTab">
        <parameter name="aTab"/><!-- can be from a different window as well -->
        <body>
          <![CDATA[
            return SessionStore.duplicateTab(window, aTab);
          ]]>
        </body>
      </method>

      <!-- BEGIN FORWARDED BROWSER PROPERTIES.  IF YOU ADD A PROPERTY TO THE BROWSER ELEMENT
           MAKE SURE TO ADD IT HERE AS WELL. -->
      <property name="canGoBack"
                onget="return this.mCurrentBrowser.canGoBack;"
                readonly="true"/>

      <property name="canGoForward"
                onget="return this.mCurrentBrowser.canGoForward;"
                readonly="true"/>

      <method name="goBack">
        <body>
          <![CDATA[
            return this.mCurrentBrowser.goBack();
          ]]>
        </body>
      </method>

      <method name="goForward">
        <body>
          <![CDATA[
            return this.mCurrentBrowser.goForward();
          ]]>
        </body>
      </method>

      <method name="reload">
        <body>
          <![CDATA[
            return this.mCurrentBrowser.reload();
          ]]>
        </body>
      </method>

      <method name="reloadWithFlags">
        <parameter name="aFlags"/>
        <body>
          <![CDATA[
            return this.mCurrentBrowser.reloadWithFlags(aFlags);
          ]]>
        </body>
      </method>

      <method name="stop">
        <body>
          <![CDATA[
            return this.mCurrentBrowser.stop();
          ]]>
        </body>
      </method>

      <!-- throws exception for unknown schemes -->
      <method name="loadURI">
        <parameter name="aURI"/>
        <parameter name="aReferrerURI"/>
        <parameter name="aCharset"/>
        <body>
          <![CDATA[
            return this.mCurrentBrowser.loadURI(aURI, aReferrerURI, aCharset);
          ]]>
        </body>
      </method>

      <!-- throws exception for unknown schemes -->
      <method name="loadURIWithFlags">
        <parameter name="aURI"/>
        <parameter name="aFlags"/>
        <parameter name="aReferrerURI"/>
        <parameter name="aCharset"/>
        <parameter name="aPostData"/>
        <body>
          <![CDATA[
            return this.mCurrentBrowser.loadURIWithFlags(aURI, aFlags, aReferrerURI, aCharset, aPostData);
          ]]>
        </body>
      </method>

      <method name="goHome">
        <body>
          <![CDATA[
            return this.mCurrentBrowser.goHome();
          ]]>
        </body>
      </method>

      <property name="homePage">
        <getter>
          <![CDATA[
            return this.mCurrentBrowser.homePage;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            this.mCurrentBrowser.homePage = val;
            return val;
          ]]>
        </setter>
      </property>

      <method name="gotoIndex">
        <parameter name="aIndex"/>
        <body>
          <![CDATA[
            return this.mCurrentBrowser.gotoIndex(aIndex);
          ]]>
        </body>
      </method>

      <method name="attachFormFill">
        <body><![CDATA[
          for (var i = 0; i < this.mPanelContainer.childNodes.length; ++i) {
            var cb = this.getBrowserAtIndex(i);
            cb.attachFormFill();
          }
        ]]></body>
      </method>

      <method name="detachFormFill">
        <body><![CDATA[
          for (var i = 0; i < this.mPanelContainer.childNodes.length; ++i) {
            var cb = this.getBrowserAtIndex(i);
            cb.detachFormFill();
          }
        ]]></body>
      </method>

      <property name="currentURI"
                onget="return this.mCurrentBrowser.currentURI;"
                readonly="true"/>

      <property name="finder"
                onget="return this.mCurrentBrowser.finder"
                readonly="true"/>

      <property name="docShell"
                onget="return this.mCurrentBrowser.docShell"
                readonly="true"/>

      <property name="webNavigation"
                onget="return this.mCurrentBrowser.webNavigation"
                readonly="true"/>

      <property name="webBrowserFind"
                readonly="true"
                onget="return this.mCurrentBrowser.webBrowserFind"/>

      <property name="webProgress"
                readonly="true"
                onget="return this.mCurrentBrowser.webProgress"/>

      <property name="contentWindow"
                readonly="true"
                onget="return this.mCurrentBrowser.contentWindow"/>

      <property name="sessionHistory"
                onget="return this.mCurrentBrowser.sessionHistory;"
                readonly="true"/>

      <property name="markupDocumentViewer"
                onget="return this.mCurrentBrowser.markupDocumentViewer;"
                readonly="true"/>

      <property name="contentViewerEdit"
                onget="return this.mCurrentBrowser.contentViewerEdit;"
                readonly="true"/>

      <property name="contentViewerFile"
                onget="return this.mCurrentBrowser.contentViewerFile;"
                readonly="true"/>

      <property name="contentDocument"
                onget="return this.mCurrentBrowser.contentDocument;"
                readonly="true"/>

      <property name="contentTitle"
                onget="return this.mCurrentBrowser.contentTitle;"
                readonly="true"/>

      <property name="contentPrincipal"
                onget="return this.mCurrentBrowser.contentPrincipal;"
                readonly="true"/>

      <property name="securityUI"
                onget="return this.mCurrentBrowser.securityUI;"
                readonly="true"/>

      <property name="fullZoom"
                onget="return this.mCurrentBrowser.fullZoom;"
                onset="this.mCurrentBrowser.fullZoom = val;"/>

      <property name="textZoom"
                onget="return this.mCurrentBrowser.textZoom;"
                onset="this.mCurrentBrowser.textZoom = val;"/>

      <property name="isSyntheticDocument"
                onget="return this.mCurrentBrowser.isSyntheticDocument;"
                readonly="true"/>

      <method name="_handleKeyDownEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (!aEvent.isTrusted) {
            // Don't let untrusted events mess with tabs.
            return;
          }

          if (aEvent.altKey)
            return;

          // Don't check if the event was already consumed because tab
          // navigation should always work for better user experience.

          if (aEvent.ctrlKey && aEvent.shiftKey && !aEvent.metaKey) {
            switch (aEvent.keyCode) {
              case aEvent.DOM_VK_PAGE_UP:
                this.moveTabBackward();
                aEvent.preventDefault();
                return;
              case aEvent.DOM_VK_PAGE_DOWN:
                this.moveTabForward();
                aEvent.preventDefault();
                return;
            }
          }

        ]]></body>
      </method>

      <method name="_handleKeyPressEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (!aEvent.isTrusted) {
            // Don't let untrusted events mess with tabs.
            return;
          }

          if (aEvent.altKey)
            return;

          // We need to take care of FAYT-watching as long as the findbar
          // isn't initialized.  The checks on aEvent are copied from
          // _shouldFastFind (see findbar.xml).
          if (!gFindBarInitialized &&
              !(aEvent.ctrlKey || aEvent.metaKey) &&
              !aEvent.defaultPrevented) {
            let charCode = aEvent.charCode;
            if (charCode) {
              let char = String.fromCharCode(charCode);
              if (char == "'" || char == "/" ||
                  Services.prefs.getBoolPref("accessibility.typeaheadfind")) {
                gFindBar._onBrowserKeypress(aEvent);
                return;
              }
            }
          }

          if (!aEvent.metaKey)
            return;

          var offset = 1;
          switch (aEvent.charCode) {
            case '}'.charCodeAt(0):
              offset = -1;
            case '{'.charCodeAt(0):
              if (window.getComputedStyle(this, null).direction == "ltr")
                offset *= -1;
              this.tabContainer.advanceSelectedTab(offset, true);
              aEvent.preventDefault();
          }
        ]]></body>
      </method>

      <property name="userTypedClear"
                onget="return this.mCurrentBrowser.userTypedClear;"
                onset="return this.mCurrentBrowser.userTypedClear = val;"/>

      <property name="userTypedValue"
                onget="return this.mCurrentBrowser.userTypedValue;"
                onset="return this.mCurrentBrowser.userTypedValue = val;"/>

      <method name="createTooltip">
        <parameter name="event"/>
        <body><![CDATA[
          event.stopPropagation();
          var tab = document.tooltipNode;
          if (tab.localName != "tab") {
            event.preventDefault();
            return;
          }
          event.target.setAttribute("label", tab.mOverCloseButton ?
                                             tab.getAttribute("closetabtext") :
                                             tab.getAttribute("label"));
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          switch (aEvent.type) {
            case "keydown":
              this._handleKeyDownEvent(aEvent);
              break;
            case "keypress":
              this._handleKeyPressEvent(aEvent);
              break;
            case "sizemodechange":
              if (aEvent.target == window) {
                this.mCurrentBrowser.docShellIsActive =
                  (window.windowState != window.STATE_MINIMIZED);
              }
              break;
          }
        ]]></body>
      </method>

      <method name="receiveMessage">
        <parameter name="aMessage"/>
        <body><![CDATA[
          let json = aMessage.json;
          let browser = aMessage.target;

          switch (aMessage.name) {
            case "DOMTitleChanged": {
              let tab = this.getTabForBrowser(browser);
              if (!tab || tab.hasAttribute("pending"))
                return;
              let titleChanged = this.setTabTitle(tab);
              if (titleChanged && !tab.selected && !tab.hasAttribute("busy"))
                tab.setAttribute("titlechanged", "true");
              break;
            }
            case "DOMWindowClose": {
              if (this.tabs.length == 1) {
                window.close();
                return;
              }

              let tab = this.getTabForBrowser(browser);
              if (tab) {
                this.removeTab(tab);
              }
              break;
            }
            case "contextmenu": {
              let spellInfo = aMessage.data.spellInfo;
              if (spellInfo)
                spellInfo.target = aMessage.target.messageManager;
              gContextMenuContentData = { event: aMessage.objects.event,
                                          browser: browser,
                                          editFlags: aMessage.data.editFlags,
                                          spellInfo: spellInfo };
              let popup = browser.ownerDocument.getElementById("contentAreaContextMenu");
              let event = gContextMenuContentData.event;
              let pos = browser.mapScreenCoordinatesFromContent(event.screenX, event.screenY);
              popup.openPopupAtScreen(pos.x, pos.y, true);
              break;
            }
            case "DOMWebNotificationClicked": {
              let tab = this.getTabForBrowser(browser);
              if (!tab)
                return;
              this.selectedTab = tab;
              window.focus();
              break;
            }
          }
        ]]></body>
      </method>

      <constructor>
        <![CDATA[
          let browserStack = document.getAnonymousElementByAttribute(this, "anonid", "browserStack");
          this.mCurrentBrowser = document.getAnonymousElementByAttribute(this, "anonid", "initialBrowser");

          this.mCurrentTab = this.tabContainer.firstChild;
          const nsIEventListenerService =
            Components.interfaces.nsIEventListenerService;
          let els = Components.classes["@mozilla.org/eventlistenerservice;1"]
                              .getService(nsIEventListenerService);
          els.addSystemEventListener(document, "keydown", this, false);
          els.addSystemEventListener(document, "keypress", this, false);
          window.addEventListener("sizemodechange", this, false);

          var uniqueId = this._generateUniquePanelID();
          this.mPanelContainer.childNodes[0].id = uniqueId;
          this.mCurrentTab.linkedPanel = uniqueId;
          this.mCurrentTab._tPos = 0;
          this.mCurrentTab._fullyOpen = true;
          this.mCurrentTab.linkedBrowser = this.mCurrentBrowser;
          this._tabForBrowser.set(this.mCurrentBrowser, this.mCurrentTab);

          // set up the shared autoscroll popup
          this._autoScrollPopup = this.mCurrentBrowser._createAutoScrollPopup();
          this._autoScrollPopup.id = "autoscroller";
          this.appendChild(this._autoScrollPopup);
          this.mCurrentBrowser.setAttribute("autoscrollpopup", this._autoScrollPopup.id);
          this.mCurrentBrowser.droppedLinkHandler = handleDroppedLink;
          this.updateWindowResizers();

          // Hook up the event listeners to the first browser
          var tabListener = this.mTabProgressListener(this.mCurrentTab, this.mCurrentBrowser, true);
          const nsIWebProgress = Components.interfaces.nsIWebProgress;
          const filter = Components.classes["@mozilla.org/appshell/component/browser-status-filter;1"]
                                   .createInstance(nsIWebProgress);
          filter.addProgressListener(tabListener, nsIWebProgress.NOTIFY_ALL);
          this.mTabListeners[0] = tabListener;
          this.mTabFilters[0] = filter;
          this.webProgress.addProgressListener(filter, nsIWebProgress.NOTIFY_ALL);

          this.style.backgroundColor =
            Services.prefs.getBoolPref("browser.display.use_system_colors") ?
              "-moz-default-background-color" :
              Services.prefs.getCharPref("browser.display.background_color");

          let remote = window.QueryInterface(Ci.nsIInterfaceRequestor)
            .getInterface(Ci.nsIWebNavigation)
            .QueryInterface(Ci.nsILoadContext)
            .useRemoteTabs;
          if (remote) {
            messageManager.addMessageListener("DOMTitleChanged", this);
            messageManager.addMessageListener("DOMWindowClose", this);
            messageManager.addMessageListener("contextmenu", this);

            // If this window has remote tabs, switch to our tabpanels fork
            // which does asynchronous tab switching.
            this.mPanelContainer.classList.add("tabbrowser-tabpanels");
          }
          messageManager.addMessageListener("DOMWebNotificationClicked", this);
        ]]>
      </constructor>

      <method name="_generateUniquePanelID">
        <body><![CDATA[
          if (!this._uniquePanelIDCounter) {
            this._uniquePanelIDCounter = 0;
          }

          let outerID = window.QueryInterface(Ci.nsIInterfaceRequestor)
                              .getInterface(Ci.nsIDOMWindowUtils)
                              .outerWindowID;

          // We want panel IDs to be globally unique, that's why we include the
          // window ID. We switched to a monotonic counter as Date.now() lead
          // to random failures because of colliding IDs.
          return "panel-" + outerID + "-" + (++this._uniquePanelIDCounter);
        ]]></body>
      </method>

      <destructor>
        <![CDATA[
          for (var i = 0; i < this.mTabListeners.length; ++i) {
            let browser = this.getBrowserAtIndex(i);
            if (browser.registeredOpenURI) {
              this._placesAutocomplete.unregisterOpenPage(browser.registeredOpenURI);
              this._unifiedComplete.unregisterOpenPage(browser.registeredOpenURI);
              delete browser.registeredOpenURI;
            }
            browser.webProgress.removeProgressListener(this.mTabFilters[i]);
            this.mTabFilters[i].removeProgressListener(this.mTabListeners[i]);
            this.mTabFilters[i] = null;
            this.mTabListeners[i].destroy();
            this.mTabListeners[i] = null;
          }
          const nsIEventListenerService =
            Components.interfaces.nsIEventListenerService;
          let els = Components.classes["@mozilla.org/eventlistenerservice;1"]
                              .getService(nsIEventListenerService);
          els.removeSystemEventListener(document, "keydown", this, false);
          els.removeSystemEventListener(document, "keypress", this, false);
          window.removeEventListener("sizemodechange", this, false);

          if (gMultiProcessBrowser) {
            messageManager.removeMessageListener("DOMTitleChanged", this);
            messageManager.removeMessageListener("contextmenu", this);
          }
        ]]>
      </destructor>

      <!-- Deprecated stuff, implemented for backwards compatibility. -->
      <method name="enterTabbedMode">
        <body>
          Application.console.log("enterTabbedMode is an obsolete method and " +
                                  "will be removed in a future release.");
        </body>
      </method>
      <field name="mTabbedMode" readonly="true">true</field>
      <method name="setStripVisibilityTo">
        <parameter name="aShow"/>
        <body>
          this.tabContainer.visible = aShow;
        </body>
      </method>
      <method name="getStripVisibility">
        <body>
          return this.tabContainer.visible;
        </body>
      </method>

      <method name="_prepareForTabSwitch">
        <parameter name="toTab"/>
        <parameter name="fromTab"/>
        <body><![CDATA[
          const kTabSwitchTimeout = 300;
          let toBrowser = this.getBrowserForTab(toTab);
          let fromBrowser = fromTab ? this.getBrowserForTab(fromTab)
                                    : null;

          // We only want to wait for the MozAfterRemotePaint event if
          // the tab we're switching to is a remote tab, and if the tab
          // we're switching to isn't the one we've already got. The latter
          // case can occur when closing tabs before the currently selected
          // one.
          let shouldWait = toBrowser.getAttribute("remote") == "true" &&
                           toBrowser != fromBrowser;

          let switchPromise;

          if (shouldWait) {
            let timeoutId;
            let panels = this.mPanelContainer;

            // Both the timeout and MozAfterPaint promises use this same
            // logic to determine whether they should carry out the tab
            // switch, or reject it outright.
            let attemptTabSwitch = (aResolve, aReject) => {
              if (this.selectedBrowser == toBrowser) {
                aResolve();
              } else {
                // We switched away or closed the browser before we timed
                // out. We reject, which will cancel the tab switch.
                aReject();
              }
            };

            let timeoutPromise = new Promise((aResolve, aReject) => {
              timeoutId = setTimeout(() => {
                attemptTabSwitch(aResolve, aReject);
              }, kTabSwitchTimeout);
            });

            let paintPromise = new Promise((aResolve, aReject) => {
              toBrowser.addEventListener("MozAfterRemotePaint", function onRemotePaint() {
                toBrowser.removeEventListener("MozAfterRemotePaint", onRemotePaint);
                clearTimeout(timeoutId);
                attemptTabSwitch(aResolve, aReject);
              });
              toBrowser.QueryInterface(Ci.nsIFrameLoaderOwner)
                       .frameLoader
                       .requestNotifyAfterRemotePaint();
               // We need to activate the docShell on the tab we're switching
               // to - otherwise, we won't initiate a remote paint request and
               // therefore we won't get the MozAfterRemotePaint event that we're
               // waiting for.
               // Note that this happens, as we require, even if the timeout in the
               // timeoutPromise triggers before the paintPromise even runs.
               toBrowser.docShellIsActive = true;
            });

            switchPromise = Promise.race([paintPromise, timeoutPromise]);
          } else {
            // Activate the docShell on the tab we're switching to.
            toBrowser.docShellIsActive = true;

            // No need to wait - just resolve immediately to do the switch ASAP.
            switchPromise = Promise.resolve();
          }

          return switchPromise;
        ]]></body>
      </method>

      <method name="_deactivateContent">
        <parameter name="tab"/>
        <body><![CDATA[
          // It's unlikely, yet possible, that while we were waiting
          // to deactivate this tab, that something closed it and wiped
          // out the browser. For example, during a tab switch, while waiting
          // for the MozAfterRemotePaint event to fire, something closes the
          // original tab that the user had selected. If that's the case, then
          // there's nothing to deactivate.
          let browser = this.getBrowserForTab(tab);
          if (browser && this.selectedBrowser != browser) {
            browser.docShellIsActive = false;
          }
        ]]></body>
      </method>

      <method name="_finalizeTabSwitch">
        <parameter name="toTab"/>
        <parameter name="fromTab"/>
        <body><![CDATA[
          this._adjustFocusAfterTabSwitch(toTab, fromTab);
          this._deactivateContent(fromTab);

          let toBrowser = this.getBrowserForTab(toTab);
          toBrowser.setAttribute("type", "content-primary");

          let fromBrowser = this.getBrowserForTab(fromTab);
          // It's possible that the tab we're switching from closed
          // before we were able to finalize, in which case, fromBrowser
          // doesn't exist.
          if (fromBrowser) {
            fromBrowser.setAttribute("type", "content-targetable");
          }
        ]]></body>
      </method>

      <method name="_cancelTabSwitch">
        <parameter name="toTab"/>
        <body><![CDATA[
          this._deactivateContent(toTab);
        ]]></body>
      </method>

      <property name="mContextTab" readonly="true"
                onget="return TabContextMenu.contextTab;"/>
      <property name="mPrefs" readonly="true"
                onget="return Services.prefs;"/>
      <property name="mTabContainer" readonly="true"
                onget="return this.tabContainer;"/>
      <property name="mTabs" readonly="true"
                onget="return this.tabs;"/>
      <!--
        - Compatibility hack: several extensions depend on this property to
        - access the tab context menu or tab container, so keep that working for
        - now. Ideally we can remove this once extensions are using
        - tabbrowser.tabContextMenu and tabbrowser.tabContainer directly.
        -->
      <property name="mStrip" readonly="true">
        <getter>
        <![CDATA[
          return ({
            self: this,
            childNodes: [null, this.tabContextMenu, this.tabContainer],
            firstChild: { nextSibling: this.tabContextMenu },
            getElementsByAttribute: function (attr, attrValue) {
              if (attr == "anonid" && attrValue == "tabContextMenu")
                return [this.self.tabContextMenu];
              return [];
            },
            // Also support adding event listeners (forward to the tab container)
            addEventListener: function (a,b,c) { this.self.tabContainer.addEventListener(a,b,c); },
            removeEventListener: function (a,b,c) { this.self.tabContainer.removeEventListener(a,b,c); }
          });
        ]]>
        </getter>
      </property>
    </implementation>

    <handlers>
      <handler event="DOMWindowClose" phase="capturing">
        <![CDATA[
          if (!event.isTrusted)
            return;

          if (this.tabs.length == 1)
            return;

          var tab = this._getTabForContentWindow(event.target);
          if (tab) {
            this.removeTab(tab);
            event.preventDefault();
          }
        ]]>
      </handler>
      <handler event="DOMWillOpenModalDialog" phase="capturing">
        <![CDATA[
          if (!event.isTrusted)
            return;

          // We're about to open a modal dialog, make sure the opening
          // tab is brought to the front.
          // If this is a same-process modal dialog, then we're given its DOM
          // window as the event's target. For remote dialogs, we're given the
          // browser, but that's in the originalTarget.
          // XXX Why originalTarget for the browser?
          this.selectedTab = (event.target instanceof Window) ?
                               this._getTabForContentWindow(event.target.top) :
                               this.getTabForBrowser(event.originalTarget);
        ]]>
      </handler>
      <handler event="DOMTitleChanged">
        <![CDATA[
          if (!event.isTrusted)
            return;

          var contentWin = event.target.defaultView;
          if (contentWin != contentWin.top)
            return;

          var tab = this._getTabForContentWindow(contentWin);
          if (tab.hasAttribute("pending"))
            return;

          var titleChanged = this.setTabTitle(tab);
          if (titleChanged && !tab.selected && !tab.hasAttribute("busy"))
            tab.setAttribute("titlechanged", "true");
        ]]>
      </handler>
      <handler event="oop-browser-crashed">
        <![CDATA[
          if (!event.isTrusted)
            return;

          let browser = event.originalTarget;
          let title = browser.contentTitle;
          let uri = browser.currentURI;
          let icon = browser.mIconURL;

          this.updateBrowserRemotenessByURL(browser, "about:tabcrashed");

          browser.setAttribute("crashedPageTitle", title);
          browser.docShell.displayLoadError(Cr.NS_ERROR_CONTENT_CRASHED, uri, null);
          browser.removeAttribute("crashedPageTitle");
          let tab = this.getTabForBrowser(browser);
          this.setIcon(tab, icon);
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="tabbrowser-tabbox"
           extends="chrome://global/content/bindings/tabbox.xml#tabbox">
    <implementation>
      <property name="tabs" readonly="true"
                onget="return document.getBindingParent(this).tabContainer;"/>
    </implementation>
  </binding>

  <binding id="tabbrowser-arrowscrollbox" extends="chrome://global/content/bindings/scrollbox.xml#arrowscrollbox-clicktoscroll">
    <implementation>
      <!-- Override scrollbox.xml method, since our scrollbox's children are
           inherited from the binding parent -->
      <method name="_getScrollableElements">
        <body><![CDATA[
          return Array.filter(document.getBindingParent(this).childNodes,
                              this._canScrollToElement, this);
        ]]></body>
      </method>
      <method name="_canScrollToElement">
        <parameter name="tab"/>
        <body><![CDATA[
          return !tab.pinned && !tab.hidden;
        ]]></body>
      </method>
      <field name="_tabMarginLeft">null</field>
      <field name="_tabMarginRight">null</field>
      <method name="_calcTabMargins">
        <parameter name="aTab"/>
        <body><![CDATA[
          if (this._tabMarginLeft === null || this._tabMarginRight === null) {
            let tabMiddle = document.getAnonymousElementByAttribute(aTab, "class", "tab-background-middle");
            let tabMiddleStyle = window.getComputedStyle(tabMiddle, null);
            this._tabMarginLeft = parseFloat(tabMiddleStyle.marginLeft);
            this._tabMarginRight = parseFloat(tabMiddleStyle.marginRight);
          }
        ]]></body>
      </method>
      <method name="_adjustElementStartAndEnd">
        <parameter name="aTab"/>
        <parameter name="tabStart"/>
        <parameter name="tabEnd"/>
        <body><![CDATA[
          this._calcTabMargins(aTab);
          if (this._tabMarginLeft < 0) {
            tabStart = tabStart + this._tabMarginLeft;
          }
          if (this._tabMarginRight < 0) {
            tabEnd = tabEnd - this._tabMarginRight;
          }
          return [tabStart, tabEnd];
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="underflow" phase="capturing"><![CDATA[
        if (event.detail == 0)
          return; // Ignore vertical events

        var tabs = document.getBindingParent(this);
        tabs.removeAttribute("overflow");

        if (tabs._lastTabClosedByMouse)
          tabs._expandSpacerBy(this._scrollButtonDown.clientWidth);

        tabs.tabbrowser._removingTabs.forEach(tabs.tabbrowser.removeTab,
                                              tabs.tabbrowser);

        tabs._positionPinnedTabs();
      ]]></handler>
      <handler event="overflow"><![CDATA[
        if (event.detail == 0)
          return; // Ignore vertical events

        var tabs = document.getBindingParent(this);
        tabs.setAttribute("overflow", "true");
        tabs._positionPinnedTabs();
        tabs._handleTabSelect(false);
      ]]></handler>
    </handlers>
  </binding>

  <binding id="tabbrowser-tabs"
           extends="chrome://global/content/bindings/tabbox.xml#tabs">
    <resources>
      <stylesheet src="chrome://browser/content/tabbrowser.css"/>
    </resources>

    <content>
      <xul:hbox align="end">
        <xul:image class="tab-drop-indicator" anonid="tab-drop-indicator" collapsed="true"/>
      </xul:hbox>
      <xul:arrowscrollbox anonid="arrowscrollbox" orient="horizontal" flex="1"
                          style="min-width: 1px;"
                          class="tabbrowser-arrowscrollbox">
        <children includes="tab"/>
        <children/>
        <xul:toolbarbutton class="tabs-newtab-button"
                           anonid="tabs-newtab-button"
                           command="cmd_newNavigatorTab"
                           onclick="checkForMiddleClick(this, event);"
                           onmouseover="document.getBindingParent(this)._enterNewTab();"
                           onmouseout="document.getBindingParent(this)._leaveNewTab();"
                           tooltip="dynamic-shortcut-tooltip"/>
        <xul:spacer class="closing-tabs-spacer" anonid="closing-tabs-spacer"
                    style="width: 0;"/>
      </xul:arrowscrollbox>
    </content>

    <implementation implements="nsIDOMEventListener">
      <constructor>
        <![CDATA[
          this.mTabClipWidth = Services.prefs.getIntPref("browser.tabs.tabClipWidth");

          var tab = this.firstChild;
          tab.label = this.tabbrowser.mStringBundle.getString("tabs.emptyTabTitle");
          tab.setAttribute("crop", "end");
          tab.setAttribute("onerror", "this.removeAttribute('image');");

          window.addEventListener("resize", this, false);
          window.addEventListener("load", this, false);

          try {
            this._tabAnimationLoggingEnabled = Services.prefs.getBoolPref("browser.tabs.animationLogging.enabled");
          } catch (ex) {
            this._tabAnimationLoggingEnabled = false;
          }
          this._browserNewtabpageEnabled = Services.prefs.getBoolPref("browser.newtabpage.enabled");
        ]]>
      </constructor>

      <field name="tabbrowser" readonly="true">
        document.getElementById(this.getAttribute("tabbrowser"));
      </field>

      <field name="tabbox" readonly="true">
        this.tabbrowser.mTabBox;
      </field>

      <field name="contextMenu" readonly="true">
        document.getElementById("tabContextMenu");
      </field>

      <field name="mTabstripWidth">0</field>

      <field name="mTabstrip">
        document.getAnonymousElementByAttribute(this, "anonid", "arrowscrollbox");
      </field>

      <field name="_firstTab">null</field>
      <field name="_lastTab">null</field>
      <field name="_afterSelectedTab">null</field>
      <field name="_beforeHoveredTab">null</field>
      <field name="_afterHoveredTab">null</field>
      <field name="_hoveredTab">null</field>

      <property name="_isCustomizing" readonly="true">
        <getter>
          let root = document.documentElement;
          return root.getAttribute("customizing") == "true" ||
                 root.getAttribute("customize-exiting") == "true";
        </getter>
      </property>

      <method name="_setPositionalAttributes">
        <body><![CDATA[
          let visibleTabs = this.tabbrowser.visibleTabs;

          if (!visibleTabs.length)
            return;

          let selectedIndex = visibleTabs.indexOf(this.selectedItem);

          let lastVisible = visibleTabs.length - 1;

          if (this._afterSelectedTab)
            this._afterSelectedTab.removeAttribute("afterselected-visible");
          if (this.selectedItem.closing || selectedIndex == lastVisible) {
            this._afterSelectedTab = null;
          } else {
            this._afterSelectedTab = visibleTabs[selectedIndex + 1];
            this._afterSelectedTab.setAttribute("afterselected-visible",
                                                "true");
          }

          if (this._firstTab)
            this._firstTab.removeAttribute("first-visible-tab");
          this._firstTab = visibleTabs[0];
          this._firstTab.setAttribute("first-visible-tab", "true");
          if (this._lastTab)
            this._lastTab.removeAttribute("last-visible-tab");
          this._lastTab = visibleTabs[lastVisible];
          this._lastTab.setAttribute("last-visible-tab", "true");

          let hoveredTab = this._hoveredTab;
          if (hoveredTab) {
            hoveredTab._mouseleave();
            hoveredTab._mouseenter();
          }
        ]]></body>
      </method>

      <field name="_blockDblClick">false</field>

      <field name="_tabDropIndicator">
        document.getAnonymousElementByAttribute(this, "anonid", "tab-drop-indicator");
      </field>

      <field name="_dragOverDelay">350</field>
      <field name="_dragTime">0</field>

      <field name="_container" readonly="true"><![CDATA[
        this.parentNode && this.parentNode.localName == "toolbar" ? this.parentNode : this;
      ]]></field>

      <field name="_propagatedVisibilityOnce">false</field>

      <property name="visible"
                onget="return !this._container.collapsed;">
        <setter><![CDATA[
          if (val == this.visible &&
              this._propagatedVisibilityOnce)
            return val;

          this._container.collapsed = !val;

          this._propagateVisibility();
          this._propagatedVisibilityOnce = true;

          return val;
        ]]></setter>
      </property>

      <method name="_enterNewTab">
        <body><![CDATA[
          let visibleTabs = this.tabbrowser.visibleTabs;
          let candidate = visibleTabs[visibleTabs.length - 1];
          if (!candidate.selected) {
            this._beforeHoveredTab = candidate;
            candidate.setAttribute("beforehovered", "true");
          }
        ]]></body>
      </method>

      <method name="_leaveNewTab">
        <body><![CDATA[
          if (this._beforeHoveredTab) {
            this._beforeHoveredTab.removeAttribute("beforehovered");
            this._beforeHoveredTab = null;
          }
        ]]></body>
      </method>

      <method name="_propagateVisibility">
        <body><![CDATA[
          let visible = this.visible;

          document.getElementById("menu_closeWindow").hidden = !visible;
          document.getElementById("menu_close").setAttribute("label",
            this.tabbrowser.mStringBundle.getString(visible ? "tabs.closeTab" : "tabs.close"));

          TabsInTitlebar.allowedBy("tabs-visible", visible);
        ]]></body>
      </method>

      <method name="updateVisibility">
        <body><![CDATA[
          if (this.childNodes.length - this.tabbrowser._removingTabs.length == 1)
            this.visible = window.toolbar.visible;
          else
            this.visible = true;
        ]]></body>
      </method>

      <method name="adjustTabstrip">
        <body><![CDATA[
          let numTabs = this.childNodes.length -
                        this.tabbrowser._removingTabs.length;
          if (numTabs > 2) {
            // This is an optimization to avoid layout flushes by calling
            // getBoundingClientRect() when we just opened a second tab. In
            // this case it's highly unlikely that the tab width is smaller
            // than mTabClipWidth and the tab close button obscures too much
            // of the tab's label. In the edge case of the window being too
            // narrow (or if tabClipWidth has been set to a way higher value),
            // we'll correct the 'closebuttons' attribute after the tabopen
            // animation has finished.

            let tab = this.tabbrowser.visibleTabs[this.tabbrowser._numPinnedTabs];
            if (tab && tab.getBoundingClientRect().width <= this.mTabClipWidth) {
              this.setAttribute("closebuttons", "activetab");
              return;
            }
          }
          this.removeAttribute("closebuttons");
        ]]></body>
      </method>

      <method name="_handleTabSelect">
        <parameter name="aSmoothScroll"/>
        <body><![CDATA[
          if (this.getAttribute("overflow") == "true")
            this.mTabstrip.ensureElementIsVisible(this.selectedItem, aSmoothScroll);
        ]]></body>
      </method>

      <method name="_fillTrailingGap">
        <body><![CDATA[
          try {
            // if we're at the right side (and not the logical end,
            // which is why this works for both LTR and RTL)
            // of the tabstrip, we need to ensure that we stay
            // completely scrolled to the right side
            var tabStrip = this.mTabstrip;
            if (tabStrip.scrollPosition + tabStrip.scrollClientSize >
                tabStrip.scrollSize)
              tabStrip.scrollByPixels(-1);
          } catch (e) {}
        ]]></body>
      </method>

      <field name="_closingTabsSpacer">
        document.getAnonymousElementByAttribute(this, "anonid", "closing-tabs-spacer");
      </field>

      <field name="_tabDefaultMaxWidth">NaN</field>
      <field name="_lastTabClosedByMouse">false</field>
      <field name="_hasTabTempMaxWidth">false</field>

      <!-- Try to keep the active tab's close button under the mouse cursor -->
      <method name="_lockTabSizing">
        <parameter name="aTab"/>
        <body><![CDATA[
          var tabs = this.tabbrowser.visibleTabs;
          if (!tabs.length)
            return;

          var isEndTab = (aTab._tPos > tabs[tabs.length-1]._tPos);
          var tabWidth = aTab.getBoundingClientRect().width;

          if (!this._tabDefaultMaxWidth)
            this._tabDefaultMaxWidth =
              parseFloat(window.getComputedStyle(aTab).maxWidth);
          this._lastTabClosedByMouse = true;

          if (this.getAttribute("overflow") == "true") {
            // Don't need to do anything if we're in overflow mode and aren't scrolled
            // all the way to the right, or if we're closing the last tab.
            if (isEndTab || !this.mTabstrip._scrollButtonDown.disabled)
              return;

            // If the tab has an owner that will become the active tab, the owner will
            // be to the left of it, so we actually want the left tab to slide over.
            // This can't be done as easily in non-overflow mode, so we don't bother.
            if (aTab.owner)
              return;

            this._expandSpacerBy(tabWidth);
          } else { // non-overflow mode
            // Locking is neither in effect nor needed, so let tabs expand normally.
            if (isEndTab && !this._hasTabTempMaxWidth)
              return;

            let numPinned = this.tabbrowser._numPinnedTabs;
            // Force tabs to stay the same width, unless we're closing the last tab,
            // which case we need to let them expand just enough so that the overall
            // tabbar width is the same.
            if (isEndTab) {
              let numNormalTabs = tabs.length - numPinned;
              tabWidth = tabWidth * (numNormalTabs + 1) / numNormalTabs;
              if (tabWidth > this._tabDefaultMaxWidth)
                tabWidth = this._tabDefaultMaxWidth;
            }
            tabWidth += "px";
            for (let i = numPinned; i < tabs.length; i++) {
              let tab = tabs[i];
              tab.style.setProperty("max-width", tabWidth, "important");
              if (!isEndTab) { // keep tabs the same width
                tab.style.transition = "none";
                tab.clientTop; // flush styles to skip animation; see bug 649247
                tab.style.transition = "";
              }
            }
            this._hasTabTempMaxWidth = true;
            this.tabbrowser.addEventListener("mousemove", this, false);
            window.addEventListener("mouseout", this, false);
          }
        ]]></body>
      </method>

      <method name="_expandSpacerBy">
        <parameter name="pixels"/>
        <body><![CDATA[
          let spacer = this._closingTabsSpacer;
          spacer.style.width = parseFloat(spacer.style.width) + pixels + "px";
          this.setAttribute("using-closing-tabs-spacer", "true");
          this.tabbrowser.addEventListener("mousemove", this, false);
          window.addEventListener("mouseout", this, false);
        ]]></body>
      </method>

      <method name="_unlockTabSizing">
        <body><![CDATA[
          this.tabbrowser.removeEventListener("mousemove", this, false);
          window.removeEventListener("mouseout", this, false);

          if (this._hasTabTempMaxWidth) {
            this._hasTabTempMaxWidth = false;
            let tabs = this.tabbrowser.visibleTabs;
            for (let i = 0; i < tabs.length; i++)
              tabs[i].style.maxWidth = "";
          }

          if (this.hasAttribute("using-closing-tabs-spacer")) {
            this.removeAttribute("using-closing-tabs-spacer");
            this._closingTabsSpacer.style.width = 0;
          }
        ]]></body>
      </method>

      <field name="_lastNumPinned">0</field>
      <method name="_positionPinnedTabs">
        <body><![CDATA[
          var numPinned = this.tabbrowser._numPinnedTabs;
          var doPosition = this.getAttribute("overflow") == "true" &&
                           numPinned > 0;

          if (doPosition) {
            this.setAttribute("positionpinnedtabs", "true");

            let scrollButtonWidth = this.mTabstrip._scrollButtonDown.getBoundingClientRect().width;
            let paddingStart = this.mTabstrip.scrollboxPaddingStart;
            let width = 0;

            for (let i = numPinned - 1; i >= 0; i--) {
              let tab = this.childNodes[i];
              width += tab.getBoundingClientRect().width;
              tab.style.MozMarginStart = - (width + scrollButtonWidth + paddingStart) + "px";
            }

            this.style.MozPaddingStart = width + paddingStart + "px";

          } else {
            this.removeAttribute("positionpinnedtabs");

            for (let i = 0; i < numPinned; i++) {
              let tab = this.childNodes[i];
              tab.style.MozMarginStart = "";
            }

            this.style.MozPaddingStart = "";
          }

          if (this._lastNumPinned != numPinned) {
            this._lastNumPinned = numPinned;
            this._handleTabSelect(false);
          }
        ]]></body>
      </method>

      <method name="_animateTabMove">
        <parameter name="event"/>
        <body><![CDATA[
          let draggedTab = event.dataTransfer.mozGetDataAt(TAB_DROP_TYPE, 0);

          if (this.getAttribute("movingtab") != "true") {
            this.setAttribute("movingtab", "true");
            this.selectedItem = draggedTab;
          }

          if (!("animLastScreenX" in draggedTab._dragData))
            draggedTab._dragData.animLastScreenX = draggedTab._dragData.screenX;

          let screenX = event.screenX;
          if (screenX == draggedTab._dragData.animLastScreenX)
            return;

          let draggingRight = screenX > draggedTab._dragData.animLastScreenX;
          draggedTab._dragData.animLastScreenX = screenX;

          let rtl = (window.getComputedStyle(this).direction == "rtl");
          let pinned = draggedTab.pinned;
          let numPinned = this.tabbrowser._numPinnedTabs;
          let tabs = this.tabbrowser.visibleTabs
                                    .slice(pinned ? 0 : numPinned,
                                           pinned ? numPinned : undefined);
          if (rtl)
            tabs.reverse();
          let tabWidth = draggedTab.getBoundingClientRect().width;

          // Move the dragged tab based on the mouse position.

          let leftTab = tabs[0];
          let rightTab = tabs[tabs.length - 1];
          let tabScreenX = draggedTab.boxObject.screenX;
          let translateX = screenX - draggedTab._dragData.screenX;
          if (!pinned)
            translateX += this.mTabstrip.scrollPosition - draggedTab._dragData.scrollX;
          let leftBound = leftTab.boxObject.screenX - tabScreenX;
          let rightBound = (rightTab.boxObject.screenX + rightTab.boxObject.width) -
                           (tabScreenX + tabWidth);
          translateX = Math.max(translateX, leftBound);
          translateX = Math.min(translateX, rightBound);
          draggedTab.style.transform = "translateX(" + translateX + "px)";

          // Determine what tab we're dragging over.
          // * Point of reference is the center of the dragged tab. If that
          //   point touches a background tab, the dragged tab would take that
          //   tab's position when dropped.
          // * We're doing a binary search in order to reduce the amount of
          //   tabs we need to check.

          let tabCenter = tabScreenX + translateX + tabWidth / 2;
          let newIndex = -1;
          let oldIndex = "animDropIndex" in draggedTab._dragData ?
                         draggedTab._dragData.animDropIndex : draggedTab._tPos;
          let low = 0;
          let high = tabs.length - 1;
          while (low <= high) {
            let mid = Math.floor((low + high) / 2);
            if (tabs[mid] == draggedTab &&
                ++mid > high)
              break;
            let boxObject = tabs[mid].boxObject;
            let screenX = boxObject.screenX + getTabShift(tabs[mid], oldIndex);
            if (screenX > tabCenter) {
              high = mid - 1;
            } else if (screenX + boxObject.width < tabCenter) {
              low = mid + 1;
            } else {
              newIndex = tabs[mid]._tPos;
              break;
            }
          }
          if (newIndex >= oldIndex)
            newIndex++;
          if (newIndex < 0 || newIndex == oldIndex)
            return;
          draggedTab._dragData.animDropIndex = newIndex;

          // Shift background tabs to leave a gap where the dragged tab
          // would currently be dropped.

          for (let tab of tabs) {
            if (tab != draggedTab) {
              let shift = getTabShift(tab, newIndex);
              tab.style.transform = shift ? "translateX(" + shift + "px)" : "";
            }
          }

          function getTabShift(tab, dropIndex) {
            if (tab._tPos < draggedTab._tPos && tab._tPos >= dropIndex)
              return rtl ? -tabWidth : tabWidth;
            if (tab._tPos > draggedTab._tPos && tab._tPos < dropIndex)
              return rtl ? tabWidth : -tabWidth;
            return 0;
          }
        ]]></body>
      </method>

      <method name="_finishAnimateTabMove">
        <body><![CDATA[
          if (this.getAttribute("movingtab") != "true")
            return;

          for (let tab of this.tabbrowser.visibleTabs)
            tab.style.transform = "";

          this.removeAttribute("movingtab");

          this._handleTabSelect();
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          switch (aEvent.type) {
            case "load":
              this.updateVisibility();
              break;
            case "resize":
              if (aEvent.target != window)
                break;

              TabsInTitlebar.updateAppearance();

              var width = this.mTabstrip.boxObject.width;
              if (width != this.mTabstripWidth) {
                this.adjustTabstrip();
                this._fillTrailingGap();
                this._handleTabSelect();
                this.mTabstripWidth = width;
              }

              this.tabbrowser.updateWindowResizers();
              break;
            case "mouseout":
              // If the "related target" (the node to which the pointer went) is not
              // a child of the current document, the mouse just left the window.
              let relatedTarget = aEvent.relatedTarget;
              if (relatedTarget && relatedTarget.ownerDocument == document)
                break;
            case "mousemove":
              if (document.getElementById("tabContextMenu").state != "open")
                this._unlockTabSizing();
              break;
          }
        ]]></body>
      </method>

      <field name="_animateElement">
        this.mTabstrip._scrollButtonDown;
      </field>

      <method name="_notifyBackgroundTab">
        <parameter name="aTab"/>
        <body><![CDATA[
          if (aTab.pinned)
            return;

          var scrollRect = this.mTabstrip.scrollClientRect;
          var tab = aTab.getBoundingClientRect();
          this.mTabstrip._calcTabMargins(aTab);

          // DOMRect left/right properties are immutable.
          tab = {left: tab.left, right: tab.right};

          // Is the new tab already completely visible?
          if (scrollRect.left <= tab.left && tab.right <= scrollRect.right)
            return;

          if (this.mTabstrip.smoothScroll) {
            let selected = !this.selectedItem.pinned &&
                           this.selectedItem.getBoundingClientRect();
            if (selected) {
              selected = {left: selected.left, right: selected.right};
              // Need to take in to account the width of the left/right margins on tabs.
              selected.left = selected.left + this.mTabstrip._tabMarginLeft;
              selected.right = selected.right - this.mTabstrip._tabMarginRight;
            }

            tab.left += this.mTabstrip._tabMarginLeft;
            tab.right -= this.mTabstrip._tabMarginRight;

            // Can we make both the new tab and the selected tab completely visible?
            if (!selected ||
                Math.max(tab.right - selected.left, selected.right - tab.left) <=
                  scrollRect.width) {
              this.mTabstrip.ensureElementIsVisible(aTab);
              return;
            }

            this.mTabstrip._smoothScrollByPixels(this.mTabstrip._isRTLScrollbox ?
                                                 selected.right - scrollRect.right :
                                                 selected.left - scrollRect.left);
          }

          if (!this._animateElement.hasAttribute("notifybgtab")) {
            this._animateElement.setAttribute("notifybgtab", "true");
            setTimeout(function (ele) {
              ele.removeAttribute("notifybgtab");
            }, 150, this._animateElement);
          }
        ]]></body>
      </method>

      <method name="_getDragTargetTab">
        <parameter name="event"/>
        <body><![CDATA[
          let tab = event.target.localName == "tab" ? event.target : null;
          if (tab &&
              (event.type == "drop" || event.type == "dragover") &&
              event.dataTransfer.dropEffect == "link") {
            let boxObject = tab.boxObject;
            if (event.screenX < boxObject.screenX + boxObject.width * .25 ||
                event.screenX > boxObject.screenX + boxObject.width * .75)
              return null;
          }
          return tab;
        ]]></body>
      </method>

      <method name="_getDropIndex">
        <parameter name="event"/>
        <body><![CDATA[
          var tabs = this.childNodes;
          var tab = this._getDragTargetTab(event);
          if (window.getComputedStyle(this, null).direction == "ltr") {
            for (let i = tab ? tab._tPos : 0; i < tabs.length; i++)
              if (event.screenX < tabs[i].boxObject.screenX + tabs[i].boxObject.width / 2)
                return i;
          } else {
            for (let i = tab ? tab._tPos : 0; i < tabs.length; i++)
              if (event.screenX > tabs[i].boxObject.screenX + tabs[i].boxObject.width / 2)
                return i;
          }
          return tabs.length;
        ]]></body>
      </method>

      <method name="_setEffectAllowedForDataTransfer">
        <parameter name="event"/>
        <body><![CDATA[
          var dt = event.dataTransfer;
          // Disallow dropping multiple items
          if (dt.mozItemCount > 1)
            return dt.effectAllowed = "none";

          var types = dt.mozTypesAt(0);
          var sourceNode = null;
          // tabs are always added as the first type
          if (types[0] == TAB_DROP_TYPE) {
            var sourceNode = dt.mozGetDataAt(TAB_DROP_TYPE, 0);
            if (sourceNode instanceof XULElement &&
                sourceNode.localName == "tab" &&
                sourceNode.ownerDocument.defaultView instanceof ChromeWindow &&
                sourceNode.ownerDocument.documentElement.getAttribute("windowtype") == "navigator:browser" &&
                sourceNode.ownerDocument.defaultView.gBrowser.tabContainer == sourceNode.parentNode) {
              // Do not allow transfering a private tab to a non-private window
              // and vice versa.
              if (PrivateBrowsingUtils.isWindowPrivate(window) !=
                  PrivateBrowsingUtils.isWindowPrivate(sourceNode.ownerDocument.defaultView))
                return dt.effectAllowed = "none";

              if (window.gMultiProcessBrowser !=
                  sourceNode.ownerDocument.defaultView.gMultiProcessBrowser)
                return dt.effectAllowed = "none";

              return dt.effectAllowed = event.altKey ? "copy" : "move";
            }
          }

          if (browserDragAndDrop.canDropLink(event)) {
            // Here we need to do this manually
            return dt.effectAllowed = dt.dropEffect = "link";
          }
          return dt.effectAllowed = "none";
        ]]></body>
      </method>

      <method name="_handleNewTab">
        <parameter name="tab"/>
        <body><![CDATA[
          if (tab.parentNode != this)
            return;
          tab._fullyOpen = true;

          this.adjustTabstrip();

          if (tab.getAttribute("selected") == "true") {
            this._fillTrailingGap();
            this._handleTabSelect();
          } else {
            this._notifyBackgroundTab(tab);
          }

          // XXXmano: this is a temporary workaround for bug 345399
          // We need to manually update the scroll buttons disabled state
          // if a tab was inserted to the overflow area or removed from it
          // without any scrolling and when the tabbar has already
          // overflowed.
          this.mTabstrip._updateScrollButtonsDisabledState();
        ]]></body>
      </method>

      <method name="_canAdvanceToTab">
        <parameter name="aTab"/>
        <body>
        <![CDATA[
          return !aTab.closing;
        ]]>
        </body>
      </method>

      <method name="_handleTabTelemetryStart">
        <parameter name="aTab"/>
        <parameter name="aURI"/>
        <body>
        <![CDATA[
          // Animation-smoothness telemetry/logging
          if (Services.telemetry.canRecord || this._tabAnimationLoggingEnabled) {
            if (aURI == "about:newtab" && (aTab._tPos == 1 || aTab._tPos == 2)) {
              // Indicate newtab page animation where other tabs are unaffected
              // (for which case, the 2nd or 3rd tabs are good representatives, even if not absolute)
              aTab._recordingTabOpenPlain = true;
            }
            aTab._recordingHandle = window.QueryInterface(Ci.nsIInterfaceRequestor)
                                          .getInterface(Ci.nsIDOMWindowUtils)
                                          .startFrameTimeRecording();
          }

          // Overall animation duration
          aTab._animStartTime = Date.now();
        ]]>
        </body>
      </method>

      <method name="_handleTabTelemetryEnd">
        <parameter name="aTab"/>
        <body>
        <![CDATA[
          if (!aTab._animStartTime) {
            return;
          }

          Services.telemetry.getHistogramById(aTab.closing ?
                                              "FX_TAB_ANIM_CLOSE_MS" :
                                              "FX_TAB_ANIM_OPEN_MS")
                            .add(Date.now() - aTab._animStartTime);
          aTab._animStartTime = 0;

          // Handle tab animation smoothness telemetry/logging of frame intervals and paint times
          if (!("_recordingHandle" in aTab)) {
            return;
          }

          let intervals = window.QueryInterface(Ci.nsIInterfaceRequestor)
                                .getInterface(Ci.nsIDOMWindowUtils)
                                .stopFrameTimeRecording(aTab._recordingHandle);
          delete aTab._recordingHandle;
          let frameCount = intervals.length;

          if (this._tabAnimationLoggingEnabled) {
            let msg = "Tab " + (aTab.closing ? "close" : "open") + " (Frame-interval):\n";
            for (let i = 0; i < frameCount; i++) {
              msg += Math.round(intervals[i]) + "\n";
            }
            Services.console.logStringMessage(msg);
          }

          // For telemetry, the first frame interval is not useful since it may represent an interval
          // to a relatively old frame (prior to recording start). So we'll ignore it for the average.
          if (frameCount > 1) {
            let averageInterval = 0;
            for (let i = 1; i < frameCount; i++) {
              averageInterval += intervals[i];
            };
            averageInterval = averageInterval / (frameCount - 1);

            Services.telemetry.getHistogramById("FX_TAB_ANIM_ANY_FRAME_INTERVAL_MS").add(averageInterval);

            if (aTab._recordingTabOpenPlain) {
              delete aTab._recordingTabOpenPlain;
              // While we do have a telemetry probe NEWTAB_PAGE_ENABLED to monitor newtab preview, it'll be
              // easier to overview the data without slicing by it. Hence the additional histograms with _PREVIEW.
              let preview = this._browserNewtabpageEnabled ? "_PREVIEW" : "";
              Services.telemetry.getHistogramById("FX_TAB_ANIM_OPEN" + preview + "_FRAME_INTERVAL_MS").add(averageInterval);
            }
          }
        ]]>
        </body>
      </method>

      <!-- Deprecated stuff, implemented for backwards compatibility. -->
      <property name="mAllTabsPopup" readonly="true"
                onget="return document.getElementById('alltabs-popup');"/>
    </implementation>

    <handlers>
      <handler event="TabSelect" action="this._handleTabSelect();"/>

      <handler event="transitionend"><![CDATA[
        if (event.propertyName != "max-width")
          return;

        var tab = event.target;

        this._handleTabTelemetryEnd(tab);

        if (tab.getAttribute("fadein") == "true") {
          if (tab._fullyOpen)
            this.adjustTabstrip();
          else
            this._handleNewTab(tab);
        } else if (tab.closing) {
          this.tabbrowser._endRemoveTab(tab);
        }
      ]]></handler>

      <handler event="dblclick"><![CDATA[

        if (event.button != 0 ||
            event.originalTarget.localName != "box")
          return;

        // See hack note in the tabbrowser-close-tab-button binding
        if (!this._blockDblClick)
          BrowserOpenTab();

        event.preventDefault();
      ]]></handler>

      <handler event="click" button="0" phase="capturing"><![CDATA[
        /* Catches extra clicks meant for the in-tab close button.
         * Placed here to avoid leaking (a temporary handler added from the
         * in-tab close button binding would close over the tab and leak it
         * until the handler itself was removed). (bug 897751)
         *
         * The only sequence in which a second click event (i.e. dblclik)
         * can be dispatched on an in-tab close button is when it is shown
         * after the first click (i.e. the first click event was dispatched
         * on the tab). This happens when we show the close button only on
         * the active tab. (bug 352021)
         * The only sequence in which a third click event can be dispatched
         * on an in-tab close button is when the tab was opened with a
         * double click on the tabbar. (bug 378344)
         * In both cases, it is most likely that the close button area has
         * been accidentally clicked, therefore we do not close the tab.
         *
         * We don't want to ignore processing of more than one click event,
         * though, since the user might actually be repeatedly clicking to
         * close many tabs at once.
         */
        let target = event.originalTarget;
        if (target.classList.contains('tab-close-button')) {
          // We preemptively set this to allow the closing-multiple-tabs-
          // in-a-row case.
          if (this._blockDblClick) {
            target._ignoredCloseButtonClicks = true;
          } else if (event.detail > 1 && !target._ignoredCloseButtonClicks) {
            target._ignoredCloseButtonClicks = true;
            event.stopPropagation();
            return;
          } else {
            // Reset the "ignored click" flag
            target._ignoredCloseButtonClicks = false;
          }
        }

        /* Protects from close-tab-button errant doubleclick:
         * Since we're removing the event target, if the user
         * double-clicks the button, the dblclick event will be dispatched
         * with the tabbar as its event target (and explicit/originalTarget),
         * which treats that as a mouse gesture for opening a new tab.
         * In this context, we're manually blocking the dblclick event
         * (see tabbrowser-close-tab-button dblclick handler).
         */
        if (this._blockDblClick) {
          if (!("_clickedTabBarOnce" in this)) {
            this._clickedTabBarOnce = true;
            return;
          }
          delete this._clickedTabBarOnce;
          this._blockDblClick = false;
        }
      ]]></handler>

      <handler event="click"><![CDATA[
        if (event.button != 1)
          return;

        if (event.target.localName == "tab") {
          this.tabbrowser.removeTab(event.target, {animate: true, byMouse: true});
        } else if (event.originalTarget.localName == "box") {
          BrowserOpenTab();
        } else {
          return;
        }

        event.stopPropagation();
      ]]></handler>

      <handler event="keydown" group="system"><![CDATA[
        if (event.altKey || event.shiftKey ||
            !event.metaKey)
          return;

        // Don't check if the event was already consumed because tab navigation
        // should work always for better user experience.

        switch (event.keyCode) {
          case KeyEvent.DOM_VK_UP:
            this.tabbrowser.moveTabBackward();
            break;
          case KeyEvent.DOM_VK_DOWN:
            this.tabbrowser.moveTabForward();
            break;
          case KeyEvent.DOM_VK_RIGHT:
          case KeyEvent.DOM_VK_LEFT:
            this.tabbrowser.moveTabOver(event);
            break;
          case KeyEvent.DOM_VK_HOME:
            this.tabbrowser.moveTabToStart();
            break;
          case KeyEvent.DOM_VK_END:
            this.tabbrowser.moveTabToEnd();
            break;
          default:
            // Consume the keydown event for the above keyboard
            // shortcuts only.
            return;
        }
        event.preventDefault();
      ]]></handler>

      <handler event="dragstart"><![CDATA[
        var tab = this._getDragTargetTab(event);
        if (!tab || this._isCustomizing)
          return;

        let dt = event.dataTransfer;
        dt.mozSetDataAt(TAB_DROP_TYPE, tab, 0);
        let browser = tab.linkedBrowser;

        // We must not set text/x-moz-url or text/plain data here,
        // otherwise trying to deatch the tab by dropping it on the desktop
        // may result in an "internet shortcut"
        dt.mozSetDataAt("text/x-moz-text-internal", browser.currentURI.spec, 0);

        // Set the cursor to an arrow during tab drags.
        dt.mozCursor = "default";

        // Create a canvas to which we capture the current tab.
        // Until canvas is HiDPI-aware (bug 780362), we need to scale the desired
        // canvas size (in CSS pixels) to the window's backing resolution in order
        // to get a full-resolution drag image for use on HiDPI displays.
        let windowUtils = window.getInterface(Ci.nsIDOMWindowUtils);
        let scale = windowUtils.screenPixelsPerCSSPixel / windowUtils.fullZoom;
        let canvas = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas");
        canvas.mozOpaque = true;
        canvas.width = 160 * scale;
        canvas.height = 90 * scale;
        if (!gMultiProcessBrowser) {
          // Bug 863512 - Make page thumbnails work in e10s
          PageThumbs.captureToCanvas(browser.contentWindow, canvas);
        }
        dt.setDragImage(canvas, -16 * scale, -16 * scale);

        // _dragData.offsetX/Y give the coordinates that the mouse should be
        // positioned relative to the corner of the new window created upon
        // dragend such that the mouse appears to have the same position
        // relative to the corner of the dragged tab.
        function clientX(ele) ele.getBoundingClientRect().left;
        let tabOffsetX = clientX(tab) - clientX(this);
        tab._dragData = {
          offsetX: event.screenX - window.screenX - tabOffsetX,
          offsetY: event.screenY - window.screenY,
          scrollX: this.mTabstrip.scrollPosition,
          screenX: event.screenX
        };

        event.stopPropagation();
      ]]></handler>

      <handler event="dragover"><![CDATA[
        var effects = this._setEffectAllowedForDataTransfer(event);

        var ind = this._tabDropIndicator;
        if (effects == "" || effects == "none") {
          ind.collapsed = true;
          return;
        }
        event.preventDefault();
        event.stopPropagation();

        var tabStrip = this.mTabstrip;
        var ltr = (window.getComputedStyle(this, null).direction == "ltr");

        // autoscroll the tab strip if we drag over the scroll
        // buttons, even if we aren't dragging a tab, but then
        // return to avoid drawing the drop indicator
        var pixelsToScroll = 0;
        if (this.getAttribute("overflow") == "true") {
          var targetAnonid = event.originalTarget.getAttribute("anonid");
          switch (targetAnonid) {
            case "scrollbutton-up":
              pixelsToScroll = tabStrip.scrollIncrement * -1;
              break;
            case "scrollbutton-down":
              pixelsToScroll = tabStrip.scrollIncrement;
              break;
          }
          if (pixelsToScroll)
            tabStrip.scrollByPixels((ltr ? 1 : -1) * pixelsToScroll);
        }

        if (effects == "move" &&
            this == event.dataTransfer.mozGetDataAt(TAB_DROP_TYPE, 0).parentNode) {
          ind.collapsed = true;
          this._animateTabMove(event);
          return;
        }

        this._finishAnimateTabMove();

        if (effects == "link") {
          let tab = this._getDragTargetTab(event);
          if (tab) {
            if (!this._dragTime)
              this._dragTime = Date.now();
            if (Date.now() >= this._dragTime + this._dragOverDelay)
              this.selectedItem = tab;
            ind.collapsed = true;
            return;
          }
        }

        var rect = tabStrip.getBoundingClientRect();
        var newMargin;
        if (pixelsToScroll) {
          // if we are scrolling, put the drop indicator at the edge
          // so that it doesn't jump while scrolling
          let scrollRect = tabStrip.scrollClientRect;
          let minMargin = scrollRect.left - rect.left;
          let maxMargin = Math.min(minMargin + scrollRect.width,
                                   scrollRect.right);
          if (!ltr)
            [minMargin, maxMargin] = [this.clientWidth - maxMargin,
                                      this.clientWidth - minMargin];
          newMargin = (pixelsToScroll > 0) ? maxMargin : minMargin;
        }
        else {
          let newIndex = this._getDropIndex(event);
          if (newIndex == this.childNodes.length) {
            let tabRect = this.childNodes[newIndex-1].getBoundingClientRect();
            if (ltr)
              newMargin = tabRect.right - rect.left;
            else
              newMargin = rect.right - tabRect.left;
          }
          else {
            let tabRect = this.childNodes[newIndex].getBoundingClientRect();
            if (ltr)
              newMargin = tabRect.left - rect.left;
            else
              newMargin = rect.right - tabRect.right;
          }
        }

        ind.collapsed = false;

        newMargin += ind.clientWidth / 2;
        if (!ltr)
          newMargin *= -1;

        ind.style.transform = "translate(" + Math.round(newMargin) + "px)";
        ind.style.MozMarginStart = (-ind.clientWidth) + "px";
      ]]></handler>

      <handler event="drop"><![CDATA[
        var dt = event.dataTransfer;
        var dropEffect = dt.dropEffect;
        var draggedTab;
        if (dropEffect != "link") { // copy or move
          draggedTab = dt.mozGetDataAt(TAB_DROP_TYPE, 0);
          // not our drop then
          if (!draggedTab)
            return;
        }

        this._tabDropIndicator.collapsed = true;
        event.stopPropagation();
        if (draggedTab && dropEffect == "copy") {
          // copy the dropped tab (wherever it's from)
          let newIndex = this._getDropIndex(event);
          let newTab = this.tabbrowser.duplicateTab(draggedTab);
          this.tabbrowser.moveTabTo(newTab, newIndex);
          if (draggedTab.parentNode != this || event.shiftKey)
            this.selectedItem = newTab;
        } else if (draggedTab && draggedTab.parentNode == this) {
          this._finishAnimateTabMove();

          // actually move the dragged tab
          if ("animDropIndex" in draggedTab._dragData) {
            let newIndex = draggedTab._dragData.animDropIndex;
            if (newIndex > draggedTab._tPos)
              newIndex--;
            this.tabbrowser.moveTabTo(draggedTab, newIndex);
          }
        } else if (draggedTab) {
          // swap the dropped tab with a new one we create and then close
          // it in the other window (making it seem to have moved between
          // windows)
          let newIndex = this._getDropIndex(event);
          let newTab = this.tabbrowser.addTab("about:blank");
          let newBrowser = this.tabbrowser.getBrowserForTab(newTab);
          // Stop the about:blank load
          newBrowser.stop();
          // make sure it has a docshell
          newBrowser.docShell;

          let numPinned = this.tabbrowser._numPinnedTabs;
          if (newIndex < numPinned || draggedTab.pinned && newIndex == numPinned)
            this.tabbrowser.pinTab(newTab);
          this.tabbrowser.moveTabTo(newTab, newIndex);

          // We need to select the tab before calling swapBrowsersAndCloseOther
          // so that window.content in chrome windows points to the right tab
          // when pagehide/show events are fired.
          this.tabbrowser.selectedTab = newTab;

          draggedTab.parentNode._finishAnimateTabMove();
          this.tabbrowser.swapBrowsersAndCloseOther(newTab, draggedTab);

          // Call updateCurrentBrowser to make sure the URL bar is up to date
          // for our new tab after we've done swapBrowsersAndCloseOther.
          this.tabbrowser.updateCurrentBrowser(true);
        } else {
          // Pass true to disallow dropping javascript: or data: urls
          let url;
          try {
            url = browserDragAndDrop.drop(event, { }, true);
          } catch (ex) {}

          if (!url)
            return;

          let bgLoad = Services.prefs.getBoolPref("browser.tabs.loadInBackground");

          if (event.shiftKey)
            bgLoad = !bgLoad;

          let tab = this._getDragTargetTab(event);
          if (!tab || dropEffect == "copy") {
            // We're adding a new tab.
            let newIndex = this._getDropIndex(event);
            let newTab = this.tabbrowser.loadOneTab(url, {inBackground: bgLoad, allowThirdPartyFixup: true});
            this.tabbrowser.moveTabTo(newTab, newIndex);
          } else {
            // Load in an existing tab.
            try {
              let webNav = Ci.nsIWebNavigation;
              let flags = webNav.LOAD_FLAGS_ALLOW_THIRD_PARTY_FIXUP |
                          webNav.LOAD_FLAGS_FIXUP_SCHEME_TYPOS;
              this.tabbrowser.getBrowserForTab(tab).loadURIWithFlags(url, flags);
              if (!bgLoad)
                this.selectedItem = tab;
            } catch(ex) {
              // Just ignore invalid urls
            }
          }
        }

        if (draggedTab) {
          delete draggedTab._dragData;
        }
      ]]></handler>

      <handler event="dragend"><![CDATA[
        // Note: while this case is correctly handled here, this event
        // isn't dispatched when the tab is moved within the tabstrip,
        // see bug 460801.

        this._finishAnimateTabMove();

        var dt = event.dataTransfer;
        var draggedTab = dt.mozGetDataAt(TAB_DROP_TYPE, 0);
        if (dt.mozUserCancelled || dt.dropEffect != "none" || this._isCustomizing) {
          delete draggedTab._dragData;
          return;
        }

        // Disable detach within the browser toolbox
        var eX = event.screenX;
        var eY = event.screenY;
        var wX = window.screenX;
        // check if the drop point is horizontally within the window
        if (eX > wX && eX < (wX + window.outerWidth)) {
          let bo = this.mTabstrip.boxObject;
          // also avoid detaching if the the tab was dropped too close to
          // the tabbar (half a tab)
          let endScreenY = bo.screenY + 1.5 * bo.height;
          if (eY < endScreenY && eY > window.screenY)
            return;
        }

        // screen.availLeft et. al. only check the screen that this window is on,
        // but we want to look at the screen the tab is being dropped onto.
        var sX = {}, sY = {}, sWidth = {}, sHeight = {};
        Cc["@mozilla.org/gfx/screenmanager;1"]
          .getService(Ci.nsIScreenManager)
          .screenForRect(eX, eY, 1, 1)
          .GetAvailRect(sX, sY, sWidth, sHeight);
        // ensure new window entirely within screen
        var winWidth = Math.min(window.outerWidth, sWidth.value);
        var winHeight = Math.min(window.outerHeight, sHeight.value);
        var left = Math.min(Math.max(eX - draggedTab._dragData.offsetX, sX.value),
                            sX.value + sWidth.value - winWidth);
        var top = Math.min(Math.max(eY - draggedTab._dragData.offsetY, sY.value),
                           sY.value + sHeight.value - winHeight);

        delete draggedTab._dragData;

        if (this.tabbrowser.tabs.length == 1) {
          // resize _before_ move to ensure the window fits the new screen.  if
          // the window is too large for its screen, the window manager may do
          // automatic repositioning.
          window.resizeTo(winWidth, winHeight);
          window.moveTo(left, top);
          window.focus();
        } else {
          this.tabbrowser.replaceTabWithWindow(draggedTab, { screenX: left,
                                                             screenY: top,
                                                             outerWidth: winWidth,
                                                             outerHeight: winHeight
                                                             });
        }
        event.stopPropagation();
      ]]></handler>

      <handler event="dragexit"><![CDATA[
        this._dragTime = 0;

        // This does not work at all (see bug 458613)
        var target = event.relatedTarget;
        while (target && target != this)
          target = target.parentNode;
        if (target)
          return;

        this._tabDropIndicator.collapsed = true;
        event.stopPropagation();
      ]]></handler>
    </handlers>
  </binding>

  <!-- close-tab-button binding
       This binding relies on the structure of the tabbrowser binding.
       Therefore it should only be used as a child of the tab or the tabs
       element (in both cases, when they are anonymous nodes of <tabbrowser>).
  -->
  <binding id="tabbrowser-close-tab-button"
           extends="chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton-image">
    <handlers>
      <handler event="click" button="0"><![CDATA[
        var bindingParent = document.getBindingParent(this);
        var tabContainer = bindingParent.parentNode;
        tabContainer.tabbrowser.removeTab(bindingParent, {animate: true, byMouse: true});
        // This enables double-click protection for the tab container
        // (see tabbrowser-tabs 'click' handler).
        tabContainer._blockDblClick = true;
      ]]></handler>

      <handler event="dblclick" button="0" phase="capturing">
        // for the one-close-button case
        event.stopPropagation();
      </handler>

      <handler event="dragstart">
        event.stopPropagation();
      </handler>
    </handlers>
  </binding>

  <binding id="tabbrowser-tab" display="xul:hbox"
           extends="chrome://global/content/bindings/tabbox.xml#tab">
    <resources>
      <stylesheet src="chrome://browser/content/tabbrowser.css"/>
    </resources>

    <content context="tabContextMenu" closetabtext="&closeTab.label;">
      <xul:stack class="tab-stack" flex="1">
        <xul:hbox xbl:inherits="pinned,selected,titlechanged,fadein"
                  class="tab-background">
          <xul:hbox xbl:inherits="pinned,selected,titlechanged"
                    class="tab-background-start"/>
          <xul:hbox xbl:inherits="pinned,selected,titlechanged"
                    class="tab-background-middle"/>
          <xul:hbox xbl:inherits="pinned,selected,titlechanged"
                    class="tab-background-end"/>
        </xul:hbox>
        <xul:hbox xbl:inherits="pinned,selected,titlechanged"
                  class="tab-content" align="center">
          <xul:image xbl:inherits="fadein,pinned,busy,progress,selected"
                     class="tab-throbber"
                     role="presentation"
                     layer="true" />
          <xul:image xbl:inherits="src=image,fadein,pinned,selected"
                     anonid="tab-icon-image"
                     class="tab-icon-image"
                     validate="never"
                     role="presentation"/>
          <xul:label flex="1"
                     anonid="tab-label"
                     xbl:inherits="value=visibleLabel,crop,accesskey,fadein,pinned,selected"
                     class="tab-text tab-label"
                     role="presentation"/>
          <xul:toolbarbutton anonid="close-button"
                             xbl:inherits="fadein,pinned,selected"
                             class="tab-close-button close-icon"/>
        </xul:hbox>
      </xul:stack>
    </content>

    <implementation>
      <property name="label">
        <getter>
          return this.getAttribute("label");
        </getter>
        <setter>
          this.setAttribute("label", val);
          let event = new CustomEvent("TabLabelModified", {
            bubbles: true,
            cancelable: true
          });
          this.dispatchEvent(event);

          // Let listeners prevent synchronizing the actual label to the
          // visible label (allowing them to override the visible label).
          if (!event.defaultPrevented)
            this.visibleLabel = val;
        </setter>
      </property>
      <property name="visibleLabel">
        <getter>
          return this.getAttribute("visibleLabel");
        </getter>
        <setter>
          this.setAttribute("visibleLabel", val);
        </setter>
      </property>
      <property name="pinned" readonly="true">
        <getter>
          return this.getAttribute("pinned") == "true";
        </getter>
      </property>
      <property name="hidden" readonly="true">
        <getter>
          return this.getAttribute("hidden") == "true";
        </getter>
      </property>

      <property name="lastAccessed">
        <getter>
          return this.selected ? Date.now() : this._lastAccessed;
        </getter>
        <setter>
          this._lastAccessed = val;
        </setter>
      </property>
      <field name="_lastAccessed">0</field>

      <field name="mOverCloseButton">false</field>
      <field name="mCorrespondingMenuitem">null</field>
      <field name="closing">false</field>

      <method name="_mouseenter">
        <body><![CDATA[
          if (this.hidden || this.closing)
            return;

          let tabContainer = this.parentNode;
          let visibleTabs = tabContainer.tabbrowser.visibleTabs;
          let tabIndex = visibleTabs.indexOf(this);
          if (tabIndex == 0) {
            tabContainer._beforeHoveredTab = null;
          } else {
            let candidate = visibleTabs[tabIndex - 1];
            if (!candidate.selected) {
              tabContainer._beforeHoveredTab = candidate;
              candidate.setAttribute("beforehovered", "true");
            }
          }

          if (tabIndex == visibleTabs.length - 1) {
            tabContainer._afterHoveredTab = null;
          } else {
            let candidate = visibleTabs[tabIndex + 1];
            if (!candidate.selected) {
              tabContainer._afterHoveredTab = candidate;
              candidate.setAttribute("afterhovered", "true");
            }
          }

          tabContainer._hoveredTab = this;
        ]]></body>
      </method>

      <method name="_mouseleave">
        <body><![CDATA[
          let tabContainer = this.parentNode;
          if (tabContainer._beforeHoveredTab) {
            tabContainer._beforeHoveredTab.removeAttribute("beforehovered");
            tabContainer._beforeHoveredTab = null;
          }
          if (tabContainer._afterHoveredTab) {
            tabContainer._afterHoveredTab.removeAttribute("afterhovered");
            tabContainer._afterHoveredTab = null;
          }

          tabContainer._hoveredTab = null;
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="mouseover"><![CDATA[
        let anonid = event.originalTarget.getAttribute("anonid");
        if (anonid == "close-button")
          this.mOverCloseButton = true;

        this._mouseenter();
      ]]></handler>
      <handler event="mouseout"><![CDATA[
        let anonid = event.originalTarget.getAttribute("anonid");
        if (anonid == "close-button")
          this.mOverCloseButton = false;

        this._mouseleave();
      ]]></handler>
      <handler event="dragstart" phase="capturing">
        this.style.MozUserFocus = '';
      </handler>
      <handler event="mousedown" phase="capturing">
      <![CDATA[
        if (this.selected) {
          this.style.MozUserFocus = 'ignore';
          this.clientTop; // just using this to flush style updates
        } else if (this.mOverCloseButton) {
          // Prevent tabbox.xml from selecting the tab.
          event.stopPropagation();
        }
      ]]>
      </handler>
      <handler event="mouseup">
        this.style.MozUserFocus = '';
      </handler>
    </handlers>
  </binding>

  <binding id="tabbrowser-alltabs-popup"
           extends="chrome://global/content/bindings/popup.xml#popup">
    <implementation implements="nsIDOMEventListener">
      <method name="_tabOnAttrModified">
        <parameter name="aEvent"/>
        <body><![CDATA[
          var tab = aEvent.target;
          if (tab.mCorrespondingMenuitem)
            this._setMenuitemAttributes(tab.mCorrespondingMenuitem, tab);
        ]]></body>
      </method>

      <method name="_tabOnTabClose">
        <parameter name="aEvent"/>
        <body><![CDATA[
          var tab = aEvent.target;
          if (tab.mCorrespondingMenuitem)
            this.removeChild(tab.mCorrespondingMenuitem);
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          switch (aEvent.type) {
            case "TabAttrModified":
              this._tabOnAttrModified(aEvent);
              break;
            case "TabClose":
              this._tabOnTabClose(aEvent);
              break;
            case "scroll":
              this._updateTabsVisibilityStatus();
              break;
          }
        ]]></body>
      </method>

      <method name="_updateTabsVisibilityStatus">
        <body><![CDATA[
          var tabContainer = gBrowser.tabContainer;
          // We don't want menu item decoration unless there is overflow.
          if (tabContainer.getAttribute("overflow") != "true")
            return;

          var tabstripBO = tabContainer.mTabstrip.scrollBoxObject;
          for (var i = 0; i < this.childNodes.length; i++) {
            let curTab = this.childNodes[i].tab;
            if (!curTab) // "Tab Groups" menuitem and its menuseparator
              continue;
            let curTabBO = curTab.boxObject;
            if (curTabBO.screenX >= tabstripBO.screenX &&
                curTabBO.screenX + curTabBO.width <= tabstripBO.screenX + tabstripBO.width)
              this.childNodes[i].setAttribute("tabIsVisible", "true");
            else
              this.childNodes[i].removeAttribute("tabIsVisible");
          }
        ]]></body>
      </method>

      <method name="_createTabMenuItem">
        <parameter name="aTab"/>
        <body><![CDATA[
          var menuItem = document.createElementNS(
            "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",
            "menuitem");

          menuItem.setAttribute("class", "menuitem-iconic alltabs-item menuitem-with-favicon");

          this._setMenuitemAttributes(menuItem, aTab);

          aTab.mCorrespondingMenuitem = menuItem;
          menuItem.tab = aTab;

          this.appendChild(menuItem);
        ]]></body>
      </method>

      <method name="_setMenuitemAttributes">
        <parameter name="aMenuitem"/>
        <parameter name="aTab"/>
        <body><![CDATA[
          aMenuitem.setAttribute("label", aTab.label);
          aMenuitem.setAttribute("crop", aTab.getAttribute("crop"));

          if (aTab.hasAttribute("busy")) {
            aMenuitem.setAttribute("busy", aTab.getAttribute("busy"));
            aMenuitem.removeAttribute("image");
          } else {
            aMenuitem.setAttribute("image", aTab.getAttribute("image"));
            aMenuitem.removeAttribute("busy");
          }

          if (aTab.hasAttribute("pending"))
            aMenuitem.setAttribute("pending", aTab.getAttribute("pending"));
          else
            aMenuitem.removeAttribute("pending");

          if (aTab.selected)
            aMenuitem.setAttribute("selected", "true");
          else
            aMenuitem.removeAttribute("selected");
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="popupshowing">
      <![CDATA[
        document.getElementById("alltabs_undoCloseTab").disabled =
          SessionStore.getClosedTabCount(window) == 0;

        var tabcontainer = gBrowser.tabContainer;

        // Listen for changes in the tab bar.
        tabcontainer.addEventListener("TabAttrModified", this, false);
        tabcontainer.addEventListener("TabClose", this, false);
        tabcontainer.mTabstrip.addEventListener("scroll", this, false);

        let tabs = gBrowser.visibleTabs;
        for (var i = 0; i < tabs.length; i++) {
          if (!tabs[i].pinned)
            this._createTabMenuItem(tabs[i]);
        }
        this._updateTabsVisibilityStatus();
      ]]></handler>

      <handler event="popuphidden">
      <![CDATA[
        // clear out the menu popup and remove the listeners
        for (let i = this.childNodes.length - 1; i > 0; i--) {
          let menuItem = this.childNodes[i];
          if (menuItem.tab) {
            menuItem.tab.mCorrespondingMenuitem = null;
            this.removeChild(menuItem);
          }
        }
        var tabcontainer = gBrowser.tabContainer;
        tabcontainer.mTabstrip.removeEventListener("scroll", this, false);
        tabcontainer.removeEventListener("TabAttrModified", this, false);
        tabcontainer.removeEventListener("TabClose", this, false);
      ]]></handler>

      <handler event="DOMMenuItemActive">
      <![CDATA[
        var tab = event.target.tab;
        if (tab) {
          let overLink = tab.linkedBrowser.currentURI.spec;
          if (overLink == "about:blank")
            overLink = "";
          XULBrowserWindow.setOverLink(overLink, null);
        }
      ]]></handler>

      <handler event="DOMMenuItemInactive">
      <![CDATA[
        XULBrowserWindow.setOverLink("", null);
      ]]></handler>

      <handler event="command"><![CDATA[
        if (event.target.tab)
          gBrowser.selectedTab = event.target.tab;
      ]]></handler>

    </handlers>
  </binding>

  <binding id="statuspanel" display="xul:hbox">
    <content>
      <xul:hbox class="statuspanel-inner">
        <xul:label class="statuspanel-label"
                   role="status"
                   aria-live="off"
                   xbl:inherits="value=label,crop,mirror"
                   flex="1"
                   crop="end"/>
      </xul:hbox>
    </content>

    <implementation implements="nsIDOMEventListener">
      <constructor><![CDATA[
        window.addEventListener("resize", this, false);
      ]]></constructor>

      <destructor><![CDATA[
        window.removeEventListener("resize", this, false);
        MousePosTracker.removeListener(this);
      ]]></destructor>

      <property name="label">
        <setter><![CDATA[
          if (!this.label) {
            this.removeAttribute("mirror");
            this.removeAttribute("sizelimit");
          }

          this.style.minWidth = this.getAttribute("type") == "status" &&
                                this.getAttribute("previoustype") == "status"
                                  ? getComputedStyle(this).width : "";

          if (val) {
            this.setAttribute("label", val);
            this.removeAttribute("inactive");
            this._calcMouseTargetRect();
            MousePosTracker.addListener(this);
          } else {
            this.setAttribute("inactive", "true");
            MousePosTracker.removeListener(this);
          }

          return val;
        ]]></setter>
        <getter>
          return this.hasAttribute("inactive") ? "" : this.getAttribute("label");
        </getter>
      </property>

      <method name="getMouseTargetRect">
        <body><![CDATA[
          return this._mouseTargetRect;
        ]]></body>
      </method>

      <method name="onMouseEnter">
        <body>
          this._mirror();
        </body>
      </method>

      <method name="onMouseLeave">
        <body>
          this._mirror();
        </body>
      </method>

      <method name="handleEvent">
        <parameter name="event"/>
        <body><![CDATA[
          if (!this.label)
            return;

          switch (event.type) {
            case "resize":
              this._calcMouseTargetRect();
              break;
          }
        ]]></body>
      </method>

      <method name="_calcMouseTargetRect">
        <body><![CDATA[
          let container = this.parentNode;
          let alignRight = (getComputedStyle(container).direction == "rtl");
          let panelRect = this.getBoundingClientRect();
          let containerRect = container.getBoundingClientRect();

          this._mouseTargetRect = {
            top:    panelRect.top,
            bottom: panelRect.bottom,
            left:   alignRight ? containerRect.right - panelRect.width : containerRect.left,
            right:  alignRight ? containerRect.right : containerRect.left + panelRect.width
          };
        ]]></body>
      </method>

      <method name="_mirror">
        <body>
          if (this.hasAttribute("mirror"))
            this.removeAttribute("mirror");
          else
            this.setAttribute("mirror", "true");

          if (!this.hasAttribute("sizelimit")) {
            this.setAttribute("sizelimit", "true");
            this._calcMouseTargetRect();
          }
        </body>
      </method>
    </implementation>
  </binding>

  <binding id="tabbrowser-tabpanels"
           extends="chrome://global/content/bindings/tabbox.xml#tabpanels">
    <implementation>
      <field name="_selectedIndex">0</field>

      <property name="selectedIndex">
        <getter>
        <![CDATA[
          return this._selectedIndex;
        ]]>
        </getter>

        <setter>
        <![CDATA[
          if (val < 0 || val >= this.childNodes.length)
            return val;

          let toTab = this.getRelatedElement(this.childNodes[val]);
          let fromTab = this._selectedPanel ? this.getRelatedElement(this._selectedPanel)
                                            : null;

          let switchPromise = gBrowser._prepareForTabSwitch(toTab, fromTab);

          var panel = this._selectedPanel;
          var newPanel = this.childNodes[val];
          this._selectedPanel = newPanel;
          if (this._selectedPanel != panel) {
            var event = document.createEvent("Events");
            event.initEvent("select", true, true);
            this.dispatchEvent(event);
          }

          this._selectedIndex = val;

          switchPromise.then(() => {
            // If we cannot find the tabpanel that we were trying to switch to, then
            // it must have been removed before our Promise could be resolved. In
            // that case, we just cancel the tab switch.
            var updatedTabIndex = Array.indexOf(this.childNodes, newPanel);
            if (updatedTabIndex == -1) {
              gBrowser._cancelTabSwitch(toTab);
            } else {
              this.setAttribute("selectedIndex", updatedTabIndex);
              gBrowser._finalizeTabSwitch(toTab, fromTab);
            }
          }, () => {
            // If the promise rejected, that means we don't want to actually
            // flip the deck, so we cancel the tab switch.
            gBrowser._cancelTabSwitch(toTab);
          });

          return val;
        ]]>
        </setter>
      </property>
    </implementation>
  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle" >
            <stroke
                android:width="@dimen/tab_history_bg_width"
                android:color="@color/tab_history_border_color" />

            <padding android:top="@dimen/tab_history_border_padding" />
        </shape>
    </item>
    <item>
        <shape
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle" >
            <solid
                android:width="@dimen/tab_history_bg_width"
                android:color="@color/tab_history_background" />
        </shape>
    </item>
</layer-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="false">
        <shape>
            <solid android:color="@color/tab_history_favicon_background" />
            <stroke android:width="@dimen/tab_history_favicon_border_disabled"
                    android:color="@color/tab_history_favicon_border" />
        </shape>
    </item>

    <item android:state_enabled="true">
        <shape>
            <solid android:color="@color/tab_history_favicon_background" />
            <stroke android:width="@dimen/tab_history_favicon_border_enabled"
                    android:color="@color/tab_history_favicon_border" />
        </shape>
    </item>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:gecko= "http://schemas.android.com/apk/res-auto"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:background="@drawable/action_bar_button" >

    <LinearLayout android:id="@+id/tab_history_timeline_combo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_marginLeft="@dimen/tab_history_combo_margin_left"
                    android:layout_marginRight="@dimen/tab_history_combo_margin_right" >

        <ImageView android:id="@+id/tab_history_timeline_top"
                   android:layout_width="@dimen/tab_history_timeline_width"
                   android:layout_height="@dimen/tab_history_timeline_height"
                   android:layout_gravity="center_horizontal"
                   android:background="@color/tab_history_timeline_separator" />

        <org.mozilla.gecko.widget.FaviconView android:id="@+id/tab_history_icon"
                                              android:layout_width="@dimen/tab_history_favicon_bg"
                                              android:layout_height="@dimen/tab_history_favicon_bg"
                                              android:background="@drawable/tab_history_icon_state"
                                              android:padding="@dimen/tab_history_favicon_padding"
                                              android:scaleType="centerInside"
                                              gecko:overrideScaleType="false"
                                              gecko:dominantBorderEnabled="false" />

        <ImageView android:id="@+id/tab_history_timeline_bottom"
                   android:layout_width="@dimen/tab_history_timeline_width"
                   android:layout_height="@dimen/tab_history_timeline_height"
                   android:layout_gravity="center_horizontal"
                   android:background="@color/tab_history_timeline_separator" />

    </LinearLayout>

    <org.mozilla.gecko.widget.FadedSingleColorTextView
            android:id="@+id/tab_history_title"
            style="@style/Widget.TwoLinePageRow.Title"
            android:layout_centerVertical="true"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:paddingRight="@dimen/tab_history_title_margin_right"
            android:text="@+id/tab_history_title"
            android:textSize="@dimen/tab_history_title_text_size"
            android:textColor="@color/tab_history_title_color"
            gecko:fadeWidth="@dimen/tab_history_title_fading_width"/>

</LinearLayout>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView android:id="@+id/tab_history_list"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:layout_alignParentBottom="true"
              android:background="@drawable/tab_history_bg"
              android:divider="@null" />
</RelativeLayout>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - TABLE</title>
</head>
<body onload="parent.loadComplete()">
<table summary="Empty Table">
<tr><td>XHTML can't abide empty table</td></tr>
</table>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - BR</title>
</head>
<body onload="parent.loadComplete()">
<table summary="Table 1">
<caption align="top">CAPTION 1</caption>
<tr>
<th>Employee Id</th>
<th>Employee Name</th>
<th>Position</th>
<th>Salary</th>
</tr>
</table>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - TABLECELL</title>
</head>
<body onload="parent.loadComplete()">
<table summary="Table 1">
<tr>
<th id="header-1">Employee Id</th>
<th id="header-2" abbr="hd1" axis="center" align="center" bgcolor="#00FFFF" char=":" charoff="1" colspan="1" height="50" nowrap="nowrap" rowspan="1" scope="col" headers="header-1" valign="middle" width="170">Employee Name</th>
<th>Position</th>
<th>Salary</th>
</tr>
<tr>
<td id="header-3">EMP0001</td>
<td id="header-4" abbr="hd2" axis="center" align="center" bgcolor="#FF0000" char=":" charoff="1" colspan="1" height="50" nowrap="nowrap" rowspan="1" scope="col" headers="header-3" valign="middle" width="175">Margaret Martin</td>
<td>Accountant</td>
<td>56,000</td>
</tr>
</table>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - TABLECOL</title>
</head>
<body onload="parent.loadComplete()">
<table summary="Table 1">
<colgroup valign="middle" span="2" align="center" width="20" char="$" charoff="15">
<col valign="middle" span="1" align="center" width="20" char="*" charoff="20"/>
</colgroup>
<tr>
<th>Id</th>
<th>Name</th>
<th>Position</th>
<th>Salary</th>
</tr>
<tr>
<td>EMP0001</td>
<td>Martin</td>
<td>Accountant</td>
<td>56,000</td>
</tr>
</table>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - TABLE</title>
</head>
<body onload="parent.loadComplete()">
<table align="center" summary="Table 1">
<tr>
<th>Id</th>
<th>Name</th>
<th>Position</th>
<th>Salary</th>
</tr>
</table>
<table id="table-1" align="center" border="4" bgcolor="#ff0000" frame="border" cellpadding="2" cellspacing="2" summary="HTML Control Table" rules="all" width="680">
<caption align="top">Table Caption</caption>
<thead align="center" valign="middle">
<tr align="center" bgcolor="#00FFFF" valign="middle" char="*" charoff="1">
<th id="header-1">Employee Id</th>
<th id="header-2" abbr="maiden" axis="center" align="center" bgcolor="#00FFFF" colspan="1" height="50" nowrap="nowrap" rowspan="1" scope="col" headers="header-1" valign="middle" width="100">Employee Name</th>
<th>Position</th>
<th>Salary</th>
<th>Gender</th>
<th>Address</th>
</tr>
</thead>
<tfoot align="center" valign="middle">
<tr>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
</tr>
</tfoot>
<tbody align="center" valign="middle">
<tr>
<td axis="center" id="Table-3" abbr="maiden2" align="center" bgcolor="#FF0000" colspan="1" height="50" nowrap="nowrap" rowspan="1" scope="col" headers="header-2" valign="middle" width="175">EMP0001</td>
<td headers="header-2">Margaret Martin</td>
<td>Accountant</td>
<td>56,000</td>
<td>Female</td>
<td>1230 North Ave. Dallas, Texas 98551</td>
</tr>
<tr>
<td>EMP0002</td>
<td>Martha Raynolds</td>
<td>Secretary</td>
<td>35,000</td>
<td>Female</td>
<td>1900 Dallas Road Dallas, Texas 98554</td>
</tr>
</tbody>
</table>
</body>
</html>


<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - TABLESECTION</title>
</head>
<body onload="parent.loadComplete()">
<table align="center" summary="Table 1">
<tbody>
<tr>
<th>Id</th>
<th>Name</th>
<th>Position</th>
<th>Salary</th>
</tr>
</tbody>
</table>
<table id="table-1" align="center" border="4" bgcolor="#ff0000" frame="border" cellpadding="2" cellspacing="2" summary="HTML Control Table" rules="all" width="680">
<caption align="top">Table Caption</caption>
<thead align="center" valign="middle" char="*" charoff="1">
<tr align="center" bgcolor="#00FFFF" valign="middle" char="*" charoff="1">
<th id="header-1">Employee Id</th>
<th id="header-2" abbr="maiden" axis="center" align="center" bgcolor="#00FFFF" colspan="1" height="50" nowrap="nowrap" rowspan="1" scope="col" headers="header-1" valign="middle" width="100">Employee Name</th>
<th>Position</th>
<th>Salary</th>
<th>Gender</th>
<th>Address</th>
</tr>
</thead>
<tfoot align="center" valign="middle" char="+" charoff="2">
<tr>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
</tr>
</tfoot>
<tbody align="center" valign="middle" char="$" charoff="3">
<tr>
<td axis="center" id="Table-3" abbr="maiden2" align="center" bgcolor="#FF0000" colspan="1" height="50" nowrap="nowrap" rowspan="1" scope="col" headers="header-2" valign="middle" width="175">EMP0001</td>
<td headers="header-2">Margaret Martin</td>
<td>Accountant</td>
<td>56,000</td>
<td>Female</td>
<td>1230 North Ave. Dallas, Texas 98551</td>
</tr>
<tr>
<td>EMP0002</td>
<td>Martha Raynolds</td>
<td>Secretary</td>
<td>35,000</td>
<td>Female</td>
<td>1900 Dallas Road Dallas, Texas 98554</td>
</tr>
</tbody>
</table>
</body>
</html>



<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - TABLE</title>
</head>
<body onload="parent.loadComplete()">
<table align="center" summary="Table 1">
<tr>
<th>Id</th>
<th>Name</th>
<th>Position</th>
<th>Salary</th>
</tr>
</table>
<table id="table-1" align="center" border="4" bgcolor="#ff0000" frame="border" cellpadding="2" cellspacing="2" summary="HTML Control Table" rules="all" width="680">
<caption align="top">Table Caption</caption>
<thead align="center" valign="middle">
<tr align="center" bgcolor="#00FFFF" valign="middle">
<th id="header-1">Employee Id</th>
<th id="header-2" abbr="maiden" axis="center" align="center" bgcolor="#00FFFF" colspan="1" height="50" nowrap="nowrap" rowspan="1" scope="col" headers="header-1" valign="middle" width="100">Employee Name</th>
<th>Position</th>
<th>Salary</th>
<th>Gender</th>
<th>Address</th>
</tr>
</thead>
<tfoot align="center" valign="middle">
<tr>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
<th>next page ...</th>
</tr>
</tfoot>
<tbody align="center" valign="middle">
<tr>
<td axis="center" id="Table-3" abbr="maiden2" align="center" bgcolor="#FF0000" colspan="1" height="50" nowrap="nowrap" rowspan="1" scope="col" headers="header-2" valign="middle" width="175">EMP0001</td>
<td headers="header-2">Margaret Martin</td>
<td>Accountant</td>
<td>56,000</td>
<td>Female</td>
<td>1230 North Ave. Dallas, Texas 98551</td>
</tr>
<tr>
<td>EMP0002</td>
<td>Martha Raynolds</td>
<td>Secretary</td>
<td>35,000</td>
<td>Female</td>
<td>1900 Dallas Road Dallas, Texas 98554</td>
</tr>
</tbody>
</table>
<table summary="Table 3">
<tbody>
<tr>
<td>
</td>
</tr>
</tbody>
<tbody>
<tr>
<td>
</td>
</tr>
</tbody>
<tbody>
<tr>
<td>
</td>
</tr>
</tbody>
</table>
</body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="wrap_content"
          android:layout_height="match_parent"
          android:minWidth="@dimen/tabs_strip_button_width"
          android:background="@drawable/tabs_panel_indicator"
          android:paddingLeft="@dimen/tabs_strip_button_padding"
          android:paddingRight="@dimen/tabs_strip_button_padding"
          android:gravity="center"
          android:focusable="true"
          style="@style/TextAppearance.Widget.HomePagerTabMenuStrip"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<level-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:maxLevel="0" android:drawable="@drawable/tab_new"/>

    <item android:maxLevel="1" android:drawable="@drawable/tab_new_pb"/>

</level-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle">
            <solid android:color="@color/background_normal"/>
        </shape>
    </item>
    <item>
        <bitmap android:src="@drawable/tab_panel_tab_globe"
                android:gravity="center"
                />
    </item>
</layer-list><?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:minHeight="100dp">

        <TabWidget
            android:id="@android:id/tabs"
            style="@style/TabInput.TabWidget"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </FrameLayout>

    </LinearLayout>

</TabHost>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
<!ENTITY % commonDialogDTD  SYSTEM "chrome://global/locale/commonDialog.dtd">
<!ENTITY % dialogOverlayDTD SYSTEM "chrome://global/locale/dialogOverlay.dtd">
%commonDialogDTD;
%dialogOverlayDTD;
]>

<bindings id="tabPrompts"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="tabmodalprompt">

    <resources>
        <stylesheet src="chrome://global/content/tabprompts.css"/>
        <stylesheet src="chrome://global/skin/tabprompts.css"/>
    </resources>

    <xbl:content xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
                 role="dialog"
                 aria-describedby="info.body">

        <!-- This is based on the guts of commonDialog.xul -->
        <spacer flex="1"/>
        <hbox pack="center">
            <vbox anonid="mainContainer" class="mainContainer">
                <grid class="topContainer" flex="1">
                    <columns>
                        <column/>
                        <column flex="1"/>
                    </columns>

                    <rows>
                        <vbox anonid="infoContainer" align="center" pack="center" flex="1">
                            <description anonid="info.title" class="info.title" hidden="true" />
                            <description anonid="info.body" class="info.body"/>
                        </vbox>

                        <row anonid="loginContainer" hidden="true" align="center">
                            <label anonid="loginLabel" value="&editfield0.label;" control="loginTextbox"/>
                            <textbox anonid="loginTextbox"/>
                        </row>

                        <row anonid="password1Container" hidden="true" align="center">
                            <label anonid="password1Label" value="&editfield1.label;" control="password1Textbox"/>
                            <textbox anonid="password1Textbox" type="password"/>
                        </row>

                        <row anonid="checkboxContainer" hidden="true">
                            <spacer/>
                            <checkbox anonid="checkbox"/>
                        </row>
                    </rows>
                </grid>
                <xbl:children/>
                <hbox class="buttonContainer">
#ifdef XP_UNIX
                    <button anonid="button3" hidden="true"/>
                    <button anonid="button2" hidden="true"/>
                    <spacer anonid="buttonSpacer" flex="1"/>
                    <button anonid="button1" label="&cancelButton.label;"/>
                    <button anonid="button0" label="&okButton.label;"/>
#else
                    <button anonid="button3" hidden="true"/>
                    <spacer anonid="buttonSpacer" flex="1"/>
                    <button anonid="button0" label="&okButton.label;"/>
                    <button anonid="button2" hidden="true"/>
                    <button anonid="button1" label="&cancelButton.label;"/>
#endif
                </hbox>
            </vbox>
        </hbox>
        <spacer flex="2"/>
    </xbl:content>

    <implementation implements="nsIDOMEventListener">
        <constructor>
        <![CDATA[
            let self = this;
            function getElement(anonid) {
                return document.getAnonymousElementByAttribute(self, "anonid", anonid);
            }

            this.ui = {
                prompt             : this,
                loginContainer     : getElement("loginContainer"),
                loginTextbox       : getElement("loginTextbox"),
                loginLabel         : getElement("loginLabel"),
                password1Container : getElement("password1Container"),
                password1Textbox   : getElement("password1Textbox"),
                password1Label     : getElement("password1Label"),
                infoBody           : getElement("info.body"),
                infoTitle          : getElement("info.title"),
                infoIcon           : null,
                checkbox           : getElement("checkbox"),
                checkboxContainer  : getElement("checkboxContainer"),
                button3            : getElement("button3"),
                button2            : getElement("button2"),
                button1            : getElement("button1"),
                button0            : getElement("button0"),
                // focusTarget (for BUTTON_DELAY_ENABLE) not yet supported
            };

            this.ui.button0.addEventListener("command", this.onButtonClick.bind(this, 0), false);
            this.ui.button1.addEventListener("command", this.onButtonClick.bind(this, 1), false);
            this.ui.button2.addEventListener("command", this.onButtonClick.bind(this, 2), false);
            this.ui.button3.addEventListener("command", this.onButtonClick.bind(this, 3), false);
            // Anonymous wrapper used here because |Dialog| doesn't exist until init() is called!
            this.ui.checkbox.addEventListener("command", function() { self.Dialog.onCheckbox(); } , false);
            this.isLive = false;
        ]]>
        </constructor>
        <destructor>
        <![CDATA[
            if (this.isLive) {
                this.abortPrompt();
            }
        ]]>
        </destructor>

        <field name="ui"/>
        <field name="args"/>
        <field name="linkedTab"/>
        <field name="onCloseCallback"/>
        <field name="Dialog"/>
        <field name="isLive"/>
        <field name="availWidth"/>
        <field name="availHeight"/>
        <field name="minWidth"/>
        <field name="minHeight"/>

        <method name="init">
            <parameter name="args"/>
            <parameter name="linkedTab"/>
            <parameter name="onCloseCallback"/>
            <body>
            <![CDATA[
                this.args = args;
                this.linkedTab = linkedTab;
                this.onCloseCallback = onCloseCallback;

                if (args.enableDelay)
                    throw "BUTTON_DELAY_ENABLE not yet supported for tab-modal prompts";

                // We need to remove the prompt when the tab or browser window is closed or
                // the page navigates, else we never unwind the event loop and that's sad times.
                // Remember to cleanup in shutdownPrompt()!
                this.isLive = true;
                window.addEventListener("resize", this, false);
                window.addEventListener("unload", this, false);
                linkedTab.addEventListener("TabClose", this, false);
                // Note:
                // nsPrompter.js or in e10s mode browser-parent.js call abortPrompt,
                // when the domWindow, for which the prompt was created, generates
                // a "pagehide" event.

                let tmp = {};
                Components.utils.import("resource://gre/modules/CommonDialog.jsm", tmp);
                this.Dialog = new tmp.CommonDialog(args, this.ui);
                this.Dialog.onLoad(null);

                // Display the tabprompt title that shows the prompt origin when
                // the prompt origin is not the same as that of the top window.
                if (!args.showAlertOrigin)
                    this.ui.infoTitle.removeAttribute("hidden");

                // TODO: should unhide buttonSpacer on Windows when there are 4 buttons.
                //       Better yet, just drop support for 4-button dialogs. (bug 609510)

                this.onResize();
            ]]>
            </body>
        </method>

        <method name="shutdownPrompt">
            <body>
            <![CDATA[
                // remove our event listeners
                try {
                    window.removeEventListener("resize", this, false);
                    window.removeEventListener("unload", this, false);
                    this.linkedTab.removeEventListener("TabClose", this, false);
                } catch(e) { }
                this.isLive = false;
                // invoke callback
                this.onCloseCallback();
            ]]>
            </body>
        </method>

        <method name="abortPrompt">
            <body>
            <![CDATA[
                // Called from other code when the page changes.
                this.Dialog.abortPrompt();
                this.shutdownPrompt();
            ]]>
            </body>
        </method>

        <method name="handleEvent">
            <parameter name="aEvent"/>
            <body>
            <![CDATA[
                switch (aEvent.type) {
                  case "resize":
                    this.onResize();
                    break;
                  case "unload":
                  case "TabClose":
                    this.abortPrompt();
                    break;
                }
            ]]>
            </body>
        </method>

        <method name="onResize">
            <body>
            <![CDATA[
                let availWidth = this.clientWidth;
                let availHeight = this.clientHeight;
                if (availWidth == this.availWidth && availHeight == this.availHeight)
                    return;
                this.availWidth = availWidth;
                this.availHeight = availHeight;

                let self = this;
                function getElement(anonid) {
                    return document.getAnonymousElementByAttribute(self, "anonid", anonid);
                }
                let main = getElement("mainContainer");
                let info = getElement("infoContainer");
                let body = this.ui.infoBody;

                // cap prompt dimensions at 60% width and 60% height of content area
                if (!this.minWidth)
                  this.minWidth = parseInt(window.getComputedStyle(main).minWidth);
                if (!this.minHeight)
                  this.minHeight = parseInt(window.getComputedStyle(main).minHeight);
                let maxWidth = Math.max(Math.floor(availWidth * 0.6), this.minWidth) +
                               info.clientWidth - main.clientWidth;
                let maxHeight = Math.max(Math.floor(availHeight * 0.6), this.minHeight) +
                                info.clientHeight - main.clientHeight;
                body.style.maxWidth = maxWidth + "px";
                info.style.overflow = info.style.width = info.style.height = "";

                // when prompt text is too long, use scrollbars
                if (info.clientWidth > maxWidth) {
                    info.style.overflow = "auto";
                    info.style.width = maxWidth + "px";
                }
                if (info.clientHeight > maxHeight) {
                    info.style.overflow = "auto";
                    info.style.height = maxHeight + "px";
                }
            ]]>
            </body>
        </method>

        <method name="onButtonClick">
            <parameter name="buttonNum"/>
            <body>
            <![CDATA[
                this.Dialog["onButton" + buttonNum]();
                this.shutdownPrompt();
            ]]>
            </body>
        </method>

        <method name="onKeyAction">
            <parameter name="action"/>
            <parameter name="event"/>
            <body>
            <![CDATA[
                if (event.defaultPrevented)
                    return;

                event.stopPropagation();
                if (action == "default") {
                    let bnum = this.args.defaultButtonNum || 0;
                    let button = this.ui["button" + bnum];
                    this.onButtonClick(bnum);
                } else { // action == "cancel"
                    this.onButtonClick(1); // Cancel button
                }
            ]]>
            </body>
        </method>
    </implementation>

    <handlers>
        <!-- Based on dialog.xml handlers -->
        <handler event="keypress" keycode="VK_RETURN"
                 group="system" action="this.onKeyAction('default', event);"/>
        <handler event="keypress" keycode="VK_ESCAPE"
                 group="system" action="this.onKeyAction('cancel', event);"/>
#ifdef XP_MACOSX
        <handler event="keypress" key="." modifiers="meta"
                 group="system" action="this.onKeyAction('cancel', event);"/>
#endif
        <handler event="focus" phase="capturing">
            let bnum = this.args.defaultButtonNum || 0;
            let defaultButton = this.ui["button" + bnum];

#ifdef XP_MACOSX
            // On OS X, the default button always stays marked as such (until
            // the entire prompt blurs).
            defaultButton.setAttribute("default", true);
#else
            // On other platforms, the default button is only marked as such
            // when no other button has focus. XUL buttons on not-OSX will
            // react to pressing enter as a command, so you can't trigger the
            // default without tabbing to it or something that isn't a button.
            let focusedDefault = (event.originalTarget == defaultButton);
            let someButtonFocused = event.originalTarget instanceof Ci.nsIDOMXULButtonElement;
            defaultButton.setAttribute("default", focusedDefault || !someButtonFocused);
#endif
        </handler>
        <handler event="blur">
            // If focus shifted to somewhere else in the browser, don't make
            // the default button look active.
            let bnum = this.args.defaultButtonNum || 0;
            let button = this.ui["button" + bnum];
            button.setAttribute("default", false);
        </handler>
    </handlers>

  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    style="@style/TabInput.Tab"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_focused="true"
          android:drawable="@color/tab_row_pressed"/>

    <item android:state_pressed="true"
          android:drawable="@color/tab_row_pressed"/>

    <item android:drawable="@android:color/transparent"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.widget.ThemedTextView xmlns:android="http://schemas.android.com/apk/res/android"
                                         android:layout_width="24dip"
                                         android:layout_height="24dip"
                                         android:layout_margin="12dip"
                                         android:paddingTop="2dip"
                                         android:paddingLeft="4dip"
                                         android:background="@drawable/tabs_count_foreground"
                                         android:textAppearance="@style/TextAppearance.Micro"
                                         android:textColor="#FF43484E"
                                         android:textStyle="bold"
                                         android:duplicateParentState="true"
                                         android:gravity="center"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.tabs.TabsLayoutItemView xmlns:android="http://schemas.android.com/apk/res/android"
                                           style="@style/TabsItem"
                                           android:focusable="true"
                                           android:id="@+id/info"
                                           android:layout_width="wrap_content"
                                           android:layout_height="wrap_content"
                                           android:paddingTop="6dip"
                                           android:paddingBottom="6dip"
                                           android:paddingLeft="1dip"
                                           android:paddingRight="1dip"
                                           android:gravity="center">

    <RelativeLayout android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="6dip"
                    android:padding="4dip"
                    android:background="@drawable/tab_thumbnail"
                    android:duplicateParentState="true">

        <org.mozilla.gecko.widget.ThumbnailView android:id="@+id/thumbnail"
                                                android:layout_width="@dimen/tab_thumbnail_width"
                                                android:layout_height="@dimen/tab_thumbnail_height"/>

        <LinearLayout android:layout_width="@dimen/tab_thumbnail_width"
                      android:layout_height="wrap_content"
                      android:orientation="horizontal"
                      android:background="#EFFF"
                      android:layout_below="@id/thumbnail"
                      android:duplicateParentState="true">

            <TextView android:id="@+id/title"
                      android:layout_width="0dip"
                      android:layout_height="wrap_content"
                      android:layout_weight="1.0"
                      android:padding="4dip"
                      style="@style/TabLayoutItemTextAppearance"
                      android:textSize="12sp"
                      android:textColor="#FF222222"
                      android:singleLine="true"
                      android:duplicateParentState="true"/>

            <ImageButton android:id="@+id/close"
                         style="@style/TabsItemClose"
                         android:layout_width="32dip"
                         android:layout_height="match_parent"
                         android:background="@drawable/action_bar_button_inverse"
                         android:scaleType="center"
                         android:contentDescription="@string/close_tab"
                         android:src="@drawable/tab_close"/>

        </LinearLayout>

    </RelativeLayout>

</org.mozilla.gecko.tabs.TabsLayoutItemView>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<org.mozilla.gecko.tabs.TabsLayoutItemView xmlns:android="http://schemas.android.com/apk/res/android"
                                           style="@style/TabsItem"
                                           android:focusable="true"
                                           android:id="@+id/info"
                                           android:layout_width="match_parent"
                                           android:layout_height="wrap_content"
                                           android:paddingLeft="12dip"
                                           android:paddingTop="6dip"
                                           android:paddingBottom="6dip"
                                           android:background="@drawable/tab_row">

    <org.mozilla.gecko.widget.TabThumbnailWrapper 
                  android:id="@+id/wrapper"
	          android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:padding="4dip"
                  android:background="@drawable/tab_thumbnail"
                  android:duplicateParentState="true">

        <org.mozilla.gecko.widget.ThumbnailView android:id="@+id/thumbnail"
                                                android:layout_width="@dimen/tab_thumbnail_width"
                                                android:layout_height="@dimen/tab_thumbnail_height"/>

    </org.mozilla.gecko.widget.TabThumbnailWrapper>

    <TextView android:id="@+id/title"
              android:layout_width="0dip"
              android:layout_height="match_parent"
              android:layout_weight="1.0"
              android:paddingTop="4dip"
              android:paddingLeft="8dip"
              android:paddingRight="4dip"
              style="@style/TabLayoutItemTextAppearance"
              android:textColor="#FFFFFFFF"
              android:textSize="14sp"
              android:singleLine="false"
              android:maxLines="4"
              android:duplicateParentState="true"/>

    <ImageButton android:id="@+id/close"
                 style="@style/TabsItemClose"
                 android:layout_width="34dip"
                 android:layout_height="match_parent"
                 android:background="@drawable/action_bar_button_inverse"
                 android:scaleType="center"
                 android:contentDescription="@string/close_tab"
                 android:src="@drawable/tab_close"/>

</org.mozilla.gecko.tabs.TabsLayoutItemView>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/new_tab"
          android:title="@string/new_tab"/>

    <item android:id="@+id/new_private_tab"
          android:title="@string/new_private_tab"/>

    <item android:id="@+id/close_all_tabs"
          android:title="@string/close_all_tabs"/>

    <item android:id="@+id/close_private_tabs"
          android:title="@string/close_private_tabs"/>

</menu>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <!-- The layout_height value is used in TabsPanel.getTabsLayoutContainerHeight
         and as an offset in PrivateTabsPanel: if you change it here,
         change it there! -->
    <RelativeLayout android:id="@+id/tabs_panel_header"
                    android:layout_width="match_parent"
                    android:layout_height="@dimen/browser_toolbar_height">

        <view class="org.mozilla.gecko.tabs.TabsPanel$TabsPanelToolbar"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:background="@color/background_tabs">

            <ViewStub android:id="@+id/nav_back_stub"
                      android:layout="@layout/new_tablet_tabs_panel_back_button"
                      android:layout_width="wrap_content"
                      android:layout_height="match_parent"/>

            <org.mozilla.gecko.widget.IconTabWidget android:id="@+id/tab_widget"
                                                    android:layout_width="wrap_content"
                                                    android:layout_height="match_parent"
                                                    android:tabStripEnabled="false"
                                                    android:divider="@drawable/tab_indicator_divider"
                                                    android:layout="@layout/tabs_panel_indicator"/>

            <View android:layout_width="0dip"
                  android:layout_height="match_parent"
                  android:layout_weight="1.0"/>

            <ImageButton android:id="@+id/add_tab"
                         style="@style/UrlBar.ImageButton"
                         android:padding="@dimen/browser_toolbar_button_padding"
                         android:src="@drawable/tab_new_level"
                         android:contentDescription="@string/new_tab"
                         android:background="@drawable/action_bar_button_inverse"/>

            <ImageButton android:id="@+id/menu"
                         style="@style/UrlBar.ImageButton"
                         android:padding="@dimen/browser_toolbar_button_padding"
                         android:src="@drawable/menu_tabs"
                         android:contentDescription="@string/menu"
                         android:background="@drawable/action_bar_button_inverse"
                         android:visibility="gone"/>

        </view>

        <View android:layout_width="match_parent"
              android:layout_height="2dp"
              android:layout_alignParentBottom="true"
              android:background="#1A000000"/>

    </RelativeLayout>

    <view class="org.mozilla.gecko.tabs.TabsPanel$TabsLayoutContainer"
          android:id="@+id/tabs_container"
          android:layout_width="match_parent"
          android:layout_height="wrap_content">

        <view class="org.mozilla.gecko.tabs.TabsPanel$TabsLayout"
              android:id="@+id/normal_tabs"
              style="@style/TabsLayout"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:choiceMode="singleChoice"
              android:visibility="gone"
              gecko:tabs="tabs_normal"/>

        <org.mozilla.gecko.tabs.PrivateTabsPanel
                android:id="@+id/private_tabs_panel"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:visibility="gone"/>

    </view>

    <!-- To preserve the ID, even when building for pre-11. -->
    <RelativeLayout android:id="@+id/tabs_panel_footer"
                    android:layout_height="0dp"
                    android:layout_width="0dp"
                    android:visibility="gone"/>
</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<ImageButton xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="@dimen/tabs_panel_indicator_width"
             android:layout_height="@dimen/browser_toolbar_height"
             android:minWidth="@dimen/tabs_panel_indicator_width"
             android:paddingTop="@dimen/browser_toolbar_button_padding"
             android:paddingBottom="@dimen/browser_toolbar_button_padding"
             android:background="@drawable/tabs_panel_indicator"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <RelativeLayout android:id="@+id/tabs_panel_header"
                    android:layout_width="match_parent"
                    android:layout_height="@dimen/browser_toolbar_height">

        <view class="org.mozilla.gecko.tabs.TabsPanel$TabsPanelToolbar"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:background="@color/background_tabs">

            <org.mozilla.gecko.widget.IconTabWidget android:id="@+id/tab_widget"
                                                    android:layout_width="wrap_content"
                                                    android:layout_height="match_parent"
                                                    android:tabStripEnabled="false"
                                                    android:divider="@drawable/tab_indicator_divider"
                                                    android:layout="@layout/tabs_panel_indicator"/>


        </view>

        <View android:layout_width="match_parent"
              android:layout_height="2dp"
              android:layout_alignParentBottom="true"
              android:background="#1A000000"/>

    </RelativeLayout>

    <view class="org.mozilla.gecko.tabs.TabsPanel$TabsLayoutContainer"
          android:id="@+id/tabs_container"
          android:layout_width="match_parent"
          android:layout_height="0dip"
          android:layout_weight="1.0">

        <view class="org.mozilla.gecko.tabs.TabsPanel$TabsLayout"
              android:id="@+id/normal_tabs"
              style="@style/TabsLayout"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:choiceMode="singleChoice"
              android:visibility="gone"
              gecko:tabs="tabs_normal"/>

        <org.mozilla.gecko.tabs.PrivateTabsPanel
                android:id="@+id/private_tabs_panel"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:visibility="gone"/>

    </view>

    <RelativeLayout android:id="@+id/tabs_panel_footer"
                    android:layout_width="match_parent"
                    android:layout_height="@dimen/browser_toolbar_height">

        <view class="org.mozilla.gecko.tabs.TabsPanel$TabsPanelToolbar"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:background="@color/background_tabs">

            <ImageButton android:id="@+id/add_tab"
                         android:layout_width="@dimen/browser_toolbar_height"
                         android:layout_height="@dimen/browser_toolbar_height"
                         android:padding="14dip"
                         android:src="@drawable/tab_new_level"
                         android:contentDescription="@string/new_tab"
                         android:background="@drawable/action_bar_button_inverse"/>

            <View android:layout_width="0dip"
                  android:layout_height="match_parent"
                  android:layout_weight="1.0"/>

            <ImageButton android:id="@+id/menu"
                         style="@style/UrlBar.ImageButton"
                         android:padding="@dimen/browser_toolbar_button_padding"
                         android:src="@drawable/menu_tabs"
                         android:contentDescription="@string/menu"
                         android:background="@drawable/action_bar_button_inverse"
                         android:visibility="gone"/>

        </view>

        <View android:layout_width="match_parent"
              android:layout_height="2dp"
              android:layout_alignParentTop="true"
              android:background="#1A000000"/>

    </RelativeLayout>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- The tabs panel is initial hidden on startup. It will be made
     visible when the user activates it. See TabsPanel.show() -->
<org.mozilla.gecko.tabs.TabsPanel xmlns:android="http://schemas.android.com/apk/res/android"
                                  android:id="@+id/tabs_panel"
                                  android:layout_width="match_parent"
                                  android:layout_height="match_parent"
                                  android:background="@color/background_tabs"
                                  android:visibility="invisible"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

   <ImageView
        android:id="@+id/favicon"
        android:layout_width="@dimen/new_tablet_tab_strip_favicon_size"
        android:layout_height="match_parent"
        android:layout_marginRight="8dp"
        android:scaleType="centerInside"
        android:duplicateParentState="true"/>

    <org.mozilla.gecko.widget.FadedSingleColorTextView
        android:id="@+id/title"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1.0"
        android:layout_marginRight="-5dp"
        android:gravity="center_vertical"
        android:textSize="14sp"
        android:ellipsize="end"
        android:textColor="@color/new_tablet_tab_strip_item_title"
        android:maxLines="1"
        gecko:fadeWidth="30dip"
        android:duplicateParentState="true"/>

    <org.mozilla.gecko.widget.ThemedImageButton
        android:id="@+id/close"
        android:layout_width="40dip"
        android:layout_height="match_parent"
        android:background="@android:color/transparent"
        android:scaleType="center"
        android:contentDescription="@string/close_tab"
        android:src="@drawable/new_tablet_tab_close"
        android:duplicateParentState="true"/>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- The paddings are asymmetric here to compensate the padding around the
     the close button within the TabStripItemView -->
<org.mozilla.gecko.tabs.TabStripItemView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="@dimen/new_tablet_tab_strip_item_width"
    android:layout_height="match_parent"
    android:paddingLeft="28dp"
    android:paddingRight="12dp"/>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android">

    <org.mozilla.gecko.tabs.TabStripView
        android:id="@+id/tab_strip"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:paddingTop="8dp"/>

    <!-- The right margin creates a "dead area" on the right side of the button
         which we compensate for with a touch delegate. See TabStrip -->
    <org.mozilla.gecko.widget.ThemedImageButton
        android:id="@+id/add_tab"
        style="@style/UrlBar.ImageButton"
        android:layout_width="@dimen/new_tablet_tab_strip_height"
        android:src="@drawable/new_tablet_tab_strip_add_tab"
        android:contentDescription="@string/new_tab"
        android:layout_marginRight="9dp"
        android:background="@drawable/new_tablet_tab_strip_button"/>

</merge>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
<!ENTITY % browserDTD SYSTEM "chrome://browser/locale/browser.dtd">
%browserDTD;
]>

<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="documenttab">
    <content>
      <xul:stack class="documenttab-container">
        <html:canvas anonid="thumbnail-canvas" class="documenttab-thumbnail" />
        <xul:image anonid="favicon" class="documenttab-favicon" width="26" height="26"/>

        <xul:label anonid="title" class="documenttab-title" bottom="0" start="0" end="0" crop="end"/>
        <xul:box anonid="selection" class="documenttab-crop"/>
        <xul:box anonid="selection" class="documenttab-selection"/>
        <xul:button anonid="close" class="documenttab-close" end="0" top="0"
                    onclick="event.stopPropagation(); document.getBindingParent(this)._onClose()"
                    label="&closetab.label;"/>
      </xul:stack>
    </content>

    <handlers>
      <handler event="click" button="0" clickcount="1" action="this._onClick()"/>
      <handler event="click" button="1" clickcount="1" action="event.stopPropagation(); this._onClose()"/>
      <handler event="dblclick" action="this._onDoubleClick(); event.stopPropagation();"/>
    </handlers>

    <implementation>
      <field name="thumbnailCanvas" readonly="true">document.getAnonymousElementByAttribute(this, "anonid", "thumbnail-canvas");</field>
      <field name="_close" readonly="true">document.getAnonymousElementByAttribute(this, "anonid", "close");</field>
      <field name="_title" readonly="true">document.getAnonymousElementByAttribute(this, "anonid", "title");</field>
      <field name="_favicon" readonly="true">document.getAnonymousElementByAttribute(this, "anonid", "favicon");</field>
      <field name="_container" readonly="true">this.parentNode;</field>

      <constructor>
        <![CDATA[
          this.thumbnailCanvas.mozOpaque = true;
          this.thumbnailCanvas.mozImageSmoothingEnabled = true;
        ]]>
      </constructor>

      <method name="_onClick">
        <body>
          <![CDATA[
            this._container.selectedTab = this;
            let selectFn = new Function("event", this._container.parentNode.getAttribute("onselect"));
            selectFn.call(this);
          ]]>
        </body>
      </method>

      <method name="_onDoubleClick">
        <body>
          <![CDATA[
            this._container.selectedTab = this;
            let selectFn = new Function("event", this._container.parentNode.getAttribute("ondbltap"));
            selectFn.call(this);
          ]]>
        </body>
      </method>

      <method name="_onClose">
        <body>
          <![CDATA[
            let callbackFunc = this._container.parentNode.getAttribute("onclosetab");
            let closeFn = new Function("event", callbackFunc);
            closeFn.call(this);
          ]]>
        </body>
      </method>

      <method name="updateTitle">
        <parameter name="title"/>
        <body>
          <![CDATA[
            this._title.value = title;
          ]]>
        </body>
      </method>

      <method name="updateFavicon">
        <parameter name="src"/>
        <body>
          <![CDATA[
            this._favicon.src = src;
          ]]>
        </body>
      </method>

    </implementation>
  </binding>

  <binding id="tablist">
    <content>
      <xul:arrowscrollbox anonid="tabs-scrollbox" class="tabs-scrollbox" flex="1" orient="horizontal"
        clicktoscroll="true" />
    </content>

    <handlers>
      <handler event="dblclick" action="this._onDoubleClick();"/>
    </handlers>

    <implementation implements="nsIDOMEventListener">
      <constructor>
        <![CDATA[
          window.addEventListener("MozContextUITabsShow", this, true);
        ]]>
      </constructor>

      <destructor>
        <![CDATA[
          window.removeEventListener("MozContextUITabsShow", this, true);
        ]]>
      </destructor>

      <method name="handleEvent">
        <parameter name="event"/>
        <body>
          <![CDATA[
            switch (event.type) {
              case "MozContextUITabsShow":
                this.strip.ensureElementIsVisible(this.selectedTab, false);
                break;
            }
          ]]>
        </body>
      </method>

      <field name="strip">document.getAnonymousElementByAttribute(this, "anonid", "tabs-scrollbox");</field>
      <field name="_selectedTab">null</field>

      <!-- Used by the chrome input handler -->
      <property name="anonScrollBox"
                readonly="true"
                onget="return this.strip;"/>

      <property name="selectedTab" onget="return this._selectedTab;">
        <setter>
          <![CDATA[
            if (this._selectedTab)
              this._selectedTab.removeAttribute("selected");

            if (val)
              val.setAttribute("selected", "true");

            this._selectedTab = val;
            this.strip.ensureElementIsVisible(val);
          ]]>
        </setter>
      </property>

      <method name="addTab">
        <parameter name="aIndex"/>
        <body>
          <![CDATA[
            let tab = document.createElement("documenttab");
            if (aIndex >= 0) {
              let child = this.strip.children[aIndex];
              this.strip.insertBefore(tab, child);
            } else {
              this.strip.appendChild(tab);
            }
            return tab;
          ]]>
        </body>
      </method>

      <method name="removeTab">
        <parameter name="aTab"/>
        <body>
          <![CDATA[
            this.strip.removeChild(aTab);
          ]]>
        </body>
      </method>

      <method name="_onDoubleTap">
        <body>
          <![CDATA[
            new Function("event", this.getAttribute("ondoubletap")).call();
          ]]>
        </body>
      </method>

      <method name="_onDoubleClick">
        <body>
          <![CDATA[
            // ignore mouse events if we're interacting with touch input
            if (!InputSourceHelper.isPrecise)
              return;
            new Function("event", this.getAttribute("ondoubletap")).call();
          ]]>
        </body>
      </method>

    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item android:state_focused="true">

        <shape android:shape="rectangle">
            <solid android:color="#B3FF9500"/>
            <corners android:radius="3dp"/>            
        </shape>

    </item>

    <item android:state_pressed="true">

        <shape android:shape="rectangle">
            <solid android:color="#B3FF9500"/>
            <corners android:radius="3dp"/>
        </shape>

    </item>

    <item gecko:state_recording="true">

        <shape android:shape="rectangle">
            <solid android:color="#FFFF0000"/>
            <corners android:radius="3dp"/>            
        </shape>

    </item>

    <item android:state_focused="false"
          android:state_pressed="false"
          android:state_checked="true"
          gecko:state_recording="false">

        <shape android:shape="rectangle">
            <solid android:color="#FFFF9500"/>
            <corners android:radius="3dp"/>            
        </shape>

    </item>

    <item android:drawable="@android:color/transparent"/>

</selector>
 <its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml">
  <its:targetPointerRule selector="//h:div[@id='one']/h:p[@class='srcfolder']" targetPointer="../h:p[@class='targetfolder']"/>
  <its:targetPointerRule selector="//h:div[@id='two']/h:p[@class='srcfile']" targetPointer="../h:p[@class='targetfile']"/>
 </its:rules>
<file
  xmlns:its="http://www.w3.org/2005/11/its" >
 <its:rules version="2.0">
  <its:targetPointerRule selector="//source" targetPointer="../target"/>
 </its:rules>
 <entry id="one">
  <source>Remember last folder</source>
  <target>lastFolder</target>
 </entry>
 <entry id="two">
  <source>Custom file filter:</source>
  <target>testFile.txt</target>
 </entry>
</file>
 <its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml">
  <its:param name="targetFolder">targetfolder</its:param>
  <its:param name="targetFile">targetfile</its:param>
  <its:targetPointerRule selector="//h:div[@id='one']/h:p[@class='srcfolder']"  targetPointer="../h:p[@class=$targetFolder]"/>
  <its:targetPointerRule selector="//h:div[@id='two']/h:p[@class='srcfile']"  targetPointer="../h:p[@class=$targetFile]"/>
 </its:rules>


 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
  <its:targetPointerRule selector="//source" targetPointer="../target"/>
 </its:rules>
<file
  xmlns:its="http://www.w3.org/2005/11/its" >
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="targetpointer2xmlrules.xml"/>
 <entry id="one">
  <source>Remember last folder</source>
  <target>lastFolder</target>
 </entry>
 <entry id="two">
  <source>Custom file filter:</source>
  <target>testFile.txt</target>
 </entry>
</file>
<file
  xmlns:its="http://www.w3.org/2005/11/its" >
 <its:rules version="2.0">
  <its:param name="targetOneParam">firstfolder</its:param>
  <its:param name="targetTwoParam">firstfile</its:param>
  <its:targetPointerRule selector="//entry[@id='one']/source" targetPointer="../target[@id=$targetOneParam]"/>
  <its:targetPointerRule selector="//entry[@id='two']/source" targetPointer="../target[@id=$targetTwoParam]"/>
 </its:rules>
 <entry id="one">
  <source>Remember last folders</source>
  <target id="firstfolder">firstFolder</target>
 </entry>
 <entry id="two">
  <source>Custom file filter:</source>
  <target id="firstfile">firstFile.txt</target>
 </entry>
</file>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
  <its:param name="targetOneParam">firstfolder</its:param>
  <its:param name="targetTwoParam">firstfile</its:param>
  <its:targetPointerRule selector="//entry[@id='one']/source" targetPointer="../target[@id=$targetOneParam]"/>
  <its:targetPointerRule selector="//entry[@id='two']/source" targetPointer="../target[@id=$targetTwoParam]"/>
 </its:rules>
<file>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="targetpointer4xmlrules.xml"/>
 <entry id="one">
  <source>Remember last folders</source>
  <target id="firstfolder">firstFolder</target>
 </entry>
 <entry id="two">
  <source>Custom file filter:</source>
  <target id="firstfile">firstFile.txt</target>
 </entry>
</file>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:36 $"/>
        <language type="ta"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="teo"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:termRule selector="//h:a[1]" term="yes" termInfoRef="#TDPV"/>
</its:rules>
<text
  xmlns:its="http://www.w3.org/2005/11/its" >
 <its:rules version="2.0">
  <its:termRule selector="//term" term="yes" termInfoPointer="id(@def)"/>
 </its:rules>
 <p>We may define <term def="TDPV">discoursal point of view</term>
 as <gloss xml:id="TDPV">the relationship, expressed through discourse
  structure, between the implied author or some other addresser,
  and the fiction.</gloss>
 </p>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:termRule selector="//h:p[2]/h:em" term="yes" termInfoPointer="../h:dfn"/>
<its:termRule selector="//h:p[3]/h:em" term="no"/>
<its:termRule selector="//h:p[1]/h:em" term="yes" termInfoPointer="../h:dfn"/>
</its:rules>
<text>
 <its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
   <its:termRule selector="//term[1]" term="yes" termInfoRef="#TDPV"/>
 </its:rules>
 <p>We may define <term>discoursal point of view</term>
as <gloss xml:id="TDPV">the relationship, expressed through discourse
structure, between the implied author or some other addresser,
and the fiction.</gloss></p>
</text>
<text>
 <its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
   <its:termRule selector="//term" term="yes"
    termInfoRefPointer="@target"/>
 </its:rules>
 <p>We may define <term target="#TDPV">discoursal point of view</term>
as <gloss xml:id="TDPV">the relationship, expressed through discourse
structure, between the implied author or some other addresser,
and the fiction.</gloss></p>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:param name="termParam">keywords</its:param>
<its:termRule selector="//h:p[2]/h:em" term="yes" termInfoPointer="../h:dfn"/>
<its:termRule selector="//h:p[3]/h:em[@id=$termParam]" term="no"/>
<its:termRule selector="//h:p[1]/h:em" term="yes" termInfoPointer="../h:dfn"/>
</its:rules>

<its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
 <its:termRule selector="//term" term="yes"
  termInfoPointer="../def"/>
 <its:termRule selector="//kw" term="yes"/>
</its:rules>
<text>
 <head>
  <its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xlink:href="terminology4xmlrules.xml">
   <its:termRule selector="//p[2]/term" term="yes"
    termInfoPointer="../gloss"/>
   <its:termRule selector="//p[3]/term" term="no"/>
  </its:rules>
  <keywords><kw>terms</kw>, <kw>rare <kw>words</kw></kw></keywords>
 </head>
 <p>We may define <term>discoursal point of view</term>
as <def>the relationship, expressed through discourse
structure, between the implied author or some other addresser,
and the fiction</def>.</p>
 <p>We may define <term>refulgence</term>
as <gloss id="refdef">a radiant or resplendent quality or state.</gloss></p>
 <p>But I'm not sure how <term>quincunx</term> can be defined.</p>
</text>
<doc its:version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
 <section xml:id="S001">
  <par>A <kw its:term="yes" its:termInfoRef="http://en.wikipedia.org/wiki/Motherboard">motherboard</kw>,
   also known as a <kw its:term="yes">logic <span its:term="yes">board</span></kw> on Apple Computers,
   is the primary circuit board making up a modern computer.</par>
 </section> 
</doc>
<doc its:version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
 <section xml:id="S001">
  <par>A <its:span term="yes" termInfoRef="http://en.wikipedia.org/wiki/Motherboard">motherboard</its:span>,
   also known as a <its:span term="yes">logic <its:span term="yes">board</its:span></its:span> on Apple Computers,
   is the primary circuit board making up a modern computer.</par>
 </section> 
</doc>
<text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="termInfoRefPointer">2</its:param>
<its:termRule selector="//p[@id=$termInfoRefPointer]/term" term="yes" termInfoRefPointer="@target"/>
</its:rules>
<p id="1">
This is a glossary of terms.
</p>
<p id="2">
We may define
<term target="#TDPV">discoursal point of view</term>
as
<gloss xml:id="TDPV">
the relationship, expressed through discourse structure, between the implied author or some other addresser, and the fiction.
</gloss>
</p>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="termInfoRefPointer">2</its:param>
<its:termRule selector="//p[@id=$termInfoRefPointer]/term" term="yes" termInfoRefPointer="@target"/>
</its:rules>
<text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="terminology8xmlrules.xml"/>
<p id="1">
This is a glossary of terms.
</p>
<p id="2">
We may define
<term target="#TDPV">discoursal point of view</term>
as
<gloss xml:id="TDPV">
the relationship, expressed through discourse structure, between the implied author or some other addresser, and the fiction.
</gloss>
</p>
</text>
<book its:version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
  <head>Sample file</head>
  <body its:annotatorsRef="text-analysis|file:///tools.xml#T1">
    <p>And he said: you need a new <quote its:annotatorsRef="terminology|http://example.com/term-tool#T2" its:term="yes" its:termInfoRef="http://www.directron.com/motherboards1.html" its:termConfidence="0.5">motherboard</quote></p>
 </body> 
</book>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="false" android:color="@color/text_color_primary_disable_only" />
    <item android:color="@color/text_color_tertiary_inverse"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="false" android:color="@color/text_color_primary_disable_only" />
    <item android:color="@color/text_color_tertiary"/>

</selector>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="1111">
  <addon>
    <name>Repo Add-on 1</name>
    <type id="1">Extension</type>
    <guid>test_AddonRepository_1@tests.mozilla.org</guid>
    <version>2.1</version>
    <authors>
      <author>
        <name>Repo Add-on 1 - Creator</name>
        <link>http://localhost:4444/repo/1/creator.html</link>
      </author>
      <author>
        <name>Repo Add-on 1 - First Developer</name>
        <link>http://localhost:4444/repo/1/firstDeveloper.html</link>
      </author>
      <author>
        <name>Repo Add-on 1 - Second Developer</name>
        <link>http://localhost:4444/repo/1/secondDeveloper.html</link>
      </author>
    </authors>
    <summary>Repo Add-on 1 - Description&lt;br&gt;Second line</summary>
    <description>&lt;p&gt;Repo Add-on 1 - Full Description &amp;amp; some extra&lt;/p&gt;</description>
    <eula>Repo Add-on 1 - EULA</eula>
    <developer_comments>Repo Add-on 1
                        Developer Comments</developer_comments>
    <icon size="32">http://localhost/repo/1/icon.png</icon>
    <status id="4">Public</status>
    <rating>1</rating>
    <learnmore>http://localhost/repo/1/learnmore.html</learnmore>
    <homepage>http://localhost/repo/1/homepage.html</homepage>
    <support>http://localhost/repo/1/support.html</support>
    <contribution_data>
      <link>http://localhost/repo/1/contribution.html</link>
      <suggested_amount currency="USD">$11.11</suggested_amount>
      <meet_developers>http://localhost/repo/1/meetDevelopers.html</meet_developers>
    </contribution_data>
    <reviews num="1111">http://localhost/repo/1/review.html</reviews>
    <total_downloads>2221</total_downloads>
    <weekly_downloads>3331</weekly_downloads>
    <daily_users>4441</daily_users>
    <last_updated epoch="9">1970-01-01T00:00:09Z</last_updated>
    <install size="9">http://localhost:4444/repo/1/install.xpi</install>
  </addon>

  <addon>
    <name>Repo Add-on 2</name>
    <type id="2">Theme</type>
    <guid>test_AddonRepository_2@tests.mozilla.org</guid>
    <version>2.2</version>
    <authors>
      <author>
        <name>Repo Add-on 2 - Creator</name>
        <link>http://localhost:4444/repo/2/creator.html</link>
      </author>
      <author>
        <name>Repo Add-on 2 - First Developer</name>
        <link>http://localhost:4444/repo/2/firstDeveloper.html</link>
      </author>
      <author>
        <name>Repo Add-on 2 - Second Developer</name>
        <link>http://localhost:4444/repo/2/secondDeveloper.html</link>
      </author>
    </authors>
    <summary>Repo Add-on 2 - Description</summary>
    <description>Repo Add-on 2 - Full Description</description>
    <eula>Repo Add-on 2 - EULA</eula>
    <developer_comments>Repo Add-on 2 - Developer Comments</developer_comments>
    <icon size="32">http://localhost/repo/2/icon.png</icon>
    <status id="9">Unknown</status>
    <previews>
      <preview primary="1">
        <full type="image/png">http://localhost:4444/repo/2/firstFull.png</full>
        <thumbnail type="image/png">http://localhost:4444/repo/2/firstThumbnail.png</thumbnail>
        <caption>Repo Add-on 2 - First Caption</caption>
      </preview>
      <preview primary="0">
        <full type="image/png">http://localhost:4444/repo/2/secondFull.png</full>
        <thumbnail type="image/png">http://localhost:4444/repo/2/secondThumbnail.png</thumbnail>
        <caption>Repo Add-on 2 - Second Caption</caption>
      </preview>
    </previews>
    <rating>2</rating>
    <learnmore>http://localhost/repo/2/learnmore.html</learnmore>
    <homepage>http://localhost/repo/2/homepage.html</homepage>
    <support>http://localhost/repo/2/support.html</support>
    <contribution_data>
      <link>http://localhost/repo/2/contribution.html</link>
      <meet_developers>http://localhost/repo/2/meetDevelopers.html</meet_developers>
    </contribution_data>
    <reviews num="1112">http://localhost/repo/2/review.html</reviews>
    <total_downloads>2222</total_downloads>
    <weekly_downloads>3332</weekly_downloads>
    <daily_users>4442</daily_users>
    <last_updated epoch="9">1970-01-01T00:00:09Z</last_updated>
    <install size="9">http://localhost:4444/repo/2/install.xpi</install>
  </addon>

  <addon>
    <name>Repo Add-on 3</name>
    <type id="2">Theme</type>
    <guid>test_AddonRepository_3@tests.mozilla.org</guid>
    <version>2.3</version>
    <icon size="32">http://localhost/repo/3/icon.png</icon>
    <previews>
      <preview primary="1">
        <full type="image/png">http://localhost:4444/repo/3/firstFull.png</full>
        <thumbnail type="image/png">http://localhost:4444/repo/3/firstThumbnail.png</thumbnail>
        <caption>Repo Add-on 3 - First Caption</caption>
      </preview>
      <preview primary="0">
        <full type="image/png">http://localhost:4444/repo/3/secondFull.png</full>
        <thumbnail type="image/png">http://localhost:4444/repo/3/secondThumbnail.png</thumbnail>
        <caption>Repo Add-on 3 - Second Caption</caption>
      </preview>
    </previews>
  </addon>

  <addon_compatibility hosted="true" id="123">
    <guid>test_AddonRepository_1@tests.mozilla.org</guid>
    <name>PASS</name>
    <version_ranges>
      <!-- Will be included -->
      <version_range type="incompatible">
        <min_version>0.1</min_version>
        <max_version>0.2</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <application_id>666</application_id>
            <min_version>3.0</min_version>
            <max_version>4.0</max_version>
            <appID>xpcshell@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
      <!-- Will be included -->
      <version_range type="incompatible">
        <min_version>0.2</min_version>
        <max_version>0.3</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <application_id>666</application_id>
            <min_version>5.0</min_version>
            <max_version>6.0</max_version>
            <appID>xpcshell@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
      <!-- Won't be included - invalid type attribute -->
      <version_range type="unknown">
        <min_version>9</min_version>
        <max_version>10</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <application_id>666</application_id>
            <min_version>10.0</min_version>
            <max_version>11.0</max_version>
            <appID>xpcshell@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
      <!-- Won't be included - no matching appID -->
      <version_range type="incompatible">
        <min_version>0.2</min_version>
        <max_version>0.3</max_version>
        <compatible_applications>
          <application>
            <name>Unknown App</name>
            <application_id>123</application_id>
            <min_version>1.0</min_version>
            <max_version>999.0</max_version>
            <appID>unknown-app@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>
</searchresults>

<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="123">
  <addon>
    <name>Test Repo Add-on - ignore</name>
    <type id="1">Extension</type>
    <guid>compatmode-ignore@tests.mozilla.org</guid>
    <version>1.1</version>
    <authors>
      <author>
        <name>Test Creator 1</name>
        <link>http://localhost:%PORT%/creator1.html</link>
      </author>
    </authors>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test1.xpi</install>
  </addon>
</searchresults>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="123">
  <addon>
    <name>Test Repo Add-on - normal</name>
    <type id="1">Extension</type>
    <guid>compatmode-normal@tests.mozilla.org</guid>
    <version>1.1</version>
    <authors>
      <author>
        <name>Test Creator 1</name>
        <link>http://localhost:%PORT%/creator1.html</link>
      </author>
    </authors>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test1.xpi</install>
  </addon>
</searchresults>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="123">
  <addon>
    <name>Test Repo Add-on - strict</name>
    <type id="1">Extension</type>
    <guid>compatmode-strict@tests.mozilla.org</guid>
    <version>1.1</version>
    <authors>
      <author>
        <name>Test Creator 1</name>
        <link>http://localhost:%PORT%/creator1.html</link>
      </author>
    </authors>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test1.xpi</install>
  </addon>
</searchresults>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="9999" />

<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="9999">
<!-- Cause XML parse error so that the search fails -->
<!--  <addon> -->
    <name>PASS</name>
    <type id="1">Extension</type>
    <guid>test1@tests.mozilla.org</guid>
    <version>1.1</version>
    <authors><author><name>Test Creator 1</name></author></authors>
    <status id="4">Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test1.xpi</install>
  </addon>
</searchresults>

<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="1111">
  <!-- Passes even though XPI URL matches an installing AddonInstall.
       Tests optional attributes. -->
  <addon>
    <name>PASS</name>
    <type id="1">Extension</type>
    <guid>test1@tests.mozilla.org</guid>
    <version>1.1</version>
    <authors>
      <author>
        <name>Test Creator 1</name>
        <link>http://localhost:%PORT%/creator1.html</link>
      </author>
      <author>
        <name>Test Developer 1</name>
        <link>http://localhost:%PORT%/developer1.html</link>
      </author>
    </authors>
    <summary>Test Summary 1</summary>
    <description>Test Description 1</description>
    <eula>Test EULA 1</eula>
    <developer_comments>Test Developer Comments 1</developer_comments>
    <icon size="32">http://localhost:%PORT%/icon1.png</icon>
    <status id="8">Preliminarily Reviewed</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <previews>
      <preview primary="1">
        <full type="image/png" width="400" height="300">
          http://localhost:%PORT%/full1-1.png
        </full>
        <thumbnail type="image/png" width="200" height="150">
          http://localhost:%PORT%/thumbnail1-1.png
        </thumbnail>
        <caption>Caption 1 - 1</caption>
      </preview>
      <preview primary="0">
        <full type="image/png">http://localhost:%PORT%/full2-1.png</full>
        <thumbnail type="image/png">http://localhost:%PORT%/thumbnail2-1.png</thumbnail>
        <caption>Caption 2 - 1</caption>
      </preview>
    </previews>
    <rating>4</rating>
    <learnmore>http://localhost:%PORT%/learnmore1.html</learnmore>
    <support>http://localhost:%PORT%/support1.html</support>
    <contribution_data>
      <link>http://localhost:%PORT%/contribution1.html</link>
      <suggested_amount currency="USD">$11.11</suggested_amount>
      <meet_developers>http://localhost:%PORT%/meetDevelopers1.html</meet_developers>
    </contribution_data>
    <reviews num="1111">http://localhost:%PORT%/review1.html</reviews>
    <total_downloads>2222</total_downloads>
    <weekly_downloads>3333</weekly_downloads>
    <daily_users>4444</daily_users>
    <last_updated epoch="1265033045">2010-02-01T14:04:05Z</last_updated>
    <install size="5555">http://localhost:%PORT%/addons/test_AddonRepository_2.xpi</install>
  </addon>

  <addon_compatibility hosted="true" id="123">
    <guid>test1@tests.mozilla.org</guid>
    <name>PASS</name>
    <version_ranges>
      <!-- Will be included -->
      <version_range type="incompatible">
        <min_version>0.1</min_version>
        <max_version>0.2</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <application_id>666</application_id>
            <min_version>3.0</min_version>
            <max_version>4.0</max_version>
            <appID>xpcshell@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
      <!-- Will be included -->
      <version_range type="incompatible">
        <min_version>0.2</min_version>
        <max_version>0.3</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <application_id>666</application_id>
            <min_version>5.0</min_version>
            <max_version>6.0</max_version>
            <appID>xpcshell@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
      <!-- Won't be included - invalid type attribute -->
      <version_range type="unknown">
        <min_version>9</min_version>
        <max_version>10</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <application_id>666</application_id>
            <min_version>10.0</min_version>
            <max_version>11.0</max_version>
            <appID>xpcshell@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
      <!-- Won't be included - no matching appID -->
      <version_range type="incompatible">
        <min_version>0.2</min_version>
        <max_version>0.3</max_version>
        <compatible_applications>
          <application>
            <name>Unknown App</name>
            <application_id>123</application_id>
            <min_version>1.0</min_version>
            <max_version>999.0</max_version>
            <appID>unknown-app@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>

  <!-- Fails because guid matches previously successful result -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test1@tests.mozilla.org</guid>
    <version>1.2</version>
    <authors><author><name>Test Creator 2</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with a guid that matches a previously successful result should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test2.xpi</install>
  </addon>

  <!-- Fails because guid was not requested -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>notRequested@tests.mozilla.org</guid>
    <version>1.3</version>
    <authors><author><name>Test Creator 3</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with a guid that wasn't requested should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test3.xpi</install>
  </addon>

  <!-- Passes even though guid matches already installed add-on,
       type is unknown, no defined author elements, status is not Public,
       no compatible applications matched, no installs compatible with OS
   -->
  <addon>
    <name>PASS</name>
    <type id="2">Theme</type>
    <guid>test_AddonRepository_1@tests.mozilla.org</guid>
    <version>1.4</version>
    <status id="9999">Unknown</status>
    <compatible_applications>
      <application>
        <appID>unknown@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install os="UNKNOWN1">http://localhost:%PORT%/test4.xpi</install>
    <install os="UNKNOWN2">http://localhost:%PORT%/test4.xpi</install>
  </addon>
</searchresults>

<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="1111">
  <!-- Passes all requirements -->
  <addon>
    <name>PASS</name>
    <type id="1">Extension</type>
    <guid>test1@tests.mozilla.org</guid>
    <version>1.1</version>
    <authors>
      <author>
        <name>Test Creator 1</name>
        <link>http://localhost:%PORT%/creator1.html</link>
      </author>
    </authors>
    <status id="8">Preliminarily Reviewed</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <!-- Test that a negative rating is ignored -->
    <rating>-2</rating>
    <!-- Test that a <reviews> with a blank review URL is ignored -->
    <reviews num="   1111   ">   </reviews>
    <!-- Test that a negative total_downloads is ignored -->
    <total_downloads>-2</total_downloads>
    <install>http://localhost:%PORT%/test1.xpi</install>
  </addon>

  <!-- Passes requirements. Tests optional attributes. Also tests that
       integer properties that are NaN in the XML are ignored -->
  <addon>
    <name>PASS</name>
    <!-- Test that extensions pass -->
    <type id="1">Extension</type>
    <guid>test2@tests.mozilla.org</guid>
    <version>1.2</version>
    <authors>
      <!-- Test that the first author becomes the creator,
           and the second one is a developer -->
      <author>
        <name>Test Creator 2</name>
        <link>http://localhost:%PORT%/creator2.html</link>
      </author>
      <author>
        <name>Test Developer 2</name>
        <link>http://localhost:%PORT%/developer2.html</link>
      </author>
    </authors>
    <summary>&lt;h1&gt;Test Summary 2&lt;/h1&gt;&lt;p&gt;paragraph&lt;/p&gt;</summary>
    <description>Test Description 2&lt;br&gt;newline</description>
    <developer_comments>Test Developer
                        Comments 2</developer_comments>
    <eula>Test EULA 2</eula>
    <icon size="64">http://localhost:%PORT%/icon2-64.png</icon>
    <icon size="48">http://localhost:%PORT%/icon2-48.png</icon>
    <icon size="32">http://localhost:%PORT%/icon2-32.png</icon>
    <status id="4">Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <!-- Test that multiple preview images are correctly parsed -->
    <previews>
      <preview primary="0">
        <full type="image/png">http://localhost:%PORT%/full1-2.png</full>
        <thumbnail type="image/png">http://localhost:%PORT%/thumbnail1-2.png</thumbnail>
      </preview>
      <preview primary="0">
        <full type="image/png">http://localhost:%PORT%/full2-2.png</full>
        <thumbnail type="image/png">http://localhost:%PORT%/thumbnail2-2.png</thumbnail>
        <caption>Caption 2</caption>
      </preview>
    </previews>
    <rating>NaN</rating>
    <!-- Test that learnmore is used as the add-on's homepageURL
         if there is no homepage defined -->
    <learnmore>http://localhost:%PORT%/learnmore2.html</learnmore>
    <homepage/>
    <support>http://localhost:%PORT%/support2.html</support>
    <contribution_data>
      <link>http://localhost:%PORT%/contribution2.html</link>
      <meet_developers>http://localhost:%PORT%/meetDevelopers2.html</meet_developers>
    </contribution_data>
    <reviews num="NaN">http://localhost:%PORT%/review2.html</reviews>
    <total_downloads>NaN</total_downloads>
    <weekly_downloads>NaN</weekly_downloads>
    <daily_users>NaN</daily_users>
    <last_updated epoch="NaN">Not an acual date</last_updated>
    <install size="NaN" os="ALL">http://localhost:%PORT%/test2.xpi</install>
  </addon>

  <!-- Passes requirements. Tests optional attributes with extra whitespace. -->
  <addon>
    <name>   PASS   </name>
    <!-- Test that themes pass -->
    <type id="   2   ">Theme</type>
    <guid>   test3@tests.mozilla.org   </guid>
    <version>   1.3   </version>
    <authors>
      <!-- Test that authors with blank names are ignored -->
      <author>
        <name>    </name>
        <link>   http://localhost:%PORT%/ignore3.html   </link>
      </author>
      <!-- Test that authors with blank links are ignored -->
      <author>
        <name>   Test Creator Ignore   </name>
        <link>   </link>
      </author>
      <author>
        <name>   Test Creator 3   </name>
        <link>   http://localhost:%PORT%/creator3.html   </link>
      </author>
      <author>
        <name>   First Test Developer 3   </name>
        <link>   http://localhost:%PORT%/developer1-3.html   </link>
      </author>
      <author>
        <name>    </name>
        <link>    </link>
      </author>
      <author>
        <name>   Second Test Developer 3   </name>
        <link>   http://localhost:%PORT%/developer2-3.html   </link>
      </author>
    </authors>
    <summary>   Test Summary 3   </summary>
    <description>   Test Description 3&lt;br&gt;&lt;ul&gt;&lt;li&gt;List item 1&lt;li&gt;List item 2&lt;/ul&gt;   </description>
    <developer_comments>   Test Developer Comments 3   </developer_comments>
    <eula>   Test EULA 3   </eula>
    <icon size="32">   http://localhost:%PORT%/icon3.png   </icon>
    <status id="   8   ">Preliminarily Reviewed</status>
    <!-- Test that an incompatible + compatible application list passes -->
    <compatible_applications>
      <application>
        <appID>   unknown@tests.mozilla.org   </appID>
        <min_version>   1   </min_version>
        <max_version>   1   </max_version>
      </application>
      <application>
        <appID>   xpcshell@tests.mozilla.org   </appID>
        <min_version>   1   </min_version>
        <max_version>   1   </max_version>
      </application>
    </compatible_applications>
    <!-- Test that primary images appear first in the add-on's screenshots array -->
    <previews>
      <preview primary="   0   ">
        <full type="   image/png   ">   http://localhost:%PORT%/full2-3.png   </full>
        <caption>   Caption 2 - 3   </caption>
      </preview>
      <!-- Test that a preview without a <full> element is ignored -->
      <preview primary="   0   ">
        <caption>   Caption ignore - 3   </caption>
      </preview>
      <!-- Test that a preview with an empty <full> element is ignored -->
      <preview primary="   0   ">
        <full type="   image/png   ">   </full>
        <caption>   Caption ignore - 3   </caption>
      <preview primary="   1   ">
        <full type="   image/png   ">   http://localhost:%PORT%/full1-3.png   </full>
        <thumbnail type="   image/png   ">   http://localhost:%PORT%/thumbnail1-3.png   </thumbnail>
        <caption>   Caption 1 - 3   </caption>
      </preview>
      <preview primary="   0   ">
        <full type="   image/png   ">   http://localhost:%PORT%/full3-3.png   </full>
        <thumbnail type="   image/png   ">   http://localhost:%PORT%/thumbnail3-3.png   </thumbnail>
        <caption>   Caption 3 - 3   </caption>
      </preview>
      </preview>
    </previews>
    <!-- Test that a rating between 1 and 5 is correctly parsed -->
    <rating>   2   </rating>
    <!-- Test that hompage is used as the add-on's homepageURL
         even if learnmore is defined -->
    <learnmore>   http://localhost:%PORT%/learnmore3.html   </learnmore>
    <homepage>   http://localhost:%PORT%/homepage3.html   </homepage>
    <support>   http://localhost:%PORT%/support3.html   </support>
    <contribution_data>
      <link>   http://localhost:%PORT%/contribution3.html   </link>
      <suggested_amount currency="USD">   $11.11   </suggested_amount>
      <meet_developers>   http://localhost:%PORT%/meetDevelopers3.html   </meet_developers>
    </contribution_data>
    <reviews num="   1111   ">   http://localhost:%PORT%/review3.html   </reviews>
    <total_downloads>   2222   </total_downloads>
    <weekly_downloads>   3333   </weekly_downloads>
    <daily_users>   4444   </daily_users>
    <last_updated epoch="   1265033045   ">   2010-02-01T14:04:05Z   </last_updated>
    <!-- Test that an incompatible install is ignored -->
    <install size="   9999   " os="   UNKNOWN   ">   http://localhost:%PORT%/fail3.xpi   </install>
    <!-- Test that OS matching is case-insensitive -->
    <install size="   5555   " os="   xpCShell   " hash="   sha1:c26f0b0d62e5dcddcda95074d3f3fedb9bbc26e3   ">   http://localhost:%PORT%/test3.xpi   </install>
  </addon>

  <!-- Fails because name is undefined -->
  <addon>
    <type id="1">Extension</type>
    <guid>test4@tests.mozilla.org</guid>
    <version>1.4</version>
    <authors><author><name>Test Creator 4</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with undefined name should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test4.xpi</install>
  </addon>

  <!-- Fails because name is empty-->
  <addon>
    <name>   </name>
    <type id="1">Extension</type>
    <guid>test5@tests.mozilla.org</guid>
    <version>1.5</version>
    <authors><author><name>Test Creator 5</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with empty name should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test5.xpi</install>
  </addon>

  <!-- Fails because type is undefined -->
  <addon>
    <name>FAIL</name>
    <guid>test6@tests.mozilla.org</guid>
    <version>1.6</version>
    <authors><author><name>Test Creator 6</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with undefined type should be ignored</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test6.xpi</install>
  </addon>

  <!-- Fails because type is empty -->
  <addon>
    <name>FAIL</name>
    <type id="">Empty id attribute</type>
    <guid>test7@tests.mozilla.org</guid>
    <version>1.7</version>
    <authors><author><name>Test Creator 7</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with empty type should be ignored</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test7.xpi</install>
  </addon>

  <!-- Fails because type is unknown -->
  <addon>
    <name>FAIL</name>
    <type id="9999">Unknown</type>
    <guid>test8@tests.mozilla.org</guid>
    <version>1.8</version>
    <authors><author><name>Test Creator 8</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with unknown type should be ignored</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test8.xpi</install>
  </addon>

  <!-- Fails because guid is undefined -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <version>1.9</version>
    <authors><author><name>Test Creator 9</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with undefined guid should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test9.xpi</install>
  </addon>

  <!-- Fails because guid is empty -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>   </guid>
    <version>1.10</version>
    <authors><author><name>Test Creator 10</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with empty guid should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test10.xpi</install>
  </addon>

  <!-- Fails because guid matches previously successful result -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test1@tests.mozilla.org</guid>
    <version>1.11</version>
    <authors><author><name>Test Creator 11</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with a guid that matches a previously successful result should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test11.xpi</install>
  </addon>

  <!-- Fails because guid matches already installed add-on -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test_AddonRepository_1@tests.mozilla.org</guid>
    <version>1.12</version>
    <authors><author><name>Test Creator 12</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with a guid that matches an installed Addon should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test12.xpi</install>
  </addon>

  <!-- Fails because version is undefined -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test13@tests.mozilla.org</guid>
    <authors><author><name>Test Creator 13</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with undefined version should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test13.xpi</install>
  </addon>

  <!-- Fails because version is empty -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test14@tests.mozilla.org</guid>
    <version>   </version>
    <authors><author><name>Test Creator 14</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with empty version should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test14.xpi</install>
  </addon>

  <!-- Fails because authors undefined -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test15@tests.mozilla.org</guid>
    <version>1.15</version>
    <status id="4">Public</status>
    <summary>Add-on with undefined authors should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test15.xpi</install>
  </addon>

  <!-- Fails because it has no defined author elements -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test16@tests.mozilla.org</guid>
    <version>1.16</version>
    <authors></authors>
    <status id="4">Public</status>
    <summary>Add-on with no defined author elements should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test16.xpi</install>
  </addon>

  <!-- Fails because no non-empty author elements -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test17@tests.mozilla.org</guid>
    <version>1.17</version>
    <authors>
      <author><name></name></author>
      <author><name></name>   </author>
    </authors>
    <status id="4">Public</status>
    <summary>Add-on with no non-empty author elements should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test17.xpi</install>
  </addon>

  <!-- Fails because status is undefined -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test18@tests.mozilla.org</guid>
    <version>1.18</version>
    <authors><author><name>Test Creator 18</name></author></authors>
    <summary>Add-on with undefined status should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test18.xpi</install>
  </addon>

  <!-- Fails because status is not Public -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test19@tests.mozilla.org</guid>
    <version>1.19</version>
    <authors><author><name>Test Creator 19</name></author></authors>
    <status id="9999">Unknown</status>
    <summary>Add-on with non-Public status should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test19.xpi</install>
  </addon>

  <!-- Fails because compatible_applications is undefined -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test20@tests.mozilla.org</guid>
    <version>1.20</version>
    <authors><author><name>Test Creator 20</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with undefined compatible_applications should be ignored.</summary>
    <install>http://localhost:%PORT%/test20.xpi</install>
  </addon>

  <!-- Fails because no compatible applications matched -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test21@tests.mozilla.org</guid>
    <version>1.21</version>
    <authors><author><name>Test Creator 21</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with no compatible applications should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>unknown@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test21.xpi</install>
  </addon>

  <!-- Fails because compatible application's min version is undefined -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test22@tests.mozilla.org</guid>
    <version>1.22</version>
    <authors><author><name>Test Creator 22</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with too high of a compatible application min version should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <max_version>2.0</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test22.xpi</install>
  </addon>

  <!-- Fails because compatible application's min version too high -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test23@tests.mozilla.org</guid>
    <version>1.23</version>
    <authors><author><name>Test Creator 23</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with too high of a compatible application min version should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1.1</min_version>
        <max_version>2.0</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test23.xpi</install>
  </addon>

  <!-- Fails because compatible application's max version is undefined -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test24@tests.mozilla.org</guid>
    <version>1.24</version>
    <authors><author><name>Test Creator 24</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with too low of a compatible application max version should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>0.9</min_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test24.xpi</install>
  </addon>

  <!-- Fails because compatible application's max version is too low -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test25@tests.mozilla.org</guid>
    <version>1.25</version>
    <authors><author><name>Test Creator 25</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with too low of a compatible application max version should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>0.9</min_version>
        <max_version>0.9.9</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test25.xpi</install>
  </addon>

  <!-- Fails because XPI URL is undefined -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test26@tests.mozilla.org</guid>
    <version>1.26</version>
    <authors><author><name>Test Creator 26</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with undefined XPI URL should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
  </addon>

  <!-- Fails because XPI URL is empty -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test27@tests.mozilla.org</guid>
    <version>1.27</version>
    <authors><author><name>Test Creator 27</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with an empty XPI URL should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>   </install>
  </addon>

  <!-- Fails because install not compatible with OS -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test28@tests.mozilla.org</guid>
    <version>1.28</version>
    <authors><author><name>Test Creator 28</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with no installs with compatible OS should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install os="UNKNOWN1">http://localhost:%PORT%/test28.xpi</install>
    <install os="UNKNOWN2">http://localhost:%PORT%/test28.xpi</install>
  </addon>

  <!-- Fails because XPI URL matches an installing AddonInstall -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test29@tests.mozilla.org</guid>
    <version>1.29</version>
    <authors><author><name>Test Creator 29</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on with an XPI URL that matches an installing AddonInstall should be ignored.</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/addons/test_AddonRepository_2.xpi</install>
  </addon>

  <!-- Passes because the add-on has the right payment info -->
  <addon>
    <name>PASS</name>
    <type id="1">Extension</type>
    <guid>purchase1@tests.mozilla.org</guid>
    <version>2.0</version>
    <authors>
      <author>
        <name>Test Creator - Last Passing</name>
        <link>http://localhost:%PORT%/creatorLastPassing.html</link>
      </author>
    </authors>
    <status id="4">Public</status>
    <all_compatible_os>
      <os>ALL</os>
    </all_compatible_os>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <rating>5</rating>
    <payment_data>
      <link>http://localhost:%PORT%/purchaseURL1</link>
      <amount amount="5">$5</amount>
    </payment_data>
  </addon>

  <!-- Passes because the add-on has the right payment info -->
  <addon>
    <name>PASS</name>
    <type id="1">Extension</type>
    <guid>purchase2@tests.mozilla.org</guid>
    <version>2.0</version>
    <authors>
      <author>
        <name>Test Creator - Last Passing</name>
        <link>http://localhost:%PORT%/creatorLastPassing.html</link>
      </author>
    </authors>
    <status id="4">Public</status>
    <all_compatible_os>
      <os>XPCShell</os>
    </all_compatible_os>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <rating>5</rating>
    <payment_data>
      <link>http://localhost:%PORT%/purchaseURL2</link>
      <amount amount="10.0">$10</amount>
    </payment_data>
  </addon>

  <!-- Fails because the add-on doesn't match the platform -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>purchase3@tests.mozilla.org</guid>
    <version>2.0</version>
    <authors>
      <author>
        <name>Test Creator - Last Passing</name>
        <link>http://localhost:%PORT%/creatorLastPassing.html</link>
      </author>
    </authors>
    <status id="4">Public</status>
    <all_compatible_os>
      <os>FOO</os>
    </all_compatible_os>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <rating>5</rating>
    <payment_data>
      <link>http://localhost:%PORT%/purchaseURL3</link>
      <amount amount="10">$10</amount>
    </payment_data>
  </addon>

  <!-- Passes because the Addon that has a matching XPI URL
       has a state = STATE_AVAILABLE (non-active install). This is the
       last passing add-on. -->
  <addon>
    <name>PASS</name>
    <type id="1">Extension</type>
    <guid>test-lastPassing@tests.mozilla.org</guid>
    <version>2.0</version>
    <authors>
      <author>
        <name>Test Creator - Last Passing</name>
        <link>http://localhost:%PORT%/creatorLastPassing.html</link>
      </author>
    </authors>
    <status id="4">Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <!-- Test that a rating > 5 becomes a rating = 5 -->
    <rating>10</rating>
    <install>http://localhost:%PORT%/addons/test_AddonRepository_3.xpi</install>
  </addon>

  <!-- Fails because of MAX_RESULTS limit. The previous <addon> should
       be the last passing add-on in order to correctly test the limit. -->
  <addon>
    <name>FAIL</name>
    <type id="1">Extension</type>
    <guid>test-surpassesLimit@tests.mozilla.org</guid>
    <version>9.9</version>
    <authors><author><name>Test Creator - Surpasses Limit</name></author></authors>
    <status id="4">Public</status>
    <summary>Add-on should not be added because doing so would surpass MAX_RESULTS limit</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test-surpassesLimit.xpi</install>
  </addon>
</searchresults>

<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem name="/^Mozilla Corp\.$/">
      <versionRange severity="1">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="1" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="/block2/" name="/^Moz/" creator="Dangerous"
      homepageURL="/\.dangerous\.com/" updateURL="/\.dangerous\.com/">
      <versionRange severity="3">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="1" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
  </emItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="block1@tests.mozilla.org">
      <prefs>
        <pref>test.blocklist.pref1</pref>
        <pref>test.blocklist.pref2</pref>
      </prefs>
      <versionRange severity="1">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="1" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="block2@tests.mozilla.org">
      <prefs>
        <pref>test.blocklist.pref3</pref>
        <pref>test.blocklist.pref4</pref>
      </prefs>
      <versionRange severity="3">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="1" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
  </emItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="/block1/">
      <versionRange severity="1">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="1" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="/block1/">
      <versionRange severity="2">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="1" maxVersion="2.*"/>
        </targetApplication>
      </versionRange>
    </emItem>
  </emItems>
</blocklist>
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
https://bugzilla.mozilla.org/show_bug.cgi?id=311681
-->
<head>
  <title>Test for Bug 311681</title>
  <script type="text/javascript" src="/tests/SimpleTest/SimpleTest.js"></script>        
  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />
</head>
<body>
<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=311681">Mozilla Bug 311681</a>
<script class="testbody" type="text/javascript">
<![CDATA[
  // Setup script
  SimpleTest.waitForExplicitFinish();

  // Make sure to trigger the hashtable case by asking for enough elements
  // by ID.
  for (var i = 0; i < 256; ++i) {
    var x = document.getElementById(i);
  }

  // save off the document.getElementById function, since getting it as a
  // property off the document it causes a content flush.      
  var fun = document.getElementById;

  // Slot for our initial element with id "content"
  var testNode;

  function getCont() {
    return fun.call(document, "content");
  }
  
  function testClone() {
    // Test to make sure that if we have multiple nodes with the same ID in
    // a document we don't forget about one of them when the other is
    // removed.
    var newParent = $("display");
    var node = testNode.cloneNode(true);
    isnot(node, testNode, "Clone should be a different node");

    newParent.appendChild(node);

    // Check what getElementById returns, no flushing
    is(getCont(), node, "Should be getting orig node pre-flush 1");
    
    // Trigger a layout flush, just in case.
    var itemHeight = newParent.offsetHeight/10;

    // Check what getElementById returns now.
    is(getCont(), node, "Should be getting new node post-flush 1");
    
    clear(newParent);
    
    // Check what getElementById returns, no flushing
    is(getCont(), testNode, "Should be getting orig node pre-flush 2");
    
    // Trigger a layout flush, just in case.
    var itemHeight = newParent.offsetHeight/10;

    // Check what getElementById returns now.
    is(getCont(), testNode, "Should be getting orig node post-flush 2");

    node = testNode.cloneNode(true);
    newParent.appendChild(node);
    testNode.parentNode.removeChild(testNode);

    // Check what getElementById returns, no flushing
    is(getCont(), node, "Should be getting clone pre-flush");
    
    // Trigger a layout flush, just in case.
    var itemHeight = newParent.offsetHeight/10;

    // Check what getElementById returns now.
    is(getCont(), node, "Should be getting clone post-flush");

  }

  function clear(node) {
    while (node.hasChildNodes()) {
      node.removeChild(node.firstChild);
    }
  }

  addLoadEvent(testClone);
  addLoadEvent(SimpleTest.finish);
]]>
</script>
<p id="display"></p>
<div id="content" style="display: none">
  <script class="testbody" type="text/javascript">
  <![CDATA[
    testNode = fun.call(document, "content");
    // Needs incremental XML parser
    isnot(testNode, null, "Should have node here");
  ]]>
  </script>  
</div>
<pre id="test">
</pre>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <emItem id="test_bug393285_2@tests.mozilla.org"/>
    <emItem id="test_bug393285_3a@tests.mozilla.org">
      <versionRange minVersion="1.0" maxVersion="1.0"/>
    </emItem>
    <emItem id="test_bug393285_3b@tests.mozilla.org">
      <versionRange minVersion="1.0" maxVersion="1.0"/>
    </emItem>
    <emItem id="test_bug393285_4@tests.mozilla.org">
      <versionRange minVersion="1.0" maxVersion="1.0">
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="1.0" maxVersion="1.0"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="test_bug393285_5@tests.mozilla.org" os="Darwin"/>
    <emItem id="test_bug393285_6@tests.mozilla.org" os="XPCShell"/>
    <emItem id="test_bug393285_7@tests.mozilla.org" os="Darwin,XPCShell,WINNT"/>
    <emItem id="test_bug393285_8@tests.mozilla.org" xpcomabi="x86-msvc"/>
    <emItem id="test_bug393285_9@tests.mozilla.org" xpcomabi="noarch-spidermonkey"/>
    <emItem id="test_bug393285_10@tests.mozilla.org" xpcomabi="ppc-gcc3,noarch-spidermonkey,x86-msvc"/>
    <emItem id="test_bug393285_11@tests.mozilla.org" os="Darwin" xpcomabi="ppc-gcc3,x86-msvc"/>
    <emItem id="test_bug393285_12@tests.mozilla.org" os="Darwin" xpcomabi="ppc-gcc3,noarch-spidermonkey,x86-msvc"/>
    <emItem id="test_bug393285_13@tests.mozilla.org" os="XPCShell" xpcomabi="ppc-gcc3,x86-msvc"/>
    <emItem id="test_bug393285_14@tests.mozilla.org" os="XPCShell,WINNT" xpcomabi="ppc-gcc3,x86-msvc,noarch-spidermonkey"/>
  </emItems>
</blocklist>
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
https://bugzilla.mozilla.org/show_bug.cgi?id=403868
-->
<head>
  <title>Test for Bug 403868</title>
  <script type="text/javascript" src="/tests/SimpleTest/SimpleTest.js"></script>
  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />
</head>
<body>
<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=403868">Mozilla Bug 403868</a>
<p id="display"></p>
<div id="content" style="display: none">
  
</div>
<pre id="test">
<script class="testbody" type="text/javascript">
<![CDATA[

/** Test for Bug 403868 **/
function createSpan(id, insertionPoint) {
  var s = document.createElementNS("http://www.w3.org/1999/xhtml", "span");
  s.id = id;
  $("content").insertBefore(s, insertionPoint);
  return s;
}

var s1a = createSpan("test1", null);
is(document.getElementById("test1"), s1a,
   "Only one span with id=test1 in the tree; should work!");

var s2a = createSpan("test1", null);
is(document.getElementById("test1"), s1a,
   "Appending span with id=test1 doesn't change which one comes first");

var s3a = createSpan("test1", s2a);
is(document.getElementById("test1"), s1a,
   "Inserting span with id=test1 not at the beginning; doesn't matter");

var s4a = createSpan("test1", s1a);
is(document.getElementById("test1"), s4a,
   "Inserting span with id=test1 at the beginning changes which one is first");

s4a.parentNode.removeChild(s4a);
is(document.getElementById("test1"), s1a,
   "First-created span with id=test1 is first again");

s1a.parentNode.removeChild(s1a);
is(document.getElementById("test1"), s3a,
   "Third-created span with id=test1 is first now");

// Start the id hashtable
for (var i = 0; i < 256; ++i) {
  document.getElementById("no-such-id-in-the-document" + i);
}

var s1b = createSpan("test2", null);
is(document.getElementById("test2"), s1b,
   "Only one span with id=test2 in the tree; should work!");

var s2b = createSpan("test2", null);
is(document.getElementById("test2"), s1b,
   "Appending span with id=test2 doesn't change which one comes first");

var s3b = createSpan("test2", s2b);
is(document.getElementById("test2"), s1b,
   "Inserting span with id=test2 not at the beginning; doesn't matter");

var s4b = createSpan("test2", s1b);
is(document.getElementById("test2"), s4b,
   "Inserting span with id=test2 at the beginning changes which one is first");

s4b.parentNode.removeChild(s4b);
is(document.getElementById("test2"), s1b,
   "First-created span with id=test2 is first again");

s1b.parentNode.removeChild(s1b);
is(document.getElementById("test2"), s3b,
   "Third-created span with id=test2 is first now");
]]>
</script>
</pre>
</body>
</html>

<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="100">
  <addon>
    <name>TEST</name>
    <type id='1'>Extension</type>
    <guid>test1@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>TEST</name>
    <rating>-5</rating>
    <type id='1'>Extension</type>
    <guid>test2@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>TEST</name>
    <rating>0</rating>
    <type id='1'>Extension</type>
    <guid>test3@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>TEST</name>
    <rating>2</rating>
    <type id='1'>Extension</type>
    <guid>test4@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>TEST</name>
    <rating>4</rating>
    <type id='1'>Extension</type>
    <guid>test5@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>TEST</name>
    <rating>5</rating>
    <type id='1'>Extension</type>
    <guid>test6@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>TEST</name>
    <rating>10</rating>
    <type id='1'>Extension</type>
    <guid>test7@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>TEST</name>
    <rating>100</rating>
    <type id='1'>Extension</type>
    <guid>test8@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>
</searchresults>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <!-- All extensions are version 5 and tests run against appVersion 3 -->

    <!-- Test 1 not listed, should never get blocked -->
    <!-- Always blocked -->
    <emItem id="test_bug449027_2@tests.mozilla.org"/>
    <!-- Always blocked -->
    <emItem id="test_bug449027_3@tests.mozilla.org">
      <versionRange/>
    </emItem>
    <!-- Not blocked since neither version range matches -->
    <emItem id="test_bug449027_4@tests.mozilla.org">
      <versionRange minVersion="6"/>
      <versionRange maxVersion="4"/>
    </emItem>
    <!-- Invalid version range, should not block -->
    <emItem id="test_bug449027_5@tests.mozilla.org">
      <versionRange minVersion="6" maxVersion="4"/>
    </emItem>
    <!-- Should block all of these -->
    <emItem id="test_bug449027_6@tests.mozilla.org">
      <versionRange minVersion="7" maxVersion="8"/>
      <versionRange minVersion="5" maxVersion="6"/>
      <versionRange maxVersion="4"/>
    </emItem>
    <emItem id="test_bug449027_7@tests.mozilla.org">
      <versionRange maxVersion="4"/>
      <versionRange minVersion="4" maxVersion="5"/>
      <versionRange minVersion="6" maxVersion="7"/>
    </emItem>
    <emItem id="test_bug449027_8@tests.mozilla.org">
      <versionRange minVersion="2" maxVersion="2"/>
      <versionRange minVersion="4" maxVersion="6"/>
      <versionRange minVersion="7" maxVersion="8"/>
    </emItem>
    <emItem id="test_bug449027_9@tests.mozilla.org">
      <versionRange minVersion="4"/>
    </emItem>
    <emItem id="test_bug449027_10@tests.mozilla.org">
      <versionRange minVersion="5"/>
    </emItem>
    <emItem id="test_bug449027_11@tests.mozilla.org">
      <versionRange maxVersion="6"/>
    </emItem>
    <emItem id="test_bug449027_12@tests.mozilla.org">
      <versionRange maxVersion="5"/>
    </emItem>

    <!-- This should block all versions for any application -->
    <emItem id="test_bug449027_13@tests.mozilla.org">
      <versionRange>
        <targetApplication/>
      </versionRange>
    </emItem>
    <!-- Shouldn't block -->
    <emItem id="test_bug449027_14@tests.mozilla.org">
      <versionRange>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </emItem>
    <!-- Should block for any version of the app -->
    <emItem id="test_bug449027_15@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org"/>
      </versionRange>
    </emItem>
    <!-- Should still block -->
    <emItem id="test_bug449027_16@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange/>
        </targetApplication>
      </versionRange>
    </emItem>
    <!-- Not blocked since neither version range matches -->
    <emItem id="test_bug449027_17@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="4"/>
          <versionRange maxVersion="2"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <!-- Invalid version range, should not block -->
    <emItem id="test_bug449027_18@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="6" maxVersion="4"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <!-- Should block all of these -->
    <emItem id="test_bug449027_19@tests.mozilla.org">
      <versionRange>
        <targetApplication id="foo@bar.com"/>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="5" maxVersion="6"/>
          <versionRange minVersion="3" maxVersion="4"/>
          <versionRange maxVersion="2"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_20@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange maxVersion="2"/>
          <versionRange minVersion="2" maxVersion="3"/>
          <versionRange minVersion="4" maxVersion="5"/>
        </targetApplication>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_21@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="1" maxVersion="1"/>
          <versionRange minVersion="2" maxVersion="4"/>
          <versionRange minVersion="5" maxVersion="6"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_22@tests.mozilla.org">
      <versionRange>
        <targetApplication id="foo@bar.com"/>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="3"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_23@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2"/>
        </targetApplication>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_24@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange maxVersion="3"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_25@tests.mozilla.org">
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange maxVersion="4"/>
        </targetApplication>
      </versionRange>
    </emItem>
  </emItems>
  <pluginItems>
    <!-- All plugins are version 5 and tests run against appVersion 3 -->

    <!-- Test 1 not listed, should never get blocked -->
    <!-- Always blocked -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_2$"/>
    </pluginItem>
    <!-- Always blocked -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_3$"/>
      <versionRange/>
    </pluginItem>
    <!-- Not blocked since neither version range matches -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_4$"/>
      <versionRange minVersion="6"/>
      <versionRange maxVersion="4"/>
    </pluginItem>
    <!-- Invalid version range, should not block -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_5$"/>
      <versionRange minVersion="6" maxVersion="4"/>
    </pluginItem>
    <!-- Should block all of these -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_6$"/>
      <versionRange minVersion="7" maxVersion="8"/>
      <versionRange minVersion="5" maxVersion="6"/>
      <versionRange maxVersion="4"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_7$"/>
      <versionRange maxVersion="4"/>
      <versionRange minVersion="4" maxVersion="5"/>
      <versionRange minVersion="6" maxVersion="7"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_8$"/>
      <versionRange minVersion="2" maxVersion="2"/>
      <versionRange minVersion="4" maxVersion="6"/>
      <versionRange minVersion="7" maxVersion="8"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_9$"/>
      <versionRange minVersion="4"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_10$"/>
      <versionRange minVersion="5"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_11$"/>
      <versionRange maxVersion="6"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_12$"/>
      <versionRange maxVersion="5"/>
    </pluginItem>

    <!-- This should block all versions for any application -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_13$"/>
      <versionRange>
        <targetApplication/>
      </versionRange>
    </pluginItem>
    <!-- Shouldn't block -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_14$"/>
      <versionRange>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </pluginItem>
    <!-- Should block for any version of the app -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_15$"/>
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org"/>
      </versionRange>
    </pluginItem>
    <!-- Should still block -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_16$"/>
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <!-- Not blocked since neither version range matches -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_17$"/>
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="4"/>
          <versionRange maxVersion="2"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <!-- Invalid version range, should not block -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_18$"/>
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="6" maxVersion="4"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <!-- Should block all of these -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_19$"/>
      <versionRange>
        <targetApplication id="foo@bar.com"/>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="5" maxVersion="6"/>
          <versionRange minVersion="3" maxVersion="4"/>
          <versionRange maxVersion="2"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_20$"/>
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange maxVersion="2"/>
          <versionRange minVersion="2" maxVersion="3"/>
          <versionRange minVersion="4" maxVersion="5"/>
        </targetApplication>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_21$"/>
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="1" maxVersion="1"/>
          <versionRange minVersion="2" maxVersion="4"/>
          <versionRange minVersion="5" maxVersion="6"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_22$"/>
      <versionRange>
        <targetApplication id="foo@bar.com"/>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="3"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_23$"/>
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange minVersion="2"/>
        </targetApplication>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_24$"/>
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange maxVersion="3"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_25$"/>
      <versionRange>
        <targetApplication id="xpcshell@tests.mozilla.org">
          <versionRange maxVersion="4"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <emItems>
    <!-- All extensions are version 5 and tests run against toolkitVersion 8 -->

    <!-- Test 1-14 not listed, should never get blocked -->

    <!-- Should block for any version of the app -->
    <emItem id="test_bug449027_15@tests.mozilla.org">
      <versionRange>
        <targetApplication id="toolkit@mozilla.org"/>
      </versionRange>
    </emItem>
    <!-- Should still block -->
    <emItem id="test_bug449027_16@tests.mozilla.org">
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange/>
        </targetApplication>
      </versionRange>
    </emItem>
    <!-- Not blocked since neither version range matches -->
    <emItem id="test_bug449027_17@tests.mozilla.org">
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="9"/>
          <versionRange maxVersion="7"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <!-- Invalid version range, should not block -->
    <emItem id="test_bug449027_18@tests.mozilla.org">
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="11" maxVersion="9"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <!-- Should block all of these -->
    <emItem id="test_bug449027_19@tests.mozilla.org">
      <versionRange>
        <targetApplication id="foo@bar.com"/>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="10" maxVersion="11"/>
          <versionRange minVersion="8" maxVersion="9"/>
          <versionRange maxVersion="7"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_20@tests.mozilla.org">
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange maxVersion="7"/>
          <versionRange minVersion="7" maxVersion="8"/>
          <versionRange minVersion="9" maxVersion="10"/>
        </targetApplication>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_21@tests.mozilla.org">
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="6" maxVersion="6"/>
          <versionRange minVersion="7" maxVersion="9"/>
          <versionRange minVersion="10" maxVersion="11"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_22@tests.mozilla.org">
      <versionRange>
        <targetApplication id="foo@bar.com"/>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="8"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_23@tests.mozilla.org">
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="7"/>
        </targetApplication>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_24@tests.mozilla.org">
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange maxVersion="8"/>
        </targetApplication>
      </versionRange>
    </emItem>
    <emItem id="test_bug449027_25@tests.mozilla.org">
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange maxVersion="9"/>
        </targetApplication>
      </versionRange>
    </emItem>
  </emItems>
  <pluginItems>
    <!-- All plugins are version 5 and tests run against appVersion 3 -->

    <!-- Test 1-14 not listed, should never get blocked -->
    <!-- Should block for any version of the app -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_15$"/>
      <versionRange>
        <targetApplication id="toolkit@mozilla.org"/>
      </versionRange>
    </pluginItem>
    <!-- Should still block -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_16$"/>
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <!-- Not blocked since neither version range matches -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_17$"/>
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="9"/>
          <versionRange maxVersion="7"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <!-- Invalid version range, should not block -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_18$"/>
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="11" maxVersion="9"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <!-- Should block all of these -->
    <pluginItem>
      <match name="name" exp="^test_bug449027_19$"/>
      <versionRange>
        <targetApplication id="foo@bar.com"/>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="10" maxVersion="11"/>
          <versionRange minVersion="8" maxVersion="9"/>
          <versionRange maxVersion="7"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_20$"/>
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange maxVersion="7"/>
          <versionRange minVersion="7" maxVersion="8"/>
          <versionRange minVersion="9" maxVersion="10"/>
        </targetApplication>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_21$"/>
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="6" maxVersion="6"/>
          <versionRange minVersion="7" maxVersion="9"/>
          <versionRange minVersion="10" maxVersion="11"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_22$"/>
      <versionRange>
        <targetApplication id="foo@bar.com"/>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="8"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_23$"/>
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange minVersion="7"/>
        </targetApplication>
        <targetApplication id="foo@bar.com"/>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_24$"/>
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange maxVersion="8"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug449027_25$"/>
      <versionRange>
        <targetApplication id="toolkit@mozilla.org">
          <versionRange maxVersion="9"/>
        </targetApplication>
      </versionRange>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <pluginItems>
    <pluginItem>
      <match name="name" exp="^test_bug468528_1"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug468528_2["/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug468528_3"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <pluginItems>
    <pluginItem>
      <match name="name" exp="^test_bug514327_1"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug514327_2"/>
      <versionRange severity="0"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_bug514327_3"/>
      <versionRange severity="0"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <pluginItems>
    <pluginItem>
      <match name="name" exp="Test Plug-in"/>
      <versionRange severity="0"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <pluginItems>
    <pluginItem>
      <match name="name" exp="test_bug514327_1"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="test_bug514327_outdated"/>
      <versionRange severity="0"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <pluginItems>
    <pluginItem>
      <match name="name" exp="test_bug514327_2"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="test_bug514327_outdated"/>
      <versionRange severity="0"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="100">
  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test1@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>FAIL</name>
    <type id='1'>Extension</type>
    <guid>test2@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Should not return an incompatible add-on</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>2</min_version>
        <max_version>2</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test3@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>FAIL</name>
    <type id='1'>Extension</type>
    <guid>test4@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Should not return an add-on for a different OS</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install os="UNKNOWN">http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test5@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>FAIL</name>
    <type id='1'>Extension</type>
    <guid>test5@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Should not include the same result twice</summary>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test6@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test7@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test8@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test9@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test10@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test11@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>

  <addon>
    <name>PASS</name>
    <type id='1'>Extension</type>
    <guid>test12@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://localhost:%PORT%/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://localhost:%PORT%/test.xpi</install>
  </addon>
</searchresults>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- Any copyright is dedicated to the Public Domain.
     http://creativecommons.org/publicdomain/zero/1.0/ -->
  </head>
  <body>
    <p>Web Console test for bug 595934 - category "malformed-xml".</p>
  </body>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <gfxItems testattr="GFX"><gfxItem/><gfxItem/></gfxItems>
  <testItems testattr="FOO"><testItem/><testItem/><testItem/></testItems>
  <fooItems/>
</blocklist>
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
https://bugzilla.mozilla.org/show_bug.cgi?id=659743
-->
<head>
  <title>Test for Bug 659743</title>
  <script src="/tests/SimpleTest/SimpleTest.js"></script>
  <script src="/tests/SimpleTest/EventUtils.js"></script>
  <link rel="stylesheet" href="/tests/SimpleTest/test.css"/>
</head>
<body>
<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=659743">Mozilla Bug 659743</a>
<p id="display">
<map name="a">
<area shape="rect" coords="25,25,75,75" href="#x"/>
</map>
<map id="b">
<area shape="rect" coords="25,25,75,75" href="#y"/>
</map>
<map name="a">
<area shape="rect" coords="25,25,75,75" href="#FAIL"/>
</map>
<map id="b">
<area shape="rect" coords="25,25,75,75" href="#FAIL"/>
</map>

<img usemap="#a" src="image.png"/>
<img usemap="#b" src="image.png"/>
</p>
<div id="content" style="display: none">
  
</div>
<pre id="test">
<script type="application/javascript">

/** Test for Bug 659743 **/
SimpleTest.waitForExplicitFinish();
var images = document.getElementsByTagName("img");
var second = false;
onhashchange = function() {
  if (!second) {
    second = true;
    is(location.hash, "#x", "First map");
    SimpleTest.waitForFocus(function() synthesizeMouse(images[1], 50, 50, {}));
  } else {
    is(location.hash, "#y", "Second map");
    SimpleTest.finish();
  }
};
SimpleTest.waitForFocus(function() synthesizeMouse(images[0], 50, 50, {}));
</script>
</pre>
</body>
</html>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="9">
  <addon>
    <name>Test addon 2</name>
    <type id="1">Extension</type>
    <guid>addon2@tests.mozilla.org</guid>
    <version>1.0</version>
  </addon>

  <addon>
    <name>Test addon 3</name>
    <type id="1">Extension</type>
    <guid>addon3@tests.mozilla.org</guid>
    <version>1.0</version>
  </addon>
  <addon_compatibility hosted="true">
    <name>Test addon 3</name>
    <guid>addon3@tests.mozilla.org</guid>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>0.9</min_version>
        <max_version>1.0</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <appID>xpcshell@tests.mozilla.org</appID>
            <min_version>1</min_version>
            <max_version>2</max_version>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>

  <addon>
    <name>Test addon 4</name>
    <type id="1">Extension</type>
    <guid>addon4@tests.mozilla.org</guid>
    <version>1.0</version>
  </addon>
  <addon_compatibility hosted="true">
    <name>Test addon 4</name>
    <guid>addon4@tests.mozilla.org</guid>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>0.9</min_version>
        <max_version>1.0</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <appID>xpcshell@tests.mozilla.org</appID>
            <min_version>1</min_version>
            <max_version>2</max_version>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>

  <addon>
    <name>Test addon 5</name>
    <type id="1">Extension</type>
    <guid>addon5@tests.mozilla.org</guid>
    <version>1.0</version>
  </addon>
  <addon_compatibility hosted="true">
    <name>Test addon 5</name>
    <guid>addon5@tests.mozilla.org</guid>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>0.9</min_version>
        <max_version>1.0</max_version>
        <compatible_applications>
          <application>
            <name>Unknown App</name>
            <appID>unknown-app@tests.mozilla.org</appID>
            <min_version>1</min_version>
            <max_version>2</max_version>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>

  <addon>
    <name>Test addon 6</name>
    <type id="1">Extension</type>
    <guid>addon6@tests.mozilla.org</guid>
    <version>1.0</version>
  </addon>
  <addon_compatibility hosted="true">
    <name>Test addon 6</name>
    <guid>addon6@tests.mozilla.org</guid>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>0.5</min_version>
        <max_version>0.9</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <appID>xpcshell@tests.mozilla.org</appID>
            <min_version>1</min_version>
            <max_version>2</max_version>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>
  
  <addon>
    <name>Test addon 7</name>
    <type id="1">Extension</type>
    <guid>addon7@tests.mozilla.org</guid>
    <version>1.0</version>
  </addon>
  <addon_compatibility hosted="true">
    <name>Test addon 7</name>
    <guid>addon7@tests.mozilla.org</guid>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>0.5</min_version>
        <max_version>1.0</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <appID>xpcshell@tests.mozilla.org</appID>
            <min_version>0.1</min_version>
            <max_version>0.9</max_version>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>
  
  <addon>
    <name>Test addon 8</name>
    <type id="1">Extension</type>
    <guid>addon8@tests.mozilla.org</guid>
    <version>1.0</version>
  </addon>
  <addon_compatibility hosted="true">
    <name>Test addon 8</name>
    <guid>addon8@tests.mozilla.org</guid>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>6</min_version>
        <max_version>6.2</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <appID>xpcshell@tests.mozilla.org</appID>
            <min_version>0.9</min_version>
            <max_version>9</max_version>
          </application>
        </compatible_applications>
      </version_range>
      <version_range type="incompatible">
        <min_version>0.5</min_version>
        <max_version>1.0</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <appID>xpcshell@tests.mozilla.org</appID>
            <min_version>0.1</min_version>
            <max_version>9</max_version>
          </application>
          <application>
            <name>Unknown app</name>
            <appID>unknown-app@tests.mozilla.org</appID>
            <min_version>0.1</min_version>
            <max_version>9</max_version>
          </application>
        </compatible_applications>
      </version_range>
      <version_range type="incompatible">
        <min_version>0.1</min_version>
        <max_version>0.2</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <appID>xpcshell@tests.mozilla.org</appID>
            <min_version>0.1</min_version>
            <max_version>0.9</max_version>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>

  <addon_compatibility hosted="false">
    <name>Test addon 9</name>
    <guid>addon9@tests.mozilla.org</guid>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>0.5</min_version>
        <max_version>1.0</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <appID>xpcshell@tests.mozilla.org</appID>
            <min_version>1</min_version>
            <max_version>2</max_version>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>

  <addon_compatibility hosted="false">
    <name>Test addon 10</name>
    <guid>addon10@tests.mozilla.org</guid>
    <version_ranges>
      <version_range type="compatible">
        <min_version>0.5</min_version>
        <max_version>1.0</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <appID>xpcshell@tests.mozilla.org</appID>
            <min_version>1</min_version>
            <max_version>2</max_version>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>

</searchresults>
<?xml version="1.0" encoding="UTF-8"?>
<!--
This file holds serialized tests for DOM Range tests on extractContents.
The <test/> elements designate individual tests.  Each one has the following:

* A <source/> element, designating the start conditions of the test,
* A <result/> element, designating what the source element should look like
  after the extraction,
* An <extract/> element, designating what the extracted content should look like.

The <split/> element designates a split between two DOM nodes. This element will
be removed before the actual test, and the two nodes on either side will not be
merged.

The <empty-cdata/> element designates an empty character data section.  Before
the test executes, this element is replaced with an actual CDATASection node.

For the <source/> element, there are four attributes:

* startContainer:  A XPath to the startContainer of the range.
* endContainer:  A XPath to the endContainer of the range.
* startOffset:  The startOffset of the range.
* endOffset:  The endOffset of the range.

Note this test may need updating with a fix for bug 401276.  The spec states
adjacent nodes after an extraction should be merged if possible, but using the
normalize() method, which could have unintended side effects... For now, we're
not permitting that, pending clarification.

Please make sure the first test in this document always tests a range where the
start container and end container are the same text node, and where the start
offset and end offsets are valid and inequal.  Some of the additional range
tests (after the bulk of the delete/extract tests) depend on it.
  -->
<root>
  <!-- Extracting from a text node. -->
  <test>
    <source startContainer="text()[1]"
            endContainer="text()[1]"
            startOffset="4"
            endOffset="10">The quick fox</source>
    <result>The fox</result>
    <extract>quick </extract>
  </test>

  <!-- Extracting from a CDATA section. -->
  <test>
    <source startContainer="text()[1]"
            endContainer="text()[1]"
            startOffset="4"
            endOffset="10"><![CDATA[The quick fox]]></source>
    <result><![CDATA[The fox]]></result>
    <extract><![CDATA[quick ]]></extract>
  </test>

  <!-- Snipping the start of a text node. -->
  <test>
    <source startContainer="text()[1]"
            endContainer="text()[1]"
            startOffset="0"
            endOffset="4"><![CDATA[The quick fox]]></source>
    <result><![CDATA[quick fox]]></result>
    <extract><![CDATA[The ]]></extract>
  </test>

  <!-- Extracting from a comment. -->
  <test>
    <source startContainer="comment()[1]"
            endContainer="comment()[1]"
            startOffset="4"
            endOffset="10"><!--The quick fox--></source>
    <result><!--The fox--></result>
    <extract><!--quick --></extract>
  </test>

  <!-- Snipping whole nodes -->
  <test>
    <source startContainer="."
            endContainer="."
            startOffset="0"
            endOffset="2">Fox<fox/>Fox<bear/><!--comment--></source>
    <result>Fox<bear/><!--comment--></result>
    <extract>Fox<fox/></extract>
  </test>

  <!-- Snipping whole nodes -->
  <test>
    <source startContainer="."
            endContainer="."
            startOffset="1"
            endOffset="3">Fox<fox/>Fox<bear/><!--comment--></source>
    <result>Fox<bear/><!--comment--></result>
    <extract><fox/>Fox</extract>
  </test>

  <!-- Snipping a mixture of nodes and portions of text -->
  <test>
    <source startContainer="text()[2]"
            startOffset="1"
            endContainer="comment()[1]"
            endOffset="3">Fox<fox/>Fox<bear><?cow ?></bear><!--comment--></source>
    <result>Fox<fox/>F<!--ment--></result>
    <extract>ox<bear><?cow ?></bear><!--com--></extract>
  </test>

  <!-- Extracting with a collapsed range from a text node. -->
  <test>
    <source startContainer="text()[1]"
            endContainer="text()[1]"
            startOffset="4"
            endOffset="4">The quick fox</source>
    <result>The quick fox</result>
    <extract/>
  </test>

  <!-- Extracting with a collapsed range from a non-text node. -->
  <test>
    <source startContainer="."
            endContainer="."
            startOffset="0"
            endOffset="0">Fox<fox/>Fox<bear/><!--comment--></source>
    <result>Fox<fox/>Fox<bear/><!--comment--></result>
    <extract/>
  </test>
</root>
<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
  <ShortName>Foo</ShortName>
  <Description>Foo Search</Description>
  <InputEncoding>utf-8</InputEncoding>
  <Image width="16" height="16">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAABGklEQVQoz2NgGB6AnZ1dUlJSXl4eSDIyMhLW4Ovr%2B%2Fr168uXL69Zs4YoG%2BLi4i5dusTExMTGxsbNzd3f37937976%2BnpmZmagbHR09J49e5YvX66kpATVEBYW9ubNm2nTphkbG7e2tp44cQLIuHfvXm5urpaWFlDKysqqu7v73LlzECMYIiIiHj58mJCQoKKicvXq1bS0NKBgW1vbjh074uPjgeqAXE1NzSdPnvDz84M0AEUvXLgAsW379u1z5swBen3jxo2zZ892cHB4%2BvQp0KlAfwI1cHJyghQFBwfv2rULokFXV%2FfixYu7d%2B8GGqGgoMDKyrpu3br9%2B%2FcDuXl5eVA%2FAEWBfoWHAdAYoNuAYQ0XAeoUERFhGDYAAPoUaT2dfWJuAAAAAElFTkSuQmCC</Image>
  <Url type="application/x-suggestions+json" method="GET" template="http://mochi.test:8888/browser/browser/components/search/test/?suggestions&amp;locale={moz:locale}&amp;test={searchTerms}"/>
  <Url type="text/html" method="GET" template="http://mochi.test:8888/browser/browser/components/search/test/">
    <Param name="test" value="{searchTerms}"/>
    <Param name="ie" value="utf-8"/>
    <MozParam name="client" condition="defaultEngine" trueValue="app-default" falseValue="app"/>
    <MozParam name="channel" condition="purpose" purpose="keyword" value="keywordsearch"/>
    <MozParam name="channel" condition="purpose" purpose="contextmenu" value="contextsearch"/>
  </Url>
  <SearchForm>http://mochi.test:8888/browser/browser/components/search/test/</SearchForm>
</SearchPlugin>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/"
                       xmlns:moz="http://www.mozilla.org/2006/browser/search/">
  <ShortName>Foo</ShortName>
  <Description>Foo Search</Description>
  <InputEncoding>utf-8</InputEncoding>
  <Image width="16" height="16">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAABGklEQVQoz2NgGB6AnZ1dUlJSXl4eSDIyMhLW4Ovr%2B%2Fr168uXL69Zs4YoG%2BLi4i5dusTExMTGxsbNzd3f37937976%2BnpmZmagbHR09J49e5YvX66kpATVEBYW9ubNm2nTphkbG7e2tp44cQLIuHfvXm5urpaWFlDKysqqu7v73LlzECMYIiIiHj58mJCQoKKicvXq1bS0NKBgW1vbjh074uPjgeqAXE1NzSdPnvDz84M0AEUvXLgAsW379u1z5swBen3jxo2zZ892cHB4%2BvQp0KlAfwI1cHJyghQFBwfv2rULokFXV%2FfixYu7d%2B8GGqGgoMDKyrpu3br9%2B%2FcDuXl5eVA%2FAEWBfoWHAdAYoNuAYQ0XAeoUERFhGDYAAPoUaT2dfWJuAAAAAElFTkSuQmCC</Image>
  <Url type="text/html" method="GET" template="http://mochi.test:8888/browser/browser/components/search/test/?search">
    <Param name="test" value="{searchTerms}"/>
  </Url>
  <moz:SearchForm>http://mochi.test:8888/browser/browser/components/search/test/</moz:SearchForm>
  <moz:Alias>fooalias</moz:Alias>
</OpenSearchDescription>
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2010-08-22T18:30:02Z</updated>

  <author>
    <name>John Doe</name>
  </author>
  <id>urn:uuid:e2df8375-99be-4848-b05e-b9d407555267</id>

  <entry>

    <title>Item</title>
    <link href="http://example.org/first"/>
    <id>urn:uuid:9e0f4bed-33d3-4a9d-97ab-ecaa31b3f14a</id>
    <updated>2010-08-22T18:30:02Z</updated>

    <summary>Some text.</summary>
  </entry>

</feed>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:g="http://www.w3.org/2000/svg">
 <head>
  <title>document.getElementsByClassName(): compound</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
 </head>
 <body>
  <div id="log"/>
  <x class="a"/>
  <g:x class="a"/>
  <script>test(function() {
                 assert_array_equals(document.getElementsByClassName("a"), 
                                     document.getElementsByTagName("x"));
               })
  </script>
 </body>
</html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:g="http://www.w3.org/2000/svg" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:t="http://tc.labs.opera.com/#test">
 <head>
  <title>document.getElementsByClassName(): "tricky" compound</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
 </head>
 <body>
  <div id="log" />  
  <x class="a"/>
  <g:x class="a"/>
  <x t:class="a" h:class="a" g:class="a"/>
  <g:x t:class="a" h:class="a" g:class="a"/>
  <t:x class="a" t:class="a" h:class="a" g:class="a"/>
  <script>
   test(function() {
          var collection = document.getElementsByClassName("a");
          var test = document.getElementsByTagName("x");
          assert_array_equals(collection, [test[0], test[1]]);
         })
  </script>
 </body>
</html>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <gfxItems>
    <gfxBlacklistEntry>
      <os>WINNT 6.1</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.2202 </driverVersion>
      <driverVersionComparator> LESS_THAN </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>WINNT 6.0</os>
      <vendor>0xdcba</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT3D_9_LAYERS </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.2202 </driverVersion>
      <driverVersionComparator> LESS_THAN </driverVersionComparator>
    </gfxBlacklistEntry>
  </gfxItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <gfxItems>
    <gfxBlacklistEntry>
      <os>All</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.2202 </driverVersion>
      <driverVersionComparator> LESS_THAN </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>WINNT 6.0</os>
      <vendor>0xdcba</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT3D_9_LAYERS </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.2202 </driverVersion>
      <driverVersionComparator> LESS_THAN </driverVersionComparator>
    </gfxBlacklistEntry>
  </gfxItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <gfxItems>
    <gfxBlacklistEntry>
      <os>WINNT 6.2</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.2202 </driverVersion>
      <driverVersionComparator> LESS_THAN </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>Darwin 12</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> OPENGL_LAYERS </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.2202 </driverVersion>
      <driverVersionComparator> LESS_THAN </driverVersionComparator>
    </gfxBlacklistEntry>
  </gfxItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <gfxItems>
    <gfxBlacklistEntry>
      <os>WINNT 6.1</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.2202 </driverVersion>
      <driverVersionComparator> LESS_THAN </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>WINNT 6.0</os>
      <vendor>0xdcba</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT3D_9_LAYERS </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.2202 </driverVersion>
      <driverVersionComparator> LESS_THAN </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>WINNT 6.1</os>
      <vendor>0xabab</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.2202 </driverVersion>
      <driverVersionComparator> GREATER_THAN_OR_EQUAL </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>WINNT 6.1</os>
      <vendor>0xdcdc</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 8.52.322.1111 </driverVersion>
      <driverVersionComparator> EQUAL </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>Darwin 9</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>Linux</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x2783</device>
        <device>0x1234</device>
        <device>0x2782</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>Android</os>
      <vendor>abcd</vendor>
      <devices>
        <device>wxyz</device>
        <device>asdf</device>
        <device>erty</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 5 </driverVersion>
      <driverVersionComparator> LESS_THAN_OR_EQUAL </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>Android</os>
      <vendor>dcdc</vendor>
      <devices>
        <device>uiop</device>
        <device>vbnm</device>
        <device>hjkl</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 5 </driverVersion>
      <driverVersionComparator> EQUAL </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>Android</os>
      <vendor>abab</vendor>
      <devices>
        <device>ghjk</device>
        <device>cvbn</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DRIVER_VERSION </featureStatus>
      <driverVersion> 7 </driverVersion>
      <driverVersionComparator> GREATER_THAN_OR_EQUAL </driverVersionComparator>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>WINNT 6.1</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x6666</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DEVICE </featureStatus>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>Darwin 9</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x6666</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DEVICE </featureStatus>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>Linux</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x6666</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DEVICE </featureStatus>
    </gfxBlacklistEntry>
    <gfxBlacklistEntry>
      <os>Android</os>
      <vendor>0xabcd</vendor>
      <devices>
        <device>0x6666</device>
      </devices>
      <feature> DIRECT2D </feature>
      <featureStatus> BLOCKED_DEVICE </featureStatus>
    </gfxBlacklistEntry>
  </gfxItems>
</blocklist>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="1">
  <addon>
    <name>Real Test 2</name>
    <type id='1'>Extension</type>
    <guid>addon2@tests.mozilla.org</guid>
    <version>1.0</version>
    <authors>
      <author>
        <name>Test Creator</name>
        <link>http://example.com/creator.html</link>
      </author>
    </authors>
    <status id='4'>Public</status>
    <summary>Repository summary</summary>
    <description>Repository description</description>
    <compatible_applications>
      <application>
        <name>Firefox</name>
        <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
      <application>
        <name>SeaMonkey</name>
        <appID>{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}</appID>
        <min_version>0</min_version>
        <max_version>*</max_version>
      </application>
    </compatible_applications>
    <compatible_os>ALL</compatible_os>
    <install size="2">http://example.com/browser/toolkit/mozapps/extensions/test/browser/addons/browser_install1_2.xpi</install>
  </addon>

  <addon_compatibility hosted="false">
    <guid>addon6@tests.mozilla.org</guid>
    <name>Addon Test 6</name>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>1.0</min_version>
        <max_version>1.0</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <min_version>1.0</min_version>
            <max_version>1.0</max_version>
            <appID>xpcshell@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>
</searchresults>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Node.nodeName</title>
<link rel="author" title="Olli Pettay" href="mailto:Olli@Pettay.fi"/>
<link rel="author" title="Ms2ger" href="mailto:Ms2ger@gmail.com"/>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
</head>
<body>
<div id="log"/>
<div id="test">
  <input type="button" id="testbutton"/>
  <a id="link">Link text</a>
</div>
<script>
<![CDATA[
test(function() {
  assert_throws(new TypeError(), function() {
    document.contains();
  });
  assert_throws(new TypeError(), function() {
    document.contains(9);
  });
}, "Should throw TypeError if the arguments are wrong.");

test(function() {
  assert_equals(document.contains(null), false, "Document shouldn't contain null.");
}, "contains(null) should be false");

test(function() {
  assert_equals(document.contains(document), true, "Document should contain itself!");
  assert_equals(document.contains(document.createElement("foo")), false, "Document shouldn't contain element which is't in the document");
  assert_equals(document.contains(document.createTextNode("foo")), false, "Document shouldn't contain text node which is't in the document");
}, "document.contains");

test(function() {
  var tb = document.getElementById("testbutton");
  assert_equals(tb.contains(tb), true, "Element should contain itself.")
  assert_equals(document.contains(tb), true, "Document should contain element in it!");
  assert_equals(document.documentElement.contains(tb), true, "Element should contain element in it!");
}, "contains with a button");

test(function() {
  var link = document.getElementById("link");
  var text = link.firstChild;
  assert_equals(document.contains(text), true, "Document should contain a text node in it.");
  assert_equals(link.contains(text), true, "Element should contain a text node in it.");
  assert_equals(text.contains(text), true, "Text node should contain itself.");
  assert_equals(text.contains(link), false, "text node shouldn't contain its parent.");
}, "contains with a text node");

test(function() {
  var pi = document.createProcessingInstruction("adf", "asd");
  assert_equals(pi.contains(document), false, "Processing instruction shouldn't contain document");
  assert_equals(document.contains(pi), false, "Document shouldn't contain newly created processing instruction");
  document.documentElement.appendChild(pi);
  document.contains(pi, true, "Document should contain processing instruction");
}, "contains with a processing instruction");

test(function() {
  if ("createContextualFragment" in document.createRange()) {
    var df = document.createRange().createContextualFragment("<div>foo</div>");
    assert_equals(df.contains(df.firstChild), true, "Document fragment should contain its child");
    assert_equals(df.contains(df.firstChild.firstChild), true,
       "Document fragment should contain its descendant");
    assert_equals(df.contains(df), true, "Document fragment should contain itself.");
  }
}, "contains with a document fragment");

test(function() {
  var d = document.implementation.createHTMLDocument("");
  assert_equals(document.contains(d), false,
     "Document shouldn't contain another document.");
  assert_equals(document.contains(d.createElement("div")), false,
     "Document shouldn't contain an element from another document.");
  assert_equals(document.contains(d.documentElement), false,
     "Document shouldn't contain an element from another document.");
}, "contaibs with another document");
]]>
</script>
</body>
</html>
<xml>
  <foo>
    <bar>baz</bar>
  </foo>
</xml>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <pluginItems>
    <pluginItem>
      <match name="name" exp="^Test Plug-in"/>
      <versionRange minVersion="0" maxVersion="*" severity="0" vulnerabilitystatus="2"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="UTF-8"?>

<blocklist xmlns="http://www.mozilla.org/2006/addons-blocklist">
  <pluginItems>
    <pluginItem>
      <match name="name" exp="^test_plugin_0"/>
      <versionRange minVersion="0" maxVersion="*" severity="0" vulnerabilitystatus="0"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_plugin_1"/>
      <versionRange minVersion="0" maxVersion="*" severity="0" vulnerabilitystatus="1"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_plugin_2"/>
      <versionRange minVersion="0" maxVersion="*" severity="0" vulnerabilitystatus="2"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_plugin_3"/>
      <versionRange minVersion="0" maxVersion="*" vulnerabilitystatus="2"/>
    </pluginItem>
    <pluginItem>
      <match name="name" exp="^test_plugin_4"/>
      <versionRange minVersion="0" maxVersion="*" severity="1" vulnerabilitystatus="2"/>
    </pluginItem>
  </pluginItems>
</blocklist>
<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="1">
  <!-- Passes all requirements -->
  <addon>
    <name>Test</name>
    <type id="1">Extension</type>
    <guid>addon@tests.mozilla.org</guid>
    <version>1</version>
    <compatible_applications>
      <application>
        <appID>xpcshell@tests.mozilla.org</appID>
        <min_version>1</min_version>
        <max_version>1</max_version>
      </application>
    </compatible_applications>
    <install>http://www.example.com/testaddon.xpi</install>
  </addon>
</searchresults>
<?xml-stylesheet type="text/css" href="/tests/SimpleTest/test.css" ?>
<root>
  <script type="text/javascript" src="/tests/SimpleTest/SimpleTest.js" xmlns="http://www.w3.org/1999/xhtml"/>

  <body xmlns="http://www.w3.org/1999/xhtml">
    <p id="display"></p>
    <div id="content" style="display: none;"></div>
    <textarea id="test" style="height: 300px; max-width: 800px; overflow: scroll;"
              rows="10" cols="160" readonly="readonly"/>
  </body>

<pre id="test" xmlns="http://www.w3.org/1999/xhtml">
<script class="testbody" type="text/javascript" xmlns="http://www.w3.org/1999/xhtml">
<![CDATA[
var passedNodes = new WeakMap();
function setPass(aNode) {
  passedNodes.set(aNode, true);
}

SimpleTest.waitForExplicitFinish();

window.addEventListener("load", function() {
  const nsIDOMNodeFilter = SpecialPowers.Ci.nsIDOMNodeFilter;
  var walker = document.createTreeWalker(
    document,
    nsIDOMNodeFilter.SHOW_TEXT | nsIDOMNodeFilter.SHOW_DOCUMENT,
    null
  );
  setPass(walker.firstChild());
  while (walker.nextSibling()) {
    setPass(walker.currentNode);
  }

/*
From http://www.w3.org/TR/2000/REC-DOM-Level-2-Traversal-Range-20001113/traversal.html#Traversal-TreeWalker
Omitting nodes from the logical view of a subtree can result in a structure that
is substantially different from the same subtree in the complete, unfiltered
document. Nodes that are siblings in the TreeWalker view may be children of
different, widely separated nodes in the original view. For instance, consider a
NodeFilter that skips all nodes except for Text nodes and the root node of a
document. In the logical view that results, all text nodes will be siblings and
appear as direct children of the root node, no matter how deeply nested the
structure of the original document.
*/

  walker2 = document.createTreeWalker(document, nsIDOMNodeFilter.SHOW_TEXT, null);
  while (walker2.nextNode()) {
    var cNode = walker2.currentNode;
    ok(passedNodes.get(cNode), "Every text node should appear: " + walker2.currentNode.nodeValue);
    walker.currentNode = cNode;
    var parent = walker.parentNode();
    is(parent, document, "parent of text node should be document");

    // Check nextSibling's previousSibling.
    walker.currentNode = cNode;
    if (walker.nextSibling()) {
      is(cNode, walker.previousSibling(), "nextSibling.previousSibling should be consistent");
    }

    // Check previousSibling's nextSibling.
    walker.currentNode = cNode;
    if (walker.previousSibling()) {
      is(cNode, walker.nextSibling(), "previousSibling.nextSibling should be consistent");
    }
  }
  SimpleTest.finish();
}, true);
]]>
</script>
</pre>

  <test>
    zero
    <one>
      one-A
      <two>
        two-A
      </two>
      <two>
        two-B
      </two>
      one-B
    </one>
    <one>
      one-C
      <two>
        two-D
      </two>
      <two>
        two-E
      </two>
      one-F
    </one>
    zero
  </test>
</root>

<?xml version="1.0" encoding="utf-8" ?>
<searchresults total_results="11">
  <addon>
    <name>Test Addon 9</name>
    <type id="1">Extension</type>
    <guid>addon9@tests.mozilla.org</guid>
  </addon>
  <addon_compatibility hosted="true">
    <guid>addon9@tests.mozilla.org</guid>
    <name>Test Addon 9</name>
    <version_ranges>
      <version_range type="incompatible">
        <min_version>4</min_version>
        <max_version>4</max_version>
        <compatible_applications>
          <application>
            <name>XPCShell</name>
            <min_version>1</min_version>
            <max_version>1</max_version>
            <appID>xpcshell@tests.mozilla.org</appID>
          </application>
        </compatible_applications>
      </version_range>
    </version_ranges>
  </addon_compatibility>
</searchresults>
<?xml version="1.0"?>
<!DOCTYPE doc [
<!ATTLIST p id ID #IMPLIED>
]>
<doc>
  <p id="id1">Text from sample XML document.</p>
</doc><?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.22 $"/>
		<generation date="$Date: 2008/05/25 01:05:57 $"/>
		<language type="te"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Telu</icu:script>
			</icu:scripts>
		</special>
	</characters>
	<dates>
		<calendars>
			<calendar type="gregorian">
				<dayPeriods>
					<dayPeriodContext type="format">
						<dayPeriodWidth type="wide">
							<dayPeriod type="am">ఉ</dayPeriod>
							<dayPeriod type="pm">సా</dayPeriod>
						</dayPeriodWidth>
					</dayPeriodContext>
				</dayPeriods>
			</calendar>
		</calendars>
	</dates>
</ldml>

 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:h="http://www.w3.org/1999/xhtml">
    <its:textAnalysisRule selector="//h:body/h:p/h:*[@id='dublin']"
      taClassRefPointer="@typeof"
      taIdentRefPointer="@property"/>
    <its:textAnalysisRule selector="//h:body/h:p/h:*[@id='capital']"
      taClassRefPointer="@typeof"
      taSourcePointer="@property"
      taIdentPointer="@about"/>
  </its:rules>
<?xml version="1.0"?>
<text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:textAnalysisRule selector="/text/body/p/*[@id='dublin']"
      taClassRefPointer="@classref"
      taIdentRefPointer="@identref"/>
    <its:textAnalysisRule selector="/text/body/p/*[@id='capital']"
      taClassRefPointer="@classref"
      taSourcePointer="@source"
      taIdentPointer="@ident"/>
  </its:rules>
  <body>
    <p><span classref="http://nerd.eurecom.fr/ontology#Location" id="dublin" identref="http://dbpedia.org/resource/Dublin">Dublin</span> is the <span id="capital" classref="http://nerd.eurecom.fr/ontology#City" source="Wordnet3.0" ident="301467919">capital</span> of Ireland.</p>
  </body>
</text>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:h="http://www.w3.org/1999/xhtml">
    <its:param name="taCityParam">dublin</its:param>
    <its:param name="taCapitalParam">capital</its:param>
    <its:textAnalysisRule selector="//h:body/h:p/h:*[@id=$taCityParam]"
      taClassRefPointer="@typeof"
      taIdentRefPointer="@property"/>
    <its:textAnalysisRule selector="//h:body/h:p/h:*[@id=$taCapitalParam]"
      taClassRefPointer="@typeof"
      taSourcePointer="@property"
      taIdentPointer="@about"/>
  </its:rules>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
      <its:textAnalysisRule selector="/text/body/p/*[@id='dublin']"
      taClassRefPointer="@classref"
      taIdentRefPointer="@identref"/>
    <its:textAnalysisRule selector="/text/body/p/*[@id='capital']"
      taClassRefPointer="@classref"
      taSourcePointer="@source"
      taIdentPointer="@ident"/>
  </its:rules>
<?xml version="1.0"?>
<text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="textanalysis2xmlrules.xml"/>
  <body>
    <p><span classref="http://nerd.eurecom.fr/ontology#Location" id="dublin" identref="http://dbpedia.org/resource/Dublin">Dublin</span> is the <span id="capital" classref="http://nerd.eurecom.fr/ontology#City" source="Wordnet3.0" ident="301467919">capital</span> of Ireland.</p>
  </body>
</text>
 <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:h="http://www.w3.org/1999/xhtml">
    <its:textAnalysisRule selector="//h:body/h:p/h:*[@id='dublin']"
      taClassRefPointer="@typeof"
      taIdentRefPointer="@about"/>
  </its:rules>
<?xml version="1.0"?>
<text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:param name="taCityParam">dublin</its:param>
    <its:param name="taCapitalParam">capital</its:param>
    <its:textAnalysisRule selector="/text/body/p/*[@id='dublin']"
      taClassRefPointer="@classref"
      taIdentRefPointer="@identref"/>
    <its:textAnalysisRule selector="/text/body/p/*[@id='capital']"
      taClassRefPointer="@classref"
      taSourcePointer="@source"
      taIdentPointer="@ident"/>
  </its:rules>
  <body>
    <p><span classref="http://nerd.eurecom.fr/ontology#Location" id="dublin" identref="http://dbpedia.org/resource/Dublin">Dublin</span> is the <span id="capital" classref="http://nerd.eurecom.fr/ontology#City" source="Wordnet3.0" ident="301467919">capital</span> of Ireland.</p>
  </body>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:param name="taCityParam">dublin</its:param>
    <its:param name="taCapitalParam">capital</its:param>
   <its:textAnalysisRule selector="/text/body/p/*[@id='dublin']"
      taClassRefPointer="@classref"
      taIdentRefPointer="@identref"/>
    <its:textAnalysisRule selector="/text/body/p/*[@id='capital']"
      taClassRefPointer="@classref"
      taSourcePointer="@source"
      taIdentPointer="@ident"/>
  </its:rules>
<?xml version="1.0"?>
<text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="textanalysis4xmlrules.xml"/>
  <body>
    <p><span classref="http://nerd.eurecom.fr/ontology#Location" id="dublin" identref="http://dbpedia.org/resource/Dublin">Dublin</span> is the <span id="capital" classref="http://nerd.eurecom.fr/ontology#City" source="Wordnet3.0" ident="301467919">capital</span> of Ireland.</p>
  </body>
</text>
<?xml version="1.0"?>
<text xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0" its:annotatorsRef="text-analysis|http://enrycher.ijs.si">
  <body>
    <p><span its:taClassRef="http://nerd.eurecom.fr/ontology#Location"  its:taIdentRef="http://dbpedia.org/resource/Dublin" its:taConfidence="0.7">Dublin</span> is the <span its:taSource="Wordnet3.0" its:taIdent="301467919" its:taConfidence="0.5">capital</span> of Ireland.</p>
  </body>
</text>
<?xml version="1.0"?>
<text xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0" its:annotatorsRef="text-analysis|http://enrycher.ijs.si">
  <body>
    <p><its:span taClassRef="http://nerd.eurecom.fr/ontology#Location" taIdentRef="http://dbpedia.org/resource/Dublin" taConfidence="0.7"
>Dublin</its:span> is the <its:span taSource="Wordnet3.0" taIdent="301467919" taConfidence="0.5">capital</its:span> of Ireland.</p>
  </body>
</text>
<?xml version="1.0"?>
<text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:textAnalysisRule selector="/text/body/p/*[@id='dublin']"
      taClassRefPointer="@classref"
      taIdentRefPointer="@identref"/>
    <its:textAnalysisRule selector="/text/body/p/*[@id='capital']"
      taSourcePointer="@source"
      taIdentPointer="@ident"/>
  </its:rules>
  <body>
    <p><span classref="http://nerd.eurecom.fr/ontology#Location" identref="http://dbpedia.org/resource/Dublin"  id="dublin">Dublin</span> is the <span source="Wordnet3.0" ident="301467919" id="capital">capital</span> of Ireland.</p>
  </body>
</text>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:textAnalysisRule selector="/text/body/p/*[@id='dublin']"
      taClassRefPointer="@classref"
      taIdentRefPointer="@identref"/>
    <its:textAnalysisRule selector="/text/body/p/*[@id='capital']"
      taSourcePointer="@source"
      taIdentPointer="@ident"/>
  </its:rules>
<?xml version="1.0"?>
<text>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="textanalysis8xmlrules.xml"/>
  <body>
   <p><span classref="http://nerd.eurecom.fr/ontology#Location" identref="http://dbpedia.org/resource/Dublin"  id="dublin">Dublin</span> is the <span source="Wordnet3.0" ident="301467919" id="capital">capital</span> of Ireland.</p>
  </body>
</text>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - TEXTAREA</title>
</head>
<body onload="parent.loadComplete()">
<form id="form1" action="./files/getData.pl" method="post">
<p>
<textarea name="text1" cols="20" rows="7" accesskey="c" tabindex="5">TEXTAREA1</textarea>
<input type="submit" name="submit1" value="Submit1"/>
<input type="reset" name="reset1" value="Reset1"/>
</p>
</form>
<p>
<textarea name="text2" cols="50" rows="2" disabled="disabled">TEXTAREA2</textarea>
<input type="submit" name="submit2" value="Submit2"/>
<input type="reset" name="reset2" value="Reset2"/>
<textarea name="text2" cols="50" rows="2" readonly="readonly">TEXTAREA3</textarea>
<input type="submit" name="submit3" value="Submit3"/>
<input type="reset" name="reset3" value="Reset3"/>
</p>
</body>
</html>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_enabled="true">
        <shape>
            <solid android:color="@color/textbox_background" />
            <stroke android:width="1dp" android:color="@color/textbox_stroke" />
        </shape>
    </item>

    <item android:state_enabled="false">
        <shape>
            <solid android:color="@color/textbox_background_disabled" />
            <stroke android:width="1dp" android:color="@color/textbox_stroke_disabled" />
        </shape>
    </item>

</selector>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings [
  <!ENTITY % textcontextDTD SYSTEM "chrome://global/locale/textcontext.dtd" >
  %textcontextDTD;
]>

<bindings id="textboxBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:html="http://www.w3.org/1999/xhtml"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="textbox" extends="xul:box" role="xul:textbox">
    <resources>
      <stylesheet src="chrome://global/content/textbox.css"/>
      <stylesheet src="chrome://global/skin/textbox.css"/>
    </resources>

    <content>
      <children/>
      <xul:hbox class="textbox-input-box" flex="1" xbl:inherits="context,spellcheck">
        <html:input class="textbox-input" anonid="input"
                    xbl:inherits="value,type,maxlength,disabled,size,readonly,placeholder,tabindex,accesskey,noinitialfocus,mozactionhint,spellcheck"/>
      </xul:hbox>
    </content>

    <implementation implements="nsIDOMXULTextBoxElement, nsIDOMXULLabeledControlElement">
      <!-- nsIDOMXULLabeledControlElement -->
      <field name="crop">""</field>
      <field name="image">""</field>
      <field name="command">""</field>
      <field name="accessKey">""</field>

      <field name="mInputField">null</field>
      <field name="mIgnoreClick">false</field>
      <field name="mIgnoreFocus">false</field>
      <field name="mEditor">null</field>

      <property name="inputField" readonly="true">
        <getter><![CDATA[
          if (!this.mInputField)
            this.mInputField = document.getAnonymousElementByAttribute(this, "anonid", "input");
          return this.mInputField;
        ]]></getter>
      </property>

      <property name="value"      onset="this.inputField.value = val; return val;"
                                  onget="return this.inputField.value;"/>
      <property name="defaultValue" onset="this.inputField.defaultValue = val; return val;"
                                  onget="return this.inputField.defaultValue;"/>
      <property name="label"      onset="this.setAttribute('label', val); return val;"
                                  onget="return this.getAttribute('label') ||
                                                (this.labelElement ? this.labelElement.value :
                                                 this.placeholder);"/>
      <property name="placeholder" onset="this.inputField.placeholder = val; return val;"
                                  onget="return this.inputField.placeholder;"/>
      <property name="emptyText"  onset="this.placeholder = val; return val;"
                                  onget="return this.placeholder;"/>
      <property name="type"       onset="if (val) this.setAttribute('type', val);
                                         else this.removeAttribute('type'); return val;"
                                  onget="return this.getAttribute('type');"/>
      <property name="maxLength"  onset="this.inputField.maxLength = val; return val;"
                                  onget="return this.inputField.maxLength;"/>
      <property name="disabled"   onset="this.inputField.disabled = val;
                                         if (val) this.setAttribute('disabled', 'true');
                                         else this.removeAttribute('disabled'); return val;"
                                  onget="return this.inputField.disabled;"/>
      <property name="tabIndex"   onget="return parseInt(this.getAttribute('tabindex'));"
                                  onset="this.inputField.tabIndex = val;
                                         if (val) this.setAttribute('tabindex', val);
                                         else this.removeAttribute('tabindex'); return val;"/>
      <property name="size"       onset="this.inputField.size = val; return val;"
                                  onget="return this.inputField.size;"/>
      <property name="readOnly"   onset="this.inputField.readOnly = val;
                                         if (val) this.setAttribute('readonly', 'true');
                                         else this.removeAttribute('readonly'); return val;"
                                  onget="return this.inputField.readOnly;"/>
      <property name="clickSelectsAll"
                onget="return this.getAttribute('clickSelectsAll') == 'true';"
                onset="if (val) this.setAttribute('clickSelectsAll', 'true');
                       else this.removeAttribute('clickSelectsAll'); return val;" />

      <property name="editor" readonly="true">
        <getter><![CDATA[
          if (!this.mEditor) {
            const nsIDOMNSEditableElement = Components.interfaces.nsIDOMNSEditableElement;
            this.mEditor = this.inputField.QueryInterface(nsIDOMNSEditableElement).editor;
          }
          return this.mEditor;
        ]]></getter>
      </property>

      <method name="reset">
        <body><![CDATA[
          this.value = this.defaultValue;
          try {
            this.editor.transactionManager.clear();
            return true;
          }
          catch(e) {}
          return false;
        ]]></body>
      </method>

      <method name="select">
        <body>
          this.inputField.select();
        </body>
      </method>

      <property name="controllers"    readonly="true" onget="return this.inputField.controllers"/>
      <property name="textLength"     readonly="true"
                                      onget="return this.inputField.textLength;"/>
      <property name="selectionStart" onset="this.inputField.selectionStart = val; return val;"
                                      onget="return this.inputField.selectionStart;"/>
      <property name="selectionEnd"   onset="this.inputField.selectionEnd = val; return val;"
                                      onget="return this.inputField.selectionEnd;"/>

      <method name="setSelectionRange">
        <parameter name="aSelectionStart"/>
        <parameter name="aSelectionEnd"/>
        <body>
          this.inputField.setSelectionRange( aSelectionStart, aSelectionEnd );
        </body>
      </method>

      <method name="_setNewlineHandling">
        <body><![CDATA[
          var str = this.getAttribute("newlines");
          if (str && this.editor) {
            const nsIPlaintextEditor = Components.interfaces.nsIPlaintextEditor;
            for (var x in nsIPlaintextEditor) {
              if (/^eNewlines/.test(x)) {
                if (str == RegExp.rightContext.toLowerCase()) {
                  this.editor.QueryInterface(nsIPlaintextEditor)
                      .newlineHandling = nsIPlaintextEditor[x];
                  break;
                }
              }
            }
          }
        ]]></body>
      </method>

      <method name="_maybeSelectAll">
        <body><![CDATA[
          if (!this.mIgnoreClick && this.clickSelectsAll &&
              document.activeElement == this.inputField &&
              this.inputField.selectionStart == this.inputField.selectionEnd)
            this.editor.selectAll();
        ]]></body>
      </method>

      <constructor><![CDATA[
        var str = this.boxObject.getProperty("value");
        if (str) {
          this.inputField.value = str;
          this.boxObject.removeProperty("value");
        }

        this._setNewlineHandling();

        if (this.hasAttribute("emptytext"))
          this.placeholder = this.getAttribute("emptytext");
      ]]></constructor>

      <destructor>
        <![CDATA[
          if (this.inputField.value)
            this.boxObject.setProperty('value', this.inputField.value);
          this.mInputField = null;
        ]]>
      </destructor>

    </implementation>

    <handlers>
      <handler event="focus" phase="capturing">
        <![CDATA[
          if (this.hasAttribute("focused"))
            return;

          switch (event.originalTarget) {
            case this:
              // Forward focus to actual HTML input
              this.inputField.focus();
              break;
            case this.inputField:
              if (this.mIgnoreFocus) {
                this.mIgnoreFocus = false;
              } else if (this.clickSelectsAll) {
                try {
                  const nsIEditorIMESupport =
                          Components.interfaces.nsIEditorIMESupport;
                  let imeEditor = this.editor.QueryInterface(nsIEditorIMESupport);
                  if (!imeEditor || !imeEditor.composing)
                    this.editor.selectAll();
                } catch (e) {}
              }
              break;
            default:
              // Allow other children (e.g. URL bar buttons) to get focus
              return;
          }
          this.setAttribute("focused", "true");
        ]]>
      </handler>

      <handler event="blur" phase="capturing">
        <![CDATA[
          this.removeAttribute("focused");

          // don't trigger clickSelectsAll when switching application windows
          if (window == window.top &&
              window.constructor == ChromeWindow &&
              document.activeElement == this.inputField)
            this.mIgnoreFocus = true;
        ]]>
      </handler>

      <handler event="mousedown">
        <![CDATA[
          this.mIgnoreClick = this.hasAttribute("focused");

          if (!this.mIgnoreClick) {
            this.mIgnoreFocus = true;
            this.inputField.setSelectionRange(0, 0);
            if (event.originalTarget == this ||
                event.originalTarget == this.inputField.parentNode)
              this.inputField.focus();
          }
        ]]>
      </handler>

      <handler event="click" action="this._maybeSelectAll();"/>

#ifndef XP_WIN
      <handler event="contextmenu">
        // Only care about context clicks on the input field itself
        if (event.target != this.inputField)
          return;
        if (!event.button) // context menu opened via keyboard shortcut
          return;
        this._maybeSelectAll();
        // see bug 576135 comment 4
        let box = this.inputField.parentNode;
        let menu = document.getAnonymousElementByAttribute(box, "anonid", "input-box-contextmenu");
        box._doPopupItemEnabling(menu);
      </handler>
#endif
    </handlers>
  </binding>

  <binding id="timed-textbox" extends="chrome://global/content/bindings/textbox.xml#textbox">
    <implementation>
      <constructor><![CDATA[
        try {
          var consoleService = Components.classes["@mozilla.org/consoleservice;1"]
                                         .getService(Components.interfaces.nsIConsoleService);
          var scriptError = Components.classes["@mozilla.org/scripterror;1"]
                                      .createInstance(Components.interfaces.nsIScriptError);
          scriptError.init("Timed textboxes are deprecated. Consider using type=\"search\" instead.",
                           this.ownerDocument.location.href, null, null, 
                           null, scriptError.warningFlag, "XUL Widgets");
          consoleService.logMessage(scriptError);
        } catch (e) {}
      ]]></constructor>
      <field name="_timer">null</field>
      <property name="timeout"
                onset="this.setAttribute('timeout', val); return val;"
                onget="return parseInt(this.getAttribute('timeout')) || 0;"/>
      <property name="value"
                onget="return this.inputField.value;">
        <setter><![CDATA[
          this.inputField.value = val;
          if (this._timer)
            clearTimeout(this._timer);
          return val;
        ]]></setter>
      </property>
      <method name="_fireCommand">
        <parameter name="me"/>
        <body>
          <![CDATA[
            me._timer = null;
            me.doCommand();
          ]]>
        </body>
      </method>
    </implementation>
    <handlers>
      <handler event="input">
        <![CDATA[
          if (this._timer)
            clearTimeout(this._timer);
          this._timer = this.timeout && setTimeout(this._fireCommand, this.timeout, this);
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_RETURN">
        <![CDATA[
          if (this._timer)
            clearTimeout(this._timer);
          this._fireCommand(this);
          event.preventDefault();
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="search-textbox" extends="chrome://global/content/bindings/textbox.xml#textbox">
    <content>
      <children/>
      <xul:hbox class="textbox-input-box" flex="1" xbl:inherits="context,spellcheck" align="center">
        <html:input class="textbox-input" anonid="input" mozactionhint="search"
                    xbl:inherits="value,type,maxlength,disabled,size,readonly,placeholder,tabindex,accesskey,mozactionhint,spellcheck"/>
        <xul:deck class="textbox-search-icons" anonid="search-icons">
          <xul:image class="textbox-search-icon"
                     onclick="document.getBindingParent(this)._iconClick();"
                     xbl:inherits="src=image,searchbutton,disabled"/>
          <xul:image class="textbox-search-clear"
                     onclick="document.getBindingParent(this)._clearSearch();"
                     xbl:inherits="disabled"/>
        </xul:deck>
      </xul:hbox>
    </content>
    <implementation>
      <field name="_timer">null</field>
      <field name="_searchIcons">
        document.getAnonymousElementByAttribute(this, "anonid", "search-icons");
      </field>
      <property name="timeout"
                onset="this.setAttribute('timeout', val); return val;"
                onget="return parseInt(this.getAttribute('timeout')) || 500;"/>
      <property name="searchButton"
                onget="return this.getAttribute('searchbutton') == 'true';">
        <setter><![CDATA[
          if (val) {
            this.setAttribute("searchbutton", "true");
            this.removeAttribute("aria-autocomplete");
          } else {
            this.removeAttribute("searchbutton");
            this.setAttribute("aria-autocomplete", "list");
          }
          return val;
        ]]></setter>
      </property>
      <property name="value"
                onget="return this.inputField.value;">
        <setter><![CDATA[
          this.inputField.value = val;

          if (val)
            this._searchIcons.selectedIndex = this.searchButton ? 0 : 1;
          else
            this._searchIcons.selectedIndex = 0;

          if (this._timer)
            clearTimeout(this._timer);

          return val;
        ]]></setter>
      </property>
      <constructor><![CDATA[
        if (this.searchButton)
          this.removeAttribute("aria-autocomplete");
        else
          this.setAttribute("aria-autocomplete", "list");
      ]]></constructor>
      <method name="_fireCommand">
        <parameter name="me"/>
        <body><![CDATA[
          if (me._timer)
            clearTimeout(me._timer);
          me._timer = null;
          me.doCommand();
        ]]></body>
      </method>
      <method name="_iconClick">
        <body><![CDATA[
          if (this.searchButton)
            this._enterSearch();
          else
            this.focus();
        ]]></body>
      </method>
      <method name="_enterSearch">
        <body><![CDATA[
          if (this.disabled)
            return;
          if (this.searchButton && this.value && !this.readOnly)
            this._searchIcons.selectedIndex = 1;
          this._fireCommand(this);
        ]]></body>
      </method>
      <method name="_clearSearch">
        <body><![CDATA[
          if (!this.disabled && !this.readOnly && this.value) {
            this.value = "";
            this._fireCommand(this);
            this._searchIcons.selectedIndex = 0;
            return true;
          }
          return false;
        ]]></body>
      </method>
    </implementation>
    <handlers>
      <handler event="input">
        <![CDATA[
          if (this.searchButton) {
            this._searchIcons.selectedIndex = 0;
            return;
          }
          if (this._timer)
            clearTimeout(this._timer);
          this._timer = this.timeout && setTimeout(this._fireCommand, this.timeout, this);
          this._searchIcons.selectedIndex = this.value ? 1 : 0;
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_ESCAPE">
        <![CDATA[
          if (this._clearSearch()) {
            event.preventDefault();
            event.stopPropagation();
          }
        ]]>
      </handler>
      <handler event="keypress" keycode="VK_RETURN">
        <![CDATA[
          this._enterSearch();
          event.preventDefault();
          event.stopPropagation();
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="textarea" extends="chrome://global/content/bindings/textbox.xml#textbox">
    <content>
      <xul:hbox class="textbox-input-box" flex="1" xbl:inherits="context,spellcheck">
        <html:textarea class="textbox-textarea" anonid="input"
                       xbl:inherits="xbl:text=value,disabled,tabindex,rows,cols,readonly,wrap,placeholder,mozactionhint,spellcheck"><children/></html:textarea>
      </xul:hbox>
    </content>
  </binding>

  <binding id="input-box">
    <content context="_child">
      <children/>
      <xul:menupopup anonid="input-box-contextmenu"
                     class="textbox-contextmenu"
                     onpopupshowing="var input =
                                       this.parentNode.getElementsByAttribute('anonid', 'input')[0];
                                     if (document.commandDispatcher.focusedElement != input)
                                       input.focus();
                                     this.parentNode._doPopupItemEnabling(this);"
                     oncommand="var cmd = event.originalTarget.getAttribute('cmd'); if(cmd) { this.parentNode.doCommand(cmd); event.stopPropagation(); }">
        <xul:menuitem label="&undoCmd.label;" accesskey="&undoCmd.accesskey;" cmd="cmd_undo"/>
        <xul:menuseparator/>
        <xul:menuitem label="&cutCmd.label;" accesskey="&cutCmd.accesskey;" cmd="cmd_cut"/>
        <xul:menuitem label="&copyCmd.label;" accesskey="&copyCmd.accesskey;" cmd="cmd_copy"/>
        <xul:menuitem label="&pasteCmd.label;" accesskey="&pasteCmd.accesskey;" cmd="cmd_paste"/>
        <xul:menuitem label="&deleteCmd.label;" accesskey="&deleteCmd.accesskey;" cmd="cmd_delete"/>
        <xul:menuseparator/>
        <xul:menuitem label="&selectAllCmd.label;" accesskey="&selectAllCmd.accesskey;" cmd="cmd_selectAll"/>
      </xul:menupopup>
    </content>

    <implementation>
      <method name="_doPopupItemEnabling">
        <parameter name="popupNode"/>
        <body>
          <![CDATA[
            var children = popupNode.childNodes;
            for (var i = 0; i < children.length; i++) {
              var command = children[i].getAttribute("cmd");
              if (command) {
                var controller = document.commandDispatcher.getControllerForCommand(command);
                var enabled = controller.isCommandEnabled(command);
                if (enabled)
                  children[i].removeAttribute("disabled");
                else
                  children[i].setAttribute("disabled", "true");
              }
            }
          ]]>
        </body>
      </method>

      <method name="_setMenuItemVisibility">
        <parameter name="anonid"/>
        <parameter name="visible"/>
        <body><![CDATA[
          document.getAnonymousElementByAttribute(this, "anonid", anonid).
            hidden = ! visible;
        ]]></body>
      </method>

      <method name="doCommand">
        <parameter name="command"/>
        <body>
          <![CDATA[
            var controller = document.commandDispatcher.getControllerForCommand(command);
            controller.doCommand(command);
          ]]>
        </body>
      </method>
    </implementation>
  </binding>

  <binding id="input-box-spell" extends="chrome://global/content/bindings/textbox.xml#input-box">
    <content context="_child">
      <children/>
      <xul:menupopup anonid="input-box-contextmenu"
                     class="textbox-contextmenu"
                     onpopupshowing="var input =
                                       this.parentNode.getElementsByAttribute('anonid', 'input')[0];
                                     if (document.commandDispatcher.focusedElement != input)
                                       input.focus();
                                     this.parentNode._doPopupItemEnablingSpell(this);"
                     onpopuphiding="this.parentNode._doPopupItemDisabling(this);"
                     oncommand="var cmd = event.originalTarget.getAttribute('cmd'); if(cmd) { this.parentNode.doCommand(cmd); event.stopPropagation(); }">
        <xul:menuitem label="&spellNoSuggestions.label;" anonid="spell-no-suggestions" disabled="true"/>
        <xul:menuitem label="&spellAddToDictionary.label;" accesskey="&spellAddToDictionary.accesskey;" anonid="spell-add-to-dictionary"
                      oncommand="this.parentNode.parentNode.spellCheckerUI.addToDictionary();"/>
        <xul:menuitem label="&spellUndoAddToDictionary.label;" accesskey="&spellUndoAddToDictionary.accesskey;" anonid="spell-undo-add-to-dictionary"
                      oncommand="this.parentNode.parentNode.spellCheckerUI.undoAddToDictionary();"/>
        <xul:menuseparator anonid="spell-suggestions-separator"/>
        <xul:menuitem label="&undoCmd.label;" accesskey="&undoCmd.accesskey;" cmd="cmd_undo"/>
        <xul:menuseparator/>
        <xul:menuitem label="&cutCmd.label;" accesskey="&cutCmd.accesskey;" cmd="cmd_cut"/>
        <xul:menuitem label="&copyCmd.label;" accesskey="&copyCmd.accesskey;" cmd="cmd_copy"/>
        <xul:menuitem label="&pasteCmd.label;" accesskey="&pasteCmd.accesskey;" cmd="cmd_paste"/>
        <xul:menuitem label="&deleteCmd.label;" accesskey="&deleteCmd.accesskey;" cmd="cmd_delete"/>
        <xul:menuseparator/>
        <xul:menuitem label="&selectAllCmd.label;" accesskey="&selectAllCmd.accesskey;" cmd="cmd_selectAll"/>
        <xul:menuseparator anonid="spell-check-separator"/>
        <xul:menuitem label="&spellCheckToggle.label;" type="checkbox" accesskey="&spellCheckToggle.accesskey;" anonid="spell-check-enabled"
                      oncommand="this.parentNode.parentNode.spellCheckerUI.toggleEnabled();"/>
        <xul:menu label="&spellDictionaries.label;" accesskey="&spellDictionaries.accesskey;" anonid="spell-dictionaries">
          <xul:menupopup anonid="spell-dictionaries-menu"
                         onpopupshowing="event.stopPropagation();"
                         onpopuphiding="event.stopPropagation();"/>
        </xul:menu>
      </xul:menupopup>
    </content>

    <implementation>
      <field name="_spellCheckInitialized">false</field>
      <field name="_enabledCheckbox">
        document.getAnonymousElementByAttribute(this, "anonid", "spell-check-enabled");
      </field>
      <field name="_suggestionsSeparator">
        document.getAnonymousElementByAttribute(this, "anonid", "spell-no-suggestions");
      </field>
      <field name="_dictionariesMenu">
        document.getAnonymousElementByAttribute(this, "anonid", "spell-dictionaries-menu");
      </field>

      <property name="spellCheckerUI" readonly="true">
        <getter><![CDATA[
          if (!this._spellCheckInitialized) {
            this._spellCheckInitialized = true;

            const CI = Components.interfaces;
            if (!(document instanceof CI.nsIDOMXULDocument))
              return null;

            var textbox = document.getBindingParent(this);
            if (!textbox || !(textbox instanceof CI.nsIDOMXULTextBoxElement))
              return null;

            try {
              Components.utils.import("resource://gre/modules/InlineSpellChecker.jsm", this);
              this.InlineSpellCheckerUI = new this.InlineSpellChecker(textbox.editor);
            } catch(ex) { }
          }

          return this.InlineSpellCheckerUI;
        ]]></getter>
      </property>

      <method name="_doPopupItemEnablingSpell">
        <parameter name="popupNode"/>
        <body>
          <![CDATA[
            var spellui = this.spellCheckerUI;
            if (!spellui || !spellui.canSpellCheck) {
              this._setMenuItemVisibility("spell-no-suggestions", false);
              this._setMenuItemVisibility("spell-check-enabled", false);
              this._setMenuItemVisibility("spell-check-separator", false);
              this._setMenuItemVisibility("spell-add-to-dictionary", false);
              this._setMenuItemVisibility("spell-undo-add-to-dictionary", false);
              this._setMenuItemVisibility("spell-suggestions-separator", false);
              this._setMenuItemVisibility("spell-dictionaries", false);
              return;
            }

            spellui.initFromEvent(document.popupRangeParent,
                                  document.popupRangeOffset);

            var enabled = spellui.enabled;
            var showUndo = spellui.canSpellCheck && spellui.canUndo();
            this._enabledCheckbox.setAttribute("checked", enabled);

            var overMisspelling = spellui.overMisspelling;
            this._setMenuItemVisibility("spell-add-to-dictionary", overMisspelling);
            this._setMenuItemVisibility("spell-undo-add-to-dictionary", showUndo);
            this._setMenuItemVisibility("spell-suggestions-separator", overMisspelling || showUndo);

            // suggestion list
            var numsug = spellui.addSuggestionsToMenu(popupNode, this._suggestionsSeparator, 5);
            this._setMenuItemVisibility("spell-no-suggestions", overMisspelling && numsug == 0);

            // dictionary list
            var numdicts = spellui.addDictionaryListToMenu(this._dictionariesMenu, null);
            this._setMenuItemVisibility("spell-dictionaries", enabled && numdicts > 1);

            this._doPopupItemEnabling(popupNode);
          ]]>
        </body>
      </method>
      <method name="_doPopupItemDisabling">
        <body><![CDATA[
          if (this.spellCheckerUI) {
            this.spellCheckerUI.clearSuggestionsFromMenu();
            this.spellCheckerUI.clearDictionaryListFromMenu();
          }
        ]]></body>
      </method>
    </implementation>
  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

   <org.mozilla.gecko.TextSelectionHandle android:id="@+id/anchor_handle"
                                          android:layout_width="@dimen/text_selection_handle_width"
                                          android:layout_height="@dimen/text_selection_handle_height"
                                          android:src="@drawable/handle_anchor_level"
                                          android:visibility="gone"
                                          gecko:handleType="start"/>

   <org.mozilla.gecko.TextSelectionHandle android:id="@+id/caret_handle"
                                          android:layout_width="@dimen/text_selection_handle_width"
                                          android:layout_height="@dimen/text_selection_handle_height"
                                          android:src="@drawable/handle_middle"
                                          android:visibility="gone"
                                          gecko:handleType="middle"/>

   <org.mozilla.gecko.TextSelectionHandle android:id="@+id/focus_handle"
                                          android:layout_width="@dimen/text_selection_handle_width"
                                          android:layout_height="@dimen/text_selection_handle_height"
                                          android:src="@drawable/handle_focus_level"
                                          android:visibility="gone"
                                          gecko:handleType="end"/>
</merge>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="textBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:html="http://www.w3.org/1999/xhtml">

  <!-- bound to <description>s -->
  <binding id="text-base" role="xul:text">
    <implementation implements="nsIDOMXULDescriptionElement">
      <property name="disabled" onset="if (val) this.setAttribute('disabled', 'true');
                                       else this.removeAttribute('disabled');
                                       return val;"
                                onget="return this.getAttribute('disabled') == 'true';"/>
      <property name="value" onget="return this.getAttribute('value');"
                             onset="this.setAttribute('value', val); return val;"/>
      <property name="crop" onget="return this.getAttribute('crop');"
                            onset="this.setAttribute('crop', val); return val;"/>
    </implementation>
  </binding>

  <binding id="text-label" extends="chrome://global/content/bindings/text.xml#text-base">
    <implementation implements="nsIDOMXULLabelElement">
      <property name="accessKey">
        <getter>
          <![CDATA[
            var accessKey = this.getAttribute('accesskey');
            return accessKey ? accessKey[0] : null;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            this.setAttribute('accesskey', val);
            return val;
          ]]>
        </setter>
      </property>

      <property name="control" onget="return getAttribute('control');">
        <setter>
          <![CDATA[
            // After this gets set, the label will use the binding #label-control
            this.setAttribute('control', val);
            return val;
          ]]>
        </setter>
      </property>
    </implementation>
  </binding>

  <binding id="label-control" extends="chrome://global/content/bindings/text.xml#text-label">
    <content>
      <children/><html:span anonid="accessKeyParens"></html:span>
    </content>
    <implementation implements="nsIDOMXULLabelElement">
      <constructor>
        <![CDATA[
          this.formatAccessKey(true);
        ]]>
      </constructor>

      <method name="formatAccessKey">
        <parameter name="firstTime"/>
        <body>
          <![CDATA[
            var control = this.labeledControlElement;
            if (!control) {
              var bindingParent = document.getBindingParent(this);
              if (bindingParent instanceof Components.interfaces.nsIDOMXULLabeledControlElement) {
                control = bindingParent; // For controls that make the <label> an anon child
              }
            }
            if (control) {
              control.labelElement = this;
            }

            var accessKey = this.accessKey;
            // No need to remove existing formatting the first time.
            if (firstTime && !accessKey)
              return;

            if (this.mInsertSeparator === undefined) {
              try {
                var prefs = Components.classes["@mozilla.org/preferences-service;1"].
                                       getService(Components.interfaces.nsIPrefBranch);
                this.mUnderlineAccesskey = (prefs.getIntPref("ui.key.menuAccessKey") != 0);

                const nsIPrefLocalizedString =
                  Components.interfaces.nsIPrefLocalizedString;

                const prefNameInsertSeparator =
                  "intl.menuitems.insertseparatorbeforeaccesskeys";
                const prefNameAlwaysAppendAccessKey =
                  "intl.menuitems.alwaysappendaccesskeys";

                var val = prefs.getComplexValue(prefNameInsertSeparator,
                                                nsIPrefLocalizedString).data;
                this.mInsertSeparator = (val == "true");

                val = prefs.getComplexValue(prefNameAlwaysAppendAccessKey,
                                            nsIPrefLocalizedString).data;
                this.mAlwaysAppendAccessKey = (val == "true");
              }
              catch (e) {
                this.mInsertSeparator = true;
              }
            }

            if (!this.mUnderlineAccesskey)
              return;

            var afterLabel = document.getAnonymousElementByAttribute(this, "anonid", "accessKeyParens");
            afterLabel.textContent = "";

            var oldAccessKey = this.getElementsByAttribute('class', 'accesskey').item(0);
            if (oldAccessKey) { // Clear old accesskey
              this.mergeElement(oldAccessKey);
            }

            var oldHiddenSpan =
              this.getElementsByAttribute('class', 'hiddenColon').item(0);
            if (oldHiddenSpan) {
              this.mergeElement(oldHiddenSpan);
            }

            var labelText = this.textContent;
            if (!accessKey || !labelText || !control) {
              return;
            }
            var accessKeyIndex = -1;
            if (!this.mAlwaysAppendAccessKey) {
              accessKeyIndex = labelText.indexOf(accessKey);
              if (accessKeyIndex < 0) { // Try again in upper case
                accessKeyIndex =
                  labelText.toUpperCase().indexOf(accessKey.toUpperCase());
              }
            }

            const HTML_NS = "http://www.w3.org/1999/xhtml";
            var span = document.createElementNS(HTML_NS, "span");
            span.className = "accesskey";

            // Note that if you change the following code, see the comment of
            // nsTextBoxFrame::UpdateAccessTitle.

            // If accesskey is not in string, append in parentheses
            if (accessKeyIndex < 0) {
              // If end is colon, we should insert before colon.
              // i.e., "label:" -> "label(X):"
              var colonHidden = false;
              if (/:$/.test(labelText)) {
                labelText = labelText.slice(0, -1);
                var hiddenSpan = document.createElementNS(HTML_NS, "span");
                hiddenSpan.className = "hiddenColon";
                hiddenSpan.style.display = "none";
                // Hide the last colon by using span element.
                // I.e., label<span style="display:none;">:</span>
                this.wrapChar(hiddenSpan, labelText.length);
                colonHidden = true;
              }
              // If end is space(U+20),
              // we should not add space before parentheses.
              var endIsSpace = false;
              if (/ $/.test(labelText)) {
                endIsSpace = true;
              }
              if (this.mInsertSeparator && !endIsSpace)
                afterLabel.textContent = " (";
              else
                afterLabel.textContent = "(";
              span.textContent = accessKey.toUpperCase();
              afterLabel.appendChild(span);
              if (!colonHidden)
                afterLabel.appendChild(document.createTextNode(")"));
              else
                afterLabel.appendChild(document.createTextNode("):"));
              return;
            }
            this.wrapChar(span, accessKeyIndex);
          ]]>
        </body>
      </method>

      <method name="wrapChar">
        <parameter name="element"/>
        <parameter name="index"/>
        <body>
          <![CDATA[
             var treeWalker = document.createTreeWalker(this,
                                                        NodeFilter.SHOW_TEXT,
                                                        null);
             var node = treeWalker.nextNode();
             while (index >= node.length) {
               index -= node.length;
               node = treeWalker.nextNode();
             }
             if (index) {
               node = node.splitText(index);
             }
             node.parentNode.insertBefore(element, node);
             if (node.length > 1) {
               node.splitText(1);
             }
             element.appendChild(node);
          ]]>
        </body>
      </method>

      <method name="mergeElement">
        <parameter name="element"/>
        <body>
          <![CDATA[
            if (element.previousSibling instanceof Text) {
              element.previousSibling.appendData(element.textContent)
            }
            else {
              element.parentNode.insertBefore(element.firstChild, element);
            }
            element.parentNode.removeChild(element);
          ]]>
        </body>
      </method>

      <field name="mUnderlineAccesskey">
        !/Mac/.test(navigator.platform)
      </field>
      <field name="mInsertSeparator"/>
      <field name="mAlwaysAppendAccessKey">false</field>

      <property name="accessKey">
        <getter>
          <![CDATA[
            var accessKey = null;
            var labeledEl = this.labeledControlElement;
            if (labeledEl) {
              accessKey = labeledEl.getAttribute('accesskey');
            }
            if (!accessKey) {
              accessKey = this.getAttribute('accesskey');
            }
            return accessKey ? accessKey[0] : null;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            // If this label already has an accesskey attribute store it here as well
            if (this.hasAttribute('accesskey')) {
              this.setAttribute('accesskey', val);
            }
            var control = this.labeledControlElement;
            if (control) {
              control.setAttribute('accesskey', val);
            }
            this.formatAccessKey(false);
            return val;
          ]]>
        </setter>
      </property>

      <property name="labeledControlElement" readonly="true"
                onget="var control = this.control; return control ? document.getElementById(control) : null;" />

      <property name="control" onget="return this.getAttribute('control');">
        <setter>
          <![CDATA[
            var control = this.labeledControlElement;
            if (control) {
              control.labelElement = null; // No longer pointed to be this label
            }
            this.setAttribute('control', val);
            this.formatAccessKey(false);
            return val;
          ]]>
        </setter>
      </property>

    </implementation>

    <handlers>
      <handler event="click" action="if (this.disabled) return;
                                     var controlElement = this.labeledControlElement;
                                     if(controlElement)
                                       controlElement.focus();
                                    "/>
    </handlers>
  </binding>

  <binding id="text-link" extends="chrome://global/content/bindings/text.xml#text-label" role="xul:link">
    <implementation>
      <property name="href" onget="return this.getAttribute('href');"
                            onset="this.setAttribute('href', val); return val;" />
      <method name="open">
        <parameter name="aEvent"/>
        <body>
        <![CDATA[
          var href = this.href;
          if (!href || this.disabled || aEvent.defaultPrevented)
            return;

          var uri = null;
          try {
            const nsISSM = Components.interfaces.nsIScriptSecurityManager;
            const secMan =
                     Components.classes["@mozilla.org/scriptsecuritymanager;1"]
                               .getService(nsISSM);

            const ioService =
                     Components.classes["@mozilla.org/network/io-service;1"]
                               .getService(Components.interfaces.nsIIOService);

            uri = ioService.newURI(href, null, null);

            var nullPrincipal =
              Components.classes["@mozilla.org/nullprincipal;1"]
                        .createInstance(Components.interfaces.nsIPrincipal);
            try {
              secMan.checkLoadURIWithPrincipal(nullPrincipal, uri,
                                               nsISSM.DISALLOW_INHERIT_PRINCIPAL)
            }
            catch (ex) {
              var msg = "Error: Cannot open a " + uri.scheme + ": link using \
                         the text-link binding.";
              Components.utils.reportError(msg);
              return;
            }

            const cID = "@mozilla.org/uriloader/external-protocol-service;1";
            const nsIEPS = Components.interfaces.nsIExternalProtocolService;
            var protocolSvc = Components.classes[cID].getService(nsIEPS);

            // if the scheme is not an exposed protocol, then opening this link
            // should be deferred to the system's external protocol handler
            if (!protocolSvc.isExposedProtocol(uri.scheme)) {
              protocolSvc.loadUrl(uri);
              aEvent.preventDefault()
              return;
            }

          }
          catch (ex) {
            Components.utils.reportError(ex);
          }

          aEvent.preventDefault();
          href = uri ? uri.spec : href;

          // Try handing off the link to the host application, e.g. for
          // opening it in a tabbed browser.
          var linkHandled = Components.classes["@mozilla.org/supports-PRBool;1"]
                                      .createInstance(Components.interfaces.nsISupportsPRBool);
          linkHandled.data = false;
          Components.classes["@mozilla.org/observer-service;1"]
                    .getService(Components.interfaces.nsIObserverService)
                    .notifyObservers(linkHandled, "handle-xul-text-link", href);
          if (linkHandled.data)
            return;

          // otherwise, fall back to opening the anchor directly
          var win = window;
          if (window instanceof Components.interfaces.nsIDOMChromeWindow) {
            while (win.opener && !win.opener.closed)
              win = win.opener;
          }
          win.open(href);
        ]]>
        </body>
      </method>
    </implementation>

    <handlers>
      <handler event="click" phase="capturing" button="0" action="this.open(event)"/>
      <handler event="keypress" preventdefault="true" keycode="VK_RETURN" action="this.click()" />
    </handlers>
  </binding>

</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <!--
        Activity based themes for API 14+. This theme completely replaces
        GeckoAppBase from res/values/themes.xml on API 14+ devices.
    -->
    <style name="GeckoAppBase" parent="Gecko">
        <item name="android:actionButtonStyle">@style/GeckoActionBar.Button</item>
        <item name="android:actionModeCopyDrawable">@drawable/ab_copy</item>
        <item name="android:actionModeCutDrawable">@drawable/ab_cut</item>
        <item name="android:actionModePasteDrawable">@drawable/ab_paste</item>
        <item name="android:actionModeSelectAllDrawable">@drawable/ab_select_all</item>
        <item name="android:actionModeStyle">@style/GeckoActionBar</item>
        <item name="android:listViewStyle">@style/Widget.ListView</item>
        <item name="android:panelBackground">@drawable/menu_panel_bg</item>
        <item name="android:spinnerDropDownItemStyle">@style/Widget.DropDownItem.Spinner</item>
        <item name="android:spinnerItemStyle">@style/Widget.TextView.SpinnerItem</item>
        <item name="menuItemActionViewStyle">@style/Widget.MenuItemActionView</item>
        <item name="menuItemDefaultStyle">@style/Widget.MenuItemDefault</item>
        <item name="menuItemSecondaryActionBarStyle">@style/Widget.MenuItemSecondaryActionBar</item>
    </style>

</resources>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:37 $"/>
        <language type="th"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/pasteandgo"
          android:title="@string/contextmenu_pasteandgo"/>

    <item android:id="@+id/paste"
          android:title="@string/contextmenu_paste"/>

    <item android:id="@+id/copyurl"
          android:title="@string/contextmenu_copyurl"/>

    <item android:id="@+id/add_to_launcher"
          android:title="@string/contextmenu_add_to_launcher"/>

</menu>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "xhtml1-strict.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - TITLE</title>
</head>
<body onload="parent.loadComplete()">
<p>
<br/>
</p>
</body>
</html>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:57 $"/>
		<language type="ti"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Ethi</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.15 $"/>
		<generation date="$Date: 2008/05/25 01:05:49 $"/>
		<language type="tl"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
    <solid android:color="@color/toast_background" />
    <corners android:radius="@dimen/toast_button_corner_radius" />
</shape>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
      <shape android:shape="rectangle">
        <solid android:color="@color/toast_button_pressed" />
        <corners
            android:topRightRadius="@dimen/toast_button_corner_radius"
            android:bottomRightRadius="@dimen/toast_button_corner_radius"
            android:topLeftRadius="0dp"
            android:bottomLeftRadius="0dp" />
    </shape>
    </item>
    <item>
      <shape android:shape="rectangle">
        <solid android:color="@color/toast_button_background" />
        <corners
            android:topRightRadius="@dimen/toast_button_corner_radius"
            android:bottomRightRadius="@dimen/toast_button_corner_radius"
            android:topLeftRadius="0dp"
            android:bottomLeftRadius="0dp" />
    </shape>
    </item>
</selector>
<?xml version="1.0"?>

<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
  <!ENTITY % checkboxDTD SYSTEM "chrome://browser/locale/checkbox.dtd">
  %checkboxDTD;
]>

<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="checkbox-toggleswitch" display="xul:box" extends="chrome://global/content/bindings/checkbox.xml#checkbox-baseline">
    <content>
      <xul:hbox>
        <xul:description anonid="offlabel" class="offlabel" value="&checkbox.off.label;" xbl:inherits="value=offlabel"/>
        <xul:description anonid="onlabel" class="onlabel" value="&checkbox.on.label;" xbl:inherits="value=onlabel"/>
        <xul:radiogroup anonid="group" xbl:inherits="disabled">
          <xul:radio type="toggle" anonid="off" class="checkbox-radio-off"/>
          <xul:radio type="toggle" anonid="on" class="checkbox-radio-on"/>
        </xul:radiogroup>
      </xul:hbox>
    </content>
    <implementation>
      <constructor><![CDATA[
        this.setChecked(this.checked);
      ]]></constructor>

      <field name="_group">
        document.getAnonymousElementByAttribute(this, "anonid", "group");
      </field>

      <field name="_on">
        document.getAnonymousElementByAttribute(this, "anonid", "on");
      </field>

      <field name="_onlabel">
        document.getAnonymousElementByAttribute(this, "anonid", "onlabel");
      </field>

      <field name="_off">
        document.getAnonymousElementByAttribute(this, "anonid", "off");
      </field>

      <field name="_offlabel">
        document.getAnonymousElementByAttribute(this, "anonid", "offlabel");
      </field>

      <property name="onlabel"
        onget="return this._onlabel.value"
        onset="this._offlabel.value=val"/>

      <property name="offlabel"
        onget="return this._offlabel.value"
        onset="this._offlabel.value=val"/>

      <method name="setChecked">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          let change = (aValue != this.checked);

          if (aValue) {
            this.setAttribute("checked", "true");
            this._group.selectedItem = this._on;
          } else {
            this.removeAttribute("checked");
            this._group.selectedItem = this._off;
          }

          if (change) {
            this.fireEvent("CheckboxStateChange");
            this.fireEvent("command");
          }

          return aValue;
        ]]>
        </body>
      </method>

      <method name="fireEvent">
        <parameter name="aName"/>
        <body>
          <![CDATA[
            var event = document.createEvent("Events");
            event.initEvent(aName, true, true);
            this.dispatchEvent(event);
          ]]>
        </body>
      </method>

      <method name="_onClickOrTap">
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            aEvent.stopPropagation();
            this.setChecked(!this.checked);
          ]]>
        </body>
      </method>
    </implementation>
    <handlers>
      <handler event="click" button="0" phase="capturing">
        <![CDATA[
          this._onClickOrTap(event);
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="setting-fulltoggle-bool" extends="chrome://mozapps/content/extensions/setting.xml#setting-bool">
    <implementation>
      <constructor>
        <![CDATA[
          this.input.classList.add("toggleswitch");
        ]]>
      </constructor>
    </implementation>
  </binding>

  <binding id="setting-fulltoggle-boolint" extends="chrome://mozapps/content/extensions/setting.xml#setting-boolint">
    <implementation>
      <constructor>
        <![CDATA[
          this.input.classList.add("toggleswitch");
        ]]>
      </constructor>
    </implementation>
  </binding>

  <binding id="setting-fulltoggle-localized-bool" extends="chrome://mozapps/content/extensions/setting.xml#setting-localized-bool">
    <implementation>
      <constructor>
        <![CDATA[
          this.input.classList.add("toggleswitch");
        ]]>
      </constructor>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="toolbarbuttonBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="toolbarbutton" display="xul:button" role="xul:toolbarbutton"
           extends="chrome://global/content/bindings/button.xml#button-base">
    <resources>
      <stylesheet src="chrome://global/skin/toolbarbutton.css"/>
    </resources>

    <content>
      <children includes="observes|template|menupopup|panel|tooltip"/>
      <xul:image class="toolbarbutton-icon" xbl:inherits="validate,src=image,label,consumeanchor"/>
      <xul:label class="toolbarbutton-text" crop="right" flex="1"
                 xbl:inherits="value=label,accesskey,crop,wrap"/>
      <xul:label class="toolbarbutton-multiline-text" flex="1"
                 xbl:inherits="xbl:text=label,accesskey,wrap"/>
    </content>
  </binding>

  <binding id="menu" display="xul:menu"
           extends="chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton">
    <content>
      <children includes="observes|template|menupopup|panel|tooltip"/>
      <xul:image class="toolbarbutton-icon" xbl:inherits="validate,src=image,label,type,consumeanchor"/>
      <xul:label class="toolbarbutton-text" crop="right" flex="1"
                 xbl:inherits="value=label,accesskey,crop,dragover-top,wrap"/>
      <xul:label class="toolbarbutton-multiline-text" flex="1"
                 xbl:inherits="xbl:text=label,accesskey,wrap"/>
      <xul:dropmarker anonid="dropmarker" type="menu"
                      class="toolbarbutton-menu-dropmarker" xbl:inherits="disabled,label"/>
    </content>
  </binding>

  <binding id="menu-vertical" display="xul:menu"
           extends="chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton">
    <content>
      <children includes="observes|template|menupopup|panel|tooltip"/>
      <xul:hbox flex="1" align="center">
        <xul:vbox flex="1" align="center">
          <xul:image class="toolbarbutton-icon" xbl:inherits="validate,src=image,label,consumeanchor"/>
          <xul:label class="toolbarbutton-text" crop="right" flex="1"
                     xbl:inherits="value=label,accesskey,crop,dragover-top,wrap"/>
          <xul:label class="toolbarbutton-multiline-text" flex="1"
                     xbl:inherits="xbl:text=label,accesskey,wrap"/>
        </xul:vbox>
        <xul:dropmarker anonid="dropmarker" type="menu"
                        class="toolbarbutton-menu-dropmarker" xbl:inherits="disabled,label"/>
      </xul:hbox>
    </content>
  </binding>

  <binding id="menu-button" display="xul:menu"
           extends="chrome://global/content/bindings/button.xml#menu-button-base">
    <resources>
      <stylesheet src="chrome://global/skin/toolbarbutton.css"/>
    </resources>

    <content>
      <children includes="observes|template|menupopup|panel|tooltip"/>
      <xul:toolbarbutton class="box-inherit toolbarbutton-menubutton-button"
                         anonid="button" flex="1" allowevents="true"
                         xbl:inherits="disabled,crop,image,label,accesskey,command,wrap,
                                       align,dir,pack,orient,tooltiptext=buttontooltiptext"/>
      <xul:dropmarker type="menu-button" class="toolbarbutton-menubutton-dropmarker"
                      anonid="dropmarker" xbl:inherits="align,dir,pack,orient,disabled,label,open"/>
    </content>
  </binding>

  <binding id="toolbarbutton-image"
           extends="chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton">
    <content>
      <xul:image class="toolbarbutton-icon" xbl:inherits="src=image"/>
    </content>
  </binding>

  <binding id="toolbarbutton-badged"
           extends="chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton">
    <content>
      <children includes="observes|template|menupopup|panel|tooltip"/>
      <xul:hbox class="toolbarbutton-badge-container" align="start" pack="end">
        <xul:hbox class="toolbarbutton-badge" xbl:inherits="badge"/>
        <xul:image class="toolbarbutton-icon" xbl:inherits="validate,src=image,label"/>
      </xul:hbox>
      <xul:label class="toolbarbutton-text" crop="right" flex="1"
                 xbl:inherits="value=label,accesskey,crop,wrap"/>
      <xul:label class="toolbarbutton-multiline-text" flex="1"
                 xbl:inherits="xbl:text=label,accesskey,wrap"/>
    </content>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>

<!-- These colors are defined from the drawables url_bar_entry_default_* -->
<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <item gecko:state_private="true" android:color="#080A0B"/>

    <item android:color="#FFFFFF"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <ImageButton android:id="@+id/favicon"
                 style="@style/UrlBar.ImageButton"
                 android:layout_width="@dimen/browser_toolbar_favicon_size"
                 android:scaleType="fitCenter"
                 android:paddingRight="4dip"
                 android:layout_gravity="center_vertical"/>

    <!-- The site security icon is misaligned with the page title so
         we add a bottom margin to align their bottoms. -->
    <ImageButton android:id="@+id/site_security"
                 style="@style/UrlBar.ImageButton"
                 android:layout_width="@dimen/browser_toolbar_site_security_width"
                 android:scaleType="fitCenter"
                 android:layout_marginRight="4dip"
                 android:layout_marginBottom="@dimen/site_security_bottom_margin"
                 android:src="@drawable/site_security_level"
                 android:contentDescription="@string/site_security"
                 android:visibility="gone"/>

    <org.mozilla.gecko.widget.FadedMultiColorTextView
            android:id="@+id/url_bar_title"
            style="@style/UrlBar.Title"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1.0"
            gecko:fadeWidth="40dip"
            gecko:fadeBackgroundColor="@color/toolbar_display_layout_bg"
            gecko:autoUpdateTheme="false"/>

    <org.mozilla.gecko.toolbar.PageActionLayout android:id="@+id/page_action_layout"
                                                android:layout_width="wrap_content"
                                                android:layout_height="match_parent"
                                                android:visibility="gone"
                                                android:orientation="horizontal"/>

    <ImageButton android:id="@+id/stop"
                 android:layout_width="@dimen/page_action_button_width"
                 android:layout_height="match_parent"
                 android:src="@drawable/urlbar_stop"
                 android:contentDescription="@string/stop"
                 android:background="#00ffffff"
                 android:visibility="gone"/>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <org.mozilla.gecko.toolbar.ToolbarEditText
          android:id="@+id/url_edit_text"
          style="@style/UrlBar.Title"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:layout_weight="1.0"
          android:inputType="textUri|textNoSuggestions"
          android:imeOptions="actionGo|flagNoExtractUi|flagNoFullscreen"
          android:selectAllOnFocus="true"
          gecko:autoUpdateTheme="false"/>

</merge>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<bindings id="toolbarBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="toolbar-base">
    <resources>
      <stylesheet src="chrome://global/skin/toolbar.css"/>
    </resources>
  </binding>
  
  <binding id="toolbox" extends="chrome://global/content/bindings/toolbar.xml#toolbar-base">
    <implementation>
      <field name="palette">
        null
      </field>

      <field name="toolbarset">
        null
      </field>
      
      <field name="customToolbarCount">
        0
      </field>

      <field name="externalToolbars">
       []
      </field>

      <!-- Set by customizeToolbar.js -->
      <property name="customizing">
        <getter><![CDATA[
          return this.getAttribute("customizing") == "true";
        ]]></getter>
        <setter><![CDATA[
          if (val)
            this.setAttribute("customizing", "true");
          else
            this.removeAttribute("customizing");
          return val;
        ]]></setter>
      </property>

      <constructor>
        <![CDATA[
          // Look to see if there is a toolbarset.
          this.toolbarset = this.firstChild;
          while (this.toolbarset && this.toolbarset.localName != "toolbarset")
            this.toolbarset = toolbarset.nextSibling;
          
          if (this.toolbarset) {
            // Create each toolbar described by the toolbarset.
            var index = 0;
            while (toolbarset.hasAttribute("toolbar"+(++index))) {
              var toolbarInfo = toolbarset.getAttribute("toolbar"+index);
              var infoSplit = toolbarInfo.split(":");
              this.appendCustomToolbar(infoSplit[0], infoSplit[1]);
            }
          }
        ]]>
      </constructor>
      
      <method name="appendCustomToolbar">
        <parameter name="aName"/>
        <parameter name="aCurrentSet"/>
        <body>
          <![CDATA[            
            if (!this.toolbarset)
              return null;
            var toolbar = document.createElementNS("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",
                                                  "toolbar");
            toolbar.id = "__customToolbar_" + aName.replace(" ", "_");
            toolbar.setAttribute("customizable", "true");
            toolbar.setAttribute("customindex", ++this.customToolbarCount);
            toolbar.setAttribute("toolbarname", aName);
            toolbar.setAttribute("currentset", aCurrentSet);
            toolbar.setAttribute("mode", this.getAttribute("mode"));
            toolbar.setAttribute("iconsize", this.getAttribute("iconsize"));
            toolbar.setAttribute("context", this.toolbarset.getAttribute("context"));
            toolbar.setAttribute("class", "chromeclass-toolbar");
            
            this.insertBefore(toolbar, this.toolbarset);
            return toolbar;
          ]]>
        </body>
      </method>
    </implementation>
  </binding>
  
  <binding id="toolbar" role="xul:toolbar"
           extends="chrome://global/content/bindings/toolbar.xml#toolbar-base">
    <implementation>
      <property name="toolbarName"
                onget="return this.getAttribute('toolbarname');"
                onset="this.setAttribute('toolbarname', val); return val;"/>

      <field name="_toolbox">null</field>
      <property name="toolbox" readonly="true">
        <getter><![CDATA[
          if (this._toolbox)
            return this._toolbox;

          let toolboxId = this.getAttribute("toolboxid");
          if (toolboxId) {
            let toolbox = document.getElementById(toolboxId);
            if (!toolbox) {
              let tbName = this.toolbarName;
              if (tbName)
                tbName = " (" + tbName + ")";
              else
                tbName = "";
              throw("toolbar ID " + this.id + tbName + ": toolboxid attribute '" + toolboxId + "' points to a toolbox that doesn't exist");
            }

            if (toolbox.externalToolbars.indexOf(this) == -1)
              toolbox.externalToolbars.push(this);

            return this._toolbox = toolbox;
          }

          return this._toolbox = (this.parentNode &&
                                  this.parentNode.localName == "toolbox") ?
                                 this.parentNode : null;
        ]]></getter>
      </property>

      <constructor>
        <![CDATA[
          if (document.readyState == "complete") {
            this._init();
          } else {
            // Need to wait until XUL overlays are loaded. See bug 554279.
            let self = this;
            document.addEventListener("readystatechange", function (event) {
              if (document.readyState != "complete")
                return;
              document.removeEventListener("readystatechange", arguments.callee, false);
              self._init();
            }, false);
          }
        ]]>
      </constructor>

      <method name="_init">
        <body>
        <![CDATA[
          // Searching for the toolbox palette in the toolbar binding because
          // toolbars are constructed first.
          var toolbox = this.toolbox;
          if (!toolbox)
            return;

          if (!toolbox.palette) {
            // Look to see if there is a toolbarpalette.
            var node = toolbox.firstChild;
            while (node) {
              if (node.localName == "toolbarpalette")
                break;
              node = node.nextSibling;
            }
            
            if (!node)
              return;

            // Hold on to the palette but remove it from the document.
            toolbox.palette = node;
            toolbox.removeChild(node);
          }

          // Build up our contents from the palette.
          var currentSet = this.getAttribute("currentset");
          if (!currentSet)
            currentSet = this.getAttribute("defaultset");
          if (currentSet)
            this.currentSet = currentSet;
        ]]>
        </body>
      </method>

      <method name="_idFromNode">
        <parameter name="aNode"/>
        <body>
        <![CDATA[
          if (aNode.getAttribute("skipintoolbarset") == "true")
            return "";

          switch (aNode.localName) {
            case "toolbarseparator":
              return "separator";
            case "toolbarspring":
              return "spring";
            case "toolbarspacer":
              return "spacer";
            default:
              return aNode.id;
          }
        ]]>
        </body>
      </method>

      <property name="currentSet">
        <getter>
          <![CDATA[
            var node = this.firstChild;
            var currentSet = [];
            while (node) {
              var id = this._idFromNode(node);
              if (id) {
                currentSet.push(id);
              }
              node = node.nextSibling;
            }

            return currentSet.join(",") || "__empty";
          ]]>
        </getter>

        <setter>
          <![CDATA[
            if (val == this.currentSet)
              return val;

            var ids = (val == "__empty") ? [] : val.split(",");

            var nodeidx = 0;
            var paletteItems = { }, added = { };

            var palette = this.toolbox ? this.toolbox.palette : null;

            // build a cache of items in the toolbarpalette
            var paletteChildren = palette ? palette.childNodes : [];
            for (let c = 0; c < paletteChildren.length; c++) {
              let curNode = paletteChildren[c];
              paletteItems[curNode.id] = curNode;
            }

            var children = this.childNodes;

            iter:
            // iterate over the ids to use on the toolbar
            for (let i = 0; i < ids.length; i++) {
              let  id = ids[i];
              // iterate over the existing nodes on the toolbar. nodeidx is the
              // spot where we want to insert items.
              for (let c = nodeidx; c < children.length; c++) {
                let curNode = children[c];
                if (this._idFromNode(curNode) == id) {
                  // the node already exists. If c equals nodeidx, we haven't
                  // iterated yet, so the item is already in the right position.
                  // Otherwise, insert it here.
                  if (c != nodeidx) {
                    this.insertBefore(curNode, children[nodeidx]);
                  }

                  added[curNode.id] = true;
                  nodeidx++;
                  continue iter; // move on to the next id
                }
              }

              // the node isn't already on the toolbar, so add a new one.
              var nodeToAdd = paletteItems[id] || this._getToolbarItem(id);
              if (nodeToAdd && !(nodeToAdd.id in added)) {
                added[nodeToAdd.id] = true;
                this.insertBefore(nodeToAdd, children[nodeidx] || null);
                nodeToAdd.setAttribute("removable", "true");
                nodeidx++;
              }
            }

            // remove any leftover removable nodes
            for (let i = children.length - 1; i >= nodeidx; i--) {
              let curNode = children[i];

              let curNodeId = this._idFromNode(curNode);
              // skip over fixed items
              if (curNodeId && curNode.getAttribute("removable") == "true") {
                if (palette)
                  palette.appendChild(curNode);
                else
                  this.removeChild(curNode);
              }
            }

            return val;
          ]]>
        </setter>
      </property>

      <field name="_newElementCount">0</field>
      <method name="_getToolbarItem">
        <parameter name="aId"/>
        <body>
          <![CDATA[
            const XUL_NS = "http://www.mozilla.org/keymaster/" +
                           "gatekeeper/there.is.only.xul";

            var newItem = null;
            switch (aId) {
              // Handle special cases
              case "separator":
              case "spring":
              case "spacer":
                newItem = document.createElementNS(XUL_NS, "toolbar" + aId);
                // Due to timers resolution Date.now() can be the same for
                // elements created in small timeframes.  So ids are
                // differentiated through a unique count suffix.
                newItem.id = aId + Date.now() + (++this._newElementCount);
                if (aId == "spring")
                  newItem.flex = 1;
                break;
              default:
                var toolbox = this.toolbox;
                if (!toolbox)
                  break;

                // look for an item with the same id, as the item may be
                // in a different toolbar.
                var item = document.getElementById(aId);
                if (item && item.parentNode && 
                    item.parentNode.localName == "toolbar" && 
                    item.parentNode.toolbox == toolbox) {
                  newItem = item;
                  break;
                }

                if (toolbox.palette) {
                  // Attempt to locate an item with a matching ID within
                  // the palette.
                  let paletteItem = this.toolbox.palette.firstChild;
                  while (paletteItem) {
                    if (paletteItem.id == aId) {
                      newItem = paletteItem;
                      break;
                    }
                    paletteItem = paletteItem.nextSibling;
                  }
                }
                break;
            }

            return newItem;
          ]]>
        </body>
      </method>

      <method name="insertItem">
        <parameter name="aId"/>
        <parameter name="aBeforeElt"/>
        <parameter name="aWrapper"/>
        <body>
          <![CDATA[
            var newItem = this._getToolbarItem(aId);
            if (!newItem)
              return null;

            var insertItem = newItem;
            // make sure added items are removable
            newItem.setAttribute("removable", "true");
            
            // Wrap the item in another node if so inclined.
            if (aWrapper) {
              aWrapper.appendChild(newItem);
              insertItem = aWrapper;
            }
            
            // Insert the palette item into the toolbar.
            if (aBeforeElt)
              this.insertBefore(insertItem, aBeforeElt);
            else
              this.appendChild(insertItem);
               
            return newItem;
          ]]>
        </body>
      </method>

      <method name="hasCustomInteractiveItems">
        <parameter name="aCurrentSet"/>
        <body><![CDATA[
          if (aCurrentSet == "__empty")
            return false;

          var defaultOrNoninteractive = (this.getAttribute("defaultset") || "")
                                          .split(",")
                                          .concat(["separator", "spacer", "spring"]);
          return aCurrentSet.split(",").some(function (item) {
            return defaultOrNoninteractive.indexOf(item) == -1;
          });
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="toolbar-menubar-autohide"
           extends="chrome://global/content/bindings/toolbar.xml#toolbar">
    <implementation>
      <constructor>
        this._setInactive();
      </constructor>
      <destructor>
        this._setActive();
      </destructor>

      <field name="_inactiveTimeout">null</field>

      <field name="_contextMenuListener"><![CDATA[({
        toolbar: this,
        contextMenu: null,

        get active () !!this.contextMenu,

        init: function (event) {
          var node = event.target;
          while (node != this.toolbar) {
            if (node.localName == "menupopup")
              return;
            node = node.parentNode;
          }

          var contextMenuId = this.toolbar.getAttribute("context");
          if (!contextMenuId)
            return;

          this.contextMenu = document.getElementById(contextMenuId);
          if (!this.contextMenu)
            return;

          this.contextMenu.addEventListener("popupshown", this, false);
          this.contextMenu.addEventListener("popuphiding", this, false);
          this.toolbar.addEventListener("mousemove", this, false);
        },
        handleEvent: function (event) {
          switch (event.type) {
            case "popupshown":
              this.toolbar.removeEventListener("mousemove", this, false);
              break;
            case "popuphiding":
            case "mousemove":
              this.toolbar._setInactiveAsync();
              this.toolbar.removeEventListener("mousemove", this, false);
              this.contextMenu.removeEventListener("popuphiding", this, false);
              this.contextMenu.removeEventListener("popupshown", this, false);
              this.contextMenu = null;
              break;
          }
        }
      })]]></field>

      <method name="_setInactive">
        <body><![CDATA[
          this.setAttribute("inactive", "true");
        ]]></body>
      </method>

      <method name="_setInactiveAsync">
        <body><![CDATA[
          this._inactiveTimeout = setTimeout(function (self) {
            if (self.getAttribute("autohide") == "true") {
              self._inactiveTimeout = null;
              self._setInactive();
            }
          }, 0, this);
        ]]></body>
      </method>

      <method name="_setActive">
        <body><![CDATA[
          if (this._inactiveTimeout) {
            clearTimeout(this._inactiveTimeout);
            this._inactiveTimeout = null;
          }
          this.removeAttribute("inactive");
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="DOMMenuBarActive"     action="this._setActive();"/>
      <handler event="popupshowing"         action="this._setActive();"/>
      <handler event="mousedown" button="2" action="this._contextMenuListener.init(event);"/>
      <handler event="DOMMenuBarInactive"><![CDATA[
        if (!this._contextMenuListener.active)
          this._setInactiveAsync();
      ]]></handler>
    </handlers>
  </binding>

  <binding id="toolbar-drag"
           extends="chrome://global/content/bindings/toolbar.xml#toolbar">
    <implementation>
      <field name="_dragBindingAlive">true</field>
      <constructor><![CDATA[
        if (!this._draggableStarted) {
          this._draggableStarted = true;
          try {
            let tmp = {};
            Components.utils.import("resource://gre/modules/WindowDraggingUtils.jsm", tmp);
            let draggableThis = new tmp.WindowDraggingElement(this);
            draggableThis.mouseDownCheck = function(e) {
              // Don't move while customizing.
              return this._dragBindingAlive &&
                     this.getAttribute("customizing") != "true";
            };
          } catch (e) {}
        }
      ]]></constructor>
    </implementation>
  </binding>

  <binding id="menubar" role="xul:menubar" 
           extends="chrome://global/content/bindings/toolbar.xml#toolbar-base" display="xul:menubar">
    <implementation>
       <field name="_active">false</field>
       <field name="_statusbar">null</field>
       <field name="_originalStatusText">null</field>
       <property name="statusbar" onget="return this.getAttribute('statusbar');"
                                  onset="this.setAttribute('statusbar', val); return val;"/>
       <method name="_updateStatusText">
          <parameter name="itemText"/>
          <body>
           <![CDATA[
            if (!this._active)
                return;
            var newText = itemText ? itemText : this._originalStatusText;
            if (newText != this._statusbar.label)
                this._statusbar.label = newText;
           ]]>
          </body>
        </method>
    </implementation>
    <handlers>
        <handler event="DOMMenuBarActive">
          <![CDATA[
            if (!this.statusbar) return;
            this._statusbar = document.getElementById(this.statusbar);
            if (!this._statusbar)
              return;
            this._active = true;
            this._originalStatusText = this._statusbar.label;
          ]]>
        </handler>
        <handler event="DOMMenuBarInactive">
          <![CDATA[
            if (!this._active)
              return;
            this._active = false;
            this._statusbar.label = this._originalStatusText;
          ]]>
        </handler>
        <handler event="DOMMenuItemActive">this._updateStatusText(event.target.statusText);</handler>
        <handler event="DOMMenuItemInactive">this._updateStatusText("");</handler>
    </handlers>
  </binding>

  <binding id="toolbardecoration" role="xul:toolbarseparator" extends="chrome://global/content/bindings/toolbar.xml#toolbar-base">
  </binding>

  <binding id="toolbarpaletteitem" extends="chrome://global/content/bindings/toolbar.xml#toolbar-base" display="xul:button">
    <content>
      <xul:hbox class="toolbarpaletteitem-box" flex="1" xbl:inherits="type,place">
        <children/>
      </xul:hbox>
    </content>
  </binding>
    
  <binding id="toolbarpaletteitem-palette" extends="chrome://global/content/bindings/toolbar.xml#toolbarpaletteitem">
    <content>
      <xul:hbox class="toolbarpaletteitem-box" xbl:inherits="type,place">
        <children/>
      </xul:hbox>
      <xul:label xbl:inherits="value=title"/>
    </content>
  </binding>

</bindings>          

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- empty with no url -->
    <item android:state_empty="true" android:color="#80777777" />

    <!-- default -->
    <item android:color="#FF777777"/>

</selector>
<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <org.mozilla.gecko.home.TopSitesThumbnailView
            android:id="@+id/thumbnail"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"/>

    <org.mozilla.gecko.widget.FadedSingleColorTextView
            android:id="@+id/title"
            style="@style/Widget.TopSitesGridItemTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/thumbnail"
            android:duplicateParentState="true"
            android:drawablePadding="4dip"
            gecko:fadeWidth="20dip"/>

</merge>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
     <size android:height="2dp"
           android:width="2dp"/>
     <solid android:color="#FFFFFFFF"/>
     <stroke android:width="1dp" android:color="#FFDDDDDD"/>
</shape>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.1 $"/>
		<generation date="$Date: 2010/02/09 01:05:49 $"/>
		<language type="to"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

  <its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
    <its:param name="LCID">409</its:param>
    <its:translateRule selector="/doc" translate="no"/>
    <its:translateRule selector="//msg[@lcid=$LCID]" translate="yes"/>
  </its:rules>
<doc>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:type="simple" xlink:href="translate10xmlrules.xml"/>
  <msg lcid="409" num="1">Create a folder</msg>
  <msg lcid="411" num="1">フォルダーを作成する</msg>
  <msg lcid="407" num="1">Erstellen Sie einen Ordner</msg>
  <msg lcid="408" num="1">Créer un dossier</msg>
</doc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its"  xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
  <its:translateRule selector="//h:code" translate="no"/>
  <its:translateRule selector="//h:link" translate="no"/>
</its:rules>
<?xml version="1.0"?>
<myMetaDoc
      xmlns:cml="myChineseMakupLanguage">
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:translateRule selector="//img/@alt" translate="yes"/>
   <its:translateRule selector="//*/@title" translate="yes"/>
   <its:translateRule selector="//verbatim" translate="no"/>
   <its:translateRule selector="//verbatim/@*" translate="no"/>
   <its:translateRule selector="//verbatim//*/@*" translate="no"/>
   <its:withinTextRule selector="//img|//verbatim" withinText="yes"/>
  </its:rules>
 </head>
 <body>
  <par>Text with an image: <img alt="Image description" src="img.png"/>.</par>
  <par id="100" title="Text">This is the first paragraph. It has some <verbatim>un-translatable 
   code with an image: <img src="test.png" alt="Image description"/></verbatim>.</par>
  <insert xmlns:z="myChineseMakupLanguage" xmlns:i="http://www.w3.org/2005/11/its">
   <z:书籍>
    <z:封面>
     <z:汇集>The Lord of the Rings</z:汇集>
     <z:标题>The Return of the King</z:标题>
     <z:作者>J.R.R. Tolkein</z:作者>
    </z:封面>
    <z:章节 数="1">
     <z:头注>Minas Tirith</z:头注>
     <z:段落识别 id="A34B"><z:姓名>Pippin</z:姓名> looked out from the shelter of <z:姓名>Gandalf</z:姓名>'s cloak.</z:段落识别>
    </z:章节>
    <z:躯>
     <i:rules version="2.0" xmlns:cml="myChineseMakupLanguage">
      <i:translateRule selector="//cml:作者" translate="no"/>
      <i:translateRule selector="//cml:姓名" translate="no"/>
      <i:withinTextRule selector="//cml:姓名" withinText="yes"/>
     </i:rules>
    </z:躯>
   </z:书籍>
  </insert>
 </body>
</myMetaDoc>
<?xml version="1.0"?>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
 <its:translateRule selector="//code" translate="no"/>
 <its:translateRule selector="//*/@title" translate="yes"/>
</its:rules>
<?xml version="1.0"?>
<myDoc>
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0"
   xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" xlink:href="translate2xmlrules.xml"/>
 </head>
 <body>
  <par id="100" title="Text">This is the first paragraph. It has some <code>un-translatable code</code>.</par>
 </body>
</myDoc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:translateRule selector="//h:*" translate="no"/>
<its:translateRule selector="//h:p" translate="yes"/>
</its:rules>
<?xml version="1.0"?>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
 <its:translateRule selector="//head" translate="no"/>
 <its:translateRule selector="//code" translate="no"/>
 <its:translateRule selector="//*/@title" translate="yes"/>
</its:rules>
<?xml version="1.0"?>
<myDoc>
 <head>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0"
   xmlns:xlink="http://www.w3.org/1999/xlink" xlink:type="simple" xlink:href="translate3xmlrules.xml">
   <its:translateRule selector="//par[@id='101']/@title" translate="no"/>
  </its:rules>
 </head>
 <body>
  <par id="100" title="Text">This is the first paragraph. It has some <code>un-translatable code</code>.</par>
  <par id="101" title="Not extractable text">Some additional text.</par>
 </body>
</myDoc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:translateRule selector="/h:html" translate="no"/>
<its:translateRule selector="//h:p" translate="yes"/>
</its:rules>
<book xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <head>
  <title>The Life of a Simple Man</title>
 </head>
 <body>
  <img src="smiley.gif" alt="Smiley face" width="42" height="42"/>
  <p>Everything started when Zebulon discovered that he had 
   a <fexp its:translate="no">doppelgänger</fexp> who was a
   serious baseball <fexp its:translate="no">aficionado</fexp>.</p>
 </body>
</book>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:translateRule selector="//h:*" translate="no"/>
<its:translateRule selector="//h:p" translate="yes"/>
</its:rules>
<book xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="EX-ways-to-use-its-5.xsd"
 xmlns:its="http://www.w3.org/2005/11/its"
 its:version="2.0">
 <head>
  <title>The Life of a Simple Man</title>
 </head>
 <body>
  <p>Everything started when Zebulon discovered that he had 
   a <its:span translate="no">doppelgänger</its:span> who was a
   serious baseball <its:span translate="no">aficionado</its:span>.</p>
 </body>
</book>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:param name="tDataCatParam">tDataCat</its:param>
<its:translateRule selector="//h:*" translate="no"/>
<its:translateRule selector="//h:p" translate="yes"/>
<its:translateRule selector="//h:span[@id=$tDataCatParam]" translate="yes"/>
</its:rules>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <head>
  <its:rules version="2.0">
   <its:translateRule selector="//*" translate="no"/>
   <its:translateRule selector="//p" translate="yes"/>
  </its:rules>
 </head>
 <info>
  <item type="title" its:translate="yes">The Life of a <b>Simple Man</b></item>
  <!-- Note that the contents of <b> and <span> should end up 
       *not* translatable with these settings -->
  <item type="date-main">Dec-05-2006</item>
 </info>
 <content>
  <p>Everything started when Zebulon discovered that he had 
   a <span>doppelgänger</span> who was a
   serious baseball <span>aficionado</span>.</p>
 </content>
</doc>
<doc xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <head>
  <its:rules version="2.0">
   <its:translateRule selector="/doc" translate="no"/>
   <its:translateRule selector="//p" translate="yes"/>
  </its:rules>
 </head>
 <info>
  <item type="title" its:translate="yes">The Life of a <b>Simple Man</b></item>
  <!-- Note that the contents of <b> and <span> should end up 
       translatable with these settings -->
  <item type="date-main">Dec-05-2006</item>
 </info>
 <content>
  <p>Everything started when Zebulon discovered that he had 
   a <span>doppelgänger</span> who was a
   serious baseball <span>aficionado</span>.</p>
 </content>
</doc>
<topic id="myTopic">
 <title>The ITS Topic</title>
 <prolog>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
   <its:translateRule selector="//*" translate="no"/>
   <its:translateRule selector="//p" translate="yes"/>
   <!-- With these rules only the text "For the implementation of ITS, apply the rules in the order:"
   and " The last rule wins." should end up translatable --> 
   </its:rules>
 </prolog>
 <body>
  <dl>
   <dlentry id="tDataCat">
    <dt>Data category</dt>
    <dd>ITS defines <term>data category</term> as an abstract concept for a particular 
    type of information for internationalization and localization of XML schemas and documents.</dd>
   </dlentry>
  </dl>
  <p>For the implementation of ITS, apply the rules in the order:</p>
  <ul>
   <li>Default</li>
   <li>Rules in the schema</li>
   <li>Rules in the document instance</li>
   <li>Local attributes</li>
  </ul>
  <p><ph xml:lang="fr">Et voilà !</ph> The last rule wins.</p>
 </body>
</topic>
<doc>
  <its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
    <its:param name="LCID">409</its:param>
    <its:translateRule selector="/doc" translate="no"/>
    <its:translateRule selector="//msg[@lcid=$LCID]" translate="yes"/>
  </its:rules>
  <msg lcid="409" num="1">Create a folder</msg>
  <msg lcid="411" num="1">フォルダーを作成する</msg>
  <msg lcid="407" num="1">Erstellen Sie einen Ordner</msg>
  <msg lcid="40c" num="1">Créer un dossier</msg>
</doc>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE bindings [
<!ENTITY % notificationDTD SYSTEM "chrome://global/locale/notification.dtd">
%notificationDTD;
<!ENTITY % translationDTD SYSTEM "chrome://browser/locale/translation.dtd" >
%translationDTD;
]>

<bindings id="translationBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">
  <binding id="translationbar" extends="chrome://global/content/bindings/notification.xml#notification" role="xul:alert">
    <resources>
      <stylesheet src="chrome://global/skin/notification.css"/>
    </resources>
    <content>
      <xul:hbox class="notification-inner outset" flex="1" xbl:inherits="type">
        <xul:hbox anonid="details" align="center" flex="1">
          <xul:image class="translate-infobar-element messageImage"
                     anonid="messageImage"/>
          <xul:panel anonid="welcomePanel" class="translation-welcome-panel"
                     type="arrow" align="start">
            <xul:image class="translation-welcome-logo"/>
            <xul:vbox flex="1" class="translation-welcome-content">
              <xul:description class="translation-welcome-headline"
                               anonid="welcomeHeadline"/>
              <xul:description class="translation-welcome-body" anonid="welcomeBody"/>
              <xul:hbox align="center">
                <xul:label anonid="learnMore" class="plain text-link"
                           onclick="openUILinkIn('https://support.mozilla.org/kb/automatic-translation', 'tab'); this.parentNode.parentNode.parentNode.hidePopup();"/>
                <xul:spacer flex="1"/>
                <xul:button class="translate-infobar-element" anonid="thanksButton"
                            onclick="this.parentNode.parentNode.parentNode.hidePopup();"/>
              </xul:hbox>
            </xul:vbox>
          </xul:panel>
          <xul:deck anonid="translationStates" selectedIndex="0">

            <!-- offer to translate -->
            <xul:hbox class="translate-offer-box" align="center">
              <xul:label class="translate-infobar-element" value="&translation.thisPageIsIn.label;"/>
              <xul:menulist class="translate-infobar-element" anonid="detectedLanguage">
                <xul:menupopup/>
              </xul:menulist>
              <xul:label class="translate-infobar-element" value="&translation.translateThisPage.label;"/>
              <xul:button class="translate-infobar-element"
                          label="&translation.translate.button;"
                          anonid="translate"
                          oncommand="document.getBindingParent(this).translate();"/>
              <xul:button class="translate-infobar-element"
                          label="&translation.notNow.button;" anonid="notNow"
                          oncommand="document.getBindingParent(this).closeCommand();"/>
            </xul:hbox>

            <!-- translating -->
            <xul:vbox class="translating-box" pack="center">
              <xul:label class="translate-infobar-element"
                         value="&translation.translatingContent.label;"/>
            </xul:vbox>

            <!-- translated -->
            <xul:hbox class="translated-box" align="center">
              <xul:label class="translate-infobar-element"
                         value="&translation.translatedFrom.label;"/>
              <xul:menulist class="translate-infobar-element"
                            anonid="fromLanguage"
                            oncommand="document.getBindingParent(this).translate()">
                <xul:menupopup/>
              </xul:menulist>
              <xul:label class="translate-infobar-element"
                         value="&translation.translatedTo.label;"/>
              <xul:menulist class="translate-infobar-element"
                            anonid="toLanguage"
                            oncommand="document.getBindingParent(this).translate()">
                <xul:menupopup/>
              </xul:menulist>
              <xul:label class="translate-infobar-element"
                         value="&translation.translatedToSuffix.label;"/>
              <xul:button anonid="showOriginal"
                          class="translate-infobar-element"
                          label="&translation.showOriginal.button;"
                          oncommand="document.getBindingParent(this).showOriginal();"/>
              <xul:button anonid="showTranslation"
                          class="translate-infobar-element"
                          label="&translation.showTranslation.button;"
                          oncommand="document.getBindingParent(this).showTranslation();"/>
            </xul:hbox>

            <!-- error -->
            <xul:hbox class="translation-error" align="center">
              <xul:label class="translate-infobar-element"
                         value="&translation.errorTranslating.label;"/>
              <xul:button class="translate-infobar-element"
                          label="&translation.tryAgain.button;"
                          anonid="tryAgain"
                          oncommand="document.getBindingParent(this).translate();"/>
            </xul:hbox>

            <!-- unavailable -->
            <xul:vbox class="translation-unavailable" pack="center">
              <xul:label class="translate-infobar-element"
                         value="&translation.serviceUnavailable.label;"/>
            </xul:vbox>

          </xul:deck>
          <xul:spacer flex="1"/>

          <xul:button type="menu"
                      class="translate-infobar-element options-menu-button"
                      anonid="options"
                      label="&translation.options.menu;">
            <xul:menupopup class="translation-menupopup cui-widget-panel cui-widget-panelview
                                  cui-widget-panelWithFooter PanelUI-subView"
                           onpopupshowing="document.getBindingParent(this).optionsShowing();">
              <xul:menuitem anonid="neverForLanguage"
                            oncommand="document.getBindingParent(this).neverForLanguage();"/>
              <xul:menuitem anonid="neverForSite"
                            oncommand="document.getBindingParent(this).neverForSite();"
                            label="&translation.options.neverForSite.label;"
                            accesskey="&translation.options.neverForSite.accesskey;"/>
              <xul:menuseparator/>
              <xul:menuitem oncommand="openPreferences('paneContent');"
                            label="&translation.options.preferences.label;"
                            accesskey="&translation.options.preferences.accesskey;"/>
              <xul:menuitem class="translation-attribution subviewbutton panel-subview-footer"
                            oncommand="document.getBindingParent(this).openProviderAttribution();">
                <xul:label>&translation.options.attribution.beforeLogo;</xul:label>
                <xul:image src="chrome://browser/content/microsoft-translator-attribution.png"
                           aria-label="Microsoft Translator"/>
                <xul:label>&translation.options.attribution.afterLogo;</xul:label>
              </xul:menuitem>
            </xul:menupopup>
          </xul:button>

        </xul:hbox>
        <xul:toolbarbutton ondblclick="event.stopPropagation();"
                           anonid="closeButton"
                           class="messageCloseButton close-icon tabbable"
                           xbl:inherits="hidden=hideclose"
                           tooltiptext="&closeNotification.tooltip;"
                           oncommand="document.getBindingParent(this).closeCommand();"/>
      </xul:hbox>
    </content>
    <implementation>
      <property name="state"
                onget="return this._getAnonElt('translationStates').selectedIndex;">
        <setter>
          <![CDATA[
          let deck = this._getAnonElt('translationStates');

          let activeElt = document.activeElement;
          if (activeElt && deck.contains(activeElt))
            activeElt.blur();

          let stateName;
          for (let name of ["OFFER", "TRANSLATING", "TRANSLATED", "ERROR"]) {
            if (Translation["STATE_" + name] == val) {
              stateName = name.toLowerCase();
              break;
            }
          }
          this.setAttribute("state", stateName);

          if (val == Translation.STATE_TRANSLATED)
            this._handleButtonHiding();

          deck.selectedIndex = val;
          ]]>
        </setter>
      </property>

      <method name="init">
        <parameter name="aTranslation"/>
        <body>
          <![CDATA[
            this.translation = aTranslation;
            let bundle = Cc["@mozilla.org/intl/stringbundle;1"]
                           .getService(Ci.nsIStringBundleService)
                           .createBundle("chrome://global/locale/languageNames.properties");
            let sortByLocalizedName = function(aList) {
              return aList.map(code => [code, bundle.GetStringFromName(code)])
                          .sort((a, b) => a[1].localeCompare(b[1]));
            };

            // Fill the lists of supported source languages.
            let detectedLanguage = this._getAnonElt("detectedLanguage");
            let fromLanguage = this._getAnonElt("fromLanguage");
            let sourceLanguages =
              sortByLocalizedName(Translation.supportedSourceLanguages);
            for (let [code, name] of sourceLanguages) {
              detectedLanguage.appendItem(name, code);
              fromLanguage.appendItem(name, code);
            }
            detectedLanguage.value = this.translation.detectedLanguage;

            // translatedFrom is only set if we have already translated this page.
            if (aTranslation.translatedFrom)
              fromLanguage.value = aTranslation.translatedFrom;

            // Fill the list of supported target languages.
            let toLanguage = this._getAnonElt("toLanguage");
            let targetLanguages =
              sortByLocalizedName(Translation.supportedTargetLanguages);
            for (let [code, name] of targetLanguages)
              toLanguage.appendItem(name, code);

            if (aTranslation.translatedTo)
              toLanguage.value = aTranslation.translatedTo;

            if (aTranslation.state)
              this.state = aTranslation.state;

            const kWelcomePref = "browser.translation.ui.welcomeMessageShown";
            if (Services.prefs.prefHasUserValue(kWelcomePref) ||
                this.translation.browser != gBrowser.selectedBrowser)
              return;

            this.addEventListener("transitionend", function onShown() {
              this.removeEventListener("transitionend", onShown);

              // These strings are hardcoded because they need to reach beta
              // without riding the trains.
              let localizedStrings = {
                en: ["Hey look! It's something new!",
                     "Now the Web is even more accessible with our new in-page translation feature. Click the translate button to try it!",
                     "Learn more.",
                     "Thanks"],
                "es-AR": ["\xA1Mir\xE1! \xA1Hay algo nuevo!",
                          "Ahora la web es a\xFAn m\xE1s accesible con nuestra nueva funcionalidad de traducci\xF3n integrada. \xA1Hac\xE9 clic en el bot\xF3n traducir para probarla!",
                          "Conoc\xE9 m\xE1s.",
                          "Gracias"],
                "es-ES": ["\xA1Mira! \xA1Hay algo nuevo!",
                          "Con la nueva funcionalidad de traducci\xF3n integrada, ahora la Web es a\xFAn m\xE1s accesible. \xA1Pulsa el bot\xF3n Traducir y pru\xE9bala!",
                          "M\xE1s informaci\xF3n.",
                          "Gracias"],
                pl: ["Sp\xF3jrz tutaj! To co\u015B nowego!",
                     "Sie\u0107 sta\u0142a si\u0119 w\u0142a\u015Bnie jeszcze bardziej dost\u0119pna dzi\u0119ki opcji bezpo\u015Bredniego t\u0142umaczenia stron. Kliknij przycisk t\u0142umaczenia, aby spr\xF3bowa\u0107!",
                     "Dowiedz si\u0119 wi\u0119cej",
                     "Dzi\u0119kuj\u0119"],
                tr: ["Bak\u0131n, burada yeni bir \u015Fey var!",
                     "Yeni sayfa i\xE7i \xE7eviri \xF6zelli\u011Fimiz sayesinde Web art\u0131k \xE7ok daha anla\u015F\u0131l\u0131r olacak. Denemek i\xE7in \xC7evir d\xFC\u011Fmesine t\u0131klay\u0131n!",
                     "Daha fazla bilgi al\u0131n.",
                     "Te\u015Fekk\xFCrler"],
                vi: ["Nh\xECn n\xE0y! \u0110\u1ED3 m\u1EDBi!",
                     "Gi\u1EDD \u0111\xE2y ch\xFAng ta c\xF3 th\u1EC3 ti\u1EBFp c\u1EADn web d\u1EC5 d\xE0ng h\u01A1n n\u1EEFa v\u1EDBi t\xEDnh n\u0103ng d\u1ECBch ngay trong trang.  Hay nh\u1EA5n n\xFAt d\u1ECBch \u0111\u1EC3 th\u1EED!",
                     "T\xECm hi\u1EC3u th\xEAm.",
                     "C\u1EA3m \u01A1n"]
              };

              let locale = Cc["@mozilla.org/chrome/chrome-registry;1"]
                             .getService(Ci.nsIXULChromeRegistry)
                             .getSelectedLocale("browser");
              if (!(locale in localizedStrings))
                locale = "en";
              let strings = localizedStrings[locale];

              this._getAnonElt("welcomeHeadline").setAttribute("value", strings[0]);
              this._getAnonElt("welcomeBody").textContent = strings[1];
              this._getAnonElt("learnMore").setAttribute("value", strings[2]);
              this._getAnonElt("thanksButton").setAttribute("label", strings[3]);

              let panel = this._getAnonElt("welcomePanel");
              panel.openPopup(this._getAnonElt("messageImage"),
                              "bottomcenter topleft");

              Services.prefs.setBoolPref(kWelcomePref, true);
            });
          ]]>
        </body>
      </method>

      <method name="_getAnonElt">
        <parameter name="aAnonId"/>
        <body>
          return document.getAnonymousElementByAttribute(this, "anonid", aAnonId);
        </body>
      </method>

      <method name="translate">
        <body>
          <![CDATA[
            if (this.state == Translation.STATE_OFFER) {
              this._getAnonElt("fromLanguage").value =
                this._getAnonElt("detectedLanguage").value;
              this._getAnonElt("toLanguage").value =
                Translation.defaultTargetLanguage;
            }

            this.translation.translate(this._getAnonElt("fromLanguage").value,
                                       this._getAnonElt("toLanguage").value);
          ]]>
        </body>
      </method>

      <!-- To be called when the infobar should be closed per user's wish (e.g.
           by clicking the notification's close button -->
      <method name="closeCommand">
        <body>
          <![CDATA[
            this.close();
            this.translation.infobarClosed();
          ]]>
        </body>
      </method>
      <method name="_handleButtonHiding">
        <body>
          <![CDATA[
            let originalShown = this.translation.originalShown;
            this._getAnonElt("showOriginal").hidden = originalShown;
            this._getAnonElt("showTranslation").hidden = !originalShown;
          ]]>
        </body>
      </method>

      <method name="showOriginal">
        <body>
          <![CDATA[
            this.translation.showOriginalContent();
            this._handleButtonHiding();
          ]]>
        </body>
      </method>

      <method name="showTranslation">
        <body>
          <![CDATA[
            this.translation.showTranslatedContent();
            this._handleButtonHiding();
          ]]>
        </body>
      </method>

      <method name="optionsShowing">
        <body>
          <![CDATA[
            // Get the source language name.
            let lang;
            if (this.state == Translation.STATE_OFFER)
              lang = this._getAnonElt("detectedLanguage").value;
            else {
              lang = this._getAnonElt("fromLanguage").value;

              // If we have never attempted to translate the page before the
              // service became unavailable, "fromLanguage" isn't set.
              if (!lang && this.state == Translation.STATE_UNAVAILABLE)
                lang = this.translation.detectedLanguage;
            }

            let langBundle =
              Cc["@mozilla.org/intl/stringbundle;1"]
                .getService(Ci.nsIStringBundleService)
                .createBundle("chrome://global/locale/languageNames.properties");
            let langName = langBundle.GetStringFromName(lang);

            // Set the label and accesskey on the menuitem.
            let bundle =
              Cc["@mozilla.org/intl/stringbundle;1"]
                .getService(Ci.nsIStringBundleService)
                .createBundle("chrome://browser/locale/translation.properties");
            let item = this._getAnonElt("neverForLanguage");
            const kStrId = "translation.options.neverForLanguage";
            item.setAttribute("label",
                              bundle.formatStringFromName(kStrId + ".label",
                                                          [langName], 1));
            item.setAttribute("accesskey",
                              bundle.GetStringFromName(kStrId + ".accesskey"));
            item.langCode = lang;

            // We may need to disable the menuitems if they have already been used.
            // Check if translation is already disabled for this language:
            let neverForLangs =
              Services.prefs.getCharPref("browser.translation.neverForLanguages");
            item.disabled = neverForLangs.split(",").indexOf(lang) != -1;

            // Check if translation is disabled for the domain:
            let uri = this.translation.browser.currentURI;
            let perms = Services.perms;
            item = this._getAnonElt("neverForSite");
            item.disabled =
              perms.testExactPermission(uri, "translate") == perms.DENY_ACTION;
          ]]>
        </body>
      </method>

      <method name="neverForLanguage">
        <body>
          <![CDATA[
            const kPrefName = "browser.translation.neverForLanguages";

            let val = Services.prefs.getCharPref(kPrefName);
            if (val)
              val += ",";
            val += this._getAnonElt("neverForLanguage").langCode;

            Services.prefs.setCharPref(kPrefName, val);

            this.closeCommand();
          ]]>
        </body>
      </method>

      <method name="neverForSite">
        <body>
          <![CDATA[
            let uri = this.translation.browser.currentURI;
            let perms = Services.perms;
            perms.add(uri, "translate", perms.DENY_ACTION);

            this.closeCommand();
          ]]>
        </body>
      </method>

      <method name="openProviderAttribution">
        <body>
          <![CDATA[
            Translation.openProviderAttribution();
          ]]>
        </body>
      </method>

    </implementation>
  </binding>
</bindings>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings [
<!ENTITY % treeDTD SYSTEM "chrome://global/locale/tree.dtd">
%treeDTD;
]>

<bindings id="treeBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">
  
  <binding id="tree-base" extends="chrome://global/content/bindings/general.xml#basecontrol">
    <resources>
      <stylesheet src="chrome://global/skin/tree.css"/>
    </resources>
    <implementation>
      <method name="_isAccelPressed">
        <parameter name="aEvent"/>
        <body><![CDATA[
# Workaround until bug 302174 is fixed
#ifdef XP_MACOSX
          return aEvent.metaKey;
#else
          return aEvent.ctrlKey;
#endif
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="tree" extends="chrome://global/content/bindings/tree.xml#tree-base" role="xul:tree">
    <content hidevscroll="true" hidehscroll="true" clickthrough="never">
      <children includes="treecols"/>
      <xul:stack class="tree-stack" flex="1">
        <xul:treerows class="tree-rows" flex="1" xbl:inherits="hidevscroll">
          <children/>
        </xul:treerows>
        <xul:textbox anonid="input" class="tree-input" left="0" top="0" hidden="true"/>
      </xul:stack>
      <xul:hbox xbl:inherits="collapsed=hidehscroll">
        <xul:scrollbar orient="horizontal" flex="1" increment="16" style="position:relative; z-index:2147483647;"/>
        <xul:scrollcorner xbl:inherits="collapsed=hidevscroll"/>
      </xul:hbox>
    </content>
    
    <implementation implements="nsIDOMXULTreeElement, nsIDOMXULMultiSelectControlElement">

      <!-- ///////////////// nsIDOMXULTreeElement ///////////////// -->

      <property name="columns"
                onget="return this.treeBoxObject.columns;"/>

      <property name="view"
                onget="return this.treeBoxObject.view ?
                       this.treeBoxObject.view.QueryInterface(Components.interfaces.nsITreeView) :
                       null;"
                onset="return this.treeBoxObject.view = val;"/>

      <property name="body"
                onget="return this.treeBoxObject.treeBody;"/>

      <property name="editable"
                onget="return this.getAttribute('editable') == 'true';"
                onset="if (val) this.setAttribute('editable', 'true');
                       else this.removeAttribute('editable'); return val;"/>

      <!-- ///////////////// nsIDOMXULSelectControlElement ///////////////// -->

      <!-- ///////////////// nsIDOMXULMultiSelectControlElement ///////////////// -->

      <property name="selType"
                onget="return this.getAttribute('seltype')"
                onset="this.setAttribute('seltype', val); return val;"/>

      <property name="currentIndex"
                onget="return this.view ? this.view.selection.currentIndex: - 1;"
                onset="if (this.view) return this.view.selection.currentIndex = val; return val;"/>

      <property name="treeBoxObject"
                onget="return this.boxObject;"
                readonly="true"/>
# contentView is obsolete (see bug 202391)
      <property name="contentView"
                onget="return this.view; /*.QueryInterface(Components.interfaces.nsITreeContentView)*/"
                readonly="true"/>
# builderView is obsolete (see bug 202393)
      <property name="builderView"
                onget="return this.view; /*.QueryInterface(Components.interfaces.nsIXULTreeBuilder)*/"
                readonly="true"/>
      <field name="pageUpOrDownMovesSelection">
#ifdef XP_MACOSX
        false
#else
        true
#endif
      </field>
      <property name="keepCurrentInView"
                onget="return (this.getAttribute('keepcurrentinview') == 'true');"
                onset="if (val) this.setAttribute('keepcurrentinview', 'true');
                       else this.removeAttribute('keepcurrentinview'); return val;"/>

      <property name="enableColumnDrag"
                onget="return this.hasAttribute('enableColumnDrag');"
                onset="if (val) this.setAttribute('enableColumnDrag', 'true');
                       else this.removeAttribute('enableColumnDrag'); return val;"/>

      <field name="_inputField">null</field>

      <property name="inputField" readonly="true">
        <getter><![CDATA[
          if (!this._inputField)
            this._inputField = document.getAnonymousElementByAttribute(this, "anonid", "input");
          return this._inputField;
        ]]></getter>
      </property>

      <property name="disableKeyNavigation"
                onget="return this.hasAttribute('disableKeyNavigation');"
                onset="if (val) this.setAttribute('disableKeyNavigation', 'true');
                       else this.removeAttribute('disableKeyNavigation'); return val;"/>

      <field name="_editingRow">-1</field>
      <field name="_editingColumn">null</field>

      <property name="editingRow" readonly="true"
                onget="return this._editingRow;"/>
      <property name="editingColumn" readonly="true"
                onget="return this._editingColumn;"/>

      <property name="_selectDelay" 
                onset="this.setAttribute('_selectDelay', val);"
                onget="return this.getAttribute('_selectDelay') || 50;"/>
      <field name="_columnsDirty">true</field>
      <field name="_lastKeyTime">0</field>
      <field name="_incrementalString">""</field>

      <method name="_ensureColumnOrder">
        <body><![CDATA[
          if (!this._columnsDirty)
            return;

          if (this.columns) {
            // update the ordinal position of each column to assure that it is
            // an odd number and 2 positions above its next sibling
            var cols = [];
            var i;
            for (var col = this.columns.getFirstColumn(); col; col = col.getNext())
              cols.push(col.element);
            for (i = 0; i < cols.length; ++i)
              cols[i].setAttribute("ordinal", (i*2)+1);

            // update the ordinal positions of splitters to even numbers, so that 
            // they are in between columns
            var splitters = this.getElementsByTagName("splitter");
            for (i = 0; i < splitters.length; ++i)
              splitters[i].setAttribute("ordinal", (i+1)*2);
          }
          this._columnsDirty = false;
        ]]></body>
      </method>

      <method name="_reorderColumn">
        <parameter name="aColMove"/>
        <parameter name="aColBefore"/>
        <parameter name="aBefore"/>
        <body><![CDATA[
          this._ensureColumnOrder();

          var i;
          var cols = [];
          var col = this.columns.getColumnFor(aColBefore);
          if (parseInt(aColBefore.ordinal) < parseInt(aColMove.ordinal)) {
            if (aBefore)
              cols.push(aColBefore);
            for (col = col.getNext(); col.element != aColMove;
                 col = col.getNext())
              cols.push(col.element);

            aColMove.ordinal = cols[0].ordinal;
            for (i = 0; i < cols.length; ++i)
              cols[i].ordinal = parseInt(cols[i].ordinal) + 2;
          } else if (aColBefore.ordinal != aColMove.ordinal) {
            if (!aBefore)
              cols.push(aColBefore);
            for (col = col.getPrevious(); col.element != aColMove;
                 col = col.getPrevious())
              cols.push(col.element);

            aColMove.ordinal = cols[0].ordinal;
            for (i = 0; i < cols.length; ++i)
              cols[i].ordinal = parseInt(cols[i].ordinal) - 2;
          }
        ]]></body>
      </method>
      
      <method name="_getColumnAtX">
        <parameter name="aX"/>
        <parameter name="aThresh"/>
        <parameter name="aPos"/>
        <body><![CDATA[
          var isRTL = document.defaultView.getComputedStyle(this, "")
                              .direction == "rtl";

          if (aPos)
            aPos.value = isRTL ? "after" : "before";

          var columns = [];
          var col = this.columns.getFirstColumn();
          while (col) {
            columns.push(col);
            col = col.getNext();
          }
          if (isRTL)
            columns.reverse();
          var currentX = this.boxObject.x;
          var adjustedX = aX + this.treeBoxObject.horizontalPosition;
          for (var i = 0; i < columns.length; ++i) {
            col = columns[i];
            var cw = col.element.boxObject.width;
            if (cw > 0) {
              currentX += cw;
              if (currentX - (cw * aThresh) > adjustedX)
                return col.element;
            }
          }

          if (aPos)
            aPos.value = isRTL ? "before" : "after";
          return columns.pop().element;
        ]]></body>
      </method>

      <method name="changeOpenState">
        <parameter name="row"/>
        <!-- Optional parameter openState == true or false to set. 
             No openState param == toggle -->
        <parameter name="openState"/>
        <body><![CDATA[
          if (row < 0 || !this.view.isContainer(row)) {
            return false;
          }

          if (this.view.isContainerOpen(row) != openState) {
            this.view.toggleOpenState(row);
            if (row == this.currentIndex) {
              // Only fire event when current row is expanded or collapsed
              // because that's all the assistive technology really cares about.
              var event = document.createEvent('Events');
              event.initEvent('OpenStateChange', true, true);
              this.dispatchEvent(event);
            }
            return true;
          }
          return false;
        ]]></body>
      </method>

      <property name="_cellSelType">
        <getter>
          <![CDATA[
            var seltype = this.selType;
            if (seltype == "cell" || seltype == "text")
              return seltype;
            return null;
          ]]>
        </getter>
      </property>

      <method name="_getNextColumn">
        <parameter name="row"/>
        <parameter name="left"/>
        <body><![CDATA[
          var col = this.view.selection.currentColumn;
          if (col) {
            col = left ? col.getPrevious() : col.getNext();
          }
          else {
            col = this.columns.getKeyColumn();
          }
          while (col && (col.width == 0 || !col.selectable ||
                 !this.view.isSelectable(row, col)))
            col = left ? col.getPrevious() : col.getNext();
          return col;
        ]]></body>
      </method>

      <method name="_keyNavigate">
        <parameter name="event"/>
        <body><![CDATA[
          var key = String.fromCharCode(event.charCode).toLowerCase();
          if (event.timeStamp - this._lastKeyTime > 1000)
            this._incrementalString = key;
          else
            this._incrementalString += key;
          this._lastKeyTime = event.timeStamp;

          var length = this._incrementalString.length;
          var incrementalString = this._incrementalString;
          var charIndex = 1;
          while (charIndex < length && incrementalString[charIndex] == incrementalString[charIndex - 1])
            charIndex++;
          // If all letters in incremental string are same, just try to match the first one
          if (charIndex == length) {
            length = 1;
            incrementalString = incrementalString.substring(0, length);
          }

          var keyCol = this.columns.getKeyColumn();
          var rowCount = this.view.rowCount;
          var start = 1;

          var c = this.currentIndex;
          if (length > 1) {
            start = 0;
            if (c < 0)
              c = 0;
          }

          for (var i = 0; i < rowCount; i++) {
            var l = (i + start + c) % rowCount;
            var cellText = this.view.getCellText(l, keyCol);
            cellText = cellText.substring(0, length).toLowerCase();
            if (cellText == incrementalString)
              return l;
          }
          return -1;
        ]]></body>
      </method>

      <method name="startEditing">
        <parameter name="row"/>
        <parameter name="column"/>
        <body>
          <![CDATA[
            if (!this.editable)
              return false;
            if (row < 0 || row >= this.view.rowCount || !column)
              return false;
            if (column.type != Components.interfaces.nsITreeColumn.TYPE_TEXT ||
                column.cycler || !this.view.isEditable(row, column))
              return false;

            // Beyond this point, we are going to edit the cell.
            if (this._editingColumn)
              this.stopEditing();

            var input = this.inputField;

            var box = this.treeBoxObject;
            box.ensureCellIsVisible(row, column);

            // Get the coordinates of the text inside the cell.
            var textRect = box.getCoordsForCellItem(row, column, "text");

            // Get the coordinates of the cell itself.
            var cellRect = box.getCoordsForCellItem(row, column, "cell");

            // Calculate the top offset of the textbox.
            var style = window.getComputedStyle(input, "");
            var topadj = parseInt(style.borderTopWidth) + parseInt(style.paddingTop);
            input.top = textRect.y - topadj;

            // The leftside of the textbox is aligned to the left side of the text
            // in LTR mode, and left side of the cell in RTL mode.
            var left, widthdiff;
            if (style.direction == "rtl") {
              left = cellRect.x;
              widthdiff = cellRect.x + cellRect.width - textRect.x - textRect.width;
            } else {
              left = textRect.x;
              widthdiff = textRect.x - cellRect.x;
            }

            input.left = left;
            input.height = textRect.height + topadj +
                           parseInt(style.borderBottomWidth) +
                           parseInt(style.paddingBottom);
            input.width = cellRect.width - widthdiff;
            input.hidden = false;

            input.value = this.view.getCellText(row, column);
            var selectText = function selectText() {
              input.select();
              input.inputField.focus();
            }
            setTimeout(selectText, 0);

            this._editingRow = row;
            this._editingColumn = column;

            this.setAttribute("editing", "true");
            return true;
          ]]>
        </body>
      </method>

      <method name="stopEditing">
        <parameter name="accept"/>
        <body>
          <![CDATA[
            if (!this._editingColumn)
              return;

            var input = this.inputField;
            var editingRow = this._editingRow;
            var editingColumn = this._editingColumn;
            this._editingRow = -1;
            this._editingColumn = null;
            if (accept) {
              var value = input.value;
              this.view.setCellText(editingRow, editingColumn, value);
            }

            input.hidden = true;
            input.value = "";
            this.removeAttribute("editing");
          ]]>
        </body>
      </method>

      <method name="_moveByOffset">
        <parameter name="offset"/>
        <parameter name="edge"/>
        <parameter name="event"/>
        <body>
          <![CDATA[
            event.preventDefault();

            if (this.view.rowCount == 0)
              return;

            if (this._isAccelPressed(event) && this.view.selection.single) {
              this.treeBoxObject.scrollByLines(offset);
              return;
            }
   
            var c = this.currentIndex + offset;
            if (offset > 0 ? c > edge : c < edge) {
              if (this.view.selection.isSelected(edge) && this.view.selection.count <= 1)
                return;
              c = edge;
            }
   
            var cellSelType = this._cellSelType;
            if (cellSelType) {
              var column = this.view.selection.currentColumn;
              if (!column)
                return;
   
              while ((offset > 0 ? c <= edge : c >= edge) && !this.view.isSelectable(c, column))
                c += offset;
              if (offset > 0 ? c > edge : c < edge)
                return;
            }
   
            if (!this._isAccelPressed(event))
              this.view.selection.timedSelect(c, this._selectDelay);
            else // Ctrl+Up/Down moves the anchor without selecting
              this.currentIndex = c;
            this.treeBoxObject.ensureRowIsVisible(c);
          ]]>
        </body>
      </method>

      <method name="_moveByOffsetShift">
        <parameter name="offset"/>
        <parameter name="edge"/>
        <parameter name="event"/>
        <body>
          <![CDATA[
            event.preventDefault();

            if (this.view.rowCount == 0)
              return;

            if (this.view.selection.single) {
              this.treeBoxObject.scrollByLines(offset);
              return;
            }

            if (this.view.rowCount == 1 && !this.view.selection.isSelected(0)) {
              this.view.selection.timedSelect(0, this._selectDelay);
              return;
            }
      
            var c = this.currentIndex;
            if (c == -1)
                c = 0;

            if (c == edge) {
              if (this.view.selection.isSelected(c))
                return;
            }
      
            // Extend the selection from the existing pivot, if any
            this.view.selection.rangedSelect(-1, c + offset,
                                             this._isAccelPressed(event));
            this.treeBoxObject.ensureRowIsVisible(c + offset);

          ]]>
        </body>
      </method>

      <method name="_moveByPage">
        <parameter name="offset"/>
        <parameter name="edge"/>
        <parameter name="event"/>
        <body>
          <![CDATA[
            event.preventDefault();

            if (this.view.rowCount == 0)
              return;

            if (this.pageUpOrDownMovesSelection == this._isAccelPressed(event)) {
               this.treeBoxObject.scrollByPages(offset);
               return;
            }

            if (this.view.rowCount == 1 && !this.view.selection.isSelected(0)) {
              this.view.selection.timedSelect(0, this._selectDelay);
              return;
            }

            var c = this.currentIndex;
            if (c == -1)
              return;

            if (c == edge && this.view.selection.isSelected(c)) {
              this.treeBoxObject.ensureRowIsVisible(c);
              return;
            }
            var i = this.treeBoxObject.getFirstVisibleRow();
            var p = this.treeBoxObject.getPageLength();

            if (offset > 0) {
              i += p - 1;
              if (c >= i) {
                 i = c + p;
                 this.treeBoxObject.ensureRowIsVisible(i > edge ? edge : i);
              }
              i = i > edge ? edge : i;

            } else {
              if (c <= i) {
                 i = c <= p ? 0 : c - p;
                 this.treeBoxObject.ensureRowIsVisible(i);
              }
            }
            this.view.selection.timedSelect(i, this._selectDelay);
          ]]>
        </body>
      </method>

      <method name="_moveByPageShift">
        <parameter name="offset"/>
        <parameter name="edge"/>
        <parameter name="event"/>
        <body>
          <![CDATA[
            event.preventDefault();

            if (this.view.rowCount == 0)
              return;

            if (this.view.rowCount == 1 && !this.view.selection.isSelected(0) &&
                !(this.pageUpOrDownMovesSelection == this._isAccelPressed(event))) {
              this.view.selection.timedSelect(0, this._selectDelay);
              return;
            }

            if (this.view.selection.single)
              return;

            var c = this.currentIndex;
            if (c == -1)
              return;
            if (c == edge && this.view.selection.isSelected(c)) {
              this.treeBoxObject.ensureRowIsVisible(edge);
              return;
            }
            var i = this.treeBoxObject.getFirstVisibleRow();
            var p = this.treeBoxObject.getPageLength();

            if (offset > 0) {
              i += p - 1;
              if (c >= i) {
                 i = c + p;
                 this.treeBoxObject.ensureRowIsVisible(i > edge ? edge : i);
              }
              // Extend the selection from the existing pivot, if any
              this.view.selection.rangedSelect(-1, i > edge ? edge : i, this._isAccelPressed(event));

            } else {

              if (c <= i) {
                 i = c <= p ? 0 : c - p;
                 this.treeBoxObject.ensureRowIsVisible(i);
              }
              // Extend the selection from the existing pivot, if any
              this.view.selection.rangedSelect(-1, i, this._isAccelPressed(event));
            }

          ]]>
        </body>
      </method>

      <method name="_moveToEdge">
        <parameter name="edge"/>
        <parameter name="event"/>
        <body>
          <![CDATA[
            event.preventDefault();

            if (this.view.rowCount == 0)
              return;

            if (this.view.selection.isSelected(edge) && this.view.selection.count == 1) {
              this.currentIndex = edge;
              return;
            }

            // Normal behaviour is to select the first/last row
            if (!this._isAccelPressed(event))
              this.view.selection.timedSelect(edge, this._selectDelay);

            // In a multiselect tree Ctrl+Home/End moves the anchor
            else if (!this.view.selection.single)
              this.currentIndex = edge;

            this.treeBoxObject.ensureRowIsVisible(edge);
          ]]>
        </body>
      </method>

      <method name="_moveToEdgeShift">
        <parameter name="edge"/>
        <parameter name="event"/>
        <body>
          <![CDATA[
            event.preventDefault();

            if (this.view.rowCount == 0)
              return;

            if (this.view.rowCount == 1 && !this.view.selection.isSelected(0)) {
              this.view.selection.timedSelect(0, this._selectDelay);
              return;
            }

            if (this.view.selection.single ||
                (this.view.selection.isSelected(edge)) && this.view.selection.isSelected(this.currentIndex))
              return;

            // Extend the selection from the existing pivot, if any.
            // -1 doesn't work here, so using currentIndex instead
            this.view.selection.rangedSelect(this.currentIndex, edge, this._isAccelPressed(event));

            this.treeBoxObject.ensureRowIsVisible(edge);
          ]]>
        </body>
      </method>
      <method name="_handleEnter">
        <parameter name="event"/>
        <body><![CDATA[
          if (this._editingColumn) {
            this.stopEditing(true);
            this.focus();
            return true;
          }

#ifdef XP_MACOSX
          // See if we can edit the cell.
          var row = this.currentIndex;
          if (this._cellSelType) {
            var column = this.view.selection.currentColumn;
            var startedEditing = this.startEditing(row, column);
            if (startedEditing)
              return true;
          }
#endif
          return this.changeOpenState(this.currentIndex);
        ]]></body>
      </method>
    </implementation>
    
    <handlers>
      <handler event="MozMousePixelScroll" preventdefault="true"/>
      <handler event="DOMMouseScroll" preventdefault="true">
        <![CDATA[
          if (this._editingColumn)
            return;
          if (event.axis == event.HORIZONTAL_AXIS)
            return;

          var rows = event.detail;
          if (rows == UIEvent.SCROLL_PAGE_UP)
            this.treeBoxObject.scrollByPages(-1);
          else if (rows == UIEvent.SCROLL_PAGE_DOWN)
            this.treeBoxObject.scrollByPages(1);
          else
            this.treeBoxObject.scrollByLines(rows);
        ]]>
      </handler>
      <handler event="MozSwipeGesture" preventdefault="true">
        <![CDATA[
          // Figure out which row to show
          let targetRow = 0;

          // Only handle swipe gestures up and down
          switch (event.direction) {
            case event.DIRECTION_DOWN:
              targetRow = this.view.rowCount - 1;
              // Fall through for actual action
            case event.DIRECTION_UP:
              this.treeBoxObject.ensureRowIsVisible(targetRow);
              break;
          }
        ]]>
      </handler>
      <handler event="select" phase="target"
               action="if (event.originalTarget == this) this.stopEditing(true);"/>
      <handler event="focus">
        <![CDATA[
          this.treeBoxObject.focused = true;
          if (this.currentIndex == -1 && this.view.rowCount > 0) {
            this.currentIndex = this.treeBoxObject.getFirstVisibleRow();
          }
          if (this._cellSelType && !this.view.selection.currentColumn) {
            var col = this._getNextColumn(this.currentIndex, false);
            this.view.selection.currentColumn = col;
          }
        ]]>
      </handler>
      <handler event="blur" action="this.treeBoxObject.focused = false;"/>
      <handler event="blur" phase="capturing"
               action="if (event.originalTarget == this.inputField.inputField) this.stopEditing(true);"/>
      <handler event="keydown" keycode="VK_RETURN">
        if (this._handleEnter(event)) {
          event.stopPropagation();
          event.preventDefault();
        }
      </handler>
#ifndef XP_MACOSX
      <!-- Use F2 key to enter text editing. -->
      <handler event="keydown" keycode="VK_F2">
        <![CDATA[
          if (!this._cellSelType)
            return;
          var row = this.currentIndex;
          var column = this.view.selection.currentColumn;
          if (this.startEditing(row, column))
            event.preventDefault();
        ]]>
      </handler>
#endif // XP_MACOSX

      <handler event="keydown" keycode="VK_ESCAPE">
        <![CDATA[
          if (this._editingColumn) {
            this.stopEditing(false);
            this.focus();
            event.stopPropagation();
            event.preventDefault();
          }
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_LEFT">
        <![CDATA[
         if (this._editingColumn)
           return;

         var row = this.currentIndex;
         if (row < 0)
           return;

         var cellSelType = this._cellSelType;
         var checkContainers = true;

         var currentColumn;
         if (cellSelType) {
           currentColumn = this.view.selection.currentColumn;
           if (currentColumn && !currentColumn.primary)
             checkContainers = false;
         }

         if (checkContainers) {
           if (this.changeOpenState(this.currentIndex, false)) {
             event.preventDefault();
             return;
           }
           else {
             var parentIndex = this.view.getParentIndex(this.currentIndex);
             if (parentIndex >= 0) {
               if (cellSelType && !this.view.isSelectable(parentIndex, currentColumn)) {
                 return;
               }
               this.view.selection.select(parentIndex);
               this.treeBoxObject.ensureRowIsVisible(parentIndex);
               event.preventDefault();
               return;
             }
           }
         }

         if (cellSelType) {
           var col = this._getNextColumn(row, true);
           if (col) {
             this.view.selection.currentColumn = col;
             this.treeBoxObject.ensureCellIsVisible(row, col);
             event.preventDefault();
           }
         }
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_RIGHT">
        <![CDATA[
         if (this._editingColumn)
           return;

          var row = this.currentIndex;
          if (row < 0)
            return;

          var cellSelType = this._cellSelType;
          var checkContainers = true;

          var currentColumn;
          if (cellSelType) {
            currentColumn = this.view.selection.currentColumn;
            if (currentColumn && !currentColumn.primary)
              checkContainers = false;
          }

          if (checkContainers) {
            if (this.changeOpenState(row, true)) {
              event.preventDefault();
              return;
            }
            else {
              var c = row + 1;
              var view = this.view;
              if (c < view.rowCount &&
                  view.getParentIndex(c) == row) {
                // If already opened, select the first child.
                // The getParentIndex test above ensures that the children
                // are already populated and ready.
                if (cellSelType && !this.view.isSelectable(c , currentColumn)) {
                  var col = this._getNextColumn(c, false);
                  if (col) {
                    this.view.selection.currentColumn = col;
                  }
                }
                this.view.selection.timedSelect(c, this._selectDelay);
                this.treeBoxObject.ensureRowIsVisible(c);
                event.preventDefault();
                return;
              }
            }
          }

          if (cellSelType) {
            var col = this._getNextColumn(row, false);
            if (col) {
              this.view.selection.currentColumn = col;
              this.treeBoxObject.ensureCellIsVisible(row, col);
              event.preventDefault();
            }
          }
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_UP" modifiers="accel any">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveByOffset(-1, 0, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_DOWN" modifiers="accel any">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveByOffset(1, this.view.rowCount - 1, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_UP" modifiers="accel any, shift">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveByOffsetShift(-1, 0, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_DOWN" modifiers="accel any, shift">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveByOffsetShift(1, this.view.rowCount - 1, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_PAGE_UP" modifiers="accel any">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveByPage(-1, 0, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_PAGE_DOWN" modifiers="accel any">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveByPage(1, this.view.rowCount - 1, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_PAGE_UP" modifiers="accel any, shift">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveByPageShift(-1, 0, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_PAGE_DOWN" modifiers="accel any, shift">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveByPageShift(1, this.view.rowCount - 1, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_HOME" modifiers="accel any">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveToEdge(0, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_END" modifiers="accel any">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveToEdge(this.view.rowCount - 1, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_HOME" modifiers="accel any, shift">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveToEdgeShift(0, event);
        ]]>
      </handler>
      <handler event="keydown" keycode="VK_END" modifiers="accel any, shift">
        <![CDATA[
          if (this._editingColumn)
            return;
          _moveToEdgeShift(this.view.rowCount - 1, event);
        ]]>
      </handler>
      <handler event="keypress">
        <![CDATA[
         if (this._editingColumn)
           return;

         if (event.charCode == ' '.charCodeAt(0)) {
           var c = this.currentIndex;
           if (!this.view.selection.isSelected(c) ||
               (!this.view.selection.single && this._isAccelPressed(event))) {
             this.view.selection.toggleSelect(c);
             event.preventDefault();
           }
         }
         else if (!this.disableKeyNavigation && event.charCode > 0 &&
                  !event.altKey && !this._isAccelPressed(event) &&
                  !event.metaKey && !event.ctrlKey) {
           var l = this._keyNavigate(event);
           if (l >= 0) {
             this.view.selection.timedSelect(l, this._selectDelay);
             this.treeBoxObject.ensureRowIsVisible(l);
           }
           event.preventDefault();
         }
         ]]>
      </handler>
    </handlers>    
  </binding>

  <binding id="treecols" role="xul:treecolumns">
    <resources>
      <stylesheet src="chrome://global/skin/tree.css"/>
    </resources>
    <content orient="horizontal">
      <xul:hbox class="tree-scrollable-columns" flex="1">
        <children includes="treecol|splitter"/>
      </xul:hbox>
      <xul:treecolpicker class="treecol-image" fixed="true" xbl:inherits="tooltiptext=pickertooltiptext"/>
    </content>
    <implementation>
      <constructor><![CDATA[
        // Set resizeafter="farthest" on the splitters if nothing else has been
        // specified.
        Array.forEach(this.getElementsByTagName("splitter"), function (splitter) {
          if (!splitter.hasAttribute("resizeafter"))
            splitter.setAttribute("resizeafter", "farthest");
        });
      ]]></constructor>
    </implementation>
  </binding>

  <binding id="treerows" extends="chrome://global/content/bindings/tree.xml#tree-base">
    <content>
      <xul:hbox flex="1" class="tree-bodybox">
        <children/>
      </xul:hbox>
      <xul:scrollbar height="0" minwidth="0" minheight="0" orient="vertical" xbl:inherits="collapsed=hidevscroll" style="position:relative; z-index:2147483647;"/>
    </content>
    <handlers>
      <handler event="underflow">
        <![CDATA[
          // Scrollport event orientation
          // 0: vertical
          // 1: horizontal
          // 2: both (not used)
          var tree = document.getBindingParent(this);
          if (event.detail == 1)
            tree.setAttribute("hidehscroll", "true");
          else if (event.detail == 0)
            tree.setAttribute("hidevscroll", "true");
          event.stopPropagation();
        ]]>
      </handler>
      <handler event="overflow">
        <![CDATA[
          var tree = document.getBindingParent(this);
          if (event.detail == 1)
            tree.removeAttribute("hidehscroll");
          else if (event.detail == 0)
            tree.removeAttribute("hidevscroll");
          event.stopPropagation();
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="treebody" extends="chrome://global/content/bindings/tree.xml#tree-base">
    <implementation>
      <constructor>
        if ("_ensureColumnOrder" in this.parentNode)
          this.parentNode._ensureColumnOrder();
      </constructor>

      <field name="_lastSelectedRow">
        -1
      </field>
    </implementation>
    <handlers>
      <!-- If there is no modifier key, we select on mousedown, not
           click, so that drags work correctly. -->
      <handler event="mousedown" clickcount="1">
      <![CDATA[
         if (this.parentNode.disabled)
           return;
         if (((!this._isAccelPressed(event) ||
             !this.parentNode.pageUpOrDownMovesSelection) &&
             !event.shiftKey && !event.metaKey) ||
             this.parentNode.view.selection.single) {
           var b = this.parentNode.treeBoxObject;
           var cell = b.getCellAt(event.clientX, event.clientY);
           var view = this.parentNode.view;

           // save off the last selected row
           this._lastSelectedRow = cell.row;

           if (cell.row == -1)
             return;

           if (cell.childElt == "twisty")
             return;

           if (cell.col) {
             if (cell.col.cycler) {
               view.cycleCell(cell.row, cell.col);
               return;
             } else if (cell.col.type == Components.interfaces.nsITreeColumn.TYPE_CHECKBOX) {
               if (this.parentNode.editable && cell.col.editable &&
                   view.isEditable(cell.row, cell.col)) {
                 var value = view.getCellValue(cell.row, cell.col);
                 value = value == "true" ? "false" : "true";
                 view.setCellValue(cell.row, cell.col, value);
                 return;
               }
             }
           } 

           var cellSelType = this.parentNode._cellSelType;
           if (cellSelType == "text" && cell.childElt != "text" && cell.childElt != "image")
             return;

           if (cellSelType) {
             if (!cell.col.selectable ||
                 !view.isSelectable(cell.row, cell.col)) {
               return;
             }
           }

           if (!view.selection.isSelected(cell.row)) {
             view.selection.select(cell.row);
             b.ensureRowIsVisible(cell.row);
           }

           if (cellSelType) {
             view.selection.currentColumn = cell.col;
           }
         }
      ]]>
      </handler>

      <!-- On a click (up+down on the same item), deselect everything
           except this item. -->
      <handler event="click" button="0" clickcount="1">
      <![CDATA[
        if (this.parentNode.disabled)
          return;
        var b = this.parentNode.treeBoxObject;
        var cell = b.getCellAt(event.clientX, event.clientY);
        var view = this.parentNode.view;

        if (cell.row == -1)
          return;

        if (cell.childElt == "twisty") {
          if (view.selection.currentIndex >= 0 &&
              view.isContainerOpen(cell.row)) {
            var parentIndex = view.getParentIndex(view.selection.currentIndex);
            while (parentIndex >= 0 && parentIndex != cell.row)
              parentIndex = view.getParentIndex(parentIndex);
            if (parentIndex == cell.row) {
              var parentSelectable = true;
              if (this.parentNode._cellSelType) {
                var currentColumn = view.selection.currentColumn;
                if (!view.isSelectable(parentIndex, currentColumn))
                  parentSelectable = false;
              }
              if (parentSelectable)
                view.selection.select(parentIndex);
            }
          }
          this.parentNode.changeOpenState(cell.row);
          return;
        }

        if (! view.selection.single) {
          var augment = this._isAccelPressed(event);
          if (event.shiftKey) {
            view.selection.rangedSelect(-1, cell.row, augment);
            b.ensureRowIsVisible(cell.row);
            return;
          }
          if (augment) {
            view.selection.toggleSelect(cell.row);
            b.ensureRowIsVisible(cell.row);
            view.selection.currentIndex = cell.row;
            return;
          }
        }

        /* We want to deselect all the selected items except what was
          clicked, UNLESS it was a right-click.  We have to do this
          in click rather than mousedown so that you can drag a
          selected group of items */

        if (!cell.col) return;

        // if the last row has changed in between the time we 
        // mousedown and the time we click, don't fire the select handler.
        // see bug #92366
        if (!cell.col.cycler && this._lastSelectedRow == cell.row &&
            cell.col.type != Components.interfaces.nsITreeColumn.TYPE_CHECKBOX) {

          var cellSelType = this.parentNode._cellSelType;
          if (cellSelType == "text" && cell.childElt != "text" && cell.childElt != "image")
            return;

          if (cellSelType) {
            if (!cell.col.selectable ||
                !view.isSelectable(cell.row, cell.col)) {
              return;
            }
          }

          view.selection.select(cell.row);
          b.ensureRowIsVisible(cell.row);

          if (cellSelType) {
            view.selection.currentColumn = cell.col;
          }
        }
      ]]>
      </handler>

      <!-- double-click -->
      <handler event="click" clickcount="2">
      <![CDATA[
        if (this.parentNode.disabled)
          return;
        var tbo = this.parentNode.treeBoxObject;
        var view = this.parentNode.view;
        var row = view.selection.currentIndex;

        if (row == -1)
          return;

        var cell = tbo.getCellAt(event.clientX, event.clientY);

        if (cell.childElt != "twisty")
          this.parentNode.startEditing(row, cell.col);

        if (this.parentNode._editingColumn || !view.isContainer(row))
          return;

        // Cyclers and twisties respond to single clicks, not double clicks
        if (cell.col && !cell.col.cycler && cell.childElt != "twisty")
          this.parentNode.changeOpenState(row);
      ]]>
      </handler>
      
    </handlers>
  </binding>

  <binding id="treecol-base" role="xul:treecolumnitem"
           extends="chrome://global/content/bindings/tree.xml#tree-base">
    <implementation>
      <constructor>
        this.parentNode.parentNode._columnsDirty = true;
      </constructor>

      <property name="ordinal">
        <getter><![CDATA[
          var val = this.getAttribute("ordinal");
          return "" + (val == "" ? 1 : (val == "0" ? 0 : parseInt(val)));
        ]]></getter>
        <setter><![CDATA[
          this.setAttribute("ordinal", val);
          return val;
        ]]></setter>
      </property>
      
      <property name="_previousVisibleColumn">
        <getter><![CDATA[
          var sib = this.boxObject.previousSibling;
          while (sib) {
            if (sib.localName == "treecol" && sib.boxObject.width > 0 && sib.parentNode == this.parentNode)
              return sib;
            sib = sib.boxObject.previousSibling;
          }
          return null;
        ]]></getter>
      </property>

      <method name="_onDragMouseMove">
        <parameter name="aEvent"/>
        <body><![CDATA[
          var col = document.treecolDragging;
          if (!col) return;

          // determine if we have moved the mouse far enough
          // to initiate a drag
          if (col.mDragGesturing) {
            if (Math.abs(aEvent.clientX - col.mStartDragX) < 5 &&
                Math.abs(aEvent.clientY - col.mStartDragY) < 5) {
              return;
            } else {
              col.mDragGesturing = false;
              col.setAttribute("dragging", "true");
              window.addEventListener("click", col._onDragMouseClick, true);
            }
          }
                    
          var pos = {};
          var targetCol = col.parentNode.parentNode._getColumnAtX(aEvent.clientX, 0.5, pos);
          
          // bail if we haven't mousemoved to a different column
          if (col.mTargetCol == targetCol && col.mTargetDir == pos.value)
            return;

          var tree = col.parentNode.parentNode;
          var sib;
          var column;
          if (col.mTargetCol) {
            // remove previous insertbefore/after attributes
            col.mTargetCol.removeAttribute("insertbefore");
            col.mTargetCol.removeAttribute("insertafter");
            column = tree.columns.getColumnFor(col.mTargetCol);
            tree.treeBoxObject.invalidateColumn(column);
            sib = col.mTargetCol._previousVisibleColumn;
            if (sib) {
              sib.removeAttribute("insertafter");
              column = tree.columns.getColumnFor(sib);
              tree.treeBoxObject.invalidateColumn(column);
            }
            col.mTargetCol = null;
            col.mTargetDir = null;
          }
          
          if (targetCol) {
            // set insertbefore/after attributes
            if (pos.value == "after") {
              targetCol.setAttribute("insertafter", "true");
            } else {
              targetCol.setAttribute("insertbefore", "true");
              sib = targetCol._previousVisibleColumn;
              if (sib) {
                sib.setAttribute("insertafter", "true");
                column = tree.columns.getColumnFor(sib);
                tree.treeBoxObject.invalidateColumn(column);
              }
            }
            column = tree.columns.getColumnFor(targetCol);
            tree.treeBoxObject.invalidateColumn(column);
            col.mTargetCol = targetCol;
            col.mTargetDir = pos.value;
          }
        ]]></body>        
      </method>

      <method name="_onDragMouseUp">
        <parameter name="aEvent"/>
        <body><![CDATA[
          var col = document.treecolDragging;
          if (!col) return;
          
          if (!col.mDragGesturing) {
            if (col.mTargetCol) {
              // remove insertbefore/after attributes
              var before = col.mTargetCol.hasAttribute("insertbefore");
              col.mTargetCol.removeAttribute(before ? "insertbefore" : "insertafter");

              var sib = col.mTargetCol._previousVisibleColumn;
              if (before && sib) {
                sib.removeAttribute("insertafter");
              }

              // Move the column only if it will result in a different column
              // ordering
              var move = true;

              // If this is a before move and the previous visible column is
              // the same as the column we're moving, don't move
              if (before && col == sib) {
                move = false;
              }
              else if (!before && col == col.mTargetCol) {
                // If this is an after move and the column we're moving is
                // the same as the target column, don't move.
                move = false;
              }

              if (move) {
                col.parentNode.parentNode._reorderColumn(col, col.mTargetCol, before);
              }

              // repaint to remove lines
              col.parentNode.parentNode.treeBoxObject.invalidate();
  
              col.mTargetCol = null;
            }
          } else
            col.mDragGesturing = false;
                    
          document.treecolDragging = null;
          col.removeAttribute("dragging");
          
          window.removeEventListener("mousemove", col._onDragMouseMove, true);
          window.removeEventListener("mouseup", col._onDragMouseUp, true);
          // we have to wait for the click event to fire before removing
          // cancelling handler
          var clickHandler = function(handler) { 
            window.removeEventListener("click", handler, true);
          };
          window.setTimeout(clickHandler, 0, col._onDragMouseClick);
        ]]></body>        
      </method>

      <method name="_onDragMouseClick">
        <parameter name="aEvent"/>
        <body><![CDATA[
          // prevent click event from firing after column drag and drop
          aEvent.stopPropagation();
          aEvent.preventDefault();
        ]]></body>        
      </method>
    </implementation>
    
    <handlers>
      <handler event="mousedown" button="0"><![CDATA[
        if (this.parentNode.parentNode.enableColumnDrag) {
          var xulns = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          var cols = this.parentNode.getElementsByTagNameNS(xulns, "treecol");
          
          // only start column drag operation if there are at least 2 visible columns
          var visible = 0;
          for (var i = 0; i < cols.length; ++i)
            if (cols[i].boxObject.width > 0) ++visible;
            
          if (visible > 1) {
            window.addEventListener("mousemove", this._onDragMouseMove, true);
            window.addEventListener("mouseup", this._onDragMouseUp, true);
            document.treecolDragging = this;
            this.mDragGesturing = true;
            this.mStartDragX = event.clientX;
            this.mStartDragY = event.clientY;
          }
        }
      ]]></handler>
      <handler event="click" button="0" phase="target">
        <![CDATA[
          if (event.target != event.originalTarget)
            return;

#ifdef XP_WIN
          // On Windows multiple clicking on tree columns only cycles one time
          // every 2 clicks.
          if (event.detail % 2 == 0)
            return;
#endif

          var tree = this.parentNode.parentNode;
          var column = tree.columns.getColumnFor(this);
          tree.view.cycleHeader(column);
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="treecol" extends="chrome://global/content/bindings/tree.xml#treecol-base">
    <content>
      <xul:label class="treecol-text" xbl:inherits="crop,value=label" flex="1" crop="right"/>
      <xul:image class="treecol-sortdirection" xbl:inherits="sortDirection,hidden=hideheader"/>
    </content>
  </binding>

  <binding id="treecol-image" extends="chrome://global/content/bindings/tree.xml#treecol-base">
    <content>
      <xul:image class="treecol-icon" xbl:inherits="src"/>
    </content>
  </binding>

  <binding id="columnpicker" display="xul:button" role="xul:button"
           extends="chrome://global/content/bindings/tree.xml#tree-base">
    <content>
      <xul:image class="tree-columnpicker-icon"/>
      <xul:menupopup anonid="popup">
        <xul:menuseparator anonid="menuseparator"/>
        <xul:menuitem anonid="menuitem" label="&restoreColumnOrder.label;"/>
      </xul:menupopup>
    </content>
    
    <implementation>
      <method name="buildPopup">
        <parameter name="aPopup"/>
        <body>
          <![CDATA[
            // We no longer cache the picker content, remove the old content.
            while (aPopup.childNodes.length > 2)
              aPopup.removeChild(aPopup.firstChild);

            var refChild = aPopup.firstChild;

            var tree = this.parentNode.parentNode;
            for (var currCol = tree.columns.getFirstColumn(); currCol;
                 currCol = currCol.getNext()) {
              // Construct an entry for each column in the row, unless
              // it is not being shown.
              var currElement = currCol.element;
              if (!currElement.hasAttribute("ignoreincolumnpicker")) {
                var popupChild = document.createElement("menuitem");
                popupChild.setAttribute("type", "checkbox");
                var columnName = currElement.getAttribute("display") ||
                                 currElement.getAttribute("label");
                popupChild.setAttribute("label", columnName);
                popupChild.setAttribute("colindex", currCol.index);
                if (currElement.getAttribute("hidden") != "true")
                  popupChild.setAttribute("checked", "true");
                if (currCol.primary)
                  popupChild.setAttribute("disabled", "true");
                aPopup.insertBefore(popupChild, refChild);
              }
            }

            var hidden = !tree.enableColumnDrag;
            const anonids = ["menuseparator", "menuitem"];
            for (var i = 0; i < anonids.length; i++) {
              var element = document.getAnonymousElementByAttribute(this, "anonid", anonids[i]);
              element.hidden = hidden;
            }
          ]]>
        </body>
      </method>
    </implementation>

    <handlers>
      <handler event="command">
        <![CDATA[
          if (event.originalTarget == this) {
            var popup = document.getAnonymousElementByAttribute(this, "anonid", "popup");
            this.buildPopup(popup);
            popup.showPopup(this, -1, -1, "popup", "bottomright", "topright");
          }
          else {
            var tree = this.parentNode.parentNode;
            tree.stopEditing(true);
            var menuitem = document.getAnonymousElementByAttribute(this, "anonid", "menuitem");
            if (event.originalTarget == menuitem) {
              tree.columns.restoreNaturalOrder();
              tree._ensureColumnOrder();
            }
            else {
              var colindex = event.originalTarget.getAttribute("colindex");
              var column = tree.columns[colindex];
              if (column) {
                var element = column.element;
                if (element.getAttribute("hidden") == "true")
                  element.setAttribute("hidden", "false");
                else
                  element.setAttribute("hidden", "true");
              }
            }
          }
        ]]>
      </handler>
    </handlers>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:38 $"/>
        <language type="tr"/>
    </identity>
</ldml>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Twitter</ShortName>
<Description>Realtime Twitter Search</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAAAAAALAgAAJgAAACAgAAAAAAAAQQQAADECAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIBgAAAB/z/2EAAAHSSURBVDjLfVO/axRREP6SS0ihlv4FQpoYWxHyHxgCsUxhmToBS4tF7NLZWaiIEHLv7d5dJNEQ0tgYEAmIjeAfYC57++7MGbzLjxu/Nxt27zZrBoadnZnvm3kz7wEqMpZqmdAfBBMIZBzGVGCkorbXq4kFp/yPtBgPZCJzZvYQuNZ+jKhVo75G2LyHVz9uoeFmc6bILaHaepv9v/w6iRcypXbonmNPBB9OBbv82tYfmPgn7NHTnKAaP8E+g8Ztot68k/nXDm8ooNEVhHEP1vXROBbUf/M/Wc0Jwl8zsEkHOxcMtE6Y+A42nodpLtLfR9QWRMmA9jm2eh78aXQY4eF9VvjCgKDWEewM2PIZQc4nD9Sf6hk+sohNqorzW0kN91BBdYKtO9dE/00JZITA50XxsxTHlWarqMYBh/O3UPGqrednx7ox3o+UhbIRT7O1BO9PfIsXI5V9J34WvrqN94buwFi+b3N0k0nrCjAFAp1+Nz1Czd3N2y8Tm6ywYk9JTHKqk/cD9cM17YW89WExbo6Ja1zhvgK3+4Itql+rt8PkO1f6oBysBN3brLrMVhs84wHJvpHoMwnf8CI9ygZd3nbJgymrMvxeSoLjmlCsIJf+a17lP6juZmUWkMzvAAAAAElFTkSuQmCCiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAECElEQVRYw+1XS2gTURS9ia0/EMSCCC4siCIKrly4UVwIrgRR3KgbXQmCCiIiCha7EQRR6cIupHShSeZjf6lttdWFgqBRBPGDKIqF1mQ+1Wp/SZvnvXfmTWfMpJ3U0pUPHplJ3rv33HO/Afi/5nPViTjuKm8rYlFlAoSI8a500R1SGLYUZRH+Hvee6+qqygvxW1KJ1XLd+74aUuY+0OzjoHw/BElj4zQQHxv0HDBUvjR9WQlNYmnJhSjK9dxFUC0LOsYE3M8LSI8LUKw8AmoG5ecqPtP8vgZ04zKeO+jqjUtBDi2qWY+71xPaKKpnpF0uzUpCnxDQOixQ+BSo9iR/3vsh4CF+r5of8D3F75r9udQAKUwx++AJXkhZCe9QBkGEuUSC1swTjhK0VrUmEYzw7SKCyUPrLwEP8IxufQN9aCfKPwCJwdq/lCPluvUG2n4jhQW8bD6Hu+amABvSd/LOTbEENOMjdIyicLuA1om/ADhbMqIZn/DMOMq+7iqPBanUzWfQOUGUjUFnnj5H0WdnQOlfFoxssdix3tjGgnWbrCuGKvdA4LmuSQJ6s9SN0zFwg6lS7Qmms+WngK4pEvAVg+w83MltCAAhAHSGFMwEgGQRq2quwZe2cShJkaYvtey39hEHMfsQL7cjxd1F4dBnPWUKVeMwaLmTkRggGd1oiJI9GxLcLg2NA8s5DTXzCKePbjtBJAVoVoGjmFxEwsgiCi5tFuoDDFinHcb9xWg6CBcjpS9ReReCeF9GOL5TsCEYhRkSs26HmSLXh2R2f8DlJS7Q7BZOwyhWzeZ3P2hijtJRG9wSXuQkIj27m1OKKKPUiQIiCv1ptF4x33rUh/Yb+aVqN8BjIf07HwDy0EPFzU2/ck0rgCpln8MgtOcBgOOiFizRSWt7aQCWA0GHdesSBuOAm+fFOQIoOFXVeBRqaGnvlsGIed5LwWiO/LP11KASg7tmt97fnRoz1Xj5NXc4WQP0Sliw6d4EN6mUdStyew8cbB6uQWGdXL+pPHMrjQLCVe40tHdo1NJoQ47X5XBnfKUykduBQ0U9+jEbKR5IOTc0IwfJb+tnjvwoq+3DCmxEV1iwvzyHtlzbSTnVHMRKuTm6crK8AcelDrGc/a/0r4WUsRcF3ebWzC4YCqt8Rbdo5XmO4IZj9IGSW+PFUuSVyu7BeeABIrdZMNFIfiSrCQQFouwDNHxQLyBQdK6nSPOfgftUSXWtaOlD67BkXkCLXrFV1IYJBAUifcpnspQHFjyjmi+4y8nBs6KIL1cJuRZkt6K1xzCYrvFAqdtptDCNz3dxX8V91Gsufqvn8r/CByJemd/kvJiprui/RAQkMaZR/r1i4W6a0rP/N/gXi6OvmDvBLoiyBV1/AN29Cs9hVFoUAAAAAElFTkSuQmCC</Image>
<Image width="65" height="26">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAYAAADovjFxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQ0MDYxRTY0QjUyNTExRTNCNzdEOTU4N0NCMjI3MEFDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ0MDYxRTY1QjUyNTExRTNCNzdEOTU4N0NCMjI3MEFDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDcyQzJENkJCNTI1MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDcyQzJENkNCNTI1MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4/Os9TAAADvUlEQVR42uyYWWxNURSGz723OiotMbU1N25jKNImIhENfSAh8SDxQgQP7QPxQhAVU1DihYjxwRBCCAktaohZE6EkNIqUmtJWq0LV2On6V/OfZNnO6RXJfXJW8uXuffc9Z5/9r7XX2uf6QqGQ9b+bzxPBE8ETwRPBE+F3i8q+bwXxuRhcAmciJTbYBmaDXWA16AMKwGOw1+GaANgAosEK0BKxSMgqC73G5wD200B1BOYZCcqNBR4Ds9ifAEqNa5aBLWyvA2sjJYJfCSA2MELz1IPPbIsYsgcz1Phwh2v0dxmR3A4iQpPql0dQhCSQCzIpQkCNP3W45rtqv4poTjD6a8Bb7mGhDZSASi5gDjgMrqprZoJp3Otl6vuFIIv7ugqMAWPBG/Cc97Ytj2MBjp8yRJjIvCXjX8Ah0MyxrmAuyGb+qAHF4JbDehPAFNCf95J7nJScIGGa2IlQX8EwcIVh2Qh6chF9QS1/9wKksx1U3j0OFvA+Yh9AbwqZ4zLndD7obpfx62ASf3OXz2HaAc5r21RwkAlZW7X/L6IlgaHcyn40sbgY2+JUu59qy297qb54LsbwtGmDwoyn8LNECVABzoF37M8HK1VOKXEQQCzV3A5lzBE+9kNUVCbooSLDPlw0GxFj20/V/qEEtBjOZk6o4MP7uR33cGvaJiH+jOPfQD631wiO17H8vuTWPMI1SEXZBJYb67zJSG6XuaKMvJCrsrhleDOG7TYuzFxsi4sIfiWqLazPEEEWddvF2xbDuMAYX6TaySyx8RTZnq8LGKWqizhtslmO/cqrYuNcwq+dN7Q4kVMG7+YiQpQxh5+CaWEyHebU0TPapbLpw1i82m62Sb5oUFum1uE80vGAD8F49o+CreCTqhAVDJ8aLlSS6D6wHyxR90pjCF8G69X3ku3fq34sF1jB5Ca2mXmjjp6UcL7ICLEY4jLnA14rz3kBLFUleAZ4Qof5+Gk7IynciVEuPh0mOQ7l4aX4H8pwOhfXpLaTbK3BLL1OJiVwHj3nlPmreN9HPI2K3WNOa2GUtPI4XkknJPM0nOYkgsVElN/JQlaBjSxNOS7bxanS7GB9DxoHokR6XB+Nnd43gi4HKV2Z6jt5bkmUQyhIgJER+8dLSkpex5H8LPjIZBRHNZtJJcO7gQmqO70jW0neOwopYAyv9/EwVKgyfCM9IKVvJzjP70vp1RSW4lZGjIh+h2cKealLZUiHuJAicIL3LWJJtsft5/5O596g6JIct4Nr3qu093+CJ4IngieCJ0J4+yXAANopCw9hh0hVAAAAAElFTkSuQmCC</Image>
<Image width="130" height="52">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAYAAABGkOCVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjg5QzlEREI0QjUyNjExRTNCNzdEOTU4N0NCMjI3MEFDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjg5QzlEREI1QjUyNjExRTNCNzdEOTU4N0NCMjI3MEFDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODlDOUREQjJCNTI2MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODlDOUREQjNCNTI2MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5Ln/UEAAAHKElEQVR42uxca2wVRRTe2wdULUVARDQIkqCmARGKhQBqeBsCKkiImmiML0xUFEs0BImIaDQSH2gQlB9iQlQQUAHFF5QWQbDiI4oIiBCgIE9BaAv03us59rsyjjOzO7s3mC3zJV/a7szszsx+c+acswOJdDrtOTjkuClwcEJwcEJwcEJwcEJwcEJwcEJwcEJwcEJwcEJwcEJwcEJwiIC8Ht/883tXYhFxPfFYzMc1jXgXsY44g/iUok47YgfiVuKukM8pJeYS1zQWi7CI+B2xAhNzTYzHNI9YRjyXeAFxikIIz2GcPN7fiJMtn3EhcS24mriZ2CnOQkiUVKV5kh6Xrh/HYA/GbDy9iV8qrqdh7Y4SRxPfVdQZRlwa8DlfE3tI17YRLyWejKtFeERxvSlxUAzHc5lO8BAC43ZNnTsDPqOjQgQetpnucd4a8jVlBTEcT6Xm+l7iHvye0tTJD/iMFoayc+IshDpNWRxN3BbiWMX1ewQB6MZVH/AZpnon4yqEvEYYCb1C3EQcSkwS5wf06s/oM3smIeyL8bg+AW1Qk4Xn7mmMQigh7kacrHPAThA3aNpmnK85xHU+/RhCHEE8QJyNkM4EzhH0JP5MfFFR3o84Cqb6LeRG/NCW2FkaL4+xlvhLwPnsC0c7V2ifgkD2+rRl/+Jq9KE98Ty04WjkJ+KqCGLlCLAl3nda6FsNrOff4eMR+tksgpi24sWUCy91mUVoxnH+JCl0LcHgVVgKsy+GcgOJR/D3/cRXpTbDiUvw+wLiSMsxcr7gerwY7luVZftaCHaioqw15mAUXr7JQi8kPk3cEeCZFxPHEQcjrNUteg63R2RDCB4sQ3M4nvwCi6XyzeiMjPZQvIz3YSFkDCB+rrg+gfgs8RIIUxU1tMXqDCOEjOBKEaJuDDlPY4ivC39fjgXUxuIeRyHsckOdkbCEQaOYZdn61tAEpprRSlHeSrPFFBvUrEIXn/xBqab8fJ/VFgRXeQ3Zyh0R7iHmKgohrjaW9+B2K4h9NOUTIXabUPa6bH50+lMwgzLqLEOxGsvw7Dh+Jg0RQW4WxlgP0YfFMcnqFUa41xfY90X0J04Nca9UtoSwUXDI0hahWcoylEv5XE8aylMRx/gmzHK7CPd4RnAqB2jq8NZ3I7bSbsSHsfXKYKf0SenaeyH7Nd0UNfC+etjgZCSwQtejs3HHMURJORhbZoxszT4lPoRrpgxkNaxZriRqjhqexypm6NLcy73/pvb5Y+BK4reK+nyf8bCIN3vmrOdOjCVXiog+JpaZhMADf+cMyqksg+fuh6ShbLSn/uglo6fmOvtSr3mnvotknqfbEovgN1Xh2brt9DYk1lKmPELC4J02RiR8/Aw/5ATwk0xoanCGu4I2aI2fnTXlg2BRfAeVb+hwGORonKykxeSfsHxZORH751k4kyZf46yAQmiSRWFvF6yDjF+DiCAzKbqM161ZXHGtNNfzDOGejThTFv2q1ZT3Cji+Q4ayawP6Itmytuw3bDBsWYeC3ohfxDqNJ8xJiXulBEgQ7FOYvkI4S+Ol62WGfEE/xMsi7tPU3+1j9sUVr0sGcXJruqf+eik7XXs1YuUMKZ9YWuXjY+zUtGdnkjOgzX3GwthGfFsYmyrSyrcRAocrN2nKZ6FsJQaQUEzufoQtBwSVlijuVYY9dC5MIx+IGWbo22dew+fjSkwaHy+7QlN3taVTOFlT9qDXkJKdj1WbiSC2o98Z61OpmbNClC2EA5fCHNfheuabC5d111i2l/4Xx6mkKl2EMDEKDsIT3gLzWH4ax8AvqSMmka3YAs0q5BWfOaTKH7U6WD7ne6/hm8Z+WKvlIfo6FVajm6f/ELYJQvwR7yUhLcAErO5aaUHyPFyk6POVQX0E/tbwRMSXwRmumfidrccPp1EID4RIFt0d4jnszU/D7ys0gvMDnw0thtVcpKnDiaSJMPsfeQ0f2ZYIXEz8Cu3PztYkZjzoKV6wT7Um9BX24RGnSQSLvVNfFRkFBv8gT9qLJ4V43kDhd845/B7iHjcIPlh1hLFz9nGCjz/QxFYIjP4BkyE6HBFW5lZ0tN6ive1BmDUKwe2y8PbZTM+wfOYf0t99QrzMaqn9zghz3kPY+vKjhNVixcNY1bNCduplyXP9AE7jlgBtK7DPDw8Y8vBhl96KkKnCUx9Lm+2dOq8ggs8uPOoFP/DxgiJOZwc26Gmoo3AkRc+/i2d/mioDsd08RflcG2dRdb0UeYReeEEFPpaAH/iYQWzs/Q/FPttSCPnWIuL4UKjfQqjP/2ikGSzLdtSf45nPIBagzhC044kf45nPJPI/hLkDbTopkjN7IIKZPtvGLRB/O2mF1iOyGW8IX/thzkvR3pT+r4EPMU6KAN+AlUzinYwNLAT3/yw6WO0hDk4IDk4IDk4IDk4IDk4IDk4IDk4IDk4IbgocnBAcnBAc/o2/BBgAWu+TFRGzndoAAAAASUVORK5CYII=</Image>
<Url type="text/html" method="GET" template="https://twitter.com/search" rel="searchform">
  <Param name="q" value="{searchTerms}"/>
  <Param name="partner" value="Firefox"/>
  <Param name="source" value="desktop-search"/>
</Url>
</SearchPlugin>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<merge xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:tools="http://schemas.android.com/tools"
       xmlns:gecko="http://schemas.android.com/apk/res-auto"
       tools:context=".BrowserApp">

    <org.mozilla.gecko.widget.FaviconView android:id="@+id/icon"
                                          android:layout_width="@dimen/favicon_bg"
                                          android:layout_height="@dimen/favicon_bg"
                                          android:layout_margin="16dp"
                                          tools:background="@drawable/favicon"/>

    <LinearLayout android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:layout_gravity="center_vertical"
                  android:orientation="vertical"
                  android:paddingRight="25dp">

        <org.mozilla.gecko.widget.FadedSingleColorTextView
                android:id="@+id/title"
                style="@style/Widget.TwoLinePageRow.Title"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                gecko:fadeWidth="30dp"
                tools:text="This is a long test title"/>

        <TextView android:id="@+id/url"
                  style="@style/Widget.TwoLinePageRow.Url"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:drawablePadding="5dp"
                  android:maxLength="1024"
                  tools:text="http://test.com/test"
                  tools:drawableLeft="@drawable/ic_url_bar_tab"
                  tools:drawableRight="@drawable/ic_url_bar_star"/>

    </LinearLayout>
</merge>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="twq"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="tzm"/> 
		<script type="Latn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="tzm"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:40 $"/>
        <language type="uk"/>
    </identity>
    <rbnf>
        <rulesetGrouping type="SpelloutRules">
            <ruleset type="lenient-parse" access="private">
                <rbnfrule value="0">&amp;[last primary ignorable ] ←← ' ' ←← ',' ←← '-' ←← '­';</rbnfrule>
            </ruleset>
        </rulesetGrouping>
 
   </rbnf>
</ldml>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "xhtml1-transitional.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
<title>NIST DOM HTML Test - ULIST</title>
</head>
<body onload="parent.loadComplete()">
<ol>
<li>EMP0001
<ul compact="compact" type="disc">
<li>Margaret Martin
<dl>
<dd>Accountant</dd>
<dd>56,000</dd>
<dd>Female</dd>
<dd>1230 North Ave. Dallas, Texas 98551</dd>
</dl>
</li>
</ul>
</li>
<li>EMP0002
<ul>
<li>Martha Raynolds
<dl>
<dd>Secretary</dd>
<dd>35,000</dd>
<dd>Female</dd>
<dd>1900 Dallas Road. Dallas, Texas 98554</dd>
</dl>
</li>
</ul>
</li>
</ol>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<searchresults total_results="1">
  <addon id="5612">
  <name>Unsigned Test XPI</name>
  <type id="1">Extension</type>
  <guid>unsigned-xpi@tests.mozilla.org</guid>
  <slug>unsigned-xpi</slug>
  <version>1.0</version>

  <compatible_applications><application>
      <name>Firefox</name>
      <application_id>1</application_id>
      <min_version>3.6</min_version>
      <max_version>*</max_version>
      <appID>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</appID>
    </application></compatible_applications>
  <all_compatible_os><os>ALL</os></all_compatible_os>

  <install os="ALL" size="452">http://127.0.0.1:4567/addons/unsigned.xpi</install>
    <created epoch="1252903662">
      2009-09-14T04:47:42Z
    </created>
    <last_updated epoch="1315255329">
      2011-09-05T20:42:09Z
    </last_updated>
    </addon>
</searchresults>
<?xml version="1.0"?>
<?xml-stylesheet href="unstyled-frame.css" type="text/css"?>
<!-- The root element is forced to display:block, so look at its child -->
<root><child/></root>
<?xml version="1.0"?>
<?xml-stylesheet href="unstyled.css" type="text/css"?>
<root><child/></root>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings SYSTEM "chrome://mozapps/locale/update/updates.dtd">

<bindings id="updatesBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">
  
  <binding id="remotecontent">
    <content>
      <xul:vbox flex="1" class="loadingBox">
        <xul:hbox align="start">
          <xul:image class="remoteLoadingThrobber" xbl:inherits="state"/>
          <xul:vbox flex="1">
            <xul:description flex="1" class="remoteLoadingMessage" crop="right"/>
          </xul:vbox>
        </xul:hbox>
      </xul:vbox>
      <xul:vbox flex="1">
        <xul:browser class="remoteContent" type="content" disablehistory="true"
                     flex="1"/>
      </xul:vbox>
      <xul:stringbundle anonid="strings" 
                        src="chrome://mozapps/locale/update/updates.properties"/>
    </content>
    <implementation>
      <constructor><![CDATA[
        // just to be safe, turn off js, auth, plugins, and subframes
        var docShell = this._content.docShell;
        docShell.allowJavascript = false;
        docShell.allowAuth = false;
        docShell.allowPlugins = false;
        //allow redirects
        //docShell.allowMetaRedirects = false;
        docShell.allowSubframes = false;
        //allow images
        //docShell.allowImages = false;
      ]]></constructor>

      <destructor><![CDATA[
        // clean up the listener but you may not have one if you never showed
        // the page with a <remotecontent> element
        if (this._remoteProgressListener) 
          this._content.webProgress
              .removeProgressListener(this._remoteProgressListener);
      ]]></destructor>

      <field name="_message">
        document.getAnonymousElementByAttribute(this, "class", "remoteLoadingMessage");
      </field>
      <field name="_content">
        document.getAnonymousElementByAttribute(this, "class", "remoteContent");
      </field>
      <field name="_strings">
        document.getAnonymousElementByAttribute(this, "anonid", "strings");
      </field>

      <field name="update_name">null</field>
      <field name="update_version">null</field>
      <field name="_remoteProgressListener">null</field>

      <method name="_setMessageValue">
        <parameter name="value"/>
        <body><![CDATA[
          while (this._message.hasChildNodes())
            this._message.removeChild(this._message.firstChild);
          this._message.appendChild(document.createTextNode(value));
        ]]></body>
      </method>

      <method name="onError">
        <body><![CDATA[
          this.setAttribute("selectedIndex", "0");

          var errorPropertyName = this.getAttribute("id") + "NotFound";
          var statusText = this._strings.getFormattedString(errorPropertyName, 
                                                            [this.update_name]);
          this._setMessageValue(statusText);
          this.setAttribute("state", "error");
          var e = document.createEvent("Events");
          e.initEvent("load", false, true);
          this.dispatchEvent(e);
        ]]></body>
      </method>

      <method name="onLoad">
        <body><![CDATA[
          var doc = this._content.contentDocument;
          var type = this.getAttribute("remotetype");
          if (!doc.body.hasAttribute(type)) {
            this.onError();
            return;
          }
          // The remote html can tell us to zoom out the page if the page
          // will create scrollbars by adding a zoomOutToFit attribute to the
          // body of the billboard's html. Since zooming out will not always
          // remove the scrollbars even though the page fits in the client
          // region after zooming out the web page should hide the scrollbar(s)
          // using css. If you choose to use zoomOutToFit you should also verify
          // it is working the way you expect it to with the billboard you have
          // created. Possible values for zoomOutToFit are:
          // both: zoom out if the width or height is greater than the client
          //       region.
          // height: zoom out if the height is greater than the client region.
          // width: zoom out if the width is greater than the client region.
          if (doc.body.hasAttribute("zoomOutToFit")) {
            let zoomAdjustWidth = 1;
            let zoomAdjustHeight = 1;
            let zoomOutType = doc.body.getAttribute("zoomOutToFit");
            if ((zoomOutType == "both" || zoomOutType == "width") &&
                doc.width > this.clientWidth)
              zoomAdjustWidth = Math.floor((this.clientWidth / doc.width) * 100) * .01;

            if ((zoomOutType == "both" || zoomOutType == "height") &&
                doc.height > this.clientHeight)
              zoomAdjustHeight = Math.floor((this.clientHeight / doc.height) * 100) * .01;

            var zoomAdjust = zoomAdjustWidth < zoomAdjustHeight ? zoomAdjustWidth
                                                                : zoomAdjustHeight;
            if (zoomAdjust < 1)
              this._content.markupDocumentViewer.fullZoom = zoomAdjust;
          }

          this.setAttribute("selectedIndex", "1");
          this.setAttribute("state", "loaded");

          var e = document.createEvent("Events");
          e.initEvent("load", false, true);
          this.dispatchEvent(e);
        ]]></body>
      </method>

      <method name="onStart">
        <body><![CDATA[
          this.setAttribute("selectedIndex", "0");

          this.setAttribute("state", "loading");
          var loadingPropertyName = this.getAttribute("id") + "Downloading";
          this._setMessageValue(this._strings.getFormattedString(
            loadingPropertyName, [this.update_name, this.update_version]));
        ]]></body>
      </method>

      <property name="url">
        <getter><![CDATA[
          return this.getAttribute("url");
        ]]></getter>
        <setter><![CDATA[
          if (this._remoteProgressListener) 
            this._content.webProgress
                .removeProgressListener(this._remoteProgressListener);

          var self = this;

          this._remoteProgressListener = {
            QueryInterface: function(aIID) 
            {
              if (aIID.equals(Components.interfaces.nsIWebProgressListener) ||
                  aIID.equals(Components.interfaces.nsISupportsWeakReference) ||
                  aIID.equals(Components.interfaces.nsISupports))
                return this;
              throw Components.results.NS_NOINTERFACE;
            },
            onLocationChange: function() {},
            onProgressChange: function() {},
            onStatusChange:   function() {},
            onSecurityChange: function() {},
            onStateChange:    function(aWebProgress, aRequest, 
                                       aStateFlags, aStatus) 
            {
              if (!aRequest)
                return;

              const nsIWebProgressListener = 
                Components.interfaces.nsIWebProgressListener;
 
              if (aStateFlags & nsIWebProgressListener.STATE_IS_NETWORK) 
              {
                if (aStateFlags & nsIWebProgressListener.STATE_START) 
                  self.onStart();
                else if (aStateFlags & nsIWebProgressListener.STATE_STOP)
                {
                  const nsIHttpChannel = Components.interfaces.nsIHttpChannel;
                  try {
                    var channel = aRequest.QueryInterface(nsIHttpChannel);
                    if (channel.requestSucceeded) 
                    {
                      // if we get here, the load was OK, report success
                      self.onLoad();
                      return;
                    }
                  }
                  catch (ex) 
                  {
                    // the channel.requestSucceeded can throw
                    // NS_ERROR_NOT_AVAILABLE if you can't reach the server
                    // so we treat that as an error
                  }

                  // everything else (like a 404) is an error
                  self.onError();
                }
              }
            }
          }

          this._content.webProgress
              .addProgressListener(this._remoteProgressListener,
               Components.interfaces.nsIWebProgress.NOTIFY_ALL);

          // load the url now that the listener is registered
          this._content.setAttribute("src", val);
        ]]></setter>
      </property>

      <property name="testFileUrl">
        <getter><![CDATA[
          return this.getAttribute("testFileUrl");
        ]]></getter>
        <setter><![CDATA[
          this._content.setAttribute("src", val);
          this.onLoad()
        ]]></setter>
      </property>

      <method name="stopDownloading">
        <body><![CDATA[
          this._content.stop();
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="updateheader" extends="chrome://global/content/bindings/wizard.xml#wizard-header">
    <resources>
      <stylesheet src="chrome://global/skin/wizard.css"/>
    </resources>
    <content>
      <xul:hbox class="wizard-header update-header" flex="1">
        <xul:vbox class="wizard-header-box-1">
          <xul:vbox class="wizard-header-box-text">
            <xul:label class="wizard-header-label" xbl:inherits="value=label"/>
          </xul:vbox>
        </xul:vbox>
      </xul:hbox>
    </content>
  </binding>

  <binding id="update" extends="chrome://global/content/bindings/richlistbox.xml#richlistitem">
    <content>
      <xul:hbox>
        <xul:label class="update-name" xbl:inherits="value=name" flex="1" crop="right"/>
        <xul:label xbl:inherits="href=detailsURL,hidden=hideDetailsURL" class="text-link"
                   value="&update.details.label;"/>
      </xul:hbox>
      <xul:label class="update-type" xbl:inherits="value=type"/>
      <xul:grid>
        <xul:columns>
          <xul:column class="update-label-column"/>
          <xul:column flex="1"/>
        </xul:columns>
        <xul:rows>
          <xul:row>
            <xul:label class="update-installedOn-label">&update.installedOn.label;</xul:label>
            <xul:label class="update-installedOn-value" xbl:inherits="value=installDate" flex="1" crop="right"/>
          </xul:row>
          <xul:row>
            <xul:label class="update-status-label">&update.status.label;</xul:label>
            <xul:description class="update-status-value" flex="1"/>
          </xul:row>
        </xul:rows>
      </xul:grid>
    </content>
    <implementation>
      <property name="name"
                onget="return this.getAttribute('name');"
                onset="this.setAttribute('name', val); return val;"/>
      <property name="detailsURL"
                onget="return this.getAttribute('detailsURL');"
                onset="this.setAttribute('detailsURL', val); return val;"/>
      <property name="installDate"
                onget="return this.getAttribute('installDate');"
                onset="this.setAttribute('installDate', val); return val;"/>
      <property name="type"
                onget="return this.getAttribute('type');"
                onset="this.setAttribute('type', val); return val;"/>
      <property name="hideDetailsURL"
                onget="return this.getAttribute('hideDetailsURL');"
                onset="this.setAttribute('hideDetailsURL', val); return val;"/>
      <property name="status"
                onget="return this.getAttribute('status');">
        <setter><![CDATA[
          this.setAttribute("status", val);
          var field = document.getAnonymousElementByAttribute(this, "class", "update-status-value");
          while (field.hasChildNodes())
            field.removeChild(field.firstChild);
          field.appendChild(document.createTextNode(val));
          return val;
        ]]></setter>
      </property>
    </implementation>
  </binding>
</bindings>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
    <identity>
        <version number="$Revision: 1.2 $"/>
        <generation date="$Date: 2008/05/25 16:09:28 $"/>
        <language type="ur"/>
        <territory type="IN"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <!-- private browsing mode -->
    <item gecko:state_private="true" android:drawable="@color/background_private"/>

    <!-- normal mode -->
    <item android:drawable="@color/background_normal"/>

</selector>
<?xml version="1.0"?>


<!DOCTYPE bindings [
<!ENTITY % notificationDTD SYSTEM "chrome://global/locale/notification.dtd">
%notificationDTD;
<!ENTITY % browserDTD SYSTEM "chrome://browser/locale/browser.dtd">
%browserDTD;
<!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd">
%brandDTD;
]>

<bindings id="urlbarBindings" xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="urlbar" extends="chrome://global/content/bindings/autocomplete.xml#autocomplete">

    <content sizetopopup="pref">
      <xul:hbox anonid="textbox-container"
                class="autocomplete-textbox-container urlbar-textbox-container"
                flex="1" xbl:inherits="focused">
        <children includes="image|deck|stack|box">
          <xul:image class="autocomplete-icon" allowevents="true"/>
        </children>
        <xul:hbox anonid="textbox-input-box"
                  class="textbox-input-box urlbar-input-box"
                  flex="1" xbl:inherits="tooltiptext=inputtooltiptext">
          <children/>
          <html:input anonid="input"
                      class="autocomplete-textbox urlbar-input textbox-input uri-element-right-align"
                      allowevents="true"
                      xbl:inherits="tooltiptext=inputtooltiptext,value,type,maxlength,disabled,size,readonly,placeholder,tabindex,accesskey"/>
        </xul:hbox>
        <children includes="hbox"/>
      </xul:hbox>
      <xul:dropmarker anonid="historydropmarker"
                      class="autocomplete-history-dropmarker urlbar-history-dropmarker"
                      allowevents="true"
                      xbl:inherits="open,enablehistory,parentfocused=focused"/>
      <xul:popupset anonid="popupset"
                    class="autocomplete-result-popupset"/>
      <children includes="toolbarbutton"/>
    </content>

    <implementation implements="nsIObserver, nsIDOMEventListener">
      <constructor><![CDATA[
        this._prefs = Components.classes["@mozilla.org/preferences-service;1"]
                                .getService(Components.interfaces.nsIPrefService)
                                .getBranch("browser.urlbar.");

        this._prefs.addObserver("", this, false);
        this.clickSelectsAll = this._prefs.getBoolPref("clickSelectsAll");
        this.doubleClickSelectsAll = this._prefs.getBoolPref("doubleClickSelectsAll");
        this.completeDefaultIndex = this._prefs.getBoolPref("autoFill");
        this.timeout = this._prefs.getIntPref("delay");
        this._formattingEnabled = this._prefs.getBoolPref("formatting.enabled");
        this._mayTrimURLs = this._prefs.getBoolPref("trimURLs");
        this._ignoreNextSelect = false;

        this.inputField.controllers.insertControllerAt(0, this._copyCutController);
        this.inputField.addEventListener("paste", this, false);
        this.inputField.addEventListener("mousedown", this, false);
        this.inputField.addEventListener("mousemove", this, false);
        this.inputField.addEventListener("mouseout", this, false);
        this.inputField.addEventListener("overflow", this, false);
        this.inputField.addEventListener("underflow", this, false);

        try {
          if (this._prefs.getBoolPref("unifiedcomplete")) {
            this.setAttribute("autocompletesearch", "unifiedcomplete");
            this.mSearchNames = null;
          }
        } catch (ex) {}

        const kXULNS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
        var textBox = document.getAnonymousElementByAttribute(this,
                                                "anonid", "textbox-input-box");
        var cxmenu = document.getAnonymousElementByAttribute(textBox,
                                            "anonid", "input-box-contextmenu");
        var pasteAndGo;
        cxmenu.addEventListener("popupshowing", function() {
          if (!pasteAndGo)
            return;
          var controller = document.commandDispatcher.getControllerForCommand("cmd_paste");
          var enabled = controller.isCommandEnabled("cmd_paste");
          if (enabled)
            pasteAndGo.removeAttribute("disabled");
          else
            pasteAndGo.setAttribute("disabled", "true");
        }, false);

        var insertLocation = cxmenu.firstChild;
        while (insertLocation.nextSibling &&
               insertLocation.getAttribute("cmd") != "cmd_paste")
          insertLocation = insertLocation.nextSibling;
        if (insertLocation) {
          pasteAndGo = document.createElement("menuitem");
          let label = Services.strings.createBundle("chrome://browser/locale/browser.properties").
                                   GetStringFromName("pasteAndGo.label");
          pasteAndGo.setAttribute("label", label);
          pasteAndGo.setAttribute("anonid", "paste-and-go");
          pasteAndGo.setAttribute("oncommand",
              "gURLBar.select(); goDoCommand('cmd_paste'); gURLBar.handleCommand();");
          cxmenu.insertBefore(pasteAndGo, insertLocation.nextSibling);
        }
      ]]></constructor>

      <destructor><![CDATA[
        this._prefs.removeObserver("", this);
        this._prefs = null;
        this.inputField.controllers.removeController(this._copyCutController);
        this.inputField.removeEventListener("paste", this, false);
        this.inputField.removeEventListener("mousedown", this, false);
        this.inputField.removeEventListener("mousemove", this, false);
        this.inputField.removeEventListener("mouseout", this, false);
        this.inputField.removeEventListener("overflow", this, false);
        this.inputField.removeEventListener("underflow", this, false);
      ]]></destructor>

      <field name="_value">""</field>

      <!--
        onBeforeValueGet is called by the base-binding's .value getter.
        It can return an object with a "value" property, to override the
        return value of the getter.
      -->
      <method name="onBeforeValueGet">
        <body><![CDATA[
          if (this.hasAttribute("actiontype"))
            return {value: this._value};
          return null;
        ]]></body>
      </method>

      <!--
        onBeforeValueSet is called by the base-binding's .value setter.
        It should return the value that the setter should use.
      -->
      <method name="onBeforeValueSet">
        <parameter name="aValue"/>
        <body><![CDATA[
          this._value = aValue;
          var returnValue = aValue;
          var action = this._parseActionUrl(aValue);

          if (action) {
            switch (action.type) {
              case "switchtab": // Fall through.
              case "visiturl": {
                returnValue = action.params.url;
                break;
              }
              case "keyword": // Fall through.
              case "searchengine": {
                returnValue = action.params.input;
                break;
              }
            }
          }

          // Set the actiontype only if the user is not overriding actions.
          if (action && this._noActionsKeys.size == 0) {
            this.setAttribute("actiontype", action.type);
          } else {
            this.removeAttribute("actiontype");
          }
          return returnValue;
        ]]></body>
      </method>

      <field name="_mayTrimURLs">true</field>
      <method name="trimValue">
        <parameter name="aURL"/>
        <body><![CDATA[
          // This method must not modify the given URL such that calling
          // nsIURIFixup::createFixupURI with the result will produce a different URI.
          return this._mayTrimURLs ? trimURL(aURL) : aURL;
        ]]></body>
      </method>

      <field name="_formattingEnabled">true</field>
      <method name="formatValue">
        <body><![CDATA[
          if (!this._formattingEnabled || this.focused)
            return;

          let controller = this.editor.selectionController;
          let selection = controller.getSelection(controller.SELECTION_URLSECONDARY);
          selection.removeAllRanges();

          let textNode = this.editor.rootElement.firstChild;
          let value = textNode.textContent;

          let protocol = value.match(/^[a-z\d.+\-]+:(?=[^\d])/);
          if (protocol &&
              ["http:", "https:", "ftp:"].indexOf(protocol[0]) == -1)
            return;
          let matchedURL = value.match(/^((?:[a-z]+:\/\/)?(?:[^\/]+@)?)(.+?)(?::\d+)?(?:\/|$)/);
          if (!matchedURL)
            return;

          let [, preDomain, domain] = matchedURL;
          let baseDomain = domain;
          let subDomain = "";
          // getBaseDomainFromHost doesn't recognize IPv6 literals in brackets as IPs (bug 667159)
          if (domain[0] != "[") {
            try {
              baseDomain = Services.eTLD.getBaseDomainFromHost(domain);
              if (!domain.endsWith(baseDomain)) {
                // getBaseDomainFromHost converts its resultant to ACE.
                let IDNService = Cc["@mozilla.org/network/idn-service;1"]
                                 .getService(Ci.nsIIDNService);
                baseDomain = IDNService.convertACEtoUTF8(baseDomain);
              }
            } catch (e) {}
          }
          if (baseDomain != domain) {
            subDomain = domain.slice(0, -baseDomain.length);
          }

          let rangeLength = preDomain.length + subDomain.length;
          if (rangeLength) {
            let range = document.createRange();
            range.setStart(textNode, 0);
            range.setEnd(textNode, rangeLength);
            selection.addRange(range);
          }

          let startRest = preDomain.length + domain.length;
          if (startRest < value.length) {
            let range = document.createRange();
            range.setStart(textNode, startRest);
            range.setEnd(textNode, value.length);
            selection.addRange(range);
          }
        ]]></body>
      </method>

      <method name="_clearFormatting">
        <body><![CDATA[
          if (!this._formattingEnabled)
            return;

          let controller = this.editor.selectionController;
          let selection = controller.getSelection(controller.SELECTION_URLSECONDARY);
          selection.removeAllRanges();
        ]]></body>
      </method>

      <method name="handleRevert">
        <body><![CDATA[
          var isScrolling = this.popupOpen;

          gBrowser.userTypedValue = null;

          // don't revert to last valid url unless page is NOT loading
          // and user is NOT key-scrolling through autocomplete list
          if (!XULBrowserWindow.isBusy && !isScrolling) {
            URLBarSetURI();

            // If the value isn't empty and the urlbar has focus, select the value.
            if (this.value && this.hasAttribute("focused"))
              this.select();
          }

          // tell widget to revert to last typed text only if the user
          // was scrolling when they hit escape
          return !isScrolling;
        ]]></body>
      </method>

      <method name="handleCommand">
        <parameter name="aTriggeringEvent"/>
        <body><![CDATA[
          if (aTriggeringEvent instanceof MouseEvent && aTriggeringEvent.button == 2)
            return; // Do nothing for right clicks

          var url = this.value;
          var mayInheritPrincipal = false;
          var postData = null;

          var action = this._parseActionUrl(url);
          let lastLocationChange = gBrowser.selectedBrowser.lastLocationChange;

          let matchLastLocationChange = true;
          if (action) {
            if (this.hasAttribute("actiontype")) {
              if (action.type == "switchtab") {
                url = action.params.url;
                this.handleRevert();
                let prevTab = gBrowser.selectedTab;
                if (switchToTabHavingURI(url) &&
                    isTabEmpty(prevTab))
                  gBrowser.removeTab(prevTab);
                return;
              } else if (action.type == "keyword") {
                url = action.params.url;
              } else if (action.type == "searchengine") {
                let engine = Services.search.getEngineByName(action.params.engineName);
                let submission = engine.getSubmission(action.params.searchQuery);

                url = submission.uri.spec;
                postData = submission.postData;
              } else if (action.type == "visiturl") {
                url = action.params.url;
              }
            }
            continueOperation.call(this);
          }
          else {
            this._canonizeURL(aTriggeringEvent, response => {
              [url, postData, mayInheritPrincipal] = response;
              if (url) {
                matchLastLocationChange = (lastLocationChange ==
                                           gBrowser.selectedBrowser.lastLocationChange);
                continueOperation.call(this);
              }
            });
          }

          function continueOperation()
          {
            this.value = url;
            gBrowser.userTypedValue = url;
            try {
              addToUrlbarHistory(url);
            } catch (ex) {
              // Things may go wrong when adding url to session history,
              // but don't let that interfere with the loading of the url.
              Cu.reportError(ex);
            }

            function loadCurrent() {
              openUILinkIn(url, "current", {
                allowThirdPartyFixup: true,
                disallowInheritPrincipal: !mayInheritPrincipal,
                allowPinnedTabHostChange: true,
                postData: postData
              });
            }

            // Focus the content area before triggering loads, since if the load
            // occurs in a new tab, we want focus to be restored to the content
            // area when the current tab is re-selected.
            gBrowser.selectedBrowser.focus();

            let isMouseEvent = aTriggeringEvent instanceof MouseEvent;
            let altEnter = !isMouseEvent && aTriggeringEvent && aTriggeringEvent.altKey;

            if (altEnter) {
              // XXX This was added a long time ago, and I'm not sure why it is
              // necessary. Alt+Enter's default action might cause a system beep,
              // or something like that?
              aTriggeringEvent.preventDefault();
              aTriggeringEvent.stopPropagation();
            }

            // If the current tab is empty, ignore Alt+Enter (just reuse this tab)
            altEnter = altEnter && !isTabEmpty(gBrowser.selectedTab);

            if (isMouseEvent || altEnter) {
              // Use the standard UI link behaviors for clicks or Alt+Enter
              let where = "tab";
              if (isMouseEvent)
                where = whereToOpenLink(aTriggeringEvent, false, false);

              if (where == "current") {
                if (matchLastLocationChange) {
                  loadCurrent();
                }
              } else {
                this.handleRevert();
                let params = { allowThirdPartyFixup: true,
                               postData: postData,
                               initiatingDoc: document };
                openUILinkIn(url, where, params);
              }
            } else {
              if (matchLastLocationChange) {
                loadCurrent();
              }
            }
          }
        ]]></body>
      </method>

      <method name="_canonizeURL">
        <parameter name="aTriggeringEvent"/>
        <parameter name="aCallback"/>
        <body><![CDATA[
          var url = this.value;
          if (!url) {
            aCallback(["", null, false]);
            return;
          }

          // Only add the suffix when the URL bar value isn't already "URL-like",
          // and only if we get a keyboard event, to match user expectations.
          if (/^\s*[^.:\/\s]+(?:\/.*|\s*)$/i.test(url) &&
              (aTriggeringEvent instanceof KeyEvent)) {
            let accel = aTriggeringEvent.metaKey;
            let shift = aTriggeringEvent.shiftKey;

            let suffix = "";

            switch (true) {
              case (accel && shift):
                suffix = ".org/";
                break;
              case (shift):
                suffix = ".net/";
                break;
              case (accel):
                try {
                  suffix = gPrefService.getCharPref("browser.fixup.alternate.suffix");
                  if (suffix.charAt(suffix.length - 1) != "/")
                    suffix += "/";
                } catch(e) {
                  suffix = ".com/";
                }
                break;
            }

            if (suffix) {
              // trim leading/trailing spaces (bug 233205)
              url = url.trim();

              // Tack www. and suffix on.  If user has appended directories, insert
              // suffix before them (bug 279035).  Be careful not to get two slashes.

              let firstSlash = url.indexOf("/");

              if (firstSlash >= 0) {
                url = url.substring(0, firstSlash) + suffix +
                      url.substring(firstSlash + 1);
              } else {
                url = url + suffix;
              }

              url = "http://www." + url;
            }
          }

          getShortcutOrURIAndPostData(url, data => {
            aCallback([data.url, data.postData, data.mayInheritPrincipal]);
          });
        ]]></body>
      </method>

      <field name="_contentIsCropped">false</field>

      <method name="_initURLTooltip">
        <body><![CDATA[
          if (this.focused || !this._contentIsCropped)
            return;
          this.inputField.setAttribute("tooltiptext", this.value);
        ]]></body>
      </method>

      <method name="_hideURLTooltip">
        <body><![CDATA[
          this.inputField.removeAttribute("tooltiptext");
        ]]></body>
      </method>

      <method name="onDragOver">
        <parameter name="aEvent"/>
        <body>
          var types = aEvent.dataTransfer.types;
          if (types.contains("application/x-moz-file") ||
              types.contains("text/x-moz-url") ||
              types.contains("text/uri-list") ||
              types.contains("text/unicode"))
            aEvent.preventDefault();
        </body>
      </method>

      <method name="onDrop">
        <parameter name="aEvent"/>
        <body><![CDATA[
          let url = browserDragAndDrop.drop(aEvent, { })

          // The URL bar automatically handles inputs with newline characters,
          // so we can get away with treating text/x-moz-url flavours as text/plain.
          if (url) {
            aEvent.preventDefault();
            this.value = url;
            SetPageProxyState("invalid");
            this.focus();
            try {
              urlSecurityCheck(url,
                               gBrowser.contentPrincipal,
                               Ci.nsIScriptSecurityManager.DISALLOW_INHERIT_PRINCIPAL);
            } catch (ex) {
              return;
            }
            this.handleCommand();
          }
        ]]></body>
      </method>

      <method name="_getSelectedValueForClipboard">
        <body><![CDATA[
          // Grab the actual input field's value, not our value, which could include moz-action:
          var inputVal = this.inputField.value;
          var selectedVal = inputVal.substring(this.selectionStart, this.selectionEnd);

          // If the selection doesn't start at the beginning or doesn't span the full domain or
          // the URL bar is modified, nothing else to do here.
          if (this.selectionStart > 0 || this.valueIsTyped)
            return selectedVal;
          // The selection doesn't span the full domain if it doesn't contain a slash and is
          // followed by some character other than a slash.
          if (!selectedVal.contains("/")) {
            let remainder = inputVal.replace(selectedVal, "");
            if (remainder != "" && remainder[0] != "/")
              return selectedVal;
          }

          let uriFixup = Cc["@mozilla.org/docshell/urifixup;1"].getService(Ci.nsIURIFixup);

          let uri;
          try {
            uri = uriFixup.createFixupURI(inputVal, Ci.nsIURIFixup.FIXUP_FLAG_NONE);
          } catch (e) {}
          if (!uri)
            return selectedVal;

          // Only copy exposable URIs
          try {
            uri = uriFixup.createExposableURI(uri);
          } catch (ex) {}

          // If the entire URL is selected, just use the actual loaded URI.
          if (inputVal == selectedVal) {
            // ... but only if  isn't a javascript: or data: URI, since those
            // are hard to read when encoded
            if (!uri.schemeIs("javascript") && !uri.schemeIs("data")) {
              // Parentheses are known to confuse third-party applications (bug 458565).
              selectedVal = uri.spec.replace(/[()]/g, function (c) escape(c));
            }

            return selectedVal;
          }

          // Just the beginning of the URL is selected, check for a trimmed
          // value
          let spec = uri.spec;
          let trimmedSpec = this.trimValue(spec);
          if (spec != trimmedSpec) {
            // Prepend the portion that trimValue removed from the beginning.
            // This assumes trimValue will only truncate the URL at
            // the beginning or end (or both).
            let trimmedSegments = spec.split(trimmedSpec);
            selectedVal = trimmedSegments[0] + selectedVal;
          }

          return selectedVal;
        ]]></body>
      </method>

      <field name="_copyCutController"><![CDATA[
        ({
          urlbar: this,
          doCommand: function(aCommand) {
            var urlbar = this.urlbar;
            var val = urlbar._getSelectedValueForClipboard();
            if (!val)
              return;

            if (aCommand == "cmd_cut" && this.isCommandEnabled(aCommand)) {
              let start = urlbar.selectionStart;
              let end = urlbar.selectionEnd;
              urlbar.inputField.value = urlbar.inputField.value.substring(0, start) +
                                        urlbar.inputField.value.substring(end);
              urlbar.selectionStart = urlbar.selectionEnd = start;
              urlbar.removeAttribute("actiontype");
              SetPageProxyState("invalid");
            }

            Cc["@mozilla.org/widget/clipboardhelper;1"]
              .getService(Ci.nsIClipboardHelper)
              .copyString(val, document);
          },
          supportsCommand: function(aCommand) {
            switch (aCommand) {
              case "cmd_copy":
              case "cmd_cut":
                return true;
            }
            return false;
          },
          isCommandEnabled: function(aCommand) {
            return this.supportsCommand(aCommand) &&
                   (aCommand != "cmd_cut" || !this.urlbar.readOnly) &&
                   this.urlbar.selectionStart < this.urlbar.selectionEnd;
          },
          onEvent: function(aEventName) {}
        })
      ]]></field>

      <method name="observe">
        <parameter name="aSubject"/>
        <parameter name="aTopic"/>
        <parameter name="aData"/>
        <body><![CDATA[
          if (aTopic == "nsPref:changed") {
            switch (aData) {
              case "clickSelectsAll":
              case "doubleClickSelectsAll":
                this[aData] = this._prefs.getBoolPref(aData);
                break;
              case "autoFill":
                this.completeDefaultIndex = this._prefs.getBoolPref(aData);
                break;
              case "delay":
                this.timeout = this._prefs.getIntPref(aData);
                break;
              case "formatting.enabled":
                this._formattingEnabled = this._prefs.getBoolPref(aData);
                break;
              case "trimURLs":
                this._mayTrimURLs = this._prefs.getBoolPref(aData);
                break;
              case "unifiedcomplete":
                let useUnifiedComplete = false;
                try {
                  useUnifiedComplete = this._prefs.getBoolPref(aData);
                } catch (ex) {}
                this.setAttribute("autocompletesearch",
                                  useUnifiedComplete ? "unifiedcomplete"
                                                     : "urlinline history");
                this.mSearchNames = null;
            }
          }
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="aEvent"/>
        <body><![CDATA[
          switch (aEvent.type) {
            case "paste":
              let originalPasteData = aEvent.clipboardData.getData("text/plain");
              if (!originalPasteData) {
                return;
              }

              let oldValue = this.inputField.value;
              let oldStart = oldValue.substring(0, this.inputField.selectionStart);
              // If there is already non-whitespace content in the URL bar
              // preceding the pasted content, it's not necessary to check
              // protocols used by the pasted content:
              if (oldStart.trim()) {
                return;
              }
              let oldEnd = oldValue.substring(this.inputField.selectionEnd);

              let pasteData = stripUnsafeProtocolOnPaste(originalPasteData);
              if (originalPasteData != pasteData) {
                // Unfortunately we're not allowed to set the bits being pasted
                // so cancel this event:
                aEvent.preventDefault();
                aEvent.stopPropagation();

                this.inputField.value = oldStart + pasteData + oldEnd;
                // Fix up cursor/selection:
                let newCursorPos = oldStart.length + pasteData.length;
                this.inputField.selectionStart = newCursorPos;
                this.inputField.selectionEnd = newCursorPos;
              }
              break;
            case "mousedown":
              if (this.doubleClickSelectsAll &&
                  aEvent.button == 0 && aEvent.detail == 2) {
                this.editor.selectAll();
                aEvent.preventDefault();
              }
              break;
            case "mousemove":
              this._initURLTooltip();
              break;
            case "mouseout":
              this._hideURLTooltip();
              break;
            case "overflow":
              this._contentIsCropped = true;
              break;
            case "underflow":
              this._contentIsCropped = false;
              this._hideURLTooltip();
              break;
          }
        ]]></body>
      </method>

      <property name="textValue"
                onget="return this.value;">
        <setter>
          <![CDATA[
          try {
            val = losslessDecodeURI(makeURI(val));
          } catch (ex) { }

          // Trim popup selected values, but never trim results coming from
          // autofill.
          if (this.popup.selectedIndex == -1)
            this._disableTrim = true;
          this.value = val;
          this._disableTrim = false;

          // Completing a result should simulate the user typing the result, so
          // fire an input event.
          let evt = document.createEvent("UIEvents");
          evt.initUIEvent("input", true, false, window, 0);
          this.mIgnoreInput = true;
          this.dispatchEvent(evt);
          this.mIgnoreInput = false;

          return this.value;
          ]]>
        </setter>
      </property>

      <method name="_parseActionUrl">
        <parameter name="aUrl"/>
        <body><![CDATA[
          if (!aUrl.startsWith("moz-action:"))
            return null;

          // URL is in the format moz-action:ACTION,PARAMS
          // Where PARAMS is a JSON encoded object.
          aUrl = decodeURI(aUrl);
          let [, type, params] = aUrl.match(/^moz-action:([^,]+),(.*)$/);

          let action = {
            type: type,
          };

          try {
            action.params = JSON.parse(params);
          } catch (e) {
            // If this failed, we assume that params is not a JSON object, and
            // is instead just a flat string. This will happen when
            // UnifiedComplete is disabled - in which case, the param is always
            // a URL.
            action.params = {
              url: params,
            }
          }

          return action;
        ]]></body>
      </method>

      <field name="_noActionsKeys"><![CDATA[
        new Set();
      ]]></field>

      <method name="_clearNoActions">
        <parameter name="aURL"/>
        <body><![CDATA[
          this._noActionsKeys.clear();
          this.popup.removeAttribute("noactions");
          let action = this._parseActionUrl(this._value);
          if (action)
            this.setAttribute("actiontype", action.type);
        ]]></body>
      </method>

      <method name="selectTextRange">
        <parameter name="aStartIndex"/>
        <parameter name="aEndIndex"/>
        <body><![CDATA[
          this._ignoreNextSelect = true;
          this.inputField.setSelectionRange(aStartIndex, aEndIndex);
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="keydown"><![CDATA[
        if ((event.keyCode === KeyEvent.DOM_VK_ALT ||
             event.keyCode === KeyEvent.DOM_VK_SHIFT) &&
            this.popup.selectedIndex >= 0 &&
            !this._noActionsKeys.has(event.keyCode)) {
          if (this._noActionsKeys.size == 0) {
            this.popup.setAttribute("noactions", "true");
            this.removeAttribute("actiontype");
          }
          this._noActionsKeys.add(event.keyCode);
        }
      ]]></handler>

      <handler event="keyup"><![CDATA[
        if ((event.keyCode === KeyEvent.DOM_VK_ALT ||
             event.keyCode === KeyEvent.DOM_VK_SHIFT) &&
            this._noActionsKeys.has(event.keyCode)) {
          this._noActionsKeys.delete(event.keyCode);
          if (this._noActionsKeys.size == 0)
            this._clearNoActions();
        }
      ]]></handler>

      <handler event="blur"><![CDATA[
        this._clearNoActions();
        this.formatValue();
      ]]></handler>

      <handler event="dragstart" phase="capturing"><![CDATA[
        // Drag only if the gesture starts from the input field.
        if (this.inputField != event.originalTarget && 
            !(this.inputField.compareDocumentPosition(event.originalTarget) &
              Node.DOCUMENT_POSITION_CONTAINED_BY))
          return;

        // Drag only if the entire value is selected and it's a valid URI.
        var isFullSelection = this.selectionStart == 0 &&
                              this.selectionEnd == this.textLength;
        if (!isFullSelection ||
            this.getAttribute("pageproxystate") != "valid")
          return;

        var urlString = content.location.href;
        var title = content.document.title || urlString;
        var htmlString = "<a href=\"" + urlString + "\">" + urlString + "</a>";

        var dt = event.dataTransfer;
        dt.setData("text/x-moz-url", urlString + "\n" + title);
        dt.setData("text/unicode", urlString);
        dt.setData("text/html", htmlString);

        dt.effectAllowed = "copyLink";
        event.stopPropagation();
      ]]></handler>

      <handler event="focus" phase="capturing"><![CDATA[
        this._hideURLTooltip();
        this._clearFormatting();
      ]]></handler>

      <handler event="dragover" phase="capturing" action="this.onDragOver(event, this);"/>
      <handler event="drop" phase="capturing" action="this.onDrop(event, this);"/>
      <handler event="select"><![CDATA[
        if (this._ignoreNextSelect) {
          // If this select event is coming from autocomplete's selectTextRange,
          // then we don't need to adjust what's on the selection keyboard here,
          // but make sure to reset the flag since this should be a one-time
          // suppression.
          this._ignoreNextSelect = false;
          return;
        }

        if (!Cc["@mozilla.org/widget/clipboard;1"]
               .getService(Ci.nsIClipboard)
               .supportsSelectionClipboard())
          return;

        var val = this._getSelectedValueForClipboard();
        if (!val)
          return;

        Cc["@mozilla.org/widget/clipboardhelper;1"]
          .getService(Ci.nsIClipboardHelper)
          .copyStringToClipboard(val, Ci.nsIClipboard.kSelectionClipboard, document);
      ]]></handler>
    </handlers>

  </binding>

  <!-- Note: this binding is applied to the autocomplete popup used in the Search bar and in web page content -->
  <binding id="browser-autocomplete-result-popup" extends="chrome://global/content/bindings/autocomplete.xml#autocomplete-result-popup">
    <implementation>
      <method name="openAutocompletePopup">
        <parameter name="aInput"/>
        <parameter name="aElement"/>
        <body>
          <![CDATA[
          // initially the panel is hidden
          // to avoid impacting startup / new window performance
          aInput.popup.hidden = false;

          // this method is defined on the base binding
          this._openAutocompletePopup(aInput, aElement);
        ]]></body>
      </method>

      <method name="onPopupClick">
        <parameter name="aEvent"/>
        <body><![CDATA[
          // Ignore all right-clicks
          if (aEvent.button == 2)
            return;

          var controller = this.view.QueryInterface(Components.interfaces.nsIAutoCompleteController);

          // Check for unmodified left-click, and use default behavior
          if (aEvent.button == 0 && !aEvent.shiftKey && !aEvent.ctrlKey &&
              !aEvent.altKey && !aEvent.metaKey) {
            controller.handleEnter(true);
            return;
          }

          // Check for middle-click or modified clicks on the search bar
          var searchBar = BrowserSearch.searchBar;
          if (searchBar && searchBar.textbox == this.mInput) {
            // Handle search bar popup clicks
            var search = controller.getValueAt(this.selectedIndex);

            // close the autocomplete popup and revert the entered search term
            this.closePopup();
            controller.handleEscape();

            // Fill in the search bar's value
            searchBar.value = search;

            // open the search results according to the clicking subtlety
            var where = whereToOpenLink(aEvent, false, true);
            searchBar.doSearch(search, where);
          }
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="urlbar-rich-result-popup" extends="chrome://global/content/bindings/autocomplete.xml#autocomplete-rich-result-popup">
    <implementation>
      <field name="_maxResults">0</field>

      <field name="_bundle" readonly="true">
        Cc["@mozilla.org/intl/stringbundle;1"].
          getService(Ci.nsIStringBundleService).
          createBundle("chrome://browser/locale/places/places.properties");
      </field>

      <property name="maxResults" readonly="true">
        <getter>
          <![CDATA[
            if (!this._maxResults) {
              var prefService =
                Components.classes["@mozilla.org/preferences-service;1"]
                          .getService(Components.interfaces.nsIPrefBranch);
              this._maxResults = prefService.getIntPref("browser.urlbar.maxRichResults");
            }
            return this._maxResults;
          ]]>
        </getter>
      </property>

      <method name="openAutocompletePopup">
        <parameter name="aInput"/>
        <parameter name="aElement"/>
        <body>
          <![CDATA[
          // initially the panel is hidden
          // to avoid impacting startup / new window performance
          aInput.popup.hidden = false;

          // this method is defined on the base binding
          this._openAutocompletePopup(aInput, aElement);
        ]]></body>
      </method>

      <method name="onPopupClick">
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
          // Ignore right-clicks
          if (aEvent.button == 2)
            return;

          var controller = this.view.QueryInterface(Components.interfaces.nsIAutoCompleteController);

          // Check for unmodified left-click, and use default behavior
          if (aEvent.button == 0 && !aEvent.shiftKey && !aEvent.ctrlKey &&
              !aEvent.altKey && !aEvent.metaKey) {
            controller.handleEnter(true);
            return;
          }

          // Check for middle-click or modified clicks on the URL bar
          if (gURLBar && this.mInput == gURLBar) {
            var url = controller.getValueAt(this.selectedIndex);
            var options = {};

            // close the autocomplete popup and revert the entered address
            this.closePopup();
            controller.handleEscape();

            // Check if this is meant to be an action
            let action = this.mInput._parseActionUrl(url);
            if (action) {
              // TODO (bug 1054816): Centralise the implementation of actions
              // into a JS module.
              switch (action.type) {
                case "switchtab": // Fall through.
                case "keyword": // Fall through.
                case "visiturl": {
                  url = action.params.url;
                  break;
                }
                case "searchengine": {
                  let engine = Services.search.getEngineByName(action.params.engineName);
                  let submission = engine.getSubmission(action.params.searchQuery);
                  url = submission.uri.spec;
                  options.postData = submission.postData;
                  break;
                }
                default: {
                  return;
                }
              }
            }

            // respect the usual clicking subtleties
            openUILink(url, aEvent, options);
          }
        ]]>
        </body>
      </method>

      <method name="createResultLabel">
        <parameter name="aTitle"/>
        <parameter name="aUrl"/>
        <parameter name="aType"/>
        <body>
          <![CDATA[
            let label = aTitle + " " + aUrl;
            // convert aType (ex: "ac-result-type-<aType>") to text to be spoke aloud
            // by screen readers.  convert "tag" and "bookmark" to the localized versions,
            // but don't do anything for "favicon" (the default)
            try {
              label += " " + this._bundle.GetStringFromName(aType + "ResultLabel");
            } catch (e) {
              // Undefined result label, do nothing.
            }

            return label;
          ]]>
        </body>
      </method>

    </implementation>
  </binding>

  <binding id="addon-progress-notification" extends="chrome://global/content/bindings/notification.xml#popup-notification">
    <content align="start">
      <xul:image class="popup-notification-icon"
                 xbl:inherits="popupid,src=icon"/>
      <xul:vbox flex="1">
        <xul:description class="popup-notification-description addon-progress-description"
                         xbl:inherits="xbl:text=label"/>
        <xul:spacer flex="1"/>
        <xul:hbox align="center">
          <xul:progressmeter anonid="progressmeter" flex="1" mode="undetermined" class="popup-progress-meter"/>
          <xul:button anonid="cancel" class="popup-progress-cancel" oncommand="document.getBindingParent(this).cancel()"/>
        </xul:hbox>
        <xul:label anonid="progresstext" class="popup-progress-label"/>
        <xul:hbox class="popup-notification-button-container"
                  pack="end" align="center">
          <xul:button anonid="button"
                      class="popup-notification-menubutton"
                      type="menu-button"
                      xbl:inherits="oncommand=buttoncommand,label=buttonlabel,accesskey=buttonaccesskey">
            <xul:menupopup anonid="menupopup"
                           xbl:inherits="oncommand=menucommand">
              <children/>
              <xul:menuitem class="menuitem-iconic popup-notification-closeitem close-icon"
                            label="&closeNotificationItem.label;"
                            xbl:inherits="oncommand=closeitemcommand"/>
            </xul:menupopup>
          </xul:button>
        </xul:hbox>
      </xul:vbox>
      <xul:vbox pack="start">
        <xul:toolbarbutton anonid="closebutton"
                           class="messageCloseButton close-icon popup-notification-closebutton tabbable"
                           xbl:inherits="oncommand=closebuttoncommand"
                           tooltiptext="&closeNotification.tooltip;"/>
      </xul:vbox>
    </content>
    <implementation>
      <constructor><![CDATA[
        this.cancelbtn.setAttribute("tooltiptext", gNavigatorBundle.getString("addonDownloadCancelTooltip"));

        this.notification.options.installs.forEach(function(aInstall) {
          aInstall.addListener(this);
        }, this);

        // Calling updateProgress can sometimes cause this notification to be
        // removed in the middle of refreshing the notification panel which
        // makes the panel get refreshed again. Just initialise to the
        // undetermined state and then schedule a proper check at the next
        // opportunity
        this.setProgress(0, -1);
        this._updateProgressTimeout = setTimeout(this.updateProgress.bind(this), 0);
      ]]></constructor>

      <destructor><![CDATA[
        this.destroy();
      ]]></destructor>

      <field name="progressmeter" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "progressmeter");
      </field>
      <field name="progresstext" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "progresstext");
      </field>
      <field name="cancelbtn" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "cancel");
      </field>
      <field name="DownloadUtils" readonly="true">
        let utils = {};
        Components.utils.import("resource://gre/modules/DownloadUtils.jsm", utils);
        utils.DownloadUtils;
      </field>

      <method name="destroy">
        <body><![CDATA[
          this.notification.options.installs.forEach(function(aInstall) {
            aInstall.removeListener(this);
          }, this);
          clearTimeout(this._updateProgressTimeout);
        ]]></body>
      </method>

      <method name="setProgress">
        <parameter name="aProgress"/>
        <parameter name="aMaxProgress"/>
        <body><![CDATA[
          if (aMaxProgress == -1) {
            this.progressmeter.mode = "undetermined";
          }
          else {
            this.progressmeter.mode = "determined";
            this.progressmeter.value = (aProgress * 100) / aMaxProgress;
          }

          let now = Date.now();

          if (!this.notification.lastUpdate) {
            this.notification.lastUpdate = now;
            this.notification.lastProgress = aProgress;
            return;
          }

          let delta = now - this.notification.lastUpdate;
          if ((delta < 400) && (aProgress < aMaxProgress))
            return;

          delta /= 1000;

          // This code is taken from nsDownloadManager.cpp
          let speed = (aProgress - this.notification.lastProgress) / delta;
          if (this.notification.speed)
            speed = speed * 0.9 + this.notification.speed * 0.1;

          this.notification.lastUpdate = now;
          this.notification.lastProgress = aProgress;
          this.notification.speed = speed;

          let status = null;
          [status, this.notification.last] = this.DownloadUtils.getDownloadStatus(aProgress, aMaxProgress, speed, this.notification.last);
          this.progresstext.value = status;
        ]]></body>
      </method>

      <method name="cancel">
        <body><![CDATA[
          // Cache these as cancelling the installs will remove this
          // notification which will drop these references
          let browser = this.notification.browser;
          let contentWindow = this.notification.options.contentWindow;
          let sourceURI = this.notification.options.sourceURI;

          let installs = this.notification.options.installs;
          installs.forEach(function(aInstall) {
            try {
              aInstall.cancel();
            }
            catch (e) {
              // Cancel will throw if the download has already failed
            }
          }, this);

          let anchorID = "addons-notification-icon";
          let notificationID = "addon-install-cancelled";
          let messageString = gNavigatorBundle.getString("addonDownloadCancelled");
          messageString = PluralForm.get(installs.length, messageString);
          let buttonText = gNavigatorBundle.getString("addonDownloadRestart");
          buttonText = PluralForm.get(installs.length, buttonText);

          let action = {
            label: buttonText,
            accessKey: gNavigatorBundle.getString("addonDownloadRestart.accessKey"),
            callback: function() {
              let weblistener = Cc["@mozilla.org/addons/web-install-listener;1"].
                                getService(Ci.amIWebInstallListener);
              if (weblistener.onWebInstallRequested(contentWindow, sourceURI,
                                                    installs, installs.length)) {
                installs.forEach(function(aInstall) {
                  aInstall.install();
                });
              }
            }
          };

          PopupNotifications.show(browser, notificationID, messageString,
                                  anchorID, action);
        ]]></body>
      </method>

      <method name="updateProgress">
        <body><![CDATA[
          let downloadingCount = 0;
          let progress = 0;
          let maxProgress = 0;

          this.notification.options.installs.forEach(function(aInstall) {
            if (aInstall.maxProgress == -1)
              maxProgress = -1;
            progress += aInstall.progress;
            if (maxProgress >= 0)
              maxProgress += aInstall.maxProgress;
            if (aInstall.state < AddonManager.STATE_DOWNLOADED)
              downloadingCount++;
          });

          if (downloadingCount == 0) {
            this.destroy();
            PopupNotifications.remove(this.notification);
          }
          else {
            this.setProgress(progress, maxProgress);
          }
        ]]></body>
      </method>

      <method name="onDownloadProgress">
        <body><![CDATA[
          this.updateProgress();
        ]]></body>
      </method>

      <method name="onDownloadFailed">
        <body><![CDATA[
          this.updateProgress();
        ]]></body>
      </method>

      <method name="onDownloadCancelled">
        <body><![CDATA[
          this.updateProgress();
        ]]></body>
      </method>

      <method name="onDownloadEnded">
        <body><![CDATA[
          this.updateProgress();
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="identity-request-notification" extends="chrome://global/content/bindings/notification.xml#popup-notification">
    <content align="start">

      <xul:image class="popup-notification-icon"
                 xbl:inherits="popupid,src=icon"/>

      <xul:vbox flex="1">
        <xul:vbox anonid="identity-deck">
          <xul:vbox flex="1" pack="center"> <!-- 1: add an email -->
            <html:input type="email" anonid="email" required="required" size="30"/>
            <xul:description anonid="newidentitydesc"/>
            <xul:spacer flex="1"/>
            <xul:label class="text-link custom-link small-margin" anonid="chooseemail" hidden="true"/>
          </xul:vbox>
          <xul:vbox flex="1" hidden="true"> <!-- 2: choose an email -->
            <xul:description anonid="chooseidentitydesc"/>
            <xul:radiogroup anonid="identities">
            </xul:radiogroup>
            <xul:label class="text-link custom-link" anonid="newemail"/>
          </xul:vbox>
        </xul:vbox>
        <xul:hbox class="popup-notification-button-container"
                  pack="end" align="center">
          <xul:label anonid="tos" class="text-link" hidden="true"/>
          <xul:label anonid="privacypolicy" class="text-link" hidden="true"/>
          <xul:spacer flex="1"/>
          <xul:image anonid="throbber" src="chrome://browser/skin/tabbrowser/loading.png"
                     style="visibility:hidden" width="16" height="16"/>
          <xul:button anonid="button"
                      type="menu-button"
                      class="popup-notification-menubutton"
                      xbl:inherits="oncommand=buttoncommand,label=buttonlabel,accesskey=buttonaccesskey">
            <xul:menupopup anonid="menupopup"
                           xbl:inherits="oncommand=menucommand">
              <children/>
              <xul:menuitem class="menuitem-iconic popup-notification-closeitem close-icon"
                            label="&closeNotificationItem.label;"
                            xbl:inherits="oncommand=closeitemcommand"/>
            </xul:menupopup>
          </xul:button>
        </xul:hbox>
      </xul:vbox>
      <xul:vbox pack="start">
        <xul:toolbarbutton anonid="closebutton"
                           class="messageCloseButton close-icon popup-notification-closebutton tabbable"
                           xbl:inherits="oncommand=closebuttoncommand"
                           tooltiptext="&closeNotification.tooltip;"/>
      </xul:vbox>
    </content>
    <implementation>
      <constructor><![CDATA[
        // this.notification.options.identity is used to pass identity-specific info to the binding
        let origin = this.identity.origin

        // Populate text
        this.emailField.placeholder = gNavigatorBundle.
                                      getString("identity.newIdentity.email.placeholder");
        this.newIdentityDesc.textContent = gNavigatorBundle.getFormattedString(
                                             "identity.newIdentity.description", [origin]);
        this.chooseIdentityDesc.textContent = gNavigatorBundle.getFormattedString(
                                                "identity.chooseIdentity.description", [origin]);

        // Show optional terms of service and privacy policy links
        this._populateLink(this.identity.termsOfService, "tos", "identity.termsOfService");
        this._populateLink(this.identity.privacyPolicy, "privacypolicy", "identity.privacyPolicy");

        // Populate the list of identities to choose from. The origin is used to provide
        // better suggestions.
        let identities = this.SignInToWebsiteUX.getIdentitiesForSite(origin);

        this._populateIdentityList(identities);

        if (typeof this.step == "undefined") {
          // First opening of this notification
          // Show the add email pane (0) if there are no existing identities otherwise show the list
          this.step = "result" in identities && identities.result.length ? 1 : 0;
        } else {
          // Already opened so restore previous state
          if (this.identity.typedEmail) {
            this.emailField.value = this.identity.typedEmail;
          }
          if (this.identity.selected) {
            // If the user already chose an identity then update the UI to reflect that
            this.onIdentitySelected();
          }
          // Update the view for the step
          this.step = this.step;
        }

        // Fire notification with the chosen identity when main button is clicked
        this.button.addEventListener("command", this._onButtonCommand.bind(this), true);

        // Do the same if enter is pressed in the email field
        this.emailField.addEventListener("keypress", function emailFieldKeypress(aEvent) {
          if (aEvent.keyCode != aEvent.DOM_VK_RETURN)
            return;
          this._onButtonCommand(aEvent);
        }.bind(this));

        this.addEmailLink.value = gNavigatorBundle.getString("identity.newIdentity.label");
        this.addEmailLink.accessKey = gNavigatorBundle.getString("identity.newIdentity.accessKey");
        this.addEmailLink.addEventListener("click", function addEmailClick(evt) {
          this.step = 0;
        }.bind(this));

        this.chooseEmailLink.value = gNavigatorBundle.getString("identity.chooseIdentity.label");
        this.chooseEmailLink.hidden = !("result" in identities && identities.result.length);
        this.chooseEmailLink.addEventListener("click", function chooseEmailClick(evt) {
          this.step = 1;
        }.bind(this));

        this.emailField.addEventListener("blur", function onEmailBlur() {
          this.identity.typedEmail = this.emailField.value;
        }.bind(this));
      ]]></constructor>

      <field name="SignInToWebsiteUX" readonly="true">
        let sitw = {};
        Components.utils.import("resource:///modules/SignInToWebsite.jsm", sitw);
        sitw.SignInToWebsiteUX;
      </field>

      <field name="newIdentityDesc" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "newidentitydesc");
      </field>

      <field name="chooseIdentityDesc" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "chooseidentitydesc");
      </field>

      <field name="identityList" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "identities");
      </field>

      <field name="emailField" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "email");
      </field>

      <field name="addEmailLink" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "newemail");
      </field>

      <field name="chooseEmailLink" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "chooseemail");
      </field>

      <field name="throbber" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "throbber");
      </field>

      <field name="identity" readonly="true">
        this.notification.options.identity;
      </field>

      <!-- persist the state on the identity object so we can re-create the
           notification state upon re-opening -->
      <property name="step">
        <getter>
          return this.identity.step;
        </getter>
        <setter><![CDATA[
          let deck = document.getAnonymousElementByAttribute(this, "anonid", "identity-deck");
          for (let i = 0; i < deck.children.length; i++) {
            deck.children[i].hidden = (val != i);
          }
          this.identity.step = val;
          switch (val) {
            case 0:
              this.emailField.focus();
              break;
          }]]>
        </setter>
      </property>

      <method name="onIdentitySelected">
        <body><![CDATA[
          this.throbber.style.visibility = "visible";
          this.button.disabled = true;
          this.emailField.value = this.identity.selected
          this.emailField.disabled = true;
          this.identityList.disabled = true;
        ]]></body>
      </method>

      <method name="_populateLink">
        <parameter name="aURL"/>
        <parameter name="aLinkId"/>
        <parameter name="aStringId"/>
        <body><![CDATA[
          if (aURL) {
            // Show optional link to aURL
            let link = document.getAnonymousElementByAttribute(this, "anonid", aLinkId);
            link.value = gNavigatorBundle.getString(aStringId);
            link.href = aURL;
            link.hidden = false;
          }
        ]]></body>
      </method>

      <method name="_populateIdentityList">
        <parameter name="aIdentities"/>
        <body><![CDATA[
          let foundLastUsed = false;
          let lastUsed = this.identity.selected || aIdentities.lastUsed;
          for (let id in aIdentities.result) {
            let label = aIdentities.result[id];
            let opt = this.identityList.appendItem(label);
            if (label == lastUsed) {
              this.identityList.selectedItem = opt;
              foundLastUsed = true;
            }
          }
          if (!foundLastUsed) {
            this.identityList.selectedIndex = -1;
          }
        ]]></body>
      </method>

      <method name="_onButtonCommand">
        <parameter name="aEvent"/>
        <body><![CDATA[
          if (aEvent.target != aEvent.currentTarget)
            return;
          let chosenId;
          switch (this.step) {
            case 0:
              aEvent.stopPropagation();
              if (!this.emailField.validity.valid) {
                this.emailField.focus();
                return;
              }
              chosenId = this.emailField.value;
              break;
            case 1:
              aEvent.stopPropagation();
              let selectedItem = this.identityList.selectedItem
              chosenId = selectedItem ? selectedItem.label : null;
              if (!chosenId)
                return;
              break;
            default:
              throw new Error("Unknown case");
              return;
          }
          // Actually select the identity
          this.SignInToWebsiteUX.selectIdentity(this.identity.rpId, chosenId);
          this.identity.selected = chosenId;
          this.onIdentitySelected();
        ]]></body>
      </method>

    </implementation>
  </binding>

  <binding id="plugin-popupnotification-center-item">
    <content align="center">
      <xul:vbox pack="center" anonid="itemBox" class="itemBox">
        <xul:description anonid="center-item-label" class="center-item-label" />
        <xul:hbox flex="1" pack="start" align="center" anonid="center-item-warning">
          <xul:image anonid="center-item-warning-icon" class="center-item-warning-icon"/>
          <xul:label anonid="center-item-warning-label"/>
          <xul:label anonid="center-item-link" value="&checkForUpdates;" class="text-link"/>
        </xul:hbox>
      </xul:vbox>
      <xul:vbox pack="center">
        <xul:menulist class="center-item-menulist"
                      anonid="center-item-menulist">
          <xul:menupopup>
            <xul:menuitem anonid="allownow" value="allownow"
                          label="&pluginActivateNow.label;" />
            <xul:menuitem anonid="allowalways" value="allowalways"
                          label="&pluginActivateAlways.label;" />
            <xul:menuitem anonid="block" value="block"
                          label="&pluginBlockNow.label;" />
          </xul:menupopup>
        </xul:menulist>
      </xul:vbox>
    </content>
    <resources>
      <stylesheet src="chrome://global/skin/notification.css"/>
    </resources>
    <implementation>
      <constructor><![CDATA[
        document.getAnonymousElementByAttribute(this, "anonid", "center-item-label").value = this.action.pluginName;

        let curState = "block";
        if (this.action.fallbackType == Ci.nsIObjectLoadingContent.PLUGIN_ACTIVE) {
          if (this.action.pluginPermissionType == Ci.nsIPermissionManager.EXPIRE_SESSION) {
            curState = "allownow";
          }
          else {
            curState = "allowalways";
          }
        }
        document.getAnonymousElementByAttribute(this, "anonid", "center-item-menulist").value = curState;

        let warningString = "";
        let linkString = "";

        let link = document.getAnonymousElementByAttribute(this, "anonid", "center-item-link");

        let url;
        let linkHandler;

        if (this.action.pluginTag.enabledState == Ci.nsIPluginTag.STATE_DISABLED) {
          document.getAnonymousElementByAttribute(this, "anonid", "center-item-menulist").hidden = true;
          warningString = gNavigatorBundle.getString("pluginActivateDisabled.label");
          linkString = gNavigatorBundle.getString("pluginActivateDisabled.manage");
          linkHandler = function(event) {
            event.preventDefault();
            gPluginHandler.managePlugins();
          };
          document.getAnonymousElementByAttribute(this, "anonid", "center-item-warning-icon").hidden = true;
        }
        else {
          url = this.action.detailsLink;

          switch (this.action.blocklistState) {
          case Ci.nsIBlocklistService.STATE_NOT_BLOCKED:
            document.getAnonymousElementByAttribute(this, "anonid", "center-item-warning").hidden = true;
            break;
          case Ci.nsIBlocklistService.STATE_BLOCKED:
            document.getAnonymousElementByAttribute(this, "anonid", "center-item-menulist").hidden = true;
            warningString = gNavigatorBundle.getString("pluginActivateBlocked.label");
            linkString = gNavigatorBundle.getString("pluginActivate.learnMore");
            break;
          case Ci.nsIBlocklistService.STATE_VULNERABLE_UPDATE_AVAILABLE:
            warningString = gNavigatorBundle.getString("pluginActivateOutdated.label");
            linkString = gNavigatorBundle.getString("pluginActivate.updateLabel");
            break;
          case Ci.nsIBlocklistService.STATE_VULNERABLE_NO_UPDATE:
            warningString = gNavigatorBundle.getString("pluginActivateVulnerable.label");
            linkString = gNavigatorBundle.getString("pluginActivate.riskLabel");
            break;
          }
        }
        document.getAnonymousElementByAttribute(this, "anonid", "center-item-warning-label").value = warningString;

        if (url || linkHandler) {
          link.value = linkString;
          if (url) {
            link.href = url;
          }
          if (linkHandler) {
            link.addEventListener("click", linkHandler, false);
          }
        }
        else {
          link.hidden = true;
        }
      ]]></constructor>
      <property name="value">
        <getter>
          return document.getAnonymousElementByAttribute(this, "anonid",
                   "center-item-menulist").value;
        </getter>
        <setter><!-- This should be used only in automated tests -->
          document.getAnonymousElementByAttribute(this, "anonid",
                    "center-item-menulist").value = val;
        </setter>
      </property>
    </implementation>
  </binding>

  <binding id="bad-content-notification" extends="chrome://global/content/bindings/notification.xml#popup-notification">
    <content>
      <xul:hbox align="start">
        <xul:image class="popup-notification-icon" xbl:inherits="popupid,mixedblockdisabled,trackingblockdisabled"/>
        <xul:vbox>
          <!-- header -->
          <xul:vbox>
            <xul:description anonid="badContentBlocked.title"
              class="popup-notification-item-title" xbl:inherits="popupid">
            </xul:description>
            <xul:description class="popup-notification-item-message"
              xbl:inherits="popupid">
              &badContentBlocked.moreinfo;
            </xul:description>
          </xul:vbox>
          <!-- mixed content -->
          <xul:vbox anonid="mixedContent" hidden="true">
            <xul:separator class="groove"/>
            <xul:hbox align="start">
              <xul:vbox>
                <xul:description class="popup-notification-item-title"
                  xbl:inherits="popupid">
                  &mixedContentBlocked2.message;
                </xul:description>
                <xul:description class="popup-notification-item-message"
                  xbl:inherits="popupid,mixedblockdisabled">
                  &mixedContentBlocked2.moreinfo;
                </xul:description>
                <xul:label anonid="mixedContent.helplink"
                  class="text-link plain" href=""
                  value="&mixedContentBlocked2.learnMore;"/>
              </xul:vbox>
              <xul:button
                type="menu" label="&mixedContentBlocked2.options;"
                sizetopopup="none">
                <xul:menupopup>
                  <xul:menuitem anonid="mixedContentAction.unblock"
                    hidden="true" label="&mixedContentBlocked2.unblock.label;"
                    accesskey="&mixedContentBlocked2.unblock.accesskey;"
                    oncommand="document.getBindingParent(this).disableMixedContentProtection();"/>
                  <xul:menuitem anonid="mixedContentAction.block"
                    hidden="true" label="&mixedContentBlocked2.block.label;"
                    accesskey="&mixedContentBlocked2.block.accesskey;"
                    oncommand="document.getBindingParent(this).enableMixedContentProtection();"/>
                </xul:menupopup>
              </xul:button>
            </xul:hbox>
            <xul:hbox class="popup-notification-footer" xbl:inherits="popupid,mixedblockdisabled">
              <xul:description class="popup-notification-item-message popup-notification-item-message-critical" xbl:inherits="popupid">
                  &mixedContentBlocked2.disabled.message;
              </xul:description>
            </xul:hbox>
          </xul:vbox>
          <!-- tracking content -->
          <xul:vbox anonid="trackingContent" hidden="true">
            <xul:separator class="groove"/>
            <xul:hbox align="start">
              <xul:vbox>
                <xul:description class="popup-notification-item-title"
                  xbl:inherits="popupid">
                  &trackingContentBlocked.message;
                </xul:description>
                <xul:description class="popup-notification-item-message"
                  xbl:inherits="popupid,trackingblockdisabled">
                  &trackingContentBlocked.moreinfo;
                </xul:description>
                <xul:label anonid="trackingContent.helplink"
                  class="text-link plain" href=""
                  value="&trackingContentBlocked.learnMore;"/>
              </xul:vbox>
              <xul:button
                type="menu" label="&trackingContentBlocked.options;"
                sizetopopup="none">
                <xul:menupopup>
                  <xul:menuitem anonid="trackingContentAction.unblock"
                    hidden="true" label="&trackingContentBlocked.unblock2.label;"
                    accesskey="&trackingContentBlocked.unblock2.accesskey;"
                    oncommand="document.getBindingParent(this).disableTrackingContentProtection();"/>
                  <xul:menuitem anonid="trackingContentAction.block"
                    hidden="true" label="&trackingContentBlocked.block.label;"
                    accesskey="&trackingContentBlocked.block.accesskey;"
                    oncommand="document.getBindingParent(this).enableTrackingContentProtection();"/>
                </xul:menupopup>
              </xul:button>
            </xul:hbox>
            <xul:hbox class="popup-notification-footer" xbl:inherits="popupid,trackingblockdisabled">
              <xul:description class="popup-notification-item-message popup-notification-item-message-critical" xbl:inherits="popupid">
                &trackingContentBlocked.disabled.message;
                </xul:description>
            </xul:hbox>
          </xul:vbox>
        </xul:vbox>
        <xul:vbox pack="start">
          <xul:toolbarbutton anonid="closebutton"
                             class="messageCloseButton popup-notification-closebutton tabbable close-icon"
                             xbl:inherits="oncommand=closebuttoncommand"
                             tooltiptext="&closeNotification.tooltip;"/>
        </xul:vbox>
      </xul:hbox>
    </content>
    <resources>
      <stylesheet src="chrome://global/skin/notification.css"/>
    </resources>
    <implementation>
      <field name="_brandShortName">
        document.getElementById("bundle_brand").getString("brandShortName")
      </field>
      <field name="_doorhangerTitle">
        document.getAnonymousElementByAttribute(this, "anonid",
          "badContentBlocked.title")
      </field>
      <field name="_mixedContent">
        document.getAnonymousElementByAttribute(this, "anonid",
            "mixedContent")
      </field>
      <field name="_mixedContentUnblock">
        document.getAnonymousElementByAttribute(this, "anonid",
          "mixedContentAction.unblock")
      </field>
      <field name="_mixedContentBlock">
        document.getAnonymousElementByAttribute(this, "anonid",
          "mixedContentAction.block");
      </field>
      <field name="_mixedContentHelpLink">
        document.getAnonymousElementByAttribute(this, "anonid",
          "mixedContent.helplink")
      </field>
      <property name="isMixedContentBlocked" readonly="true">
        <getter><![CDATA[
          return this.notification.options.state &
            Ci.nsIWebProgressListener.STATE_BLOCKED_MIXED_ACTIVE_CONTENT;
        ]]></getter>
      </property>
      <field name="_trackingContent">
        document.getAnonymousElementByAttribute(this, "anonid",
          "trackingContent")
      </field>
      <field name="_trackingContentUnblock">
        document.getAnonymousElementByAttribute(this, "anonid",
          "trackingContentAction.unblock")
      </field>
      <field name="_trackingContentBlock">
        document.getAnonymousElementByAttribute(this, "anonid",
          "trackingContentAction.block");
      </field>
      <field name="_trackingContentHelpLink">
        document.getAnonymousElementByAttribute(this, "anonid",
          "trackingContent.helplink")
      </field>
      <property name="isTrackingContentBlocked" readonly="true">
        <getter><![CDATA[
          return this.notification.options.state &
            Ci.nsIWebProgressListener.STATE_BLOCKED_TRACKING_CONTENT;
        ]]></getter>
      </property>
      <constructor><![CDATA[
        // default title
        _doorhangerTitle.value =
          gNavigatorBundle.getFormattedString(
            "badContentBlocked.notblocked.message", [this._brandShortName]);

        if (this.notification.options.state &
            Ci.nsIWebProgressListener.STATE_BLOCKED_MIXED_ACTIVE_CONTENT) {
          _doorhangerTitle.value =
            gNavigatorBundle.getFormattedString(
              "badContentBlocked.blocked.message", [this._brandShortName]);
          _mixedContent.hidden = false;
          _mixedContentUnblock.hidden = false;
          _mixedContentHelpLink.href =
            Services.urlFormatter.formatURLPref("app.support.baseURL")
              + "mixed-content";
        }
        if (this.notification.options.state &
            Ci.nsIWebProgressListener.STATE_LOADED_MIXED_ACTIVE_CONTENT) {
          this.setAttribute("mixedblockdisabled", true);
          _mixedContent.hidden = false;
          _mixedContentBlock.hidden = false;
          _mixedContentHelpLink.href =
            Services.urlFormatter.formatURLPref("app.support.baseURL")
              + "mixed-content";
        }
        if (this.notification.options.state &
            Ci.nsIWebProgressListener.STATE_BLOCKED_TRACKING_CONTENT) {
          _doorhangerTitle.value =
            gNavigatorBundle.getFormattedString(
              "badContentBlocked.blocked.message", [this._brandShortName]);
          _trackingContent.hidden = false;
          _trackingContentUnblock.hidden = false;
          _trackingContentHelpLink.href =
            Services.urlFormatter.formatURLPref("app.support.baseURL")
              + "tracking-protection";
        }
        if (this.notification.options.state &
            Ci.nsIWebProgressListener.STATE_LOADED_TRACKING_CONTENT) {
          this.setAttribute("trackingblockdisabled", true);
          _trackingContent.hidden = false;
          _trackingContentBlock.hidden = false;
          _trackingContentHelpLink.href =
            Services.urlFormatter.formatURLPref("app.support.baseURL")
              + "tracking-protection";
        }
      ]]></constructor>
      <method name="disableMixedContentProtection">
        <body><![CDATA[
          // Use telemetry to measure how often unblocking happens
          const kMIXED_CONTENT_UNBLOCK_EVENT = 2;
          let histogram =
            Services.telemetry.getHistogramById(
              "MIXED_CONTENT_UNBLOCK_COUNTER");
          histogram.add(kMIXED_CONTENT_UNBLOCK_EVENT);
          // Reload the page with the content unblocked
          BrowserReloadWithFlags(
            nsIWebNavigation.LOAD_FLAGS_ALLOW_MIXED_CONTENT);
        ]]></body>
      </method>
      <method name="enableMixedContentProtection">
        <body><![CDATA[
          let docShell = gBrowser.webNavigation.QueryInterface(Ci.nsIDocShell);
          docShell.mixedContentChannel = null;
          BrowserReload();
        ]]></body>
      </method>
      <method name="disableTrackingContentProtection">
        <body><![CDATA[
          // convert document URI into the format used by
          // nsChannelClassifier::ShouldEnableTrackingProtection
          // (any scheme turned into https is correct)
          let normalizedUrl = Services.io.newURI(
            "https://" + gBrowser.selectedBrowser.currentURI.hostPort,
            null, null);
          // Add the current host in the 'trackingprotection' consumer of
          // the permission manager using a normalized URI. This effectively
          // places this host on the tracking protection white list.
          Services.perms.add(normalizedUrl,
            "trackingprotection", Services.perms.ALLOW_ACTION);
          // Telemetry for disable protection
          let histogram = Services.telemetry.getHistogramById(
              "TRACKING_PROTECTION_EVENTS");
          histogram.add(1);
          BrowserReload();
        ]]></body>
      </method>
      <method name="enableTrackingContentProtection">
        <body><![CDATA[
          // Remove the current host from the 'trackingprotection' consumer
          // of the permission manager. This effectively removes this host
          // from the tracking protection white list (any list actually).
          Services.perms.remove(gBrowser.selectedBrowser.currentURI.host,
            "trackingprotection");
          // Telemetry for enable protection
          let histogram = Services.telemetry.getHistogramById(
              "TRACKING_PROTECTION_EVENTS");
          histogram.add(2);
          BrowserReload();
        ]]></body>
      </method>
    </implementation>
  </binding>

  <binding id="click-to-play-plugins-notification" extends="chrome://global/content/bindings/notification.xml#popup-notification">
    <content align="start" style="width: &pluginNotification.width;;">
      <xul:vbox flex="1" align="stretch" class="popup-notification-main-box"
                xbl:inherits="popupid">
        <xul:hbox class="click-to-play-plugins-notification-description-box" flex="1" align="start">
          <xul:description class="click-to-play-plugins-outer-description" flex="1">
            <html:span anonid="click-to-play-plugins-notification-description" />
            <xul:label class="text-link click-to-play-plugins-notification-link" anonid="click-to-play-plugins-notification-link" />
          </xul:description>
          <xul:toolbarbutton anonid="closebutton"
                             class="messageCloseButton popup-notification-closebutton tabbable close-icon"
                             xbl:inherits="oncommand=closebuttoncommand"
                             tooltiptext="&closeNotification.tooltip;"/>
        </xul:hbox>
        <xul:grid anonid="click-to-play-plugins-notification-center-box"
                  class="click-to-play-plugins-notification-center-box">
          <xul:columns>
            <xul:column flex="1"/>
            <xul:column/>
          </xul:columns>
          <xul:rows>
            <children includes="row"/>
            <xul:hbox pack="start" anonid="plugin-notification-showbox">
              <xul:button label="&pluginNotification.showAll.label;"
                          accesskey="&pluginNotification.showAll.accesskey;"
                          class="plugin-notification-showbutton"
                          oncommand="document.getBindingParent(this)._setState(2)"/>
            </xul:hbox>
          </xul:rows>
        </xul:grid>
        <xul:hbox anonid="button-container"
                  class="click-to-play-plugins-notification-button-container"
                  pack="center" align="center">
          <xul:button anonid="primarybutton"
                      class="click-to-play-popup-button"
                      oncommand="document.getBindingParent(this)._onButton(this)"
                      flex="1"/>
          <xul:button anonid="secondarybutton"
                      class="click-to-play-popup-button"
                      oncommand="document.getBindingParent(this)._onButton(this);"
                      flex="1"/>
        </xul:hbox>
        <xul:box hidden="true">
          <children/>
        </xul:box>
      </xul:vbox>
    </content>
    <resources>
      <stylesheet src="chrome://global/skin/notification.css"/>
    </resources>
    <implementation>
      <field name="_states">
        ({SINGLE: 0, MULTI_COLLAPSED: 1, MULTI_EXPANDED: 2})
      </field>
      <field name="_primaryButton">
        document.getAnonymousElementByAttribute(this, "anonid", "primarybutton");
      </field>
      <field name="_secondaryButton">
        document.getAnonymousElementByAttribute(this, "anonid", "secondarybutton")
      </field>
      <field name="_buttonContainer">
        document.getAnonymousElementByAttribute(this, "anonid", "button-container")
      </field>
      <field name="_brandShortName">
        document.getElementById("bundle_brand").getString("brandShortName")
      </field>
      <field name="_items">[]</field>
      <constructor><![CDATA[
        const XUL_NS = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
        let sortedActions = [];
        for (let action of this.notification.options.pluginData.values()) {
          sortedActions.push(action);
        }
        sortedActions.sort((a, b) => a.pluginName.localeCompare(b.pluginName));

        for (let action of sortedActions) {
          let item = document.createElementNS(XUL_NS, "row");
          item.setAttribute("class", "plugin-popupnotification-centeritem");
          item.action = action;
          this.appendChild(item);
          this._items.push(item);
        }
        switch (this._items.length) {
          case 0:
            PopupNotifications._dismiss();
            break;
          case 1:
            this._setState(this._states.SINGLE);
            break;
          default:
            if (this.notification.options.primaryPlugin) {
              this._setState(this._states.MULTI_COLLAPSED);
            } else {
              this._setState(this._states.MULTI_EXPANDED);
            }
        }
      ]]></constructor>
      <method name="_setState">
        <parameter name="state" />
        <body><![CDATA[
          var grid = document.getAnonymousElementByAttribute(this, "anonid", "click-to-play-plugins-notification-center-box");

          if (this._states.SINGLE == state) {
            grid.hidden = true;
            this._setupSingleState();
            return;
          }

          let host = this.notification.options.host;
          this._setupDescription("pluginActivateMultiple.message", null, host);

          var showBox = document.getAnonymousElementByAttribute(this, "anonid", "plugin-notification-showbox");

          var dialogStrings = Services.strings.createBundle("chrome://global/locale/dialog.properties");
          this._primaryButton.label = dialogStrings.GetStringFromName("button-accept");
          this._primaryButton.setAttribute("default", "true");

          this._secondaryButton.label = dialogStrings.GetStringFromName("button-cancel");
          this._primaryButton.setAttribute("action", "_multiAccept");
          this._secondaryButton.setAttribute("action", "_cancel");

          grid.hidden = false;

          if (this._states.MULTI_COLLAPSED == state) {
            for (let child of this.childNodes) {
              if (child.tagName != "row") {
                continue;
              }
              child.hidden = this.notification.options.primaryPlugin !=
                             child.action.permissionString;
            }
            showBox.hidden = false;
          }
          else {
            for (let child of this.childNodes) {
              if (child.tagName != "row") {
                continue;
              }
              child.hidden = false;
            }
            showBox.hidden = true;
          }
          this._setupLink(null);
        ]]></body>
      </method>
      <method name="_setupSingleState">
        <body><![CDATA[
          var action = this._items[0].action;
          var host = action.pluginPermissionHost;

          let label, linkLabel, linkUrl, button1, button2;

          if (action.fallbackType == Ci.nsIObjectLoadingContent.PLUGIN_ACTIVE) {
            button1 = {
              label: "pluginBlockNow.label",
              accesskey: "pluginBlockNow.accesskey",
              action: "_singleBlock"
            };
            button2 = {
              label: "pluginContinue.label",
              accesskey: "pluginContinue.accesskey",
              action: "_singleContinue",
              default: true
            };
            switch (action.blocklistState) {
            case Ci.nsIBlocklistService.STATE_NOT_BLOCKED:
              label = "pluginEnabled.message";
              linkLabel = "pluginActivate.learnMore";
              break;

            case Ci.nsIBlocklistService.STATE_BLOCKED:
              Cu.reportError(Error("Cannot happen!"));
              break;

            case Ci.nsIBlocklistService.STATE_VULNERABLE_UPDATE_AVAILABLE:
              label = "pluginEnabledOutdated.message";
              linkLabel = "pluginActivate.updateLabel";
              break;

            case Ci.nsIBlocklistService.STATE_VULNERABLE_NO_UPDATE:
              label = "pluginEnabledVulnerable.message";
              linkLabel = "pluginActivate.riskLabel"
              break;

            default:
              Cu.reportError(Error("Unexpected blocklist state"));
            }
          }
          else if (action.pluginTag.enabledState == Ci.nsIPluginTag.STATE_DISABLED) {
            let linkElement =
              document.getAnonymousElementByAttribute(
                         this, "anonid", "click-to-play-plugins-notification-link");
            linkElement.textContent = gNavigatorBundle.getString("pluginActivateDisabled.manage");
            linkElement.setAttribute("onclick", "gPluginHandler.managePlugins()");

            let descElement = document.getAnonymousElementByAttribute(this, "anonid", "click-to-play-plugins-notification-description");
            descElement.textContent = gNavigatorBundle.getFormattedString(
              "pluginActivateDisabled.message", [action.pluginName, this._brandShortName]) + " ";
            this._buttonContainer.hidden = true;
            return;
          }
          else if (action.blocklistState == Ci.nsIBlocklistService.STATE_BLOCKED) {
            let descElement = document.getAnonymousElementByAttribute(this, "anonid", "click-to-play-plugins-notification-description");
            descElement.textContent = gNavigatorBundle.getFormattedString(
              "pluginActivateBlocked.message", [action.pluginName, this._brandShortName]) + " ";
            this._setupLink("pluginActivate.learnMore", action.detailsLink);
            this._buttonContainer.hidden = true;
            return;
          }
          else {
            button1 = {
              label: "pluginActivateNow.label",
              accesskey: "pluginActivateNow.accesskey",
              action: "_singleActivateNow"
            };
            button2 = {
              label: "pluginActivateAlways.label",
              accesskey: "pluginActivateAlways.accesskey",
              action: "_singleActivateAlways"
            };
            switch (action.blocklistState) {
            case Ci.nsIBlocklistService.STATE_NOT_BLOCKED:
              label = "pluginActivateNew.message";
              linkLabel = "pluginActivate.learnMore";
              button2.default = true;
              break;

            case Ci.nsIBlocklistService.STATE_VULNERABLE_UPDATE_AVAILABLE:
              label = "pluginActivateOutdated.message";
              linkLabel = "pluginActivate.updateLabel";
              button1.default = true;
              break;

            case Ci.nsIBlocklistService.STATE_VULNERABLE_NO_UPDATE:
              label = "pluginActivateVulnerable.message";
              linkLabel = "pluginActivate.riskLabel"
              button1.default = true;
              break;

            default:
              Cu.reportError(Error("Unexpected blocklist state"));
            }
          }
          this._setupDescription(label, action.pluginName, host);
          this._setupLink(linkLabel, action.detailsLink);

          this._primaryButton.label = gNavigatorBundle.getString(button1.label);
          this._primaryButton.accessKey = gNavigatorBundle.getString(button1.accesskey);
          this._primaryButton.setAttribute("action", button1.action);

          this._secondaryButton.label = gNavigatorBundle.getString(button2.label);
          this._secondaryButton.accessKey = gNavigatorBundle.getString(button2.accesskey);
          this._secondaryButton.setAttribute("action", button2.action);
          if (button1.default) {
            this._primaryButton.setAttribute("default", "true");
          }
          else if (button2.default) {
            this._secondaryButton.setAttribute("default", "true");
          }
        ]]></body>
      </method>
      <method name="_setupDescription">
        <parameter name="baseString" />
        <parameter name="pluginName" /> <!-- null for the multiple-plugin case -->
        <parameter name="host" />
        <body><![CDATA[
          var bsn = this._brandShortName;
          var span = document.getAnonymousElementByAttribute(this, "anonid", "click-to-play-plugins-notification-description");
          while (span.lastChild) {
            span.removeChild(span.lastChild);
          }

          var args = ["__host__", this._brandShortName];
          if (pluginName) {
            args.unshift(pluginName);
          }
          var bases = gNavigatorBundle.getFormattedString(baseString, args).
            split("__host__", 2);

          span.appendChild(document.createTextNode(bases[0]));
          var hostSpan = document.createElementNS("http://www.w3.org/1999/xhtml", "em");
          hostSpan.appendChild(document.createTextNode(host));
          span.appendChild(hostSpan);
          span.appendChild(document.createTextNode(bases[1] + " "));
        ]]></body>
      </method>
      <method name="_setupLink">
        <parameter name="linkString"/>
        <parameter name="linkUrl" />
        <body><![CDATA[
          var link = document.getAnonymousElementByAttribute(this, "anonid", "click-to-play-plugins-notification-link");
          if (!linkString || !linkUrl) {
            link.hidden = true;
            return;
          }

          link.hidden = false;
          link.textContent = gNavigatorBundle.getString(linkString);
          link.href = linkUrl;
        ]]></body>
      </method>
      <method name="_onButton">
        <parameter name="aButton" />
        <body><![CDATA[
          let methodName = aButton.getAttribute("action");
          this[methodName]();
        ]]></body>
      </method>
      <method name="_singleActivateNow">
        <body><![CDATA[
          gPluginHandler._updatePluginPermission(this.notification,
            this._items[0].action,
            "allownow");
          this._cancel();
        ]]></body>
      </method>
      <method name="_singleBlock">
        <body><![CDATA[
          gPluginHandler._updatePluginPermission(this.notification,
            this._items[0].action,
            "block");
            this._cancel();
        ]]></body>
      </method>
      <method name="_singleActivateAlways">
        <body><![CDATA[
          gPluginHandler._updatePluginPermission(this.notification,
            this._items[0].action,
            "allowalways");
          this._cancel();
        ]]></body>
      </method>
      <method name="_singleContinue">
        <body><![CDATA[
          gPluginHandler._updatePluginPermission(this.notification,
            this._items[0].action,
            "continue");
          this._cancel();
        ]]></body>
      </method>
      <method name="_multiAccept">
        <body><![CDATA[
          for (let item of this._items) {
            let action = item.action;
            if (action.pluginTag.enabledState == Ci.nsIPluginTag.STATE_DISABLED ||
                action.blocklistState == Ci.nsIBlocklistService.STATE_BLOCKED) {
              continue;
            }
            gPluginHandler._updatePluginPermission(this.notification,
              item.action, item.value);
          }
          this._cancel();
        ]]></body>
      </method>
      <method name="_cancel">
        <body><![CDATA[
          PopupNotifications._dismiss();
        ]]></body>
      </method>
      <method name="_accept">
        <parameter name="aEvent" />
        <body><![CDATA[
          if (aEvent.defaultPrevented)
            return;
          aEvent.preventDefault();
          if (this._primaryButton.getAttribute("default") == "true") {
            this._primaryButton.click();
          }
          else if (this._secondaryButton.getAttribute("default") == "true") {
            this._secondaryButton.click();
          }
        ]]></body>
      </method>
    </implementation>
    <handlers>
      <!-- The _accept method checks for .defaultPrevented so that if focus is in a button,
           enter activates the button and not this default action -->
      <handler event="keypress" keycode="VK_RETURN" group="system" action="this._accept(event);"/>
    </handlers>
  </binding>

  <binding id="splitmenu">
    <content>
      <xul:hbox anonid="menuitem" flex="1"
                class="splitmenu-menuitem"
                xbl:inherits="iconic,label,disabled,onclick=oncommand,_moz-menuactive=active"/>
      <xul:menu anonid="menu" class="splitmenu-menu"
                xbl:inherits="disabled,_moz-menuactive=active"
                oncommand="event.stopPropagation();">
        <children includes="menupopup"/>
      </xul:menu>
    </content>

    <implementation implements="nsIDOMEventListener">
      <constructor><![CDATA[
        this._parentMenupopup.addEventListener("DOMMenuItemActive", this, false);
        this._parentMenupopup.addEventListener("popuphidden", this, false);
      ]]></constructor>

      <destructor><![CDATA[
        this._parentMenupopup.removeEventListener("DOMMenuItemActive", this, false);
        this._parentMenupopup.removeEventListener("popuphidden", this, false);
      ]]></destructor>

      <field name="menuitem" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "menuitem");
      </field>
      <field name="menu" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "menu");
      </field>

      <field name="_menuDelay">600</field>

      <field name="_parentMenupopup"><![CDATA[
        this._getParentMenupopup(this);
      ]]></field>

      <method name="_getParentMenupopup">
        <parameter name="aNode"/>
        <body><![CDATA[
          let node = aNode.parentNode;
          while (node) {
            if (node.localName == "menupopup")
              break;
            node = node.parentNode;
          }
          return node;
        ]]></body>
      </method>

      <method name="handleEvent">
        <parameter name="event"/>
        <body><![CDATA[
          switch (event.type) {
            case "DOMMenuItemActive":
              if (this.getAttribute("active") == "true" &&
                  event.target != this &&
                  this._getParentMenupopup(event.target) == this._parentMenupopup)
                this.removeAttribute("active");
              break;
            case "popuphidden":
              if (event.target == this._parentMenupopup)
                this.removeAttribute("active");
              break;
          }
        ]]></body>
      </method>
    </implementation>

    <handlers>
      <handler event="mouseover"><![CDATA[
        if (this.getAttribute("active") != "true") {
          this.setAttribute("active", "true");

          let event = document.createEvent("Events");
          event.initEvent("DOMMenuItemActive", true, false);
          this.dispatchEvent(event);

          if (this.getAttribute("disabled") != "true") {
            let self = this;
            setTimeout(function () {
              if (self.getAttribute("active") == "true")
                self.menu.open = true;
            }, this._menuDelay);
          }
        }
      ]]></handler>

      <handler event="popupshowing"><![CDATA[
        if (event.target == this.firstChild &&
            this._parentMenupopup._currentPopup)
          this._parentMenupopup._currentPopup.hidePopup();
      ]]></handler>

      <handler event="click" phase="capturing"><![CDATA[
        if (this.getAttribute("disabled") == "true") {
          // Prevent the command from being carried out
          event.stopPropagation();
          return;
        }

        let node = event.originalTarget;
        while (true) {
          if (node == this.menuitem)
            break;
          if (node == this)
            return;
          node = node.parentNode;
        }

        this._parentMenupopup.hidePopup();
      ]]></handler>
    </handlers>
  </binding>

  <binding id="menuitem-tooltip" extends="chrome://global/content/bindings/menu.xml#menuitem">
    <implementation>
      <constructor><![CDATA[
        this.setAttribute("tooltiptext", this.getAttribute("acceltext"));
        // TODO: Simplify this to this.setAttribute("acceltext", "") once bug
        // 592424 is fixed
        document.getAnonymousElementByAttribute(this, "anonid", "accel").firstChild.setAttribute("value", "");
      ]]></constructor>
    </implementation>
  </binding>

  <binding id="menuitem-iconic-tooltip" extends="chrome://global/content/bindings/menu.xml#menuitem-iconic">
    <implementation>
      <constructor><![CDATA[
        this.setAttribute("tooltiptext", this.getAttribute("acceltext"));
        // TODO: Simplify this to this.setAttribute("acceltext", "") once bug
        // 592424 is fixed
        document.getAnonymousElementByAttribute(this, "anonid", "accel").firstChild.setAttribute("value", "");
      ]]></constructor>
    </implementation>
  </binding>

 <binding id="promobox">
    <content>
      <xul:hbox class="panel-promo-box" align="start" flex="1">
        <xul:hbox align="center" flex="1">
          <xul:image class="panel-promo-icon"/>
          <xul:description anonid="promo-message" class="panel-promo-message" flex="1">
            <xul:description anonid="promo-link"
                             class="plain text-link inline-link"
                             onclick="document.getBindingParent(this).onLinkClick();"/>
          </xul:description>
        </xul:hbox>
        <xul:toolbarbutton class="panel-promo-closebutton close-icon"
                           oncommand="document.getBindingParent(this).onCloseButtonCommand();"
                           tooltiptext="&closeNotification.tooltip;"/>
      </xul:hbox>
    </content>

    <implementation implements="nsIDOMEventListener">
      <constructor><![CDATA[
        this._panel.addEventListener("popupshowing", this, false);
      ]]></constructor>

      <destructor><![CDATA[
        this._panel.removeEventListener("popupshowing", this, false);
      ]]></destructor>

      <field name="_panel" readonly="true"><![CDATA[
        let node = this.parentNode;
        while(node && node.localName != "panel") {
          node = node.parentNode;
        }
        node;
      ]]></field>
      <field name="_promomessage" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "promo-message");
      </field>
      <field name="_promolink" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "promo-link");
      </field>
      <field name="_brandBundle" readonly="true">
        Services.strings.createBundle("chrome://branding/locale/brand.properties");
      </field>
      <property name="_viewsLeftMap">
        <getter><![CDATA[
          try {
            return JSON.parse(Services.prefs.getCharPref("browser.syncPromoViewsLeftMap"));
          } catch (ex) {}
          return {};
        ]]></getter>
      </property>
      <property name="_viewsLeft">
        <getter><![CDATA[
          let views = 5;
          let map = this._viewsLeftMap;
          if (this._notificationType in map) {
            views = map[this._notificationType];
          }
          return views;
        ]]></getter>
        <setter><![CDATA[
          let map = this._viewsLeftMap;
          map[this._notificationType] = val;
          Services.prefs.setCharPref("browser.syncPromoViewsLeftMap",
                                     JSON.stringify(map));
          return val;
        ]]></setter>
      </property>
      <property name="_notificationType">
        <getter><![CDATA[
          // Use the popupid attribute to identify the notification type,
          // otherwise just rely on the panel id for common arrowpanels.
          let type = this._panel.firstChild.getAttribute("popupid") ||
                     this._panel.id;
          if (type.startsWith("password-"))
            return "passwords";
          if (type == "editBookmarkPanel")
            return "bookmarks";
          if (type == "addon-install-complete") {
            if (!Services.prefs.prefHasUserValue("services.sync.username"))
              return "addons";
            if (!Services.prefs.getBoolPref("services.sync.engine.addons"))
              return "addons-sync-disabled";
          }
          return null;
        ]]></getter>
      </property>
      <property name="_notificationMessage">
        <getter><![CDATA[
          return gNavigatorBundle.getFormattedString(
            "syncPromoNotification." + this._notificationType + ".description",
            [this._brandBundle.GetStringFromName("syncBrandShortName")]
          );
        ]]></getter>
      </property>
      <property name="_notificationLink">
        <getter><![CDATA[
          if (this._notificationType == "addons-sync-disabled") {
            return "https://support.mozilla.org/kb/how-do-i-enable-add-sync";
          }
          return "https://services.mozilla.com/sync/";
        ]]></getter>
      </property>
      <method name="onCloseButtonCommand">
        <body><![CDATA[
          this._viewsLeft = 0;
          this.hidden = true;
        ]]></body>
      </method>
      <method name="onLinkClick">
        <body><![CDATA[
          // Open a new selected tab and close the current panel.
          openUILinkIn(this._promolink.getAttribute("href"), "tab");
          this._panel.hidePopup();
        ]]></body>
      </method>
      <method name="handleEvent">
        <parameter name="event"/>
        <body><![CDATA[
          if (event.type != "popupshowing" || event.target != this._panel)
            return;

          // A previous notification may have unhidden this.
          this.hidden = true;

          // Only handle supported notification panels.
          if (!this._notificationType) {
            return;
          }

          let viewsLeft = this._viewsLeft;
          if (viewsLeft) {
            if (Services.prefs.prefHasUserValue("services.sync.username") &&
               this._notificationType != "addons-sync-disabled") {
              // If the user has already setup Sync, don't show the notification.
              this._viewsLeft = 0;
              // Be sure to hide the panel, in case it was visible and the user
              // decided to setup Sync after noticing it.
              viewsLeft = 0;
              // The panel is still hidden, just bail out.
              return;
            }
            else {
              this._viewsLeft = viewsLeft - 1;
            }

            this._promolink.setAttribute("href", this._notificationLink);
            this._promolink.value = gNavigatorBundle.getString("syncPromoNotification.learnMoreLinkText");

            this.hidden = false;

            // HACK: The description element doesn't wrap correctly in panels,
            // thus set a width on it, based on the available space, before
            // setting its textContent.  Then set its height as well, to
            // fix wrong height calculation on Linux (bug 659578).
            this._panel.addEventListener("popupshown", function panelShown() {
              this._panel.removeEventListener("popupshown", panelShown, true);
              // Previous popupShown events may close the panel or change
              // its contents, so ensure this is still valid.
              if (this._panel.state != "open" || !this._notificationType)
                return;
              this._promomessage.width = this._promomessage.getBoundingClientRect().width;
              this._promomessage.firstChild.textContent = this._notificationMessage;
              this._promomessage.height = this._promomessage.getBoundingClientRect().height;
            }.bind(this), true);
          }
        ]]></body>
      </method>
    </implementation>
  </binding>
</bindings>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <!-- private browsing mode -->
    <item gecko:state_private="true"
          android:state_focused="true"
          android:drawable="@drawable/url_bar_entry_pressed_pb"/>

    <item gecko:state_private="true"
          android:state_pressed="true"
          android:drawable="@drawable/url_bar_entry_pressed_pb"/>

    <item gecko:state_private="true"
          android:state_selected="true"
          android:drawable="@drawable/url_bar_entry_pressed_pb"/>

    <item gecko:state_private="true"
          android:drawable="@drawable/url_bar_entry_default_pb"/>
 
    <!-- normal modes -->
    <item android:state_focused="true"
          android:drawable="@drawable/url_bar_entry_pressed"/>

    <item android:state_pressed="true"
          android:drawable="@drawable/url_bar_entry_pressed"/>

    <item android:state_selected="true"
          android:drawable="@drawable/url_bar_entry_pressed"/>

    <item android:drawable="@drawable/url_bar_entry_default"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <!-- private pressed state -->
    <item gecko:state_private="true"
          android:state_pressed="true"
          android:drawable="@color/highlight_nav_pb"/>

    <!-- focused state -->
    <item gecko:state_private="true"
          android:state_focused="true"
          android:state_pressed="false"
          android:drawable="@color/highlight_nav_focused_pb"/>

    <!-- pressed state -->
    <item android:state_pressed="true"
          android:drawable="@color/highlight_nav"/>

    <!-- focused state -->
    <item android:state_focused="true"
          android:state_pressed="false"
          android:drawable="@color/highlight_nav_focused"/>

    <!-- private browsing mode -->
    <item gecko:state_private="true"
          android:drawable="@color/background_private"/>

    <!-- normal mode -->
    <item android:drawable="@color/background_normal"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <!-- private browsing mode -->
    <item gecko:state_private="true" android:color="#FF7F828A" />

    <!-- normal mode -->
    <item android:color="#FF666666"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:gecko="http://schemas.android.com/apk/res-auto">

    <!-- private browsing mode -->
    <item gecko:state_private="true" android:color="#FFDDDDDD" />

    <!-- dark theme -->
    <item gecko:state_dark="true" android:color="#FFDDDDDD"/>

    <!-- light theme -->
    <item gecko:state_light="true" android:color="#FF222222"/>

    <!-- normal mode -->
    <item android:color="#FF222222"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<clip xmlns:android="http://schemas.android.com/apk/res/android"
      android:drawable="@drawable/url_bar_entry"
      android:clipOrientation="horizontal"
      android:gravity="right"/><?xml version="1.0" encoding="Windows-1252" ?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings [
<!ENTITY % browserDTD SYSTEM "chrome://browser/locale/browser.dtd">
%browserDTD;
]>

<bindings
    xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="urlbar" extends="chrome://global/content/bindings/autocomplete.xml#autocomplete">
    <implementation implements="nsIObserver">
      <constructor>
        <![CDATA[
          this._mayFormat = Services.prefs.getBoolPref("browser.urlbar.formatting.enabled");
          this._mayTrimURLs = Services.prefs.getBoolPref("browser.urlbar.trimURLs");
          this._maySelectAll = Services.prefs.getBoolPref("browser.urlbar.doubleClickSelectsAll");

          Services.prefs.addObserver("browser.urlbar.formatting.enabled", this, false);
          Services.prefs.addObserver("browser.urlbar.trimURLs", this, false);
          Services.prefs.addObserver("browser.urlbar.doubleClickSelectsAll", this, false);

          this.inputField.controllers.insertControllerAt(0, this._copyCutValueController);

          this.minResultsForPopup = 0;
          this.popup._input = this;
        ]]>
      </constructor>

      <destructor>
        <![CDATA[
          Services.prefs.removeObserver("browser.urlbar.formatting.enabled", this);
          Services.prefs.removeObserver("browser.urlbar.trimURLs", this);
          Services.prefs.removeObserver("browser.urlbar.doubleClickSelectsAll", this);
        ]]>
      </destructor>

      <field name="_mayFormat"/>
      <field name="_mayTrimURLs"/>
      <field name="_maySelectAll"/>
      <field name="_lastKnownGoodURL"/>

      <method name="openPopup">
        <body>
          <![CDATA[
            this.popup.openAutocompletePopup(this, null);
          ]]>
        </body>
      </method>

      <method name="closePopup">
        <body>
          <![CDATA[
            this.popup.closePopup(this, null);
          ]]>
        </body>
      </method>

      <!-- URI Display: Domain Highlighting -->

      <method name="_clearFormatting">
        <body>
          <![CDATA[
            let controller = this.editor.selectionController;
            let selection = controller.getSelection(controller.SELECTION_URLSECONDARY);
            selection.removeAllRanges();
          ]]>
        </body>
      </method>

      <method name="formatValue">
        <body>
          <![CDATA[
            if (!this._mayFormat || this.isEditing)
              return;

            let controller = this.editor.selectionController;
            let selection = controller.getSelection(controller.SELECTION_URLSECONDARY);
            selection.removeAllRanges();

            let textNode = this.editor.rootElement.firstChild;
            let value = textNode.textContent;

            let protocol = value.match(/^[a-z\d.+\-]+:(?=[^\d])/);
            if (protocol &&
                ["http:", "https:", "ftp:"].indexOf(protocol[0]) == -1)
              return;
            let matchedURL = value.match(/^((?:[a-z]+:\/\/)?(?:[^\/]+@)?)(.+?)(?::\d+)?(?:\/|$)/);
            if (!matchedURL)
              return;

            let [, preDomain, domain] = matchedURL;
            let baseDomain = domain;
            let subDomain = "";
            // getBaseDomainFromHost doesn't recognize IPv6 literals in brackets as IPs (bug 667159)
            if (domain[0] != "[") {
              try {
                baseDomain = Services.eTLD.getBaseDomainFromHost(domain);
                if (!domain.endsWith(baseDomain)) {
                  // getBaseDomainFromHost converts its resultant to ACE.
                  let IDNService = Cc["@mozilla.org/network/idn-service;1"]
                                   .getService(Ci.nsIIDNService);
                  baseDomain = IDNService.convertACEtoUTF8(baseDomain);
                }
              } catch (e) {}
            }
            if (baseDomain != domain) {
              subDomain = domain.slice(0, -baseDomain.length);
            }

            let rangeLength = preDomain.length + subDomain.length;
            if (rangeLength) {
              let range = document.createRange();
              range.setStart(textNode, 0);
              range.setEnd(textNode, rangeLength);
              selection.addRange(range);
            }

            let startRest = preDomain.length + domain.length;
            if (startRest < value.length) {
              let range = document.createRange();
              range.setStart(textNode, startRest);
              range.setEnd(textNode, value.length);
              selection.addRange(range);
            }
          ]]>
        </body>
      </method>

      <!-- URI Display: Scheme and Trailing Slash Triming -->

      <method name="_trimURL">
        <parameter name="aURL"/>
        <body>
          <![CDATA[
            // This function must not modify the given URL such that calling
            // nsIURIFixup::createFixupURI with the rfdesult will produce a different URI.
            return aURL /* remove single trailing slash for http/https/ftp URLs */
               .replace(/^((?:http|https|ftp):\/\/[^/]+)\/$/, "$1")
                /* remove http:// unless the host starts with "ftp\d*\." or contains "@" */
               .replace(/^http:\/\/((?!ftp\d*\.)[^\/@]+(?:\/|$))/, "$1");
          ]]>
        </body>
      </method>

      <method name="_getSelectedValueForClipboard">
        <body>
          <![CDATA[
            // Grab the actual input field's value, not our value, which could include moz-action:
            let inputVal = this.inputField.value;
            let selectedVal = inputVal.substring(this.selectionStart, this.selectionEnd);

            // If the selection doesn't start at the beginning or doesn't span the full domain or
            // the URL bar is modified, nothing else to do here.
            if (this.selectionStart > 0 || this.valueIsTyped)
              return selectedVal;

            // The selection doesn't span the full domain if it doesn't contain a slash and is
            // followed by some character other than a slash.
            if (!selectedVal.contains("/")) {
              let remainder = inputVal.replace(selectedVal, "");
              if (remainder != "" && remainder[0] != "/")
                return selectedVal;
            }

            let uriFixup = Cc["@mozilla.org/docshell/urifixup;1"].getService(Ci.nsIURIFixup);

            let uri;
            try {
              uri = uriFixup.createFixupURI(inputVal, Ci.nsIURIFixup.FIXUP_FLAG_NONE);
            } catch (e) {}
            if (!uri)
              return selectedVal;

            // Only copy exposable URIs
            try {
              uri = uriFixup.createExposableURI(uri);
            } catch (ex) {}

            // If the entire URL is selected, just use the actual loaded URI.
            if (inputVal == selectedVal) {
              // ... but only if  isn't a javascript: or data: URI, since those
              // are hard to read when encoded
              if (!uri.schemeIs("javascript") && !uri.schemeIs("data")) {
                // Parentheses are known to confuse third-party applications (bug 458565).
                selectedVal = uri.spec.replace(/[()]/g, function (c) escape(c));
              }

              return selectedVal;
            }

            // Just the beginning of the URL is selected, check for a trimmed value
            let spec = uri.spec;
            let trimmedSpec = this._trimURL(spec);
            if (spec != trimmedSpec) {
              // Prepend the portion that trimURL removed from the beginning.
              // This assumes trimURL will only truncate the URL at
              // the beginning or end (or both).
              let trimmedSegments = spec.split(trimmedSpec);
              selectedVal = trimmedSegments[0] + selectedVal;
            }

            return selectedVal;
          ]]>
        </body>
      </method>

      <field name="_copyCutValueController">
        <![CDATA[
          ({
            urlbar: this,
            doCommand: function(aCommand) {
              let urlbar = this.urlbar;
              let val = urlbar._getSelectedValueForClipboard();
              if (!val)
                return;

              if (aCommand == "cmd_cut" && this.isCommandEnabled(aCommand)) {
                let start = urlbar.selectionStart;
                let end = urlbar.selectionEnd;
                urlbar.inputField.value = urlbar.inputField.value.substring(0, start) +
                                          urlbar.inputField.value.substring(end);
                urlbar.selectionStart = urlbar.selectionEnd = start;
              }

              Cc["@mozilla.org/widget/clipboardhelper;1"]
                .getService(Ci.nsIClipboardHelper)
                .copyString(val, document);
            },

            supportsCommand: function(aCommand) {
              switch (aCommand) {
                case "cmd_copy":
                case "cmd_cut":
                  return true;
              }
              return false;
            },

            isCommandEnabled: function(aCommand) {
              let urlbar = this.urlbar;
              return this.supportsCommand(aCommand) &&
                     (aCommand != "cmd_cut" || !urlbar.readOnly) &&
                     urlbar.selectionStart < urlbar.selectionEnd;
            },

            onEvent: function(aEventName) {}
          })
        ]]>
      </field>

      <method name="trimValue">
        <parameter name="aURL"/>
        <body>
          <![CDATA[
            return (this._mayTrimURLs) ? this._trimURL(aURL) : aURL;
          ]]>
        </body>
      </method>

      <!-- URI Editing -->

      <property name="isEditing" readonly="true">
        <getter>
          <![CDATA[
            return Elements.urlbarState.hasAttribute("editing");
          ]]>
        </getter>
      </property>

      <method name="beginEditing">
        <parameter name="aShouldDismiss"/>
        <body>
          <![CDATA[
            if (this.isEditing)
              return;

            Elements.urlbarState.setAttribute("editing", true);
            this._lastKnownGoodURL = this.value;

            if (!this.focused) {
              this.focus();
              // If we force focus, ensure we're visible.
              if (ContextUI.displayNavbar()) {
                // If we forced visibility, ensure we're positioned above keyboard.
                // (Previous "blur" may have forced us down behind it.)
                ContentAreaObserver.updateAppBarPosition();
              }
            }

            this._clearFormatting();
            this.select();

            if (aShouldDismiss)
              ContextUI.dismissTabs();

            if (!InputSourceHelper.isPrecise) {
              let inputRectangle = this.inputField.getBoundingClientRect();
              SelectionHelperUI.attachEditSession(ChromeSelectionHandler,
                  inputRectangle.left, inputRectangle.top, this);
            }
          ]]>
        </body>
      </method>

      <method name="endEditing">
        <parameter name="aShouldRevert"/>
        <body>
          <![CDATA[
            if (!this.isEditing)
              return;

            Elements.urlbarState.removeAttribute("editing");
            this.closePopup();
            this.formatValue();

            if (this.focused)
              this.blur();

            if (aShouldRevert)
              this.value = this._lastKnownGoodURL;
          ]]>
        </body>
      </method>

      <!-- URI Submission -->

      <method name="_canonizeURL">
        <parameter name="aURL"/>
        <parameter name="aTriggeringEvent"/>
        <body>
          <![CDATA[
            if (!aURL)
              return "";

            // Only add the suffix when the URL bar value isn't already "URL-like",
            // and only if we get a keyboard event, to match user expectations.
            if (/^\s*[^.:\/\s]+(?:\/.*|\s*)$/i.test(aURL)) {
              let accel = aTriggeringEvent.ctrlKey;
              let shift = aTriggeringEvent.shiftKey;
              let suffix = "";

              switch (true) {
                case (accel && shift):
                  suffix = ".org/";
                  break;
                case (shift):
                  suffix = ".net/";
                  break;
                case (accel):
                  try {
                    suffix = gPrefService.getCharPref("browser.fixup.alternate.suffix");
                    if (suffix.charAt(suffix.length - 1) != "/")
                      suffix += "/";
                  } catch(e) {
                    suffix = ".com/";
                  }
                  break;
              }

              if (suffix) {
                // trim leading/trailing spaces (bug 233205)
                aURL = aURL.trim();

                // Tack www. and suffix on.  If user has appended directories, insert
                // suffix before them (bug 279035).  Be careful not to get two slashes.
                let firstSlash = aURL.indexOf("/");
                if (firstSlash >= 0) {
                  aURL = aURL.substring(0, firstSlash) + suffix + aURL.substring(firstSlash + 1);
                } else {
                  aURL = aURL + suffix;
                }
                aURL = "http://www." + aURL;
              }
            }

            return aURL;
          ]]>
        </body>
      </method>

      <method name="submitURL">
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            // If the address was typed in by a user, tidy it up
            if (aEvent instanceof KeyEvent)
              this.value = this._canonizeURL(this.value, aEvent);

            this.endEditing();
            BrowserUI.goToURI(this.value);

            return true;
          ]]>
        </body>
      </method>

      <method name="submitSearch">
        <parameter name="anEngineName"/>
        <body>
          <![CDATA[
            this.endEditing();
            BrowserUI.doOpenSearch(anEngineName);

            return true;
          ]]>
        </body>
      </method>

      <!-- nsIObserver -->

      <method name="observe">
        <parameter name="aSubject"/>
        <parameter name="aTopic"/>
        <parameter name="aData"/>
        <body>
          <![CDATA[
            if (aTopic != "nsPref:changed")
              return;

            switch (aData) {
              case "browser.urlbar.formatting.enabled":
                this._mayFormat = Services.prefs.getBoolPref(aData);
                if (!this._mayFormat) this._clearFormatting();
                break;
              case "browser.urlbar.trimURLs":
                this._mayTrimURLs = Services.prefs.getBoolPref(aData);
                break;
              case "browser.urlbar.doubleClickSelectsAll":
                this._maySelectAll = Services.prefs.getBoolPref(aData);
                break;
            }
          ]]>
        </body>
      </method>
    </implementation>

    <handlers>
      <!-- Entering editing mode -->

      <handler event="focus" phase="capturing">
        <![CDATA[
          this.beginEditing();
        ]]>
      </handler>

      <handler event="input" phase="capturing">
        <![CDATA[
          // Ensures that paste-and-go actually brings the URL bar into editing mode
          // and displays the half-height autocomplete popup.
          this.beginEditing();
          this.openPopup();
        ]]>
      </handler>

      <handler event="click" phase="capturing">
        <![CDATA[
          // workaround for bug 925457: taping browser chrome resets last tap
          // co-ordinates to 'undefined' so that we know not to shift the
          // browser when the keyboard is up in SelectionHandler's
          // _calcNewContentPosition().
          Browser.selectedTab.browser.messageManager.sendAsyncMessage(
              "Browser:ResetLastPos", {
                xPos: null,
                yPos: null
              });
          this.beginEditing(true);
        ]]>
      </handler>

      <!-- Editing mode behaviors -->

      <handler event="dblclick" phase="capturing">
        <![CDATA[
            if (this._maySelectAll) this.select();
        ]]>
      </handler>

      <handler event="contextmenu" phase="capturing">
        <![CDATA[
          let box = this.inputField.parentNode;
          box.showContextMenu(this, event, true);
        ]]>
      </handler>

      <!-- Leaving editing mode -->

      <handler event="blur" phase="capturing">
        <![CDATA[
          this.endEditing();
        ]]>
      </handler>

      <handler event="keypress" phase="capturing" keycode="VK_RETURN"
               modifiers="accel shift any">
        <![CDATA[
          if (this.popup.submitSelected())
            return;

          if (this.submitURL(event))
            return;
        ]]>
      </handler>

      <handler event="keypress" phase="capturing" keycode="VK_UP">
        <![CDATA[
          if (!this.popup.hasSelection) {
            // Treat the first up as a down key to trick handleKeyNavigation() to start
            // keyboard navigation on autocomplete popup.
            this.mController.handleKeyNavigation(KeyEvent.DOM_VK_DOWN);
            event.preventDefault();
          }
        ]]>
      </handler>
    </handlers>
  </binding>

  <binding id="urlbar-autocomplete">
    <content class="meta-section-container" pack="end">
      <xul:vbox class="meta-section" anonid="results-container" flex="2">
        <xul:label class="meta-section-title"
                   value="&autocompleteResultsHeader.label;"/>
        <richgrid anonid="results" rows="3" minSlots="8"
                  seltype="single" nocontext="true" deferlayout="true"/>
      </xul:vbox>

      <xul:vbox class="meta-section" flex="1">
        <xul:label anonid="searches-header" class="meta-section-title"/>
        <richgrid anonid="searches" rows="3" flex="1" search="true"
                  seltype="single" nocontext="true" deferlayout="true"/>
      </xul:vbox>
    </content>

    <implementation implements="nsIAutoCompletePopup, nsIObserver">
      <constructor>
        <![CDATA[
          this.hidden = true;
          Services.obs.addObserver(this, "browser-search-engine-modified", false);

          this._results.controller = this;
          this._searches.controller = this;
        ]]>
      </constructor>

      <destructor>
        <![CDATA[
          Services.obs.removeObserver(this, "browser-search-engine-modified");
        ]]>
      </destructor>

      <!-- nsIAutocompleteInput -->

      <field name="_input">null</field>

      <property name="input" readonly="true" onget="return this._input;"/>
      <property name="matchCount" readonly="true" onget="return this.input.controller.matchCount;"/>
      <property name="popupOpen" readonly="true" onget="return !this.hidden"/>
      <property name="overrideValue" readonly="true" onget="return null;"/>

      <property name="selectedItem">
        <getter>
          <![CDATA[
            return this._isGridBound(this._results) ? this._results.selectedItem : null;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            if (this._isGridBound(this._results)) {
              this._results.selectedItem = val;
            }
          ]]>
        </setter>
      </property>

      <property name="selectedIndex">
        <getter>
          <![CDATA[
            return this._isGridBound(this._results) ? this._results.selectedIndex : -1;
          ]]>
        </getter>
        <setter>
          <![CDATA[
            if (this._isGridBound(this._results)) {
              this._results.selectedIndex = val;
            }
          ]]>
        </setter>
      </property>

      <property name="hasSelection">
        <getter>
          <![CDATA[
            if (!this._isGridBound(this._results) ||
              !this._isGridBound(this._searches))
              return false;

            return (this._results.selectedIndex >= 0 ||
              this._searches.selectedIndex >= 0);
          ]]>
        </getter>
      </property>

      <method name="openAutocompletePopup">
        <parameter name="aInput"/>
        <parameter name="aElement"/>
        <body>
          <![CDATA[
            if (this.popupOpen)
              return;

            ContextUI.dismissContextAppbar();

            this._input = aInput;
            this._grid = this._results;

            this.clearSelection();
            this.invalidate();

            let viewstate = this.getAttribute("viewstate");
            switch (viewstate) {
              case "portrait":
              case "snapped":
                this._results.setAttribute("vertical", true);
                break;
              default:
                this._results.removeAttribute("vertical");
                break;
            }

            this._results.arrangeItemsNow();
            this._searches.arrangeItemsNow();

            this.hidden = false;
            Elements.urlbarState.setAttribute("autocomplete", "true");
          ]]>
        </body>
      </method>

      <method name="closePopup">
        <body>
          <![CDATA[
            if (!this.popupOpen)
              return;

            this.input.controller.stopSearch();
            this.hidden = true;
            Elements.urlbarState.removeAttribute("autocomplete");
          ]]>
        </body>
      </method>

      <!-- Updating grid content -->

      <field name="_grid">null</field>

      <field name="_results" readonly="true">document.getAnonymousElementByAttribute(this, 'anonid', 'results');</field>
      <field name="_resultsContainer" readonly="true">document.getAnonymousElementByAttribute(this, 'anonid', 'results-container');</field>

      <field name="_searchesHeader" readonly="true">document.getAnonymousElementByAttribute(this, 'anonid', 'searches-header');</field>
      <field name="_searches" readonly="true">document.getAnonymousElementByAttribute(this, 'anonid', 'searches');</field>

      <property name="_otherGrid" readonly="true">
        <getter>
          <![CDATA[
            if (this._grid == null)
              return null;

            return (this._grid == this._results) ? this._searches : this._results;
          ]]>
        </getter>
      </property>

      <method name="_isGridBound">
        <parameter name="aGrid"/>
        <body>
          <![CDATA[
            return aGrid && aGrid.isBound;
          ]]>
        </body>
      </method>

      <method name="invalidate">
        <body>
          <![CDATA[
            if (!this.popupOpen)
              return;

            this.updateSearchEngineHeader();
            this.updateResults();
          ]]>
        </body>
      </method>

      <!-- Updating grid content: results -->

      <method name="updateResults">
        <body>
          <![CDATA[
            if (!this._isGridBound(this._results))
              return;

            if (!this.input)
              return;

            let haveNoResults = (this.matchCount == 0);

            if (haveNoResults) {
              this._results.clearAll();
              this.setAttribute("nomatch", true);
              this._resultsContainer.removeAttribute("flex");
              return;
            }

            this.removeAttribute("nomatch");
            this._resultsContainer.setAttribute("flex", 1);

            let controller = this.input.controller;
            let lastMatch = this.matchCount - 1;
            let iterCount = Math.max(this._results.itemCount, this.matchCount);

            // Swap out existing items for new search hit results
            for (let i = 0; i < iterCount; i++) {
              let item = this._results._slotAt(i);
              if (i > lastMatch) {
                item.removeAttribute("value");
                item.removeAttribute("autocomplete");
                continue;
              }

              let value = controller.getValueAt(i);
              let label = controller.getCommentAt(i) || value;
              let iconURI = controller.getImageAt(i);

              item.setAttribute("autocomplete", true);
              item.setAttribute("label", label);
              item.setAttribute("value", value);
              item.setAttribute("iconURI", iconURI);
              let xpFaviconURI = Services.io.newURI(iconURI.replace("moz-anno:favicon:",""), null, null);
              Task.spawn(function() {
                let colorInfo = yield ColorUtils.getForegroundAndBackgroundIconColors(xpFaviconURI);
                if ( !(colorInfo && colorInfo.background && colorInfo.foreground) 
                     || (item.getAttribute("iconURI") != iconURI) ) {
                  return;
                }
                let { background, foreground } = colorInfo;
                item.style.color = foreground; //color text
                item.setAttribute("customColor", background);
                // when bound, use the setter to propogate the color change through the tile
                if ('color' in item) {
                  item.color = background;
                }
              }).then(null, err => Components.utils.reportError(err));
            }

            this._results.arrangeItems();
          ]]>
        </body>
      </method>

      <!-- Updating grid content: search engines -->

      <field name="_engines">[]</field>

      <method name="_initSearchEngines">
        <body>
          <![CDATA[
            Services.search.init(this.updateSearchEngineGrid.bind(this));
          ]]>
        </body>
      </method>

      <method name="updateSearchEngineGrid">
        <body>
          <![CDATA[
            if (!this._isGridBound(this._searches))
              return;

            this._engines = Services.search.getVisibleEngines();

            while (this._searches.itemCount > 0)
              this._searches.removeItemAt(0, true);

            this._engines.forEach(function (anEngine) {
              let item = this._searches.appendItem("", anEngine.name, true);
              item.setAttribute("autocomplete", "true");
              item.setAttribute("search", "true");

              let largeImage = anEngine.getIconURLBySize(74,74);
              if (largeImage) {
                item.setAttribute("iconsize", "large");
                item.setAttribute("iconURI", largeImage);
              } else if (anEngine.iconURI && anEngine.iconURI.spec) {
                item.setAttribute("iconURI", anEngine.iconURI.spec);
                item.setAttribute("customColor", "#fff");
              }
            }.bind(this));

            this._searches.arrangeItems();
          ]]>
        </body>
      </method>

      <method name="updateSearchEngineHeader">
        <body>
          <![CDATA[
            if (!this._isGridBound(this._searches))
              return;

            let searchString = this.input.controller.searchString;
            let label = Strings.browser.formatStringFromName(
                              "opensearch.search.header", [searchString], 1);

            this._searchesHeader.value = label;
          ]]>
        </body>
      </method>

      <!-- Selecting results -->

      <method name="selectBy">
        <parameter name="aReverse"/>
        <parameter name="aPage"/>
        <body>
          <![CDATA[
            if (!this._isGridBound(this._results) ||
                !this._isGridBound(this._searches))
              return;

            // Move between grids if we're at the edge of one.
            if ((this._grid.isSelectionAtEnd && !aReverse) ||
                (this._grid.isSelectionAtStart && aReverse)) {
              let index = !aReverse ? 0 : this._otherGrid.itemCount - 1;
              this._otherGrid.selectedIndex = index;
            } else {
              this._grid.offsetSelection(aReverse ? -1 : 1);
            }
          ]]>
        </body>
      </method>

      <method name="clearSelection">
        <body>
          <![CDATA[
            if (this._isGridBound(this._results))
              this._results.clearSelection();

            if (this._isGridBound(this._searches))
              this._searches.clearSelection();
          ]]>
        </body>
      </method>

      <!-- Submitting selected results -->

      <method name="submitSelected">
        <body>
          <![CDATA[
            if (this._isGridBound(this._results) &&
                this._results.selectedIndex >= 0) {
              let url = this.input.controller.getValueAt(this._results.selectedIndex);
              this.input.value = url;
              return this.input.submitURL();
            }

            if (this._isGridBound(this._searches) &&
                this._searches.selectedIndex >= 0) {
              let engine = this._engines[this._searches.selectedIndex];
              return this.input.submitSearch(engine.name);
            }

            return false;
          ]]>
        </body>
      </method>

      <method name="handleItemClick">
        <parameter name="aItem"/>
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
            this.submitSelected();
          ]]>
        </body>
      </method>

      <!-- nsIObserver -->

      <method name="observe">
        <parameter name="aSubject"/>
        <parameter name="aTopic"/>
        <parameter name="aData"/>
        <body>
          <![CDATA[
            switch (aTopic) {
              case "browser-search-engine-modified":
                this.updateSearchEngineGrid();
                break;
            }
          ]]>
        </body>
      </method>
    </implementation>

    <handlers>
      <handler event="contentgenerated">
        <![CDATA[
          let grid = event.originalTarget;

          if (grid == this._searches)
            this._initSearchEngines();

          if (grid == this._results)
            this.updateResults();
        ]]>
      </handler>

      <handler event="select">
        <![CDATA[
          let grid = event.originalTarget;

          // If a selection was made on a different grid,
          // remove selection from the current grid.
          if (grid != this._grid) {
            this._grid.clearSelection();
            this._grid = this._otherGrid;
          }
        ]]>
      </handler>
    </handlers>
  </binding>
</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.22 $"/>
		<generation date="$Date: 2008/05/25 01:05:58 $"/>
		<language type="ur"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Arab</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2008/05/25 01:05:58 $"/>
		<language type="uz"/> 
        <script type="Arab"/>
		<territory type="AF"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Arab</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.2 $"/>
		<generation date="$Date: 2008/05/25 01:05:58 $"/>
		<language type="uz"/> 
        <script type="Cyrl"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Cyrl</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2008/05/25 01:05:58 $"/>
		<language type="uz"/> 
        <script type="Latn"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.19 $"/>
		<generation date="$Date: 2008/05/25 01:05:58 $"/>
		<language type="uz"/> 
		<territory type="UZ"/> 
	</identity>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.21 $"/>
		<generation date="$Date: 2008/05/25 01:05:58 $"/>
		<language type="uz"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="vai"/> 
		<script type="Latn"/>
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="vai"/> 
		<territory type="LR"/> 
	</identity>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="vai"/> 
		<script type="Vaii"/>
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Vaii</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="vai"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Vaii</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="wrap_content"
                android:layout_height="50dip">

    <TextView android:id="@+id/validation_message_text"
              android:layout_width="wrap_content"
              android:layout_height="40dip"
              android:layout_marginTop="6dip"
              android:paddingLeft="20dp"
              android:paddingRight="20dp"
              android:textAppearance="?android:attr/textAppearanceSmall"
              android:textColor="@color/validation_message_text"
              android:background="@drawable/validation_bg"
              android:gravity="center"
              android:singleLine="true"
              android:scrollHorizontally="true"
              android:ellipsize="marquee"/>

    <ImageView android:id="@+id/validation_message_arrow"
               android:layout_width="24dip"
               android:layout_height="10dip"
               android:layout_centerHorizontal="true"
               android:layout_alignParentTop="true"
               android:src="@drawable/validation_arrow"
               android:scaleType="fitXY"/>

    <ImageView android:id="@+id/validation_message_arrow_inverted"
               android:layout_width="24dip"
               android:layout_height="10dip"
               android:layout_centerHorizontal="true"
               android:layout_marginTop="35dip"
               android:layout_alignParentTop="true"
               android:src="@drawable/validation_arrow_inverted"
               android:scaleType="fitXY"
               android:visibility="gone"/>

</RelativeLayout>
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2010-08-22T18:30:02Z</updated>

  <author>
    <name>John Doe</name>
  </author>
  <id>urn:uuid:e2df8375-99be-4848-b05e-b9d407555267</id>

  <entry>

    <title>Item</title>
    <link href="http://example.org/first"/>
    <id>urn:uuid:9e0f4bed-33d3-4a9d-97ab-ecaa31b3f14a</id>
    <updated>2010-08-22T18:30:02Z</updated>

    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="utf-8"?>
<!-- 512 bytes!
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
  -->
<feed xmlns="http://www.w3.org/2005/Atom">

  <title>Example Feed</title>
  <link href="http://example.org/"/>
  <updated>2010-08-22T18:30:02Z</updated>

  <author>
    <name>John Doe</name>
  </author>
  <id>urn:uuid:e2df8375-99be-4848-b05e-b9d407555267</id>

  <entry>

    <title>Item</title>
    <link href="http://example.org/first"/>
    <id>urn:uuid:9e0f4bed-33d3-4a9d-97ab-ecaa31b3f14a</id>
    <updated>2010-08-22T18:30:02Z</updated>

    <summary>Some text.</summary>
  </entry>

</feed>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="vfychain">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>VFYCHAIN</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>vfychain </refname>
    <refpurpose>vfychain [options] [revocation options] certfile [[options] certfile] ...</refpurpose>
  </refnamediv>

 <refsynopsisdiv>
    <cmdsynopsis>
      <command>vfychain</command>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection id="description">
    <title>Description</title>
    <para>The verification Tool, <command>vfychain</command>, verifies certificate chains. <command>modutil</command> can add and delete PKCS #11 modules, change passwords on security databases, set defaults, list module contents, enable or disable slots, enable or disable FIPS 140-2 compliance, and assign default providers for cryptographic operations. This tool can also create certificate, key, and module security database files.</para>

	<para>The tasks associated with security module database management are part of a process that typically also involves managing key databases and certificate databases.</para>
  </refsection>

  <refsection id="options">
    <title>Options</title>
    
    <variablelist>

      <varlistentry>
        <term><option>-a</option></term>
        <listitem>
          <simpara>the following certfile is base64 encoded</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
          <term><option>-b </option> <replaceable>YYMMDDHHMMZ</replaceable></term>
        <listitem>
          <simpara>Validate date (default: now)</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
          <term><option>-d </option> <replaceable>directory</replaceable></term>        <listitem>
          <simpara>database directory</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-f </option> </term>
        <listitem>
          <simpara>Enable cert fetching from AIA URL</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-o </option> <replaceable>oid</replaceable></term>
        <listitem>
          <simpara>Set policy OID for cert validation(Format OID.1.2.3)</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-p </option></term>
        <listitem>
          <simpara>Use PKIX Library to validate certificate by calling:</simpara>
		  <simpara>	   * CERT_VerifyCertificate if specified once,</simpara>
		  <simpara>	   * CERT_PKIXVerifyCert if specified twice and more.</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
          <term><option>-r </option></term>
          <listitem>
            <simpara>Following certfile is raw binary DER (default)</simpara>
         </listitem>
       </varlistentry>

       <varlistentry>
         <term><option>-t</option></term>
         <listitem>
	       <simpara>Following cert is explicitly trusted (overrides db trust)</simpara>
         </listitem>
       </varlistentry>

       <varlistentry>
         <term><option>-u </option> <replaceable>usage</replaceable></term>
         <listitem>
            <para>
	 	 0=SSL client, 1=SSL server, 2=SSL StepUp, 3=SSL CA,
	     4=Email signer, 5=Email recipient, 6=Object signer,
		 9=ProtectedObjectSigner, 10=OCSP responder, 11=Any CA
            </para>
         </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>-T </option></term>
          <listitem>
	        <simpara>Trust both explicit trust anchors (-t) and the database. (Without this option, the default is to only trust certificates marked -t, if there are any, or to trust the database if there are certificates marked -t.)
            </simpara>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><option>-v </option></term>
          <listitem>
	        <simpara>Verbose mode. Prints root cert subject(double the
			 argument for whole root cert info)
            </simpara>
          </listitem>
        </varlistentry>

      <varlistentry>
        <term><option>-w </option> <replaceable>password</replaceable></term>
        <listitem>
          <simpara>Database password</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-W </option> <replaceable>pwfile</replaceable></term>
        <listitem>
          <simpara>Password file</simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option></option></term>
        <listitem>
          <simpara>Revocation options for PKIX API (invoked with -pp options) is a
	collection of the following flags:
		[-g type [-h flags] [-m type [-s flags]] ...] ...</simpara>
          <simpara>Where: </simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-g </option> <replaceable>test-type</replaceable></term>
        <listitem>
          <simpara>Sets status checking test type. Possible values
			are "leaf" or "chain"
          </simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-g </option> <replaceable>test type</replaceable></term>
        <listitem>
          <simpara>Sets status checking test type. Possible values
			are "leaf" or "chain".
          </simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-h </option> <replaceable>test flags</replaceable></term>
        <listitem>
          <simpara>Sets revocation flags for the test type it
			follows. Possible flags: "testLocalInfoFirst" and
			"requireFreshInfo".
          </simpara>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><option>-m </option> <replaceable>method type</replaceable></term>
        <listitem>
          <simpara>Sets method type for the test type it follows.
			Possible types are "crl" and "ocsp".
          </simpara>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>-s </option> <replaceable>method flags</replaceable></term>
        <listitem>
          <simpara>Sets revocation flags for the method it follows.
			Possible types are "doNotUse", "forbidFetching",
			"ignoreDefaultSrc", "requireInfo" and "failIfNoInfo".
          </simpara>
        </listitem>
      </varlistentry>
    </variablelist>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY date SYSTEM "date.xml">
<!ENTITY version SYSTEM "version.xml">
]>

<refentry id="vfyserv">

  <refentryinfo>
    <date>&date;</date>
    <title>NSS Security Tools</title>
    <productname>nss-tools</productname>
    <productnumber>&version;</productnumber>
  </refentryinfo>

  <refmeta>
    <refentrytitle>VFYSERV</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>

  <refnamediv>
    <refname>vfyserv </refname>
    <refpurpose>TBD</refpurpose>
  </refnamediv>

 <refsynopsisdiv>
    <cmdsynopsis>
      <command>vfyserv</command>
    </cmdsynopsis>
  </refsynopsisdiv>

  <refsection>
    <title>STATUS</title>
    <para>This documentation is still work in progress. Please contribute to the initial review in <ulink url="https://bugzilla.mozilla.org/show_bug.cgi?id=836477">Mozilla NSS bug 836477</ulink>
    </para>
  </refsection>

  <refsection id="description">
    <title>Description</title>
    <para>The <command>vfyserv </command> tool verifies a certificate chain</para>

  </refsection>

  <refsection id="options">
    <title>Options</title>
    
    <variablelist>

      <varlistentry>
        <term><option></option> <replaceable></replaceable></term>
        <listitem>
          <simpara></simpara>
          <simpara></simpara>
        </listitem>
      </varlistentry>

    </variablelist>
  </refsection>

<!-- don't change -->
  <refsection id="resources">
    <title>Additional Resources</title>
	<para>For information about NSS and other tools related to NSS (like JSS), check out the NSS project wiki at <ulink url="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</ulink>. The NSS site relates directly to NSS code changes and releases.</para>
	<para>Mailing lists: https://lists.mozilla.org/listinfo/dev-tech-crypto</para>
	<para>IRC: Freenode at #dogtag-pki</para>
  </refsection>

<!-- fill in your name first; keep the other names for reference -->
  <refsection id="authors">
    <title>Authors</title>
    <para>The NSS tools were written and maintained by developers with Netscape, Red Hat,  Sun, Oracle, Mozilla, and Google.</para>
    <para>
	Authors: Elio Maldonado &lt;emaldona@redhat.com>, Deon Lackey &lt;dlackey@redhat.com>.
    </para>
  </refsection>

<!-- don't change -->
  <refsection id="license">
    <title>LICENSE</title>
    <para>Licensed under the Mozilla Public License, v. 2.0.  If a copy of the MPL was not distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.
    </para>
  </refsection>

</refentry>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings [
  <!ENTITY % videocontrolsDTD SYSTEM "chrome://global/locale/videocontrols.dtd">
  %videocontrolsDTD;
]>

<bindings id="videoControlBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns:html="http://www.w3.org/1999/xhtml">

  <binding id="timeThumb"
           extends="chrome://global/content/bindings/scale.xml#scalethumb">
      <xbl:content xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
          <xbl:children/>
          <hbox class="timeThumb" xbl:inherits="showhours">
              <label class="timeLabel"/>
          </hbox>
      </xbl:content>
      <implementation>

      <constructor>
          <![CDATA[
          this.timeLabel = document.getAnonymousElementByAttribute(this, "class", "timeLabel");
          this.timeLabel.setAttribute("value", "0:00");
          ]]>
      </constructor>

      <property name="showHours">
        <getter>
          <![CDATA[
          return this.getAttribute("showhours") == "true";
          ]]>
        </getter>
        <setter>
          <![CDATA[
          this.setAttribute("showhours", val);
          // If the duration becomes known while we're still showing the value
          // for time=0, immediately update the value to show or hide the hours.
          // It's less intrusive to do it now than when the user clicks play and
          // is looking right next to the thumb.
          var displayedTime = this.timeLabel.getAttribute("value");
          if (val && displayedTime == "0:00")
              this.timeLabel.setAttribute("value", "0:00:00");
          else if (!val && displayedTime == "0:00:00")
              this.timeLabel.setAttribute("value", "0:00");
          ]]>
        </setter>
      </property>

      <method name="setTime">
          <parameter name="time"/>
          <body>
          <![CDATA[
              var timeString;
              time = Math.round(time / 1000);
              var hours = Math.floor(time / 3600);
              var mins  = Math.floor((time % 3600) / 60);
              var secs  = Math.floor(time % 60);
              if (secs < 10)
                  secs = "0" + secs;
              if (hours || this.showHours) {
                  if (mins < 10)
                      mins = "0" + mins;
                  timeString = hours + ":" + mins + ":" + secs;
              } else {
                  timeString = mins + ":" + secs;
              }

              this.timeLabel.setAttribute("value", timeString);
          ]]>
          </body>
      </method>
      </implementation>
  </binding>

  <binding id="suppressChangeEvent"
            extends="chrome://global/content/bindings/scale.xml#scale">
    <implementation implements="nsIXBLAccessible">
      <!-- nsIXBLAccessible -->
      <property name="accessibleName" readonly="true">
        <getter>
          if (this.type != "scrubber")
              return "";

          var currTime = this.thumb.timeLabel.getAttribute("value");
          var totalTime = this.durationValue;

          return this.scrubberNameFormat.replace(/#1/, currTime).
              replace(/#2/, totalTime);
        </getter>
      </property>

      <constructor>
          <![CDATA[
          this.scrubberNameFormat = ]]>"&scrubberScale.nameFormat;"<![CDATA[;
          this.durationValue = "";
          this.valueBar = null;
          this.isDragging = false;
          this.wasPausedBeforeDrag = true;

          this.thumb = document.getAnonymousElementByAttribute(this, "class", "scale-thumb");
          this.type = this.getAttribute("class");
          this.Utils = document.getBindingParent(this.parentNode).Utils;
          if (this.type == "scrubber")
              this.valueBar = this.Utils.progressBar;
          ]]>
      </constructor>

      <method name="valueChanged">
          <parameter name="which"/>
          <parameter name="newValue"/>
          <parameter name="userChanged"/>
          <body>
          <![CDATA[
            // This method is a copy of the base binding's valueChanged(), except that it does
            // not dispatch a |change| event (to avoid exposing the event to web content), and
            // just calls the videocontrol's seekToPosition() method directly.
            switch (which) {
              case "curpos":
                if (this.type == "scrubber") {
                    // Update the time shown in the thumb.
                    this.thumb.setTime(newValue);
                    this.Utils.positionLabel.setAttribute("value", this.thumb.timeLabel.value);
                    // Update the value bar to match the thumb position.
                    var percent = newValue / this.max;
                    this.valueBar.value = Math.round(percent * 10000); // has max=10000
                }

                // The value of userChanged is true when changing the position with the mouse,
                // but not when pressing an arrow key. However, the base binding sets
                // ._userChanged in its keypress handlers, so we just need to check both.
                if (!userChanged && !this._userChanged)
                  return;
                this.setAttribute("value", newValue);

                if (this.type == "scrubber")
                    this.Utils.seekToPosition(newValue);
                else if (this.type == "volumeControl")
                    this.Utils.setVolume(newValue / 100);
                break;

              case "minpos":
                this.setAttribute("min", newValue);
                break;

              case "maxpos":
                if (this.type == "scrubber") {
                    // Update the value bar to match the thumb position.
                    var percent = this.value / newValue;
                    this.valueBar.value = Math.round(percent * 10000); // has max=10000
                }
                this.setAttribute("max", newValue);
                break;
            }
          ]]>
          </body>
      </method>

      <method name="dragStateChanged">
        <parameter name="isDragging"/>
          <body>
          <![CDATA[
            if (this.type == "scrubber") {
                this.Utils.log("--- dragStateChanged: " + isDragging + " ---");
                this.isDragging = isDragging;
                if (isDragging) {
                    this.wasPausedBeforeDrag = this.Utils.video.paused;
                    this.previousPlaybackRate = this.Utils.video.playbackRate;
                    this.Utils.video.pause();
                } else if (!this.wasPausedBeforeDrag) {
                    // After the drag ends, resume playing.
                    this.Utils.video.playbackRate = this.previousPlaybackRate;
                    this.Utils.video.play();
                }
            }
          ]]>
          </body>
      </method>

      </implementation>
  </binding>

  <binding id="videoControls">

    <resources>
        <stylesheet src="chrome://global/content/bindings/videocontrols.css"/>
        <stylesheet src="chrome://global/skin/media/videocontrols.css"/>
    </resources>

    <xbl:content xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
                 class="mediaControlsFrame">
        <stack flex="1">
            <vbox flex="1" class="statusOverlay" hidden="true">
                <box class="statusIcon"/>
                <label class="errorLabel" anonid="errorAborted">&error.aborted;</label>
                <label class="errorLabel" anonid="errorNetwork">&error.network;</label>
                <label class="errorLabel" anonid="errorDecode">&error.decode;</label>
                <label class="errorLabel" anonid="errorSrcNotSupported">&error.srcNotSupported;</label>
                <label class="errorLabel" anonid="errorNoSource">&error.noSource2;</label>
                <label class="errorLabel" anonid="errorGeneric">&error.generic;</label>
            </vbox>

            <vbox class="statsOverlay" hidden="true">
                <html:div class="statsDiv" xmlns="http://www.w3.org/1999/xhtml">
                    <table class="statsTable">
                        <tr>
                            <td class="statLabel">&stats.media;</td>
                            <td class="statValue filename"><span class="statFilename"/></td>
                        </tr>
                        <tr>
                            <td class="statLabel">&stats.size;</td>
                            <td class="statValue size"><span class="statSize"/></td>
                        </tr>
                        <tr style="height: 1em;"/>

                        <tr>
                            <td class="statLabel">&stats.activity;</td>
                            <td class="statValue activity">
                              <span class="statActivity">
                                <span class="statActivityPaused">&stats.activityPaused;</span>
                                <span class="statActivityPlaying">&stats.activityPlaying;</span>
                                <span class="statActivityEnded">&stats.activityEnded;</span>
                                <span class="statActivitySeeking">&stats.activitySeeking;</span>
                              </span>
                            </td>
                        </tr>
                        <tr>
                            <td class="statLabel">&stats.volume;</td> <td class="statValue"><span class="statVolume"/></td>
                        </tr>
                        <tr>
                            <!-- Localization note: readyState is a HTML5 API MediaElement-specific attribute and should not be localized. -->
                            <td class="statLabel">readyState</td> <td class="statValue"><span class="statReadyState"/></td>
                        </tr>
                        <tr>
                          <!-- Localization note: networkState is a HTML5 API MediaElement-specific attribute and should not be localized. -->
                          <td class="statLabel">networkState</td> <td class="statValue"><span class="statNetState"/></td>
                        </tr>
                        <tr style="height: 1em;"/>

                        <tr>
                            <td class="statLabel">&stats.framesParsed;</td>
                            <td class="statValue"><span class="statFramesParsed"/></td>
                        </tr>
                        <tr>
                            <td class="statLabel">&stats.framesDecoded;</td>
                            <td class="statValue"><span class="statFramesDecoded"/></td>
                        </tr>
                        <tr>
                            <td class="statLabel">&stats.framesPresented;</td>
                            <td class="statValue"><span class="statFramesPresented"/></td>
                        </tr>
                        <tr>
                            <td class="statLabel">&stats.framesPainted;</td>
                            <td class="statValue"><span class="statFramesPainted"/></td>
                        </tr>
                    </table>
                </html:div>
            </vbox>

            <vbox class="controlsOverlay">
                <stack flex="1">
                    <spacer class="controlsSpacer" flex="1"/>
                    <box class="clickToPlay" hidden="true" flex="1"/>
                </stack>
                <hbox class="controlBar" hidden="true">
                    <button class="playButton"
                            playlabel="&playButton.playLabel;"
                            pauselabel="&playButton.pauseLabel;"/>
                    <stack class="scrubberStack" flex="1">
                        <box class="backgroundBar"/>
                        <progressmeter class="bufferBar"/>
                        <progressmeter class="progressBar" max="10000"/>
                        <scale class="scrubber" movetoclick="true"/>
                    </stack>
                    <vbox class="durationBox">
                        <label class="positionLabel" role="presentation"/>
                        <label class="durationLabel" role="presentation"/>
                    </vbox>
                    <button class="muteButton"
                            mutelabel="&muteButton.muteLabel;"
                            unmutelabel="&muteButton.unmuteLabel;"/>
                    <stack class="volumeStack">
                      <box class="volumeBackground"/>
                      <box class="volumeForeground" anonid="volumeForeground"/>
                      <scale class="volumeControl" movetoclick="true"/>
                    </stack>
                    <button class="fullscreenButton"
                            enterfullscreenlabel="&fullscreenButton.enterfullscreenlabel;"
                            exitfullscreenlabel="&fullscreenButton.exitfullscreenlabel;"/>
                </hbox>
            </vbox>
        </stack>
    </xbl:content>

    <implementation>

        <constructor>
            <![CDATA[
            this.isTouchControl = false;
            this.randomID = 0;

            this.Utils = {
                debug : false,
                video : null,
                videocontrols : null,
                controlBar : null,
                playButton : null,
                muteButton : null,
                volumeControl  : null,
                durationLabel  : null,
                positionLabel  : null,
                scrubberThumb  : null,
                scrubber       : null,
                progressBar    : null,
                bufferBar      : null,
                statusOverlay  : null,
                controlsSpacer : null,
                clickToPlay    : null,
                stats          : {},
                controlsOverlay : null,
                fullscreenButton : null,

                randomID : 0,
                videoEvents : ["play", "pause", "ended", "volumechange", "loadeddata",
                               "loadstart", "timeupdate", "progress",
                               "playing", "waiting", "canplay", "canplaythrough",
                               "seeking", "seeked", "emptied", "loadedmetadata",
                               "error", "suspend", "stalled",
                               "mozinterruptbegin", "mozinterruptend" ],

                firstFrameShown : false,
                timeUpdateCount : 0,
                maxCurrentTimeSeen : 0,
                _isAudioOnly : false,
                get isAudioOnly() { return this._isAudioOnly; },
                set isAudioOnly(val) {
                    this._isAudioOnly = val;
                    if (this._isAudioOnly) {
                        this.controlBar.setAttribute("audio-only", true);
                    } else {
                        this.controlBar.removeAttribute("audio-only");
                    }
                    this.adjustControlSize();

                    if (!this.isTopLevelSyntheticDocument)
                        return;
                    if (this._isAudioOnly) {
                        this.video.style.height = this._controlBarHeight + "px";
                        this.video.style.width = "66%";
                    } else {
                        this.video.style.removeProperty("height");
                        this.video.style.removeProperty("width");
                    }
                },
                suppressError : false,

                setupStatusFader : function(immediate) {
                    // Since the play button will be showing, we don't want to
                    // show the throbber behind it. The throbber here will
                    // only show if needed after the play button has been pressed.
                    if (!this.clickToPlay.hidden) {
                        this.startFadeOut(this.statusOverlay, true);
                        return;
                    }

                    var show = false;
                    if (this.video.seeking ||
                        (this.video.error && !this.suppressError) ||
                        this.video.networkState == this.video.NETWORK_NO_SOURCE ||
                        (this.video.networkState == this.video.NETWORK_LOADING &&
                         (this.video.paused || this.video.ended
                           ? this.video.readyState < this.video.HAVE_CURRENT_DATA
                           : this.video.readyState < this.video.HAVE_FUTURE_DATA)) ||
                        (this.timeUpdateCount <= 1 && !this.video.ended &&
                         this.video.readyState < this.video.HAVE_ENOUGH_DATA &&
                         this.video.networkState == this.video.NETWORK_LOADING))
                        show = true;

                    // Explicitly hide the status fader if this
                    // is audio only until bug 619421 is fixed.
                    if (this.isAudioOnly)
                        show = false;

                    this.log("Status overlay: seeking=" + this.video.seeking +
                             " error=" + this.video.error + " readyState=" + this.video.readyState +
                             " paused=" + this.video.paused + " ended=" + this.video.ended +
                             " networkState=" + this.video.networkState +
                             " timeUpdateCount=" + this.timeUpdateCount +
                             " --> " + (show ? "SHOW" : "HIDE"));
                    this.startFade(this.statusOverlay, show, immediate);
                },

                /*
                 * Set the initial state of the controls. The binding is normally created along
                 * with video element, but could be attached at any point (eg, if the video is
                 * removed from the document and then reinserted). Thus, some one-time events may
                 * have already fired, and so we'll need to explicitly check the initial state.
                 */
                setupInitialState : function() {
                    this.randomID = Math.random();
                    this.videocontrols.randomID = this.randomID;

                    this.setPlayButtonState(this.video.paused);
                    this.updateMuteButtonState();

                    this.setFullscreenButtonState();

                    var volume = this.video.muted ? 0 : Math.round(this.video.volume * 100);
                    this.volumeControl.value = volume;

                    var duration = Math.round(this.video.duration * 1000); // in ms
                    var currentTime = Math.round(this.video.currentTime * 1000); // in ms
                    this.log("Initial playback position is at " + currentTime + " of " + duration);
                    // It would be nice to retain maxCurrentTimeSeen, but it would be difficult
                    // to determine if the media source changed while we were detached.
                    this.maxCurrentTimeSeen = currentTime;
                    this.showPosition(currentTime, duration);

                    // If we have metadata, check if this is a <video> without
                    // video data, or a video with no audio track.
                    if (this.video.readyState >= this.video.HAVE_METADATA) {
                        if (this.video instanceof HTMLVideoElement &&
                            (this.video.videoWidth == 0 || this.video.videoHeight == 0))
                            this.isAudioOnly = true;

                        // We have to check again if the media has audio here,
                        // because of bug 718107: switching to fullscreen may
                        // cause the bindings to detach and reattach, hence
                        // unsetting the attribute.
                        if (!this.isAudioOnly && !this.video.mozHasAudio) {
                          this.muteButton.setAttribute("noAudio", "true");
                          this.muteButton.setAttribute("disabled", "true");
                        }
                    }

                    if (this.isAudioOnly)
                        this.clickToPlay.hidden = true;

                    // If the first frame hasn't loaded, kick off a throbber fade-in.
                    if (this.video.readyState >= this.video.HAVE_CURRENT_DATA)
                        this.firstFrameShown = true;

                    // We can't determine the exact buffering status, but do know if it's
                    // fully loaded. (If it's still loading, it will fire a progress event
                    // and we'll figure out the exact state then.)
                    this.bufferBar.setAttribute("max", 100);
                    if (this.video.readyState >= this.video.HAVE_METADATA)
                        this.showBuffered();
                    else
                        this.bufferBar.setAttribute("value", 0);

                    // Set the current status icon.
                    if (this.hasError()) {
                        this.clickToPlay.hidden = true;
                        this.statusIcon.setAttribute("type", "error");
                        this.updateErrorText();
                        this.setupStatusFader(true);
                    }

                    // An event handler for |onresize| should be added when bug 227495 is fixed.
                    this.controlBar.hidden = false;
                    this._playButtonWidth = this.playButton.clientWidth;
                    this._durationLabelWidth = this.durationLabel.clientWidth;
                    this._muteButtonWidth = this.muteButton.clientWidth;
                    this._volumeControlWidth = this.volumeControl.clientWidth;
                    this._fullscreenButtonWidth = this.fullscreenButton.clientWidth;
                    this._controlBarHeight = this.controlBar.clientHeight;
                    this.controlBar.hidden = true;
                    this.adjustControlSize();

                    // Preserve Statistics when toggling fullscreen mode due to bug 714071.
                    if (this.video.mozMediaStatisticsShowing)
                        this.showStatistics(true);

                    this._handleCustomEventsBound = this.handleCustomEvents.bind(this);
                    this.video.addEventListener("media-showStatistics", this._handleCustomEventsBound, false, true);
                },

                setupNewLoadState : function() {
                    // videocontrols.css hides the control bar by default, because if script
                    // is disabled our binding's script is disabled too (bug 449358). Thus,
                    // the controls are broken and we don't want them shown. But if script is
                    // enabled, the code here will run and can explicitly unhide the controls.
                    //
                    // For videos with |autoplay| set, we'll leave the controls initially hidden,
                    // so that they don't get in the way of the playing video. Otherwise we'll
                    // go ahead and reveal the controls now, so they're an obvious user cue.
                    //
                    // (Note: the |controls| attribute is already handled via layout/style/html.css)
                    var shouldShow = !this.dynamicControls ||
                      (this.video.paused &&
                       !(this.video.autoplay && this.video.mozAutoplayEnabled));
                    // Hide the overlay if the video time is non-zero or if an error occurred to workaround bug 718107.
                    this.startFade(this.clickToPlay, shouldShow && !this.isAudioOnly &&
                                   this.video.currentTime == 0 && !this.hasError(), true);
                    this.startFade(this.controlBar, shouldShow, true);
                },

                handleCustomEvents : function (e) {
                    if (!e.isTrusted)
                        return;
                    this.showStatistics(e.detail);
                },

                get dynamicControls() {
                    // Don't fade controls for <audio> elements.
                    var enabled = !this.isAudioOnly;

                    // Allow tests to explicitly suppress the fading of controls.
                    if (this.video.hasAttribute("mozNoDynamicControls"))
                        enabled = false;

                    // If the video hits an error, suppress controls if it
                    // hasn't managed to do anything else yet.
                    if (!this.firstFrameShown && this.hasError())
                        enabled = false;

                    return enabled;
                },

                handleEvent : function (aEvent) {
                    this.log("Got media event ----> " + aEvent.type);

                    // If the binding is detached (or has been replaced by a
                    // newer instance of the binding), nuke our event-listeners.
                    if (this.videocontrols.randomID != this.randomID) {
                        this.terminateEventListeners();
                        return;
                    }

                    switch (aEvent.type) {
                        case "play":
                            this.setPlayButtonState(false);
                            this.setupStatusFader();
                            if (!this._triggeredByControls && this.dynamicControls && this.videocontrols.isTouchControl)
                                this.startFadeOut(this.controlBar);
                            if (!this._triggeredByControls)
                                this.clickToPlay.hidden = true;
                            this._triggeredByControls = false;
                            break;
                        case "pause":
                            // Little white lie: if we've internally paused the video
                            // while dragging the scrubber, don't change the button state.
                            if (!this.scrubber.isDragging)
                                this.setPlayButtonState(true);
                            this.setupStatusFader();
                            break;
                        case "ended":
                            this.setPlayButtonState(true);
                            // We throttle timechange events, so the thumb might not be
                            // exactly at the end when the video finishes.
                            this.showPosition(Math.round(this.video.currentTime * 1000),
                                              Math.round(this.video.duration * 1000));
                            this.startFadeIn(this.controlBar);
                            this.setupStatusFader();
                            break;
                        case "volumechange":
                            var volume = this.video.muted ? 0 : this.video.volume;
                            var volumePercentage = Math.round(volume * 100);
                            this.updateMuteButtonState();
                            this.volumeControl.value = volumePercentage;
                            this.volumeForeground.style.paddingRight = (1 - volume) * this._volumeControlWidth + "px";
                            break;
                        case "loadedmetadata":
                            this.adjustControlSize();
                            // If a <video> doesn't have any video data, treat it as <audio>
                            // and show the controls (they won't fade back out)
                            if (this.video instanceof HTMLVideoElement &&
                                (this.video.videoWidth == 0 || this.video.videoHeight == 0)) {
                                this.isAudioOnly = true;
                                this.clickToPlay.hidden = true;
                                this.startFadeIn(this.controlBar);
                                this.setFullscreenButtonState();
                            }
                            this.showDuration(Math.round(this.video.duration * 1000));
                            if (!this.isAudioOnly && !this.video.mozHasAudio) {
                              this.muteButton.setAttribute("noAudio", "true");
                              this.muteButton.setAttribute("disabled", "true");
                            }
                            break;
                        case "loadeddata":
                            this.firstFrameShown = true;
                            this.setupStatusFader();
                            break;
                        case "loadstart":
                            this.maxCurrentTimeSeen = 0;
                            this.controlsSpacer.removeAttribute("aria-label");
                            this.statusOverlay.removeAttribute("error");
                            this.statusIcon.setAttribute("type", "throbber");
                            this.isAudioOnly = (this.video instanceof HTMLAudioElement);
                            this.setPlayButtonState(true);
                            this.setupNewLoadState();
                            this.setupStatusFader();
                            break;
                        case "progress":
                            this.statusIcon.removeAttribute("stalled");
                            this.showBuffered();
                            this.setupStatusFader();
                            break;
                        case "stalled":
                            this.statusIcon.setAttribute("stalled", "true");
                            this.statusIcon.setAttribute("type", "throbber");
                            this.setupStatusFader();
                            break;
                        case "suspend":
                            this.setupStatusFader();
                            break;
                        case "timeupdate":
                            var currentTime = Math.round(this.video.currentTime * 1000); // in ms
                            var duration = Math.round(this.video.duration * 1000); // in ms

                            // If playing/seeking after the video ended, we won't get a "play"
                            // event, so update the button state here.
                            if (!this.video.paused)
                                this.setPlayButtonState(false);

                            this.timeUpdateCount++;
                            // Whether we show the statusOverlay sometimes depends
                            // on whether we've seen more than one timeupdate
                            // event (if we haven't, there hasn't been any
                            // "playback activity" and we may wish to show the
                            // statusOverlay while we wait for HAVE_ENOUGH_DATA).
                            // If we've seen more than 2 timeupdate events,
                            // the count is no longer relevant to setupStatusFader.
                            if (this.timeUpdateCount <= 2)
                                this.setupStatusFader();

                            // If the user is dragging the scrubber ignore the delayed seek
                            // responses (don't yank the thumb away from the user)
                            if (this.scrubber.isDragging)
                                return;

                            this.showPosition(currentTime, duration);
                            break;
                        case "emptied":
                            this.bufferBar.value = 0;
                            this.showPosition(0, 0);
                            break;
                        case "seeking":
                            this.showBuffered();
                            this.statusIcon.setAttribute("type", "throbber");
                            this.setupStatusFader();
                            break;
                        case "waiting":
                            this.statusIcon.setAttribute("type", "throbber");
                            this.setupStatusFader();
                            break;
                        case "seeked":
                        case "playing":
                        case "canplay":
                        case "canplaythrough":
                            this.setupStatusFader();
                            break;
                        case "error":
                            // We'll show the error status icon when we receive an error event
                            // under either of the following conditions:
                            // 1. The video has its error attribute set; this means we're loading
                            //    from our src attribute, and the load failed, or we we're loading
                            //    from source children and the decode or playback failed after we
                            //    determined our selected resource was playable.
                            // 2. The video's networkState is NETWORK_NO_SOURCE. This means we we're
                            //    loading from child source elements, but we were unable to select
                            //    any of the child elements for playback during resource selection.
                            if (this.hasError()) {
                                this.suppressError = false;
                                this.clickToPlay.hidden = true;
                                this.statusIcon.setAttribute("type", "error");
                                this.updateErrorText();
                                this.setupStatusFader(true);
                                // If video hasn't shown anything yet, disable the controls.
                                if (!this.firstFrameShown)
                                    this.startFadeOut(this.controlBar);
                                this.controlsSpacer.removeAttribute("hideCursor");
                            }
                            break;
                        case "mozinterruptbegin":
                        case "mozinterruptend":
                            // Nothing to do...
                            break;
                        default:
                            this.log("!!! event " + aEvent.type + " not handled!");
                    }
                },

                terminateEventListeners : function () {
                    if (this.statsInterval) {
                        clearInterval(this.statsInterval);
                        this.statsInterval = null;
                    }
                    for each (let event in this.videoEvents)
                        this.video.removeEventListener(event, this, false);

                    for each(let element in this.controlListeners)
                        element.item.removeEventListener(element.event, element.func, false);

                    delete this.controlListeners;

                    this.video.removeEventListener("media-showStatistics", this._handleCustomEventsBound, false);
                    delete this._handleCustomEventsBound;

                    this.log("--- videocontrols terminated ---");
                },

                hasError : function () {
                    return (this.video.error != null || this.video.networkState == this.video.NETWORK_NO_SOURCE);
                },

                updateErrorText : function () {
                    let error;
                    let v = this.video;
                    // It is possible to have both v.networkState == NETWORK_NO_SOURCE
                    // as well as v.error being non-null. In this case, we will show
                    // the v.error.code instead of the v.networkState error.
                    if (v.error) {
                        switch (v.error.code) {
                          case v.error.MEDIA_ERR_ABORTED:
                              error = "errorAborted";
                              break;
                          case v.error.MEDIA_ERR_NETWORK:
                              error = "errorNetwork";
                              break;
                          case v.error.MEDIA_ERR_DECODE:
                              error = "errorDecode";
                              break;
                          case v.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
                              error = "errorSrcNotSupported";
                              break;
                          default:
                              error = "errorGeneric";
                              break;
                         }
                    } else if (v.networkState == v.NETWORK_NO_SOURCE) {
                        error = "errorNoSource";
                    } else {
                        return; // No error found.
                    }

                    let label = document.getAnonymousElementByAttribute(this.videocontrols, "anonid", error);
                    this.controlsSpacer.setAttribute("aria-label", label.textContent);
                    this.statusOverlay.setAttribute("error", error);
                },

                formatTime : function(aTime) {
                    // Format the duration as "h:mm:ss" or "m:ss"
                    aTime = Math.round(aTime / 1000);
                    let hours = Math.floor(aTime / 3600);
                    let mins  = Math.floor((aTime % 3600) / 60);
                    let secs  = Math.floor(aTime % 60);
                    let timeString;
                    if (secs < 10)
                        secs = "0" + secs;
                    if (hours) {
                        if (mins < 10)
                            mins = "0" + mins;
                        timeString = hours + ":" + mins + ":" + secs;
                    } else {
                        timeString = mins + ":" + secs;
                    }
                    return timeString;
                },

                showDuration : function (duration) {
                    let isInfinite = (duration == Infinity);
                    this.log("Duration is " + duration + "ms.\n");

                    if (isNaN(duration) || isInfinite)
                        duration = this.maxCurrentTimeSeen;

                    // Format the duration as "h:mm:ss" or "m:ss"
                    let timeString = isInfinite ? "" : this.formatTime(duration);
                    this.durationLabel.setAttribute("value", timeString);

                    // "durationValue" property is used by scale binding to
                    // generate accessible name.
                    this.scrubber.durationValue = timeString;

                    // If the duration is over an hour, thumb should show h:mm:ss instead of mm:ss
                    this.scrubberThumb.showHours = (duration >= 3600000);

                    this.scrubber.max = duration;
                    // XXX Can't set increment here, due to bug 473103. Also, doing so causes
                    // snapping when dragging with the mouse, so we can't just set a value for
                    // the arrow-keys.
                    //this.scrubber.increment = duration / 50;
                    this.scrubber.pageIncrement = Math.round(duration / 10);
                },

                seekToPosition : function(newPosition) {
                    newPosition /= 1000; // convert from ms
                    this.log("+++ seeking to " + newPosition);
#ifdef MOZ_WIDGET_GONK
                    // We use fastSeek() on B2G, and an accurate (but slower)
                    // seek on other platforms (that are likely to be higher
                    // perf).
                    this.video.fastSeek(newPosition);
#else
                    this.video.currentTime = newPosition;
#endif
                },

                setVolume : function(newVolume) {
                    this.log("*** setting volume to " + newVolume);
                    this.video.volume = newVolume;
                    this.video.muted = false;
                },

                showPosition : function(currentTime, duration) {
                    // If the duration is unknown (because the server didn't provide
                    // it, or the video is a stream), then we want to fudge the duration
                    // by using the maximum playback position that's been seen.
                    if (currentTime > this.maxCurrentTimeSeen)
                        this.maxCurrentTimeSeen = currentTime;
                    this.showDuration(duration);

                    this.log("time update @ " + currentTime + "ms of " + duration + "ms");

                    this.positionLabel.setAttribute("value", this.formatTime(currentTime));
                    this.scrubber.value = currentTime;
                },

                showBuffered : function() {
                    function bsearch(haystack, needle, cmp) {
                        var length = haystack.length;
                        var low = 0;
                        var high = length;
                        while (low < high) {
                            var probe = low + ((high - low) >> 1);
                            var r = cmp(haystack, probe, needle);
                            if (r == 0) {
                                return probe;
                            } else if (r > 0) {
                                low = probe + 1;
                            } else {
                                high = probe;
                            }
                        }
                        return -1;
                    }

                    function bufferedCompare(buffered, i, time) {
                        if (time > buffered.end(i)) {
                            return 1;
                        } else if (time >= buffered.start(i)) {
                            return 0;
                        }
                        return -1;
                    }

                    var duration = Math.round(this.video.duration * 1000);
                    if (isNaN(duration))
                        duration = this.maxCurrentTimeSeen;

                    // Find the range that the current play position is in and use that
                    // range for bufferBar.  At some point we may support multiple ranges
                    // displayed in the bar.
                    var currentTime = this.video.currentTime;
                    var buffered = this.video.buffered;
                    var index = bsearch(buffered, currentTime, bufferedCompare);
                    var endTime = 0;
                    if (index >= 0) {
                        endTime = Math.round(buffered.end(index) * 1000);
                    }
                    this.bufferBar.max = duration;
                    this.bufferBar.value = endTime;
                },

                _controlsHiddenByTimeout : false,
                _showControlsTimeout : 0,
                SHOW_CONTROLS_TIMEOUT_MS: 500,
                _showControlsFn : function () {
                    if (Utils.video.matches("video:hover")) {
                        Utils.startFadeIn(Utils.controlBar, false);
                        Utils._showControlsTimeout = 0;
                        Utils._controlsHiddenByTimeout = false;
                    }
                },

                _hideControlsTimeout : 0,
                _hideControlsFn : function () {
                    if (!Utils.scrubber.isDragging) {
                        Utils.startFade(Utils.controlBar, false);
                        Utils._hideControlsTimeout = 0;
                        Utils._controlsHiddenByTimeout = true;
                    }
                },
                HIDE_CONTROLS_TIMEOUT_MS : 2000,
                onMouseMove : function (event) {
                    // If the controls are static, don't change anything.
                    if (!this.dynamicControls)
                        return;

                    clearTimeout(this._hideControlsTimeout);

                    // Suppress fading out the controls until the video has rendered
                    // its first frame. But since autoplay videos start off with no
                    // controls, let them fade-out so the controls don't get stuck on.
                    if (!this.firstFrameShown &&
                        !(this.video.autoplay && this.video.mozAutoplayEnabled))
                        return;

                    if (this._controlsHiddenByTimeout)
                        this._showControlsTimeout = setTimeout(this._showControlsFn, this.SHOW_CONTROLS_TIMEOUT_MS);
                    else
                        this.startFade(this.controlBar, true);

                    // Hide the controls if the mouse cursor is left on top of the video
                    // but above the control bar and if the click-to-play overlay is hidden.
                    if ((this._controlsHiddenByTimeout ||
                         event.clientY < this.controlBar.getBoundingClientRect().top) &&
                        this.clickToPlay.hidden) {
                        this._hideControlsTimeout = setTimeout(this._hideControlsFn, this.HIDE_CONTROLS_TIMEOUT_MS);
                    }
                },

                onMouseInOut : function (event) {
                    // If the controls are static, don't change anything.
                    if (!this.dynamicControls)
                        return;

                    clearTimeout(this._hideControlsTimeout);

                    // Ignore events caused by transitions between child nodes.
                    // Note that the videocontrols element is the same
                    // size as the *content area* of the video element,
                    // but this is not the same as the video element's
                    // border area if the video has border or padding.
                    if (this.isEventWithin(event, this.videocontrols))
                        return;

                    var isMouseOver = (event.type == "mouseover");

                    var controlRect = this.controlBar.getBoundingClientRect();
                    var isMouseInControls = event.clientY > controlRect.top &&
                                            event.clientY < controlRect.bottom &&
                                            event.clientX > controlRect.left &&
                                            event.clientX < controlRect.right;

                    // Suppress fading out the controls until the video has rendered
                    // its first frame. But since autoplay videos start off with no
                    // controls, let them fade-out so the controls don't get stuck on.
                    if (!this.firstFrameShown && !isMouseOver &&
                        !(this.video.autoplay && this.video.mozAutoplayEnabled))
                        return;

                    if (!isMouseOver && !isMouseInControls) {
                        this.adjustControlSize();

                        // Keep the controls visible if the click-to-play is visible.
                        if (!this.clickToPlay.hidden)
                            return;

                        this.startFadeOut(this.controlBar, false);
                        clearTimeout(this._showControlsTimeout);
                        Utils._controlsHiddenByTimeout = false;
                    }
                },

                startFadeIn : function (element, immediate) {
                    this.startFade(element, true, immediate);
                },

                startFadeOut : function (element, immediate) {
                    this.startFade(element, false, immediate);
                },

                startFade : function (element, fadeIn, immediate) {
                    if (element.classList.contains("controlBar") && fadeIn) {
                        // Bug 493523, the scrubber doesn't call valueChanged while hidden,
                        // so our dependent state (eg, timestamp in the thumb) will be stale.
                        // As a workaround, update it manually when it first becomes unhidden.
                        if (element.hidden)
                            this.scrubber.valueChanged("curpos", this.video.currentTime * 1000, false);
                    }

                    if (immediate)
                        element.setAttribute("immediate", true);
                    else
                        element.removeAttribute("immediate");

                    if (fadeIn) {
                        element.hidden = false;
                        // force style resolution, so that transition begins
                        // when we remove the attribute.
                        element.clientTop;
                        element.removeAttribute("fadeout");
                        if (element.classList.contains("controlBar"))
                            this.controlsSpacer.removeAttribute("hideCursor");
                    } else {
                        element.setAttribute("fadeout", true);
                        if (element.classList.contains("controlBar") && !this.hasError() &&
                            document.mozFullScreenElement == this.video)
                            this.controlsSpacer.setAttribute("hideCursor", true);

                    }
                },

                onTransitionEnd : function (event) {
                    // Ignore events for things other than opacity changes.
                    if (event.propertyName != "opacity")
                        return;

                    var element = event.originalTarget;

                    // Nothing to do when a fade *in* finishes.
                    if (!element.hasAttribute("fadeout"))
                        return;

                    element.hidden = true;
                },

                _triggeredByControls: false,

                togglePause : function () {
                    if (this.video.paused || this.video.ended) {
                        this._triggeredByControls = true;
                        this.hideClickToPlay();
                        this.video.playbackRate = this.video.defaultPlaybackRate;
                        this.video.play();
                    } else {
                        this.video.pause();
                    }

                    // We'll handle style changes in the event listener for
                    // the "play" and "pause" events, same as if content
                    // script was controlling video playback.
                },

                isVideoWithoutAudioTrack : function() {
                  return this.video.readyState >= this.video.HAVE_METADATA &&
                         !this.isAudioOnly &&
                         !this.video.mozHasAudio;
                },

                toggleMute : function () {
                    if (this.isVideoWithoutAudioTrack()) {
                        return;
                    }
                    this.video.muted = !this.isEffectivelyMuted();
                    if (this.video.volume === 0) {
                      this.video.volume = 0.5;
                    }

                    // We'll handle style changes in the event listener for
                    // the "volumechange" event, same as if content script was
                    // controlling volume.
                },

                isVideoInFullScreen : function () {
                    return document.mozFullScreenElement == this.video;
                },

                toggleFullscreen : function () {
                    this.isVideoInFullScreen() ?
                        document.mozCancelFullScreen() :
                        this.video.mozRequestFullScreen();
                },

                setFullscreenButtonState : function () {
                    if (this.isAudioOnly || !document.mozFullScreenEnabled) {
                        this.fullscreenButton.hidden = true;
                        return;
                    }

                    var attrName = this.isVideoInFullScreen() ? "exitfullscreenlabel" : "enterfullscreenlabel";
                    var value = this.fullscreenButton.getAttribute(attrName);
                    this.fullscreenButton.setAttribute("aria-label", value);

                    if (this.isVideoInFullScreen())
                        this.fullscreenButton.setAttribute("fullscreened", "true");
                    else
                        this.fullscreenButton.removeAttribute("fullscreened");
                },

                onFullscreenChange: function () {
                    if (this.isVideoInFullScreen()) {
                        Utils._hideControlsTimeout = setTimeout(this._hideControlsFn, this.HIDE_CONTROLS_TIMEOUT_MS);
                    }
                    this.setFullscreenButtonState();
                },

                clickToPlayClickHandler : function(e) {
                    if (e.button != 0)
                        return;
                    if (this.hasError() && !this.suppressError) {
                        // Errors that can be dismissed should be placed here as we discover them.
                        if (this.video.error.code != this.video.error.MEDIA_ERR_ABORTED)
                            return;
                        this.statusOverlay.hidden = true;
                        this.suppressError = true;
                        return;
                    }

                    // Read defaultPrevented asynchronously, since Web content
                    // may want to consume the "click" event but will only
                    // receive it after us.
                    let self = this;
                    setTimeout(function clickToPlayCallback() {
                        if (!e.defaultPrevented)
                            self.togglePause();
                    }, 0);
                },
                hideClickToPlay : function () {
                    let videoHeight = this.video.clientHeight;
                    let videoWidth = this.video.clientWidth;

                    // The play button will animate to 3x its size. This
                    // shows the animation unless the video is too small
                    // to show 2/3 of the animation.
                    let animationScale = 2;
                    if (this._overlayPlayButtonHeight * animationScale > (videoHeight - this._controlBarHeight)||
                        this._overlayPlayButtonWidth * animationScale > videoWidth) {
                        this.clickToPlay.setAttribute("immediate", "true");
                        this.clickToPlay.hidden = true;
                    } else {
                        this.clickToPlay.removeAttribute("immediate");
                    }
                    this.clickToPlay.setAttribute("fadeout", "true");
                },

                setPlayButtonState : function(aPaused) {
                  if (aPaused)
                      this.playButton.setAttribute("paused", "true");
                  else
                      this.playButton.removeAttribute("paused");

                  var attrName = aPaused ? "playlabel" : "pauselabel";
                  var value = this.playButton.getAttribute(attrName);
                  this.playButton.setAttribute("aria-label", value);
                },

                isEffectivelyMuted : function() {
                  return this.video.muted || !this.video.volume;
                },

                updateMuteButtonState : function() {
                  var muted = this.isEffectivelyMuted();

                  if (muted)
                      this.muteButton.setAttribute("muted", "true");
                  else
                      this.muteButton.removeAttribute("muted");

                  var attrName = muted ? "unmutelabel" : "mutelabel";
                  var value = this.muteButton.getAttribute(attrName);
                  this.muteButton.setAttribute("aria-label", value);
                },

                _getComputedPropertyValueAsInt : function(element, property) {
                  let value = window.getComputedStyle(element, null).getPropertyValue(property);
                  return parseInt(value, 10);
                },

                STATS_INTERVAL_MS : 500,
                statsInterval : null,

                showStatistics : function(shouldShow) {
                    if (this.statsInterval) {
                        clearInterval(this.statsInterval);
                        this.statsInterval = null;
                    }

                    if (shouldShow) {
                        this.video.mozMediaStatisticsShowing = true;
                        this.statsOverlay.hidden = false;
                        this.statsInterval = setInterval(this.updateStats.bind(this), this.STATS_INTERVAL_MS);
                        this.updateStats();
                    } else {
                        this.video.mozMediaStatisticsShowing = false;
                        this.statsOverlay.hidden = true;
                    }
                },

                updateStats : function() {
                    if (this.videocontrols.randomID != this.randomID) {
                        this.terminateEventListeners();
                        return;
                    }

                    let v = this.video;
                    let s = this.stats;

                    let src = v.currentSrc || v.src || "(no source found)";
                    let srcParts = src.split('/');
                    let srcIdx = srcParts.length - 1;
                    if (src.lastIndexOf('/') == src.length - 1)
                        srcIdx--;
                    s.filename.textContent = decodeURI(srcParts[srcIdx]);

                    let size = v.videoWidth + "x" + v.videoHeight;
                    if (this._getComputedPropertyValueAsInt(this.video, "width") != v.videoWidth || this._getComputedPropertyValueAsInt(this.video, "height") != v.videoHeight)
                        size += " scaled to " + this._getComputedPropertyValueAsInt(this.video, "width") + "x" + this._getComputedPropertyValueAsInt(this.video, "height");
                    s.size.textContent = size;

                    let activity;
                    if (v.paused)
                        activity = "paused";
                    else
                        activity = "playing";
                    if (v.ended)
                        activity = "ended";
                    if (s.activity.getAttribute("activity") != activity)
                        s.activity.setAttribute("activity", activity);
                    if (v.seeking && !s.activity.hasAttribute("seeking"))
                        s.activity.setAttribute("seeking", true);
                    else if (s.activity.hasAttribute("seeking"))
                        s.activity.removeAttribute("seeking");

                    let readyState = v.readyState;
                    switch (readyState) {
                        case v.HAVE_NOTHING:      readyState = "HAVE_NOTHING";      break;
                        case v.HAVE_METADATA:     readyState = "HAVE_METADATA";     break;
                        case v.HAVE_CURRENT_DATA: readyState = "HAVE_CURRENT_DATA"; break;
                        case v.HAVE_FUTURE_DATA:  readyState = "HAVE_FUTURE_DATA";  break;
                        case v.HAVE_ENOUGH_DATA:  readyState = "HAVE_ENOUGH_DATA";  break;
                    }
                    s.readyState.textContent = readyState;

                    let networkState = v.networkState;
                    switch (networkState) {
                        case v.NETWORK_EMPTY:     networkState = "NETWORK_EMPTY";     break;
                        case v.NETWORK_IDLE:      networkState = "NETWORK_IDLE";      break;
                        case v.NETWORK_LOADING:   networkState = "NETWORK_LOADING";   break;
                        case v.NETWORK_NO_SOURCE: networkState = "NETWORK_NO_SOURCE"; break;
                    }
                    s.netState.textContent = networkState;

                    s.framesParsed.textContent = v.mozParsedFrames;
                    s.framesDecoded.textContent = v.mozDecodedFrames;
                    s.framesPresented.textContent = v.mozPresentedFrames;
                    s.framesPainted.textContent = v.mozPaintedFrames;

                    let volume = Math.round(v.volume * 100) + "%";
                    if (v.muted)
                        volume += " (muted)";
                    s.volume.textContent = volume;
                },

                keyHandler : function(event) {
                    // Ignore keys when content might be providing its own.
                    if (!this.video.hasAttribute("controls"))
                        return;

                    var keystroke = "";
                    if (event.altKey)
                        keystroke += "alt-";
                    if (event.shiftKey)
                        keystroke += "shift-";
#ifdef XP_MACOSX
                    if (event.metaKey)
                        keystroke += "accel-";
                    if (event.ctrlKey)
                        keystroke += "control-";
#else
                    if (event.metaKey)
                        keystroke += "meta-";
                    if (event.ctrlKey)
                        keystroke += "accel-";
#endif

                    switch (event.keyCode) {
                        case KeyEvent.DOM_VK_UP:
                            keystroke += "upArrow";
                            break;
                        case KeyEvent.DOM_VK_DOWN:
                            keystroke += "downArrow";
                            break;
                        case KeyEvent.DOM_VK_LEFT:
                            keystroke += "leftArrow";
                            break;
                        case KeyEvent.DOM_VK_RIGHT:
                            keystroke += "rightArrow";
                            break;
                        case KeyEvent.DOM_VK_HOME:
                            keystroke += "home";
                            break;
                        case KeyEvent.DOM_VK_END:
                            keystroke += "end";
                            break;
                    }

                    if (String.fromCharCode(event.charCode) == ' ')
                        keystroke += "space";

                    this.log("Got keystroke: " + keystroke);
                    var oldval, newval;

                    try {
                        switch (keystroke) {
                            case "space": /* Play */
                                this.togglePause();
                                break;
                            case "downArrow": /* Volume decrease */
                                oldval = this.video.volume;
                                this.video.volume = (oldval < 0.1 ? 0 : oldval - 0.1);
                                this.video.muted = false;
                                break;
                            case "upArrow": /* Volume increase */
                                oldval = this.video.volume;
                                this.video.volume = (oldval > 0.9 ? 1 : oldval + 0.1);
                                this.video.muted = false;
                                break;
                            case "accel-downArrow": /* Mute */
                                this.video.muted = true;
                                break;
                            case "accel-upArrow": /* Unmute */
                                this.video.muted = false;
                                break;
                            case "leftArrow": /* Seek back 15 seconds */
                            case "accel-leftArrow": /* Seek back 10% */
                                oldval = this.video.currentTime;
                                if (keystroke == "leftArrow")
                                    newval = oldval - 15;
                                else
                                    newval = oldval - (this.video.duration || this.maxCurrentTimeSeen / 1000) / 10;
                                this.video.currentTime = (newval >= 0 ? newval : 0);
                                break;
                            case "rightArrow": /* Seek forward 15 seconds */
                            case "accel-rightArrow": /* Seek forward 10% */
                                oldval = this.video.currentTime;
                                var maxtime = (this.video.duration || this.maxCurrentTimeSeen / 1000);
                                if (keystroke == "rightArrow")
                                    newval = oldval + 15;
                                else
                                    newval = oldval + maxtime / 10;
                                this.video.currentTime = (newval <= maxtime ? newval : maxtime);
                                break;
                            case "home": /* Seek to beginning */
                                this.video.currentTime = 0;
                                break;
                            case "end": /* Seek to end */
                                if (this.video.currentTime != this.video.duration)
                                    this.video.currentTime = (this.video.duration || this.maxCurrentTimeSeen / 1000);
                                break;
                            default:
                                return;
                        }
                    } catch(e) { /* ignore any exception from setting .currentTime */ }

                    event.preventDefault(); // Prevent page scrolling
                },

                isEventWithin : function (event, parent1, parent2) {
                    function isDescendant (node) {
                        while (node) {
                            if (node == parent1 || node == parent2)
                                return true;
                            node = node.parentNode;
                        }
                        return false;
                    }
                    return isDescendant(event.target) && isDescendant(event.relatedTarget);
                },

                log : function (msg) {
                    if (this.debug)
                        dump("videoctl: " + msg + "\n");
                },

                get isTopLevelSyntheticDocument() {
                  let doc = this.video.ownerDocument;
                  let win = doc.defaultView;
                  return doc.mozSyntheticDocument && win === win.top;
                },

                _playButtonWidth : 0,
                _durationLabelWidth : 0,
                _muteButtonWidth : 0,
                _volumeControlWidth : 0,
                _fullscreenButtonWidth : 0,
                _controlBarHeight : 0,
                _overlayPlayButtonHeight : 64,
                _overlayPlayButtonWidth : 64,
                _volumeStackMarginEnd : 8,
                adjustControlSize : function adjustControlSize() {
                    let doc = this.video.ownerDocument;

                    // The scrubber has |flex=1|, therefore |minScrubberWidth|
                    // was generated by empirical testing.
                    let minScrubberWidth = 25;
                    let minWidthAllControls = this._playButtonWidth +
                                              minScrubberWidth +
                                              this._durationLabelWidth +
                                              this._muteButtonWidth +
                                              this._volumeControlWidth +
                                              this._fullscreenButtonWidth;

                    let isAudioOnly = this.isAudioOnly;
                    if (isAudioOnly) {
                        // When the fullscreen button is hidden we add margin-end to the volume stack.
                        minWidthAllControls -= this._fullscreenButtonWidth - this._volumeStackMarginEnd;
                    }

                    let minHeightForControlBar = this._controlBarHeight;
                    let minWidthOnlyPlayPause = this._playButtonWidth + this._muteButtonWidth;

                    let videoHeight = isAudioOnly ? minHeightForControlBar : this.video.clientHeight;
                    let videoWidth = isAudioOnly ? minWidthAllControls : this.video.clientWidth;

                    // Adapt the size of the controls to the size of the video
                    if (this.video.readyState >= this.video.HAVE_METADATA) {
                      if (!this.isAudioOnly && this.video.videoWidth && this.video.videoHeight) {
                        var rect = this.video.getBoundingClientRect();
                        var widthRatio = rect.width / this.video.videoWidth;
                        var heightRatio = rect.height / this.video.videoHeight;
                        var width = this.video.videoWidth * Math.min(widthRatio, heightRatio);

                        this.controlsOverlay.setAttribute("scaled", true);
                        this.controlsOverlay.style.width = width + "px";
                        this.controlsSpacer.style.width = width + "px";
                        this.controlBar.style.width = width + "px";
                      } else {
                        this.controlsOverlay.removeAttribute("scaled");
                        this.controlsOverlay.style.width = "";
                        this.controlsSpacer.style.width = "";
                        this.controlBar.style.width = "";
                      }
                    }

                    if ((this._overlayPlayButtonHeight + this._controlBarHeight) > videoHeight ||
                        this._overlayPlayButtonWidth > videoWidth) {
                        this.clickToPlay.hidden = true;
                    } else if (this.clickToPlay.hidden &&
                               !this.video.played.length &&
                               this.video.paused) {
                        // Check this.video.paused to handle when a video is
                        // playing but hasn't processed any frames yet
                        this.clickToPlay.hidden = false;
                    }

                    let size = "normal";
                    if (videoHeight < minHeightForControlBar)
                        size = "hidden";
                    else if (videoWidth < minWidthOnlyPlayPause)
                        size = "hidden";
                    else if (videoWidth < minWidthAllControls)
                        size = "small";
                    this.controlBar.setAttribute("size", size);
                },

                init : function (binding) {
                    this.video = binding.parentNode;
                    this.videocontrols = binding;

                    this.statusIcon    = document.getAnonymousElementByAttribute(binding, "class", "statusIcon");
                    this.controlBar    = document.getAnonymousElementByAttribute(binding, "class", "controlBar");
                    this.playButton    = document.getAnonymousElementByAttribute(binding, "class", "playButton");
                    this.muteButton    = document.getAnonymousElementByAttribute(binding, "class", "muteButton");
                    this.volumeControl = document.getAnonymousElementByAttribute(binding, "class", "volumeControl");
                    this.progressBar   = document.getAnonymousElementByAttribute(binding, "class", "progressBar");
                    this.bufferBar     = document.getAnonymousElementByAttribute(binding, "class", "bufferBar");
                    this.scrubber      = document.getAnonymousElementByAttribute(binding, "class", "scrubber");
                    this.scrubberThumb = document.getAnonymousElementByAttribute(this.scrubber, "class", "scale-thumb");
                    this.durationLabel = document.getAnonymousElementByAttribute(binding, "class", "durationLabel");
                    this.positionLabel = document.getAnonymousElementByAttribute(binding, "class", "positionLabel");
                    this.statusOverlay = document.getAnonymousElementByAttribute(binding, "class", "statusOverlay");
                    this.statsOverlay  = document.getAnonymousElementByAttribute(binding, "class", "statsOverlay");
                    this.controlsOverlay = document.getAnonymousElementByAttribute(binding, "class", "controlsOverlay");
                    this.controlsSpacer     = document.getAnonymousElementByAttribute(binding, "class", "controlsSpacer");
                    this.clickToPlay        = document.getAnonymousElementByAttribute(binding, "class", "clickToPlay");
                    this.fullscreenButton   = document.getAnonymousElementByAttribute(binding, "class", "fullscreenButton");
                    this.volumeForeground   = document.getAnonymousElementByAttribute(binding, "anonid", "volumeForeground");

                    this.statsTable       = document.getAnonymousElementByAttribute(binding, "class", "statsTable");
                    this.stats.filename   = document.getAnonymousElementByAttribute(binding, "class", "statFilename");
                    this.stats.size       = document.getAnonymousElementByAttribute(binding, "class", "statSize");
                    this.stats.activity   = document.getAnonymousElementByAttribute(binding, "class", "statActivity");
                    this.stats.volume     = document.getAnonymousElementByAttribute(binding, "class", "statVolume");
                    this.stats.readyState = document.getAnonymousElementByAttribute(binding, "class", "statReadyState");
                    this.stats.netState   = document.getAnonymousElementByAttribute(binding, "class", "statNetState");
                    this.stats.framesParsed    = document.getAnonymousElementByAttribute(binding, "class", "statFramesParsed");
                    this.stats.framesDecoded   = document.getAnonymousElementByAttribute(binding, "class", "statFramesDecoded");
                    this.stats.framesPresented = document.getAnonymousElementByAttribute(binding, "class", "statFramesPresented");
                    this.stats.framesPainted   = document.getAnonymousElementByAttribute(binding, "class", "statFramesPainted");

                    this.isAudioOnly = (this.video instanceof HTMLAudioElement);
                    this.setupInitialState();
                    this.setupNewLoadState();

                    // Use the handleEvent() callback for all media events.
                    // The "error" event listener must capture, so that it can trap error events
                    // from the <source> children, which don't bubble.
                    for each (let event in this.videoEvents)
                        this.video.addEventListener(event, this, (event == "error") ? true : false);

                    var self = this;

                    this.controlListeners = [];

                    // Helper function to add an event listener to the given element
                    function addListener(elem, eventName, func) {
                      let boundFunc = func.bind(self);
                      self.controlListeners.push({ item: elem, event: eventName, func: boundFunc });
                      elem.addEventListener(eventName, boundFunc, false);
                    }

                    addListener(this.muteButton, "command", this.toggleMute);
                    addListener(this.playButton, "command", this.togglePause);
                    addListener(this.fullscreenButton, "command", this.toggleFullscreen);
                    addListener(this.clickToPlay, "click", this.clickToPlayClickHandler);
                    addListener(this.controlsSpacer, "click", this.clickToPlayClickHandler);
                    addListener(this.controlsSpacer, "dblclick", this.toggleFullscreen);

                    addListener(this.videocontrols, "resizevideocontrols", this.adjustControlSize);
                    addListener(this.videocontrols, "transitionend", this.onTransitionEnd);
                    addListener(this.video.ownerDocument, "mozfullscreenchange", this.onFullscreenChange);
                    addListener(this.video, "keypress", this.keyHandler);

                    addListener(this.videocontrols, "dragstart", function(event) {
                        event.preventDefault(); //prevent dragging of controls image (bug 517114)
                    });

                    this.log("--- videocontrols initialized ---");
                }
            };
            this.Utils.init(this);
            ]]>
        </constructor>
        <destructor>
            <![CDATA[
            // randomID used to be a <field>, which meant that the XBL machinery
            // undefined the property when the element was unbound. The code in
            // this file actually depends on this, so now that randomID is an
            // expando, we need to make sure to explicitly delete it.
            delete this.randomID;
            ]]>
        </destructor>

    </implementation>

    <handlers>
        <handler event="mouseover">
            if (!this.isTouchControl)
                this.Utils.onMouseInOut(event);
        </handler>
        <handler event="mouseout">
            if (!this.isTouchControl)
                this.Utils.onMouseInOut(event);
        </handler>
        <handler event="mousemove">
            if (!this.isTouchControl)
                this.Utils.onMouseMove(event);
        </handler>
    </handlers>
  </binding>

  <binding id="touchControls" extends="chrome://global/content/bindings/videocontrols.xml#videoControls">

    <xbl:content xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" class="mediaControlsFrame">
        <stack flex="1">
            <vbox flex="1" class="statusOverlay" hidden="true">
                <box class="statusIcon"/>
                <label class="errorLabel" anonid="errorAborted">&error.aborted;</label>
                <label class="errorLabel" anonid="errorNetwork">&error.network;</label>
                <label class="errorLabel" anonid="errorDecode">&error.decode;</label>
                <label class="errorLabel" anonid="errorSrcNotSupported">&error.srcNotSupported;</label>
                <label class="errorLabel" anonid="errorNoSource">&error.noSource2;</label>
                <label class="errorLabel" anonid="errorGeneric">&error.generic;</label>
            </vbox>

            <vbox class="controlsOverlay">
                <spacer class="controlsSpacer" flex="1"/>
                <box flex="1" hidden="true">
                    <box class="clickToPlay" hidden="true" flex="1"/>
                </box>
                <vbox class="controlBar" hidden="true">
                    <hbox class="buttonsBar">
                        <button class="castingButton" hidden="true"
                                aria-label="&castingButton.castingLabel;"/>
                        <button class="fullscreenButton"
                            enterfullscreenlabel="&fullscreenButton.enterfullscreenlabel;"
                            exitfullscreenlabel="&fullscreenButton.exitfullscreenlabel;"/>
                        <spacer flex="1"/>
                        <button class="playButton"
                                playlabel="&playButton.playLabel;"
                                pauselabel="&playButton.pauseLabel;"/>
                        <spacer flex="1"/>
                        <button class="muteButton"
                                mutelabel="&muteButton.muteLabel;"
                                unmutelabel="&muteButton.unmuteLabel;"/>
                        <stack class="volumeStack">
                          <box class="volumeBackground"/>
                          <box class="volumeForeground" anonid="volumeForeground"/>
                          <scale class="volumeControl" movetoclick="true"/>
                        </stack>
                      </hbox>
                    <stack class="scrubberStack" flex="1">
                        <box class="backgroundBar"/>
                        <progressmeter class="bufferBar"/>
                        <progressmeter class="progressBar" max="10000"/>
                        <scale class="scrubber" movetoclick="true"/>
                    </stack>
                    <vbox class="durationBox">
                        <label class="positionLabel" role="presentation"/>
                        <label class="durationLabel" role="presentation"/>
                    </vbox>
                </vbox>
            </vbox>
        </stack>
    </xbl:content>

    <implementation>

        <constructor>
          <![CDATA[
          this.isTouchControl = true;
          this.TouchUtils = {
            videocontrols: null,
            video: null,
            controlsTimer: null,
            controlsTimeout: 5000,
            positionLabel: null,
            castingButton: null,

            get Utils() {
              return this.videocontrols.Utils;
            },

            get visible() {
              return !this.Utils.controlBar.hasAttribute("fadeout") &&
                     !(this.Utils.controlBar.getAttribute("hidden") == "true");
            },

            _firstShow: false,
            get firstShow() { return this._firstShow; },
            set firstShow(val) {
              this._firstShow = val;
              this.Utils.controlBar.setAttribute("firstshow", val);
            },

            toggleControls: function() {
              if (!this.Utils.dynamicControls || !this.visible)
                this.showControls();
              else
                this.delayHideControls(0);
            },

            showControls : function() {
              if (this.Utils.dynamicControls) {
                this.Utils.startFadeIn(this.Utils.controlBar);
                this.delayHideControls(this.controlsTimeout);
              }
            },

            clearTimer: function() {
              if (this.controlsTimer) {
                clearTimeout(this.controlsTimer);
                this.controlsTimer = null;
              }
            },

            delayHideControls : function(aTimeout) {
              this.clearTimer();
              let self = this;
              this.controlsTimer = setTimeout(function() {
                self.hideControls();
              }, aTimeout);
            },

            hideControls : function() {
              if (!this.Utils.dynamicControls)
                  return;
              this.Utils.startFadeOut(this.Utils.controlBar);
              if (this.firstShow)
                this.videocontrols.addEventListener("transitionend", this, false);
            },

            handleEvent : function (aEvent) {
              if (aEvent.type == "transitionend") {
                this.firstShow = false;
                this.videocontrols.removeEventListener("transitionend", this, false);
                return;
              }

              if (this.videocontrols.randomID != this.Utils.randomID)
                this.terminateEventListeners();

            },

            terminateEventListeners : function () {
              for each (var event in this.videoEvents)
                this.Utils.video.removeEventListener(event, this, false);
            },

            isVideoCasting : function () {
              if (this.video.mozIsCasting)
                return true;
              return false;
            },

            updateCasting : function (eventDetail) {
              let castingData = JSON.parse(eventDetail);
              if ("allow" in castingData) {
                this.video.mozAllowCasting = !!castingData.allow;
              }

              if ("active" in castingData) {
                this.video.mozIsCasting = !!castingData.active;
              }
              this.setCastButtonState();
            },

            startCasting : function () {
              this.videocontrols.dispatchEvent(new CustomEvent("VideoBindingCast"));
            },

            setCastButtonState : function () {
              if (this.isAudioOnly || !this.video.mozAllowCasting) {
                this.castingButton.hidden = true;
                return;
              }

              if (this.video.mozIsCasting) {
                this.castingButton.setAttribute("active", "true");
              } else {
                this.castingButton.removeAttribute("active");
              }

              this.castingButton.hidden = false;
            },

            init : function (binding) {
              this.videocontrols = binding;
              this.video = binding.parentNode;

              let self = this;
              this.Utils.playButton.addEventListener("command", function() {
                if (!self.video.paused)
                    self.delayHideControls(0);
                else
                    self.showControls();
              }, false);
              this.Utils.scrubber.addEventListener("touchstart", function() {
                self.clearTimer();
              }, false);
              this.Utils.scrubber.addEventListener("touchend", function() {
                self.delayHideControls(self.controlsTimeout);
              }, false);
              this.Utils.muteButton.addEventListener("click", function() { self.delayHideControls(self.controlsTimeout); }, false);

              this.castingButton = document.getAnonymousElementByAttribute(binding, "class", "castingButton");
              this.castingButton.addEventListener("command", function() {
                self.startCasting();
              }, false);

              this.video.addEventListener("media-videoCasting", function (e) {
                if (!e.isTrusted)
                  return;
                self.updateCasting(e.detail);
              }, false, true);

              // The first time the controls appear we want to just display
              // a play button that does not fade away. The firstShow property
              // makes that happen. But because of bug 718107 this init() method
              // may be called again when we switch in or out of fullscreen
              // mode. So we only set firstShow if we're not autoplaying and
              // if we are at the beginning of the video and not already playing
              if (!this.video.autoplay && this.Utils.dynamicControls && this.video.paused &&
                  this.video.currentTime === 0)
                this.firstShow = true;

              // If the video is not at the start, then we probably just
              // transitioned into or out of fullscreen mode, and we don't want
              // the controls to remain visible. this.controlsTimeout is a full
              // 5s, which feels too long after the transition.
              if (this.video.currentTime !== 0) {
                this.delayHideControls(this.Utils.HIDE_CONTROLS_TIMEOUT_MS);
              }
            }
          };
          this.TouchUtils.init(this);
          this.dispatchEvent(new CustomEvent("VideoBindingAttached"));
      ]]>
      </constructor>
      <destructor>
          <![CDATA[
          // XBL destructors don't appear to be inherited properly, so we need
          // to do this here in addition to the videoControls destructor. :-(
          delete this.randomID;
          ]]>
      </destructor>

    </implementation>

    <handlers>
        <handler event="mouseup">
          if(event.originalTarget.nodeName == "vbox") {
            if (this.TouchUtils.firstShow)
              this.Utils.video.play();
            this.TouchUtils.toggleControls();
          }
        </handler>
    </handlers>

  </binding>
</bindings>
<Application
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <VisualElements
      DisplayName="@MOZ_APP_DISPLAYNAME@"
      Logo="tileresources\VisualElements_logo.png"
      SmallLogo="tileresources\VisualElements_smalllogo.png"
      ForegroundText="light"
      BackgroundColor="#0a1833">
    <DefaultTile
        ShortName="@MOZ_APP_DISPLAYNAME@"
        ShowName="allLogos"
            />
    <SplashScreen
        Image="tileresources\VisualElements_splashscreen.png" />
  </VisualElements>
</Application>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:41 $"/>
        <language type="vi"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="vun"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
               <gradient android:angle="270"
                         android:startColor="#E0E6EB"
                         android:centerColor="#CAD3DD"
                         android:endColor="#BDC5CE"
                         android:type="linear"/>
        </shape>
    </item>
</layer-list>
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/main_layout"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <LinearLayout android:id="@+id/webapp_titlebar"
                  android:visibility="gone"
                  style="@style/WebView.Titlebar"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:orientation="horizontal">
    
        <TextView android:id="@+id/webapp_title"
                  style="@style/WebView.Titlebar.Title"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:singleLine="true"/>

    </LinearLayout>

    <RelativeLayout android:id="@+id/gecko_layout"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:layout_below="@+id/webapp_titlebar">

        <include layout="@layout/shared_ui_components"/>

        <RelativeLayout android:id="@+id/splashscreen"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

            <ImageView android:id="@+id/splashscreen_icon"
                      android:minWidth="128dip"
                      android:minHeight="128dip"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:layout_centerHorizontal="true"
                      android:layout_centerVertical="true"/>

            <ProgressBar android:id="@+id/splashscreen_progress"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         android:gravity="center"
                         android:layout_centerHorizontal="true"
                         android:layout_alignParentBottom="true"
                         android:paddingBottom="30dip"
                         android:visibility="gone"/>

        </RelativeLayout>

    </RelativeLayout>

    <ViewStub android:id="@+id/toast_stub"
              android:layout="@layout/button_toast"
              style="@style/Toast"/>

</RelativeLayout>
<html xmlns="http://www.w3.org/1999/xhtml">
  <p id="n&#49;">1</p>
  <p xmlns="namespacesarejuststrings" id="n2">2</p>
</html>
<?xml version="1.0"?>
<!DOCTYPE document
  [
    <!ENTITY foobar "baz<quux/>">
  ]>
<document><![CDATA[]]><entity>&foobar;</entity></document>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- These drawables have to be wrapped in a layer-list in order to produce padding at
     the bottom of the drawable. That padding ensures the drawable doesn't block the
     orange strip in widget_bg.9.png -->
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:bottom="@dimen/widget_bg_border_offset">
        <shape android:shape="rectangle">
            <corners android:topLeftRadius="@dimen/widget_drawable_corner_radius"
                     android:topRightRadius="0dp"
                     android:bottomLeftRadius="0dp"
                     android:bottomRightRadius="0dp"/>
            <solid android:color="@color/widget_logo_default"/>
        </shape>
    </item>
</layer-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- These drawables have to be wrapped in a layer-list in order to produce padding at
     the bottom of the drawable. That padding ensures the drawable doesn't block the
     orange strip in widget_bg.9.png -->
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:bottom="@dimen/widget_bg_border_offset">
        <shape android:shape="rectangle">
            <corners android:topLeftRadius="@dimen/widget_drawable_corner_radius"
                     android:topRightRadius="0dp"
                     android:bottomLeftRadius="0dp"
                     android:bottomRightRadius="0dp"/>
            <solid android:color="@color/widget_button_pressed"/>
        </shape>
    </item>
</layer-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"
           android:drawable="@drawable/widget_button_left_pressed"/>

    <!-- The left button is gray in its off state -->
    <item android:drawable="@drawable/widget_button_left_default"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- These drawables have to be wrapped in a layer-list in order to produce padding at
     the bottom of the drawable. That padding ensures the drawable doesn't block the
     orange strip in widget_bg.9.png -->
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:bottom="@dimen/widget_bg_border_offset">
        <shape android:shape="rectangle">
            <solid android:color="@color/widget_button_pressed"/>
        </shape>
    </item>
</layer-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"
           android:drawable="@drawable/widget_button_middle_pressed"/>

    <item android:drawable="@android:color/transparent"/>

</selector>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<!-- These drawables have to be wrapped in a layer-list in order to produce padding at
     the bottom of the drawable. That padding ensures the drawable doesn't block the
     orange strip in widget_bg.9.png -->
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:bottom="@dimen/widget_bg_border_offset">
        <shape android:shape="rectangle">
            <corners android:topLeftRadius="0dp"
                     android:topRightRadius="@dimen/widget_drawable_corner_radius"
                     android:bottomLeftRadius="0dp"
                     android:bottomRightRadius="0dp"/>
            <solid android:color="@color/widget_button_pressed"/>
        </shape>
    </item>
</layer-list>
<?xml version="1.0" encoding="utf-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true"
          android:drawable="@drawable/widget_button_right_pressed"/>

    <item android:drawable="@android:color/transparent"/>

</selector>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Wikipedia (en)</ShortName>
<Description>Wikipedia, the free encyclopedia</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAAAAAA4AQAAJgAAACAgAAAAAAAAJAMAAGQBAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIBgAAAB/z/2EAAAEFSURBVDjLxZPRDYJAEESJoQjpgBoM/9IBtoAl4KcUQQlSAjYgJWAH0gPmyNtkzEEuxkQTPzawc3Ozc3MQTc/JfVPR/wW6a+eKQ+Hyfe54B2wvrfXVqXLDfTCMd3j0VHksrTcH9bl2aZq+BCgEwCCPj9E4TdPYGj0C9CYAKdkmBrIIxiIYbvpbb2sSl8AiA+ywAbJE5YLpCImLU/WRDyIAWRgu4k1s4v50ODru4haYSCk4ntkuM0wcMAINXiPKTJQ9CfgB40phBr8DyFjGKkKEhYhCY4iCDgpAYAM2EZBlhJnsZxQUYBNkSkfBvjDd0ttPeR0mxREQ+OhfYOJ6EmL+l/qzn2kGli9cAF3BOfkAAAAASUVORK5CYIKJUE5HDQoaCgAAAA1JSERSAAAAIAAAACAIBgAAAHN6evQAAAIKSURBVFjD7ZdBSgNRDIYLguAB7FLwAkXwBl0JgiDYjQcY8ARduBJKu3I5C0EoWDxAT9AL9AK9QBeCIHQlCM/3DZOSmeZNZ2r1bQyEGV7yXv7kJZlJq6XIOXfs+crzwPPTnvnR863n05ZFufDD/T595Q4eauM37u/pWYwfeX53cegcABcuHg0AkEQE8AKAu4gAXv8BrAEMh0PXbrddt9t1vV4v406nk62laeqm02n2LjKYIuK5WCyyfeiLDF32yLn6TJ5mBFarlev3+9nBMMqsabkYhmezWcEd2ctTE/tYBwhgt14BhtmAV2VaLpdrAHioCW+VdwWy9IMAUBQjJcQFTwGqvcTD+Xy+oc8askZJyAYrnKEokCeWLpQkSSZvBIANYgSDVVEQQJaeyHQu1QIgiQNb6AmrTtaQ9+RFSLa1D4iXgfsrVITloeSFFZlaAEjAUMaXo2DJWQtVRe1OKF5aJUkf0NdglXO5VzQGoI2USwwD3LEl590CtdO3QBoT5WSFV+Q63Oha17ITgMlkslGSGBWPdeNiDR2SL1B6zQFINmOAkFOW5eTSURCdvX6OdUlapaWjsKX0dgOg26/VWHSUKhrPz35ISKwq76R9Wx+kKgC1f0o5mISsypUG3kPj2L/lDzKYvEUwzoh2JtPRdQQAo1jD6afne88H1oTMeH6ZK+x7PB/lQ/CJtvkNEgDh1dr/bVYAAAAASUVORK5CYII=</Image>
<Image width="74" height="74">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABKCAIAAACTslUmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5ZWJkNTlmMy02ZDIzLTRjZWUtOWQyOS01OWY4ODY2OTRmNzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTA2MTE5RkU5QjQwMTFFM0IwODREMENBREVCMTMxOUIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTA2MTE5RkQ5QjQwMTFFM0IwODREMENBREVCMTMxOUIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MGIwYjJiY2EtNDlhOS00ZTNmLThiMzAtYTViMGFjZTQ3OTVjIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjllYmQ1OWYzLTZkMjMtNGNlZS05ZDI5LTU5Zjg4NjY5NGY3MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpbYde4AAATqSURBVHja7JpZKG1fHMeveYhMIXPodAxRElFmXlAyTw+eSBGivBiSPFCmPDhekJDiAZEiUaIQh8wiccpM5lm43+6u9d+dc/a5HMf/urf1e1p7re9e+/ux9t6/39qH0tvb249/N5R//NNB8SgexaN4FI/iUTyKR/EoHsWjeBSP4lE8ikfxKN47Q/X9Uk9Pz+fnZx6PZ2VlZWBgoKmp+fj4eHNzc3d3d3V1tb6+fnZ2trCw0NfXV1hYaGdn5+zsbGRkBBnOury8PDk52djY2NvbGxoagj4uLs7W1tbBwQFT6erqYqr9/f3Nzc2dnZ3+/v6Hh4fY2Fh7e3s+n49JtLW1b29vce7i4qKSktL09PR7Tb+9O3A9gHHNo6KiEhAQAJcjIyMeHh5SNUD18fERiUQrKytoSAqA4efnt7u7yyUwMzNLTEx8v+cP4DGxvLwcGBgodtXMzEwxGVYyJCSErcnIyBDTYFXZmo6ODjEB/lj+/v7MqIaGxuDg4EfdfhiPCdxUxJaamtrT05OkBub09PSIrKWlRVLT3t7OjHZ1dUm9EBEMDAzI4VNOPKFQ+N/bSVl5bW1NqkwgEBAZ7lhJQXp6OoZSUlK4LlRRUQFBaGiofD7lxEOw76usrCwumaWlJZGNjo6yhy4uLlR+xfX1NdfpTk5OOHF+fv7/xhsbGyO+8WDgFSpV1tTUxLWAzNJVVlZyXWJychICd3d3uU3Kjyf2BFZVVUnVvLy8GBsbE9nExATTjzSAQ0NDQxnz456U+6lTAB57ZSwsLLhk1dXVRIbXPdMZExODw7a2Nq6zGH4TE5PPOPwUHt6NSMrEemdnp1TZ/f09+xUK3+hBA2ldxuT5+fnQ1NfX/zE8REFBAfHt5ubGJSstLSWyhISE+Ph4NIaHh7n0SImoAVRVVVG+/Em8w8NDdu5GuSRVhioMdtlKX19fGdM2NzdDk5eX90l7n8VjijViOioqikuWm5vLruBQo8qY08bGBrKDg4M/jzczM8NeFtTEUmXHx8eob0ihg+qZa8KpqSlowsPDP+9NAXgIdg2dk5PDJSsuLiaysLAw2QUDNh/fBa+7u5u9LeBK8bW1tex1XlpaktRgu4AhV1dXhRhTDB7C1NSU+AaGpABbPuzr2HgRERGSsuzsbAxhy/e98MrLy4lvbAslBWlpaRhCNkOlQpSrq6tsDXYeKND19fUV5UpheOfn5+rq6sR3T08Pe/To6Aidjo6OaCclJXG9aRsbG9FZU1Pz7fAQqampXNVzdHQ0yYpzc3PsW3RjY4PIzM3N0YNi6DviIZWxfc/OzjL9W1tbOAwICCBKtNlFDNM5Pj4udVP/XfAQ5NsBAumeDbO9vU1k2DdIpkrm48rnU/kX4g0ODop9pzo9PUUjOTlZTOnl5UVkhYWFuCHRCA4OVqwfBeMh7O3tie+ysrLIyEg0kBXEZKiniQyPHMDQEAqF3x2voaFB7DtaSUmJVKWLiwtb5u3trXAzisfDXk5HR4eYRpZ7fX39ba2D6O3t/QvwENjIENOtra0ylDwej5FZW1t/hZMvwROJRIxpPp8vWwl4RllXV/fX4CGCgoJgemRk5PcOfsXd3d1X2FD9op9mioqKUIIxkLJDIBBgy6+lpfUVNpTe6L+KUzyKR/EoHsWjeBSP4lE8ikfxKB7Fo3gUj+JRvHfFTwEGAAgMbrUkfQalAAAAAElFTkSuQmCC</Image>
<Url type="application/x-suggestions+json" method="GET" template="http://en.wikipedia.org/w/api.php">
  <Param name="action" value="opensearch"/>
  <Param name="search" value="{searchTerms}"/>
</Url>
<Url type="text/html" method="GET" template="http://en.wikipedia.org/wiki/Special:Search">
  <Param name="search" value="{searchTerms}"/>
  <Param name="sourceid" value="Mozilla-search"/>
</Url>
<SearchForm>http://en.wikipedia.org/wiki/Special:Search</SearchForm>
</SearchPlugin>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Wikipedia (en)</ShortName>
<Description>Wikipedia, the Free Encyclopedia</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAAAAAA4AQAAJgAAACAgAAAAAAAAJAMAAGQBAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIBgAAAB/z/2EAAAEFSURBVDjLxZPRDYJAEESJoQjpgBoM/9IBtoAl4KcUQQlSAjYgJWAH0gPmyNtkzEEuxkQTPzawc3Ozc3MQTc/JfVPR/wW6a+eKQ+Hyfe54B2wvrfXVqXLDfTCMd3j0VHksrTcH9bl2aZq+BCgEwCCPj9E4TdPYGj0C9CYAKdkmBrIIxiIYbvpbb2sSl8AiA+ywAbJE5YLpCImLU/WRDyIAWRgu4k1s4v50ODru4haYSCk4ntkuM0wcMAINXiPKTJQ9CfgB40phBr8DyFjGKkKEhYhCY4iCDgpAYAM2EZBlhJnsZxQUYBNkSkfBvjDd0ttPeR0mxREQ+OhfYOJ6EmL+l/qzn2kGli9cAF3BOfkAAAAASUVORK5CYIKJUE5HDQoaCgAAAA1JSERSAAAAIAAAACAIBgAAAHN6evQAAAIKSURBVFjD7ZdBSgNRDIYLguAB7FLwAkXwBl0JgiDYjQcY8ARduBJKu3I5C0EoWDxAT9AL9AK9QBeCIHQlCM/3DZOSmeZNZ2r1bQyEGV7yXv7kJZlJq6XIOXfs+crzwPPTnvnR863n05ZFufDD/T595Q4eauM37u/pWYwfeX53cegcABcuHg0AkEQE8AKAu4gAXv8BrAEMh0PXbrddt9t1vV4v406nk62laeqm02n2LjKYIuK5WCyyfeiLDF32yLn6TJ5mBFarlev3+9nBMMqsabkYhmezWcEd2ctTE/tYBwhgt14BhtmAV2VaLpdrAHioCW+VdwWy9IMAUBQjJcQFTwGqvcTD+Xy+oc8askZJyAYrnKEokCeWLpQkSSZvBIANYgSDVVEQQJaeyHQu1QIgiQNb6AmrTtaQ9+RFSLa1D4iXgfsrVITloeSFFZlaAEjAUMaXo2DJWQtVRe1OKF5aJUkf0NdglXO5VzQGoI2USwwD3LEl590CtdO3QBoT5WSFV+Q63Oha17ITgMlkslGSGBWPdeNiDR2SL1B6zQFINmOAkFOW5eTSURCdvX6OdUlapaWjsKX0dgOg26/VWHSUKhrPz35ISKwq76R9Wx+kKgC1f0o5mISsypUG3kPj2L/lDzKYvEUwzoh2JtPRdQQAo1jD6afne88H1oTMeH6ZK+x7PB/lQ/CJtvkNEgDh1dr/bVYAAAAASUVORK5CYII=</Image>
<Image width="65" height="26">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAYAAADovjFxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA3MkMyRDY5QjUyNTExRTNCNzdEOTU4N0NCMjI3MEFDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA3MkMyRDZBQjUyNTExRTNCNzdEOTU4N0NCMjI3MEFDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDcyQzJENjdCNTI1MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDcyQzJENjhCNTI1MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7lkNGzAAAELklEQVR42uyYa4hUZRjHn3Nm13X2Mu6urtqutrTeVjRUQikoKUoQLIy8hybiBcVMRdFASPwgQTczsCiMvFYGffBDeANFUDEydc31viheat2dyVndmdmdy57+7/I/+HCcKaX1Q3Re+LHnOe9z3sv/PM/znlnLcRz5vzdb/OaL4Ivgi3C/WV01UCAQkNraWqmpGSCVVVWSl5cnZaXl4jgZaWpugp0viURcwpGIJJMpSba1SY+yUlmy5B3ZuGGDXGlokJKSYkmn0pJOp6UDBbsl2iJFRYVi25bEYjFpwzOtra3S3t4umUxGuqqo53WVCGZR9fX1nZgWDAaxgWIJhUpASGyIFLBtSWKDhcFCScTjuE5JXV2dhMNhSaVS2Kwt0WgUYiU6hTCiRSLNGM2BnYF4yccWCWPB6yAC9oGzYC2Iga/pNx/kg/fBs2AcSICvQOMjT2pZD7xFE0kFBd0lHo89zsiv5d8L3o4nwW+dcotUMDo+p11Jn3YKY/qeY9900P0/lv5hUJ+rswc3Nlnd6wDvgmHgR3V/GfgyS0RZf1NrrEeoR/ZD1rDAPzzrHX8wuEYhcr68E6BV2W9RGJMiI9T9wxzwFfAd+AyUgeFgK/iG9ovgAMcpAIvB92AVNzCJ9hoKu4LjjwabmYrGdwtYyb45nPM98DbYyHW4bSr7Pwb9PPszqTwGnGdUZ22DuekX1L074JSy3wC7eV1C/53clFHXVLEz7Hc3UsG38gz9x7O/F+25oC+vPzI1FVwGN0FP8Dz4gmO4fvPYN5X2LI5ZSvsTT9F/iveEgkZyhc8lTrxd3TPhM1LZ08C3vL7HxRplM6AN/AqOgVGgjhts5sKugyi4qvKzhaKZ4voHGMKCe5oF2qHfIj7TyDGucSM/sH5tY7/p+x1cBGm17vmMgikUsxw8kSv/ZoBqqjiCm7zLsBQ+vMuTl/nKbuTJcdIjpmnduIBuKmfNmfcy570BlrMvzpSap+Z2GG2WZ869nr3Ynn7TngZ7wACKbIRdl+s74QgddlPphVzgh6A/c1g8xbND2b24qD/BLVDk8XWUv8MIKuTCTNinVFjfBh+oY82mv+OZs1SNJ1n6ZzLi1nvWsgksyFUbXuVAO5RQjppENxNynyq7AfzE6xsMyyDtfhxDF1mHkZCtSJ9T9mLWIPeZibzuyejb5hlztVr7ZaaBtzlu5GU7Zi7xW8BU0CaqZt7wfnBI+b0GhvIb4iBD7SWOuYfKr+Px+zN4k3loJj/KojYIFINfmALu6TCW0dGbp0gNj+nZLHI203YCOA6WqtNhEF/OWc45ki/kHOuWzW+cgYyyK//mw8MtLEU8AkMqbIMeP5OjfWj3oU9flUL63C5XZ7zZaJXq66+eGajmdJvrG2LkuHNUco1uLapWdarC8v+z5P+U9kXwRfBF8EXwRfBFyNH+EmAA/FQ613UCCjYAAAAASUVORK5CYII=</Image>
<Image width="130" height="52">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAYAAABGkOCVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjg5QzlEREIwQjUyNjExRTNCNzdEOTU4N0NCMjI3MEFDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjg5QzlEREIxQjUyNjExRTNCNzdEOTU4N0NCMjI3MEFDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODlDOUREQUVCNTI2MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODlDOUREQUZCNTI2MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz41D9uwAAAJWElEQVR42uxcCWxURRj+t3t029IiVCyXLSpo0ERFLVAvNJ4oBRUVL7Se4IUXeOIVjaKmgkHxthweiKJGY/HAKxqwaiwYBBESwQtpgdCWtns//6nfi7/je7v72kI0mS/5s7vvn5n3Zuab/3pNfZZlkYFBjlkCA0MEA0MEA0MEA0MEA0MEA0MEA0MEA0MEA0MEA0MEg87B919+OL/fT4FAgELBIF0zZQqVl5dTSZ8SWr1mHY2oqKBYtIWSiSSlLB81bN5EkUiU4ok4BYMBSqZ8FItEqCmVoBhf6xvOJx+PY6VSRHi/krJS5PP5OiTB4+SFcymVTFI797N4TFJ6foatjVsoNxyi3sW7U3t7hOKxCB+hHGppbqFgfh7ts+cgamlvofy8fIrHk+Tj4ROxKK1Y+S21trbRgvnz+NkilOSxU+r+hghdw+DBg6msbBDV1X1FY8ZUUmtbS8fG+nw5VFVVRUWFPamppYlCoSAlkooI7dTMmxlnMvTzSAS1oe1trdSjqIiJsJWJEKRevYs7iBCLMhH8OfwZo2Zus7R2CcWYHIq0hw4fQX5+nveX1FJ9/bfGIuxqDBgwgPLy8ngD4x0bq7baSllUstcgGj9hAoWjfJ03yrIkESwQgU9wIkXh3FAHESLRKBUV7UZlpaW0dt2PFGlro8WLX6eGhoaOE93xxpb7qL7qpDfydRuKDIlkgsi81P0PBkI53kOhIUOG0LRptzAhijrV//8YIwxluZMlxtJCf3HZz1LM8hbLQpYDWe5gaWJhu0ghliBLNctqlqksB7NsYwmz9GCZw/IFy0Uso9E3ylLIkg/dbEPTnY5TWTawfJ+p4R4sN7GsAgmUtLHczXKYaDNb6JVMB1kUjmd5R+hU2z2hG8HyIMa09U+hj8HOhdo3FZ2+7qVTL5bN2KiVLm1mQd/OMlDTjYPuXpe+86EfZvZnl+EWcbD7e+l4jzi1Zzjo+7I0Ql+j6epYfoFbcSKZcjsLzN7sMoQ0Kz/FS+dSllZ0/MSlzf3Qq3b74dpxuHaOS5/roD/Q7M8uwyU4nPZ+feN1gGfRMc5S4WIVtqPNQ7imXMkacq9UbmJZJgLUXBcGO323ERTfA3rtSViioIM+IPr7tbFshNOsScDlmdImK2nmEfRwqp36+7PoW4cAvzcCfLVfI9NNUMfTLBfiIa5kWa7p/0AwOB2s246TPgaBiY7TQZ7r8VtZkWcwmQQ+fSDTVWgzE1lICqI2aS0yELUQL7H0YymCy1Exy40s37FczTIeYybFfdS8XmE5gOVhlgKM7cMixbR4Rrox5SavweYmsW5JCIHYPVmWIINSGAT3aY+fg+dox3xS+P0uywuwsDqRVFZ2CO5jZ3Mq87qV5es0JBjOUs5yLjK5z1hOhMX+0gub38ON1U33colGG4X/eSPNWJ/hYWzkY5NrRP8rVOou03g8tK1fxLK/sCiVQnctAtACu7bEMoplI/Q/sBzK0gd61e4gkMkeYxzIfBRMqLr2srBcfbCwddD9zjKR5TSWsSw3i+vSwgwDqe37TMJ91PzPxLqp6+vgXvXUfjDLWaL/QvQtzLB/i7DuNiah/88gbNY4Udx8hkub6aLNyS5t9oX+dgfdKOh+cnEVhBOu2hytXVfj/cpSlmYOj2vuS8dY6Fdo13uKOOlUlyj8SZf5qHx9d+36kejzmyCrbjHtTKw8wzqcksXe9YO1kfGaSvObMcZYNz/mhA+ECbkUfkbHAuEK3HzPZfic46ArEM9Q5KCXfl+eAHUSb8MmbczCv7qRLE/cR6JJFF+GuMQRuS6Wb6bDXDLN8024gDDis5DLWtjWNBOuByFfFde2ilrC+V6IQKLqpxhe5aAfIPpPhrvQF2AyxtnexQg4IU7X04gDVu7k1IsQf6R7HsIhuRzfH4OF84q5+FQu69guPHcAcdRH9O+3HfPxWYm9y5oIb7OsFz5GN2vVqBsov1iCTZc4Dye5O8rIO2B1aumvcvj8btx0PcBVzzwU35elKb6Voah2l2aGO/O66Xe4OoVjujCX0dgLZS3fRwngUwSxDwhLeK4XIuxAdG/7+tOErhIbczFMG+GUFos2KnVZikCoq3gB2UthmvpGZ1GAoEwFhHsjiAyhuLbGpc8RMOM1qJH80cVniCCGIK8VQA1Xw/o+D/em4p96ZFy1SALIiQiZoMz9ZoeCRD0iUBkMKZmGa8dmEdycgjYbRUSv+8Xv0eZhTE59X410NBOeQftZLvoJ0Dchyp6LhVqG9NkJd4vovT9M7HQtQtdxEvpsQiDnBBVzfI52zzvo7XU4M819hqLNJWnaVIhUtMIrGarFRg9DXqs/1MdiU1Xa8yICFuomItjvJz7E7+UZCkBeiLAClmyYS6rsRIRntYh8YheJ0EPM9Z5OEuEJkLogQ5HLTo8fzdY1yKDRLrY8CllF/3yjNVOUqFWGcAJOcXfBfsE1Hq5mJAKz7oAfUXW9h0DPr0XkC8R6FnbiGQpFhrK0k+7tKtQ+WjPEQ2+LtezphQgb4DftQGYU/L/EhyKKn4xCVE2WmUBKVOgkZOUuis9mpD9tKEJNTTN+Uvt003sJ7uLap44bHNxKMsM8CUWjIAI7pwDVcshW9JRR4bks5rAQNYtSFNA8YTgmYptlp9L0JOFCbs5izLPRdrtD6mlHt5vQZoKmu0Dc64I01TULgaYTqqBf72Ed5qBPrYPucJYGnDSJcaJKW+pQPZwI/VqntA6HdQPaOKXx+4EgjR7mUY/xvszgShzxCTpXuujzUUqO07//VkGiP8z6L2Izl+OE24tzKU6GJchyB/3zZc0XQl8rgh/lkxcLnYrI54miVxnihs2izTLc3+1vOEeCWAm0Vyf7LQSYNUjPLByWElF/mYENlvO8DylwNSzpr3AtJQ4EqBLxl4XsZBbWdyCqp1uEfgkOYaGL+1AW6zURMFqoWt4X8EAE9VJH1ezfcdG3IS3JFTmxW8CyDRNqwuIP1MxtApOai8XtiwmHRLtb8TxRBJs+4b9XIZJvBUF3E1YsgFStGic4DIsUyfDM67GQTfjdQyxmLsj0IwhmP4edgm/D8/Whv1+0qXavYKM3uNzT/nOARZh3Ma4HMZ6axyNYmyDIF3ex2DlYq3qszQ6sZzE5vyw0MDAwMDAwMDAwQKpm/uGmgZ1SGBgYIhgYIhgYIhgYIhgYIhgYIhgYIhgYIhgYIhh4w58CDAAL8AVXFSeKUgAAAABJRU5ErkJggg==</Image>
<Url type="application/x-suggestions+json" method="GET" template="https://en.wikipedia.org/w/api.php">
  <Param name="action" value="opensearch"/>
  <Param name="search" value="{searchTerms}"/>
</Url>
<Url type="text/html" method="GET" template="https://en.wikipedia.org/wiki/Special:Search"
     resultdomain="wikipedia.org" rel="searchform">
  <Param name="search" value="{searchTerms}"/>
  <Param name="sourceid" value="Mozilla-search"/>
</Url>
</SearchPlugin>
<?xml version='1.0' encoding='UTF-8'?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<soap:Body>
		<jsconf xmlns="http://www.example.com/ns1">
			<response xmlns:ab="http://www.example.com/ns2">
				<meta>
					<component id="seite1">
						<properties xmlns:cd="http://www.example.com/ns3">
							<property name="prop1">
								<thing />
								<value>1</value>
							</property>
							<property name="prop2">
								<thing att="something" />
							</property>
							<foo_bar>foo</foo_bar>
						</properties>
					</component>
				</meta>
			</response>
		</jsconf>
	</soap:Body>
</soap:Envelope>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:withinTextRule selector="//h:cite" withinText="nested"/>
</its:rules>

<doc>
 <head>
  <its:rules version="2.0" xmlns:its="http://www.w3.org/2005/11/its">
   <its:withinTextRule withinText="yes" selector="//b|//u|//i"/>
   <its:withinTextRule withinText="nested" selector="//fn"/>
  </its:rules>
 </head>
  <body>
   <p>This is a paragraph with <b>bold</b>, <i>italic</i>, and <u>underlined</u>.</p>
   <p>This is a paragraph with a footnote<fn>This is the text of the footnote</fn> at the middle.</p>
  </body>
 </doc>
<?xml version="1.0"?>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0"
 xmlns:d="http://my.DocumentURI/">
 <its:withinTextRule selector="//d:kw|//d:img|//d:em" withinText="yes"/>
 <its:withinTextRule selector="//d:fnote" withinText="nested"/>
</its:rules>
<?xml version="1.0"?>
<myDocument xmlns="http://my.DocumentURI/" xml:lang="en">
 <prolog>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0"
 xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="withintext2xmlrules.xml"
 xmlns:d="http://my.DocumentURI/">
 <its:withinTextRule selector="//d:keywords/d:kw" withinText="no"/>
</its:rules>
  <author>Zebulon Fairfield</author>
  <version>version 12, revision 2 - 2006-08-14</version>
  <keywords><kw>horse</kw><kw>appaloosa</kw></keywords>
  <storageKey>articles-6D272BA9-3B89CAD8</storageKey>
 </prolog>
 <content>
  <section>
   <title>Appaloosa</title>
   <p>The Appaloosa<fnote>The name comes from "Palouse horse" in reference
    to the Palouse River in Northern Idaho.</fnote> are rugged horses 
    originally breed by the <kw>Nez-Perce</kw> tribe in the US Northwest.</p>
   <p>They are often characterized by their spotted coats, as shown 
    here: <img src="appaloosa.png" alt="Appaloosa horses"/></p>
  </section>
  <footer><p>Copyright: <em>Zebulon Inc.</em></p></footer>
 </content>
</myDocument>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:h="http://www.w3.org/1999/xhtml" version="2.0">
<its:param name="withinTextParam">firstkeyword</its:param>
<its:withinTextRule selector="//h:cite" withinText="nested"/>
<its:withinTextRule selector="//h:section/h:span[@itemprop=$withinTextParam]" withinText="no"/>
</its:rules>
<text xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <prolog>
  <title its:withinText="no">Designing User Interfaces</title>
  <author its:withinText="no">Janice Prakash</author>
  <keywords its:withinText="no">user interface, ui, software interface</keywords>
 </prolog>
 <body>
  <p>The book <title its:withinText="yes">Of Mice and Screens</title> by <author its:withinText="yes">Aldus 
     Brandywine</author> is one of the best introductions to the vast topic of designing user interfaces.</p>
 </body>
</text>
<text xmlns:its="http://www.w3.org/2005/11/its" its:version="2.0">
 <prolog>
  <its:span withinText="no">Designing User Interfaces</its:span>
  <its:span withinText="no">Janice Prakash</its:span>
  <its:span withinText="no">user interface, ui, software interface</its:span>
 </prolog>
 <body>
  <p>The book <its:span withinText="yes">Of Mice and Screens</its:span> by <its:span withinText="yes">Aldus 
     Brandywine</its:span> is one of the best introductions to the vast topic of designing user interfaces.</p>
 </body>
</text>

<doc>
<head>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="withinTextParam">footnote</its:param>
<its:withinTextRule withinText="yes" selector="//b|//u|//i"/>
<its:withinTextRule withinText="nested" selector="//fn[@id=$withinTextParam]"/>
</its:rules>
</head>
<body>
<p>
This is a paragraph with
<b>bold</b>
,
<i>italic</i>
, and
<u>underlined</u>
.
</p>
<p>
This is a paragraph with a footnote
<fn id="footnote">This is the text of the footnote</fn>
at the middle.
</p>
</body>
</doc>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" version="2.0">
<its:param name="withinTextParam">footnote</its:param>
<its:withinTextRule withinText="yes" selector="//b|//u|//i"/>
<its:withinTextRule withinText="nested" selector="//fn[@id=$withinTextParam]"/>
</its:rules>
<doc>
<head>
<its:rules xmlns:its="http://www.w3.org/2005/11/its" xmlns:xlink="http://www.w3.org/1999/xlink" version="2.0" xlink:href="withintext6xmlrules.xml"/>
</head>
<body>
<p>
This is a paragraph with
<b>bold</b>
,
<i>italic</i>
, and
<u>underlined</u>
.
</p>
<p>
This is a paragraph with a footnote
<fn id="footnote">This is the text of the footnote</fn>
at the middle.
</p>
</body>
</doc>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings [
  <!ENTITY % wizardDTD SYSTEM "chrome://global/locale/wizard.dtd">
  %wizardDTD;
]>

<bindings id="wizardBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="wizard-base">
    <resources>
      <stylesheet src="chrome://global/skin/wizard.css"/>
    </resources>
  </binding>
  
  <binding id="wizard" extends="chrome://global/content/bindings/general.xml#root-element">
    <resources>
      <stylesheet src="chrome://global/skin/wizard.css"/>
    </resources>
    <content>
      <xul:hbox class="wizard-header" anonid="Header"/>
      
      <xul:deck class="wizard-page-box" flex="1" anonid="Deck">
        <children includes="wizardpage"/>
      </xul:deck>
      <children/>
      
      <xul:hbox class="wizard-buttons" anonid="Buttons" xbl:inherits="pagestep,firstpage,lastpage"/>
    </content>
    
    <implementation>
      <property name="title" onget="return document.title;"
                             onset="return document.title = val;"/>

      <property name="canAdvance" onget="return this._canAdvance;"
                                  onset="this._nextButton.disabled = !val; return this._canAdvance = val;"/>
      <property name="canRewind" onget="return this._canRewind;"
                                 onset="this._backButton.disabled = !val; return this._canRewind = val;"/>

      <property name="pageStep" readonly="true" onget="return this._pageStack.length"/>

      <field name="pageCount">0</field>
      
      <field name="_accessMethod">null</field>
      <field name="_pageStack">null</field>
      <field name="_currentPage">null</field>

      <property name="wizardPages">
        <getter>
        <![CDATA[
          var xulns = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          return this.getElementsByTagNameNS(xulns, "wizardpage");
        ]]>
        </getter>
      </property>

      <property name="currentPage" onget="return this._currentPage">
        <setter>
        <![CDATA[
          if (!val)
            return val;
            
          this._currentPage = val;

          // Setting this attribute allows wizard's clients to dynamically
          // change the styles of each page based on purpose of the page. 
          this.setAttribute("currentpageid", val.pageid);
                    
          if (this.onFirstPage) {
            this.canRewind = false;
            this.setAttribute("firstpage", "true");
#ifdef XP_UNIX
#ifndef XP_MACOSX
            this._backButton.setAttribute('hidden', 'true');
#endif
#endif
          } else {
            this.canRewind = true;
            this.setAttribute("firstpage", "false");
#ifdef XP_UNIX
#ifndef XP_MACOSX
            this._backButton.setAttribute('hidden', 'false');
#endif
#endif
          }
                    
          if (this.onLastPage) {
            this.canAdvance = true;
            this.setAttribute("lastpage", "true");
          } else {
            this.setAttribute("lastpage", "false");
          }

          this._deck.setAttribute("selectedIndex", val.pageIndex);
          this._advanceFocusToPage(val);

          this._adjustWizardHeader();
          this._wizardButtons.onPageChange();

          this._fireEvent(val, "pageshow");
          
          return val;
        ]]>
        </setter>
      </property>

      <property name="pageIndex"
                onget="return this._currentPage ? this._currentPage.pageIndex : -1;">
        <setter>
        <![CDATA[
          if (val < 0 || val >= this.pageCount)
            return val;

          var page = this.wizardPages[val];
          this._pageStack[this._pageStack.length-1] = page;
          this.currentPage = page;

          return val;
        ]]>
        </setter>
      </property>

      <property name="onFirstPage" readonly="true"
                onget="return this._pageStack.length == 1;"/>

      <property name="onLastPage" readonly="true">
        <getter><![CDATA[
          var cp = this.currentPage;
          return cp && ((this._accessMethod == "sequential" && cp.pageIndex == this.pageCount-1) ||
                       (this._accessMethod == "random" && cp.next == ""));
         ]]></getter>
      </property>

      <method name="getButton">
        <parameter name="aDlgType"/>
        <body>
        <![CDATA[
          var btns = this.getElementsByAttribute("dlgtype", aDlgType);
          return btns.item(0) ? btns[0] : document.getAnonymousElementByAttribute(this._wizardButtons, "dlgtype", aDlgType);
        ]]>
        </body>
      </method>

      <field name="_canAdvance"/>
      <field name="_canRewind"/>
      <field name="_wizardHeader"/>
      <field name="_wizardButtons"/>
      <field name="_deck"/>
      <field name="_backButton"/>
      <field name="_nextButton"/>
      <field name="_cancelButton"/>

      <!-- functions to be added as oncommand listeners to the wizard buttons -->
      <field name="_backFunc">(function() { document.documentElement.rewind(); })</field>
      <field name="_nextFunc">(function() { document.documentElement.advance(); })</field>
      <field name="_finishFunc">(function() { document.documentElement.advance(); })</field>
      <field name="_cancelFunc">(function() { document.documentElement.cancel(); })</field>
      <field name="_extra1Func">(function() { document.documentElement.extra1(); })</field>
      <field name="_extra2Func">(function() { document.documentElement.extra2(); })</field>

      <field name="_closeHandler">(function(event) {
        if (document.documentElement.cancel())
          event.preventDefault();
      })</field>
       
      <constructor><![CDATA[
        this._canAdvance = true;
        this._canRewind = false;
        this._hasLoaded = false;
        
        this._pageStack = [];
        
        try {
          // need to create string bundle manually instead of using <xul:stringbundle/>
          // see bug 63370 for details
          this._bundle = Components.classes["@mozilla.org/intl/stringbundle;1"]
                                   .getService(Components.interfaces.nsIStringBundleService)
                                   .createBundle("chrome://global/locale/wizard.properties");
        } catch (e) {
          // This fails in remote XUL, which has to provide titles for all pages
          // see bug 142502
        }
        
        // get anonymous content references
        this._wizardHeader = document.getAnonymousElementByAttribute(this, "anonid", "Header");
        this._wizardButtons = document.getAnonymousElementByAttribute(this, "anonid", "Buttons");
        this._deck = document.getAnonymousElementByAttribute(this, "anonid", "Deck");
        
        this._initWizardButton("back");
        this._initWizardButton("next");
        this._initWizardButton("finish");
        this._initWizardButton("cancel");
        this._initWizardButton("extra1");
        this._initWizardButton("extra2");
        
        this._initPages();
        
        window.addEventListener("close", this._closeHandler, false);
        
        // start off on the first page
        this.pageCount = this.wizardPages.length;
        this.advance();
        
        // give focus to the first focusable element in the dialog
        window.addEventListener("load", this._setInitialFocus, false);
      ]]></constructor>

      <method name="getPageById">
        <parameter name="aPageId"/>
        <body><![CDATA[
          var els = this.getElementsByAttribute("pageid", aPageId);
          return els.item(0);
        ]]></body>
      </method>
      
      <method name="extra1">
        <body><![CDATA[
          if (this.currentPage) 
            this._fireEvent(this.currentPage, "extra1");
        ]]></body>
      </method>

      <method name="extra2">
        <body><![CDATA[
          if (this.currentPage) 
            this._fireEvent(this.currentPage, "extra2");
        ]]></body>
      </method>

      <method name="rewind">
        <body><![CDATA[
          if (!this.canRewind)
            return;

          if (this.currentPage && !this._fireEvent(this.currentPage, "pagehide"))
            return;

          if (this.currentPage && !this._fireEvent(this.currentPage, "pagerewound"))
            return;

          if (!this._fireEvent(this, "wizardback"))
            return;
            
            
          this._pageStack.pop();
          this.currentPage = this._pageStack[this._pageStack.length-1];
          this.setAttribute("pagestep", this._pageStack.length);
        ]]></body>
      </method>

      <method name="advance">
        <parameter name="aPageId"/>
        <body><![CDATA[
          if (!this.canAdvance)
            return; 
            
          if (this.currentPage && !this._fireEvent(this.currentPage, "pagehide"))
            return;
            
          if (this.currentPage && !this._fireEvent(this.currentPage, "pageadvanced"))
            return;

          if (this.onLastPage && !aPageId) {
            if (this._fireEvent(this, "wizardfinish"))
              window.setTimeout(function() {window.close();}, 1);
          } else {
            if (!this._fireEvent(this, "wizardnext"))
              return; 
            
            var page;
            if (aPageId)
              page = this.getPageById(aPageId);
            else {
              if (this.currentPage) {
                if (this._accessMethod == "random")
                  page = this.getPageById(this.currentPage.next);
                else
                  page = this.wizardPages[this.currentPage.pageIndex+1];
              } else
                page = this.wizardPages[0];
            }

            if (page) {
              this._pageStack.push(page);
              this.setAttribute("pagestep", this._pageStack.length);
  
              this.currentPage = page;
            }
          }
        ]]></body>
      </method>
      
      <method name="goTo">
        <parameter name="aPageId"/>
        <body><![CDATA[
          var page = this.getPageById(aPageId);
          if (page) {
            this._pageStack[this._pageStack.length-1] = page;
            this.currentPage = page;
          }
        ]]></body>
      </method>
              
      <method name="cancel">
        <body><![CDATA[
          if (!this._fireEvent(this, "wizardcancel"))
            return true;

          window.close();
          window.setTimeout(function() {window.close();}, 1);
          return false;
        ]]></body>
      </method>
      
      <method name="_setInitialFocus">
        <parameter name="aEvent"/>
        <body>
        <![CDATA[
          document.documentElement._hasLoaded = true;
          var focusInit = 
            function() {
              // give focus to the first focusable element in the dialog
              if (!document.commandDispatcher.focusedElement)
                document.commandDispatcher.advanceFocusIntoSubtree(document.documentElement);

              try {
                var button =
                      document.documentElement._wizardButtons.defaultButton;
                if (button)
                  window.notifyDefaultButtonLoaded(button);
              } catch (e) { }
            };

          // Give focus after onload completes, see bug 103197.
          setTimeout(focusInit, 0);
        ]]>
        </body>
      </method>                

      <method name="_advanceFocusToPage">
        <parameter name="aPage"/>
        <body>
        <![CDATA[
          if (!this._hasLoaded)
            return;
            
          document.commandDispatcher.advanceFocusIntoSubtree(aPage);
          
          // if advanceFocusIntoSubtree tries to focus one of our
          // dialog buttons, then remove it and put it on the root
          var focused = document.commandDispatcher.focusedElement;
          if (focused && focused.hasAttribute("dlgtype"))
            this.focus();
        ]]>
        </body>
      </method>                

      <method name="_initPages">
        <body><![CDATA[
          var meth = "sequential";
          var pages = this.wizardPages;
          for (var i = 0; i < pages.length; ++i) {
            var page = pages[i];
            page.pageIndex = i;
            if (page.next != "")
              meth = "random";
          }
          this._accessMethod = meth;
        ]]></body>
      </method>

      <method name="_initWizardButton">
        <parameter name="aName"/>
        <body><![CDATA[
         var btn = document.getAnonymousElementByAttribute(this._wizardButtons, "dlgtype", aName);
         if (btn) {
           btn.addEventListener("command", this["_"+aName+"Func"], false);
           this["_"+aName+"Button"] = btn;
         }
         return btn;
        ]]></body>
      </method>

      <method name="_adjustWizardHeader">
        <body><![CDATA[
          var label = this.currentPage.getAttribute("label");
          if (!label && this.onFirstPage && this._bundle)
#ifdef XP_MACOSX
            label = this._bundle.GetStringFromName("default-first-title-mac");
#else
            label = this._bundle.formatStringFromName("default-first-title", [this.title], 1);
#endif
          else if (!label && this.onLastPage && this._bundle)
#ifdef XP_MACOSX
            label = this._bundle.GetStringFromName("default-last-title-mac");
#else
            label = this._bundle.formatStringFromName("default-last-title", [this.title], 1);
#endif
          this._wizardHeader.setAttribute("label", label);
          this._wizardHeader.setAttribute("description", this.currentPage.getAttribute("description"));
        ]]></body>
      </method>

      <method name="_hitEnter">
        <parameter name="evt"/>
        <body>
        <![CDATA[
          if (!evt.defaultPrevented)
            this.advance();
        ]]>
        </body>
      </method>

      <method name="_fireEvent">
        <parameter name="aTarget"/>
        <parameter name="aType"/>
        <body>
        <![CDATA[
          var event = document.createEvent("Events");
          event.initEvent(aType, true, true);
          
          // handle dom event handlers
          var noCancel = aTarget.dispatchEvent(event);
          
          // handle any xml attribute event handlers
          var handler = aTarget.getAttribute("on"+aType);
          if (handler != "") {
            var fn = new Function("event", handler);
            var returned = fn.apply(aTarget, [event]);
            if (returned == false)
              noCancel = false;
          }

          return noCancel;
        ]]>
        </body>
      </method>

    </implementation>

    <handlers>
      <handler event="keypress" keycode="VK_RETURN"
               group="system" action="this._hitEnter(event)"/>
      <handler event="keypress" keycode="VK_ESCAPE" group="system">
        if (!event.defaultPrevented)
          this.cancel();
      </handler>
    </handlers>
  </binding>

  <binding id="wizardpage" extends="chrome://global/content/bindings/wizard.xml#wizard-base">
    <implementation>
      <field name="pageIndex">-1</field>
      
      <property name="pageid" onget="return this.getAttribute('pageid');"
                              onset="this.setAttribute('pageid', val);"/>

      <property name="next"   onget="return this.getAttribute('next');"
                              onset="this.setAttribute('next', val);
                                     this.parentNode._accessMethod = 'random';
                                     return val;"/>
    </implementation>
  </binding>

#ifdef XP_MACOSX
  <binding id="wizard-header" extends="chrome://global/content/bindings/wizard.xml#wizard-base">
    <content>
      <xul:stack class="wizard-header-stack" flex="1">
        <xul:vbox class="wizard-header-box-1">
          <xul:vbox class="wizard-header-box-text">
            <xul:label class="wizard-header-label" xbl:inherits="xbl:text=label"/>
          </xul:vbox>
        </xul:vbox>
        <xul:hbox class="wizard-header-box-icon">
          <xul:spacer flex="1"/>
          <xul:image class="wizard-header-icon" xbl:inherits="src=iconsrc"/>
        </xul:hbox>
      </xul:stack>
    </content>
  </binding>
  
  <binding id="wizard-buttons" extends="chrome://global/content/bindings/wizard.xml#wizard-base">
    <content>
      <xul:vbox flex="1">
        <xul:hbox class="wizard-buttons-btm">
          <xul:button class="wizard-button" dlgtype="extra1" hidden="true"/>
          <xul:button class="wizard-button" dlgtype="extra2" hidden="true"/>
          <xul:button label="&button-cancel-mac.label;" class="wizard-button" dlgtype="cancel"/>        
          <xul:spacer flex="1"/>
          <xul:button label="&button-back-mac.label;" accesskey="&button-back-mac.accesskey;"
                      class="wizard-button wizard-nav-button" dlgtype="back"/>
          <xul:button label="&button-next-mac.label;" accesskey="&button-next-mac.accesskey;"
                      class="wizard-button wizard-nav-button" dlgtype="next"
                      default="true" xbl:inherits="hidden=lastpage" />
          <xul:button label="&button-finish-mac.label;" class="wizard-button"
                      dlgtype="finish" default="true" xbl:inherits="hidden=hidefinishbutton" />
        </xul:hbox>
      </xul:vbox>
    </content>

    <implementation>
      <method name="onPageChange">
        <body><![CDATA[
          this.setAttribute("hidefinishbutton", !(this.getAttribute("lastpage") == "true"));
        ]]></body>
      </method>
    </implementation>

  </binding>

#else

  <binding id="wizard-header" extends="chrome://global/content/bindings/wizard.xml#wizard-base">
    <content>
      <xul:hbox class="wizard-header-box-1" flex="1">
        <xul:vbox class="wizard-header-box-text" flex="1">
          <xul:label class="wizard-header-label" xbl:inherits="xbl:text=label"/>
          <xul:label class="wizard-header-description" xbl:inherits="xbl:text=description"/>
        </xul:vbox>
        <xul:image class="wizard-header-icon" xbl:inherits="src=iconsrc"/>
      </xul:hbox>
    </content>
  </binding>
  
  <binding id="wizard-buttons" extends="chrome://global/content/bindings/wizard.xml#wizard-base">
    <content>
      <xul:vbox class="wizard-buttons-box-1" flex="1">
        <xul:separator class="wizard-buttons-separator groove"/>
        <xul:hbox class="wizard-buttons-box-2">
          <xul:button class="wizard-button" dlgtype="extra1" hidden="true"/>
          <xul:button class="wizard-button" dlgtype="extra2" hidden="true"/>
          <xul:spacer flex="1" anonid="spacer"/>
#ifdef XP_UNIX
          <xul:button label="&button-cancel-unix.label;" class="wizard-button"
                      dlgtype="cancel" icon="cancel"/>
          <xul:spacer style="width: 24px"/>
          <xul:button label="&button-back-unix.label;" accesskey="&button-back-unix.accesskey;"
                      class="wizard-button" dlgtype="back" icon="go-back"/>
          <xul:deck class="wizard-next-deck" anonid="WizardButtonDeck">
            <xul:hbox>
              <xul:button label="&button-finish-unix.label;" class="wizard-button"
                          dlgtype="finish" default="true" flex="1"/> 
            </xul:hbox>
            <xul:hbox>
              <xul:button label="&button-next-unix.label;" accesskey="&button-next-unix.accesskey;"
                          class="wizard-button" dlgtype="next" icon="go-forward" 
                          default="true" flex="1"/>
            </xul:hbox>
          </xul:deck>
#else
          <xul:button label="&button-back-win.label;" accesskey="&button-back-win.accesskey;"
                      class="wizard-button" dlgtype="back" icon="go-back"/>
          <xul:deck class="wizard-next-deck" anonid="WizardButtonDeck">
            <xul:hbox>
              <xul:button label="&button-finish-win.label;" class="wizard-button"
                          dlgtype="finish" default="true" flex="1"/> 
            </xul:hbox>
            <xul:hbox>
              <xul:button label="&button-next-win.label;" accesskey="&button-next-win.accesskey;"
                          class="wizard-button" dlgtype="next" icon="go-forward" 
                          default="true" flex="1"/>
            </xul:hbox>
          </xul:deck>
          <xul:button label="&button-cancel-win.label;" class="wizard-button"
                      dlgtype="cancel" icon="cancel"/> 
#endif
        </xul:hbox>
      </xul:vbox>
    </content>
    
    <implementation>
      <field name="_wizardButtonDeck" readonly="true">
        document.getAnonymousElementByAttribute(this, "anonid", "WizardButtonDeck");
      </field>
      
      <method name="onPageChange">
        <body><![CDATA[
          if (this.getAttribute("lastpage") == "true") {
            this._wizardButtonDeck.setAttribute("selectedIndex", 0);
          } else {
            this._wizardButtonDeck.setAttribute("selectedIndex", 1);
          }
        ]]></body>
      </method>

      <property name="defaultButton" readonly="true">
        <getter><![CDATA[
          const kXULNS =
            "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";
          var buttons = this._wizardButtonDeck.selectedPanel
                            .getElementsByTagNameNS(kXULNS, "button");
          for (var i = 0; i < buttons.length; i++) {
            if (buttons[i].getAttribute("default") == "true" &&
                !buttons[i].hidden && !buttons[i].disabled)
              return buttons[i];
          }
          return null;
        ]]></getter>
      </property>
    </implementation>
  </binding>
#endif

</bindings>
<?xml version="1.0"?>
<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml">

  <binding id="onedivchild">
    <content><html:div class="anondiv" /></content>
  </binding>

</bindings>
<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings id="marqueeBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">


  <binding id="marquee" bindToUntrustedContent="true">

    <resources>
      <stylesheet src="chrome://xbl-marquee/content/xbl-marquee.css"/>
    </resources>
    <implementation>

      <property name="scrollAmount" exposeToUntrustedContent="true">
        <getter>
          <![CDATA[
          var val = parseInt(this.getAttribute("scrollamount"));

          if (val <= 0 || isNaN(val))
            return this._scrollAmount;

          return val;
          ]]>
        </getter>
        <setter>
          this.setAttribute("scrollamount", val);
        </setter>
      </property>

      <property name="scrollDelay" exposeToUntrustedContent="true">
        <getter>
          <![CDATA[
          var val = parseInt(this.getAttribute("scrolldelay"));

          if (val <= 0 || isNaN(val))
            return this._scrollDelay;

          return val;
          ]]>
        </getter>
        <setter>
          this.setAttribute("scrolldelay", val);
        </setter>
      </property>

      <property name="trueSpeed" exposeToUntrustedContent="true">
        <getter>
          <![CDATA[
          if (!this.hasAttribute("truespeed"))
            return false;

          return true;
          ]]>
        </getter>
        <setter>
          <![CDATA[
          if (val)
            this.setAttribute("truespeed", "truespeed");
          else
            this.removeAttribute('truespeed');
          ]]>
        </setter>
      </property>

      <property name="direction" exposeToUntrustedContent="true">
        <getter>
          return this.getAttribute("direction");
        </getter>
        <setter>
          this.setAttribute("direction", val);
        </setter>
      </property>

      <property name="behavior" exposeToUntrustedContent="true">
        <getter>
          return this._behavior;
        </getter>
        <setter>
          this.setAttribute("behavior", val);
        </setter>
      </property>


      <property name="loop" exposeToUntrustedContent="true">
        <getter>
          <![CDATA[
          var val = parseInt(this.getAttribute('loop'));
    
          if (val < -1 || isNaN(val))
            return this._loop;

          return val;
          ]]>
        </getter>
        <setter>
          this.setAttribute("loop", val);
        </setter>
      </property>


      <property name="onstart" exposeToUntrustedContent="true">
        <getter>
          return this.getAttribute("onstart");
        </getter>
        <setter>
          this._setEventListener("start", val, true);
          this.setAttribute("onstart", val);
        </setter>
      </property>

      <property name="onfinish" exposeToUntrustedContent="true">
        <getter>
          return this.getAttribute("onfinish");
        </getter>
        <setter>
          this._setEventListener("finish", val, true);
          this.setAttribute("onfinish", val);
        </setter>
      </property>

      <property name="onbounce" exposeToUntrustedContent="true">
        <getter>
          return this.getAttribute("onbounce");
        </getter>
        <setter>
          this._setEventListener("bounce", val, true);
          this.setAttribute("onbounce", val);
        </setter>
      </property>

      <property name="outerDiv"
        onget="return document.getAnonymousNodes(this)[0]"
      />

      <property name="innerDiv"
        onget="return document.getAnonymousElementByAttribute(this, 'class', 'innerDiv');"
      />

      <property name="height" exposeToUntrustedContent="true"
        onget="return this.getAttribute('height');"
        onset="this.setAttribute('height', val);"
      />

      <property name="width" exposeToUntrustedContent="true"
        onget="return this.getAttribute('width');"
        onset="this.setAttribute('width', val);"
      />

      <method name="_set_scrollDelay">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          if (aValue <= 0 || isNaN(aValue) || aValue == null)
            return false;

          if (aValue < 60) {
            if (this.trueSpeed == true)
              this._scrollDelay = aValue;
            else
              this._scrollDelay = 60;
          }
          else {
            this._scrollDelay = aValue;
          }
          return true;
        ]]>
        </body>
      </method>

      <method name="_set_scrollAmount">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          if (aValue < 0 || isNaN(aValue) || aValue == null)
            return false;

          this._scrollAmount = aValue;
          return true;
        ]]>
        </body>
      </method>

      <method name="_set_behavior">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          if (typeof aValue == 'string')
            aValue = aValue.toLowerCase();
          if (aValue != 'alternate' && aValue != 'slide' && aValue != 'scroll')
            return false;

          this._behavior = aValue;
          return true;
        ]]>
        </body>
      </method>

      <method name="_set_direction">
        <parameter name="aValue"/>
        <body>
        <![CDATA[
          if (typeof aValue == 'string')
            aValue = aValue.toLowerCase();
          if (aValue != 'left' && aValue != 'right' && aValue != 'up' && aValue != 'down')
            return false;

          if (aValue != this._direction)
            this.startNewDirection = true;
          this._direction = aValue;
          return true;
        ]]>
        </body>
      </method>

      <method name="_set_loop">
        <parameter name="aValue"/>
        <body>
          <![CDATA[
          if (!aValue || isNaN(aValue))
            return false;

          if (aValue < -1)
            aValue = -1;

          this._loop = aValue;
          return true;
          ]]>
        </body>
      </method>

      <method name="_setEventListener">
        <parameter name="aName"/>
        <parameter name="aValue"/>
        <parameter name="aIgnoreNextCall"/>
        <body>
          <![CDATA[
          if (this._ignoreNextCall)
            return this._ignoreNextCall = false;

          if (aIgnoreNextCall)
            this._ignoreNextCall = true;

          if (typeof this["_on" + aName] == 'function')
            this.removeEventListener(aName, this["_on" + aName], false);

          switch (typeof aValue)
          {
            case "function":
              this["_on" + aName] = aValue;
              this.addEventListener(aName, this["_on" + aName], false);
            break;

            case "string":
              if (!aIgnoreNextCall) {
                try {
                  // Function Xrays make this simple and safe. \o/
                  this["_on" + aName] = new window.Function("event", aValue);
                }
                catch(e) {
                  return false;
                }
                this.addEventListener(aName, this["_on" + aName], false);
              }
              else {
                this["_on" + aName] = aValue;
              }
            break;

            case "object":
              this["_on" + aName] = aValue;
            break;

            default:
              this._ignoreNextCall = false;
              throw new Error("Invalid argument for Marquee::on" + aName);
          }
          return true;
          ]]>
        </body>
      </method>

      <method name="_fireEvent">
        <parameter name="aName"/>
        <parameter name="aBubbles"/>
        <parameter name="aCancelable"/>
        <body>
        <![CDATA[
          var e = document.createEvent("Events");
          e.initEvent(aName, aBubbles, aCancelable);
          this.dispatchEvent(e);
        ]]>
        </body>
      </method>

      <method name="start" exposeToUntrustedContent="true">
        <body>
        <![CDATA[
          if (this.runId == 0) {
            var myThis = this;
            var lambda = function myTimeOutFunction(){myThis._doMove(false);}
            this.runId = window.setTimeout(lambda, this._scrollDelay - this._deltaStartStop);
            this._deltaStartStop = 0;
          }
        ]]>
        </body>
      </method>

      <method name="stop" exposeToUntrustedContent="true">
        <body>
        <![CDATA[
          if (this.runId != 0) {
            this._deltaStartStop = Date.now()- this._lastMoveDate;
            clearTimeout(this.runId);
          }

          this.runId = 0;
        ]]>
        </body>
      </method>

      <method name="_doMove">
        <parameter name="aResetPosition"/>
        <body>
        <![CDATA[
          this._lastMoveDate = Date.now();

          //startNewDirection is true at first load and whenever the direction is changed
          if (this.startNewDirection) {
            this.startNewDirection = false; //we only want this to run once every scroll direction change

            var corrvalue = 0;

            switch (this._direction)
            {
              case "up":
                var height = document.defaultView.getComputedStyle(this, "").height;
                this.outerDiv.style.height = height;
                if (this.originalHeight > this.outerDiv.offsetHeight)
                    corrvalue = this.originalHeight - this.outerDiv.offsetHeight;
                this.innerDiv.style.padding = height + " 0";
                this.dirsign = 1;
                this.startAt = (this._behavior == 'alternate') ? (this.originalHeight - corrvalue) : 0;
                this.stopAt  = (this._behavior == 'alternate' || this._behavior == 'slide') ? 
                                (parseInt(height) + corrvalue) : (this.originalHeight + parseInt(height));
              break;

              case "down":
                var height = document.defaultView.getComputedStyle(this, "").height;
                this.outerDiv.style.height = height;
                if (this.originalHeight > this.outerDiv.offsetHeight)
                    corrvalue = this.originalHeight - this.outerDiv.offsetHeight;
                this.innerDiv.style.padding = height + " 0";
                this.dirsign = -1;
                this.startAt  = (this._behavior == 'alternate') ?
                                (parseInt(height) + corrvalue) : (this.originalHeight + parseInt(height));
                this.stopAt = (this._behavior == 'alternate' || this._behavior == 'slide') ? 
                              (this.originalHeight - corrvalue) : 0;
              break;

              case "right":
                if (this.innerDiv.offsetWidth > this.outerDiv.offsetWidth)
                    corrvalue = this.innerDiv.offsetWidth - this.outerDiv.offsetWidth;
                this.dirsign = -1;
                this.stopAt  = (this._behavior == 'alternate' || this._behavior == 'slide') ? 
                               (this.innerDiv.offsetWidth - corrvalue) : 0;
                this.startAt = this.outerDiv.offsetWidth + ((this._behavior == 'alternate') ? 
                               corrvalue : (this.innerDiv.offsetWidth + this.stopAt));   
              break;

              case "left":
              default:
                if (this.innerDiv.offsetWidth > this.outerDiv.offsetWidth)
                    corrvalue = this.innerDiv.offsetWidth - this.outerDiv.offsetWidth;
                this.dirsign = 1;
                this.startAt = (this._behavior == 'alternate') ? (this.innerDiv.offsetWidth - corrvalue) : 0;
                this.stopAt  = this.outerDiv.offsetWidth + 
                               ((this._behavior == 'alternate' || this._behavior == 'slide') ? 
                               corrvalue : (this.innerDiv.offsetWidth + this.startAt));
            }

            if (aResetPosition) {
              this.newPosition = this.startAt;
              this._fireEvent("start", false, false);
            }
          } //end if

          this.newPosition = this.newPosition + (this.dirsign * this._scrollAmount);

          if ((this.dirsign == 1 && this.newPosition > this.stopAt) ||
              (this.dirsign == -1 && this.newPosition < this.stopAt))
          {
            switch (this._behavior) 
            {
              case 'alternate':
                // lets start afresh
                this.startNewDirection = true;

                // swap direction
                const swap = {left: "right", down: "up", up: "down", right: "left"};
                this._direction = swap[this._direction];
                this.newPosition = this.stopAt;

                if ((this._direction == "up") || (this._direction == "down"))
                  this.outerDiv.scrollTop = this.newPosition;
                else
                  this.outerDiv.scrollLeft = this.newPosition;

                if (this._loop != 1)
                  this._fireEvent("bounce", false, true);
              break;

              case 'slide':
                if (this._loop > 1)
                  this.newPosition = this.startAt;
              break;

              default:
                this.newPosition = this.startAt;

                if ((this._direction == "up") || (this._direction == "down"))
                  this.outerDiv.scrollTop = this.newPosition;
                else
                  this.outerDiv.scrollLeft = this.newPosition;

                //dispatch start event, even when this._loop == 1, comp. with IE6
                this._fireEvent("start", false, false);
            }

            if (this._loop > 1)
              this._loop--;
            else if (this._loop == 1) {
              if ((this._direction == "up") || (this._direction == "down"))
                this.outerDiv.scrollTop = this.stopAt;
              else
                this.outerDiv.scrollLeft = this.stopAt;
              this.stop();
              this._fireEvent("finish", false, true);
              return;
            }
          }
          else {
            if ((this._direction == "up") || (this._direction == "down"))
              this.outerDiv.scrollTop = this.newPosition;
            else
              this.outerDiv.scrollLeft = this.newPosition;
          }

          var myThis = this;
          var lambda = function myTimeOutFunction(){myThis._doMove(false);}
          this.runId = window.setTimeout(lambda, this._scrollDelay);
        ]]>
        </body>
      </method>

      <method name="init">
        <body>
        <![CDATA[
          this.stop();

          if ((this._direction != "up") && (this._direction != "down")) {
            var width = window.getComputedStyle(this, "").width;
            this.innerDiv.parentNode.style.margin = '0 ' + width;

            //XXX Adding the margin sometimes causes the marquee to widen, 
            // see testcase from bug bug 364434: 
            // https://bugzilla.mozilla.org/attachment.cgi?id=249233
            // Just add a fixed width with current marquee's width for now
            if (width != window.getComputedStyle(this, "").width) {
              var width = window.getComputedStyle(this, "").width;
              this.outerDiv.style.width = width;
              this.innerDiv.parentNode.style.margin = '0 ' + width;
            }
          }
          else {
            // store the original height before we add padding
            this.innerDiv.style.padding = 0;
            this.originalHeight = this.innerDiv.offsetHeight;
          }

          this._doMove(true);
        ]]>
        </body>
      </method>

      <constructor>
        <![CDATA[
          // Set up state.
          this._scrollAmount = 6;
          this._scrollDelay = 85;
          this._direction = "left";
          this._behavior = "scroll";
          this._loop = -1;
          this.dirsign = 1;
          this.startAt = 0;
          this.stopAt = 0;
          this.newPosition = 0;
          this.runId = 0;
          this.originalHeight = 0;
          this.startNewDirection = true;

          // hack needed to fix js error, see bug 386470
          var myThis = this;
          var lambda = function myScopeFunction() { if (myThis.init) myThis.init(); }

          this._set_direction(this.getAttribute('direction'));
          this._set_behavior(this.getAttribute('behavior'));
          this._set_scrollDelay(this.getAttribute('scrolldelay'));
          this._set_scrollAmount(this.getAttribute('scrollamount'));
          this._set_loop(this.getAttribute('loop'));
          this._setEventListener("start", this.getAttribute("onstart"));
          this._setEventListener("finish", this.getAttribute("onfinish"));
          this._setEventListener("bounce", this.getAttribute("onbounce"));
          this.startNewDirection = true;

          // init needs to be run after the page has loaded in order to calculate
          // the correct height/width
          if (document.readyState == "complete")
            lambda();
          else
            window.addEventListener("load", lambda, false);
        ]]>
      </constructor>
    </implementation>

    <handlers>
      <handler event="DOMAttrModified" phase="target">
        <![CDATA[
          var attrName = event.attrName.toLowerCase();
          var oldValue = event.prevValue.toLowerCase();
          var newValue = event.newValue.toLowerCase();
          var attributeRemoval = false;
          if (event.attrChange == event.REMOVAL) {
            newValue = null;
            attributeRemoval = true;
          };

          if (oldValue != newValue) {
            switch (attrName) {
              case "loop":
                if (!this._set_loop(newValue)) {
                  if (attributeRemoval) {
                    this._loop = -1;
                    if (this.runId == 0)
                      this.start();
                  }
                  else
                    throw new Error("Invalid argument for Marquee::loop");
                }
                if (this.rundId == 0)
                  this.start();
                break;
              case "scrollamount":
                if (!this._set_scrollAmount(newValue)) {
                  if (attributeRemoval)
                    this._scrollAmount = 6;
                  else
                    throw new Error("Invalid argument for Marquee::scrollAmount");
                }
                break;
              case "scrolldelay":
                if (!this._set_scrollDelay(newValue)) {
                  if (attributeRemoval)
                    this._scrollDelay = 85;
                  else
                    throw new Error("Invalid argument for Marquee::scrollDelay");
                }
                this.stop();
                this.start();
                break;
              case "truespeed":
                //needed to update this._scrollDelay
                var myThis = this;
                var lambda = function() {myThis._set_scrollDelay(myThis.getAttribute('scrolldelay'));}
                window.setTimeout(lambda, 0);
                break;
              case "behavior":
                if (!this._set_behavior(newValue)) {
                  if (attributeRemoval)
                    this._behavior = "scroll";
                  else
                    throw new Error("Invalid argument for Marquee::behavior");
                }

                this.startNewDirection = true;
                if ((oldValue == "slide" && this.newPosition == this.stopAt) ||
                    newValue == "alternate" || newValue == "slide") {
                  this.stop();
                  this._doMove(true);
                }
                break;
              case "direction":
                if (!this._set_direction(newValue)) {
                  if (attributeRemoval)
                    this._direction = "left";
                  else
                    throw new Error("Invalid argument for Marquee::direction");
                }
                break;
              case "width":
              case "height":
                this.startNewDirection = true;
                break;
              case "onstart":
                this._setEventListener("start", newValue);
                break;
              case "onfinish":
                this._setEventListener("finish", newValue);
                break;
              case "onbounce":
                this._setEventListener("bounce", newValue);
                break;
            }
          }
        ]]>
      </handler>
    </handlers>

  </binding>

  <binding id="marquee-horizontal" bindToUntrustedContent="true"
           extends="chrome://xbl-marquee/content/xbl-marquee.xml#marquee"
           inheritstyle="false">

    <!-- White-space isn't allowed because a marquee could be 
         inside 'white-space: pre' -->
    <content>
      <html:div style="display: -moz-box; overflow: hidden; width: -moz-available;"
        ><html:div style="display: -moz-box;"
          ><html:div class="innerDiv" style="display: table; border-spacing: 0;"
            ><html:div
              ><children
            /></html:div
          ></html:div
        ></html:div
      ></html:div>
    </content>

  </binding>

  <binding id="marquee-vertical" bindToUntrustedContent="true"
           extends="chrome://xbl-marquee/content/xbl-marquee.xml#marquee"
           inheritstyle="false">

    <!-- White-space isn't allowed because a marquee could be 
         inside 'white-space: pre' -->
    <content>
      <html:div style="overflow: hidden; width: -moz-available;"
        ><html:div class="innerDiv"
          ><children
        /></html:div
      ></html:div>
    </content>

  </binding>

  <binding id="marquee-horizontal-editable" bindToUntrustedContent="true"
           inheritstyle="false">

    <!-- White-space isn't allowed because a marquee could be 
         inside 'white-space: pre' -->
    <content>
      <html:div style="display: inline-block; overflow: auto; width: -moz-available;"
        ><children
      /></html:div>
    </content>

  </binding>

  <binding id="marquee-vertical-editable" bindToUntrustedContent="true"
           inheritstyle="false">

    <!-- White-space isn't allowed because a marquee could be 
         inside 'white-space: pre' -->
    <content>
      <html:div style="overflow: auto; height: inherit; width: -moz-available;"
        ><children/></html:div>
    </content>

  </binding>

</bindings>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head><script>
    var newRoot = document.createElementNS("http://www.w3.org/2000/svg", "abc");
    document.removeChild(document.documentElement);
    document.appendChild(newRoot);
  </script></head>
</html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head><script>
    var newRoot = document.createElementNS(null, "html");
    document.removeChild(document.documentElement);
    document.appendChild(newRoot);
  </script></head>
</html>
<html xmlns="http://www.w3.org/1999/xhtml"></html><?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet href="xmlbase.css" type="text/css"?>
<root xmlns:xlink="http://www.w3.org/1999/xlink">
<title>Root: no xml:base</title>
<xlink:link xlink:type="simple" xlink:href="a.xml">a.xml</xlink:link>
<p>Expected: &lt;current path>/a.xml</p>
<sect1 xml:base="http://www.mozilla.org">
  <title>Sect1: xml:base="http://www.mozilla.org"</title>
  <xlink:link xlink:type="simple" xlink:href="b.xml">b.xml</xlink:link>
  <p>Expected: http://www.mozilla.org/b.xml</p>
  <sect2 xml:base="/base">
    <title>Sect2: xml:base="/base"</title>
    <xlink:link xlink:type="simple" xlink:href="c.xml">c.xml</xlink:link>
    <p>Expected: http://www.mozilla.org/base/c.xml</p>
    <sect3 xml:base="">
      <title>Sect3: xml:base=""</title>
      <xlink:link xlink:type="simple" xlink:href="d.xml">d.xml</xlink:link>
      <p>Expected: http://www.mozilla.org/base/d.xml</p>
    </sect3>
    <sect3 xml:base="/">
      <title>Sect3: xml:base="/"</title>
      <xlink:link xlink:type="simple" xlink:href="d-2.xml">d-2.xml</xlink:link>
      <p>Expected: http://www.mozilla.org/d-2.xml</p>
    </sect3>
    <sect3 xml:base="/foobar">
      <title>Sect3: xml:base="/foobar"</title>
      <xlink:link xlink:type="simple" xlink:href="e.xml">e.xml</xlink:link>
      <p>Expected: http://www.mozilla.org/foobar/e.xml</p>
    </sect3>
    <sect3 xml:base="ding/dong">
      <title>Sect3: xml:base="ding/dong"</title>
      <xlink:link xlink:type="simple" xlink:href="f.xml">f.xml</xlink:link>
      <p>Expected: http://www.mozilla.org/base/ding/dong/f.xml</p>
    </sect3>
  </sect2>
  <sect2 xml:base="http://www.netscape.com">
    <title>Sect2: xml:base="http://www.netscape.com"</title>
    <xlink:link xlink:type="simple" xlink:href="g.xml">g.xml</xlink:link>
    <p>Expected: http://www.netscape.com/g.xml</p>
  </sect2>
  <sect2 xml:base="http://www.netscape.com">
    <title>Sect2: xml:base="http://www.netscape.com"</title>
    <xlink:link xlink:type="simple" xlink:href="http://www.mozilla.org/foobar/h.xml">http://www.mozilla.org/foobar/h.xml</xlink:link>
    <p>Expected: http://www.mozilla.org/foobar/h.xml</p>
  </sect2>
  <sect2 xml:base="http://www.netscape.com">
    <title>Sect2: xml:base="http://www.netscape.com"</title>
    <xlink:link xlink:type="simple" xlink:href="i.xml" xml:base="wow">i.xml, this element has xml:base="wow"</xlink:link>
    <p>Expected: http://www.netscape.com/wow/i.xml</p>
  </sect2>
</sect1>
<sect1 xml:base="nothere">
  <title>Sect1: xml:base="nothere"</title>
  <xlink:link xlink:type="simple" xlink:href="j.xml">j.xml</xlink:link>
  <p>Expected: &lt;current path>/nothere/j.xml</p>
</sect1>
<sect1 xml:base="/not">
  <title>Sect1: xml:base="/not"</title>
  <xlink:link xlink:type="simple" xlink:href="k.xml">k.xml</xlink:link>
  <p>Expected: file:///not/k.xml</p>
</sect1>
<sect1 xml:base="http://foobar.com/ /">
  <title>Sect1: xml:base="http://foobar.com/ /"</title>
  <xlink:link xlink:type="simple" xlink:href="l.xml">l.xml</xlink:link>
  <p>Expected: http://foobar.com/%E4%20%F6/l.xml</p>
</sect1>
<sect1 xml:base="http://foobar.com/ /%20/">
  <title>Sect1: xml:base="http://foobar.com/ /%20/"</title>
  <xlink:link xlink:type="simple" xlink:href="m.xml">m.xml</xlink:link>
  <p>Expected: http://foobar.com/%20/%20/m.xml</p>
</sect1>
<sect1 xml:base="chrome://navigator">
  <title>Sect1: xml:base="chrome://navigator"</title>
  <xlink:link xlink:type="simple" xlink:href="n.xml">n.xml</xlink:link>
  <p>Expected: |current path|/n.xml because chrome URL is not allowed</p>
  <sect2 xml:base="http://www.mozilla.org">
    <title>Sect2: xml:base="http://www.mozilla.org"</title>
    <xlink:link xlink:type="simple" xlink:href="o.xml" xml:base="chrome://navigator">o.xml, this element has xml:base="chrome://navigator"</xlink:link>
    <p>Expected: http://www.mozilla.org/o.xml because chrome base is not allowed</p>
  </sect2>
</sect1>
</root><?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml">

  <binding id="prettyprint" bindToUntrustedContent="true">

    <content><html:div id='top'/>
      <html:span style="display: none;"><children/></html:span>
    </content>

    <handlers>
      <handler event="click" button="0">
      <![CDATA[
        try {
          var par = event.originalTarget;
          if (par.nodeName == 'div' && par.className == 'expander') {
            if (par.parentNode.className == 'expander-closed') {
              par.parentNode.className = 'expander-open';
              event.originalTarget.firstChild.data = '\u2212';
            }
            else {
              par.parentNode.className = 'expander-closed';
              event.originalTarget.firstChild.data = '+';
            }
          }
        } catch (e) {
        }
      ]]>
      </handler>
      <handler event="prettyprint-dom-created" allowuntrusted="false">
        <![CDATA[
          document.getAnonymousNodes(this).item(0).appendChild(event.detail);
        ]]>
      </handler>
    </handlers>

  </binding>

</bindings>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="xog"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->


<!DOCTYPE bindings SYSTEM "chrome://mozapps/locale/xpinstall/xpinstallConfirm.dtd">

<bindings id="xpinstallItemBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="installitem">
    <resources>
      <stylesheet src="chrome://mozapps/skin/xpinstall/xpinstallConfirm.css"/>
    </resources>
    <content>
      <xul:hbox flex="1">
        <xul:vbox align="center" pack="center" class="xpinstallIconContainer">
          <xul:image class="xpinstallItemIcon" xbl:inherits="src=icon"/>
        </xul:vbox>
        <xul:vbox flex="1" pack="center">
          <xul:hbox class="xpinstallItemNameRow" align="center">
            <xul:label class="xpinstallItemName" xbl:inherits="value=name" crop="right"/>
            <xul:label class="xpinstallItemSigned" xbl:inherits="value=cert,signed"/>
          </xul:hbox>
          <xul:hbox class="xpinstallItemDetailsRow" align="center">
            <xul:textbox class="xpinstallItemURL" xbl:inherits="value=url" flex="1" readonly="true" crop="right"/>
          </xul:hbox>
        </xul:vbox> 
      </xul:hbox>
    </content>
    <implementation>
      <property name="name"   onset="this.setAttribute('name', val); return val;"
                              onget="return this.getAttribute('name');"/>
      <property name="cert"   onset="this.setAttribute('cert', val); return val;"
                              onget="return this.getAttribute('cert');"/>
      <property name="signed" onset="this.setAttribute('signed', val); return val;"
                              onget="return this.getAttribute('signed');"/>
      <property name="url"    onset="this.setAttribute('url', val); return val;"
                              onget="return this.getAttribute('url');"/>
      <property name="icon"   onset="this.setAttribute('icon', val); return val;"
                              onget="return this.getAttribute('icon');"/>
      <property name="type"   onset="this.setAttribute('type', val); return val;"
                              onget="return this.getAttribute('type');"/>
    </implementation>
  </binding>
         
</bindings>

<!DOCTYPE xslt:transform [<!ATTLIST xslt:transform id ID #IMPLIED>]>
<?xml-stylesheet type="application/xml" href="#transform"?>
<xslt:transform xmlns:xslt="http://www.w3.org/1999/XSL/Transform"
		xmlns="http://www.w3.org/2000/svg"
		id="transform" version="1.0">
	<xslt:template match="/xslt:transform">
		<svg>
			<rect width="100%" height="100%" fill="lime"/>
		</svg>
	</xslt:template>
</xslt:transform>
<?xml-stylesheet type="application/xml" href=""?>
<xslt:transform xmlns:xslt="http://www.w3.org/1999/XSL/Transform"
		xmlns="http://www.w3.org/2000/svg"
		version="1.0">
	<xslt:template match="/xslt:transform">
		<svg>
			<rect width="100%" height="100%" fill="lime"/>
		</svg>
	</xslt:template>
</xslt:transform>
<?xml-stylesheet type="application/xml"
		href="xslt_selflink_relative_href.xml"?>
<xslt:transform xmlns:xslt="http://www.w3.org/1999/XSL/Transform"
		xmlns="http://www.w3.org/2000/svg"
		version="1.0">
	<xslt:template match="/xslt:transform">
		<svg>
			<rect width="100%" height="100%" fill="lime"/>
		</svg>
	</xslt:template>
</xslt:transform>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Yahoo</ShortName>
<Description>Yahoo Search</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAEACAA8DQAAJgAAACAgAAABAAgAowsAAGINAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIBgAAAB/z/2EAAAAJcEhZcwAACxMAAAsTAQCanBgAAApPaUNDUFBob3Rvc2hvcCBJQ0MgcHJvZmlsZQAAeNqdU2dUU+kWPffe9EJLiICUS29SFQggUkKLgBSRJiohCRBKiCGh2RVRwRFFRQQbyKCIA46OgIwVUSwMigrYB+Qhoo6Do4iKyvvhe6Nr1rz35s3+tdc+56zznbPPB8AIDJZIM1E1gAypQh4R4IPHxMbh5C5AgQokcAAQCLNkIXP9IwEA+H48PCsiwAe+AAF40wsIAMBNm8AwHIf/D+pCmVwBgIQBwHSROEsIgBQAQHqOQqYAQEYBgJ2YJlMAoAQAYMtjYuMAUC0AYCd/5tMAgJ34mXsBAFuUIRUBoJEAIBNliEQAaDsArM9WikUAWDAAFGZLxDkA2C0AMElXZkgAsLcAwM4QC7IACAwAMFGIhSkABHsAYMgjI3gAhJkAFEbyVzzxK64Q5yoAAHiZsjy5JDlFgVsILXEHV1cuHijOSRcrFDZhAmGaQC7CeZkZMoE0D+DzzAAAoJEVEeCD8/14zg6uzs42jrYOXy3qvwb/ImJi4/7lz6twQAAA4XR+0f4sL7MagDsGgG3+oiXuBGheC6B194tmsg9AtQCg6dpX83D4fjw8RaGQudnZ5eTk2ErEQlthyld9/mfCX8BX/Wz5fjz89/XgvuIkgTJdgUcE+ODCzPRMpRzPkgmEYtzmj0f8twv//B3TIsRJYrlYKhTjURJxjkSajPMypSKJQpIpxSXS/2Ti3yz7Az7fNQCwaj4Be5EtqF1jA/ZLJxBYdMDi9wAA8rtvwdQoCAOAaIPhz3f/7z/9R6AlAIBmSZJxAABeRCQuVMqzP8cIAABEoIEqsEEb9MEYLMAGHMEF3MEL/GA2hEIkxMJCEEIKZIAccmAprIJCKIbNsB0qYC/UQB00wFFohpNwDi7CVbgOPXAP+mEInsEovIEJBEHICBNhIdqIAWKKWCOOCBeZhfghwUgEEoskIMmIFFEiS5E1SDFSilQgVUgd8j1yAjmHXEa6kTvIADKC/Ia8RzGUgbJRPdQMtUO5qDcahEaiC9BkdDGajxagm9BytBo9jDah59CraA/ajz5DxzDA6BgHM8RsMC7Gw0KxOCwJk2PLsSKsDKvGGrBWrAO7ifVjz7F3BBKBRcAJNgR3QiBhHkFIWExYTthIqCAcJDQR2gk3CQOEUcInIpOoS7QmuhH5xBhiMjGHWEgsI9YSjxMvEHuIQ8Q3JBKJQzInuZACSbGkVNIS0kbSblIj6SypmzRIGiOTydpka7IHOZQsICvIheSd5MPkM+Qb5CHyWwqdYkBxpPhT4ihSympKGeUQ5TTlBmWYMkFVo5pS3aihVBE1j1pCraG2Uq9Rh6gTNHWaOc2DFklLpa2ildMaaBdo92mv6HS6Ed2VHk6X0FfSy+lH6JfoA/R3DA2GFYPHiGcoGZsYBxhnGXcYr5hMphnTixnHVDA3MeuY55kPmW9VWCq2KnwVkcoKlUqVJpUbKi9Uqaqmqt6qC1XzVctUj6leU32uRlUzU+OpCdSWq1WqnVDrUxtTZ6k7qIeqZ6hvVD+kfln9iQZZw0zDT0OkUaCxX+O8xiALYxmzeCwhaw2rhnWBNcQmsc3ZfHYqu5j9HbuLPaqpoTlDM0ozV7NS85RmPwfjmHH4nHROCecop5fzforeFO8p4ikbpjRMuTFlXGuqlpeWWKtIq1GrR+u9Nq7tp52mvUW7WfuBDkHHSidcJ0dnj84FnedT2VPdpwqnFk09OvWuLqprpRuhu0R3v26n7pievl6Ankxvp955vef6HH0v/VT9bfqn9UcMWAazDCQG2wzOGDzFNXFvPB0vx9vxUUNdw0BDpWGVYZfhhJG50Tyj1UaNRg+MacZc4yTjbcZtxqMmBiYhJktN6k3umlJNuaYppjtMO0zHzczNos3WmTWbPTHXMueb55vXm9+3YFp4Wiy2qLa4ZUmy5FqmWe62vG6FWjlZpVhVWl2zRq2drSXWu627pxGnuU6TTque1mfDsPG2ybaptxmw5dgG2662bbZ9YWdiF2e3xa7D7pO9k326fY39PQcNh9kOqx1aHX5ztHIUOlY63prOnO4/fcX0lukvZ1jPEM/YM+O2E8spxGmdU5vTR2cXZ7lzg/OIi4lLgssulz4umxvG3ci95Ep09XFd4XrS9Z2bs5vC7ajbr+427mnuh9yfzDSfKZ5ZM3PQw8hD4FHl0T8Ln5Uwa9+sfk9DT4FntecjL2MvkVet17C3pXeq92HvFz72PnKf4z7jPDfeMt5ZX8w3wLfIt8tPw2+eX4XfQ38j/2T/ev/RAKeAJQFnA4mBQYFbAvv4enwhv44/Ottl9rLZ7UGMoLlBFUGPgq2C5cGtIWjI7JCtIffnmM6RzmkOhVB+6NbQB2HmYYvDfgwnhYeFV4Y/jnCIWBrRMZc1d9HcQ3PfRPpElkTem2cxTzmvLUo1Kj6qLmo82je6NLo/xi5mWczVWJ1YSWxLHDkuKq42bmy+3/zt84fineIL43sXmC/IXXB5oc7C9IWnFqkuEiw6lkBMiE44lPBBECqoFowl8hN3JY4KecIdwmciL9E20YjYQ1wqHk7ySCpNepLskbw1eSTFM6Us5bmEJ6mQvEwNTN2bOp4WmnYgbTI9Or0xg5KRkHFCqiFNk7Zn6mfmZnbLrGWFsv7Fbou3Lx6VB8lrs5CsBVktCrZCpuhUWijXKgeyZ2VXZr/Nico5lqueK83tzLPK25A3nO+f/+0SwhLhkralhktXLR1Y5r2sajmyPHF52wrjFQUrhlYGrDy4irYqbdVPq+1Xl65+vSZ6TWuBXsHKgsG1AWvrC1UK5YV969zX7V1PWC9Z37Vh+oadGz4ViYquFNsXlxV/2CjceOUbh2/Kv5nclLSpq8S5ZM9m0mbp5t4tnlsOlqqX5pcObg3Z2rQN31a07fX2Rdsvl80o27uDtkO5o788uLxlp8nOzTs/VKRU9FT6VDbu0t21Ydf4btHuG3u89jTs1dtbvPf9Psm+21UBVU3VZtVl+0n7s/c/romq6fiW+21drU5tce3HA9ID/QcjDrbXudTVHdI9VFKP1ivrRw7HH77+ne93LQ02DVWNnMbiI3BEeeTp9wnf9x4NOtp2jHus4QfTH3YdZx0vakKa8ppGm1Oa+1tiW7pPzD7R1ureevxH2x8PnDQ8WXlK81TJadrpgtOTZ/LPjJ2VnX1+LvncYNuitnvnY87fag9v77oQdOHSRf+L5zu8O85c8rh08rLb5RNXuFearzpfbep06jz+k9NPx7ucu5quuVxrue56vbV7ZvfpG543zt30vXnxFv/W1Z45Pd2983pv98X39d8W3X5yJ/3Oy7vZdyfurbxPvF/0QO1B2UPdh9U/W/7c2O/cf2rAd6Dz0dxH9waFg8/+kfWPD0MFj5mPy4YNhuueOD45OeI/cv3p/KdDz2TPJp4X/qL+y64XFi9++NXr187RmNGhl/KXk79tfKX96sDrGa/bxsLGHr7JeDMxXvRW++3Bd9x3He+j3w9P5Hwgfyj/aPmx9VPQp/uTGZOT/wQDmPP8YzMt2wAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAACZ0lEQVR42mzSP4icZRTF4ee+38xOkp2sG5cQxVJIIaaKkICxTkqJjQhpJFYiop2F1YKFQqoUVpEoCBYSS7dfOxVFWGIsokUE/0TEye7OzPe977XYNWk83b0cDoffvXHWGxkKYjt0N1fi+FaJIzNIFSJ0kDXn0z5nF1O9Sp5PzaizamLD2NELo5W4sOwXqqX/04o1R2wg9PYs/GXUmTjqpGNxwvWdFzz19Akvjj+XUkYTggylFLfml93due+tZ7+y577BrkJnbNWke8yHmzvgi/4lq+WU1XjCsThl2p1ya3GZ4KNrt03KuhXH0SkkkbTOL5+u2PnuZ/D8axtGMTaKsbOvrINP3v/W3Y9XhCJjQCrUWRedVpaq3nvn7oHXrz8jD8PfvnEGbL0716LXytIoxqizkups4R/VwhB7hpi7sXkbXNo86bkrazK5sXnbEHND7BvMLcykOotz3vlxvZw+faRb08VEiVC64rPdSw/pZ/Ly9EutNi3TkHOLOvN3u3OnHNx7MFio5qq5Ifdce/WHhwEfXPnekPuq/UPPQhrAKOV0MFdyRFQFRefr7Z9wRrb0zfYd1aCpGmr2BvtSTkcp1wZLnX0tx4oQjeHX+UF97P75QGspM7VMqTfopVwb0aY1F4ZWlFK1SCVDHQKUEvphj0ztkEdrvZoLtOkoNS2XlkHJIlroIky7Jw8atDSJdQ/aPTUdtJBaLqVmlJpqQataCZKhY/L4HwcEI/Qbv1v8tivbIdVG1UtNnPVmFmPEoT9l/Dc9Ujp42Mx4uGl6I5pmgdjGzaLbopsdJqZHWZnqtKkXcZU8D/8OAPAMQ4kD8KK1AAAAAElFTkSuQmCCiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAAAlwSFlzAAALEwAACxMBAJqcGAAAByVJREFUWAm1l1uIldcVx9d3ruMZZzRaay+pCjFJH6LSRqxQqA1NH0pBiH3Qp774kEAg4EOkxKdQSCjUFvpm6YsNVNoSaGjFtmga2yZgCIIawdv04g2kM7Uz6lzO+c758v/t/9lzTB/61Oxhn7332muv9V+3vb8pnooDVRkzZ4oY/LmK6mQZa05frX6yFJ9Ae7x4qd2IuV1FFM9WMfhaI9Z+pQBAL+aiEZ0QgNBm2YuZmxHF9VZMXqmivFaLweUyuteWYvHGVPWr2f+F7YvF/ola9DZGVJsHUXs8YvBEK1ZrXt9URDwqxY1BdGMQvWjGqkgA+iLUtazHuADUoowHYugKTilaR7SIpZjWqOMRfY090RbasS4JglpFtzWIcqwZa+pSqnWVcLLXijXpZCFpvbgb/VhMe8huMLPylWkci8/oSD8xJq7hj4WUWvXrlbqVrUyKtBYdpX3Bh9YbzsdErwRgbZKyFP+KdqxPssu4l2hDAOOxIj6bCHigKWRNCcpMCHHHB4TJLc+TXxKHnC51Ct+Qgxl/TZ0qE5Be/EdWTwjqQuJJAPIB8qAZk4kZoXJnvHH+27Hq0+0YX12PH+w7E3/8zbWkitN2M8pS7kCKZ761OV55c2fcm+nG7J1e7N/+e3m2nbyKQcAhnHWZLC86B1rxiFRvSIkIgJHFVWzZ+qk4fG5HEr4wV8buVb+Vuv5QeVZsi/HeW//eHZ1HbNfLT5+Jc2dndBav9KXugfqc+pLsv6Xxvk6kVheumnpDnXlTVMZWfHh+Li6cdOKvmGzEC69+WTskzwr1SfUJ9ZWp7z/0pWXlF9+ejQtnUdCWnAxQ+al5Tdz80lIVEP8x9eZQWCQwOTAhNc34Re+rUW8U0S+r2Ns8nWzBKgONBOeX3V3RaCpPRN7XeFcO7yYl+InML2U3VdBVHszHzbSXYLBJkuTSQzBuphoYZ7X/u8O30gFAHHxzi+Yop8ETcfDXW5JyKMd/fFuO9l3mYuwLAl5gbMg8QuKdYQg4Zjcxo7HikMeIn37vcizes9Ide9bGhs9NLPN9YX0ndnzHpbZ4vx9HXr6kc6Sobo2hIkuzOnIh0xMFRlvc0waWL+p3UePCQ/Myjjx/JSnl59CJbUkJgl75g+ZD/D978Yrc7EuMPe4ESo6OYsaasiiX7tADAyny5cGtyMHsDxzFnP0Tx6Z0SfsW27B1PHZ+c13seGZdbNo2Lo6Iu7e7cfznfxc/8ggNQBhZI9dSs2c5k+rFaHBXmZhd32xTGdlZPvzDvefj9XddlgeObYVpuf1o3zkpyrEnCJwBDjlmr9i7XP3jgrYkDamhEqRA8UOBxZ53tcOtBbgyzr53M65f8DU6sVZ1o067cfFBvP+XGzrDOa5s+JkTShIc+dBtlLOLlRpqAUDc+yqQMnViNq81edDVnPixno/vP/dXjn2svbbnPa1RiqXEHVkYQ06RWygnFEtpbZDLAJws2X1OHgfCv+hiRkZU8Y+pmbjwzjTE1D48PR1TV+5IMErgsjex2A8TJrqCHH9Cw6U0BGBkPUWrKTZnPq4L9WqIOFvEO8ml+vbRvyUB/Jw6OiUa9GydM58qQl6lTrNHyiENrwyTkOvXLziVkMlOOsesVKyIFtZB1zfDAGvdyj4xtkD7yHQ8Ynn4hCrwvYA+DOJCSlXAZl3MjNQobNzVPK7gJm0AiPsQyEg0c6s1cbEB5X08AmDz1TTLucApzHHyJgADvUqVysJMKOSicLRQl+emOIvbnaw+ot2pSTzl5zzJVjPaZ6ix7zCSN4E1shOAWnqbyYH8bOqd1h9AGJ0qtl6LRBubcBKxbo6xh60kWlbLjgG4NJ2ETkwqbl7SeUXVSCq+BF1C2bWEgEO4CxBGvOydGmu3ooXv7AEogLFqn2JtWKO8yc9xAmDxjhGiWMOQXe63zCvHtIjOpGOIwvGJlhRQepyzaiu0MQ4MnFhuT7CiJQC+sUg4jtOYO+1IH9OdCwgBSmOkP2r60CarHeXMjxw3PGyvOBnN670EgOPOc1yEYgDYCxbqTPDXki1srChi4R6lpQ+uDmVFDtkA5GH1qJEvQFgacqCFT37pyP+Y+DMJs0Y54NgbiIVn61jhEUrNARuNIi3vOQf8iUeQuNzILe4b/jFZ7RDYJhTbVRaJTxyWh8PgO93hQJCBsSa2GQyyoLlBzWDxgnm9l0JgADgNgVxElCH22xs4NCsaieSUyzWXaSTLDAPlGQB0Kt6JaqpzYjkJQT9id60aNwqZjVqlz9Kqp+JcfDjOAqhirNoCI6MelpVPAjZ/CbFv45Y9YNcicqDMKm/Xo/FPJdMlqZ9SIK7qSrrci9mbl6q3/DGQ5f7XuK347rgKeuMgiicEfLPmT0rGY1K5SdI/ryritlMbJrr/PZ8+I8qf9PF8qhMrT39QHfHLkhj/fz/bi+eb83F/VxX1b6jWvt6KdTs/AvvCmqXE235jAAAAAElFTkSuQmCC</Image>
<Image width="74" height="74">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABKCAIAAACTslUmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGMkQ1NjY1OTQzMjA2ODExOEFCM0NBQTM2NzFDMUYwRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNTI5NTE2NzcwQ0IxMUUzQUZGRUQxNzZFRDEwMkU1NiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNTI5NTE2NjcwQ0IxMUUzQUZGRUQxNzZFRDEwMkU1NiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDY2MGVjYzAtNDBiNy00NzFlLTg0NTgtOTQzNTNmOWM4YzYyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjkzMUIyODkyMTQ5QjExRTM5QkRGOUUwM0ZBM0MwMDNBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+TXdjyQAADg1JREFUeNrsWnlwVdUZP+fc+/aXl7zkJUA2wp4gFBAsslWriIgL1BGpC6iAjKUqjksVGRHbWhlXUNqhWDqgDCCoCCi2YKWA7CJLIaQsIYSEJJDtLXnLXc7p9537kjIdhRn+tPfNm8fNveee8/2+9fd9A72RLiA/3g8jP+qPDc+GZ8Oz4dnwbHg2PBueDc+GZ8Oz4dnwbHg2PBueDc+GZ8P7P4En5JWQX0XgV7TfpILLC/hVqUjfZHCbmoJyvBBwF/5VKL7D5EpcBi9SeGhdCM4ZvAIXTP4Sk3LreFhj3ST4a1rHUbzLpUi4YfpPWIC7wVeFm/JL0r9CwP7pP0EGAYelFzDrMQhoPTcpfhmlqrCOd1BcxxjVOeNwjcLBbtzBiGLKzSgzAZRhPQWcsBrwUIaiELzgVKUmPMcV8BbI6uROShRQCrdwgUC4M74BR5ugDa5KibgimAl7EwUXSOScaagREAm2R6ggAYjA5Xqm4J8cZaIsDQ/fkYaBrVFVaAJhSrggFJEbCXgDBCIoK4pPOZ6KlgMRYTuucpQf3pPnocRcKEQ4UTtCZ8SFEPDakNtqguhEmAxE4WgfgnupICjhIBiYHVSHImiwq3DAEQgOnsHeRMGDmIJaBlWAZIQz+QpgNiixbADyXBJ7sC+VngaidvgNojEdQhhC+if6GihJY9LsinCgz6Bs4Jkq+ipX8SwC/6gmbAxPFR31AvohBoiLd6hqEieVwqIbCwc8xr25AggBo/R46UwUtAlQwIygHQVUyoQLfIrjQQiOye0YyqmaQpUWNgg1ZPSAZ5mXxB6GEDqHQJigPqIKXisilaJVIxB2jKCvwTKnS6j1JHaKNBrEUIVDbkesTdE/pYfo6D3S+0FZ4BroOGh5lBtsCo8wyMDtpSNx/MUjhWjPCHDLlAYEa4iU4AmiaeDnxEAXR2/GVxhTNWKcEy26SIKfSAM7FHAZWCkMBXVKlBI6Fo+B8GPMckv8gO+p7Ml5Iwb2Ld63/6wDHQIeqg5Kq0XzzaNKf/3M8DMHmuvaWpMgvTA8xGUyzBcKZXGix0TKSRyoFAwXOEfRhB4lKZMYLoqxBxHVRlONItrKUlHRplJFhfMpOJQJLmAy5ia0WSTraNgpSFGn7KygPxpJVdPmpOCZ4OWwCfgtNTM8zhtGl8UuJmIp3Qk3MfmAb8EGipCOpLZ7InomeiPDEElyI6Kn8jp7Hn5pWNWx5jX/3N+fFEA0NfDWLFdg0fZ7Y63h12dvNSgvzM5IhvUITwS4h1MDtg75MhxuEo0ZeiqlABAKltV8HnfI6zE11hbTYiJaT9oG5xbff9cQVwbVEmLHhtP76s5ki4zOwq9R5uBaOWkeWFA89/khoWJP7ZmooZmFvf1mQlm/tOKTf3xXIAJB6qriLVPuHPzK6tvffmzrwiWbS0QXVDVYVVCJzcoaVh6XKSVtRi5Ax16qPjVjU/25xrmrbwvRQCuJwqM60vbK+6Phlft6rzjb1hpSM9fVTvvt2nHNPK5RDWLrLImMe7JsdfW0bteELtI4Bic1mkSypF/G6nPT73lm4G5xhhLnH5dPevWTcd1GBZQCR9HQ7N99NHbxBw/4nO5K1uIg+mna/OCkwR+fmRIq8X7010NLXt61ZM7upfO/vdAUfferO15/584oTTSTJLhaKN8P0tecaHUJnyJTtwqBT6ykgqGL1rNQEZlSqKwN8NRHnBdJYs5dm5YenDJn3thZ81YHhT66b69bJ/f74PfbDzQ2gLuPm1rqcKnDx3cd0KnoeENtHg2A1hRqONyqaXLMQLI8YCRx7vKw8AXNS9mH3z7Ua1DGxL7L9lScU8FviTGoe8HG09MGDJk6/trFBxO1vxg+5LXV41fO/2bmi591FsFc6nEQ8q+9dev3Ht2x6sSfdj7AkvSF2RtB6tx8cF5yYPvZIPHIygKlM10/TOmcl2MthdS/+VDV1nXlk+YOuMZRXEsib24Y39ocXvTSnhzhzSP+iS/237h8/5lTjdPeGB4hCSy/kFgTWGOFZmCugDMoBDtLxCFHsIoDtU9PGNNnUGhS8fLd/z5XSvJ706wykne08vzdob8UlAbmvXZbioi5K29paml8e/bOHiKUr2SpyCLULOoZRArW7zr++Yq9971w7dBu3cI03qVnTkNduNVMOjBLXSI6F1cmZZD4g8T56sNboSrNWXLr4+NH5vfInn//5gbSliLa9YN7FBXlLXhk77qFB2+bXFpEQjFuQImgmDTNusq2ShqupZEqEa4hzfWnIoJq+V1zbprZ9fCR0ydrwj1F0KS6gVSHdiM5p5rDhw+cGji+cGIZBF1g1RsHm6iWRd3cNLFSWFmeCi91f/pmBVyOmVSWEHphj+D+L09D0lKZ5EPtecRyQ9KRWr73A9Uhl/orohfem/XFEwtvv/mhnjs2HVm/uaKQZp0XLY+8c111TX25qA1+pD69iNw+8SdL1m5zCFWLo9/PfGvEHXVlblMB/aVUPSfXn9DNLqUZhaWBb9af1aiuCp8kSxgYVJKt6mORzmOy+92Yb9C2+pMJRaZBivxKYEWlSIlcXAEPhypaXBrMI5mGYuz64qwiiQfWFytBtgfaFaxnMgOW5orAikXHq07UwJ33HturERYVySF5xUNGlrz14Df1pGVLU9XOzRXTFwzyEDcUb8ifWEP8zJuheoJOb6bbE/C7fSqSA6G7fErQ59KJxiW9kBQH0g9UbVM3gHOq8DojTkWhVvlLs0qUG6JJqBBUwAGJmkimikjAyWjtoZYAcVrUl4r/hXA564H+QB85wl1B6ndvqsnpknm2NtxZ+KpI4+jpI2G/68YWLBp1b0ToyQjp1CVnWK+uK09+5/WpINrCGVt3pE53YgHIZ0ADfqoU3PVIv/rK+PnKtv4ju7qEUzIfNAywHx1SD2Wdiz2abp7adZESd0mf3DhNgQAmsEhuCAVqkALCtHHdm+EEzDXl4YDXd+Fc4kxVxIco0pSvo8LRK1oPMiysBBbn4W6vBxTqdHNnK433YDmTZw/Zt+XE9r2VdSeTiVP6xiVHTaJNnX+dxjQTqZko6h7sQToV82AJze5OQgW9/WCi85XRLQuOFfQI9srpVEUbHVzBRkKIRhLJFd5ho/se+rpm/aHyltaWCTMHhIQ3QpE9M+pE6oeGNFPE+PkvS0Dsv68s7zc8LxEHbhCxakBa5kuwXTm1SJYMvFhRoa64mUeltaRpwvRBXp/n3V/t/Hj9sfVrjny85sCyLftWLdw//O4+w3nPhtowlelSAHNmaCBgiYoKGZyV9MheuHJXrDW+vOKBEMk4SuqrefgoawCus/ToxFg4/s6z21LEnD/5q6xOrllP33xEVLeINmTBQiSJfphcGFxY9OjLN23+8PCexqpYzNjx2RkXdh603R6kwz+ti8s5p4E1C5XGie50qU6VRE3e0xt6avGwqqq6o5V1pSTkRCrlA1WsnX/kvqdGTH1uaG1tC8SY2+9Apol8nuuCe/0YTCWDsutWxO65Ztkf1o5bvXfKtq9Phpt0f476s591j0a0J8uW1TRH+tO8Tz8vz/9N9qy3bsjt6//zqzsbqlog7LIC3uen3fLs26O+Xlf+3JRNXUjGiX0NB/aczSb+joiTJDZtOqtO0Mv8rySLiBpca2LG2n33lg3uPtr3Lmh6xB09D2+rrq5vySQZJjUVYkJOAD42aFQnI0WaGuIFfTJP7GtuCke91Am2S7JUXsDfe0gO0Ktzla0RkYpS7e4xpf2vLzQMQ1Wdx/bWbfhbucqUztwLWTAhNCDKY2/oM+PFUUA1q043g5fldHF2Lw59uab8/cW7oZsaXFDwSc2jG94//MSMT7vT7B+CcDl4sj3HepIg5oTpZcW981a98m1DrLWFxP3EkwNFiaHnMekbQNjPk0gGcQH+ZhHPJ1ngNgYGD3BqNcFTdSwe5K4c4jOpAd1MI4m1sRT0HJASgZFnE7didUbU6seNGhKD+lmaGSooytRV1tbQdrzuQozqhSJgUCMrkPH4gqEHtlSvWXk8RD1XBU9mIeunkcQTJJ4vshWEg20y9KMC+1EnFxr24EhV2vM4ml6VrTq2yEiXoP/CRg2IoS4DnlsLiGznMeHhAuzTgKPiHEMWJliTZKbBdfgbsqgbCgAebUKSgypTRRqC1BeiGaZskb/3c7nY41ZzyqG/cIS4TxAfQ3NB0jA4g6wN0cWw6UaZZCssN8SeUnaASCK4pJxgEBMJr8LR4YHWmFYFk9MXSUcYMF1BoX/HIp8mjRyWCDcEP3PLt2hHS8OF7iCsG82TdMa4+kmZ9BVV9hcKVbiBEavJZoOZQuOqoeC0xZRzEKhQijUdgZYVvY7LPh08DXt5jHgDEDEVGlkFx0bYg6O8OETQwbwUq7OJTbdMSUDN5RDAQf8rCvYfMtvJoYOw2mh+lfDANEp6bABNMrTLwCmYUOS4AdMiVeQoxkFUydIhojRsOEDBUhEOsDQgYsAarbkVxz4dfoSOLsstrcHeTA6fQFrdcvU0YwS1Mg0JLJeTI5zgQJ3B0MDGGSypIH5rmnQ18DjOm+SgDmcCaAcrhFAalAtRwUUKZUPDUdmJI/szMYSQcGD5UxUcA2KWwvkSeDVVpd+3zwJN5FMyP1mNNpZaOEmGPbXmDtjJCQV/GYcLBfeCTXAugdHxw5/LQZdDLmsyKbUgB0eXPE7/ochBE7eGbh0rUd1SCWBOKrFZRUko8g7r2AhHcAi3vXDJ2AM3thRs2YB2HIcs3JCOZaY9lir2EN6GZ8Oz4dnwbHg2PBueDc+GZ8Oz4dnwbHg2PBueDc+GZ8Oz4f2IP/8RYAA9J6w+Uu7YgQAAAABJRU5ErkJggg==</Image>
<Url type="application/x-suggestions+json" method="GET"
     template="http://ff.search.yahoo.com/gossip?output=fxjson&amp;command={searchTerms}" />
<Url type="text/html" method="GET" template="http://search.yahoo.com/search">
  <Param name="p" value="{searchTerms}"/>
  <Param name="ei" value="UTF-8"/>
  <MozParam name="fr" condition="pref" pref="yahoo-fr-metro" />
</Url>
<SearchForm>http://search.yahoo.com/</SearchForm>
</SearchPlugin>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<SearchPlugin xmlns="http://www.mozilla.org/2006/browser/search/">
<ShortName>Yahoo</ShortName>
<Description>Yahoo Search</Description>
<InputEncoding>UTF-8</InputEncoding>
<Image width="16" height="16">data:image/x-icon;base64,AAABAAIAEBAAAAEACAA8DQAAJgAAACAgAAABAAgAowsAAGINAACJUE5HDQoaCgAAAA1JSERSAAAAEAAAABAIBgAAAB/z/2EAAAAJcEhZcwAACxMAAAsTAQCanBgAAApPaUNDUFBob3Rvc2hvcCBJQ0MgcHJvZmlsZQAAeNqdU2dUU+kWPffe9EJLiICUS29SFQggUkKLgBSRJiohCRBKiCGh2RVRwRFFRQQbyKCIA46OgIwVUSwMigrYB+Qhoo6Do4iKyvvhe6Nr1rz35s3+tdc+56zznbPPB8AIDJZIM1E1gAypQh4R4IPHxMbh5C5AgQokcAAQCLNkIXP9IwEA+H48PCsiwAe+AAF40wsIAMBNm8AwHIf/D+pCmVwBgIQBwHSROEsIgBQAQHqOQqYAQEYBgJ2YJlMAoAQAYMtjYuMAUC0AYCd/5tMAgJ34mXsBAFuUIRUBoJEAIBNliEQAaDsArM9WikUAWDAAFGZLxDkA2C0AMElXZkgAsLcAwM4QC7IACAwAMFGIhSkABHsAYMgjI3gAhJkAFEbyVzzxK64Q5yoAAHiZsjy5JDlFgVsILXEHV1cuHijOSRcrFDZhAmGaQC7CeZkZMoE0D+DzzAAAoJEVEeCD8/14zg6uzs42jrYOXy3qvwb/ImJi4/7lz6twQAAA4XR+0f4sL7MagDsGgG3+oiXuBGheC6B194tmsg9AtQCg6dpX83D4fjw8RaGQudnZ5eTk2ErEQlthyld9/mfCX8BX/Wz5fjz89/XgvuIkgTJdgUcE+ODCzPRMpRzPkgmEYtzmj0f8twv//B3TIsRJYrlYKhTjURJxjkSajPMypSKJQpIpxSXS/2Ti3yz7Az7fNQCwaj4Be5EtqF1jA/ZLJxBYdMDi9wAA8rtvwdQoCAOAaIPhz3f/7z/9R6AlAIBmSZJxAABeRCQuVMqzP8cIAABEoIEqsEEb9MEYLMAGHMEF3MEL/GA2hEIkxMJCEEIKZIAccmAprIJCKIbNsB0qYC/UQB00wFFohpNwDi7CVbgOPXAP+mEInsEovIEJBEHICBNhIdqIAWKKWCOOCBeZhfghwUgEEoskIMmIFFEiS5E1SDFSilQgVUgd8j1yAjmHXEa6kTvIADKC/Ia8RzGUgbJRPdQMtUO5qDcahEaiC9BkdDGajxagm9BytBo9jDah59CraA/ajz5DxzDA6BgHM8RsMC7Gw0KxOCwJk2PLsSKsDKvGGrBWrAO7ifVjz7F3BBKBRcAJNgR3QiBhHkFIWExYTthIqCAcJDQR2gk3CQOEUcInIpOoS7QmuhH5xBhiMjGHWEgsI9YSjxMvEHuIQ8Q3JBKJQzInuZACSbGkVNIS0kbSblIj6SypmzRIGiOTydpka7IHOZQsICvIheSd5MPkM+Qb5CHyWwqdYkBxpPhT4ihSympKGeUQ5TTlBmWYMkFVo5pS3aihVBE1j1pCraG2Uq9Rh6gTNHWaOc2DFklLpa2ildMaaBdo92mv6HS6Ed2VHk6X0FfSy+lH6JfoA/R3DA2GFYPHiGcoGZsYBxhnGXcYr5hMphnTixnHVDA3MeuY55kPmW9VWCq2KnwVkcoKlUqVJpUbKi9Uqaqmqt6qC1XzVctUj6leU32uRlUzU+OpCdSWq1WqnVDrUxtTZ6k7qIeqZ6hvVD+kfln9iQZZw0zDT0OkUaCxX+O8xiALYxmzeCwhaw2rhnWBNcQmsc3ZfHYqu5j9HbuLPaqpoTlDM0ozV7NS85RmPwfjmHH4nHROCecop5fzforeFO8p4ikbpjRMuTFlXGuqlpeWWKtIq1GrR+u9Nq7tp52mvUW7WfuBDkHHSidcJ0dnj84FnedT2VPdpwqnFk09OvWuLqprpRuhu0R3v26n7pievl6Ankxvp955vef6HH0v/VT9bfqn9UcMWAazDCQG2wzOGDzFNXFvPB0vx9vxUUNdw0BDpWGVYZfhhJG50Tyj1UaNRg+MacZc4yTjbcZtxqMmBiYhJktN6k3umlJNuaYppjtMO0zHzczNos3WmTWbPTHXMueb55vXm9+3YFp4Wiy2qLa4ZUmy5FqmWe62vG6FWjlZpVhVWl2zRq2drSXWu627pxGnuU6TTque1mfDsPG2ybaptxmw5dgG2662bbZ9YWdiF2e3xa7D7pO9k326fY39PQcNh9kOqx1aHX5ztHIUOlY63prOnO4/fcX0lukvZ1jPEM/YM+O2E8spxGmdU5vTR2cXZ7lzg/OIi4lLgssulz4umxvG3ci95Ep09XFd4XrS9Z2bs5vC7ajbr+427mnuh9yfzDSfKZ5ZM3PQw8hD4FHl0T8Ln5Uwa9+sfk9DT4FntecjL2MvkVet17C3pXeq92HvFz72PnKf4z7jPDfeMt5ZX8w3wLfIt8tPw2+eX4XfQ38j/2T/ev/RAKeAJQFnA4mBQYFbAvv4enwhv44/Ottl9rLZ7UGMoLlBFUGPgq2C5cGtIWjI7JCtIffnmM6RzmkOhVB+6NbQB2HmYYvDfgwnhYeFV4Y/jnCIWBrRMZc1d9HcQ3PfRPpElkTem2cxTzmvLUo1Kj6qLmo82je6NLo/xi5mWczVWJ1YSWxLHDkuKq42bmy+3/zt84fineIL43sXmC/IXXB5oc7C9IWnFqkuEiw6lkBMiE44lPBBECqoFowl8hN3JY4KecIdwmciL9E20YjYQ1wqHk7ySCpNepLskbw1eSTFM6Us5bmEJ6mQvEwNTN2bOp4WmnYgbTI9Or0xg5KRkHFCqiFNk7Zn6mfmZnbLrGWFsv7Fbou3Lx6VB8lrs5CsBVktCrZCpuhUWijXKgeyZ2VXZr/Nico5lqueK83tzLPK25A3nO+f/+0SwhLhkralhktXLR1Y5r2sajmyPHF52wrjFQUrhlYGrDy4irYqbdVPq+1Xl65+vSZ6TWuBXsHKgsG1AWvrC1UK5YV969zX7V1PWC9Z37Vh+oadGz4ViYquFNsXlxV/2CjceOUbh2/Kv5nclLSpq8S5ZM9m0mbp5t4tnlsOlqqX5pcObg3Z2rQN31a07fX2Rdsvl80o27uDtkO5o788uLxlp8nOzTs/VKRU9FT6VDbu0t21Ydf4btHuG3u89jTs1dtbvPf9Psm+21UBVU3VZtVl+0n7s/c/romq6fiW+21drU5tce3HA9ID/QcjDrbXudTVHdI9VFKP1ivrRw7HH77+ne93LQ02DVWNnMbiI3BEeeTp9wnf9x4NOtp2jHus4QfTH3YdZx0vakKa8ppGm1Oa+1tiW7pPzD7R1ureevxH2x8PnDQ8WXlK81TJadrpgtOTZ/LPjJ2VnX1+LvncYNuitnvnY87fag9v77oQdOHSRf+L5zu8O85c8rh08rLb5RNXuFearzpfbep06jz+k9NPx7ucu5quuVxrue56vbV7ZvfpG543zt30vXnxFv/W1Z45Pd2983pv98X39d8W3X5yJ/3Oy7vZdyfurbxPvF/0QO1B2UPdh9U/W/7c2O/cf2rAd6Dz0dxH9waFg8/+kfWPD0MFj5mPy4YNhuueOD45OeI/cv3p/KdDz2TPJp4X/qL+y64XFi9++NXr187RmNGhl/KXk79tfKX96sDrGa/bxsLGHr7JeDMxXvRW++3Bd9x3He+j3w9P5Hwgfyj/aPmx9VPQp/uTGZOT/wQDmPP8YzMt2wAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAACZ0lEQVR42mzSP4icZRTF4ee+38xOkp2sG5cQxVJIIaaKkICxTkqJjQhpJFYiop2F1YKFQqoUVpEoCBYSS7dfOxVFWGIsokUE/0TEye7OzPe977XYNWk83b0cDoffvXHWGxkKYjt0N1fi+FaJIzNIFSJ0kDXn0z5nF1O9Sp5PzaizamLD2NELo5W4sOwXqqX/04o1R2wg9PYs/GXUmTjqpGNxwvWdFzz19Akvjj+XUkYTggylFLfml93due+tZ7+y577BrkJnbNWke8yHmzvgi/4lq+WU1XjCsThl2p1ya3GZ4KNrt03KuhXH0SkkkbTOL5+u2PnuZ/D8axtGMTaKsbOvrINP3v/W3Y9XhCJjQCrUWRedVpaq3nvn7oHXrz8jD8PfvnEGbL0716LXytIoxqizkups4R/VwhB7hpi7sXkbXNo86bkrazK5sXnbEHND7BvMLcykOotz3vlxvZw+faRb08VEiVC64rPdSw/pZ/Ly9EutNi3TkHOLOvN3u3OnHNx7MFio5qq5Ifdce/WHhwEfXPnekPuq/UPPQhrAKOV0MFdyRFQFRefr7Z9wRrb0zfYd1aCpGmr2BvtSTkcp1wZLnX0tx4oQjeHX+UF97P75QGspM7VMqTfopVwb0aY1F4ZWlFK1SCVDHQKUEvphj0ztkEdrvZoLtOkoNS2XlkHJIlroIky7Jw8atDSJdQ/aPTUdtJBaLqVmlJpqQataCZKhY/L4HwcEI/Qbv1v8tivbIdVG1UtNnPVmFmPEoT9l/Dc9Ujp42Mx4uGl6I5pmgdjGzaLbopsdJqZHWZnqtKkXcZU8D/8OAPAMQ4kD8KK1AAAAAElFTkSuQmCCiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAAAlwSFlzAAALEwAACxMBAJqcGAAAByVJREFUWAm1l1uIldcVx9d3ruMZZzRaay+pCjFJH6LSRqxQqA1NH0pBiH3Qp774kEAg4EOkxKdQSCjUFvpm6YsNVNoSaGjFtmga2yZgCIIawdv04g2kM7Uz6lzO+c758v/t/9lzTB/61Oxhn7332muv9V+3vb8pnooDVRkzZ4oY/LmK6mQZa05frX6yFJ9Ae7x4qd2IuV1FFM9WMfhaI9Z+pQBAL+aiEZ0QgNBm2YuZmxHF9VZMXqmivFaLweUyuteWYvHGVPWr2f+F7YvF/ola9DZGVJsHUXs8YvBEK1ZrXt9URDwqxY1BdGMQvWjGqkgA+iLUtazHuADUoowHYugKTilaR7SIpZjWqOMRfY090RbasS4JglpFtzWIcqwZa+pSqnWVcLLXijXpZCFpvbgb/VhMe8huMLPylWkci8/oSD8xJq7hj4WUWvXrlbqVrUyKtBYdpX3Bh9YbzsdErwRgbZKyFP+KdqxPssu4l2hDAOOxIj6bCHigKWRNCcpMCHHHB4TJLc+TXxKHnC51Ct+Qgxl/TZ0qE5Be/EdWTwjqQuJJAPIB8qAZk4kZoXJnvHH+27Hq0+0YX12PH+w7E3/8zbWkitN2M8pS7kCKZ761OV55c2fcm+nG7J1e7N/+e3m2nbyKQcAhnHWZLC86B1rxiFRvSIkIgJHFVWzZ+qk4fG5HEr4wV8buVb+Vuv5QeVZsi/HeW//eHZ1HbNfLT5+Jc2dndBav9KXugfqc+pLsv6Xxvk6kVheumnpDnXlTVMZWfHh+Li6cdOKvmGzEC69+WTskzwr1SfUJ9ZWp7z/0pWXlF9+ejQtnUdCWnAxQ+al5Tdz80lIVEP8x9eZQWCQwOTAhNc34Re+rUW8U0S+r2Ns8nWzBKgONBOeX3V3RaCpPRN7XeFcO7yYl+InML2U3VdBVHszHzbSXYLBJkuTSQzBuphoYZ7X/u8O30gFAHHxzi+Yop8ETcfDXW5JyKMd/fFuO9l3mYuwLAl5gbMg8QuKdYQg4Zjcxo7HikMeIn37vcizes9Ide9bGhs9NLPN9YX0ndnzHpbZ4vx9HXr6kc6Sobo2hIkuzOnIh0xMFRlvc0waWL+p3UePCQ/Myjjx/JSnl59CJbUkJgl75g+ZD/D978Yrc7EuMPe4ESo6OYsaasiiX7tADAyny5cGtyMHsDxzFnP0Tx6Z0SfsW27B1PHZ+c13seGZdbNo2Lo6Iu7e7cfznfxc/8ggNQBhZI9dSs2c5k+rFaHBXmZhd32xTGdlZPvzDvefj9XddlgeObYVpuf1o3zkpyrEnCJwBDjlmr9i7XP3jgrYkDamhEqRA8UOBxZ53tcOtBbgyzr53M65f8DU6sVZ1o067cfFBvP+XGzrDOa5s+JkTShIc+dBtlLOLlRpqAUDc+yqQMnViNq81edDVnPixno/vP/dXjn2svbbnPa1RiqXEHVkYQ06RWygnFEtpbZDLAJws2X1OHgfCv+hiRkZU8Y+pmbjwzjTE1D48PR1TV+5IMErgsjex2A8TJrqCHH9Cw6U0BGBkPUWrKTZnPq4L9WqIOFvEO8ml+vbRvyUB/Jw6OiUa9GydM58qQl6lTrNHyiENrwyTkOvXLziVkMlOOsesVKyIFtZB1zfDAGvdyj4xtkD7yHQ8Ynn4hCrwvYA+DOJCSlXAZl3MjNQobNzVPK7gJm0AiPsQyEg0c6s1cbEB5X08AmDz1TTLucApzHHyJgADvUqVysJMKOSicLRQl+emOIvbnaw+ot2pSTzl5zzJVjPaZ6ix7zCSN4E1shOAWnqbyYH8bOqd1h9AGJ0qtl6LRBubcBKxbo6xh60kWlbLjgG4NJ2ETkwqbl7SeUXVSCq+BF1C2bWEgEO4CxBGvOydGmu3ooXv7AEogLFqn2JtWKO8yc9xAmDxjhGiWMOQXe63zCvHtIjOpGOIwvGJlhRQepyzaiu0MQ4MnFhuT7CiJQC+sUg4jtOYO+1IH9OdCwgBSmOkP2r60CarHeXMjxw3PGyvOBnN670EgOPOc1yEYgDYCxbqTPDXki1srChi4R6lpQ+uDmVFDtkA5GH1qJEvQFgacqCFT37pyP+Y+DMJs0Y54NgbiIVn61jhEUrNARuNIi3vOQf8iUeQuNzILe4b/jFZ7RDYJhTbVRaJTxyWh8PgO93hQJCBsSa2GQyyoLlBzWDxgnm9l0JgADgNgVxElCH22xs4NCsaieSUyzWXaSTLDAPlGQB0Kt6JaqpzYjkJQT9id60aNwqZjVqlz9Kqp+JcfDjOAqhirNoCI6MelpVPAjZ/CbFv45Y9YNcicqDMKm/Xo/FPJdMlqZ9SIK7qSrrci9mbl6q3/DGQ5f7XuK347rgKeuMgiicEfLPmT0rGY1K5SdI/ryritlMbJrr/PZ8+I8qf9PF8qhMrT39QHfHLkhj/fz/bi+eb83F/VxX1b6jWvt6KdTs/AvvCmqXE235jAAAAAElFTkSuQmCC</Image>
<Image width="65" height="26">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAaCAYAAADovjFxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjcwNUUyRjFGQjUyNTExRTNCNzdEOTU4N0NCMjI3MEFDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjcwNUUyRjIwQjUyNTExRTNCNzdEOTU4N0NCMjI3MEFDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzA1RTJGMURCNTI1MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzA1RTJGMUVCNTI1MTFFM0I3N0Q5NTg3Q0IyMjcwQUMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4qMBarAAAI8ElEQVR42uxZeVRTZxb/vSQQYgBhAEVgZFOpO56igsLUrZ6RujCDtepUa2faqdYZtWrHpcfagqdYOzoFrFp7aqW1VVGoa0UP1g1FsVCVKSIKBGRTCCGs2e98L5iYmLDU2vljxsf5knzfvd9yf+/e+7vvwRER/t8vAZ5eT0F4CsJTECxAyDpWQodTa4hUCOhM8dSBBjqxt4B0Op3j/4rxpbltVHVLQ6K7leWYu3AbNs3YWPr2oSDOnnL6yjaK3bwA6//xAqbMGaT5tQ93v1xH8nst6CGVwH+QI9eVfuN9XXZKYl54dUkjc20OBuihZ6zn4u6GWX8ajQGRsFmjSaGe+lJYFnwdncHxFDn3+bW0N1OFmqtb0DvMeoK2BkrPPh+49u2Xi/zbaQ9kBuHySTk6f+9eWLrHFrivk7Jp35E6xC0fjxHRzjbyq+fvUHzcNcx/Lgoz1/U2yz/fnEOn04rg4SGFk0QEjV6L2roW9AsMQdzmUWXwsPXW7QlnKPmdyxg13h8TpwcjZJgHhA5AWWkdzmWW4Lv9txH9/HQkpo6IgASXTfNk+a00blgGJvXvBfAgNDTWhgMz6A8+p4nvW7YVowpYITGKCm7dMMvyT7SwsdfJCXHUdJds5rz1yjYmX0Dnd7XayPh28vAVJo+hteMfrKnTC6eGJ5I3VtHu5HOkUNRPJdIJ1Xrl7MzMSxQatIT8kUTV56z3Wvfa12ydVyn1k1y7+/Att+Ai05lO0wLPE2nJ1TR+82ITeeEr2rXmxkPlHQn8grMoc6PGvODNdL6SiqZFC9ZbbbJ4SBYNlr5DfbGUkueU2xzgn++msnmrKD9DZ/dwVy/xwL5J2xeVGuXzIpNYfyFVFzR1YIw6wNNjMgVjF6nukYwfO3Y4k82ZQp8uLO4QAFPLzjll1E2c0mDWzU5XMBC2UtaRImvlgV6vkA8TmPojxJtIhNGk0jUHmMYUdw0kRjxdOFxIH676gvywxeYQiRvSiMNaKvxeb/eA1/OKmHwJZSap6WZ5jhKIpaTY0k6NOXnyBDNkHKUsagcq1Gce9cZm0jfQe12BwLfIgX+hnviE6m+3e9PBTWX0DD4mhbx+thVFfrbvr6jCd/jiTTkdSSiiH9U78emOlRALpTKTzq5lBSz5tCByegg3a+nI6xW4gQs7tNa1N78xSy0+gfYZ2Lef8xyOaQiEAhzYf9oV8Mdz8zolJ0RFRfm4wxNnM36CrLys9FpVPWL8JkHQE+91J9lOjh0KJXKR862hnRkK7sFP7AC337jvE1kqjp0whpszfjgt2b6T5dcaDO8/HH9+Y6ZVYktOO4NZowONvwP6DA4dJHGmTWsyELVwmllHJBKhB1th66p/wz1ASw6OAmYwy9p6go5xS1V1DVzhhua2BlTdaYEz/ODi3bkREom0eoCbLxTyBlw6o2SIOcF/YO9uM46vrw/7zEOljDke3FFeUoXgkVL7xdKmlMXXnblCtKEQ21NWW8kykmpJxsYTMiaas+xHBybgWMMx3M2B2Rs4TsA6BihVVaxVQNFShfqmKuO3UlUJpbqCyXW8JqMnARzYH6HrBzknjqczLbT6VtZzhiPn2m0QRJyYfYpBnNbYr6+XY1CUZ7vMYDBwAoHAfAK/3/qGhvj3oCDZDEREhFl5wZ74XHaHxTiV3BJOdJ2dm0O90o1JVNgfV4yVx4LbaVWrYSA6Yl3iZEgDbDla0SwP35oan93DSQqvAAc0MADUtZ2XAxqNRlKnMMDfnxD2O3/GTAJOfkvUbRAaKvnyxgG9goTtEStSYciYPg89gQeCb6YJBmaAmJGy5XXnvJYO1J3Dy7F9Ud94H/LGKsjZ3XVwAn7/rDf+dfwgVLUw5g4+H/AlS0Wpwe6BKm4rsnkd/u5EvziU6VeiKLVzI4qvyFt/wj0MHi/B4H4jBIEeGhwv+4FVPd3LCXmH6iBlOSUi1lVvNFyswTPP9jlqFOr1es7UzJnUdzlFYg+jahKaxpYN47l9PqmoVmbDxXkXjbyf8rrcmHk/Wref9VczitTazfi5lwuZfAl99vd2eo0aupg8kUlUSR0yREzQPnJgNUGF7H4h39/55Q62xhuUsZS6pMjKa0qj7rLwdKPu9awymj9uI/G1iPF9CnsWEPLNEoSxvVfTWHxDujYyUuO1481M8zWaP3mDeUNLfb4NcXuVBUccGdichHd3G4uprN0quwfMPPoDk7/EiqV8o7y28Y4yOORvNBTpdOEbNkf/EPySXB3NCuPrjrl09lCO1Xovxqxg48mU+2XHQDSWEKPxeAp2X0FNiuYJ7eMa12bt/b38bx0r1ETsh5DjOJ7Q+dBgrqJzFWhcmDP3YGECbxZBstwLxRgR4YjFG6JhCh/TtymfrE+aifjEEyjOaykdEhqAqMhyiD1ajcno0cvFxYXJ+6Pf2Pa+p0twzzuF78veXpPun/hxOo6neemcPQgtqhaUltUBPnIUl7zXGBTYv6flvqnffhC48K3NpdPnJ2Hm3tEU/cf+CB7qCoFIj8qyBpw5WYSUz88icKQGR4+s3eLsJv1eo1VLrqZBGTjAC5JQ/Vxj8Gq1WkcLatPwLhIkWKlrhS9KaldelnpyETpqCxBxEtmD8BHaizmhUGiMtbY2dR+JRFzdnhu0rmQQNtk8upoTsV7IpyPrMeXeG/k1s5vqNHCQcAgZ3uv9npJe5ri3zF2mOT/eukIHt1WitdwBYpEju4EaqPQtIKkaE2f7IeaFieY5ZXdLCwP6JoSEYQyu0ssMVFGjFQhsUa1OZ3A6eehKq1qrR/S08FAnZ9ENS/boCgT+4YqtpLd3aFsQbOWWMsur633b99ajaQ+7t4w3pPFMapbxrwB4j9dqdW57vjpU5+3hheiYcQI+AjhGPbzwQaHHprPfvEcYN2ZeYdBByHXxMPsgnIxh9d98H2ARykLTTbQE8dF3H7x9DDSzjskBjCB0YeBjH/JJgPOoob9gnY4Lqa4OaW9yd4ExHfwJGCB8EsZ2tLaoq03sAfRzNvolnvS4hv1cIE0gOLDDah/nLphA6sijfq1/7pjOZbn/Y6xhtPs/AgwA60Nh9SzP0OoAAAAASUVORK5CYII=</Image>
<Image width="130" height="52">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAAA0CAYAAABGkOCVAAAKQWlDQ1BJQ0MgUHJvZmlsZQAASA2dlndUU9kWh8+9N73QEiIgJfQaegkg0jtIFQRRiUmAUAKGhCZ2RAVGFBEpVmRUwAFHhyJjRRQLg4Ji1wnyEFDGwVFEReXdjGsJ7601896a/cdZ39nnt9fZZ+9917oAUPyCBMJ0WAGANKFYFO7rwVwSE8vE9wIYEAEOWAHA4WZmBEf4RALU/L09mZmoSMaz9u4ugGS72yy/UCZz1v9/kSI3QyQGAApF1TY8fiYX5QKUU7PFGTL/BMr0lSkyhjEyFqEJoqwi48SvbPan5iu7yZiXJuShGlnOGbw0noy7UN6aJeGjjAShXJgl4GejfAdlvVRJmgDl9yjT0/icTAAwFJlfzOcmoWyJMkUUGe6J8gIACJTEObxyDov5OWieAHimZ+SKBIlJYqYR15hp5ejIZvrxs1P5YjErlMNN4Yh4TM/0tAyOMBeAr2+WRQElWW2ZaJHtrRzt7VnW5mj5v9nfHn5T/T3IevtV8Sbsz55BjJ5Z32zsrC+9FgD2JFqbHbO+lVUAtG0GQOXhrE/vIADyBQC03pzzHoZsXpLE4gwnC4vs7GxzAZ9rLivoN/ufgm/Kv4Y595nL7vtWO6YXP4EjSRUzZUXlpqemS0TMzAwOl89k/fcQ/+PAOWnNycMsnJ/AF/GF6FVR6JQJhIlou4U8gViQLmQKhH/V4X8YNicHGX6daxRodV8AfYU5ULhJB8hvPQBDIwMkbj96An3rWxAxCsi+vGitka9zjzJ6/uf6Hwtcim7hTEEiU+b2DI9kciWiLBmj34RswQISkAd0oAo0gS4wAixgDRyAM3AD3iAAhIBIEAOWAy5IAmlABLJBPtgACkEx2AF2g2pwANSBetAEToI2cAZcBFfADXALDIBHQAqGwUswAd6BaQiC8BAVokGqkBakD5lC1hAbWgh5Q0FQOBQDxUOJkBCSQPnQJqgYKoOqoUNQPfQjdBq6CF2D+qAH0CA0Bv0BfYQRmALTYQ3YALaA2bA7HAhHwsvgRHgVnAcXwNvhSrgWPg63whfhG/AALIVfwpMIQMgIA9FGWAgb8URCkFgkAREha5EipAKpRZqQDqQbuY1IkXHkAwaHoWGYGBbGGeOHWYzhYlZh1mJKMNWYY5hWTBfmNmYQM4H5gqVi1bGmWCesP3YJNhGbjS3EVmCPYFuwl7ED2GHsOxwOx8AZ4hxwfrgYXDJuNa4Etw/XjLuA68MN4SbxeLwq3hTvgg/Bc/BifCG+Cn8cfx7fjx/GvyeQCVoEa4IPIZYgJGwkVBAaCOcI/YQRwjRRgahPdCKGEHnEXGIpsY7YQbxJHCZOkxRJhiQXUiQpmbSBVElqIl0mPSa9IZPJOmRHchhZQF5PriSfIF8lD5I/UJQoJhRPShxFQtlOOUq5QHlAeUOlUg2obtRYqpi6nVpPvUR9Sn0vR5Mzl/OX48mtk6uRa5Xrl3slT5TXl3eXXy6fJ18hf0r+pvy4AlHBQMFTgaOwVqFG4bTCPYVJRZqilWKIYppiiWKD4jXFUSW8koGStxJPqUDpsNIlpSEaQtOledK4tE20Otpl2jAdRzek+9OT6cX0H+i99AllJWVb5SjlHOUa5bPKUgbCMGD4M1IZpYyTjLuMj/M05rnP48/bNq9pXv+8KZX5Km4qfJUilWaVAZWPqkxVb9UU1Z2qbapP1DBqJmphatlq+9Uuq43Pp893ns+dXzT/5PyH6rC6iXq4+mr1w+o96pMamhq+GhkaVRqXNMY1GZpumsma5ZrnNMe0aFoLtQRa5VrntV4wlZnuzFRmJbOLOaGtru2nLdE+pN2rPa1jqLNYZ6NOs84TXZIuWzdBt1y3U3dCT0svWC9fr1HvoT5Rn62fpL9Hv1t/ysDQINpgi0GbwaihiqG/YZ5ho+FjI6qRq9Eqo1qjO8Y4Y7ZxivE+41smsImdSZJJjclNU9jU3lRgus+0zwxr5mgmNKs1u8eisNxZWaxG1qA5wzzIfKN5m/krCz2LWIudFt0WXyztLFMt6ywfWSlZBVhttOqw+sPaxJprXWN9x4Zq42Ozzqbd5rWtqS3fdr/tfTuaXbDdFrtOu8/2DvYi+yb7MQc9h3iHvQ732HR2KLuEfdUR6+jhuM7xjOMHJ3snsdNJp9+dWc4pzg3OowsMF/AX1C0YctFx4bgccpEuZC6MX3hwodRV25XjWuv6zE3Xjed2xG3E3dg92f24+ysPSw+RR4vHlKeT5xrPC16Il69XkVevt5L3Yu9q76c+Oj6JPo0+E752vqt9L/hh/QL9dvrd89fw5/rX+08EOASsCegKpARGBFYHPgsyCRIFdQTDwQHBu4IfL9JfJFzUFgJC/EN2hTwJNQxdFfpzGC4sNKwm7Hm4VXh+eHcELWJFREPEu0iPyNLIR4uNFksWd0bJR8VF1UdNRXtFl0VLl1gsWbPkRoxajCCmPRYfGxV7JHZyqffS3UuH4+ziCuPuLjNclrPs2nK15anLz66QX8FZcSoeGx8d3xD/iRPCqeVMrvRfuXflBNeTu4f7kufGK+eN8V34ZfyRBJeEsoTRRJfEXYljSa5JFUnjAk9BteB1sl/ygeSplJCUoykzqdGpzWmEtPi000IlYYqwK10zPSe9L8M0ozBDuspp1e5VE6JA0ZFMKHNZZruYjv5M9UiMJJslg1kLs2qy3mdHZZ/KUcwR5vTkmuRuyx3J88n7fjVmNXd1Z752/ob8wTXuaw6thdauXNu5Tnddwbrh9b7rj20gbUjZ8MtGy41lG99uit7UUaBRsL5gaLPv5sZCuUJR4b0tzlsObMVsFWzt3WazrWrblyJe0fViy+KK4k8l3JLr31l9V/ndzPaE7b2l9qX7d+B2CHfc3em681iZYlle2dCu4F2t5czyovK3u1fsvlZhW3FgD2mPZI+0MqiyvUqvakfVp+qk6oEaj5rmvep7t+2d2sfb17/fbX/TAY0DxQc+HhQcvH/I91BrrUFtxWHc4azDz+ui6rq/Z39ff0TtSPGRz0eFR6XHwo911TvU1zeoN5Q2wo2SxrHjccdv/eD1Q3sTq+lQM6O5+AQ4ITnx4sf4H++eDDzZeYp9qukn/Z/2ttBailqh1tzWibakNml7THvf6YDTnR3OHS0/m/989Iz2mZqzymdLz5HOFZybOZ93fvJCxoXxi4kXhzpXdD66tOTSna6wrt7LgZevXvG5cqnbvfv8VZerZ645XTt9nX297Yb9jdYeu56WX+x+aem172296XCz/ZbjrY6+BX3n+l37L972un3ljv+dGwOLBvruLr57/17cPel93v3RB6kPXj/Mejj9aP1j7OOiJwpPKp6qP6391fjXZqm99Oyg12DPs4hnj4a4Qy//lfmvT8MFz6nPK0a0RupHrUfPjPmM3Xqx9MXwy4yX0+OFvyn+tveV0auffnf7vWdiycTwa9HrmT9K3qi+OfrW9m3nZOjk03dp76anit6rvj/2gf2h+2P0x5Hp7E/4T5WfjT93fAn88ngmbWbm3/eE8/syOll+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpn98BrAAAhsElEQVR4Ae17d3hUxdr4nLI9Pdl0SCAhgQSlGlRANiiiCHovslGRIhZAL6KAip2DiICC7buioF6vio0FFLEBAqGIoCBSQiChpfeyvZz2e9+zuyFAgKC/f77n2/d5Ts7snJl3Zt4+70wICUGIAiEKhCgQokCIAiEKhCgQokCIAiEKhCgQokCIAiEKhCgQokCIAiEKhChwpRSgnr/r64wwknPNsF5Ze2xeoj1R2diD1ZVtmbZyoAuQUfDInUHKcTLNcZS0bFzV9UZjvCovnS395bi3T4m7sHzJF7cUcRwH3zmpM7j+L7dBOpHCYXQhEKGwsAFofxSeefDMB17kUJzJDO9CMm+bSaQoqlO86YiesixDd39/mUB50fQf00sP2zaovfGJEXSWy+Zs7apJOXPzW5tu28yZtrFcYb7QEaL2dQoiQsnbtm1jP3nYcCRSk5hB6evKq93FiZFptuEr18/YGxSU9v3+95Rlymy20GZiJkcbClE5SI7RJB/NJTIK/99dB9Ivn8xnCgkBXFeiLDK92kyoAgv267xQPDp07wxRou8jsvDdvx6/9pXcAsqnLOrum17ot/fXI39Y6RhybdI0EkM5d646nn+Df4EytLn0ICYQmEIQmOmDds5pthuXFjX9KBTVzWL7XDVy3sHDG18yEY4tJFxAoBR8AdqhQF8ad6Bh+xcNRgo6XnG/IA5YD4cPDo5Ph4DMKSAW2qJo5OWYI9NmYIjFogjFRXF2NJDJBLQpDNKGkHWcPb7ot5q8ijI5URNLetIUn0IRSktTKqcsasskq+Z4t2xDzZCbDL8NnEZZgzhXm2WmwEKJwd/nv81kNWMhBeKjw34eWl2t20E0qYSVJRIdeWb9e7vz/0ENIFNV+8lK/p8Dl718oGjjc8kxBb4u4Xnq2Ojqyct/veWTIJPPRxz8HdT0JXfvSv7zgOpIi+CK3nFmNumZ3vvAHyc/7R9ohwJ3RQQK4g++g+MEf+N7tXk1LL7gootv39YMbS3nte0IJ/Y5nzloRlfN9WbZqp2xLqusZRmNpI9m3OnJuuqRC6mKc8eRYZyLMyTYNmBFkS4S4GeeGLnln9ZGaVJji2eojgmLsotOIog2IqkcArT1gehriRBB61VGEgkPodV1SZFJm8Lj3Kte2JC8CfGaQRguNnZQEJ645bdnik+4XoFhvbxMaVLDyOkP3zRlsfvJCtDUleS5h2bPn7moYlxZ3YbsSF0WYRr1C5c/vHPDI+8ObeEI+PeLmCyOs+BiSPFR8pLIREefqV8rREbq2Iz0nnP/OHmWqMGJTO63+gG9N+shrSpatAlVez8sun42yAjg6FjDgwys3ffewLt7f/VWd/1NTR6vN6rBdfxMgSV/Ao59afDjnjI0jPUVvf9JGju4a7g21dbgKo1iT/7yGPTdFxSIQBwjo4aWvi1r3t+wZ6TLIdw1LnNjHsX6MhlCEwnYAr6V0CoVWFa9Z0rOsWOpCSk7IqNYyxNf63YhIy7FEJwrjkP5XYo8++Z1o8f3/myBzU739Ug+kIqKRj7BvVzSlq5Va7ZVdU8b6KW0NbzdeVBddIJovGx6dnnL1Wapodu4SvfNE7vYe0+c1b9xW2zPyqef/5z6DWgJFlOhZYeKJ/F0ooYxECffRBmYcBKfYNhA5VMCi51QA8DM8OOHLH+hqbVidY1tpy8s9p+p+3+reRbm/WShaRgEMOiHzoWgtXh8xI7B1eW6B+o9h8Rj1jXs9dkjvrBseW4ztGYCZo9Cs4SadW/2d0+eEeqzfZ56kqCKzFt05+//fmYtdSrIjHNHOPsrWpfK/OnYdm1xYzXpGfsPIklevf/rxYXI/12RU2rUzFHe6+K5zGL+o7wexnFEL/OkJzAzCO3Hfzx//Vhu5Rqu1SZc5RTtRKAqbAzt/DYySTrQ4Dl9iqWJWk3H9qqr8PbXOFNMp13X9e2i7zlzTn/7xvhuLc/PtVD7ULiRE2DWz2FIQNgUWt43bOWyosOVs92UitCiTU7sShbnDcleOvuNgubgvAj56WxRKZ05RsiZ9ZPMQ54tKl23YEvpoElXpTyZn1aUsXfOoJJpy/ZSKzsSxFxili3Q32sXY2XCQIlmKdktRCeHfYFoQRAwOlV8FPX5rkcsw3s+s6no1Nab4wx9ZSJGPfbCHZs/WbA+/3BQM7G9H2SqsJBS/H5jGb0EZJkcb7AwWUk5zpzM3s/tLkZTZSYWi4VA0Mlg0Pn4TV/f5BEjsu3ecqHZdUSISXxQW1VvHwf4Xi0qUnYoQeQXvDU6nZOi1LZG5xGDN3IoE83oWi9o1HEFMIIDLeFkDR3R4PQcJi5vtahXJzgkVnQoXQoL6WBQfP/Q//yntLR+SpPgJCqp0ZvQTbXw2iG93n1i2fhGUnrhAA9MMGcePLLm2a+Ppky5NvWFkd1P9L/xuZtrHlu4iVquiOA51k6mgsHlPUNf/7S0uG6CzESQOFbmEzPiC1bunPLNl78D3cCfEwJsMxOSm5vbJkhFXBEolB8+sVjKoTT5lmHDjmw8MOjV66PXkN6xY1bM7FsS8baFWhq0wOfP2NUqhElIatlDUyJdEaXm92MbRRCwAIym0Yf2yMx5qrGl4sbylo1UROKDqrKTvtfg8y3w7RyLwJkKgblEmDZo69SWVv3gSutWn10uVveKy1/8wYZHT4NTYEEIFEHhCrcrfZvrmckCpSY+0c7WOQ+waXwD0dUbxoOlWArmFnz9hdqdmwuSjKunRR+RRUnLRDAUxRJWS/E47ysBtQpcLhNGGFrNSBRESiqPG/uDEChxxrj+yzacKm0d7YVwJtZArD1ycsa+uWH81jV7sZUZmINMKfLzVykT8uEq7gR8vH/EwFv27jp183t1rrfYQfRD7zx7S1nkKz+lLYJv2D7AzHxURcFsWvBy8Z9nJuh1PYQYVRyblETGr9h5zzcDBqxQjRlTI3JcIO6BdaMidQSgZBAPWKSftq967ZbrHzdsPDxuHkvWC9kxI1978oYj9a/t6P1JR5bBJfFqQtMQf7hJTLKhBNIESEcKNMUP/kDKxK74buLB1KQe/3a6iugG12GfV4gZ+cjQjai1Mmi2IjiKeQMNf/2B3TEtjeJLLZ7T5HjTBnVafK+SfzwwAwUHYJtCXAyKgNTSkrs3Jbud7Bi70EK0rLsxOyO+rs7xJ+FpTZ/ZI3YNxx5gQNrmg7/9MF95hRnC3OBbYNJ+mqo0tDfwPcCYQPNLvDQ6tq0/BF98uJZ2BprLBUMWLi0vbx0tMjo+mo0kGV1TJqMQ5BJOjesFlsB6cPeA72CZk9BSAg5m877lK/KSZr942PEYOVj/hVRbE/nK3OFFtwKNJaQbbD2hXaEw4bZl1x86VPQcYWMFoz6HjYymV6zYe88awM3u3z+Nh7HOUbiLLQeEAASGU9b+0+43uf6JE3fuqJjB1rqPk6bmiOXcpM1dMV7xzx0sEcwDcUlEjvaJLqIiAnG5HD9gnYlwzDmE5ziT0nhIv2sWpiRl1JU1fa92Sh7SWqtZvPr13To0n8hYjvMz7OC+5vmgPQlV1u0+vY4iacnp82fO7OHFmAMIoHAsHywHDnb8hLNApMMifCAIjFb81hhvfKnV8QdxSTChFvV92OZi0o/fWJbxgEGA/a6f77Sa9mD9lQCroQV/b4qAWeFbW04pwjRl1JuDjhw7NocG5kSoU1QR0er/vr3t7vXInCLC+S7FHFQg+K6stfDIsoUDEx8o/r3qMbrOXUJaGsLf2f36aoVuloAFOXn68CK720eM4f1ZVvY6u2QaXsU1mM05AavR+RXhvPy0JkD7zHnJUV3JyQaLj2ciDQ3Hk+chJo6bB4+faOteqYyF4CbOCzsSDXGSpPjw09jGZBrmZyj+QFAQw+Kf/WhUQ3JCxsuMbCX19t+8PBufsXW163lsMyrzRzW0FGaN/CmvpdUxo8lxSDzu2KNOS+q27Ydfl3yObSDmUKyBvwzCA0Gi28ZOckle4vPVkNg4/dYYNqtQHV5Jmt0niMPJjlo2ZXsXAgElBm3YLwjzOMyqEaLTGj2CKPEQsCtA05TPX+r8X4ZhFHeCKGhCCe5TDyiu4UTV4Rd8fBiJ0mVSalkkiYmxbyHWzjInSDdwb1JMVMzSBO015HTzei/oXbe163Om+2fISQW3vZhf3nj0hriw/nykJp0Y9Mx3i9eOPgUb4Qu2tv4+l/8bpPXawhe3J8dl/X7M+pO62VVEHHb1+OfGb0lDiwQMUWjaUNMSBfueaAmU28O31qb0ToBdBoBpu3QO0bEOkpcKE79+4ql3wUUcLmv+QWP31cjNTZrZz9++NfvHE6MULao8U/OqF/xMmX0vSY2KI6nJqS9gf/Rd8FKYFzCbZNbIDfleUdfPwdeBb7fa4uJiCj/aMvNouD56X5PzD4jKddGnS1VjsX9hYNJYRgjwnSTrdDwsCeYGNWDX0c35W3T+L83IomJRcPsH6VUOYpypd72dUVZ7dES0LkvSqIwMS9E73tx825+I1WIxd8pMY1sTB1YXID21y/YuyWn209ZfNFZvJbE1UJOwHqG8ouIfVY1nSKw+G/egJDJRpZhmiAn/DsgmUF4UQgMbtSVWowLlOuaRmDCtuzbSj9oYr/C5scIdLvJiuCg5SESMqmLWmwNrcGAU5AsEAQitbCepAkpMTknjonRhpNq6XRDZWG3FaWkZdpyc9+Ekt4se1uI942ngq5mU+ORV67Yt+AU+YQCjCBK2C8Y5TTVkokBriMdXS7R6+rv3vptchd/jY7p/6XIdIla+njgaVROxrhDcD77Ph0aSJBGJkoKCAZFHgEnzzm/awe9AgEcHtnIoSMp+m5DT5SdGu3iXOkybzmsgkDToDYcRAW6NkRYdIOuwCokJH6iV38w8KXnVf+iA0VbPKdkhS71em7T/auxEUb6RKroHUbMxaga2pXILr2gkbu06RNrJSqO5SOnfNT3hsEEbQ6yuUloAy1ZfTZSEXtFRPyJrg08rSrLaJ9iIJkreFUCvyEAHgqCYdmQG9dWOWeuSErptrLHtULV4SnmXL/K2Z0dve6ypyvGMG8zLKdvv2jRjvLtXZs58RArEaFuQP0gsEF+++5suHpd6nM1XT0RgeFJ8wmeBCZBu6QPXhcXxtnrHIeImqgGzRxbmK3gCQWmwXds7KAVQIQflAFULLT3MN/DGcvAJ1PmTXvADTlf8Sw5O9HT18UzREU80TDglQiwam6ovhf7EqBz4YOlKwKwgN8bGVYXBttDuq+bVtE7TUkH1RSxVlbWpydpuIAixRKOSa7tfE25XsHPzr2SQC9paLP4tptMn72G8et4nNKgdQhPRhlH9Ni/eF2kpylXcaH2DR+WRBaKVPcRl9Sp7IYgxlDn7qXIBasXEK98gAHwuKSqVQOCo8gF9jxyxvumVmZ5NrlLeI9tIUkLqsg+/nX0CejABrVCwBYPE0yfJXSIdEWYDM6mLFkpHDL99a2A45t+WgtOxEek/tzp+Jx7YzTnqNPfjN+4yTKAohrCMKhgsogVCbUTe4rv9E6xTrAzFSB4eImZFdmRQGohdImLoHgwbRVhaS4sg3KJMlQAO8te01M+QyOjwOhWtg6SXU0YO1FTx6jFTSVe3aDNo2BhZBZk98E2Ned1ibDhWMA7C8l8DfxwlVYZbIwxRsEY34UHrJTdJOXRcigji1BhlowfWSGmtjtzeyco6jUZ/kArmr2MImHjm422P7B/Ze94HB45vfbDFXcxHqruqPK4j0jHHflVGYnLloGt6Ly08gDhWAwNQARH8ySY8jVwx1TXRCXkb3ldN4lMivprCdfOgTzOSIsh0WUhsVJePK6q3jm2BoNFAut2+9IEtaU98eGMZBo3B5Isf5xl4oWzKkIdwkpaaOPPDV1cMgHQAuH7UdMVtQKQpAfPRbyhnrBS4ENB0mZZBCpw2e/dwfR2EGJhSoaX//rdQA14iTkVrATPkC6He55Ab/eP9lb9+F8QyrJWlIfEpeikfMEWnZiJjfXclE7YUklQGCYQOohXGNXi06CVz/8o4HfdJTgkndW6dIDucQAUfCANYoyp3G4/1YeouMgTsHrfj5IIvJytc86cN2iWUOkKNph4ekpmV9XJjc9VdJ5q+D++fMEmqdhbJkVoVSU3qMn/JymlWk8kEJ2j+LCPiwSNbiA/EdQsctwok8mqbt1SmVK1il4QBn+J3kxJY5RILZyFTRjzw8/zqQyUN1n1ZiYaciJNFnruhyZJA0Ija3Q5E2PbpiNNXJde0fBNBDI5ulKSSJAkcIvhz4CNsk4G1CoBo0MBfEAWQBTAhIi3bdRFuvonQEX7apGM7WYLv0BCSVITwkLMSzxsTG10ZsDKLzFbUQgS1pBiRlWVgPrgeGmIlBqwFzFs+WnRleDvTmoEMAaOsBbQDgipBooPaiRFPOg+xSXyauow0KNjwm0IvP0UuMgKaehNkCN9Zd2/ZmP4LllitR14+1fyT4KG16oQE3Z6f9i79kKKWYaTfFiAiKosFL1MQ0lxHpqA7sXnLqcgY7ab3f5gK5ohjOS64Z+bUY7hk1019Zn9dV3N0bquvjmhbDFPAkizLz8egEZNRQUiHAkUE8G+x+lyqX1b658s2DXzw1Vdv18fHf8sbDEQyGgnsq/0LKywkVEMDoZ1OQtfXE9VTTxHn+MHvfLz7UM0EjC/goU33mXjy1mIbyg+4G5izTHRGJio44l9/M+EsMJymWZkBzfQ4vM0UU94IUgYrkikUEhWj1dU31KphDPQe/1/ADhGH5KNZtHAIDCXzYRF0G288ra5kHqyzl2nZ5B8QYxp/cI+29pJQSEyKhhh0UR+x4U0QHhhUw7o8TUxp0y2gc8FsY0ALgc3+vL40Z8yGnl6PekwLxAYOeS/p0VO/wj8QBwzGFCo+nEKEGwfnfKBPPOius+8jPkqf/e0r1Bhsawoko9pPELd/AmiZzItwQ4eIc+d+a58yhXgKCogvPx92olCHD5axDr/NnUvsUCfJgsrHKtoCGCkJckqUaLd7SgXQEprRi2DBiUGt6objFRF/gNl+7M6WfTYqXnE3kE5nUHDjiLDKvu0Exes9gmCFFAicWtGG2MpSOP4DmM/NbyfwnR3lwnY+rUPv8QhqPF1EoA18Y3I2BkV+aKq3RrGUk8A1lGNYYzLlto17WUEI4CA+oYmmGTg6B91BZkSoEpWMId7UCbbBdxFcp8J3cxWZIjIRrNtXK/aKeFSMLn9q1sN9mjdM79O0Znrf5s8f7tv82bS+TRYor2/YM27l1aqvZBhDdgKTW+vYhxBHYeCMAssJMcptFCzCDMCdEylgzVYrIULAeuDY7R48AZSpYPYNPIgyZ8V54A4SwGjIPM1rgC6yJIVpUomzVtUL6/HA7MrBHyw217gT0AWoaQ3r4RvluB7MCQiHxK5dujY2ek4QHgI2mQpPPP5HeJgyBmT//g6YzQXKWmIjtAMZSqWB8xReA0LocjgP3r/oBsUJYGBsE+yJHlWNOLDfVZU4ntHo33Zi+ZKuARucBR3YHchbIMlkgeJFj8Lw4NUtbKfEbBCbvfH4tqg9Gzz3OCAzaXeX0JRglX627hwMLWiGQn0AXgK/wFACLlkW8TBJFSXxvlrK6i4lepI5krtzx9Xc2hsOrTbPg8snRHQIlejslDHPigSOehTjwXOEEWv9gKMAFHIBv99O7gN5iK5pvX7eV/nhKzbvaTZW35PYbZFZ2MV//QtLnQNwoxDcwpnK/ZuSd2w/0hdyoCgIjIr1nUoYGraHrMI0edjORs+ae7y+Gl7U56hEffRVgL3071gfnF1DA2q2hdRVOPqxYA0oWg8SL6iiosiR4Oy/nF+RpNZ7uzVWNRS//J93jmM9bAja4qF2lAl2ucgbk7GKIED8BWwEDira1b51vmm+Ulf8u+0OgY7o4vCUi166kkrpXzLmyMzF2iPZS8IP5i3SH8hbpPsj7xUdlg9fvTjsaPfXDL2u++0aQ0xjY53jABGZMLqqTFSswpJTK5U52mu1LHAcHbkiRhAhXoEQB2YpgstuK0JwCZi+2vDE79nGoX+Ut25nPWBFwUXc9Mb4uu7wCQLlc9Pdga4dviAmUeZ5srguT/ToEtW02seAGEbEkjXTpiknfCQ6LOlbNspFWtwlyuS9TSrFBYL56RBnZyuDaWa3UxwCR7SYE4EzpRYS3ZWsDeKoPlFjhP1WeHyapjxQh/MNksM/+WDjS70dTh5CD9Rnv1LCWdF5jMAtI/p/gmnV6V4IwOpdR5iEeOOv32z67EeCO4VfIW/0I/Ge8xQSD9lP+M/Wrz9sjOz5tcN1mGBq1mFl7nl7yg4jnsghzhaxTAPmBKJv/9wh2Fdh/ZWAIMiBOYNjkSX2yYlPwB4PDmyM1y6uIEsIhAtewsZoq09Kk7G+eoNygwOLlwFcO6wPoKVZnCGCWeYln5omVltaj7j/CXSm5i5cvKZb1LDSksZvNC5wgQ5eP3rF1B1J/lPCzgtd+8kE0vjyjBFfDOSdVL6KUgkaRs/ow4XNiy0j90Mcpqy56rjH4LOJRBfrUhJJgMPPyAAyRYrbI75YmYVTbFFgwDyjUkHA5oN9SjvALSP+fPSmb24SpPBrbd5qQRCrSWRYzKdYP2DAVGyPg1/wBM4nSLwxeZUB0h/NziJIaUfHHjnqmoR9EUSfoIWDADVuipTfvKRRClfwR/SJMAccHu7cEFnVPcWEUTv5ftdrlgxj/vo/q5drvIJdsnn1c9+YWNJr5X6K53Jlpc3FhkHfa849Cng5aergNZPhFt2NTsHB0xAHJHQPn899NqrSH6OY6Xy4EtY9acDLtaqPSZ3tV4+KiYor+jP9X4i780LXfiYyXJj1/66vcL4gUBqw1iqikb0kpZt2Pn4x5+YofLEzzVl46FfbcEzJH5iICQnRBp0WBMhK6SHWYhSlhO4+DxL1LLRtGWukR3jYvrS4jrG6SLG5V79+67DVvv14N1LhInLynCfoqz7bMmdXbGTKvkbHftYp2Im9iZ26jTut7IXcHoceogsQBFA8sAoiL/n3SGSeXzJwkMuAzysH5qyc+agEJ2w6A3Dr4AUTxZg1x4rqP6ZFJlxTWpTy2cfP/BwLl4JwZwPX2WUGbwoHH/yN5xG4c8IU7osFu/JtdTFv22B7ZnWXqGIS2c9X7ZrxOqL3m25lm0Zt/PX1T65OGvvt3oqF2hZfjcDz8c8sHHssH4XOnFuEgn4OgwLTu+Dld1srQdsLxPvzPpvkchlu90oeLxyasREJ8pLXvr3jF+WWUlGBYqXp+KoqKvHkmqw4kxIfmAJXDoKILysIXKBlmEZtoOAUG/fbSHmwCG19/eaJk2aP/rKP260b7RasQpPrKImLNn7z1gfj66A5c/GAThnAf9AF2UFjbJdVvHyGOLxlbjjoylq3tbgAW/jcQhhEmRCDMMq+mPeIATOv9O/UH8ARIDItQoRAS4JKEYSpcDPo1f8MsY82vZffpHtl94HyhcQh8v3+3HTjnrfukEcBcrglRYl4XTz44O/gAdncG8qmnTpk2FDhrY2ocf9AkjPYj34sWnAvTopTttN+MwbBpDL+7blrzVEJ9t9/K3uJhawrXV+WsXrZhBPXo0AhnTiTzHIQWCOzUTCUBywP/kbmogD6s67T+BmDf7y9uSHiAyuklN18vSYpnf3us30PPYtjW4hyeiphnxXfzti8/dBH5q93vVMCnwAX1xYoYts2ZuKPS4FKG6ZlQNMxWYcg8FJbsBi0Bg1nIp6j1cmqZncJq9LbSHJS14+xLZjGy0p5YaH/+DstpctaY0yKp8q2WyeAmWuu0XOIQ4BbEbSkiYCTaIjEIyB9qg7H+s4Bp1gNuMwQCekcEGZIAtPaKIFnle1b8pipIFxmZvl/C2pPLq6+gUlb8+qvzfdaj7ZuzTx8pun7OX1b97ycL89+LU++7t2Rct6bw+Rrnu5vHz7nhuJFk7P3lhyrLnvvz6YNhhbN+2WZObEPbP7jrftxXkBsGgShjeBIfHSDcPHbN3nMq8PZ+P2Fe8/MJbW+hriK4m4/vWTyPaj0gywtB4kOZDYKhvJgzgZ+4yVgFMCNr9UaZg09uLC2Tre+kW9QNcNxfpfu2i9fnP3YnWCloC8HjPLvprDPuXRSyHFO1eW1ioP28NAUo2MZSI2iRQCbAMlYRSKaKt0gEJzw5Jif+p8obswpa9q6s1W1PyY+rlvN6k3P78DRgkEkli8OyqTp/1n3UKXpqn+95/AdG3u8YWlpN8OIzCdu3TlGkCorNXrqJOU4UFnZuDomJaxPrR+Xf7EXx4umlpL3rZBVz7611Kr1OQ5XWz9vjoofGy/4MmBPDLmPIkweWeAaupnB43eommsec/V75c03TiipvHFUknhrvxhbzqAwOKamrW7IbrqJ0+shjtZ60uAqapaiDm1MzmHX5uVMX7P43XtboD8FAnCB1uFYeIajCMPyfAfQcfiQvJGv7K2549EM1UvhGdKw92f190xPiNF8HCWTLd0HkNZeA0lLqpn46j4l2m17SMypk7zR5qkb/cWHNVNaJE/6aetOSJkfqstIyXpx/V5u5foCGBksBwoNjofwWP6vsxzV9JioFGrr0q3XLPRbZz9d/C068dcvWYRMG/3BmH4xc+Trkt/zFPQqlu/K3PwGdkeziu9Z5g9iHuGIP0ECv5c8tf4KNBYxKKBYjtfhehcyDmtA5uhnH3w/4dFH39as4FYoUT7Wz53bPTJ48QV/Xw44E8dyj7/Rlj6e9TrRzZr1uiII5/ZVfHSbtcNv900n6QNvISbSm9xGosgdJJncntSf3HLr7eGDOc4c076/CVLy8PuyFjAYIGPf8aOf7DFwEHk1o+uoY/ldPpHNPQ/J9+eelB/uXWZ9qHd5yX25JQfvy/3z5MTeO1x3Zm6Rb0r/Wu6X8IycnTF8n+n62+Y+ed/qxOAcgvwKJtFuvXbSrbd33yhP6NMiT7qqUn5k+PdPY1t0F8E+nXoHJzx9zKd3XhO/UO4bv0Q055TI47N2/1tBCEETsKtt4ejb2iFuq29Xd5liO1wg2Rc2RpP3twC19bI4AgRFYnVmDdgGj+Evi/fcmStrbbPKq1dz6hFjyDCSTe4fcM3w5Xl9Htk6MHvOoYFZTxQP7DXzwKB+UzYNGDhkWXwOmWA2j8xrj+tCARygKNKAzNseyY15Sh7R/cfWG9LWymOHzP/E3+8K5xrUuumjPp82tPs8OSf9urrByYvkCX03f3UeQiBGGxPbl9vPt5NlBU+QAe1wteGH6OtsuZNIz+tzzhiXRIEMxhNW5QGND5YVE3/FzL9wqICyXZmGnkXToQAGhX3q2GeTru05rrhH7Ci5X/fRbvNtDw7Arv5b1WeRBIl9tuaCEhKMkmfe+VGPVulodoKxS3Flw87UcDJAXPn107suaB6q+DsUgHMRE/x3GKIoRB+PUV37yA75RYP2U0azEXYySoq4/Xf4fBZQgOGRHr337dTKypNjDVH6A6vWL9oJLRDPRfudxRAqhSgQokCIAiEKhCgQokCIAiEKhCgQokCIAiEKhCgQokCIAiEKhCgQokCIApeiwP8DWH45d4BFRCAAAAAASUVORK5CYII=</Image>
<Url type="application/x-suggestions+json" method="GET"
     template="https://search.yahoo.com/sugg/ff">
  <Param name="output"  value="fxjson" />
  <Param name="appid"   value="ffd" />
  <Param name="command" value="{searchTerms}" />
</Url>
<Url type="text/html" method="GET" template="https://search.yahoo.com/search"
     resultdomain="yahoo.com" rel="searchform">
  <Param name="p" value="{searchTerms}"/>
  <Param name="ei" value="UTF-8"/>
  <MozParam name="fr" condition="pref" pref="yahoo-fr" />
</Url>
</SearchPlugin>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2011 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 30037 $"/>
		<generation date="$Date: 2011-05-05 11:12:27 -0700 (Thu, 05 May 2011) $"/>
		<language type="yav"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 27726 $"/>
		<generation date="$Date: 2010-03-01 15:13:18 -0800 (Mon, 01 Mar 2010) $"/>
		<language type="yo"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2013 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 34238 $"/>
		<generation date="$Date: 2013-09-07 20:46:42 +0000 (Sat, 07 Sep 2013) $"/>
		<language type="zgh"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Tfng</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.9 $"/>
		<generation date="$Date: 2008/05/25 01:05:59 $"/>
		<language type="zh"/> 
        <script type="Hans"/> 
	</identity>
    <characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Hani</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:44 $"/>
        <language type="zh"/>
        <script type="Hant"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2007/06/04 01:05:49 $"/>
		<language type="zh"/> 
		<territory type="HK"/> 
	</identity>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2007/06/04 01:05:49 $"/>
		<language type="zh"/> 
		<territory type="MO"/> 
	</identity>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2007/06/04 01:05:49 $"/>
		<language type="zh"/> 
		<territory type="TW"/> 
		<variant type="STROKE"/> 
	</identity>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.5 $"/>
		<generation date="$Date: 2007/06/04 01:05:49 $"/>
		<language type="zh"/> 
		<territory type="TW"/> 
	</identity>
</ldml>

<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd">
<ldml>
    <identity>
        <version number="$Revision: 1.1 $"/>
        <generation date="$Date: 2009/03/24 17:40:42 $"/>
        <language type="zh"/>
    </identity>
</ldml>
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Copyright (c) 2010 International Business Machines Corporation and others. All rights reserved.
-->
<!DOCTYPE ldml SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldml.dtd"
[
   <!ENTITY % icu SYSTEM "http://www.unicode.org/repos/cldr/trunk/common/dtd/ldmlICU.dtd">
   %icu;
]
>
<ldml>
	<identity>
		<version number="$Revision: 1.23 $"/>
		<generation date="$Date: 2008/05/25 01:05:51 $"/>
		<language type="zu"/> 
	</identity>
	<characters>
		<special xmlns:icu="http://www.icu-project.org/">
			<icu:scripts>
				<icu:script type="1">Latn</icu:script>
			</icu:scripts>
		</special>
	</characters>
</ldml>

